function Eb(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Md={exports:{}},Ba={},Td={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Pb(){if($f)return Re;$f=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function w(L,H,U){this.props=L,this.context=H,this.refs=v,this.updater=U||j}w.prototype.isReactComponent={},w.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=w.prototype;function M(L,H,U){this.props=L,this.context=H,this.refs=v,this.updater=U||j}var A=M.prototype=new S;A.constructor=M,_(A,w.prototype),A.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function R(L,H,U){var G,z={},Z=null,ie=null;if(H!=null)for(G in H.ref!==void 0&&(ie=H.ref),H.key!==void 0&&(Z=""+H.key),H)P.call(H,G)&&!B.hasOwnProperty(G)&&(z[G]=H[G]);var xe=arguments.length-2;if(xe===1)z.children=U;else if(1<xe){for(var ze=Array(xe),st=0;st<xe;st++)ze[st]=arguments[st+2];z.children=ze}if(L&&L.defaultProps)for(G in xe=L.defaultProps,xe)z[G]===void 0&&(z[G]=xe[G]);return{$$typeof:t,type:L,key:Z,ref:ie,props:z,_owner:F.current}}function C(L,H){return{$$typeof:t,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function T(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(U){return H[U]})}var W=/\/+/g;function ee(L,H){return typeof L=="object"&&L!==null&&L.key!=null?T(""+L.key):H.toString(36)}function ae(L,H,U,G,z){var Z=typeof L;(Z==="undefined"||Z==="boolean")&&(L=null);var ie=!1;if(L===null)ie=!0;else switch(Z){case"string":case"number":ie=!0;break;case"object":switch(L.$$typeof){case t:case e:ie=!0}}if(ie)return ie=L,z=z(ie),L=G===""?"."+ee(ie,0):G,E(z)?(U="",L!=null&&(U=L.replace(W,"$&/")+"/"),ae(z,H,U,"",function(st){return st})):z!=null&&(O(z)&&(z=C(z,U+(!z.key||ie&&ie.key===z.key?"":(""+z.key).replace(W,"$&/")+"/")+L)),H.push(z)),1;if(ie=0,G=G===""?".":G+":",E(L))for(var xe=0;xe<L.length;xe++){Z=L[xe];var ze=G+ee(Z,xe);ie+=ae(Z,H,U,ze,z)}else if(ze=b(L),typeof ze=="function")for(L=ze.call(L),xe=0;!(Z=L.next()).done;)Z=Z.value,ze=G+ee(Z,xe++),ie+=ae(Z,H,U,ze,z);else if(Z==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ie}function ge(L,H,U){if(L==null)return L;var G=[],z=0;return ae(L,G,"","",function(Z){return H.call(U,Z,z++)}),G}function Y(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(U){(L._status===0||L._status===-1)&&(L._status=1,L._result=U)},function(U){(L._status===0||L._status===-1)&&(L._status=2,L._result=U)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var re={current:null},V={transition:null},te={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:V,ReactCurrentOwner:F};function se(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:ge,forEach:function(L,H,U){ge(L,function(){H.apply(this,arguments)},U)},count:function(L){var H=0;return ge(L,function(){H++}),H},toArray:function(L){return ge(L,function(H){return H})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Re.Component=w,Re.Fragment=s,Re.Profiler=i,Re.PureComponent=M,Re.StrictMode=r,Re.Suspense=h,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Re.act=se,Re.cloneElement=function(L,H,U){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var G=_({},L.props),z=L.key,Z=L.ref,ie=L._owner;if(H!=null){if(H.ref!==void 0&&(Z=H.ref,ie=F.current),H.key!==void 0&&(z=""+H.key),L.type&&L.type.defaultProps)var xe=L.type.defaultProps;for(ze in H)P.call(H,ze)&&!B.hasOwnProperty(ze)&&(G[ze]=H[ze]===void 0&&xe!==void 0?xe[ze]:H[ze])}var ze=arguments.length-2;if(ze===1)G.children=U;else if(1<ze){xe=Array(ze);for(var st=0;st<ze;st++)xe[st]=arguments[st+2];G.children=xe}return{$$typeof:t,type:L.type,key:z,ref:Z,props:G,_owner:ie}},Re.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Re.createElement=R,Re.createFactory=function(L){var H=R.bind(null,L);return H.type=L,H},Re.createRef=function(){return{current:null}},Re.forwardRef=function(L){return{$$typeof:u,render:L}},Re.isValidElement=O,Re.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:Y}},Re.memo=function(L,H){return{$$typeof:f,type:L,compare:H===void 0?null:H}},Re.startTransition=function(L){var H=V.transition;V.transition={};try{L()}finally{V.transition=H}},Re.unstable_act=se,Re.useCallback=function(L,H){return re.current.useCallback(L,H)},Re.useContext=function(L){return re.current.useContext(L)},Re.useDebugValue=function(){},Re.useDeferredValue=function(L){return re.current.useDeferredValue(L)},Re.useEffect=function(L,H){return re.current.useEffect(L,H)},Re.useId=function(){return re.current.useId()},Re.useImperativeHandle=function(L,H,U){return re.current.useImperativeHandle(L,H,U)},Re.useInsertionEffect=function(L,H){return re.current.useInsertionEffect(L,H)},Re.useLayoutEffect=function(L,H){return re.current.useLayoutEffect(L,H)},Re.useMemo=function(L,H){return re.current.useMemo(L,H)},Re.useReducer=function(L,H,U){return re.current.useReducer(L,H,U)},Re.useRef=function(L){return re.current.useRef(L)},Re.useState=function(L){return re.current.useState(L)},Re.useSyncExternalStore=function(L,H,U){return re.current.useSyncExternalStore(L,H,U)},Re.useTransition=function(){return re.current.useTransition()},Re.version="18.3.1",Re}var Uf;function Au(){return Uf||(Uf=1,Td.exports=Pb()),Td.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf;function Mb(){if(Hf)return Ba;Hf=1;var t=Au(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var p,y={},b=null,j=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(j=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(y[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:e,type:u,key:b,ref:j,props:y,_owner:i.current}}return Ba.Fragment=s,Ba.jsx=c,Ba.jsxs=c,Ba}var Wf;function Tb(){return Wf||(Wf=1,Md.exports=Mb()),Md.exports}var a=Tb(),N=Au();const Eu=qg(N),Db=Eb({__proto__:null,default:Eu},[N]);var Fo={},Dd={exports:{}},Qt={},Rd={exports:{}},Fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function Rb(){return Vf||(Vf=1,(function(t){function e(V,te){var se=V.length;V.push(te);e:for(;0<se;){var L=se-1>>>1,H=V[L];if(0<i(H,te))V[L]=te,V[se]=H,se=L;else break e}}function s(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var te=V[0],se=V.pop();if(se!==te){V[0]=se;e:for(var L=0,H=V.length,U=H>>>1;L<U;){var G=2*(L+1)-1,z=V[G],Z=G+1,ie=V[Z];if(0>i(z,se))Z<H&&0>i(ie,z)?(V[L]=ie,V[Z]=se,L=Z):(V[L]=z,V[G]=se,L=G);else if(Z<H&&0>i(ie,se))V[L]=ie,V[Z]=se,L=Z;else break e}}return te}function i(V,te){var se=V.sortIndex-te.sortIndex;return se!==0?se:V.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,y=null,b=3,j=!1,_=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(V){for(var te=s(f);te!==null;){if(te.callback===null)r(f);else if(te.startTime<=V)r(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=s(f)}}function E(V){if(v=!1,A(V),!_)if(s(h)!==null)_=!0,Y(P);else{var te=s(f);te!==null&&re(E,te.startTime-V)}}function P(V,te){_=!1,v&&(v=!1,S(R),R=-1),j=!0;var se=b;try{for(A(te),y=s(h);y!==null&&(!(y.expirationTime>te)||V&&!T());){var L=y.callback;if(typeof L=="function"){y.callback=null,b=y.priorityLevel;var H=L(y.expirationTime<=te);te=t.unstable_now(),typeof H=="function"?y.callback=H:y===s(h)&&r(h),A(te)}else r(h);y=s(h)}if(y!==null)var U=!0;else{var G=s(f);G!==null&&re(E,G.startTime-te),U=!1}return U}finally{y=null,b=se,j=!1}}var F=!1,B=null,R=-1,C=5,O=-1;function T(){return!(t.unstable_now()-O<C)}function W(){if(B!==null){var V=t.unstable_now();O=V;var te=!0;try{te=B(!0,V)}finally{te?ee():(F=!1,B=null)}}else F=!1}var ee;if(typeof M=="function")ee=function(){M(W)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ge=ae.port2;ae.port1.onmessage=W,ee=function(){ge.postMessage(null)}}else ee=function(){w(W,0)};function Y(V){B=V,F||(F=!0,ee())}function re(V,te){R=w(function(){V(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||j||(_=!0,Y(P))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(V){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var se=b;b=te;try{return V()}finally{b=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var se=b;b=V;try{return te()}finally{b=se}},t.unstable_scheduleCallback=function(V,te,se){var L=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?L+se:L):se=L,V){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=se+H,V={id:p++,callback:te,priorityLevel:V,startTime:se,expirationTime:H,sortIndex:-1},se>L?(V.sortIndex=se,e(f,V),s(h)===null&&V===s(f)&&(v?(S(R),R=-1):v=!0,re(E,se-L))):(V.sortIndex=H,e(h,V),_||j||(_=!0,Y(P))),V},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(V){var te=b;return function(){var se=b;b=te;try{return V.apply(this,arguments)}finally{b=se}}}})(Fd)),Fd}var qf;function Fb(){return qf||(qf=1,Rd.exports=Rb()),Rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf;function Lb(){if(Yf)return Qt;Yf=1;var t=Au(),e=Fb();function s(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function l(n,o){c(n,o),c(n+"Capture",o)}function c(n,o){for(i[n]=o,n=0;n<o.length;n++)r.add(o[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function b(n){return h.call(y,n)?!0:h.call(p,n)?!1:f.test(n)?y[n]=!0:(p[n]=!0,!1)}function j(n,o,d,m){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,o,d,m){if(o===null||typeof o>"u"||j(n,o,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v(n,o,d,m,g,x,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=d,this.propertyName=n,this.type=o,this.sanitizeURL=x,this.removeEmptyString=k}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new v(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];w[o]=new v(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new v(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new v(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new v(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new v(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new v(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new v(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new v(n,5,!1,n.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(S,M);w[o]=new v(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(S,M);w[o]=new v(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(S,M);w[o]=new v(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new v(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new v(n,1,!1,n.toLowerCase(),null,!0,!0)});function A(n,o,d,m){var g=w.hasOwnProperty(o)?w[o]:null;(g!==null?g.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(_(o,d,g,m)&&(d=null),m||g===null?b(o)&&(d===null?n.removeAttribute(o):n.setAttribute(o,""+d)):g.mustUseProperty?n[g.propertyName]=d===null?g.type===3?!1:"":d:(o=g.attributeName,m=g.attributeNamespace,d===null?n.removeAttribute(o):(g=g.type,d=g===3||g===4&&d===!0?"":""+d,m?n.setAttributeNS(m,o,d):n.setAttribute(o,d))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),T=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),V=Symbol.iterator;function te(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,L;function H(n){if(L===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);L=o&&o[1]||""}return`
`+L+n}var U=!1;function G(n,o){if(!n||U)return"";U=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var m=Q}Reflect.construct(n,[],o)}else{try{o.call()}catch(Q){m=Q}n.call(o.prototype)}else{try{throw Error()}catch(Q){m=Q}n()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),x=m.stack.split(`
`),k=g.length-1,D=x.length-1;1<=k&&0<=D&&g[k]!==x[D];)D--;for(;1<=k&&0<=D;k--,D--)if(g[k]!==x[D]){if(k!==1||D!==1)do if(k--,D--,0>D||g[k]!==x[D]){var I=`
`+g[k].replace(" at new "," at ");return n.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",n.displayName)),I}while(1<=k&&0<=D);break}}}finally{U=!1,Error.prepareStackTrace=d}return(n=n?n.displayName||n.name:"")?H(n):""}function z(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=G(n.type,!1),n;case 11:return n=G(n.type.render,!1),n;case 1:return n=G(n.type,!0),n;default:return""}}function Z(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case F:return"Portal";case C:return"Profiler";case R:return"StrictMode";case ee:return"Suspense";case ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case T:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case W:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ge:return o=n.displayName||null,o!==null?o:Z(n.type)||"Memo";case Y:o=n._payload,n=n._init;try{return Z(n(o))}catch{}}return null}function ie(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ze(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function st(n){var o=ze(n)?"checked":"value",d=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),m=""+n[o];if(!n.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,x=d.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){m=""+k,x.call(this,k)}}),Object.defineProperty(n,o,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Et(n){n._valueTracker||(n._valueTracker=st(n))}function is(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return n&&(m=ze(n)?n.checked?"true":"false":n.value),n=m,n!==d?(o.setValue(n),!0):!1}function ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function X(n,o){var d=o.checked;return se({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??n._wrapperState.initialChecked})}function be(n,o){var d=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;d=xe(o.value!=null?o.value:d),n._wrapperState={initialChecked:m,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ae(n,o){o=o.checked,o!=null&&A(n,"checked",o,!1)}function ke(n,o){Ae(n,o);var d=xe(o.value),m=o.type;if(d!=null)m==="number"?(d===0&&n.value===""||n.value!=d)&&(n.value=""+d):n.value!==""+d&&(n.value=""+d);else if(m==="submit"||m==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?we(n,o.type,d):o.hasOwnProperty("defaultValue")&&we(n,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Fe(n,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,d||o===n.value||(n.value=o),n.defaultValue=o}d=n.name,d!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,d!==""&&(n.name=d)}function we(n,o,d){(o!=="number"||ft(n.ownerDocument)!==n)&&(d==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+d&&(n.defaultValue=""+d))}var De=Array.isArray;function rt(n,o,d,m){if(n=n.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<n.length;d++)g=o.hasOwnProperty("$"+n[d].value),n[d].selected!==g&&(n[d].selected=g),g&&m&&(n[d].defaultSelected=!0)}else{for(d=""+xe(d),o=null,g=0;g<n.length;g++){if(n[g].value===d){n[g].selected=!0,m&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function ne(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(s(91));return se({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function oe(n,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(s(92));if(De(d)){if(1<d.length)throw Error(s(93));d=d[0]}o=d}o==null&&(o=""),d=o}n._wrapperState={initialValue:xe(d)}}function me(n,o){var d=xe(o.value),m=xe(o.defaultValue);d!=null&&(d=""+d,d!==n.value&&(n.value=d),o.defaultValue==null&&n.defaultValue!==d&&(n.defaultValue=d)),m!=null&&(n.defaultValue=""+m)}function He(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function os(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?os(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var pe,Pe=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,m,g){MSApp.execUnsafeLocalFunction(function(){return n(o,d,m,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=pe.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function pt(n,o){if(o){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=o;return}}n.textContent=o}var Os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sh=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(n){sh.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),Os[o]=Os[n]})});function mr(n,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Os.hasOwnProperty(n)&&Os[n]?(""+o).trim():o+"px"}function Si(n,o){n=n.style;for(var d in o)if(o.hasOwnProperty(d)){var m=d.indexOf("--")===0,g=mr(d,o[d],m);d==="float"&&(d="cssFloat"),m?n.setProperty(d,g):n[d]=g}}var R0=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(n,o){if(o){if(R0[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(s(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(s(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(s(61))}if(o.style!=null&&typeof o.style!="object")throw Error(s(62))}}function Wl(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function ql(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yl=null,fr=null,pr=null;function nh(n){if(n=_a(n)){if(typeof Yl!="function")throw Error(s(280));var o=n.stateNode;o&&(o=Xi(o),Yl(n.stateNode,n.type,o))}}function rh(n){fr?pr?pr.push(n):pr=[n]:fr=n}function ah(){if(fr){var n=fr,o=pr;if(pr=fr=null,nh(n),o)for(n=0;n<o.length;n++)nh(o[n])}}function ih(n,o){return n(o)}function oh(){}var Kl=!1;function lh(n,o,d){if(Kl)return n(o,d);Kl=!0;try{return ih(n,o,d)}finally{Kl=!1,(fr!==null||pr!==null)&&(oh(),ah())}}function na(n,o){var d=n.stateNode;if(d===null)return null;var m=Xi(d);if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(s(231,o,typeof d));return d}var Xl=!1;if(u)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{Xl=!1}function F0(n,o,d,m,g,x,k,D,I){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(d,Q)}catch(ce){this.onError(ce)}}var aa=!1,Ci=null,Ai=!1,Ql=null,L0={onError:function(n){aa=!0,Ci=n}};function I0(n,o,d,m,g,x,k,D,I){aa=!1,Ci=null,F0.apply(L0,arguments)}function O0(n,o,d,m,g,x,k,D,I){if(I0.apply(this,arguments),aa){if(aa){var Q=Ci;aa=!1,Ci=null}else throw Error(s(198));Ai||(Ai=!0,Ql=Q)}}function In(n){var o=n,d=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(d=o.return),n=o.return;while(n)}return o.tag===3?d:null}function ch(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function dh(n){if(In(n)!==n)throw Error(s(188))}function B0(n){var o=n.alternate;if(!o){if(o=In(n),o===null)throw Error(s(188));return o!==n?null:n}for(var d=n,m=o;;){var g=d.return;if(g===null)break;var x=g.alternate;if(x===null){if(m=g.return,m!==null){d=m;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===d)return dh(g),n;if(x===m)return dh(g),o;x=x.sibling}throw Error(s(188))}if(d.return!==m.return)d=g,m=x;else{for(var k=!1,D=g.child;D;){if(D===d){k=!0,d=g,m=x;break}if(D===m){k=!0,m=g,d=x;break}D=D.sibling}if(!k){for(D=x.child;D;){if(D===d){k=!0,d=x,m=g;break}if(D===m){k=!0,m=x,d=g;break}D=D.sibling}if(!k)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?n:o}function uh(n){return n=B0(n),n!==null?hh(n):null}function hh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=hh(n);if(o!==null)return o;n=n.sibling}return null}var mh=e.unstable_scheduleCallback,fh=e.unstable_cancelCallback,z0=e.unstable_shouldYield,$0=e.unstable_requestPaint,at=e.unstable_now,U0=e.unstable_getCurrentPriorityLevel,Gl=e.unstable_ImmediatePriority,ph=e.unstable_UserBlockingPriority,Ei=e.unstable_NormalPriority,H0=e.unstable_LowPriority,gh=e.unstable_IdlePriority,Pi=null,Cs=null;function W0(n){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(Pi,n,void 0,(n.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:Y0,V0=Math.log,q0=Math.LN2;function Y0(n){return n>>>=0,n===0?32:31-(V0(n)/q0|0)|0}var Mi=64,Ti=4194304;function ia(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Di(n,o){var d=n.pendingLanes;if(d===0)return 0;var m=0,g=n.suspendedLanes,x=n.pingedLanes,k=d&268435455;if(k!==0){var D=k&~g;D!==0?m=ia(D):(x&=k,x!==0&&(m=ia(x)))}else k=d&~g,k!==0?m=ia(k):x!==0&&(m=ia(x));if(m===0)return 0;if(o!==0&&o!==m&&(o&g)===0&&(g=m&-m,x=o&-o,g>=x||g===16&&(x&4194240)!==0))return o;if((m&4)!==0&&(m|=d&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=m;0<o;)d=31-ys(o),g=1<<d,m|=n[d],o&=~g;return m}function K0(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X0(n,o){for(var d=n.suspendedLanes,m=n.pingedLanes,g=n.expirationTimes,x=n.pendingLanes;0<x;){var k=31-ys(x),D=1<<k,I=g[k];I===-1?((D&d)===0||(D&m)!==0)&&(g[k]=K0(D,o)):I<=o&&(n.expiredLanes|=D),x&=~D}}function Jl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xh(){var n=Mi;return Mi<<=1,(Mi&4194240)===0&&(Mi=64),n}function Zl(n){for(var o=[],d=0;31>d;d++)o.push(n);return o}function oa(n,o,d){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-ys(o),n[o]=d}function Q0(n,o){var d=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var m=n.eventTimes;for(n=n.expirationTimes;0<d;){var g=31-ys(d),x=1<<g;o[g]=0,m[g]=-1,n[g]=-1,d&=~x}}function ec(n,o){var d=n.entangledLanes|=o;for(n=n.entanglements;d;){var m=31-ys(d),g=1<<m;g&o|n[m]&o&&(n[m]|=o),d&=~g}}var We=0;function yh(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var bh,tc,vh,wh,jh,sc=!1,Ri=[],on=null,ln=null,cn=null,la=new Map,ca=new Map,dn=[],G0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(n,o){switch(n){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":la.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(o.pointerId)}}function da(n,o,d,m,g,x){return n===null||n.nativeEvent!==x?(n={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[g]},o!==null&&(o=_a(o),o!==null&&tc(o)),n):(n.eventSystemFlags|=m,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function J0(n,o,d,m,g){switch(o){case"focusin":return on=da(on,n,o,d,m,g),!0;case"dragenter":return ln=da(ln,n,o,d,m,g),!0;case"mouseover":return cn=da(cn,n,o,d,m,g),!0;case"pointerover":var x=g.pointerId;return la.set(x,da(la.get(x)||null,n,o,d,m,g)),!0;case"gotpointercapture":return x=g.pointerId,ca.set(x,da(ca.get(x)||null,n,o,d,m,g)),!0}return!1}function _h(n){var o=On(n.target);if(o!==null){var d=In(o);if(d!==null){if(o=d.tag,o===13){if(o=ch(d),o!==null){n.blockedOn=o,jh(n.priority,function(){vh(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fi(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var d=rc(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(d===null){d=n.nativeEvent;var m=new d.constructor(d.type,d);Vl=m,d.target.dispatchEvent(m),Vl=null}else return o=_a(d),o!==null&&tc(o),n.blockedOn=d,!1;o.shift()}return!0}function kh(n,o,d){Fi(n)&&d.delete(o)}function Z0(){sc=!1,on!==null&&Fi(on)&&(on=null),ln!==null&&Fi(ln)&&(ln=null),cn!==null&&Fi(cn)&&(cn=null),la.forEach(kh),ca.forEach(kh)}function ua(n,o){n.blockedOn===o&&(n.blockedOn=null,sc||(sc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Z0)))}function ha(n){function o(g){return ua(g,n)}if(0<Ri.length){ua(Ri[0],n);for(var d=1;d<Ri.length;d++){var m=Ri[d];m.blockedOn===n&&(m.blockedOn=null)}}for(on!==null&&ua(on,n),ln!==null&&ua(ln,n),cn!==null&&ua(cn,n),la.forEach(o),ca.forEach(o),d=0;d<dn.length;d++)m=dn[d],m.blockedOn===n&&(m.blockedOn=null);for(;0<dn.length&&(d=dn[0],d.blockedOn===null);)_h(d),d.blockedOn===null&&dn.shift()}var gr=E.ReactCurrentBatchConfig,Li=!0;function ey(n,o,d,m){var g=We,x=gr.transition;gr.transition=null;try{We=1,nc(n,o,d,m)}finally{We=g,gr.transition=x}}function ty(n,o,d,m){var g=We,x=gr.transition;gr.transition=null;try{We=4,nc(n,o,d,m)}finally{We=g,gr.transition=x}}function nc(n,o,d,m){if(Li){var g=rc(n,o,d,m);if(g===null)wc(n,o,m,Ii,d),Nh(n,m);else if(J0(g,n,o,d,m))m.stopPropagation();else if(Nh(n,m),o&4&&-1<G0.indexOf(n)){for(;g!==null;){var x=_a(g);if(x!==null&&bh(x),x=rc(n,o,d,m),x===null&&wc(n,o,m,Ii,d),x===g)break;g=x}g!==null&&m.stopPropagation()}else wc(n,o,m,null,d)}}var Ii=null;function rc(n,o,d,m){if(Ii=null,n=ql(m),n=On(n),n!==null)if(o=In(n),o===null)n=null;else if(d=o.tag,d===13){if(n=ch(o),n!==null)return n;n=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Ii=n,null}function Sh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U0()){case Gl:return 1;case ph:return 4;case Ei:case H0:return 16;case gh:return 536870912;default:return 16}default:return 16}}var un=null,ac=null,Oi=null;function Ch(){if(Oi)return Oi;var n,o=ac,d=o.length,m,g="value"in un?un.value:un.textContent,x=g.length;for(n=0;n<d&&o[n]===g[n];n++);var k=d-n;for(m=1;m<=k&&o[d-m]===g[x-m];m++);return Oi=g.slice(n,1<m?1-m:void 0)}function Bi(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function zi(){return!0}function Ah(){return!1}function ts(n){function o(d,m,g,x,k){this._reactName=d,this._targetInst=g,this.type=m,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var D in n)n.hasOwnProperty(D)&&(d=n[D],this[D]=d?d(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?zi:Ah,this.isPropagationStopped=Ah,this}return se(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),o}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=ts(xr),ma=se({},xr,{view:0,detail:0}),sy=ts(ma),oc,lc,fa,$i=se({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fa&&(fa&&n.type==="mousemove"?(oc=n.screenX-fa.screenX,lc=n.screenY-fa.screenY):lc=oc=0,fa=n),oc)},movementY:function(n){return"movementY"in n?n.movementY:lc}}),Eh=ts($i),ny=se({},$i,{dataTransfer:0}),ry=ts(ny),ay=se({},ma,{relatedTarget:0}),cc=ts(ay),iy=se({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=ts(iy),ly=se({},xr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cy=ts(ly),dy=se({},xr,{data:0}),Ph=ts(dy),uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},my={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fy(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=my[n])?!!o[n]:!1}function dc(){return fy}var py=se({},ma,{key:function(n){if(n.key){var o=uy[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Bi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(n){return n.type==="keypress"?Bi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gy=ts(py),xy=se({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=ts(xy),yy=se({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),by=ts(yy),vy=se({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wy=ts(vy),jy=se({},$i,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ny=ts(jy),_y=[9,13,27,32],uc=u&&"CompositionEvent"in window,pa=null;u&&"documentMode"in document&&(pa=document.documentMode);var ky=u&&"TextEvent"in window&&!pa,Th=u&&(!uc||pa&&8<pa&&11>=pa),Dh=" ",Rh=!1;function Fh(n,o){switch(n){case"keyup":return _y.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yr=!1;function Sy(n,o){switch(n){case"compositionend":return Lh(o);case"keypress":return o.which!==32?null:(Rh=!0,Dh);case"textInput":return n=o.data,n===Dh&&Rh?null:n;default:return null}}function Cy(n,o){if(yr)return n==="compositionend"||!uc&&Fh(n,o)?(n=Ch(),Oi=ac=un=null,yr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Th&&o.locale!=="ko"?null:o.data;default:return null}}var Ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Ay[n.type]:o==="textarea"}function Oh(n,o,d,m){rh(m),o=qi(o,"onChange"),0<o.length&&(d=new ic("onChange","change",null,d,m),n.push({event:d,listeners:o}))}var ga=null,xa=null;function Ey(n){sm(n,0)}function Ui(n){var o=Nr(n);if(is(o))return n}function Py(n,o){if(n==="change")return o}var Bh=!1;if(u){var hc;if(u){var mc="oninput"in document;if(!mc){var zh=document.createElement("div");zh.setAttribute("oninput","return;"),mc=typeof zh.oninput=="function"}hc=mc}else hc=!1;Bh=hc&&(!document.documentMode||9<document.documentMode)}function $h(){ga&&(ga.detachEvent("onpropertychange",Uh),xa=ga=null)}function Uh(n){if(n.propertyName==="value"&&Ui(xa)){var o=[];Oh(o,xa,n,ql(n)),lh(Ey,o)}}function My(n,o,d){n==="focusin"?($h(),ga=o,xa=d,ga.attachEvent("onpropertychange",Uh)):n==="focusout"&&$h()}function Ty(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ui(xa)}function Dy(n,o){if(n==="click")return Ui(o)}function Ry(n,o){if(n==="input"||n==="change")return Ui(o)}function Fy(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var bs=typeof Object.is=="function"?Object.is:Fy;function ya(n,o){if(bs(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var d=Object.keys(n),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var g=d[m];if(!h.call(o,g)||!bs(n[g],o[g]))return!1}return!0}function Hh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wh(n,o){var d=Hh(n);n=0;for(var m;d;){if(d.nodeType===3){if(m=n+d.textContent.length,n<=o&&m>=o)return{node:d,offset:o-n};n=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Hh(d)}}function Vh(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Vh(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function qh(){for(var n=window,o=ft();o instanceof n.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)n=o.contentWindow;else break;o=ft(n.document)}return o}function fc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function Ly(n){var o=qh(),d=n.focusedElem,m=n.selectionRange;if(o!==d&&d&&d.ownerDocument&&Vh(d.ownerDocument.documentElement,d)){if(m!==null&&fc(d)){if(o=m.start,n=m.end,n===void 0&&(n=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(n,d.value.length);else if(n=(o=d.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=d.textContent.length,x=Math.min(m.start,g);m=m.end===void 0?x:Math.min(m.end,g),!n.extend&&x>m&&(g=m,m=x,x=g),g=Wh(d,x);var k=Wh(d,m);g&&k&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==k.node||n.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),x>m?(n.addRange(o),n.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),n.addRange(o)))}}for(o=[],n=d;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)n=o[d],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Iy=u&&"documentMode"in document&&11>=document.documentMode,br=null,pc=null,ba=null,gc=!1;function Yh(n,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;gc||br==null||br!==ft(m)||(m=br,"selectionStart"in m&&fc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ba&&ya(ba,m)||(ba=m,m=qi(pc,"onSelect"),0<m.length&&(o=new ic("onSelect","select",null,o,d),n.push({event:o,listeners:m}),o.target=br)))}function Hi(n,o){var d={};return d[n.toLowerCase()]=o.toLowerCase(),d["Webkit"+n]="webkit"+o,d["Moz"+n]="moz"+o,d}var vr={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},xc={},Kh={};u&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Wi(n){if(xc[n])return xc[n];if(!vr[n])return n;var o=vr[n],d;for(d in o)if(o.hasOwnProperty(d)&&d in Kh)return xc[n]=o[d];return n}var Xh=Wi("animationend"),Qh=Wi("animationiteration"),Gh=Wi("animationstart"),Jh=Wi("transitionend"),Zh=new Map,em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(n,o){Zh.set(n,o),l(o,[n])}for(var yc=0;yc<em.length;yc++){var bc=em[yc],Oy=bc.toLowerCase(),By=bc[0].toUpperCase()+bc.slice(1);hn(Oy,"on"+By)}hn(Xh,"onAnimationEnd"),hn(Qh,"onAnimationIteration"),hn(Gh,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(Jh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(va));function tm(n,o,d){var m=n.type||"unknown-event";n.currentTarget=d,O0(m,o,void 0,n),n.currentTarget=null}function sm(n,o){o=(o&4)!==0;for(var d=0;d<n.length;d++){var m=n[d],g=m.event;m=m.listeners;e:{var x=void 0;if(o)for(var k=m.length-1;0<=k;k--){var D=m[k],I=D.instance,Q=D.currentTarget;if(D=D.listener,I!==x&&g.isPropagationStopped())break e;tm(g,D,Q),x=I}else for(k=0;k<m.length;k++){if(D=m[k],I=D.instance,Q=D.currentTarget,D=D.listener,I!==x&&g.isPropagationStopped())break e;tm(g,D,Q),x=I}}}if(Ai)throw n=Ql,Ai=!1,Ql=null,n}function Xe(n,o){var d=o[Cc];d===void 0&&(d=o[Cc]=new Set);var m=n+"__bubble";d.has(m)||(nm(o,n,2,!1),d.add(m))}function vc(n,o,d){var m=0;o&&(m|=4),nm(d,n,m,o)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function wa(n){if(!n[Vi]){n[Vi]=!0,r.forEach(function(d){d!=="selectionchange"&&(zy.has(d)||vc(d,!1,n),vc(d,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Vi]||(o[Vi]=!0,vc("selectionchange",!1,o))}}function nm(n,o,d,m){switch(Sh(o)){case 1:var g=ey;break;case 4:g=ty;break;default:g=nc}d=g.bind(null,o,d,n),g=void 0,!Xl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),m?g!==void 0?n.addEventListener(o,d,{capture:!0,passive:g}):n.addEventListener(o,d,!0):g!==void 0?n.addEventListener(o,d,{passive:g}):n.addEventListener(o,d,!1)}function wc(n,o,d,m,g){var x=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var D=m.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(k===4)for(k=m.return;k!==null;){var I=k.tag;if((I===3||I===4)&&(I=k.stateNode.containerInfo,I===g||I.nodeType===8&&I.parentNode===g))return;k=k.return}for(;D!==null;){if(k=On(D),k===null)return;if(I=k.tag,I===5||I===6){m=x=k;continue e}D=D.parentNode}}m=m.return}lh(function(){var Q=x,ce=ql(d),de=[];e:{var le=Zh.get(n);if(le!==void 0){var ye=ic,je=n;switch(n){case"keypress":if(Bi(d)===0)break e;case"keydown":case"keyup":ye=gy;break;case"focusin":je="focus",ye=cc;break;case"focusout":je="blur",ye=cc;break;case"beforeblur":case"afterblur":ye=cc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=ry;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=by;break;case Xh:case Qh:case Gh:ye=oy;break;case Jh:ye=wy;break;case"scroll":ye=sy;break;case"wheel":ye=Ny;break;case"copy":case"cut":case"paste":ye=cy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Mh}var Ne=(o&4)!==0,it=!Ne&&n==="scroll",q=Ne?le!==null?le+"Capture":null:le;Ne=[];for(var $=Q,K;$!==null;){K=$;var he=K.stateNode;if(K.tag===5&&he!==null&&(K=he,q!==null&&(he=na($,q),he!=null&&Ne.push(ja($,he,K)))),it)break;$=$.return}0<Ne.length&&(le=new ye(le,je,null,d,ce),de.push({event:le,listeners:Ne}))}}if((o&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",le&&d!==Vl&&(je=d.relatedTarget||d.fromElement)&&(On(je)||je[Bs]))break e;if((ye||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,ye?(je=d.relatedTarget||d.toElement,ye=Q,je=je?On(je):null,je!==null&&(it=In(je),je!==it||je.tag!==5&&je.tag!==6)&&(je=null)):(ye=null,je=Q),ye!==je)){if(Ne=Eh,he="onMouseLeave",q="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Mh,he="onPointerLeave",q="onPointerEnter",$="pointer"),it=ye==null?le:Nr(ye),K=je==null?le:Nr(je),le=new Ne(he,$+"leave",ye,d,ce),le.target=it,le.relatedTarget=K,he=null,On(ce)===Q&&(Ne=new Ne(q,$+"enter",je,d,ce),Ne.target=K,Ne.relatedTarget=it,he=Ne),it=he,ye&&je)t:{for(Ne=ye,q=je,$=0,K=Ne;K;K=wr(K))$++;for(K=0,he=q;he;he=wr(he))K++;for(;0<$-K;)Ne=wr(Ne),$--;for(;0<K-$;)q=wr(q),K--;for(;$--;){if(Ne===q||q!==null&&Ne===q.alternate)break t;Ne=wr(Ne),q=wr(q)}Ne=null}else Ne=null;ye!==null&&rm(de,le,ye,Ne,!1),je!==null&&it!==null&&rm(de,it,je,Ne,!0)}}e:{if(le=Q?Nr(Q):window,ye=le.nodeName&&le.nodeName.toLowerCase(),ye==="select"||ye==="input"&&le.type==="file")var _e=Py;else if(Ih(le))if(Bh)_e=Ry;else{_e=Ty;var Se=My}else(ye=le.nodeName)&&ye.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(_e=Dy);if(_e&&(_e=_e(n,Q))){Oh(de,_e,d,ce);break e}Se&&Se(n,le,Q),n==="focusout"&&(Se=le._wrapperState)&&Se.controlled&&le.type==="number"&&we(le,"number",le.value)}switch(Se=Q?Nr(Q):window,n){case"focusin":(Ih(Se)||Se.contentEditable==="true")&&(br=Se,pc=Q,ba=null);break;case"focusout":ba=pc=br=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,Yh(de,d,ce);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":Yh(de,d,ce)}var Ce;if(uc)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else yr?Fh(n,d)&&(Me="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Me="onCompositionStart");Me&&(Th&&d.locale!=="ko"&&(yr||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&yr&&(Ce=Ch()):(un=ce,ac="value"in un?un.value:un.textContent,yr=!0)),Se=qi(Q,Me),0<Se.length&&(Me=new Ph(Me,n,null,d,ce),de.push({event:Me,listeners:Se}),Ce?Me.data=Ce:(Ce=Lh(d),Ce!==null&&(Me.data=Ce)))),(Ce=ky?Sy(n,d):Cy(n,d))&&(Q=qi(Q,"onBeforeInput"),0<Q.length&&(ce=new Ph("onBeforeInput","beforeinput",null,d,ce),de.push({event:ce,listeners:Q}),ce.data=Ce))}sm(de,o)})}function ja(n,o,d){return{instance:n,listener:o,currentTarget:d}}function qi(n,o){for(var d=o+"Capture",m=[];n!==null;){var g=n,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=na(n,d),x!=null&&m.unshift(ja(n,x,g)),x=na(n,o),x!=null&&m.push(ja(n,x,g))),n=n.return}return m}function wr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rm(n,o,d,m,g){for(var x=o._reactName,k=[];d!==null&&d!==m;){var D=d,I=D.alternate,Q=D.stateNode;if(I!==null&&I===m)break;D.tag===5&&Q!==null&&(D=Q,g?(I=na(d,x),I!=null&&k.unshift(ja(d,I,D))):g||(I=na(d,x),I!=null&&k.push(ja(d,I,D)))),d=d.return}k.length!==0&&n.push({event:o,listeners:k})}var $y=/\r\n?/g,Uy=/\u0000|\uFFFD/g;function am(n){return(typeof n=="string"?n:""+n).replace($y,`
`).replace(Uy,"")}function Yi(n,o,d){if(o=am(o),am(n)!==o&&d)throw Error(s(425))}function Ki(){}var jc=null,Nc=null;function _c(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var kc=typeof setTimeout=="function"?setTimeout:void 0,Hy=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(n){return im.resolve(null).then(n).catch(Vy)}:kc;function Vy(n){setTimeout(function(){throw n})}function Sc(n,o){var d=o,m=0;do{var g=d.nextSibling;if(n.removeChild(d),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(m===0){n.removeChild(g),ha(o);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=g}while(d);ha(o)}function mn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function om(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return n;o--}else d==="/$"&&o++}n=n.previousSibling}return null}var jr=Math.random().toString(36).slice(2),As="__reactFiber$"+jr,Na="__reactProps$"+jr,Bs="__reactContainer$"+jr,Cc="__reactEvents$"+jr,qy="__reactListeners$"+jr,Yy="__reactHandles$"+jr;function On(n){var o=n[As];if(o)return o;for(var d=n.parentNode;d;){if(o=d[Bs]||d[As]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(n=om(n);n!==null;){if(d=n[As])return d;n=om(n)}return o}n=d,d=n.parentNode}return null}function _a(n){return n=n[As]||n[Bs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Nr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(s(33))}function Xi(n){return n[Na]||null}var Ac=[],_r=-1;function fn(n){return{current:n}}function Qe(n){0>_r||(n.current=Ac[_r],Ac[_r]=null,_r--)}function Ye(n,o){_r++,Ac[_r]=n.current,n.current=o}var pn={},Mt=fn(pn),Vt=fn(!1),Bn=pn;function kr(n,o){var d=n.type.contextTypes;if(!d)return pn;var m=n.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in d)g[x]=o[x];return m&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function qt(n){return n=n.childContextTypes,n!=null}function Qi(){Qe(Vt),Qe(Mt)}function lm(n,o,d){if(Mt.current!==pn)throw Error(s(168));Ye(Mt,o),Ye(Vt,d)}function cm(n,o,d){var m=n.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var g in m)if(!(g in o))throw Error(s(108,ie(n)||"Unknown",g));return se({},d,m)}function Gi(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pn,Bn=Mt.current,Ye(Mt,n),Ye(Vt,Vt.current),!0}function dm(n,o,d){var m=n.stateNode;if(!m)throw Error(s(169));d?(n=cm(n,o,Bn),m.__reactInternalMemoizedMergedChildContext=n,Qe(Vt),Qe(Mt),Ye(Mt,n)):Qe(Vt),Ye(Vt,d)}var zs=null,Ji=!1,Ec=!1;function um(n){zs===null?zs=[n]:zs.push(n)}function Ky(n){Ji=!0,um(n)}function gn(){if(!Ec&&zs!==null){Ec=!0;var n=0,o=We;try{var d=zs;for(We=1;n<d.length;n++){var m=d[n];do m=m(!0);while(m!==null)}zs=null,Ji=!1}catch(g){throw zs!==null&&(zs=zs.slice(n+1)),mh(Gl,gn),g}finally{We=o,Ec=!1}}return null}var Sr=[],Cr=0,Zi=null,eo=0,ls=[],cs=0,zn=null,$s=1,Us="";function $n(n,o){Sr[Cr++]=eo,Sr[Cr++]=Zi,Zi=n,eo=o}function hm(n,o,d){ls[cs++]=$s,ls[cs++]=Us,ls[cs++]=zn,zn=n;var m=$s;n=Us;var g=32-ys(m)-1;m&=~(1<<g),d+=1;var x=32-ys(o)+g;if(30<x){var k=g-g%5;x=(m&(1<<k)-1).toString(32),m>>=k,g-=k,$s=1<<32-ys(o)+g|d<<g|m,Us=x+n}else $s=1<<x|d<<g|m,Us=n}function Pc(n){n.return!==null&&($n(n,1),hm(n,1,0))}function Mc(n){for(;n===Zi;)Zi=Sr[--Cr],Sr[Cr]=null,eo=Sr[--Cr],Sr[Cr]=null;for(;n===zn;)zn=ls[--cs],ls[cs]=null,Us=ls[--cs],ls[cs]=null,$s=ls[--cs],ls[cs]=null}var ss=null,ns=null,Je=!1,vs=null;function mm(n,o){var d=ms(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=n,o=n.deletions,o===null?(n.deletions=[d],n.flags|=16):o.push(d)}function fm(n,o){switch(n.tag){case 5:var d=n.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,ss=n,ns=mn(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,ss=n,ns=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=zn!==null?{id:$s,overflow:Us}:null,n.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=ms(18,null,null,0),d.stateNode=o,d.return=n,n.child=d,ss=n,ns=null,!0):!1;default:return!1}}function Tc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dc(n){if(Je){var o=ns;if(o){var d=o;if(!fm(n,o)){if(Tc(n))throw Error(s(418));o=mn(d.nextSibling);var m=ss;o&&fm(n,o)?mm(m,d):(n.flags=n.flags&-4097|2,Je=!1,ss=n)}}else{if(Tc(n))throw Error(s(418));n.flags=n.flags&-4097|2,Je=!1,ss=n}}}function pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ss=n}function to(n){if(n!==ss)return!1;if(!Je)return pm(n),Je=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!_c(n.type,n.memoizedProps)),o&&(o=ns)){if(Tc(n))throw gm(),Error(s(418));for(;o;)mm(n,o),o=mn(o.nextSibling)}if(pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"){if(o===0){ns=mn(n.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}n=n.nextSibling}ns=null}}else ns=ss?mn(n.stateNode.nextSibling):null;return!0}function gm(){for(var n=ns;n;)n=mn(n.nextSibling)}function Ar(){ns=ss=null,Je=!1}function Rc(n){vs===null?vs=[n]:vs.push(n)}var Xy=E.ReactCurrentBatchConfig;function ka(n,o,d){if(n=d.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var m=d.stateNode}if(!m)throw Error(s(147,n));var g=m,x=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(k){var D=g.refs;k===null?delete D[x]:D[x]=k},o._stringRef=x,o)}if(typeof n!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,n))}return n}function so(n,o){throw n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function xm(n){var o=n._init;return o(n._payload)}function ym(n){function o(q,$){if(n){var K=q.deletions;K===null?(q.deletions=[$],q.flags|=16):K.push($)}}function d(q,$){if(!n)return null;for(;$!==null;)o(q,$),$=$.sibling;return null}function m(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function g(q,$){return q=_n(q,$),q.index=0,q.sibling=null,q}function x(q,$,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<$?(q.flags|=2,$):K):(q.flags|=2,$)):(q.flags|=1048576,$)}function k(q){return n&&q.alternate===null&&(q.flags|=2),q}function D(q,$,K,he){return $===null||$.tag!==6?($=kd(K,q.mode,he),$.return=q,$):($=g($,K),$.return=q,$)}function I(q,$,K,he){var _e=K.type;return _e===B?ce(q,$,K.props.children,he,K.key):$!==null&&($.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Y&&xm(_e)===$.type)?(he=g($,K.props),he.ref=ka(q,$,K),he.return=q,he):(he=Co(K.type,K.key,K.props,null,q.mode,he),he.ref=ka(q,$,K),he.return=q,he)}function Q(q,$,K,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=Sd(K,q.mode,he),$.return=q,$):($=g($,K.children||[]),$.return=q,$)}function ce(q,$,K,he,_e){return $===null||$.tag!==7?($=Xn(K,q.mode,he,_e),$.return=q,$):($=g($,K),$.return=q,$)}function de(q,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=kd(""+$,q.mode,K),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case P:return K=Co($.type,$.key,$.props,null,q.mode,K),K.ref=ka(q,null,$),K.return=q,K;case F:return $=Sd($,q.mode,K),$.return=q,$;case Y:var he=$._init;return de(q,he($._payload),K)}if(De($)||te($))return $=Xn($,q.mode,K,null),$.return=q,$;so(q,$)}return null}function le(q,$,K,he){var _e=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return _e!==null?null:D(q,$,""+K,he);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case P:return K.key===_e?I(q,$,K,he):null;case F:return K.key===_e?Q(q,$,K,he):null;case Y:return _e=K._init,le(q,$,_e(K._payload),he)}if(De(K)||te(K))return _e!==null?null:ce(q,$,K,he,null);so(q,K)}return null}function ye(q,$,K,he,_e){if(typeof he=="string"&&he!==""||typeof he=="number")return q=q.get(K)||null,D($,q,""+he,_e);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case P:return q=q.get(he.key===null?K:he.key)||null,I($,q,he,_e);case F:return q=q.get(he.key===null?K:he.key)||null,Q($,q,he,_e);case Y:var Se=he._init;return ye(q,$,K,Se(he._payload),_e)}if(De(he)||te(he))return q=q.get(K)||null,ce($,q,he,_e,null);so($,he)}return null}function je(q,$,K,he){for(var _e=null,Se=null,Ce=$,Me=$=0,jt=null;Ce!==null&&Me<K.length;Me++){Ce.index>Me?(jt=Ce,Ce=null):jt=Ce.sibling;var Ue=le(q,Ce,K[Me],he);if(Ue===null){Ce===null&&(Ce=jt);break}n&&Ce&&Ue.alternate===null&&o(q,Ce),$=x(Ue,$,Me),Se===null?_e=Ue:Se.sibling=Ue,Se=Ue,Ce=jt}if(Me===K.length)return d(q,Ce),Je&&$n(q,Me),_e;if(Ce===null){for(;Me<K.length;Me++)Ce=de(q,K[Me],he),Ce!==null&&($=x(Ce,$,Me),Se===null?_e=Ce:Se.sibling=Ce,Se=Ce);return Je&&$n(q,Me),_e}for(Ce=m(q,Ce);Me<K.length;Me++)jt=ye(Ce,q,Me,K[Me],he),jt!==null&&(n&&jt.alternate!==null&&Ce.delete(jt.key===null?Me:jt.key),$=x(jt,$,Me),Se===null?_e=jt:Se.sibling=jt,Se=jt);return n&&Ce.forEach(function(kn){return o(q,kn)}),Je&&$n(q,Me),_e}function Ne(q,$,K,he){var _e=te(K);if(typeof _e!="function")throw Error(s(150));if(K=_e.call(K),K==null)throw Error(s(151));for(var Se=_e=null,Ce=$,Me=$=0,jt=null,Ue=K.next();Ce!==null&&!Ue.done;Me++,Ue=K.next()){Ce.index>Me?(jt=Ce,Ce=null):jt=Ce.sibling;var kn=le(q,Ce,Ue.value,he);if(kn===null){Ce===null&&(Ce=jt);break}n&&Ce&&kn.alternate===null&&o(q,Ce),$=x(kn,$,Me),Se===null?_e=kn:Se.sibling=kn,Se=kn,Ce=jt}if(Ue.done)return d(q,Ce),Je&&$n(q,Me),_e;if(Ce===null){for(;!Ue.done;Me++,Ue=K.next())Ue=de(q,Ue.value,he),Ue!==null&&($=x(Ue,$,Me),Se===null?_e=Ue:Se.sibling=Ue,Se=Ue);return Je&&$n(q,Me),_e}for(Ce=m(q,Ce);!Ue.done;Me++,Ue=K.next())Ue=ye(Ce,q,Me,Ue.value,he),Ue!==null&&(n&&Ue.alternate!==null&&Ce.delete(Ue.key===null?Me:Ue.key),$=x(Ue,$,Me),Se===null?_e=Ue:Se.sibling=Ue,Se=Ue);return n&&Ce.forEach(function(Ab){return o(q,Ab)}),Je&&$n(q,Me),_e}function it(q,$,K,he){if(typeof K=="object"&&K!==null&&K.type===B&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case P:e:{for(var _e=K.key,Se=$;Se!==null;){if(Se.key===_e){if(_e=K.type,_e===B){if(Se.tag===7){d(q,Se.sibling),$=g(Se,K.props.children),$.return=q,q=$;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Y&&xm(_e)===Se.type){d(q,Se.sibling),$=g(Se,K.props),$.ref=ka(q,Se,K),$.return=q,q=$;break e}d(q,Se);break}else o(q,Se);Se=Se.sibling}K.type===B?($=Xn(K.props.children,q.mode,he,K.key),$.return=q,q=$):(he=Co(K.type,K.key,K.props,null,q.mode,he),he.ref=ka(q,$,K),he.return=q,q=he)}return k(q);case F:e:{for(Se=K.key;$!==null;){if($.key===Se)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){d(q,$.sibling),$=g($,K.children||[]),$.return=q,q=$;break e}else{d(q,$);break}else o(q,$);$=$.sibling}$=Sd(K,q.mode,he),$.return=q,q=$}return k(q);case Y:return Se=K._init,it(q,$,Se(K._payload),he)}if(De(K))return je(q,$,K,he);if(te(K))return Ne(q,$,K,he);so(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(d(q,$.sibling),$=g($,K),$.return=q,q=$):(d(q,$),$=kd(K,q.mode,he),$.return=q,q=$),k(q)):d(q,$)}return it}var Er=ym(!0),bm=ym(!1),no=fn(null),ro=null,Pr=null,Fc=null;function Lc(){Fc=Pr=ro=null}function Ic(n){var o=no.current;Qe(no),n._currentValue=o}function Oc(n,o,d){for(;n!==null;){var m=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),n===d)break;n=n.return}}function Mr(n,o){ro=n,Fc=Pr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(Yt=!0),n.firstContext=null)}function ds(n){var o=n._currentValue;if(Fc!==n)if(n={context:n,memoizedValue:o,next:null},Pr===null){if(ro===null)throw Error(s(308));Pr=n,ro.dependencies={lanes:0,firstContext:n}}else Pr=Pr.next=n;return o}var Un=null;function Bc(n){Un===null?Un=[n]:Un.push(n)}function vm(n,o,d,m){var g=o.interleaved;return g===null?(d.next=d,Bc(o)):(d.next=g.next,g.next=d),o.interleaved=d,Hs(n,m)}function Hs(n,o){n.lanes|=o;var d=n.alternate;for(d!==null&&(d.lanes|=o),d=n,n=n.return;n!==null;)n.childLanes|=o,d=n.alternate,d!==null&&(d.childLanes|=o),d=n,n=n.return;return d.tag===3?d.stateNode:null}var xn=!1;function zc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ws(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function yn(n,o,d){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,($e&2)!==0){var g=m.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),m.pending=o,Hs(n,d)}return g=m.interleaved,g===null?(o.next=o,Bc(m)):(o.next=g.next,g.next=o),m.interleaved=o,Hs(n,d)}function ao(n,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var m=o.lanes;m&=n.pendingLanes,d|=m,o.lanes=d,ec(n,d)}}function jm(n,o){var d=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var g=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var k={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?g=x=k:x=x.next=k,d=d.next}while(d!==null);x===null?g=x=o:x=x.next=o}else g=x=o;d={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:m.shared,effects:m.effects},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=o:n.next=o,d.lastBaseUpdate=o}function io(n,o,d,m){var g=n.updateQueue;xn=!1;var x=g.firstBaseUpdate,k=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var I=D,Q=I.next;I.next=null,k===null?x=Q:k.next=Q,k=I;var ce=n.alternate;ce!==null&&(ce=ce.updateQueue,D=ce.lastBaseUpdate,D!==k&&(D===null?ce.firstBaseUpdate=Q:D.next=Q,ce.lastBaseUpdate=I))}if(x!==null){var de=g.baseState;k=0,ce=Q=I=null,D=x;do{var le=D.lane,ye=D.eventTime;if((m&le)===le){ce!==null&&(ce=ce.next={eventTime:ye,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var je=n,Ne=D;switch(le=o,ye=d,Ne.tag){case 1:if(je=Ne.payload,typeof je=="function"){de=je.call(ye,de,le);break e}de=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ne.payload,le=typeof je=="function"?je.call(ye,de,le):je,le==null)break e;de=se({},de,le);break e;case 2:xn=!0}}D.callback!==null&&D.lane!==0&&(n.flags|=64,le=g.effects,le===null?g.effects=[D]:le.push(D))}else ye={eventTime:ye,lane:le,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ce===null?(Q=ce=ye,I=de):ce=ce.next=ye,k|=le;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;le=D,D=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ce===null&&(I=de),g.baseState=I,g.firstBaseUpdate=Q,g.lastBaseUpdate=ce,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else x===null&&(g.shared.lanes=0);Vn|=k,n.lanes=k,n.memoizedState=de}}function Nm(n,o,d){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var m=n[o],g=m.callback;if(g!==null){if(m.callback=null,m=d,typeof g!="function")throw Error(s(191,g));g.call(m)}}}var Sa={},Es=fn(Sa),Ca=fn(Sa),Aa=fn(Sa);function Hn(n){if(n===Sa)throw Error(s(174));return n}function $c(n,o){switch(Ye(Aa,o),Ye(Ca,n),Ye(Es,Sa),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Pt(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Pt(o,n)}Qe(Es),Ye(Es,o)}function Tr(){Qe(Es),Qe(Ca),Qe(Aa)}function _m(n){Hn(Aa.current);var o=Hn(Es.current),d=Pt(o,n.type);o!==d&&(Ye(Ca,n),Ye(Es,d))}function Uc(n){Ca.current===n&&(Qe(Es),Qe(Ca))}var et=fn(0);function oo(n){for(var o=n;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Hc=[];function Wc(){for(var n=0;n<Hc.length;n++)Hc[n]._workInProgressVersionPrimary=null;Hc.length=0}var lo=E.ReactCurrentDispatcher,Vc=E.ReactCurrentBatchConfig,Wn=0,tt=null,gt=null,vt=null,co=!1,Ea=!1,Pa=0,Qy=0;function Tt(){throw Error(s(321))}function qc(n,o){if(o===null)return!1;for(var d=0;d<o.length&&d<n.length;d++)if(!bs(n[d],o[d]))return!1;return!0}function Yc(n,o,d,m,g,x){if(Wn=x,tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,lo.current=n===null||n.memoizedState===null?eb:tb,n=d(m,g),Ea){x=0;do{if(Ea=!1,Pa=0,25<=x)throw Error(s(301));x+=1,vt=gt=null,o.updateQueue=null,lo.current=sb,n=d(m,g)}while(Ea)}if(lo.current=mo,o=gt!==null&&gt.next!==null,Wn=0,vt=gt=tt=null,co=!1,o)throw Error(s(300));return n}function Kc(){var n=Pa!==0;return Pa=0,n}function Ps(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?tt.memoizedState=vt=n:vt=vt.next=n,vt}function us(){if(gt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var o=vt===null?tt.memoizedState:vt.next;if(o!==null)vt=o,gt=n;else{if(n===null)throw Error(s(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},vt===null?tt.memoizedState=vt=n:vt=vt.next=n}return vt}function Ma(n,o){return typeof o=="function"?o(n):o}function Xc(n){var o=us(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=n;var m=gt,g=m.baseQueue,x=d.pending;if(x!==null){if(g!==null){var k=g.next;g.next=x.next,x.next=k}m.baseQueue=g=x,d.pending=null}if(g!==null){x=g.next,m=m.baseState;var D=k=null,I=null,Q=x;do{var ce=Q.lane;if((Wn&ce)===ce)I!==null&&(I=I.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),m=Q.hasEagerState?Q.eagerState:n(m,Q.action);else{var de={lane:ce,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};I===null?(D=I=de,k=m):I=I.next=de,tt.lanes|=ce,Vn|=ce}Q=Q.next}while(Q!==null&&Q!==x);I===null?k=m:I.next=D,bs(m,o.memoizedState)||(Yt=!0),o.memoizedState=m,o.baseState=k,o.baseQueue=I,d.lastRenderedState=m}if(n=d.interleaved,n!==null){g=n;do x=g.lane,tt.lanes|=x,Vn|=x,g=g.next;while(g!==n)}else g===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Qc(n){var o=us(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=n;var m=d.dispatch,g=d.pending,x=o.memoizedState;if(g!==null){d.pending=null;var k=g=g.next;do x=n(x,k.action),k=k.next;while(k!==g);bs(x,o.memoizedState)||(Yt=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),d.lastRenderedState=x}return[x,m]}function km(){}function Sm(n,o){var d=tt,m=us(),g=o(),x=!bs(m.memoizedState,g);if(x&&(m.memoizedState=g,Yt=!0),m=m.queue,Gc(Em.bind(null,d,m,n),[n]),m.getSnapshot!==o||x||vt!==null&&vt.memoizedState.tag&1){if(d.flags|=2048,Ta(9,Am.bind(null,d,m,g,o),void 0,null),wt===null)throw Error(s(349));(Wn&30)!==0||Cm(d,o,g)}return g}function Cm(n,o,d){n.flags|=16384,n={getSnapshot:o,value:d},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.stores=[n]):(d=o.stores,d===null?o.stores=[n]:d.push(n))}function Am(n,o,d,m){o.value=d,o.getSnapshot=m,Pm(o)&&Mm(n)}function Em(n,o,d){return d(function(){Pm(o)&&Mm(n)})}function Pm(n){var o=n.getSnapshot;n=n.value;try{var d=o();return!bs(n,d)}catch{return!0}}function Mm(n){var o=Hs(n,1);o!==null&&_s(o,n,1,-1)}function Tm(n){var o=Ps();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},o.queue=n,n=n.dispatch=Zy.bind(null,tt,n),[o.memoizedState,n]}function Ta(n,o,d,m){return n={tag:n,create:o,destroy:d,deps:m,next:null},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.lastEffect=n.next=n):(d=o.lastEffect,d===null?o.lastEffect=n.next=n:(m=d.next,d.next=n,n.next=m,o.lastEffect=n)),n}function Dm(){return us().memoizedState}function uo(n,o,d,m){var g=Ps();tt.flags|=n,g.memoizedState=Ta(1|o,d,void 0,m===void 0?null:m)}function ho(n,o,d,m){var g=us();m=m===void 0?null:m;var x=void 0;if(gt!==null){var k=gt.memoizedState;if(x=k.destroy,m!==null&&qc(m,k.deps)){g.memoizedState=Ta(o,d,x,m);return}}tt.flags|=n,g.memoizedState=Ta(1|o,d,x,m)}function Rm(n,o){return uo(8390656,8,n,o)}function Gc(n,o){return ho(2048,8,n,o)}function Fm(n,o){return ho(4,2,n,o)}function Lm(n,o){return ho(4,4,n,o)}function Im(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Om(n,o,d){return d=d!=null?d.concat([n]):null,ho(4,4,Im.bind(null,o,n),d)}function Jc(){}function Bm(n,o){var d=us();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&qc(o,m[1])?m[0]:(d.memoizedState=[n,o],n)}function zm(n,o){var d=us();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&qc(o,m[1])?m[0]:(n=n(),d.memoizedState=[n,o],n)}function $m(n,o,d){return(Wn&21)===0?(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=d):(bs(d,o)||(d=xh(),tt.lanes|=d,Vn|=d,n.baseState=!0),o)}function Gy(n,o){var d=We;We=d!==0&&4>d?d:4,n(!0);var m=Vc.transition;Vc.transition={};try{n(!1),o()}finally{We=d,Vc.transition=m}}function Um(){return us().memoizedState}function Jy(n,o,d){var m=jn(n);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Hm(n))Wm(o,d);else if(d=vm(n,o,d,m),d!==null){var g=Ut();_s(d,n,m,g),Vm(d,o,m)}}function Zy(n,o,d){var m=jn(n),g={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Hm(n))Wm(o,g);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var k=o.lastRenderedState,D=x(k,d);if(g.hasEagerState=!0,g.eagerState=D,bs(D,k)){var I=o.interleaved;I===null?(g.next=g,Bc(o)):(g.next=I.next,I.next=g),o.interleaved=g;return}}catch{}finally{}d=vm(n,o,g,m),d!==null&&(g=Ut(),_s(d,n,m,g),Vm(d,o,m))}}function Hm(n){var o=n.alternate;return n===tt||o!==null&&o===tt}function Wm(n,o){Ea=co=!0;var d=n.pending;d===null?o.next=o:(o.next=d.next,d.next=o),n.pending=o}function Vm(n,o,d){if((d&4194240)!==0){var m=o.lanes;m&=n.pendingLanes,d|=m,o.lanes=d,ec(n,d)}}var mo={readContext:ds,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},eb={readContext:ds,useCallback:function(n,o){return Ps().memoizedState=[n,o===void 0?null:o],n},useContext:ds,useEffect:Rm,useImperativeHandle:function(n,o,d){return d=d!=null?d.concat([n]):null,uo(4194308,4,Im.bind(null,o,n),d)},useLayoutEffect:function(n,o){return uo(4194308,4,n,o)},useInsertionEffect:function(n,o){return uo(4,2,n,o)},useMemo:function(n,o){var d=Ps();return o=o===void 0?null:o,n=n(),d.memoizedState=[n,o],n},useReducer:function(n,o,d){var m=Ps();return o=d!==void 0?d(o):o,m.memoizedState=m.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},m.queue=n,n=n.dispatch=Jy.bind(null,tt,n),[m.memoizedState,n]},useRef:function(n){var o=Ps();return n={current:n},o.memoizedState=n},useState:Tm,useDebugValue:Jc,useDeferredValue:function(n){return Ps().memoizedState=n},useTransition:function(){var n=Tm(!1),o=n[0];return n=Gy.bind(null,n[1]),Ps().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,d){var m=tt,g=Ps();if(Je){if(d===void 0)throw Error(s(407));d=d()}else{if(d=o(),wt===null)throw Error(s(349));(Wn&30)!==0||Cm(m,o,d)}g.memoizedState=d;var x={value:d,getSnapshot:o};return g.queue=x,Rm(Em.bind(null,m,x,n),[n]),m.flags|=2048,Ta(9,Am.bind(null,m,x,d,o),void 0,null),d},useId:function(){var n=Ps(),o=wt.identifierPrefix;if(Je){var d=Us,m=$s;d=(m&~(1<<32-ys(m)-1)).toString(32)+d,o=":"+o+"R"+d,d=Pa++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=Qy++,o=":"+o+"r"+d.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},tb={readContext:ds,useCallback:Bm,useContext:ds,useEffect:Gc,useImperativeHandle:Om,useInsertionEffect:Fm,useLayoutEffect:Lm,useMemo:zm,useReducer:Xc,useRef:Dm,useState:function(){return Xc(Ma)},useDebugValue:Jc,useDeferredValue:function(n){var o=us();return $m(o,gt.memoizedState,n)},useTransition:function(){var n=Xc(Ma)[0],o=us().memoizedState;return[n,o]},useMutableSource:km,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1},sb={readContext:ds,useCallback:Bm,useContext:ds,useEffect:Gc,useImperativeHandle:Om,useInsertionEffect:Fm,useLayoutEffect:Lm,useMemo:zm,useReducer:Qc,useRef:Dm,useState:function(){return Qc(Ma)},useDebugValue:Jc,useDeferredValue:function(n){var o=us();return gt===null?o.memoizedState=n:$m(o,gt.memoizedState,n)},useTransition:function(){var n=Qc(Ma)[0],o=us().memoizedState;return[n,o]},useMutableSource:km,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1};function ws(n,o){if(n&&n.defaultProps){o=se({},o),n=n.defaultProps;for(var d in n)o[d]===void 0&&(o[d]=n[d]);return o}return o}function Zc(n,o,d,m){o=n.memoizedState,d=d(m,o),d=d==null?o:se({},o,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var fo={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,o,d){n=n._reactInternals;var m=Ut(),g=jn(n),x=Ws(m,g);x.payload=o,d!=null&&(x.callback=d),o=yn(n,x,g),o!==null&&(_s(o,n,g,m),ao(o,n,g))},enqueueReplaceState:function(n,o,d){n=n._reactInternals;var m=Ut(),g=jn(n),x=Ws(m,g);x.tag=1,x.payload=o,d!=null&&(x.callback=d),o=yn(n,x,g),o!==null&&(_s(o,n,g,m),ao(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var d=Ut(),m=jn(n),g=Ws(d,m);g.tag=2,o!=null&&(g.callback=o),o=yn(n,g,m),o!==null&&(_s(o,n,m,d),ao(o,n,m))}};function qm(n,o,d,m,g,x,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,x,k):o.prototype&&o.prototype.isPureReactComponent?!ya(d,m)||!ya(g,x):!0}function Ym(n,o,d){var m=!1,g=pn,x=o.contextType;return typeof x=="object"&&x!==null?x=ds(x):(g=qt(o)?Bn:Mt.current,m=o.contextTypes,x=(m=m!=null)?kr(n,g):pn),o=new o(d,x),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=fo,n.stateNode=o,o._reactInternals=n,m&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=x),o}function Km(n,o,d,m){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==n&&fo.enqueueReplaceState(o,o.state,null)}function ed(n,o,d,m){var g=n.stateNode;g.props=d,g.state=n.memoizedState,g.refs={},zc(n);var x=o.contextType;typeof x=="object"&&x!==null?g.context=ds(x):(x=qt(o)?Bn:Mt.current,g.context=kr(n,x)),g.state=n.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Zc(n,o,x,d),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&fo.enqueueReplaceState(g,g.state,null),io(n,d,g,m),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Dr(n,o){try{var d="",m=o;do d+=z(m),m=m.return;while(m);var g=d}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:n,source:o,stack:g,digest:null}}function td(n,o,d){return{value:n,source:null,stack:d??null,digest:o??null}}function sd(n,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var nb=typeof WeakMap=="function"?WeakMap:Map;function Xm(n,o,d){d=Ws(-1,d),d.tag=3,d.payload={element:null};var m=o.value;return d.callback=function(){wo||(wo=!0,xd=m),sd(n,o)},d}function Qm(n,o,d){d=Ws(-1,d),d.tag=3;var m=n.type.getDerivedStateFromError;if(typeof m=="function"){var g=o.value;d.payload=function(){return m(g)},d.callback=function(){sd(n,o)}}var x=n.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){sd(n,o),typeof m!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),d}function Gm(n,o,d){var m=n.pingCache;if(m===null){m=n.pingCache=new nb;var g=new Set;m.set(o,g)}else g=m.get(o),g===void 0&&(g=new Set,m.set(o,g));g.has(d)||(g.add(d),n=xb.bind(null,n,o,d),o.then(n,n))}function Jm(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Zm(n,o,d,m,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=Ws(-1,1),o.tag=2,yn(d,o,1))),d.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var rb=E.ReactCurrentOwner,Yt=!1;function $t(n,o,d,m){o.child=n===null?bm(o,null,d,m):Er(o,n.child,d,m)}function ef(n,o,d,m,g){d=d.render;var x=o.ref;return Mr(o,g),m=Yc(n,o,d,m,x,g),d=Kc(),n!==null&&!Yt?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Vs(n,o,g)):(Je&&d&&Pc(o),o.flags|=1,$t(n,o,m,g),o.child)}function tf(n,o,d,m,g){if(n===null){var x=d.type;return typeof x=="function"&&!_d(x)&&x.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=x,sf(n,o,x,m,g)):(n=Co(d.type,null,m,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(x=n.child,(n.lanes&g)===0){var k=x.memoizedProps;if(d=d.compare,d=d!==null?d:ya,d(k,m)&&n.ref===o.ref)return Vs(n,o,g)}return o.flags|=1,n=_n(x,m),n.ref=o.ref,n.return=o,o.child=n}function sf(n,o,d,m,g){if(n!==null){var x=n.memoizedProps;if(ya(x,m)&&n.ref===o.ref)if(Yt=!1,o.pendingProps=m=x,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Yt=!0);else return o.lanes=n.lanes,Vs(n,o,g)}return nd(n,o,d,m,g)}function nf(n,o,d){var m=o.pendingProps,g=m.children,x=n!==null?n.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Fr,rs),rs|=d;else{if((d&1073741824)===0)return n=x!==null?x.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Ye(Fr,rs),rs|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=x!==null?x.baseLanes:d,Ye(Fr,rs),rs|=m}else x!==null?(m=x.baseLanes|d,o.memoizedState=null):m=d,Ye(Fr,rs),rs|=m;return $t(n,o,g,d),o.child}function rf(n,o){var d=o.ref;(n===null&&d!==null||n!==null&&n.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function nd(n,o,d,m,g){var x=qt(d)?Bn:Mt.current;return x=kr(o,x),Mr(o,g),d=Yc(n,o,d,m,x,g),m=Kc(),n!==null&&!Yt?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Vs(n,o,g)):(Je&&m&&Pc(o),o.flags|=1,$t(n,o,d,g),o.child)}function af(n,o,d,m,g){if(qt(d)){var x=!0;Gi(o)}else x=!1;if(Mr(o,g),o.stateNode===null)go(n,o),Ym(o,d,m),ed(o,d,m,g),m=!0;else if(n===null){var k=o.stateNode,D=o.memoizedProps;k.props=D;var I=k.context,Q=d.contextType;typeof Q=="object"&&Q!==null?Q=ds(Q):(Q=qt(d)?Bn:Mt.current,Q=kr(o,Q));var ce=d.getDerivedStateFromProps,de=typeof ce=="function"||typeof k.getSnapshotBeforeUpdate=="function";de||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(D!==m||I!==Q)&&Km(o,k,m,Q),xn=!1;var le=o.memoizedState;k.state=le,io(o,m,k,g),I=o.memoizedState,D!==m||le!==I||Vt.current||xn?(typeof ce=="function"&&(Zc(o,d,ce,m),I=o.memoizedState),(D=xn||qm(o,d,D,m,le,I,Q))?(de||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=I),k.props=m,k.state=I,k.context=Q,m=D):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{k=o.stateNode,wm(n,o),D=o.memoizedProps,Q=o.type===o.elementType?D:ws(o.type,D),k.props=Q,de=o.pendingProps,le=k.context,I=d.contextType,typeof I=="object"&&I!==null?I=ds(I):(I=qt(d)?Bn:Mt.current,I=kr(o,I));var ye=d.getDerivedStateFromProps;(ce=typeof ye=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(D!==de||le!==I)&&Km(o,k,m,I),xn=!1,le=o.memoizedState,k.state=le,io(o,m,k,g);var je=o.memoizedState;D!==de||le!==je||Vt.current||xn?(typeof ye=="function"&&(Zc(o,d,ye,m),je=o.memoizedState),(Q=xn||qm(o,d,Q,m,le,je,I)||!1)?(ce||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,je,I),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,je,I)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||D===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=je),k.props=m,k.state=je,k.context=I,m=Q):(typeof k.componentDidUpdate!="function"||D===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),m=!1)}return rd(n,o,d,m,x,g)}function rd(n,o,d,m,g,x){rf(n,o);var k=(o.flags&128)!==0;if(!m&&!k)return g&&dm(o,d,!1),Vs(n,o,x);m=o.stateNode,rb.current=o;var D=k&&typeof d.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,n!==null&&k?(o.child=Er(o,n.child,null,x),o.child=Er(o,null,D,x)):$t(n,o,D,x),o.memoizedState=m.state,g&&dm(o,d,!0),o.child}function of(n){var o=n.stateNode;o.pendingContext?lm(n,o.pendingContext,o.pendingContext!==o.context):o.context&&lm(n,o.context,!1),$c(n,o.containerInfo)}function lf(n,o,d,m,g){return Ar(),Rc(g),o.flags|=256,$t(n,o,d,m),o.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function id(n){return{baseLanes:n,cachePool:null,transitions:null}}function cf(n,o,d){var m=o.pendingProps,g=et.current,x=!1,k=(o.flags&128)!==0,D;if((D=k)||(D=n!==null&&n.memoizedState===null?!1:(g&2)!==0),D?(x=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ye(et,g&1),n===null)return Dc(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=m.children,n=m.fallback,x?(m=o.mode,x=o.child,k={mode:"hidden",children:k},(m&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=k):x=Ao(k,m,0,null),n=Xn(n,m,d,null),x.return=o,n.return=o,x.sibling=n,o.child=x,o.child.memoizedState=id(d),o.memoizedState=ad,n):od(o,k));if(g=n.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return ab(n,o,k,m,D,g,d);if(x){x=m.fallback,k=o.mode,g=n.child,D=g.sibling;var I={mode:"hidden",children:m.children};return(k&1)===0&&o.child!==g?(m=o.child,m.childLanes=0,m.pendingProps=I,o.deletions=null):(m=_n(g,I),m.subtreeFlags=g.subtreeFlags&14680064),D!==null?x=_n(D,x):(x=Xn(x,k,d,null),x.flags|=2),x.return=o,m.return=o,m.sibling=x,o.child=m,m=x,x=o.child,k=n.child.memoizedState,k=k===null?id(d):{baseLanes:k.baseLanes|d,cachePool:null,transitions:k.transitions},x.memoizedState=k,x.childLanes=n.childLanes&~d,o.memoizedState=ad,m}return x=n.child,n=x.sibling,m=_n(x,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=d),m.return=o,m.sibling=null,n!==null&&(d=o.deletions,d===null?(o.deletions=[n],o.flags|=16):d.push(n)),o.child=m,o.memoizedState=null,m}function od(n,o){return o=Ao({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function po(n,o,d,m){return m!==null&&Rc(m),Er(o,n.child,null,d),n=od(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function ab(n,o,d,m,g,x,k){if(d)return o.flags&256?(o.flags&=-257,m=td(Error(s(422))),po(n,o,k,m)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(x=m.fallback,g=o.mode,m=Ao({mode:"visible",children:m.children},g,0,null),x=Xn(x,g,k,null),x.flags|=2,m.return=o,x.return=o,m.sibling=x,o.child=m,(o.mode&1)!==0&&Er(o,n.child,null,k),o.child.memoizedState=id(k),o.memoizedState=ad,x);if((o.mode&1)===0)return po(n,o,k,null);if(g.data==="$!"){if(m=g.nextSibling&&g.nextSibling.dataset,m)var D=m.dgst;return m=D,x=Error(s(419)),m=td(x,m,void 0),po(n,o,k,m)}if(D=(k&n.childLanes)!==0,Yt||D){if(m=wt,m!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(m.suspendedLanes|k))!==0?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,Hs(n,g),_s(m,n,g,-1))}return Nd(),m=td(Error(s(421))),po(n,o,k,m)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=yb.bind(null,n),g._reactRetry=o,null):(n=x.treeContext,ns=mn(g.nextSibling),ss=o,Je=!0,vs=null,n!==null&&(ls[cs++]=$s,ls[cs++]=Us,ls[cs++]=zn,$s=n.id,Us=n.overflow,zn=o),o=od(o,m.children),o.flags|=4096,o)}function df(n,o,d){n.lanes|=o;var m=n.alternate;m!==null&&(m.lanes|=o),Oc(n.return,o,d)}function ld(n,o,d,m,g){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:g}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=d,x.tailMode=g)}function uf(n,o,d){var m=o.pendingProps,g=m.revealOrder,x=m.tail;if($t(n,o,m.children,d),m=et.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&df(n,d,o);else if(n.tag===19)df(n,d,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}m&=1}if(Ye(et,m),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(d=o.child,g=null;d!==null;)n=d.alternate,n!==null&&oo(n)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),ld(o,!1,g,d,x);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&oo(n)===null){o.child=g;break}n=g.sibling,g.sibling=d,d=g,g=n}ld(o,!0,d,null,x);break;case"together":ld(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function go(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Vs(n,o,d){if(n!==null&&(o.dependencies=n.dependencies),Vn|=o.lanes,(d&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,d=_n(n,n.pendingProps),o.child=d,d.return=o;n.sibling!==null;)n=n.sibling,d=d.sibling=_n(n,n.pendingProps),d.return=o;d.sibling=null}return o.child}function ib(n,o,d){switch(o.tag){case 3:of(o),Ar();break;case 5:_m(o);break;case 1:qt(o.type)&&Gi(o);break;case 4:$c(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,g=o.memoizedProps.value;Ye(no,m._currentValue),m._currentValue=g;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Ye(et,et.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?cf(n,o,d):(Ye(et,et.current&1),n=Vs(n,o,d),n!==null?n.sibling:null);Ye(et,et.current&1);break;case 19:if(m=(d&o.childLanes)!==0,(n.flags&128)!==0){if(m)return uf(n,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ye(et,et.current),m)break;return null;case 22:case 23:return o.lanes=0,nf(n,o,d)}return Vs(n,o,d)}var hf,cd,mf,ff;hf=function(n,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},cd=function(){},mf=function(n,o,d,m){var g=n.memoizedProps;if(g!==m){n=o.stateNode,Hn(Es.current);var x=null;switch(d){case"input":g=X(n,g),m=X(n,m),x=[];break;case"select":g=se({},g,{value:void 0}),m=se({},m,{value:void 0}),x=[];break;case"textarea":g=ne(n,g),m=ne(n,m),x=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(n.onclick=Ki)}Hl(d,m);var k;d=null;for(Q in g)if(!m.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var D=g[Q];for(k in D)D.hasOwnProperty(k)&&(d||(d={}),d[k]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?x||(x=[]):(x=x||[]).push(Q,null));for(Q in m){var I=m[Q];if(D=g?.[Q],m.hasOwnProperty(Q)&&I!==D&&(I!=null||D!=null))if(Q==="style")if(D){for(k in D)!D.hasOwnProperty(k)||I&&I.hasOwnProperty(k)||(d||(d={}),d[k]="");for(k in I)I.hasOwnProperty(k)&&D[k]!==I[k]&&(d||(d={}),d[k]=I[k])}else d||(x||(x=[]),x.push(Q,d)),d=I;else Q==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,D=D?D.__html:void 0,I!=null&&D!==I&&(x=x||[]).push(Q,I)):Q==="children"?typeof I!="string"&&typeof I!="number"||(x=x||[]).push(Q,""+I):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(I!=null&&Q==="onScroll"&&Xe("scroll",n),x||D===I||(x=[])):(x=x||[]).push(Q,I))}d&&(x=x||[]).push("style",d);var Q=x;(o.updateQueue=Q)&&(o.flags|=4)}},ff=function(n,o,d,m){d!==m&&(o.flags|=4)};function Da(n,o){if(!Je)switch(n.tailMode){case"hidden":o=n.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function Dt(n){var o=n.alternate!==null&&n.alternate.child===n.child,d=0,m=0;if(o)for(var g=n.child;g!==null;)d|=g.lanes|g.childLanes,m|=g.subtreeFlags&14680064,m|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)d|=g.lanes|g.childLanes,m|=g.subtreeFlags,m|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=m,n.childLanes=d,o}function ob(n,o,d){var m=o.pendingProps;switch(Mc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return qt(o.type)&&Qi(),Dt(o),null;case 3:return m=o.stateNode,Tr(),Qe(Vt),Qe(Mt),Wc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(n===null||n.child===null)&&(to(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vs!==null&&(vd(vs),vs=null))),cd(n,o),Dt(o),null;case 5:Uc(o);var g=Hn(Aa.current);if(d=o.type,n!==null&&o.stateNode!=null)mf(n,o,d,m,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Dt(o),null}if(n=Hn(Es.current),to(o)){m=o.stateNode,d=o.type;var x=o.memoizedProps;switch(m[As]=o,m[Na]=x,n=(o.mode&1)!==0,d){case"dialog":Xe("cancel",m),Xe("close",m);break;case"iframe":case"object":case"embed":Xe("load",m);break;case"video":case"audio":for(g=0;g<va.length;g++)Xe(va[g],m);break;case"source":Xe("error",m);break;case"img":case"image":case"link":Xe("error",m),Xe("load",m);break;case"details":Xe("toggle",m);break;case"input":be(m,x),Xe("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!x.multiple},Xe("invalid",m);break;case"textarea":oe(m,x),Xe("invalid",m)}Hl(d,x),g=null;for(var k in x)if(x.hasOwnProperty(k)){var D=x[k];k==="children"?typeof D=="string"?m.textContent!==D&&(x.suppressHydrationWarning!==!0&&Yi(m.textContent,D,n),g=["children",D]):typeof D=="number"&&m.textContent!==""+D&&(x.suppressHydrationWarning!==!0&&Yi(m.textContent,D,n),g=["children",""+D]):i.hasOwnProperty(k)&&D!=null&&k==="onScroll"&&Xe("scroll",m)}switch(d){case"input":Et(m),Fe(m,x,!0);break;case"textarea":Et(m),He(m);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(m.onclick=Ki)}m=g,o.updateQueue=m,m!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=os(d)),n==="http://www.w3.org/1999/xhtml"?d==="script"?(n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof m.is=="string"?n=k.createElement(d,{is:m.is}):(n=k.createElement(d),d==="select"&&(k=n,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):n=k.createElementNS(n,d),n[As]=o,n[Na]=m,hf(n,o,!1,!1),o.stateNode=n;e:{switch(k=Wl(d,m),d){case"dialog":Xe("cancel",n),Xe("close",n),g=m;break;case"iframe":case"object":case"embed":Xe("load",n),g=m;break;case"video":case"audio":for(g=0;g<va.length;g++)Xe(va[g],n);g=m;break;case"source":Xe("error",n),g=m;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),g=m;break;case"details":Xe("toggle",n),g=m;break;case"input":be(n,m),g=X(n,m),Xe("invalid",n);break;case"option":g=m;break;case"select":n._wrapperState={wasMultiple:!!m.multiple},g=se({},m,{value:void 0}),Xe("invalid",n);break;case"textarea":oe(n,m),g=ne(n,m),Xe("invalid",n);break;default:g=m}Hl(d,g),D=g;for(x in D)if(D.hasOwnProperty(x)){var I=D[x];x==="style"?Si(n,I):x==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&Pe(n,I)):x==="children"?typeof I=="string"?(d!=="textarea"||I!=="")&&pt(n,I):typeof I=="number"&&pt(n,""+I):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?I!=null&&x==="onScroll"&&Xe("scroll",n):I!=null&&A(n,x,I,k))}switch(d){case"input":Et(n),Fe(n,m,!1);break;case"textarea":Et(n),He(n);break;case"option":m.value!=null&&n.setAttribute("value",""+xe(m.value));break;case"select":n.multiple=!!m.multiple,x=m.value,x!=null?rt(n,!!m.multiple,x,!1):m.defaultValue!=null&&rt(n,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Ki)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Dt(o),null;case 6:if(n&&o.stateNode!=null)ff(n,o,n.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(s(166));if(d=Hn(Aa.current),Hn(Es.current),to(o)){if(m=o.stateNode,d=o.memoizedProps,m[As]=o,(x=m.nodeValue!==d)&&(n=ss,n!==null))switch(n.tag){case 3:Yi(m.nodeValue,d,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yi(m.nodeValue,d,(n.mode&1)!==0)}x&&(o.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[As]=o,o.stateNode=m}return Dt(o),null;case 13:if(Qe(et),m=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&ns!==null&&(o.mode&1)!==0&&(o.flags&128)===0)gm(),Ar(),o.flags|=98560,x=!1;else if(x=to(o),m!==null&&m.dehydrated!==null){if(n===null){if(!x)throw Error(s(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[As]=o}else Ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),x=!1}else vs!==null&&(vd(vs),vs=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(m=m!==null,m!==(n!==null&&n.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(et.current&1)!==0?xt===0&&(xt=3):Nd())),o.updateQueue!==null&&(o.flags|=4),Dt(o),null);case 4:return Tr(),cd(n,o),n===null&&wa(o.stateNode.containerInfo),Dt(o),null;case 10:return Ic(o.type._context),Dt(o),null;case 17:return qt(o.type)&&Qi(),Dt(o),null;case 19:if(Qe(et),x=o.memoizedState,x===null)return Dt(o),null;if(m=(o.flags&128)!==0,k=x.rendering,k===null)if(m)Da(x,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(k=oo(n),k!==null){for(o.flags|=128,Da(x,!1),m=k.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=d,d=o.child;d!==null;)x=d,n=m,x.flags&=14680066,k=x.alternate,k===null?(x.childLanes=0,x.lanes=n,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,n=k.dependencies,x.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),d=d.sibling;return Ye(et,et.current&1|2),o.child}n=n.sibling}x.tail!==null&&at()>Lr&&(o.flags|=128,m=!0,Da(x,!1),o.lanes=4194304)}else{if(!m)if(n=oo(k),n!==null){if(o.flags|=128,m=!0,d=n.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),Da(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!Je)return Dt(o),null}else 2*at()-x.renderingStartTime>Lr&&d!==1073741824&&(o.flags|=128,m=!0,Da(x,!1),o.lanes=4194304);x.isBackwards?(k.sibling=o.child,o.child=k):(d=x.last,d!==null?d.sibling=k:o.child=k,x.last=k)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=at(),o.sibling=null,d=et.current,Ye(et,m?d&1|2:d&1),o):(Dt(o),null);case 22:case 23:return jd(),m=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(rs&1073741824)!==0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),null;case 24:return null;case 25:return null}throw Error(s(156,o.tag))}function lb(n,o){switch(Mc(o),o.tag){case 1:return qt(o.type)&&Qi(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Tr(),Qe(Vt),Qe(Mt),Wc(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return Uc(o),null;case 13:if(Qe(et),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ar()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Qe(et),null;case 4:return Tr(),null;case 10:return Ic(o.type._context),null;case 22:case 23:return jd(),null;case 24:return null;default:return null}}var xo=!1,Rt=!1,cb=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Rr(n,o){var d=n.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){nt(n,o,m)}else d.current=null}function dd(n,o,d){try{d()}catch(m){nt(n,o,m)}}var pf=!1;function db(n,o){if(jc=Li,n=qh(),fc(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var g=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var k=0,D=-1,I=-1,Q=0,ce=0,de=n,le=null;t:for(;;){for(var ye;de!==d||g!==0&&de.nodeType!==3||(D=k+g),de!==x||m!==0&&de.nodeType!==3||(I=k+m),de.nodeType===3&&(k+=de.nodeValue.length),(ye=de.firstChild)!==null;)le=de,de=ye;for(;;){if(de===n)break t;if(le===d&&++Q===g&&(D=k),le===x&&++ce===m&&(I=k),(ye=de.nextSibling)!==null)break;de=le,le=de.parentNode}de=ye}d=D===-1||I===-1?null:{start:D,end:I}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nc={focusedElem:n,selectionRange:d},Li=!1,ve=o;ve!==null;)if(o=ve,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,ve=n;else for(;ve!==null;){o=ve;try{var je=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Ne=je.memoizedProps,it=je.memoizedState,q=o.stateNode,$=q.getSnapshotBeforeUpdate(o.elementType===o.type?Ne:ws(o.type,Ne),it);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(he){nt(o,o.return,he)}if(n=o.sibling,n!==null){n.return=o.return,ve=n;break}ve=o.return}return je=pf,pf=!1,je}function Ra(n,o,d){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var g=m=m.next;do{if((g.tag&n)===n){var x=g.destroy;g.destroy=void 0,x!==void 0&&dd(o,d,x)}g=g.next}while(g!==m)}}function yo(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&n)===n){var m=d.create;d.destroy=m()}d=d.next}while(d!==o)}}function ud(n){var o=n.ref;if(o!==null){var d=n.stateNode;switch(n.tag){case 5:n=d;break;default:n=d}typeof o=="function"?o(n):o.current=n}}function gf(n){var o=n.alternate;o!==null&&(n.alternate=null,gf(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[As],delete o[Na],delete o[Cc],delete o[qy],delete o[Yy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xf(n){return n.tag===5||n.tag===3||n.tag===4}function yf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hd(n,o,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(n,o):d.insertBefore(n,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(n,d)):(o=d,o.appendChild(n)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Ki));else if(m!==4&&(n=n.child,n!==null))for(hd(n,o,d),n=n.sibling;n!==null;)hd(n,o,d),n=n.sibling}function md(n,o,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,o?d.insertBefore(n,o):d.appendChild(n);else if(m!==4&&(n=n.child,n!==null))for(md(n,o,d),n=n.sibling;n!==null;)md(n,o,d),n=n.sibling}var kt=null,js=!1;function bn(n,o,d){for(d=d.child;d!==null;)bf(n,o,d),d=d.sibling}function bf(n,o,d){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(Pi,d)}catch{}switch(d.tag){case 5:Rt||Rr(d,o);case 6:var m=kt,g=js;kt=null,bn(n,o,d),kt=m,js=g,kt!==null&&(js?(n=kt,d=d.stateNode,n.nodeType===8?n.parentNode.removeChild(d):n.removeChild(d)):kt.removeChild(d.stateNode));break;case 18:kt!==null&&(js?(n=kt,d=d.stateNode,n.nodeType===8?Sc(n.parentNode,d):n.nodeType===1&&Sc(n,d),ha(n)):Sc(kt,d.stateNode));break;case 4:m=kt,g=js,kt=d.stateNode.containerInfo,js=!0,bn(n,o,d),kt=m,js=g;break;case 0:case 11:case 14:case 15:if(!Rt&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){g=m=m.next;do{var x=g,k=x.destroy;x=x.tag,k!==void 0&&((x&2)!==0||(x&4)!==0)&&dd(d,o,k),g=g.next}while(g!==m)}bn(n,o,d);break;case 1:if(!Rt&&(Rr(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(D){nt(d,o,D)}bn(n,o,d);break;case 21:bn(n,o,d);break;case 22:d.mode&1?(Rt=(m=Rt)||d.memoizedState!==null,bn(n,o,d),Rt=m):bn(n,o,d);break;default:bn(n,o,d)}}function vf(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var d=n.stateNode;d===null&&(d=n.stateNode=new cb),o.forEach(function(m){var g=bb.bind(null,n,m);d.has(m)||(d.add(m),m.then(g,g))})}}function Ns(n,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var g=d[m];try{var x=n,k=o,D=k;e:for(;D!==null;){switch(D.tag){case 5:kt=D.stateNode,js=!1;break e;case 3:kt=D.stateNode.containerInfo,js=!0;break e;case 4:kt=D.stateNode.containerInfo,js=!0;break e}D=D.return}if(kt===null)throw Error(s(160));bf(x,k,g),kt=null,js=!1;var I=g.alternate;I!==null&&(I.return=null),g.return=null}catch(Q){nt(g,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)wf(o,n),o=o.sibling}function wf(n,o){var d=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ns(o,n),Ms(n),m&4){try{Ra(3,n,n.return),yo(3,n)}catch(Ne){nt(n,n.return,Ne)}try{Ra(5,n,n.return)}catch(Ne){nt(n,n.return,Ne)}}break;case 1:Ns(o,n),Ms(n),m&512&&d!==null&&Rr(d,d.return);break;case 5:if(Ns(o,n),Ms(n),m&512&&d!==null&&Rr(d,d.return),n.flags&32){var g=n.stateNode;try{pt(g,"")}catch(Ne){nt(n,n.return,Ne)}}if(m&4&&(g=n.stateNode,g!=null)){var x=n.memoizedProps,k=d!==null?d.memoizedProps:x,D=n.type,I=n.updateQueue;if(n.updateQueue=null,I!==null)try{D==="input"&&x.type==="radio"&&x.name!=null&&Ae(g,x),Wl(D,k);var Q=Wl(D,x);for(k=0;k<I.length;k+=2){var ce=I[k],de=I[k+1];ce==="style"?Si(g,de):ce==="dangerouslySetInnerHTML"?Pe(g,de):ce==="children"?pt(g,de):A(g,ce,de,Q)}switch(D){case"input":ke(g,x);break;case"textarea":me(g,x);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var ye=x.value;ye!=null?rt(g,!!x.multiple,ye,!1):le!==!!x.multiple&&(x.defaultValue!=null?rt(g,!!x.multiple,x.defaultValue,!0):rt(g,!!x.multiple,x.multiple?[]:"",!1))}g[Na]=x}catch(Ne){nt(n,n.return,Ne)}}break;case 6:if(Ns(o,n),Ms(n),m&4){if(n.stateNode===null)throw Error(s(162));g=n.stateNode,x=n.memoizedProps;try{g.nodeValue=x}catch(Ne){nt(n,n.return,Ne)}}break;case 3:if(Ns(o,n),Ms(n),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ha(o.containerInfo)}catch(Ne){nt(n,n.return,Ne)}break;case 4:Ns(o,n),Ms(n);break;case 13:Ns(o,n),Ms(n),g=n.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(gd=at())),m&4&&vf(n);break;case 22:if(ce=d!==null&&d.memoizedState!==null,n.mode&1?(Rt=(Q=Rt)||ce,Ns(o,n),Rt=Q):Ns(o,n),Ms(n),m&8192){if(Q=n.memoizedState!==null,(n.stateNode.isHidden=Q)&&!ce&&(n.mode&1)!==0)for(ve=n,ce=n.child;ce!==null;){for(de=ve=ce;ve!==null;){switch(le=ve,ye=le.child,le.tag){case 0:case 11:case 14:case 15:Ra(4,le,le.return);break;case 1:Rr(le,le.return);var je=le.stateNode;if(typeof je.componentWillUnmount=="function"){m=le,d=le.return;try{o=m,je.props=o.memoizedProps,je.state=o.memoizedState,je.componentWillUnmount()}catch(Ne){nt(m,d,Ne)}}break;case 5:Rr(le,le.return);break;case 22:if(le.memoizedState!==null){_f(de);continue}}ye!==null?(ye.return=le,ve=ye):_f(de)}ce=ce.sibling}e:for(ce=null,de=n;;){if(de.tag===5){if(ce===null){ce=de;try{g=de.stateNode,Q?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(D=de.stateNode,I=de.memoizedProps.style,k=I!=null&&I.hasOwnProperty("display")?I.display:null,D.style.display=mr("display",k))}catch(Ne){nt(n,n.return,Ne)}}}else if(de.tag===6){if(ce===null)try{de.stateNode.nodeValue=Q?"":de.memoizedProps}catch(Ne){nt(n,n.return,Ne)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===n)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===n)break e;for(;de.sibling===null;){if(de.return===null||de.return===n)break e;ce===de&&(ce=null),de=de.return}ce===de&&(ce=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Ns(o,n),Ms(n),m&4&&vf(n);break;case 21:break;default:Ns(o,n),Ms(n)}}function Ms(n){var o=n.flags;if(o&2){try{e:{for(var d=n.return;d!==null;){if(xf(d)){var m=d;break e}d=d.return}throw Error(s(160))}switch(m.tag){case 5:var g=m.stateNode;m.flags&32&&(pt(g,""),m.flags&=-33);var x=yf(n);md(n,x,g);break;case 3:case 4:var k=m.stateNode.containerInfo,D=yf(n);hd(n,D,k);break;default:throw Error(s(161))}}catch(I){nt(n,n.return,I)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function ub(n,o,d){ve=n,jf(n)}function jf(n,o,d){for(var m=(n.mode&1)!==0;ve!==null;){var g=ve,x=g.child;if(g.tag===22&&m){var k=g.memoizedState!==null||xo;if(!k){var D=g.alternate,I=D!==null&&D.memoizedState!==null||Rt;D=xo;var Q=Rt;if(xo=k,(Rt=I)&&!Q)for(ve=g;ve!==null;)k=ve,I=k.child,k.tag===22&&k.memoizedState!==null?kf(g):I!==null?(I.return=k,ve=I):kf(g);for(;x!==null;)ve=x,jf(x),x=x.sibling;ve=g,xo=D,Rt=Q}Nf(n)}else(g.subtreeFlags&8772)!==0&&x!==null?(x.return=g,ve=x):Nf(n)}}function Nf(n){for(;ve!==null;){var o=ve;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Rt||yo(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Rt)if(d===null)m.componentDidMount();else{var g=o.elementType===o.type?d.memoizedProps:ws(o.type,d.memoizedProps);m.componentDidUpdate(g,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&Nm(o,x,m);break;case 3:var k=o.updateQueue;if(k!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Nm(o,k,d)}break;case 5:var D=o.stateNode;if(d===null&&o.flags&4){d=D;var I=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&d.focus();break;case"img":I.src&&(d.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ce=Q.memoizedState;if(ce!==null){var de=ce.dehydrated;de!==null&&ha(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Rt||o.flags&512&&ud(o)}catch(le){nt(o,o.return,le)}}if(o===n){ve=null;break}if(d=o.sibling,d!==null){d.return=o.return,ve=d;break}ve=o.return}}function _f(n){for(;ve!==null;){var o=ve;if(o===n){ve=null;break}var d=o.sibling;if(d!==null){d.return=o.return,ve=d;break}ve=o.return}}function kf(n){for(;ve!==null;){var o=ve;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{yo(4,o)}catch(I){nt(o,d,I)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var g=o.return;try{m.componentDidMount()}catch(I){nt(o,g,I)}}var x=o.return;try{ud(o)}catch(I){nt(o,x,I)}break;case 5:var k=o.return;try{ud(o)}catch(I){nt(o,k,I)}}}catch(I){nt(o,o.return,I)}if(o===n){ve=null;break}var D=o.sibling;if(D!==null){D.return=o.return,ve=D;break}ve=o.return}}var hb=Math.ceil,bo=E.ReactCurrentDispatcher,fd=E.ReactCurrentOwner,hs=E.ReactCurrentBatchConfig,$e=0,wt=null,ut=null,St=0,rs=0,Fr=fn(0),xt=0,Fa=null,Vn=0,vo=0,pd=0,La=null,Kt=null,gd=0,Lr=1/0,qs=null,wo=!1,xd=null,vn=null,jo=!1,wn=null,No=0,Ia=0,yd=null,_o=-1,ko=0;function Ut(){return($e&6)!==0?at():_o!==-1?_o:_o=at()}function jn(n){return(n.mode&1)===0?1:($e&2)!==0&&St!==0?St&-St:Xy.transition!==null?(ko===0&&(ko=xh()),ko):(n=We,n!==0||(n=window.event,n=n===void 0?16:Sh(n.type)),n)}function _s(n,o,d,m){if(50<Ia)throw Ia=0,yd=null,Error(s(185));oa(n,d,m),(($e&2)===0||n!==wt)&&(n===wt&&(($e&2)===0&&(vo|=d),xt===4&&Nn(n,St)),Xt(n,m),d===1&&$e===0&&(o.mode&1)===0&&(Lr=at()+500,Ji&&gn()))}function Xt(n,o){var d=n.callbackNode;X0(n,o);var m=Di(n,n===wt?St:0);if(m===0)d!==null&&fh(d),n.callbackNode=null,n.callbackPriority=0;else if(o=m&-m,n.callbackPriority!==o){if(d!=null&&fh(d),o===1)n.tag===0?Ky(Cf.bind(null,n)):um(Cf.bind(null,n)),Wy(function(){($e&6)===0&&gn()}),d=null;else{switch(yh(m)){case 1:d=Gl;break;case 4:d=ph;break;case 16:d=Ei;break;case 536870912:d=gh;break;default:d=Ei}d=Ff(d,Sf.bind(null,n))}n.callbackPriority=o,n.callbackNode=d}}function Sf(n,o){if(_o=-1,ko=0,($e&6)!==0)throw Error(s(327));var d=n.callbackNode;if(Ir()&&n.callbackNode!==d)return null;var m=Di(n,n===wt?St:0);if(m===0)return null;if((m&30)!==0||(m&n.expiredLanes)!==0||o)o=So(n,m);else{o=m;var g=$e;$e|=2;var x=Ef();(wt!==n||St!==o)&&(qs=null,Lr=at()+500,Yn(n,o));do try{pb();break}catch(D){Af(n,D)}while(!0);Lc(),bo.current=x,$e=g,ut!==null?o=0:(wt=null,St=0,o=xt)}if(o!==0){if(o===2&&(g=Jl(n),g!==0&&(m=g,o=bd(n,g))),o===1)throw d=Fa,Yn(n,0),Nn(n,m),Xt(n,at()),d;if(o===6)Nn(n,m);else{if(g=n.current.alternate,(m&30)===0&&!mb(g)&&(o=So(n,m),o===2&&(x=Jl(n),x!==0&&(m=x,o=bd(n,x))),o===1))throw d=Fa,Yn(n,0),Nn(n,m),Xt(n,at()),d;switch(n.finishedWork=g,n.finishedLanes=m,o){case 0:case 1:throw Error(s(345));case 2:Kn(n,Kt,qs);break;case 3:if(Nn(n,m),(m&130023424)===m&&(o=gd+500-at(),10<o)){if(Di(n,0)!==0)break;if(g=n.suspendedLanes,(g&m)!==m){Ut(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=kc(Kn.bind(null,n,Kt,qs),o);break}Kn(n,Kt,qs);break;case 4:if(Nn(n,m),(m&4194240)===m)break;for(o=n.eventTimes,g=-1;0<m;){var k=31-ys(m);x=1<<k,k=o[k],k>g&&(g=k),m&=~x}if(m=g,m=at()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*hb(m/1960))-m,10<m){n.timeoutHandle=kc(Kn.bind(null,n,Kt,qs),m);break}Kn(n,Kt,qs);break;case 5:Kn(n,Kt,qs);break;default:throw Error(s(329))}}}return Xt(n,at()),n.callbackNode===d?Sf.bind(null,n):null}function bd(n,o){var d=La;return n.current.memoizedState.isDehydrated&&(Yn(n,o).flags|=256),n=So(n,o),n!==2&&(o=Kt,Kt=d,o!==null&&vd(o)),n}function vd(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function mb(n){for(var o=n;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var g=d[m],x=g.getSnapshot;g=g.value;try{if(!bs(x(),g))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Nn(n,o){for(o&=~pd,o&=~vo,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var d=31-ys(o),m=1<<d;n[d]=-1,o&=~m}}function Cf(n){if(($e&6)!==0)throw Error(s(327));Ir();var o=Di(n,0);if((o&1)===0)return Xt(n,at()),null;var d=So(n,o);if(n.tag!==0&&d===2){var m=Jl(n);m!==0&&(o=m,d=bd(n,m))}if(d===1)throw d=Fa,Yn(n,0),Nn(n,o),Xt(n,at()),d;if(d===6)throw Error(s(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Kn(n,Kt,qs),Xt(n,at()),null}function wd(n,o){var d=$e;$e|=1;try{return n(o)}finally{$e=d,$e===0&&(Lr=at()+500,Ji&&gn())}}function qn(n){wn!==null&&wn.tag===0&&($e&6)===0&&Ir();var o=$e;$e|=1;var d=hs.transition,m=We;try{if(hs.transition=null,We=1,n)return n()}finally{We=m,hs.transition=d,$e=o,($e&6)===0&&gn()}}function jd(){rs=Fr.current,Qe(Fr)}function Yn(n,o){n.finishedWork=null,n.finishedLanes=0;var d=n.timeoutHandle;if(d!==-1&&(n.timeoutHandle=-1,Hy(d)),ut!==null)for(d=ut.return;d!==null;){var m=d;switch(Mc(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Qi();break;case 3:Tr(),Qe(Vt),Qe(Mt),Wc();break;case 5:Uc(m);break;case 4:Tr();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:Ic(m.type._context);break;case 22:case 23:jd()}d=d.return}if(wt=n,ut=n=_n(n.current,null),St=rs=o,xt=0,Fa=null,pd=vo=Vn=0,Kt=La=null,Un!==null){for(o=0;o<Un.length;o++)if(d=Un[o],m=d.interleaved,m!==null){d.interleaved=null;var g=m.next,x=d.pending;if(x!==null){var k=x.next;x.next=g,m.next=k}d.pending=m}Un=null}return n}function Af(n,o){do{var d=ut;try{if(Lc(),lo.current=mo,co){for(var m=tt.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}co=!1}if(Wn=0,vt=gt=tt=null,Ea=!1,Pa=0,fd.current=null,d===null||d.return===null){xt=1,Fa=o,ut=null;break}e:{var x=n,k=d.return,D=d,I=o;if(o=St,D.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=I,ce=D,de=ce.tag;if((ce.mode&1)===0&&(de===0||de===11||de===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var ye=Jm(k);if(ye!==null){ye.flags&=-257,Zm(ye,k,D,x,o),ye.mode&1&&Gm(x,Q,o),o=ye,I=Q;var je=o.updateQueue;if(je===null){var Ne=new Set;Ne.add(I),o.updateQueue=Ne}else je.add(I);break e}else{if((o&1)===0){Gm(x,Q,o),Nd();break e}I=Error(s(426))}}else if(Je&&D.mode&1){var it=Jm(k);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Zm(it,k,D,x,o),Rc(Dr(I,D));break e}}x=I=Dr(I,D),xt!==4&&(xt=2),La===null?La=[x]:La.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var q=Xm(x,I,o);jm(x,q);break e;case 1:D=I;var $=x.type,K=x.stateNode;if((x.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(vn===null||!vn.has(K)))){x.flags|=65536,o&=-o,x.lanes|=o;var he=Qm(x,D,o);jm(x,he);break e}}x=x.return}while(x!==null)}Mf(d)}catch(_e){o=_e,ut===d&&d!==null&&(ut=d=d.return);continue}break}while(!0)}function Ef(){var n=bo.current;return bo.current=mo,n===null?mo:n}function Nd(){(xt===0||xt===3||xt===2)&&(xt=4),wt===null||(Vn&268435455)===0&&(vo&268435455)===0||Nn(wt,St)}function So(n,o){var d=$e;$e|=2;var m=Ef();(wt!==n||St!==o)&&(qs=null,Yn(n,o));do try{fb();break}catch(g){Af(n,g)}while(!0);if(Lc(),$e=d,bo.current=m,ut!==null)throw Error(s(261));return wt=null,St=0,xt}function fb(){for(;ut!==null;)Pf(ut)}function pb(){for(;ut!==null&&!z0();)Pf(ut)}function Pf(n){var o=Rf(n.alternate,n,rs);n.memoizedProps=n.pendingProps,o===null?Mf(n):ut=o,fd.current=null}function Mf(n){var o=n;do{var d=o.alternate;if(n=o.return,(o.flags&32768)===0){if(d=ob(d,o,rs),d!==null){ut=d;return}}else{if(d=lb(d,o),d!==null){d.flags&=32767,ut=d;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xt=6,ut=null;return}}if(o=o.sibling,o!==null){ut=o;return}ut=o=n}while(o!==null);xt===0&&(xt=5)}function Kn(n,o,d){var m=We,g=hs.transition;try{hs.transition=null,We=1,gb(n,o,d,m)}finally{hs.transition=g,We=m}return null}function gb(n,o,d,m){do Ir();while(wn!==null);if(($e&6)!==0)throw Error(s(327));d=n.finishedWork;var g=n.finishedLanes;if(d===null)return null;if(n.finishedWork=null,n.finishedLanes=0,d===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0;var x=d.lanes|d.childLanes;if(Q0(n,x),n===wt&&(ut=wt=null,St=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||jo||(jo=!0,Ff(Ei,function(){return Ir(),null})),x=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||x){x=hs.transition,hs.transition=null;var k=We;We=1;var D=$e;$e|=4,fd.current=null,db(n,d),wf(d,n),Ly(Nc),Li=!!jc,Nc=jc=null,n.current=d,ub(d),$0(),$e=D,We=k,hs.transition=x}else n.current=d;if(jo&&(jo=!1,wn=n,No=g),x=n.pendingLanes,x===0&&(vn=null),W0(d.stateNode),Xt(n,at()),o!==null)for(m=n.onRecoverableError,d=0;d<o.length;d++)g=o[d],m(g.value,{componentStack:g.stack,digest:g.digest});if(wo)throw wo=!1,n=xd,xd=null,n;return(No&1)!==0&&n.tag!==0&&Ir(),x=n.pendingLanes,(x&1)!==0?n===yd?Ia++:(Ia=0,yd=n):Ia=0,gn(),null}function Ir(){if(wn!==null){var n=yh(No),o=hs.transition,d=We;try{if(hs.transition=null,We=16>n?16:n,wn===null)var m=!1;else{if(n=wn,wn=null,No=0,($e&6)!==0)throw Error(s(331));var g=$e;for($e|=4,ve=n.current;ve!==null;){var x=ve,k=x.child;if((ve.flags&16)!==0){var D=x.deletions;if(D!==null){for(var I=0;I<D.length;I++){var Q=D[I];for(ve=Q;ve!==null;){var ce=ve;switch(ce.tag){case 0:case 11:case 15:Ra(8,ce,x)}var de=ce.child;if(de!==null)de.return=ce,ve=de;else for(;ve!==null;){ce=ve;var le=ce.sibling,ye=ce.return;if(gf(ce),ce===Q){ve=null;break}if(le!==null){le.return=ye,ve=le;break}ve=ye}}}var je=x.alternate;if(je!==null){var Ne=je.child;if(Ne!==null){je.child=null;do{var it=Ne.sibling;Ne.sibling=null,Ne=it}while(Ne!==null)}}ve=x}}if((x.subtreeFlags&2064)!==0&&k!==null)k.return=x,ve=k;else e:for(;ve!==null;){if(x=ve,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Ra(9,x,x.return)}var q=x.sibling;if(q!==null){q.return=x.return,ve=q;break e}ve=x.return}}var $=n.current;for(ve=$;ve!==null;){k=ve;var K=k.child;if((k.subtreeFlags&2064)!==0&&K!==null)K.return=k,ve=K;else e:for(k=$;ve!==null;){if(D=ve,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:yo(9,D)}}catch(_e){nt(D,D.return,_e)}if(D===k){ve=null;break e}var he=D.sibling;if(he!==null){he.return=D.return,ve=he;break e}ve=D.return}}if($e=g,gn(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(Pi,n)}catch{}m=!0}return m}finally{We=d,hs.transition=o}}return!1}function Tf(n,o,d){o=Dr(d,o),o=Xm(n,o,1),n=yn(n,o,1),o=Ut(),n!==null&&(oa(n,1,o),Xt(n,o))}function nt(n,o,d){if(n.tag===3)Tf(n,n,d);else for(;o!==null;){if(o.tag===3){Tf(o,n,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m))){n=Dr(d,n),n=Qm(o,n,1),o=yn(o,n,1),n=Ut(),o!==null&&(oa(o,1,n),Xt(o,n));break}}o=o.return}}function xb(n,o,d){var m=n.pingCache;m!==null&&m.delete(o),o=Ut(),n.pingedLanes|=n.suspendedLanes&d,wt===n&&(St&d)===d&&(xt===4||xt===3&&(St&130023424)===St&&500>at()-gd?Yn(n,0):pd|=d),Xt(n,o)}function Df(n,o){o===0&&((n.mode&1)===0?o=1:(o=Ti,Ti<<=1,(Ti&130023424)===0&&(Ti=4194304)));var d=Ut();n=Hs(n,o),n!==null&&(oa(n,o,d),Xt(n,d))}function yb(n){var o=n.memoizedState,d=0;o!==null&&(d=o.retryLane),Df(n,d)}function bb(n,o){var d=0;switch(n.tag){case 13:var m=n.stateNode,g=n.memoizedState;g!==null&&(d=g.retryLane);break;case 19:m=n.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(o),Df(n,d)}var Rf;Rf=function(n,o,d){if(n!==null)if(n.memoizedProps!==o.pendingProps||Vt.current)Yt=!0;else{if((n.lanes&d)===0&&(o.flags&128)===0)return Yt=!1,ib(n,o,d);Yt=(n.flags&131072)!==0}else Yt=!1,Je&&(o.flags&1048576)!==0&&hm(o,eo,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;go(n,o),n=o.pendingProps;var g=kr(o,Mt.current);Mr(o,d),g=Yc(null,o,m,n,g,d);var x=Kc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qt(m)?(x=!0,Gi(o)):x=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,zc(o),g.updater=fo,o.stateNode=g,g._reactInternals=o,ed(o,m,n,d),o=rd(null,o,m,!0,x,d)):(o.tag=0,Je&&x&&Pc(o),$t(null,o,g,d),o=o.child),o;case 16:m=o.elementType;e:{switch(go(n,o),n=o.pendingProps,g=m._init,m=g(m._payload),o.type=m,g=o.tag=wb(m),n=ws(m,n),g){case 0:o=nd(null,o,m,n,d);break e;case 1:o=af(null,o,m,n,d);break e;case 11:o=ef(null,o,m,n,d);break e;case 14:o=tf(null,o,m,ws(m.type,n),d);break e}throw Error(s(306,m,""))}return o;case 0:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:ws(m,g),nd(n,o,m,g,d);case 1:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:ws(m,g),af(n,o,m,g,d);case 3:e:{if(of(o),n===null)throw Error(s(387));m=o.pendingProps,x=o.memoizedState,g=x.element,wm(n,o),io(o,m,null,d);var k=o.memoizedState;if(m=k.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){g=Dr(Error(s(423)),o),o=lf(n,o,m,d,g);break e}else if(m!==g){g=Dr(Error(s(424)),o),o=lf(n,o,m,d,g);break e}else for(ns=mn(o.stateNode.containerInfo.firstChild),ss=o,Je=!0,vs=null,d=bm(o,null,m,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ar(),m===g){o=Vs(n,o,d);break e}$t(n,o,m,d)}o=o.child}return o;case 5:return _m(o),n===null&&Dc(o),m=o.type,g=o.pendingProps,x=n!==null?n.memoizedProps:null,k=g.children,_c(m,g)?k=null:x!==null&&_c(m,x)&&(o.flags|=32),rf(n,o),$t(n,o,k,d),o.child;case 6:return n===null&&Dc(o),null;case 13:return cf(n,o,d);case 4:return $c(o,o.stateNode.containerInfo),m=o.pendingProps,n===null?o.child=Er(o,null,m,d):$t(n,o,m,d),o.child;case 11:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:ws(m,g),ef(n,o,m,g,d);case 7:return $t(n,o,o.pendingProps,d),o.child;case 8:return $t(n,o,o.pendingProps.children,d),o.child;case 12:return $t(n,o,o.pendingProps.children,d),o.child;case 10:e:{if(m=o.type._context,g=o.pendingProps,x=o.memoizedProps,k=g.value,Ye(no,m._currentValue),m._currentValue=k,x!==null)if(bs(x.value,k)){if(x.children===g.children&&!Vt.current){o=Vs(n,o,d);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var D=x.dependencies;if(D!==null){k=x.child;for(var I=D.firstContext;I!==null;){if(I.context===m){if(x.tag===1){I=Ws(-1,d&-d),I.tag=2;var Q=x.updateQueue;if(Q!==null){Q=Q.shared;var ce=Q.pending;ce===null?I.next=I:(I.next=ce.next,ce.next=I),Q.pending=I}}x.lanes|=d,I=x.alternate,I!==null&&(I.lanes|=d),Oc(x.return,d,o),D.lanes|=d;break}I=I.next}}else if(x.tag===10)k=x.type===o.type?null:x.child;else if(x.tag===18){if(k=x.return,k===null)throw Error(s(341));k.lanes|=d,D=k.alternate,D!==null&&(D.lanes|=d),Oc(k,d,o),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===o){k=null;break}if(x=k.sibling,x!==null){x.return=k.return,k=x;break}k=k.return}x=k}$t(n,o,g.children,d),o=o.child}return o;case 9:return g=o.type,m=o.pendingProps.children,Mr(o,d),g=ds(g),m=m(g),o.flags|=1,$t(n,o,m,d),o.child;case 14:return m=o.type,g=ws(m,o.pendingProps),g=ws(m.type,g),tf(n,o,m,g,d);case 15:return sf(n,o,o.type,o.pendingProps,d);case 17:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:ws(m,g),go(n,o),o.tag=1,qt(m)?(n=!0,Gi(o)):n=!1,Mr(o,d),Ym(o,m,g),ed(o,m,g,d),rd(null,o,m,!0,n,d);case 19:return uf(n,o,d);case 22:return nf(n,o,d)}throw Error(s(156,o.tag))};function Ff(n,o){return mh(n,o)}function vb(n,o,d,m){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,o,d,m){return new vb(n,o,d,m)}function _d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wb(n){if(typeof n=="function")return _d(n)?1:0;if(n!=null){if(n=n.$$typeof,n===W)return 11;if(n===ge)return 14}return 2}function _n(n,o){var d=n.alternate;return d===null?(d=ms(n.tag,o,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=o,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&14680064,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,o=n.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d}function Co(n,o,d,m,g,x){var k=2;if(m=n,typeof n=="function")_d(n)&&(k=1);else if(typeof n=="string")k=5;else e:switch(n){case B:return Xn(d.children,g,x,o);case R:k=8,g|=8;break;case C:return n=ms(12,d,o,g|2),n.elementType=C,n.lanes=x,n;case ee:return n=ms(13,d,o,g),n.elementType=ee,n.lanes=x,n;case ae:return n=ms(19,d,o,g),n.elementType=ae,n.lanes=x,n;case re:return Ao(d,g,x,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:k=10;break e;case T:k=9;break e;case W:k=11;break e;case ge:k=14;break e;case Y:k=16,m=null;break e}throw Error(s(130,n==null?n:typeof n,""))}return o=ms(k,d,o,g),o.elementType=n,o.type=m,o.lanes=x,o}function Xn(n,o,d,m){return n=ms(7,n,m,o),n.lanes=d,n}function Ao(n,o,d,m){return n=ms(22,n,m,o),n.elementType=re,n.lanes=d,n.stateNode={isHidden:!1},n}function kd(n,o,d){return n=ms(6,n,null,o),n.lanes=d,n}function Sd(n,o,d){return o=ms(4,n.children!==null?n.children:[],n.key,o),o.lanes=d,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function jb(n,o,d,m,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zl(0),this.expirationTimes=Zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.identifierPrefix=m,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Cd(n,o,d,m,g,x,k,D,I){return n=new jb(n,o,d,D,I),o===1?(o=1,x===!0&&(o|=8)):o=0,x=ms(3,null,null,o),n.current=x,x.stateNode=n,x.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},zc(x),n}function Nb(n,o,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:m==null?null:""+m,children:n,containerInfo:o,implementation:d}}function Lf(n){if(!n)return pn;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(s(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(s(171))}if(n.tag===1){var d=n.type;if(qt(d))return cm(n,d,o)}return o}function If(n,o,d,m,g,x,k,D,I){return n=Cd(d,m,!0,n,g,x,k,D,I),n.context=Lf(null),d=n.current,m=Ut(),g=jn(d),x=Ws(m,g),x.callback=o??null,yn(d,x,g),n.current.lanes=g,oa(n,g,m),Xt(n,m),n}function Eo(n,o,d,m){var g=o.current,x=Ut(),k=jn(g);return d=Lf(d),o.context===null?o.context=d:o.pendingContext=d,o=Ws(x,k),o.payload={element:n},m=m===void 0?null:m,m!==null&&(o.callback=m),n=yn(g,o,k),n!==null&&(_s(n,g,k,x),ao(n,g,k)),k}function Po(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Of(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<o?d:o}}function Ad(n,o){Of(n,o),(n=n.alternate)&&Of(n,o)}function _b(){return null}var Bf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ed(n){this._internalRoot=n}Mo.prototype.render=Ed.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));Eo(n,o,null,null)},Mo.prototype.unmount=Ed.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;qn(function(){Eo(null,n,null,null)}),o[Bs]=null}};function Mo(n){this._internalRoot=n}Mo.prototype.unstable_scheduleHydration=function(n){if(n){var o=wh();n={blockedOn:null,target:n,priority:o};for(var d=0;d<dn.length&&o!==0&&o<dn[d].priority;d++);dn.splice(d,0,n),d===0&&_h(n)}};function Pd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function To(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function zf(){}function kb(n,o,d,m,g){if(g){if(typeof m=="function"){var x=m;m=function(){var Q=Po(k);x.call(Q)}}var k=If(o,m,n,0,null,!1,!1,"",zf);return n._reactRootContainer=k,n[Bs]=k.current,wa(n.nodeType===8?n.parentNode:n),qn(),k}for(;g=n.lastChild;)n.removeChild(g);if(typeof m=="function"){var D=m;m=function(){var Q=Po(I);D.call(Q)}}var I=Cd(n,0,!1,null,null,!1,!1,"",zf);return n._reactRootContainer=I,n[Bs]=I.current,wa(n.nodeType===8?n.parentNode:n),qn(function(){Eo(o,I,d,m)}),I}function Do(n,o,d,m,g){var x=d._reactRootContainer;if(x){var k=x;if(typeof g=="function"){var D=g;g=function(){var I=Po(k);D.call(I)}}Eo(o,k,n,g)}else k=kb(d,o,n,g,m);return Po(k)}bh=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var d=ia(o.pendingLanes);d!==0&&(ec(o,d|1),Xt(o,at()),($e&6)===0&&(Lr=at()+500,gn()))}break;case 13:qn(function(){var m=Hs(n,1);if(m!==null){var g=Ut();_s(m,n,1,g)}}),Ad(n,1)}},tc=function(n){if(n.tag===13){var o=Hs(n,134217728);if(o!==null){var d=Ut();_s(o,n,134217728,d)}Ad(n,134217728)}},vh=function(n){if(n.tag===13){var o=jn(n),d=Hs(n,o);if(d!==null){var m=Ut();_s(d,n,o,m)}Ad(n,o)}},wh=function(){return We},jh=function(n,o){var d=We;try{return We=n,o()}finally{We=d}},Yl=function(n,o,d){switch(o){case"input":if(ke(n,d),o=d.name,d.type==="radio"&&o!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==n&&m.form===n.form){var g=Xi(m);if(!g)throw Error(s(90));is(m),ke(m,g)}}}break;case"textarea":me(n,d);break;case"select":o=d.value,o!=null&&rt(n,!!d.multiple,o,!1)}},ih=wd,oh=qn;var Sb={usingClientEntryPoint:!1,Events:[_a,Nr,Xi,rh,ah,wd]},Oa={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cb={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uh(n),n===null?null:n.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||_b,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{Pi=Ro.inject(Cb),Cs=Ro}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb,Qt.createPortal=function(n,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(o))throw Error(s(200));return Nb(n,o,null,d)},Qt.createRoot=function(n,o){if(!Pd(n))throw Error(s(299));var d=!1,m="",g=Bf;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Cd(n,1,!1,null,null,d,!1,m,g),n[Bs]=o.current,wa(n.nodeType===8?n.parentNode:n),new Ed(o)},Qt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=uh(o),n=n===null?null:n.stateNode,n},Qt.flushSync=function(n){return qn(n)},Qt.hydrate=function(n,o,d){if(!To(o))throw Error(s(200));return Do(null,n,o,!0,d)},Qt.hydrateRoot=function(n,o,d){if(!Pd(n))throw Error(s(405));var m=d!=null&&d.hydratedSources||null,g=!1,x="",k=Bf;if(d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),o=If(o,null,n,1,d??null,g,!1,x,k),n[Bs]=o.current,wa(n),m)for(n=0;n<m.length;n++)d=m[n],g=d._getVersion,g=g(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,g]:o.mutableSourceEagerHydrationData.push(d,g);return new Mo(o)},Qt.render=function(n,o,d){if(!To(o))throw Error(s(200));return Do(null,n,o,!1,d)},Qt.unmountComponentAtNode=function(n){if(!To(n))throw Error(s(40));return n._reactRootContainer?(qn(function(){Do(null,null,n,!1,function(){n._reactRootContainer=null,n[Bs]=null})}),!0):!1},Qt.unstable_batchedUpdates=wd,Qt.unstable_renderSubtreeIntoContainer=function(n,o,d,m){if(!To(d))throw Error(s(200));if(n==null||n._reactInternals===void 0)throw Error(s(38));return Do(n,o,d,!1,m)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var Kf;function Yg(){if(Kf)return Dd.exports;Kf=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dd.exports=Lb(),Dd.exports}var Xf;function Ib(){if(Xf)return Fo;Xf=1;var t=Yg();return Fo.createRoot=t.createRoot,Fo.hydrateRoot=t.hydrateRoot,Fo}var Ob=Ib();const Bb=qg(Ob);Yg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},oi.apply(this,arguments)}var An;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(An||(An={}));const Qf="popstate";function zb(t){t===void 0&&(t={});function e(r,i){let{pathname:l,search:c,hash:u}=r.location;return ru("",{pathname:l,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:al(i)}return Ub(e,s,null,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $b(){return Math.random().toString(36).substr(2,8)}function Gf(t,e){return{usr:t.state,key:t.key,idx:e}}function ru(t,e,s,r){return s===void 0&&(s=null),oi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qr(e):e,{state:s,key:e&&e.key||r||$b()})}function al(t){let{pathname:e="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qr(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ub(t,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,u=An.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(oi({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function y(){u=An.Pop;let w=p(),S=w==null?null:w-f;f=w,h&&h({action:u,location:v.location,delta:S})}function b(w,S){u=An.Push;let M=ru(v.location,w,S);f=p()+1;let A=Gf(M,f),E=v.createHref(M);try{c.pushState(A,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(E)}l&&h&&h({action:u,location:v.location,delta:1})}function j(w,S){u=An.Replace;let M=ru(v.location,w,S);f=p();let A=Gf(M,f),E=v.createHref(M);c.replaceState(A,"",E),l&&h&&h({action:u,location:v.location,delta:0})}function _(w){let S=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof w=="string"?w:al(w);return M=M.replace(/ $/,"%20"),dt(S,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,S)}let v={get action(){return u},get location(){return t(i,c)},listen(w){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Qf,y),h=w,()=>{i.removeEventListener(Qf,y),h=null}},createHref(w){return e(i,w)},createURL:_,encodeLocation(w){let S=_(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:b,replace:j,go(w){return c.go(w)}};return v}var Jf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jf||(Jf={}));function Hb(t,e,s){return s===void 0&&(s="/"),Wb(t,e,s)}function Wb(t,e,s,r){let i=typeof e=="string"?Qr(e):e,l=Pu(i.pathname||"/",s);if(l==null)return null;let c=Xg(t);Vb(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=nv(l);u=ev(c[h],f)}return u}function Xg(t,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(l,c,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(dt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Mn([r,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(dt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Xg(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:Jb(f,l.index),routesMeta:p})};return t.forEach((l,c)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,c);else for(let h of Qg(l.path))i(l,c,h)}),e}function Qg(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=Qg(r.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function Vb(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Zb(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const qb=/^:[\w-]+$/,Yb=3,Kb=2,Xb=1,Qb=10,Gb=-2,Zf=t=>t==="*";function Jb(t,e){let s=t.split("/"),r=s.length;return s.some(Zf)&&(r+=Gb),e&&(r+=Kb),s.filter(i=>!Zf(i)).reduce((i,l)=>i+(qb.test(l)?Yb:l===""?Xb:Qb),r)}function Zb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ev(t,e,s){let{routesMeta:r}=t,i={},l="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,p=l==="/"?e:e.slice(l.length)||"/",y=tv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),b=h.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:Mn([l,y.pathname]),pathnameBase:ov(Mn([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=Mn([l,y.pathnameBase]))}return c}function tv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=sv(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,p,y)=>{let{paramName:b,isOptional:j}=p;if(b==="*"){let v=u[y]||"";c=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const _=u[y];return j&&!_?f[b]=void 0:f[b]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function sv(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Kg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function nv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function rv(t,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Qr(t):t;return{pathname:s?s.startsWith("/")?s:av(s,e):e,search:lv(r),hash:cv(i)}}function av(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Ld(t,e,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Mu(t,e){let s=iv(t);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function Tu(t,e,s,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Qr(t):(i=oi({},t),dt(!i.pathname||!i.pathname.includes("?"),Ld("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),Ld("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),Ld("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,u;if(c==null)u=s;else{let y=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;i.pathname=b.join("/")}u=y>=0?e[y]:"/"}let h=rv(i,u),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Mn=t=>t.join("/").replace(/\/\/+/g,"/"),ov=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gg=["post","put","patch","delete"];new Set(Gg);const uv=["get",...Gg];new Set(uv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function li(){return li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},li.apply(this,arguments)}const Du=N.createContext(null),hv=N.createContext(null),Fn=N.createContext(null),Nl=N.createContext(null),rn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Jg=N.createContext(null);function mv(t,e){let{relative:s}=e===void 0?{}:e;Gr()||dt(!1);let{basename:r,navigator:i}=N.useContext(Fn),{hash:l,pathname:c,search:u}=tx(t,{relative:s}),h=c;return r!=="/"&&(h=c==="/"?r:Mn([r,c])),i.createHref({pathname:h,search:u,hash:l})}function Gr(){return N.useContext(Nl)!=null}function Jr(){return Gr()||dt(!1),N.useContext(Nl).location}function Zg(t){N.useContext(Fn).static||N.useLayoutEffect(t)}function ur(){let{isDataRoute:t}=N.useContext(rn);return t?Sv():fv()}function fv(){Gr()||dt(!1);let t=N.useContext(Du),{basename:e,future:s,navigator:r}=N.useContext(Fn),{matches:i}=N.useContext(rn),{pathname:l}=Jr(),c=JSON.stringify(Mu(i,s.v7_relativeSplatPath)),u=N.useRef(!1);return Zg(()=>{u.current=!0}),N.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Tu(f,JSON.parse(c),l,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Mn([e,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[e,r,c,l,t])}function ex(){let{matches:t}=N.useContext(rn),e=t[t.length-1];return e?e.params:{}}function tx(t,e){let{relative:s}=e===void 0?{}:e,{future:r}=N.useContext(Fn),{matches:i}=N.useContext(rn),{pathname:l}=Jr(),c=JSON.stringify(Mu(i,r.v7_relativeSplatPath));return N.useMemo(()=>Tu(t,JSON.parse(c),l,s==="path"),[t,c,l,s])}function pv(t,e){return gv(t,e)}function gv(t,e,s,r){Gr()||dt(!1);let{navigator:i}=N.useContext(Fn),{matches:l}=N.useContext(rn),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Jr(),p;if(e){var y;let w=typeof e=="string"?Qr(e):e;h==="/"||(y=w.pathname)!=null&&y.startsWith(h)||dt(!1),p=w}else p=f;let b=p.pathname||"/",j=b;if(h!=="/"){let w=h.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=Hb(t,{pathname:j}),v=wv(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Mn([h,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Mn([h,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,s,r);return e&&v?N.createElement(Nl.Provider,{value:{location:li({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:An.Pop}},v):v}function xv(){let t=kv(),e=dv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:i},s):null,null)}const yv=N.createElement(xv,null);class bv extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?N.createElement(rn.Provider,{value:this.props.routeContext},N.createElement(Jg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vv(t){let{routeContext:e,match:s,children:r}=t,i=N.useContext(Du);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(rn.Provider,{value:e},r)}function wv(t,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=r)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,u=(i=s)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);p>=0||dt(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(s&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let y=c[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:b,errors:j}=s,_=y.route.loader&&b[y.route.id]===void 0&&(!j||j[y.route.id]===void 0);if(y.route.lazy||_){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,y,b)=>{let j,_=!1,v=null,w=null;s&&(j=u&&y.route.id?u[y.route.id]:void 0,v=y.route.errorElement||yv,h&&(f<0&&b===0?(Cv("route-fallback"),_=!0,w=null):f===b&&(_=!0,w=y.route.hydrateFallbackElement||null)));let S=e.concat(c.slice(0,b+1)),M=()=>{let A;return j?A=v:_?A=w:y.route.Component?A=N.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=p,N.createElement(vv,{match:y,routeContext:{outlet:p,matches:S,isDataRoute:s!=null},children:A})};return s&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?N.createElement(bv,{location:s.location,revalidation:s.revalidation,component:v,error:j,children:M(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):M()},null)}var sx=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(sx||{}),nx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(nx||{});function jv(t){let e=N.useContext(Du);return e||dt(!1),e}function Nv(t){let e=N.useContext(hv);return e||dt(!1),e}function _v(t){let e=N.useContext(rn);return e||dt(!1),e}function rx(t){let e=_v(),s=e.matches[e.matches.length-1];return s.route.id||dt(!1),s.route.id}function kv(){var t;let e=N.useContext(Jg),s=Nv(),r=rx();return e!==void 0?e:(t=s.errors)==null?void 0:t[r]}function Sv(){let{router:t}=jv(sx.UseNavigateStable),e=rx(nx.UseNavigateStable),s=N.useRef(!1);return Zg(()=>{s.current=!0}),N.useCallback(function(i,l){l===void 0&&(l={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,li({fromRouteId:e},l)))},[t,e])}const ep={};function Cv(t,e,s){ep[t]||(ep[t]=!0)}function Av(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function il(t){let{to:e,replace:s,state:r,relative:i}=t;Gr()||dt(!1);let{future:l,static:c}=N.useContext(Fn),{matches:u}=N.useContext(rn),{pathname:h}=Jr(),f=ur(),p=Tu(e,Mu(u,l.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(p);return N.useEffect(()=>f(JSON.parse(y),{replace:s,state:r,relative:i}),[f,y,i,s,r]),null}function yt(t){dt(!1)}function Ev(t){let{basename:e="/",children:s=null,location:r,navigationType:i=An.Pop,navigator:l,static:c=!1,future:u}=t;Gr()&&dt(!1);let h=e.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:h,navigator:l,static:c,future:li({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);typeof r=="string"&&(r=Qr(r));let{pathname:p="/",search:y="",hash:b="",state:j=null,key:_="default"}=r,v=N.useMemo(()=>{let w=Pu(p,h);return w==null?null:{location:{pathname:w,search:y,hash:b,state:j,key:_},navigationType:i}},[h,p,y,b,j,_,i]);return v==null?null:N.createElement(Fn.Provider,{value:f},N.createElement(Nl.Provider,{children:s,value:v}))}function Pv(t){let{children:e,location:s}=t;return pv(au(e),s)}new Promise(()=>{});function au(t,e){e===void 0&&(e=[]);let s=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let l=[...e,i];if(r.type===N.Fragment){s.push.apply(s,au(r.props.children,l));return}r.type!==yt&&dt(!1),!r.props.index||!r.props.children||dt(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=au(r.props.children,l)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},iu.apply(this,arguments)}function Mv(t,e){if(t==null)return{};var s={},r=Object.keys(t),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function Tv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dv(t,e){return t.button===0&&(!e||e==="_self")&&!Tv(t)}const Rv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fv="6";try{window.__reactRouterVersion=Fv}catch{}const Lv="startTransition",tp=Db[Lv];function Iv(t){let{basename:e,children:s,future:r,window:i}=t,l=N.useRef();l.current==null&&(l.current=zb({window:i,v5Compat:!0}));let c=l.current,[u,h]=N.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},p=N.useCallback(y=>{f&&tp?tp(()=>h(y)):h(y)},[h,f]);return N.useLayoutEffect(()=>c.listen(p),[c,p]),N.useEffect(()=>Av(r),[r]),N.createElement(Ev,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:r})}const Ov=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ou=N.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:l,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:y}=e,b=Mv(e,Rv),{basename:j}=N.useContext(Fn),_,v=!1;if(typeof f=="string"&&Bv.test(f)&&(_=f,Ov))try{let A=new URL(window.location.href),E=f.startsWith("//")?new URL(A.protocol+f):new URL(f),P=Pu(E.pathname,j);E.origin===A.origin&&P!=null?f=P+E.search+E.hash:v=!0}catch{}let w=mv(f,{relative:i}),S=zv(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:y});function M(A){r&&r(A),A.defaultPrevented||S(A)}return N.createElement("a",iu({},b,{href:_||w,onClick:v||l?r:M,ref:s,target:h}))});var sp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sp||(sp={}));var np;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(np||(np={}));function zv(t,e){let{target:s,replace:r,state:i,preventScrollReset:l,relative:c,viewTransition:u}=e===void 0?{}:e,h=ur(),f=Jr(),p=tx(t,{relative:c});return N.useCallback(y=>{if(Dv(y,s)){y.preventDefault();let b=r!==void 0?r:al(f)===al(p);h(t,{replace:b,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[f,h,p,r,i,s,t,l,c,u])}function ax(t,e){return function(){return t.apply(e,arguments)}}const{toString:$v}=Object.prototype,{getPrototypeOf:Ru}=Object,{iterator:_l,toStringTag:ix}=Symbol,kl=(t=>e=>{const s=$v.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ss=t=>(t=t.toLowerCase(),e=>kl(e)===t),Sl=t=>e=>typeof e===t,{isArray:Zr}=Array,ci=Sl("undefined");function xi(t){return t!==null&&!ci(t)&&t.constructor!==null&&!ci(t.constructor)&&Zt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ox=Ss("ArrayBuffer");function Uv(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ox(t.buffer),e}const Hv=Sl("string"),Zt=Sl("function"),lx=Sl("number"),yi=t=>t!==null&&typeof t=="object",Wv=t=>t===!0||t===!1,el=t=>{if(kl(t)!=="object")return!1;const e=Ru(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ix in t)&&!(_l in t)},Vv=t=>{if(!yi(t)||xi(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},qv=Ss("Date"),Yv=Ss("File"),Kv=Ss("Blob"),Xv=Ss("FileList"),Qv=t=>yi(t)&&Zt(t.pipe),Gv=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zt(t.append)&&((e=kl(t))==="formdata"||e==="object"&&Zt(t.toString)&&t.toString()==="[object FormData]"))},Jv=Ss("URLSearchParams"),[Zv,ew,tw,sw]=["ReadableStream","Request","Response","Headers"].map(Ss),nw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bi(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Zr(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(xi(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let u;for(r=0;r<c;r++)u=l[r],e.call(null,t[u],u,t)}}function cx(t,e){if(xi(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,i;for(;r-- >0;)if(i=s[r],e===i.toLowerCase())return i;return null}const sr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dx=t=>!ci(t)&&t!==sr;function lu(){const{caseless:t}=dx(this)&&this||{},e={},s=(r,i)=>{const l=t&&cx(e,i)||i;el(e[l])&&el(r)?e[l]=lu(e[l],r):el(r)?e[l]=lu({},r):Zr(r)?e[l]=r.slice():e[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bi(arguments[r],s);return e}const rw=(t,e,s,{allOwnKeys:r}={})=>(bi(e,(i,l)=>{s&&Zt(i)?t[l]=ax(i,s):t[l]=i},{allOwnKeys:r}),t),aw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),iw=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},ow=(t,e,s,r)=>{let i,l,c;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!r||r(c,t,e))&&!u[c]&&(e[c]=t[c],u[c]=!0);t=s!==!1&&Ru(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},lw=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},cw=t=>{if(!t)return null;if(Zr(t))return t;let e=t.length;if(!lx(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},dw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ru(Uint8Array)),uw=(t,e)=>{const r=(t&&t[_l]).call(t);let i;for(;(i=r.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},hw=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},mw=Ss("HTMLFormElement"),fw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,i){return r.toUpperCase()+i}),rp=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),pw=Ss("RegExp"),ux=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};bi(s,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(r[l]=c||i)}),Object.defineProperties(t,r)},gw=t=>{ux(t,(e,s)=>{if(Zt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(Zt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},xw=(t,e)=>{const s={},r=i=>{i.forEach(l=>{s[l]=!0})};return Zr(t)?r(t):r(String(t).split(e)),s},yw=()=>{},bw=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function vw(t){return!!(t&&Zt(t.append)&&t[ix]==="FormData"&&t[_l])}const ww=t=>{const e=new Array(10),s=(r,i)=>{if(yi(r)){if(e.indexOf(r)>=0)return;if(xi(r))return r;if(!("toJSON"in r)){e[i]=r;const l=Zr(r)?[]:{};return bi(r,(c,u)=>{const h=s(c,i+1);!ci(h)&&(l[u]=h)}),e[i]=void 0,l}}return r};return s(t,0)},jw=Ss("AsyncFunction"),Nw=t=>t&&(yi(t)||Zt(t))&&Zt(t.then)&&Zt(t.catch),hx=((t,e)=>t?setImmediate:e?((s,r)=>(sr.addEventListener("message",({source:i,data:l})=>{i===sr&&l===s&&r.length&&r.shift()()},!1),i=>{r.push(i),sr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Zt(sr.postMessage)),_w=typeof queueMicrotask<"u"?queueMicrotask.bind(sr):typeof process<"u"&&process.nextTick||hx,kw=t=>t!=null&&Zt(t[_l]),J={isArray:Zr,isArrayBuffer:ox,isBuffer:xi,isFormData:Gv,isArrayBufferView:Uv,isString:Hv,isNumber:lx,isBoolean:Wv,isObject:yi,isPlainObject:el,isEmptyObject:Vv,isReadableStream:Zv,isRequest:ew,isResponse:tw,isHeaders:sw,isUndefined:ci,isDate:qv,isFile:Yv,isBlob:Kv,isRegExp:pw,isFunction:Zt,isStream:Qv,isURLSearchParams:Jv,isTypedArray:dw,isFileList:Xv,forEach:bi,merge:lu,extend:rw,trim:nw,stripBOM:aw,inherits:iw,toFlatObject:ow,kindOf:kl,kindOfTest:Ss,endsWith:lw,toArray:cw,forEachEntry:uw,matchAll:hw,isHTMLForm:mw,hasOwnProperty:rp,hasOwnProp:rp,reduceDescriptors:ux,freezeMethods:gw,toObjectSet:xw,toCamelCase:fw,noop:yw,toFiniteNumber:bw,findKey:cx,global:sr,isContextDefined:dx,isSpecCompliantForm:vw,toJSONObject:ww,isAsyncFn:jw,isThenable:Nw,setImmediate:hx,asap:_w,isIterable:kw};function Te(t,e,s,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}J.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const mx=Te.prototype,fx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fx[t]={value:t}});Object.defineProperties(Te,fx);Object.defineProperty(mx,"isAxiosError",{value:!0});Te.from=(t,e,s,r,i,l)=>{const c=Object.create(mx);return J.toFlatObject(t,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Te.call(c,t.message,e,s,r,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const Sw=null;function cu(t){return J.isPlainObject(t)||J.isArray(t)}function px(t){return J.endsWith(t,"[]")?t.slice(0,-2):t}function ap(t,e,s){return t?t.concat(e).map(function(i,l){return i=px(i),!s&&l?"["+i+"]":i}).join(s?".":""):e}function Cw(t){return J.isArray(t)&&!t.some(cu)}const Aw=J.toFlatObject(J,{},null,function(e){return/^is[A-Z]/.test(e)});function Cl(t,e,s){if(!J.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=J.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!J.isUndefined(w[v])});const r=s.metaTokens,i=s.visitor||p,l=s.dots,c=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(e);if(!J.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(J.isDate(_))return _.toISOString();if(J.isBoolean(_))return _.toString();if(!h&&J.isBlob(_))throw new Te("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(_)||J.isTypedArray(_)?h&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,v,w){let S=_;if(_&&!w&&typeof _=="object"){if(J.endsWith(v,"{}"))v=r?v:v.slice(0,-2),_=JSON.stringify(_);else if(J.isArray(_)&&Cw(_)||(J.isFileList(_)||J.endsWith(v,"[]"))&&(S=J.toArray(_)))return v=px(v),S.forEach(function(A,E){!(J.isUndefined(A)||A===null)&&e.append(c===!0?ap([v],E,l):c===null?v:v+"[]",f(A))}),!1}return cu(_)?!0:(e.append(ap(w,v,l),f(_)),!1)}const y=[],b=Object.assign(Aw,{defaultVisitor:p,convertValue:f,isVisitable:cu});function j(_,v){if(!J.isUndefined(_)){if(y.indexOf(_)!==-1)throw Error("Circular reference detected in "+v.join("."));y.push(_),J.forEach(_,function(S,M){(!(J.isUndefined(S)||S===null)&&i.call(e,S,J.isString(M)?M.trim():M,v,b))===!0&&j(S,v?v.concat(M):[M])}),y.pop()}}if(!J.isObject(t))throw new TypeError("data must be an object");return j(t),e}function ip(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fu(t,e){this._pairs=[],t&&Cl(t,this,e)}const gx=Fu.prototype;gx.append=function(e,s){this._pairs.push([e,s])};gx.toString=function(e){const s=e?function(r){return e.call(this,r,ip)}:ip;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Ew(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xx(t,e,s){if(!e)return t;const r=s&&s.encode||Ew;J.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let l;if(i?l=i(e,s):l=J.isURLSearchParams(e)?e.toString():new Fu(e,s).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class op{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){J.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pw=typeof URLSearchParams<"u"?URLSearchParams:Fu,Mw=typeof FormData<"u"?FormData:null,Tw=typeof Blob<"u"?Blob:null,Dw={isBrowser:!0,classes:{URLSearchParams:Pw,FormData:Mw,Blob:Tw},protocols:["http","https","file","blob","url","data"]},Lu=typeof window<"u"&&typeof document<"u",du=typeof navigator=="object"&&navigator||void 0,Rw=Lu&&(!du||["ReactNative","NativeScript","NS"].indexOf(du.product)<0),Fw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lw=Lu&&window.location.href||"http://localhost",Iw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lu,hasStandardBrowserEnv:Rw,hasStandardBrowserWebWorkerEnv:Fw,navigator:du,origin:Lw},Symbol.toStringTag,{value:"Module"})),It={...Iw,...Dw};function Ow(t,e){return Cl(t,new It.classes.URLSearchParams,{visitor:function(s,r,i,l){return It.isNode&&J.isBuffer(s)?(this.append(r,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function Bw(t){return J.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zw(t){const e={},s=Object.keys(t);let r;const i=s.length;let l;for(r=0;r<i;r++)l=s[r],e[l]=t[l];return e}function bx(t){function e(s,r,i,l){let c=s[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=s.length;return c=!c&&J.isArray(i)?i.length:c,h?(J.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!u):((!i[c]||!J.isObject(i[c]))&&(i[c]=[]),e(s,r,i[c],l)&&J.isArray(i[c])&&(i[c]=zw(i[c])),!u)}if(J.isFormData(t)&&J.isFunction(t.entries)){const s={};return J.forEachEntry(t,(r,i)=>{e(Bw(r),i,s,0)}),s}return null}function $w(t,e,s){if(J.isString(t))try{return(e||JSON.parse)(t),J.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const vi={transitional:yx,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",i=r.indexOf("application/json")>-1,l=J.isObject(e);if(l&&J.isHTMLForm(e)&&(e=new FormData(e)),J.isFormData(e))return i?JSON.stringify(bx(e)):e;if(J.isArrayBuffer(e)||J.isBuffer(e)||J.isStream(e)||J.isFile(e)||J.isBlob(e)||J.isReadableStream(e))return e;if(J.isArrayBufferView(e))return e.buffer;if(J.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ow(e,this.formSerializer).toString();if((u=J.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Cl(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||i?(s.setContentType("application/json",!1),$w(e)):e}],transformResponse:[function(e){const s=this.transitional||vi.transitional,r=s&&s.forcedJSONParsing,i=this.responseType==="json";if(J.isResponse(e)||J.isReadableStream(e))return e;if(e&&J.isString(e)&&(r&&!this.responseType||i)){const c=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Te.from(u,Te.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:It.classes.FormData,Blob:It.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],t=>{vi.headers[t]={}});const Uw=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hw=t=>{const e={};let s,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),s=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!s||e[s]&&Uw[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},lp=Symbol("internals");function za(t){return t&&String(t).trim().toLowerCase()}function tl(t){return t===!1||t==null?t:J.isArray(t)?t.map(tl):String(t)}function Ww(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const Vw=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Id(t,e,s,r,i){if(J.isFunction(r))return r.call(this,e,s);if(i&&(e=s),!!J.isString(e)){if(J.isString(r))return e.indexOf(r)!==-1;if(J.isRegExp(r))return r.test(e)}}function qw(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function Yw(t,e){const s=J.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(i,l,c){return this[r].call(this,e,i,l,c)},configurable:!0})})}let es=class{constructor(e){e&&this.set(e)}set(e,s,r){const i=this;function l(u,h,f){const p=za(h);if(!p)throw new Error("header name must be a non-empty string");const y=J.findKey(i,p);(!y||i[y]===void 0||f===!0||f===void 0&&i[y]!==!1)&&(i[y||h]=tl(u))}const c=(u,h)=>J.forEach(u,(f,p)=>l(f,p,h));if(J.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(J.isString(e)&&(e=e.trim())&&!Vw(e))c(Hw(e),s);else if(J.isObject(e)&&J.isIterable(e)){let u={},h,f;for(const p of e){if(!J.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(h=u[f])?J.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,s)}else e!=null&&l(s,e,r);return this}get(e,s){if(e=za(e),e){const r=J.findKey(this,e);if(r){const i=this[r];if(!s)return i;if(s===!0)return Ww(i);if(J.isFunction(s))return s.call(this,i,r);if(J.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=za(e),e){const r=J.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||Id(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let i=!1;function l(c){if(c=za(c),c){const u=J.findKey(r,c);u&&(!s||Id(r,r[u],u,s))&&(delete r[u],i=!0)}}return J.isArray(e)?e.forEach(l):l(e),i}clear(e){const s=Object.keys(this);let r=s.length,i=!1;for(;r--;){const l=s[r];(!e||Id(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const s=this,r={};return J.forEach(this,(i,l)=>{const c=J.findKey(r,l);if(c){s[c]=tl(i),delete s[l];return}const u=e?qw(l):String(l).trim();u!==l&&delete s[l],s[u]=tl(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return J.forEach(this,(r,i)=>{r!=null&&r!==!1&&(s[i]=e&&J.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[lp]=this[lp]={accessors:{}}).accessors,i=this.prototype;function l(c){const u=za(c);r[u]||(Yw(i,c),r[u]=!0)}return J.isArray(e)?e.forEach(l):l(e),this}};es.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(es.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});J.freezeMethods(es);function Od(t,e){const s=this||vi,r=e||s,i=es.from(r.headers);let l=r.data;return J.forEach(t,function(u){l=u.call(s,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function vx(t){return!!(t&&t.__CANCEL__)}function ea(t,e,s){Te.call(this,t??"canceled",Te.ERR_CANCELED,e,s),this.name="CanceledError"}J.inherits(ea,Te,{__CANCEL__:!0});function wx(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new Te("Request failed with status code "+s.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Kw(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Xw(t,e){t=t||10;const s=new Array(t),r=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),p=r[l];c||(c=f),s[i]=h,r[i]=f;let y=l,b=0;for(;y!==i;)b+=s[y++],y=y%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),f-c<e)return;const j=p&&f-p;return j?Math.round(b*1e3/j):void 0}}function Qw(t,e){let s=0,r=1e3/e,i,l;const c=(f,p=Date.now())=>{s=p,i=null,l&&(clearTimeout(l),l=null),t(...f)};return[(...f)=>{const p=Date.now(),y=p-s;y>=r?c(f,p):(i=f,l||(l=setTimeout(()=>{l=null,c(i)},r-y)))},()=>i&&c(i)]}const ol=(t,e,s=3)=>{let r=0;const i=Xw(50,250);return Qw(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-r,f=i(h),p=c<=u;r=c;const y={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:f||void 0,estimated:f&&u&&p?(u-c)/f:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(y)},s)},cp=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},dp=t=>(...e)=>J.asap(()=>t(...e)),Gw=It.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,It.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(It.origin),It.navigator&&/(msie|trident)/i.test(It.navigator.userAgent)):()=>!0,Jw=It.hasStandardBrowserEnv?{write(t,e,s,r,i,l){const c=[t+"="+encodeURIComponent(e)];J.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),J.isString(r)&&c.push("path="+r),J.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Zw(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function e1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jx(t,e,s){let r=!Zw(e);return t&&(r||s==!1)?e1(t,e):e}const up=t=>t instanceof es?{...t}:t;function or(t,e){e=e||{};const s={};function r(f,p,y,b){return J.isPlainObject(f)&&J.isPlainObject(p)?J.merge.call({caseless:b},f,p):J.isPlainObject(p)?J.merge({},p):J.isArray(p)?p.slice():p}function i(f,p,y,b){if(J.isUndefined(p)){if(!J.isUndefined(f))return r(void 0,f,y,b)}else return r(f,p,y,b)}function l(f,p){if(!J.isUndefined(p))return r(void 0,p)}function c(f,p){if(J.isUndefined(p)){if(!J.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function u(f,p,y){if(y in e)return r(f,p);if(y in t)return r(void 0,f)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(f,p,y)=>i(up(f),up(p),y,!0)};return J.forEach(Object.keys({...t,...e}),function(p){const y=h[p]||i,b=y(t[p],e[p],p);J.isUndefined(b)&&y!==u||(s[p]=b)}),s}const Nx=t=>{const e=or({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=es.from(c),e.url=xx(jx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(J.isFormData(s)){if(It.hasStandardBrowserEnv||It.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[f,...p]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...p].join("; "))}}if(It.hasStandardBrowserEnv&&(r&&J.isFunction(r)&&(r=r(e)),r||r!==!1&&Gw(e.url))){const f=i&&l&&Jw.read(l);f&&c.set(i,f)}return e},t1=typeof XMLHttpRequest<"u",s1=t1&&function(t){return new Promise(function(s,r){const i=Nx(t);let l=i.data;const c=es.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:f}=i,p,y,b,j,_;function v(){j&&j(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function S(){if(!w)return;const A=es.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:A,config:t,request:w};wx(function(B){s(B),v()},function(B){r(B),v()},P),w=null}"onloadend"in w?w.onloadend=S:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(S)},w.onabort=function(){w&&(r(new Te("Request aborted",Te.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new Te("Network Error",Te.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||yx;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new Te(E,P.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,w)),w=null},l===void 0&&c.setContentType(null),"setRequestHeader"in w&&J.forEach(c.toJSON(),function(E,P){w.setRequestHeader(P,E)}),J.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),u&&u!=="json"&&(w.responseType=i.responseType),f&&([b,_]=ol(f,!0),w.addEventListener("progress",b)),h&&w.upload&&([y,j]=ol(h),w.upload.addEventListener("progress",y),w.upload.addEventListener("loadend",j)),(i.cancelToken||i.signal)&&(p=A=>{w&&(r(!A||A.type?new ea(null,t,w):A),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const M=Kw(i.url);if(M&&It.protocols.indexOf(M)===-1){r(new Te("Unsupported protocol "+M+":",Te.ERR_BAD_REQUEST,t));return}w.send(l||null)})},n1=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,i;const l=function(f){if(!i){i=!0,u();const p=f instanceof Error?f:this.reason;r.abort(p instanceof Te?p:new ea(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Te(`timeout ${e} of ms exceeded`,Te.ETIMEDOUT))},e);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),t=null)};t.forEach(f=>f.addEventListener("abort",l));const{signal:h}=r;return h.unsubscribe=()=>J.asap(u),h}},r1=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,i;for(;r<s;)i=r+e,yield t.slice(r,i),r=i},a1=async function*(t,e){for await(const s of i1(t))yield*r1(s,e)},i1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},hp=(t,e,s,r)=>{const i=a1(t,e);let l=0,c,u=h=>{c||(c=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await i.next();if(f){u(),h.close();return}let y=p.byteLength;if(s){let b=l+=y;s(b)}h.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},Al=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_x=Al&&typeof ReadableStream=="function",o1=Al&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),kx=(t,...e)=>{try{return!!t(...e)}catch{return!1}},l1=_x&&kx(()=>{let t=!1;const e=new Request(It.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),mp=64*1024,uu=_x&&kx(()=>J.isReadableStream(new Response("").body)),ll={stream:uu&&(t=>t.body)};Al&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ll[e]&&(ll[e]=J.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new Te(`Response type '${e}' is not supported`,Te.ERR_NOT_SUPPORT,r)})})})(new Response);const c1=async t=>{if(t==null)return 0;if(J.isBlob(t))return t.size;if(J.isSpecCompliantForm(t))return(await new Request(It.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(J.isArrayBufferView(t)||J.isArrayBuffer(t))return t.byteLength;if(J.isURLSearchParams(t)&&(t=t+""),J.isString(t))return(await o1(t)).byteLength},d1=async(t,e)=>{const s=J.toFiniteNumber(t.getContentLength());return s??c1(e)},u1=Al&&(async t=>{let{url:e,method:s,data:r,signal:i,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:f,headers:p,withCredentials:y="same-origin",fetchOptions:b}=Nx(t);f=f?(f+"").toLowerCase():"text";let j=n1([i,l&&l.toAbortSignal()],c),_;const v=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let w;try{if(h&&l1&&s!=="get"&&s!=="head"&&(w=await d1(p,r))!==0){let P=new Request(e,{method:"POST",body:r,duplex:"half"}),F;if(J.isFormData(r)&&(F=P.headers.get("content-type"))&&p.setContentType(F),P.body){const[B,R]=cp(w,ol(dp(h)));r=hp(P.body,mp,B,R)}}J.isString(y)||(y=y?"include":"omit");const S="credentials"in Request.prototype;_=new Request(e,{...b,signal:j,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:S?y:void 0});let M=await fetch(_,b);const A=uu&&(f==="stream"||f==="response");if(uu&&(u||A&&v)){const P={};["status","statusText","headers"].forEach(C=>{P[C]=M[C]});const F=J.toFiniteNumber(M.headers.get("content-length")),[B,R]=u&&cp(F,ol(dp(u),!0))||[];M=new Response(hp(M.body,mp,B,()=>{R&&R(),v&&v()}),P)}f=f||"text";let E=await ll[J.findKey(ll,f)||"text"](M,t);return!A&&v&&v(),await new Promise((P,F)=>{wx(P,F,{data:E,headers:es.from(M.headers),status:M.status,statusText:M.statusText,config:t,request:_})})}catch(S){throw v&&v(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,t,_),{cause:S.cause||S}):Te.from(S,S&&S.code,t,_)}}),hu={http:Sw,xhr:s1,fetch:u1};J.forEach(hu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const fp=t=>`- ${t}`,h1=t=>J.isFunction(t)||t===null||t===!1,Sx={getAdapter:t=>{t=J.isArray(t)?t:[t];const{length:e}=t;let s,r;const i={};for(let l=0;l<e;l++){s=t[l];let c;if(r=s,!h1(s)&&(r=hu[(c=String(s)).toLowerCase()],r===void 0))throw new Te(`Unknown adapter '${c}'`);if(r)break;i[c||"#"+l]=r}if(!r){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(fp).join(`
`):" "+fp(l[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:hu};function Bd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ea(null,t)}function pp(t){return Bd(t),t.headers=es.from(t.headers),t.data=Od.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Sx.getAdapter(t.adapter||vi.adapter)(t).then(function(r){return Bd(t),r.data=Od.call(t,t.transformResponse,r),r.headers=es.from(r.headers),r},function(r){return vx(r)||(Bd(t),r&&r.response&&(r.response.data=Od.call(t,t.transformResponse,r.response),r.response.headers=es.from(r.response.headers))),Promise.reject(r)})}const Cx="1.11.0",El={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{El[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const gp={};El.transitional=function(e,s,r){function i(l,c){return"[Axios v"+Cx+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,u)=>{if(e===!1)throw new Te(i(c," has been removed"+(s?" in "+s:"")),Te.ERR_DEPRECATED);return s&&!gp[c]&&(gp[c]=!0,console.warn(i(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,c,u):!0}};El.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function m1(t,e,s){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const l=r[i],c=e[l];if(c){const u=t[l],h=u===void 0||c(u,l,t);if(h!==!0)throw new Te("option "+l+" must be "+h,Te.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Te("Unknown option "+l,Te.ERR_BAD_OPTION)}}const sl={assertOptions:m1,validators:El},Ts=sl.validators;let ar=class{constructor(e){this.defaults=e||{},this.interceptors={request:new op,response:new op}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=or(this.defaults,s);const{transitional:r,paramsSerializer:i,headers:l}=s;r!==void 0&&sl.assertOptions(r,{silentJSONParsing:Ts.transitional(Ts.boolean),forcedJSONParsing:Ts.transitional(Ts.boolean),clarifyTimeoutError:Ts.transitional(Ts.boolean)},!1),i!=null&&(J.isFunction(i)?s.paramsSerializer={serialize:i}:sl.assertOptions(i,{encode:Ts.function,serialize:Ts.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),sl.assertOptions(s,{baseUrl:Ts.spelling("baseURL"),withXsrfToken:Ts.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=l&&J.merge(l.common,l[s.method]);l&&J.forEach(["delete","get","head","post","put","patch","common"],_=>{delete l[_]}),s.headers=es.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(h=h&&v.synchronous,u.unshift(v.fulfilled,v.rejected))});const f=[];this.interceptors.response.forEach(function(v){f.push(v.fulfilled,v.rejected)});let p,y=0,b;if(!h){const _=[pp.bind(this),void 0];for(_.unshift(...u),_.push(...f),b=_.length,p=Promise.resolve(s);y<b;)p=p.then(_[y++],_[y++]);return p}b=u.length;let j=s;for(y=0;y<b;){const _=u[y++],v=u[y++];try{j=_(j)}catch(w){v.call(this,w);break}}try{p=pp.call(this,j)}catch(_){return Promise.reject(_)}for(y=0,b=f.length;y<b;)p=p.then(f[y++],f[y++]);return p}getUri(e){e=or(this.defaults,e);const s=jx(e.baseURL,e.url,e.allowAbsoluteUrls);return xx(s,e.params,e.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(e){ar.prototype[e]=function(s,r){return this.request(or(r||{},{method:e,url:s,data:(r||{}).data}))}});J.forEach(["post","put","patch"],function(e){function s(r){return function(l,c,u){return this.request(or(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}ar.prototype[e]=s(),ar.prototype[e+"Form"]=s(!0)});let f1=class Ax{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(u=>{r.subscribe(u),l=u}).then(i);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,u){r.reason||(r.reason=new ea(l,c,u),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Ax(function(i){e=i}),cancel:e}}};function p1(t){return function(s){return t.apply(null,s)}}function g1(t){return J.isObject(t)&&t.isAxiosError===!0}const mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mu).forEach(([t,e])=>{mu[e]=t});function Ex(t){const e=new ar(t),s=ax(ar.prototype.request,e);return J.extend(s,ar.prototype,e,{allOwnKeys:!0}),J.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Ex(or(t,i))},s}const Le=Ex(vi);Le.Axios=ar;Le.CanceledError=ea;Le.CancelToken=f1;Le.isCancel=vx;Le.VERSION=Cx;Le.toFormData=Cl;Le.AxiosError=Te;Le.Cancel=Le.CanceledError;Le.all=function(e){return Promise.all(e)};Le.spread=p1;Le.isAxiosError=g1;Le.mergeConfig=or;Le.AxiosHeaders=es;Le.formToJSON=t=>bx(J.isHTMLForm(t)?new FormData(t):t);Le.getAdapter=Sx.getAdapter;Le.HttpStatusCode=mu;Le.default=Le;const{Axios:HS,AxiosError:WS,CanceledError:VS,isCancel:qS,CancelToken:YS,VERSION:KS,all:XS,Cancel:QS,isAxiosError:GS,spread:JS,toFormData:ZS,AxiosHeaders:eC,HttpStatusCode:tC,formToJSON:sC,getAdapter:nC,mergeConfig:rC}=Le,$a="https://65.20.84.140:3004/api";class x1{constructor(){this.refreshPromise=null,this.setupAxiosInterceptors()}setupAxiosInterceptors(){console.log("😫 Axios interceptors DISABLED to prevent auth loops"),Le.interceptors.request.use(e=>{const s=localStorage.getItem("access_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e))}async login(e,s){try{const r=await Le.post(`${$a}/auth/login`,{username:e,password:s});if(r.data.success){const{access_token:i,refresh_token:l,user:c}=r.data.data;return this.setAuthData(i,l,c),r.data}throw new Error(r.data.message||"Login failed")}catch(r){throw console.error("🚫 Login error:",r),r}}async loginWith2FA(e,s){try{const r=await Le.post(`${$a}/auth/login-2fa`,{user_id:e,token:s});if(r.data.success){const{access_token:i,refresh_token:l,user:c}=r.data.data;return this.setAuthData(i,l,c),r.data}throw new Error(r.data.message||"2FA login failed")}catch(r){throw console.error("🚫 2FA login error:",r),r}}async refreshToken(){if(this.refreshPromise)return this.refreshPromise;const e=localStorage.getItem("refresh_token");if(!e)throw console.error("🚫 No refresh token available"),new Error("No refresh token available");this.refreshPromise=this.performTokenRefresh(e);try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performTokenRefresh(e){try{console.log("🔄 Refreshing tokens...");const s=await Le.post(`${$a}/auth/refresh`,{refreshToken:e});if(s.data.success){const{access_token:r,refresh_token:i,user:l}=s.data.data;return localStorage.setItem("access_token",r),localStorage.setItem("refresh_token",i),l&&localStorage.setItem("user",JSON.stringify(l)),console.log("✅ Tokens refreshed successfully"),{accessToken:r,refreshToken:i}}throw new Error(s.data.message||"Token refresh failed")}catch(s){throw console.error("🚫 Token refresh error:",s),s.response?.status===401&&console.log("🚫 Refresh token expired or invalid"),s}}async logout(){try{const e=localStorage.getItem("refresh_token");e&&await Le.post(`${$a}/auth/logout`,{refreshToken:e})}catch(e){console.warn("⚠️ Logout API call failed:",e.message)}finally{this.clearAuthData(),this.redirectToLogin()}}async getCurrentUser(){try{const e=await Le.get(`${$a}/auth/me`);if(e.data.success){const s=e.data.data.user;return localStorage.setItem("user",JSON.stringify(s)),s}throw new Error(e.data.message||"Failed to get user info")}catch(e){throw console.error("🚫 Get current user error:",e),e}}setAuthData(e,s,r){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(r)),console.log("✅ Auth data stored successfully")}clearAuthData(){["access_token","refresh_token","auth_token","authToken","user"].forEach(s=>localStorage.removeItem(s)),console.log("🧹 Auth data cleared")}handleAuthFailure(e="Authentication failed"){console.log(`🚫 Auth failure: ${e}`),this.clearAuthData(),this.redirectToLogin()}redirectToLogin(){window.location.pathname!=="/login"&&(console.log("🔄 Redirecting to login page..."),window.location.pathname!=="/"&&sessionStorage.setItem("redirectAfterLogin",window.location.pathname),window.location.href="/login")}isAuthenticated(){const e=localStorage.getItem("access_token");localStorage.getItem("refresh_token");const s=localStorage.getItem("user");return!!(e&&s)}getStoredUser(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("🚫 Failed to parse stored user:",e),null}}getAccessToken(){return localStorage.getItem("access_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}isTokenExpiringSoon(){const e=this.getAccessToken();if(!e)return!1;try{const s=JSON.parse(atob(e.split(".")[1])),r=s.exp*1e3,i=Date.now(),l=r-i,c=i-s.iat*1e3,u=c>600*1e3;return console.log("🔍 Token expiry check:",{timeUntilExpiry:Math.round(l/1e3),tokenAge:Math.round(c/1e3),isOldEnough:u,shouldRefresh:l<300*1e3&&u}),l<300*1e3&&u}catch(s){return console.error("😫 Error checking token expiration:",s),!1}}async checkAndRefreshToken(){if(this.isTokenExpiringSoon()&&this.getRefreshToken())try{console.log("🔄 Token expiring soon, proactively refreshing..."),await this.refreshToken()}catch(e){console.error("🚫 Proactive token refresh failed:",e)}}startTokenRefreshTimer(){console.log("🔄 Token refresh timer disabled to prevent loops")}}const Ds=new x1,Px=N.createContext(),wi=()=>{const t=N.useContext(Px);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},y1=({children:t})=>{const[e,s]=N.useState(null),[r,i]=N.useState(null),[l,c]=N.useState(!0),[u,h]=N.useState(!1);N.useEffect(()=>{if(console.log("🔍 AuthContext: useEffect triggered, initialized:",u),console.log("🔍 AuthContext: Current URL:",window.location.href),u){console.log("🔍 AuthContext: Already initialized, skipping...");return}(()=>{try{console.log("🔍 AuthContext: Initializing authentication..."),h(!0);const w=Ds.isAuthenticated(),S=Ds.getStoredUser(),M=Ds.getAccessToken();console.log("🔍 AuthContext Init Check:"),console.log("  - isAuth:",w),console.log("  - hasStoredUser:",!!S),console.log("  - hasStoredToken:",!!M),console.log("  - storedUserData:",S),console.log("  - tokenLength:",M?.length||0),console.log("  - storedToken preview:",M?.substring(0,50)+"..."),w&&M&&S?(console.log("✅ AuthContext: Setting user and token state..."),i(M),s(S),console.log("✅ AuthContext: State set - User:",S.username,"Token length:",M.length),console.log("✅ AuthContext: User authenticated from stored tokens")):(console.log("⚠️ AuthContext: Auth failed - clearing states"),console.log("  - isAuth:",w,"hasToken:",!!M,"hasUser:",!!S),Ds.clearAuthData(),s(null),i(null))}catch(w){console.error("🚫 AuthContext: Error loading auth from localStorage:",w),Ds.clearAuthData(),s(null),i(null)}finally{console.log("🔍 AuthContext: Init complete, setting loading to false"),c(!1)}})()},[]);const f=(v,w,S)=>{if(console.log("🔐 AuthContext login called:",{hasUser:!!v,hasToken:!!w,hasRefresh:!!S,userData:v,tokenLength:w?.length||0}),!v||!w){console.error("🚫 AuthContext: Invalid login data provided");return}s(v),i(w),S?Ds.setAuthData(w,S,v):(localStorage.setItem("access_token",w),localStorage.setItem("user",JSON.stringify(v))),localStorage.removeItem("authToken"),console.log("✅ AuthContext login completed - User set:",!!e,"Token set:",!!r);const M=Ds.isAuthenticated();console.log("🔍 AuthContext: Post-login auth check:",M)},p=async()=>{s(null),i(null);try{await Ds.logout()}catch(v){console.error("Error during logout:",v),Ds.clearAuthData()}},y=()=>{const v=Ds.isAuthenticated(),w=!!(e&&r),S=localStorage.getItem("access_token"),M=localStorage.getItem("user");console.log("🔍 Authentication Check:",{serviceAuth:v,stateAuth:w,hasUser:!!e,hasToken:!!r,hasAccessToken:!!S,hasStoredUser:!!M,accessTokenLength:S?.length||0,storedUserLength:M?.length||0});const A=v||w;return!A&&v!==w&&console.log("🔍 Auth state mismatch:",{serviceAuth:v,stateAuth:w,hasUser:!!e,hasToken:!!r}),A},_={user:e,token:r,loading:l,login:f,logout:p,isAuthenticated:y,hasRole:v=>e?.role_name===v,hasPermission:v=>y()?e?.role_name==="super_admin"||e?.role?.name==="super_admin"?!0:e?.permissions&&Array.isArray(e.permissions)?e.permissions.includes(v):e?.permissions&&typeof e.permissions=="object"?!!e.permissions[v]:!1:!1};return a.jsx(Px.Provider,{value:_,children:t})},Ct=Le.create({baseURL:"https://65.20.84.140:3004/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Ct.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&!t.headers.Authorization&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ct.interceptors.response.use(t=>t,t=>(t.response?.status!==401&&t.response?.status!==403&&console.error("🚫 API Error:",{status:t.response?.status,message:t.response?.data?.message||t.message,url:t.config?.url}),Promise.reject(t)));class b1{constructor(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.CACHE_DURATION=300*1e3,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null,this.maxRetries=3}getCurrentUser(){try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return!s||typeof s!="object"||!s.id?(console.warn("Invalid user data structure"),this.clearUserData(),null):s}catch(e){return console.error("Error parsing user data:",e),this.clearUserData(),null}}clearUserData(){try{localStorage.removeItem("user"),this.clearCache()}catch(e){console.error("Error clearing user data:",e)}}clearCache(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null}isPermissionsCacheValid(){return this.permissionsCacheTimestamp?Date.now()-this.permissionsCacheTimestamp<this.CACHE_DURATION:!1}isRolesCacheValid(){return this.rolesCacheTimestamp?Date.now()-this.rolesCacheTimestamp<this.CACHE_DURATION:!1}async makeApiRequest(e,s=0){try{const r=await Ct.get(e);if(!r||!r.data)throw new Error("Invalid API response structure");if(!r.data.success)throw new Error(r.data.message||"API request failed");return r.data.data}catch(r){if(console.error(`API request failed for ${e}:`,r.message),s<this.maxRetries&&this.isRetryableError(r))return console.log(`Retrying request ${s+1}/${this.maxRetries}`),await this.delay(Math.pow(2,s)*1e3),this.makeApiRequest(e,s+1);throw r}}isRetryableError(e){return e.code==="NETWORK_ERROR"||e.response?.status>=500||e.message.includes("timeout")}delay(e){return new Promise(s=>setTimeout(s,e))}async getUserPermissions(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isPermissionsCacheValid()&&this.cachedPermissions?this.cachedPermissions:this.pendingPermissionsRequest?await this.pendingPermissionsRequest:(this.pendingPermissionsRequest=this.makeApiRequest("/permissions/my-permissions").then(r=>{const i=this.validatePermissionsData(r);return this.cachedPermissions=i,this.permissionsCacheTimestamp=Date.now(),i}).catch(r=>(console.error("Failed to get user permissions:",r.message),{})).finally(()=>{this.pendingPermissionsRequest=null}),await this.pendingPermissionsRequest):(console.warn("No valid user found for permissions request"),{})}catch(s){return console.error("Error in getUserPermissions:",s),{}}}validatePermissionsData(e){if(!e||typeof e!="object")return console.warn("Invalid permissions data structure"),{};const s={};for(const[r,i]of Object.entries(e))Array.isArray(i)&&(s[r]=i.filter(l=>l&&typeof l=="object"&&typeof l.permission_key=="string"));return s}async getUserRoles(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isRolesCacheValid()&&this.cachedRoles?this.cachedRoles:this.pendingRolesRequest?await this.pendingRolesRequest:(this.pendingRolesRequest=this.makeApiRequest("/permissions/my-roles").then(r=>{const i=this.validateRolesData(r);return this.cachedRoles=i,this.rolesCacheTimestamp=Date.now(),i}).catch(r=>(console.error("Failed to get user roles:",r.message),[])).finally(()=>{this.pendingRolesRequest=null}),await this.pendingRolesRequest):(console.warn("No valid user found for roles request"),[])}catch(s){return console.error("Error in getUserRoles:",s),[]}}validateRolesData(e){return Array.isArray(e)?e.filter(s=>s&&typeof s=="object"&&typeof s.name=="string"):(console.warn("Invalid roles data structure"),[])}async hasPermission(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid permission key provided"),!1;const r=await this.getUserPermissions(s);for(const i of Object.keys(r))if((r[i]||[]).some(c=>c.permission_key===e))return!0;return!1}catch(r){return console.error("Error checking permission:",r),!1}}async hasModuleAccess(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid module name provided"),!1;const r=await this.getUserPermissions(s);return r[e]&&r[e].length>0}catch(r){return console.error("Error checking module access:",r),!1}}async hasAnyPermission(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid permission keys array provided"),!1;const r=e.map(l=>this.hasPermission(l,s));return(await Promise.all(r)).some(l=>l===!0)}catch(r){return console.error("Error checking permissions:",r),!1}}async hasRole(e,s=null){try{return!e||typeof e!="string"?(console.warn("Invalid role name provided"),!1):(await this.getUserRoles(s)).some(i=>i.name===e)}catch(r){return console.error("Error checking role:",r),!1}}async hasAnyRole(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid role names array provided"),!1;const i=(await this.getUserRoles(s)).map(l=>l.name);return e.some(l=>i.includes(l))}catch(r){return console.error("Error checking roles:",r),!1}}getModulePermissions(){return{dashboard:["dashboard.view"],"user-management":["users.read","users.create","users.update","users.delete"],"role-management":["roles.read"],"campaign-types":["campaign-types.read"],"campaign-data":["campaign-data.read"],campaigns:["campaigns.read"],ads:["ads.read"],cards:["cards.read"],"card-users":["card-users.read"],"reports-table":["reports.read"],reports:["reports.read"],analytics:["analytics.view"],"2fa":["2fa.setup"],modules:["modules.read"],settings:["settings.update"]}}async canAccessRoute(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid route path provided"),!1;const r=e.replace(/^\/+/,"").toLowerCase(),l=this.getModulePermissions()[r];return!l||l.length===0?!0:await this.hasAnyPermission(l,s)}catch(r){return console.error("Error checking route access:",r),!1}}async refreshPermissions(){try{this.clearCache();const e=this.getCurrentUser();e?.id&&await Promise.allSettled([this.getUserPermissions(e.id),this.getUserRoles(e.id)])}catch(e){console.error("Error refreshing permissions:",e)}}destroy(){this.clearCache()}}const Or=new b1,v1=N.createContext(),Ht=({children:t})=>{const[e,s]=N.useState({}),[r,i]=N.useState([]),[l,c]=N.useState(!0),[u,h]=N.useState(null),[f,p]=N.useState(null);N.useEffect(()=>{y()},[]),N.useEffect(()=>{const R=()=>{const C=Or.getCurrentUser();C!==f&&(p(C),y())};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[f]);const y=async()=>{try{c(!0),h(null);const R=Or.getCurrentUser();if(p(R),R){const[C,O]=await Promise.all([Or.getUserPermissions(R.id),Or.getUserRoles(R.id)]);s(C),i(O)}else s({}),i([])}catch(R){console.error("Error initializing permissions:",R),h(R.message)}finally{c(!1)}},b=async()=>{await Or.refreshPermissions(),await y()},j=R=>{if(!e||Object.keys(e).length===0)return!1;for(const C of Object.keys(e))if((e[C]||[]).some(T=>T.permission_key===R))return!0;return!1},_=R=>Array.isArray(R)?R.some(C=>j(C)):j(R),v=R=>e[R]&&e[R].length>0,w=R=>r.some(C=>C.name===R),S=R=>Array.isArray(R)?R.some(C=>w(C)):w(R),M=R=>{const C=R.replace("/",""),T=Or.getModulePermissions()[C];return!T||T.length===0?!0:_(T)},A=()=>{const R=[];for(const C of Object.keys(e)){const O=e[C]||[];R.push(...O.map(T=>T.permission_key))}return[...new Set(R)]},E=()=>!r||r.length===0?0:Math.max(...r.map(R=>R.level||0)),B={permissions:e,roles:r,loading:l,error:u,user:f,initializePermissions:y,refreshPermissions:b,hasPermission:j,hasAnyPermission:_,hasModuleAccess:v,hasRole:w,hasAnyRole:S,canAccessRoute:M,getAllPermissionKeys:A,getHighestRoleLevel:E,isAdmin:()=>E()>=8||S(["Admin","Super Admin"]),isSuperAdmin:()=>E()>=10||w("Super Admin")};return a.jsx(v1.Provider,{value:B,children:t})};var w1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const j1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ee=(t,e)=>{const s=N.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...h},f)=>N.createElement("svg",{ref:f,...w1,width:i,height:i,stroke:r,strokeWidth:c?Number(l)*24/Number(i):l,className:`lucide lucide-${j1(t)}`,...h},[...e.map(([p,y])=>N.createElement(p,y)),...(Array.isArray(u)?u:[u])||[]]));return s.displayName=`${t}`,s},Oe=Ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),fu=Ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),pu=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ei=Ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),tn=Ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ti=Ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Pl=Ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),N1=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Mx=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ml=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),lr=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),_1=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Tx=Ee("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),cl=Ee("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Vr=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xp=Ee("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),di=Ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),k1=Ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),S1=Ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),yp=Ee("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),C1=Ee("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),A1=Ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),E1=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bp=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Tl=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),P1=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),sn=Ee("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),M1=Ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),ji=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ze=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$r=Ee("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Iu=Ee("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),_t=Ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ta=Ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Is=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),T1=Ee("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ni=Ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),vp=Ee("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]),Js=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),dl=Ee("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),ul=Ee("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),gs=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),si=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),wp=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),hl=Ee("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ml=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qr=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ou=Ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),lt=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ft=({children:t})=>{const[e,s]=N.useState(!0),[r,i]=N.useState(!1),l=Jr(),c=ur(),{user:u,logout:h}=wi(),f=null,p=!1,y=async()=>{try{await h()}catch(M){console.error("Logout error:",M),c("/login")}},b=M=>{const A=["Dashboard","User Management","Role Management","Brand Management","Business Manager","Campaign Type","Campaign","Cards","Cards Users","Facebook Accounts","Facebook Pages","Report"],E={"Campaign Types":"Campaign Type",Campaigns:"Campaign","Card Users":"Cards Users",Reports:"Report"},P=F=>{let B=A.indexOf(F);if(B!==-1)return B;const R=E[F];return R&&(B=A.indexOf(R),B!==-1)?B:-1};return M.sort((F,B)=>{const R=P(F.name),C=P(B.name);return R!==-1&&C!==-1?R-C:R!==-1?-1:C!==-1?1:(F.name||"").localeCompare(B.name||"")})};console.log("🔍 Debug - userAccess:",f),console.log("🔍 Debug - userAccess navigation:",f?.navigation),console.log("🔍 Debug - permissionsLoading:",p);const j=[],_=[{name:"Dashboard",href:"/dashboard",icon:S1},{name:"User Management",href:"/user-management",icon:qr},{name:"Role Management",href:"/role-management",icon:C1},{name:"Brand Management",href:"/brands",icon:vp},{name:"Business Manager",href:"/business-manager",icon:tn},{name:"Campaign Type",href:"/campaign-types",icon:vp},{name:"Campaign",href:"/campaigns",icon:Js},{name:"Cards",href:"/cards",icon:lr},{name:"Cards Users",href:"/card-users",icon:hl},{name:"Facebook Accounts",href:"/facebook-accounts",icon:xp},{name:"Facebook Pages",href:"/facebook-pages",icon:di},{name:"Reports",href:"/reports",icon:ei}],v=j.length>0?[...j,...j.find(M=>M.name==="Business Manager")?[]:[{name:"Business Manager",href:"/business-manager",icon:tn}],...j.find(M=>M.name==="Facebook Accounts")?[]:[{name:"Facebook Accounts",href:"/facebook-accounts",icon:xp}],...j.find(M=>M.name==="Facebook Pages")?[]:[{name:"Facebook Pages",href:"/facebook-pages",icon:di}]]:_,w=b(v),S=M=>l.pathname===M;return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx("div",{className:`hidden md:flex md:flex-shrink-0 transition-all duration-300 ${e?"md:w-64":"md:w-16"}`,children:a.jsx("div",{className:"flex flex-col w-full",children:a.jsxs("div",{className:"flex flex-col flex-grow bg-sidebar-bg overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsxs("div",{className:`flex items-center ${e?"block":"hidden"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Js,{className:"h-8 w-8 text-primary-500"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h1",{className:"text-xl font-bold text-white",children:"Ads Reporter"})})]}),a.jsx("button",{onClick:()=>s(!e),className:"p-1 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",children:e?a.jsx(N1,{className:"h-5 w-5"}):a.jsx(Mx,{className:"h-5 w-5"})})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:w.map(M=>{const A=M.icon;return a.jsxs(ou,{to:M.href,className:`sidebar-link ${S(M.href)?"active":""}`,title:e?"":M.name,children:[a.jsx(A,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:M.name})]},M.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:y,className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",title:e?"":"Logout",children:[a.jsx(bp,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})}),a.jsx("div",{className:`md:hidden ${r?"block":"hidden"}`,children:a.jsxs("div",{className:"fixed inset-0 flex z-40",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>i(!1)}),a.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-sidebar-bg",children:[a.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:a.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>i(!1),children:a.jsx(lt,{className:"h-6 w-6 text-white"})})}),a.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsx(Js,{className:"h-8 w-8 text-primary-500"}),a.jsx("h1",{className:"ml-3 text-xl font-bold text-white",children:"Ads Reporter"})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:w.map(M=>{const A=M.icon;return a.jsxs(ou,{to:M.href,className:`sidebar-link ${S(M.href)?"active":""}`,onClick:()=>i(!1),children:[a.jsx(A,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:M.name})]},M.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:()=>{i(!1),y()},className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",children:[a.jsx(bp,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})]})}),a.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[a.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[a.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>i(!0),children:a.jsx(P1,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:w.find(M=>M.href===l.pathname)?.name||"Dashboard"})}),a.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:u?.username||"User"}),a.jsx("div",{className:"h-8 w-8 bg-primary-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:(u?.username||"U")[0].toUpperCase()})})]})})]})]}),a.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:t})]})]})},Wt=({children:t})=>{const{isAuthenticated:e,loading:s,user:r,token:i}=wi();if(console.log("🚪 ProtectedRoute: Checking authentication...",{loading:s,hasUser:!!r,hasToken:!!i,currentPath:window.location.pathname}),s)return console.log("🔄 ProtectedRoute: Still loading, showing spinner"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});const l=e();return console.log("🔍 ProtectedRoute: Authentication result:",l),l?(console.log("✅ ProtectedRoute: User authenticated, rendering protected content"),t):(console.log("🚨 ProtectedRoute: Not authenticated, redirecting to login"),a.jsx(il,{to:"/login",replace:!0}))},D1=({children:t})=>{const e=localStorage.getItem("access_token"),s=localStorage.getItem("user");return console.log("🚪 SimpleProtectedRoute: Checking auth...",{hasToken:!!e,hasUser:!!s,currentPath:window.location.pathname}),!e||!s?(console.log("🚨 SimpleProtectedRoute: Not authenticated, redirecting to login"),a.jsx(il,{to:"/login",replace:!0})):(console.log("✅ SimpleProtectedRoute: User authenticated, rendering protected content"),t)},Tn={API_BASE_URL:"https://65.20.84.140:3004/api",TOKEN_KEY:"access_token",DEBUG:!1,ENVIRONMENT:"production",API_TIMEOUT:1e4,MESSAGE_TIMEOUT:5e3},fe=Le.create({baseURL:Tn.API_BASE_URL,timeout:Tn.API_TIMEOUT,headers:{"Content-Type":"application/json"}});window.clearAllTokens=()=>{console.log("🧹 Clearing all tokens manually..."),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),sessionStorage.clear(),console.log("✅ All tokens cleared! Redirecting to login..."),window.location.href="/login"};fe.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));fe.interceptors.response.use(t=>t,async t=>{const e=t.config;if(t.response?.status===401&&(t.response?.data?.code==="TOKEN_EXPIRED"||t.response?.data?.message?.includes("token"))&&!e._retry){console.log("🔄 Token expired, attempting refresh..."),e._retry=!0;try{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");const i=await(await fetch(`${Tn.API_BASE_URL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})})).json();if(i.success){const{accessToken:l,refreshToken:c}=i.data;return localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",c),e.headers.Authorization=`Bearer ${l}`,console.log("✅ Token refreshed successfully"),fe(e)}else throw new Error(i.message||"Token refresh failed")}catch(s){return console.error("🚫 Token refresh failed:",s),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}if(t.response?.status===401&&(console.log("🚩 Authentication failed, redirecting to login"),(e.url?.includes("/facebook-")||e.url?.includes("/bm")||e.url?.includes("/ads-manager"))&&sessionStorage.setItem("loginMessage","Please log in again to access the new Facebook and Advertising modules with updated permissions."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),t.response?.status===403){const s=t.response?.data?.message||"Access denied. You don't have permission to perform this action.";console.error("Permission denied:",s);const r=e.url?.includes("/facebook-")||e.url?.includes("/bm")||e.url?.includes("/ads-manager");if(s.includes("Wrong token type")||s.includes("access token"))console.log("Token type error detected, clearing old tokens"),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage","Please log in again to get a fresh access token."),window.location.href="/login");else if(r){console.log("🔒 Access denied to new module - may need fresh session");const i="You may need to log out and log in again to access the new Facebook and Advertising modules.";sessionStorage.setItem("permissionMessage",i),t.isNewModulePermissionError=!0,t.newModuleMessage=i}}else if(t.response?.status===404){const s=t.response?.data?.message||"The item you're looking for doesn't exist or may have been removed.";console.error("Resource not found:",s)}else if(t.response?.status>=500){const s=t.response?.data?.message||"We're experiencing technical difficulties. Please try again in a few minutes.";console.error("Server error:",s)}else t.response?.data?.message&&console.error("API Error:",t.response.data.message);if(t.response?.data?.message)t.userMessage=t.response.data.message;else switch(t.response?.status){case 400:t.userMessage="There was an issue with your request. Please check your input and try again.";break;case 403:t.userMessage="Access denied. You don't have permission to perform this action.";break;case 404:t.userMessage="The item you're looking for doesn't exist or may have been removed.";break;case 409:t.userMessage="This action conflicts with existing data. Please try again.";break;case 422:t.userMessage="Some of the information you provided is not valid. Please check and try again.";break;case 429:t.userMessage="You're making too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:t.userMessage="We're experiencing technical difficulties. Please try again in a few minutes.";break;default:t.userMessage="Something went wrong. Please try again later."}return Promise.reject(t)});const Bu=()=>{console.log("🧹 Clearing all authentication tokens..."),["access_token","authToken","auth_token","refresh_token","user"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),console.log("✅ All tokens cleared"),typeof window<"u"&&(window.location.href="/login")},R1=async()=>{const t=localStorage.getItem("access_token")||localStorage.getItem("authToken");if(!t)return console.log("❌ No token found"),!1;try{const e=JSON.parse(atob(t.split(".")[1])),s=Date.now()/1e3;return e.exp&&e.exp<s?(console.log("⏰ Token has expired"),Bu(),!1):!0}catch{return console.log("🔍 Could not decode token, assuming valid"),!0}},F1=t=>{(t.response?.status===401||t.status===401)&&(console.log("🚨 401 Unauthorized - clearing tokens and redirecting"),sessionStorage.setItem("recent_auth_error","true"),Bu())};typeof window<"u"&&(window.clearAllTokens=Bu,window.checkTokenExpiry=R1);const L1=()=>{const{login:t,isAuthenticated:e}=wi(),[s,r]=N.useState({username:"",password:"",twofa_code:""}),[i,l]=N.useState(!1),[c,u]=N.useState(!1),[h,f]=N.useState(""),[p,y]=N.useState(!1),[b,j]=N.useState(!1),[_,v]=N.useState(""),[w,S]=N.useState("credentials"),[M,A]=N.useState(null),[E,P]=N.useState(""),F=ur();N.useEffect(()=>{console.log("Login component: Checking authentication status...");const O=localStorage.getItem("access_token"),T=localStorage.getItem("user");O&&T?(console.log("Login component: User already authenticated, redirecting to dashboard"),F("/dashboard",{replace:!0})):console.log("Login component: Not authenticated, staying on login page")},[F]),N.useEffect(()=>{const O=sessionStorage.getItem("loginMessage");O&&(P(O),sessionStorage.removeItem("loginMessage"),setTimeout(()=>P(""),5e3))},[]);const B=async O=>{O.preventDefault(),u(!0),f(""),console.log("Login attempt:",{username:s.username,step:w});try{if(w==="credentials"){console.log("Making API call to backend...");try{const T=await fetch(`${Tn.API_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,password:s.password})});console.log("API response status:",T.status),console.log("API response ok:",T.ok);const W=await T.json();console.log("API response data:",W),W.success?W.data.requires_2fa_setup?(j(!0),A(W.data.user.id),v(W.data.qr_code),S("2fa_setup"),console.log("2FA setup required for user:",W.data.user.username)):W.data.requires_2fa?(y(!0),A(W.data.user.id),S("2fa"),console.log("2FA required for user:",W.data.user.username)):(console.log("Login successful, storing token and navigating..."),t(W.data.user,W.data.access_token,W.data.refresh_token),F("/dashboard")):f(W.message||"Invalid username or password")}catch(T){if(console.error("Login API Error:",T),T.response?.status===401)F1(T),f("Invalid username or password. Please check your credentials and try again.");else if(T.code==="ECONNREFUSED"||!T.response)if(console.warn("API not available, using demo mode"),s.username==="admin"&&s.password==="password"){const W="demo-token-"+Date.now(),ee={id:1,username:s.username,role_id:1,role_name:"admin"};t(ee,W,null),F("/dashboard")}else f("API unavailable. Use demo credentials: admin/password");else f("Failed to connect to server. Please try again or use demo credentials: admin/password")}}else if(w==="2fa")try{console.log("Making 2FA API call with user ID:",M,"token:",s.twofa_code);const W=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:M,token:s.twofa_code})})).json();if(console.log("2FA API response:",W),W.success){const{access_token:ee,refresh_token:ae,user:ge}=W.data;t(ge,ee,ae),console.log("2FA verification successful, navigating to dashboard"),F("/dashboard")}else{const ee=W.message||"Invalid 2FA code";console.error("2FA verification failed:",ee),f(ee),r({...s,twofa_code:""})}}catch{if(console.warn("API not available, using demo 2FA"),s.twofa_code==="123456"){const W="demo-token-2fa-"+Date.now(),ee={id:1,username:s.username,role_id:1,role_name:"admin",has_2fa:!0};t(ee,W,null),F("/dashboard")}else f("API unavailable. Demo 2FA code: 123456"),r({...s,twofa_code:""})}else if(w==="2fa_setup")try{console.log("Completing 2FA setup with user ID:",M,"token:",s.twofa_code);const W=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:M,token:s.twofa_code})})).json();if(console.log("2FA setup completion API response:",W),W.success){const{access_token:ee,refresh_token:ae,user:ge}=W.data;t(ge,ee,ae),console.log("2FA setup completed successfully, navigating to dashboard"),F("/dashboard")}else{const ee=W.message||"Invalid 2FA code. Please try again.";console.error("2FA setup failed:",ee),f(ee),r({...s,twofa_code:""})}}catch(T){console.error("2FA setup API error:",T),f("Failed to complete 2FA setup. Please try again."),r({...s,twofa_code:""})}}catch(T){console.error("Login error:",T),f("An error occurred. Please try again.")}finally{u(!1)}},R=O=>{const{name:T,value:W}=O.target;r({...s,[T]:W}),f("")},C=()=>{S("credentials"),y(!1),j(!1),v(""),A(null),r({...s,twofa_code:""}),f("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Js,{className:"h-10 w-10 text-purple-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Welcome Back"}),a.jsx("p",{className:"mt-2 text-sm text-purple-100",children:w==="credentials"?"Sign in to your Ads Reporter account":w==="2fa_setup"?"Set up two-factor authentication":"Enter your 2FA code to complete login"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[E&&a.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg text-sm",children:E}),h&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:h}),a.jsxs("form",{onSubmit:B,className:"space-y-6",children:[w==="credentials"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:s.username,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:i?"text":"password",required:!0,value:s.password,onChange:R,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:i?a.jsx(cl,{className:"h-5 w-5"}):a.jsx(Vr,{className:"h-5 w-5"})})]})]})]}):w==="2fa_setup"?a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:a.jsx(Ni,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Set up Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),a.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200 inline-block mb-4",children:_?a.jsx("img",{src:_,alt:"2FA QR Code",className:"w-40 h-40 mx-auto"}):a.jsx("div",{className:"w-40 h-40 bg-gray-100 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})})}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"After scanning, enter the 6-digit code from your app to complete setup"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:s.twofa_code,onChange:O=>{const T=O.target.value.replace(/\D/g,"").substring(0,6);r({...s,twofa_code:T}),f("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:C,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:a.jsx(T1,{className:"h-8 w-8 text-green-600"})}),a.jsx("p",{className:"text-sm text-gray-600",children:"Please enter the 6-digit code from your authenticator app"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:s.twofa_code,onChange:O=>{const T=O.target.value.replace(/\D/g,"").substring(0,6);r({...s,twofa_code:T}),f("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:C,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):w==="credentials"?"Sign In":w==="2fa_setup"?"Complete Setup":"Verify & Continue"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Ads Reporter © 2025 - Secure Login System"})})]})]})})},Dx=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=/^(\d{2})\/(\d{2})\/(\d{4})$/,s=t.match(e);if(s){const[,i,l,c]=s,u=new Date(c,l-1,i);return isNaN(u.getTime())?null:u}const r=new Date(t);return isNaN(r.getTime())?null:r}return null},cr=t=>{if(!t)return"N/A";try{const e=Dx(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${r}/${i}`}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}},I1=t=>{if(!t)return"N/A";try{const e=Dx(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${s}/${r}/${i} ${l}:${c}`}catch(e){return console.error("Error formatting datetime:",e),"Invalid Date"}},mt=({closeForm:t,setMessage:e,setError:s,error:r,context:i="performing this action"})=>{console.error(`Access denied while ${i}:`,r),t&&typeof t=="function"&&t();const l=r?.response,c=l?.data;let u="";return l?.status===403?u=c?.message||"Access denied. You do not have permission to perform this action.":l?.status===401?u="Authentication required. Please log in first.":u=c?.message||r?.message||`Access denied while ${i}`,setTimeout(()=>{e&&e({type:"error",content:u,isAccessDenied:!0}),s&&s(u)},100),l?.status===401&&setTimeout(()=>{!localStorage.getItem("authToken")&&!localStorage.getItem("access_token")&&window.location.pathname!=="/login"&&console.log("No valid token found, redirecting to login...")},3e3),{isAccessDenied:!0,status:l?.status,message:u}},ot=t=>{const e=t?.response?.status;return e===401||e===403},Ua=Tn.API_BASE_URL,O1=({isOpen:t,onClose:e,title:s,children:r,size:i="md"})=>{if(!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:`relative bg-white shadow-xl rounded-lg w-full ${l[i]}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6",children:r})]})})},B1=({isOpen:t,onClose:e,user:s,roles:r,onSubmit:i,isLoading:l,accessDeniedMessage:c,modalError:u})=>{const[h,f]=N.useState({username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),[p,y]=N.useState(!1),[b,j]=N.useState({});N.useEffect(()=>{f(s?{username:s.username||"",password:"",confirm_password:"",role_id:s.role_id||"",enable_2fa:s.is_2fa_enabled||!1}:{username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),j({})},[s,t]);const _=v=>{v.preventDefault(),j({});const w={};if(h.username.trim()||(w.username="Username is required"),!s&&!h.password&&(w.password="Password is required"),h.password&&h.password.length<6&&(w.password="Password must be at least 6 characters"),h.password!==h.confirm_password&&(w.confirm_password="Passwords do not match"),h.role_id||(w.role_id="Role is required"),Object.keys(w).length>0){j(w);return}i(h)};return a.jsxs(O1,{isOpen:t,onClose:e,title:s?"Edit User":"Create New User",size:"lg",children:[c&&a.jsx("div",{className:"mb-4 p-4 bg-red-100 border-2 border-red-300 rounded-lg shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Oe,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:"text-red-700 font-medium mb-4",children:c}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{type:"button",onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Tx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{type:"button",onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(_t,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),a.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Close Form"]})]})]})]})}),u&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Oe,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:u})]})]})}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),a.jsx("input",{type:"text",value:h.username,onChange:v=>f({...h,username:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),b.username&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.username})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:h.role_id,onChange:v=>f({...h,role_id:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.role_id?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a role"}),r.map(v=>a.jsx("option",{value:v.id,children:v.display_name||v.name},v.id))]}),b.role_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.role_id})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s?"New Password (leave empty to keep current)":"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.password,onChange:v=>f({...h,password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!p),children:p?a.jsx(cl,{className:"h-4 w-4 text-gray-400"}):a.jsx(Vr,{className:"h-4 w-4 text-gray-400"})})]}),b.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",!s&&"*"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.confirm_password,onChange:v=>f({...h,confirm_password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.confirm_password?"border-red-500":"border-gray-300"}`,placeholder:"Confirm password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!p),children:p?a.jsx(cl,{className:"h-4 w-4 text-gray-400"}):a.jsx(Vr,{className:"h-4 w-4 text-gray-400"})})]}),b.confirm_password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirm_password})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"enable_2fa",checked:h.enable_2fa,onChange:v=>f({...h,enable_2fa:v.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"enable_2fa",className:"text-sm font-medium text-gray-900",children:"Enable Two-Factor Authentication (Google Authenticator)"}),a.jsx(Ni,{className:"h-4 w-4 text-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"w-4 h-4 mr-2"}),s?"Update User":"Create User"]})})]})]})]})},z1=()=>{const[t,e]=N.useState([]),[s,r]=N.useState([]),[i,l]=N.useState(!0),[c,u]=N.useState(""),[h,f]=N.useState([]),[p,y]=N.useState(!1),[b,j]=N.useState(null),[_,v]=N.useState(!1),[w,S]=N.useState({type:"",content:"",isAccessDenied:!1}),[M,A]=N.useState(""),[E,P]=N.useState(""),F=()=>{const T=localStorage.getItem(Tn.TOKEN_KEY)||null;return T?{Authorization:`Bearer ${T}`}:{}},B=async()=>{try{l(!0);const T=F();console.log("🚀 Making API request to:",`${Ua}/user-management`),console.log("📜 Headers:",T);const W=await fetch(`${Ua}/user-management`,{headers:T});if(console.log("📊 Response status:",W.status),!W.ok)throw(W.status===403||W.status===401)&&mt({closeForm:()=>{y(!1),j(null)},setMessage:S,error:{response:W},context:"loading users"}),new Error(`HTTP error! status: ${W.status}`);const ee=await W.json();ee.success&&(e(ee.data.users||[]),r(ee.data.roles||[]),f(ee.data.users||[]))}catch(T){console.error("Error fetching users:",T),S({type:"error",content:"Failed to load users"})}finally{l(!1)}},R=async T=>{try{v(!0);const ee=await(await fetch(`${Ua}/user-management`,{method:"POST",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(T)})).json();if(ee.success){let ae="User created successfully!";T.enable_2fa&&(ae+=" 2FA has been enabled and the secret has been generated automatically. The user will configure their authenticator app during first login."),S({type:"success",content:ae}),y(!1),await B()}else S({type:"error",content:ee.message||"Failed to create user"})}catch(W){console.error("Error creating user:",W);const ee=W&&W.response?{status:W.response.status,message:W.response.data?.message||W.message}:{status:void 0,message:W?.message};ee.status===403?A(ee.message||"Access denied. You do not have permission to create users."):ee.status===401?A("Authentication required. Please log in first."):ot(W)?A(ee.message||"Access denied while creating user"):S({type:"error",content:ee.message||"Failed to create user"})}finally{v(!1)}},C=async T=>{try{v(!0),P("");const ee=await(await fetch(`${Ua}/user-management/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(T)})).json();ee.success?(S({type:"success",content:"User updated successfully!"}),y(!1),j(null),P(""),await B()):P(ee.message||"Failed to update user")}catch(W){console.error("Error updating user:",W);const ee=W&&W.response?{status:W.response.status,message:W.response.data?.message||W.message}:{status:void 0,message:W?.message};ee.status===403?A(ee.message||"Access denied. You do not have permission to update users."):ee.status===401?A("Authentication required. Please log in first."):ot(W)?A(ee.message||"Access denied while updating user"):P(ee.message||"Failed to update user")}finally{v(!1)}},O=async T=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const ee=await(await fetch(`${Ua}/user-management/${T}`,{method:"DELETE",headers:F()})).json();ee.success?(S({type:"success",content:"User deleted successfully!"}),await B()):S({type:"error",content:ee.message||"Failed to delete user"})}catch(W){console.error("Error deleting user:",W),ot(W)?mt({closeForm:()=>{j(null)},setMessage:S,error:W,context:"deleting user"}):S({type:"error",content:"Failed to delete user"})}};return N.useEffect(()=>{try{if(!Array.isArray(t)){f([]);return}const T=t.filter(W=>{if(!W)return!1;const ee=W.username||"",ae=W.role_name||"",ge=c.toLowerCase();return ee.toLowerCase().includes(ge)||ae.toLowerCase().includes(ge)});f(T)}catch(T){console.error("Error filtering users:",T),f([])}},[c,t]),N.useEffect(()=>{B()},[]),N.useEffect(()=>{let T;return w.content&&!w.isAccessDenied&&(T=setTimeout(()=>{S({type:"",content:"",isAccessDenied:!1})},5e3)),()=>{T&&clearTimeout(T)}},[w]),i?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ml,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(qr,{className:"h-7 w-7 mr-3 text-blue-600"}),"User Management"]}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Manage users and their authentication settings"})]}),a.jsxs("button",{onClick:()=>{j(null),y(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Create User"]})]})}),w.content&&a.jsx("div",{className:`mb-4 p-4 rounded-lg ${w.isAccessDenied?"bg-red-100 border-2 border-red-300 shadow-2xl animate-pulse":w.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:w.type==="success"?a.jsx(Pl,{className:"h-5 w-5 mr-3 mt-0.5 text-green-500"}):a.jsx(Oe,{className:`h-5 w-5 mr-3 mt-0.5 ${w.isAccessDenied?"text-red-600":"text-red-500"}`})}),a.jsxs("div",{className:"flex-1",children:[w.isAccessDenied&&a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:`${w.isAccessDenied?"text-red-700 font-medium":""}`,children:w.content}),w.isAccessDenied&&a.jsxs("div",{className:"mt-4 flex space-x-3",children:[a.jsxs("button",{onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Tx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(_t,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{onClick:()=>S({type:"",content:"",isAccessDenied:!1}),className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Dismiss message",children:a.jsx(lt,{className:"h-4 w-4"})})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:T=>u(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2FA"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(T=>!T||!T.id||!T.username?null:a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:T.username?T.username[0].toUpperCase():"?"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.username||"Unknown"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",T.id||"N/A"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:T.role_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.is_active?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.is_2fa_enabled?a.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[a.jsx(Ni,{className:"w-3 h-3 mr-1"}),"Enabled"]}):a.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.last_login?cr(T.last_login):"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:cr(T.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{j(T),y(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit User",children:a.jsx(sn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>O(T.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:a.jsx(gs,{className:"h-4 w-4"})})]})})]},T.id))})]}),h.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No users found":"No users yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search terms":"Get started by creating your first user"}),!c&&a.jsxs("button",{onClick:()=>{j(null),y(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),a.jsx(B1,{isOpen:p,onClose:()=>{y(!1),j(null),A(""),P("")},user:b,roles:s,onSubmit:b?C:R,isLoading:_,accessDeniedMessage:M,modalError:E})]})};let $1={data:""},U1=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||$1,H1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,W1=/\/\*[^]*?\*\/|  +/g,jp=/\n+/g,Cn=(t,e)=>{let s="",r="",i="";for(let l in t){let c=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+c+";":r+=l[1]=="f"?Cn(c,l):l+"{"+Cn(c,l[1]=="k"?"":e)+"}":typeof c=="object"?r+=Cn(c,e?e.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Cn.p?Cn.p(l,c):l+":"+c+";")}return s+(e&&i?e+"{"+i+"}":i)+r},Ys={},Rx=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Rx(t[s]);return e}return t},V1=(t,e,s,r,i)=>{let l=Rx(t),c=Ys[l]||(Ys[l]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(l));if(!Ys[c]){let h=l!==t?t:(f=>{let p,y,b=[{}];for(;p=H1.exec(f.replace(W1,""));)p[4]?b.shift():p[3]?(y=p[3].replace(jp," ").trim(),b.unshift(b[0][y]=b[0][y]||{})):b[0][p[1]]=p[2].replace(jp," ").trim();return b[0]})(t);Ys[c]=Cn(i?{["@keyframes "+c]:h}:h,s?"":"."+c)}let u=s&&Ys.g?Ys.g:null;return s&&(Ys.g=Ys[c]),((h,f,p,y)=>{y?f.data=f.data.replace(y,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(Ys[c],e,r,u),c},q1=(t,e,s)=>t.reduce((r,i,l)=>{let c=e[l];if(c&&c.call){let u=c(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;c=h?"."+h:u&&typeof u=="object"?u.props?"":Cn(u,""):u===!1?"":u}return r+i+(c??"")},"");function Dl(t){let e=this||{},s=t.call?t(e.p):t;return V1(s.unshift?s.raw?q1(s,[].slice.call(arguments,1),e.p):s.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):s,U1(e.target),e.g,e.o,e.k)}let Fx,gu,xu;Dl.bind({g:1});let nn=Dl.bind({k:1});function Y1(t,e,s,r){Cn.p=e,Fx=t,gu=s,xu=r}function Ln(t,e){let s=this||{};return function(){let r=arguments;function i(l,c){let u=Object.assign({},l),h=u.className||i.className;s.p=Object.assign({theme:gu&&gu()},u),s.o=/ *go\d+/.test(h),u.className=Dl.apply(s,r)+(h?" "+h:"");let f=t;return t[0]&&(f=u.as||t,delete u.as),xu&&f[0]&&xu(u),Fx(f,u)}return i}}var K1=t=>typeof t=="function",yu=(t,e)=>K1(t)?t(e):t,X1=(()=>{let t=0;return()=>(++t).toString()})(),Q1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),G1=20,Lx="default",Ix=(t,e)=>{let{toastLimit:s}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:r}=e;return Ix(t,{type:t.toasts.find(c=>c.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},J1=[],Z1={toasts:[],pausedAt:void 0,settings:{toastLimit:G1}},Ur={},Ox=(t,e=Lx)=>{Ur[e]=Ix(Ur[e]||Z1,t),J1.forEach(([s,r])=>{s===e&&r(Ur[e])})},Bx=t=>Object.keys(Ur).forEach(e=>Ox(t,e)),ej=t=>Object.keys(Ur).find(e=>Ur[e].toasts.some(s=>s.id===t)),zu=(t=Lx)=>e=>{Ox(e,t)},tj=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||X1()}),_i=t=>(e,s)=>{let r=tj(e,t,s);return zu(r.toasterId||ej(r.id))({type:2,toast:r}),r.id},ue=(t,e)=>_i("blank")(t,e);ue.error=_i("error");ue.success=_i("success");ue.loading=_i("loading");ue.custom=_i("custom");ue.dismiss=(t,e)=>{let s={type:3,toastId:t};e?zu(e)(s):Bx(s)};ue.dismissAll=t=>ue.dismiss(void 0,t);ue.remove=(t,e)=>{let s={type:4,toastId:t};e?zu(e)(s):Bx(s)};ue.removeAll=t=>ue.remove(void 0,t);ue.promise=(t,e,s)=>{let r=ue.loading(e.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let l=e.success?yu(e.success,i):void 0;return l?ue.success(l,{id:r,...s,...s?.success}):ue.dismiss(r),i}).catch(i=>{let l=e.error?yu(e.error,i):void 0;l?ue.error(l,{id:r,...s,...s?.error}):ue.dismiss(r)}),t};var sj=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,nj=nn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rj=nn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aj=Ln("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${nj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ij=nn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,oj=Ln("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ij} 1s linear infinite;
`,lj=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cj=nn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,dj=Ln("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uj=Ln("div")`
  position: absolute;
`,hj=Ln("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,mj=nn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fj=Ln("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${mj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pj=({toast:t})=>{let{icon:e,type:s,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(fj,null,e):e:s==="blank"?null:N.createElement(hj,null,N.createElement(oj,{...r}),s!=="loading"&&N.createElement(uj,null,s==="error"?N.createElement(aj,{...r}):N.createElement(dj,{...r})))},gj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xj=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,yj="0%{opacity:0;} 100%{opacity:1;}",bj="0%{opacity:1;} 100%{opacity:0;}",vj=Ln("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,wj=Ln("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,jj=(t,e)=>{let s=t.includes("top")?1:-1,[r,i]=Q1()?[yj,bj]:[gj(s),xj(s)];return{animation:e?`${nn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};N.memo(({toast:t,position:e,style:s,children:r})=>{let i=t.height?jj(t.position||e||"top-center",t.visible):{opacity:0},l=N.createElement(pj,{toast:t}),c=N.createElement(wj,{...t.ariaProps},yu(t.message,t));return N.createElement(vj,{className:t.className,style:{...i,...s,...t.style}},typeof r=="function"?r({icon:l,message:c}):N.createElement(N.Fragment,null,l,c))});Y1(N.createElement);Dl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var zd=ue;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ki(t){return t+.5|0}const En=(t,e,s)=>Math.max(Math.min(t,s),e);function Ga(t){return En(ki(t*2.55),0,255)}function Dn(t){return En(ki(t*255),0,255)}function Gs(t){return En(ki(t/2.55)/100,0,1)}function Np(t){return En(ki(t*100),0,100)}const fs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bu=[..."0123456789ABCDEF"],Nj=t=>bu[t&15],_j=t=>bu[(t&240)>>4]+bu[t&15],Lo=t=>(t&240)>>4===(t&15),kj=t=>Lo(t.r)&&Lo(t.g)&&Lo(t.b)&&Lo(t.a);function Sj(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&fs[t[1]]*17,g:255&fs[t[2]]*17,b:255&fs[t[3]]*17,a:e===5?fs[t[4]]*17:255}:(e===7||e===9)&&(s={r:fs[t[1]]<<4|fs[t[2]],g:fs[t[3]]<<4|fs[t[4]],b:fs[t[5]]<<4|fs[t[6]],a:e===9?fs[t[7]]<<4|fs[t[8]]:255})),s}const Cj=(t,e)=>t<255?e(t):"";function Aj(t){var e=kj(t)?Nj:_j;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Cj(t.a,e):void 0}const Ej=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zx(t,e,s){const r=e*Math.min(s,1-s),i=(l,c=(l+t/30)%12)=>s-r*Math.max(Math.min(c-3,9-c,1),-1);return[i(0),i(8),i(4)]}function Pj(t,e,s){const r=(i,l=(i+t/60)%6)=>s-s*e*Math.max(Math.min(l,4-l,1),0);return[r(5),r(3),r(1)]}function Mj(t,e,s){const r=zx(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)r[i]*=1-e-s,r[i]+=e;return r}function Tj(t,e,s,r,i){return t===i?(e-s)/r+(e<s?6:0):e===i?(s-t)/r+2:(t-e)/r+4}function $u(t){const s=t.r/255,r=t.g/255,i=t.b/255,l=Math.max(s,r,i),c=Math.min(s,r,i),u=(l+c)/2;let h,f,p;return l!==c&&(p=l-c,f=u>.5?p/(2-l-c):p/(l+c),h=Tj(s,r,i,p,l),h=h*60+.5),[h|0,f||0,u]}function Uu(t,e,s,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,r)).map(Dn)}function Hu(t,e,s){return Uu(zx,t,e,s)}function Dj(t,e,s){return Uu(Mj,t,e,s)}function Rj(t,e,s){return Uu(Pj,t,e,s)}function $x(t){return(t%360+360)%360}function Fj(t){const e=Ej.exec(t);let s=255,r;if(!e)return;e[5]!==r&&(s=e[6]?Ga(+e[5]):Dn(+e[5]));const i=$x(+e[2]),l=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?r=Dj(i,l,c):e[1]==="hsv"?r=Rj(i,l,c):r=Hu(i,l,c),{r:r[0],g:r[1],b:r[2],a:s}}function Lj(t,e){var s=$u(t);s[0]=$x(s[0]+e),s=Hu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function Ij(t){if(!t)return;const e=$u(t),s=e[0],r=Np(e[1]),i=Np(e[2]);return t.a<255?`hsla(${s}, ${r}%, ${i}%, ${Gs(t.a)})`:`hsl(${s}, ${r}%, ${i}%)`}const _p={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Oj(){const t={},e=Object.keys(kp),s=Object.keys(_p);let r,i,l,c,u;for(r=0;r<e.length;r++){for(c=u=e[r],i=0;i<s.length;i++)l=s[i],u=u.replace(l,_p[l]);l=parseInt(kp[c],16),t[u]=[l>>16&255,l>>8&255,l&255]}return t}let Io;function Bj(t){Io||(Io=Oj(),Io.transparent=[0,0,0,0]);const e=Io[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const zj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $j(t){const e=zj.exec(t);let s=255,r,i,l;if(e){if(e[7]!==r){const c=+e[7];s=e[8]?Ga(c):En(c*255,0,255)}return r=+e[1],i=+e[3],l=+e[5],r=255&(e[2]?Ga(r):En(r,0,255)),i=255&(e[4]?Ga(i):En(i,0,255)),l=255&(e[6]?Ga(l):En(l,0,255)),{r,g:i,b:l,a:s}}}function Uj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $d=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Br=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Hj(t,e,s){const r=Br(Gs(t.r)),i=Br(Gs(t.g)),l=Br(Gs(t.b));return{r:Dn($d(r+s*(Br(Gs(e.r))-r))),g:Dn($d(i+s*(Br(Gs(e.g))-i))),b:Dn($d(l+s*(Br(Gs(e.b))-l))),a:t.a+s*(e.a-t.a)}}function Oo(t,e,s){if(t){let r=$u(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*s,e===0?360:1)),r=Hu(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Ux(t,e){return t&&Object.assign(e||{},t)}function Sp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Dn(t[3]))):(e=Ux(t,{r:0,g:0,b:0,a:1}),e.a=Dn(e.a)),e}function Wj(t){return t.charAt(0)==="r"?$j(t):Fj(t)}class ui{constructor(e){if(e instanceof ui)return e;const s=typeof e;let r;s==="object"?r=Sp(e):s==="string"&&(r=Sj(e)||Bj(e)||Wj(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Ux(this._rgb);return e&&(e.a=Gs(e.a)),e}set rgb(e){this._rgb=Sp(e)}rgbString(){return this._valid?Uj(this._rgb):void 0}hexString(){return this._valid?Aj(this._rgb):void 0}hslString(){return this._valid?Ij(this._rgb):void 0}mix(e,s){if(e){const r=this.rgb,i=e.rgb;let l;const c=s===l?.5:s,u=2*c-1,h=r.a-i.a,f=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;l=1-f,r.r=255&f*r.r+l*i.r+.5,r.g=255&f*r.g+l*i.g+.5,r.b=255&f*r.b+l*i.b+.5,r.a=c*r.a+(1-c)*i.a,this.rgb=r}return this}interpolate(e,s){return e&&(this._rgb=Hj(this._rgb,e._rgb,s)),this}clone(){return new ui(this.rgb)}alpha(e){return this._rgb.a=Dn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ki(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Oo(this._rgb,2,e),this}darken(e){return Oo(this._rgb,2,-e),this}saturate(e){return Oo(this._rgb,1,e),this}desaturate(e){return Oo(this._rgb,1,-e),this}rotate(e){return Lj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ks(){}const Vj=(()=>{let t=0;return()=>t++})();function Ke(t){return t==null}function bt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function zt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Rs(t,e){return zt(t)?t:e}function Ie(t,e){return typeof t>"u"?e:t}const qj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ge(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Ve(t,e,s,r){let i,l,c;if(bt(t))for(l=t.length,i=0;i<l;i++)e.call(s,t[i],i);else if(Be(t))for(c=Object.keys(t),l=c.length,i=0;i<l;i++)e.call(s,t[c[i]],c[i])}function fl(t,e){let s,r,i,l;if(!t||!e||t.length!==e.length)return!1;for(s=0,r=t.length;s<r;++s)if(i=t[s],l=e[s],i.datasetIndex!==l.datasetIndex||i.index!==l.index)return!1;return!0}function pl(t){if(bt(t))return t.map(pl);if(Be(t)){const e=Object.create(null),s=Object.keys(t),r=s.length;let i=0;for(;i<r;++i)e[s[i]]=pl(t[s[i]]);return e}return t}function Hx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Yj(t,e,s,r){if(!Hx(t))return;const i=e[t],l=s[t];Be(i)&&Be(l)?hi(i,l,r):e[t]=pl(l)}function hi(t,e,s){const r=bt(e)?e:[e],i=r.length;if(!Be(t))return t;s=s||{};const l=s.merger||Yj;let c;for(let u=0;u<i;++u){if(c=r[u],!Be(c))continue;const h=Object.keys(c);for(let f=0,p=h.length;f<p;++f)l(h[f],t,c,s)}return t}function ni(t,e){return hi(t,e,{merger:Kj})}function Kj(t,e,s){if(!Hx(t))return;const r=e[t],i=s[t];Be(r)&&Be(i)?ni(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=pl(i))}const Cp={"":t=>t,x:t=>t.x,y:t=>t.y};function Xj(t){const e=t.split("."),s=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}function Qj(t){const e=Xj(t);return s=>{for(const r of e){if(r==="")break;s=s&&s[r]}return s}}function gl(t,e){return(Cp[e]||(Cp[e]=Qj(e)))(t)}function Wu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const xl=t=>typeof t<"u",Rn=t=>typeof t=="function",Ap=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function Gj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const qe=Math.PI,Nt=2*qe,Jj=Nt+qe,yl=Number.POSITIVE_INFINITY,Zj=qe/180,At=qe/2,Qn=qe/4,Ep=qe*2/3,Wx=Math.log10,Yr=Math.sign;function ri(t,e,s){return Math.abs(t-e)<s}function Pp(t){const e=Math.round(t);t=ri(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Wx(t))),r=t/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function eN(t){const e=[],s=Math.sqrt(t);let r;for(r=1;r<s;r++)t%r===0&&(e.push(r),e.push(t/r));return s===(s|0)&&e.push(s),e.sort((i,l)=>i-l).pop(),e}function tN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function mi(t){return!tN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function sN(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function nN(t,e,s){let r,i,l;for(r=0,i=t.length;r<i;r++)l=t[r][s],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function nr(t){return t*(qe/180)}function rN(t){return t*(180/qe)}function Mp(t){if(!zt(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Vx(t,e){const s=e.x-t.x,r=e.y-t.y,i=Math.sqrt(s*s+r*r);let l=Math.atan2(r,s);return l<-.5*qe&&(l+=Nt),{angle:l,distance:i}}function vu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aN(t,e){return(t-e+Jj)%Nt-qe}function as(t){return(t%Nt+Nt)%Nt}function Vu(t,e,s,r){const i=as(t),l=as(e),c=as(s),u=as(l-i),h=as(c-i),f=as(i-l),p=as(i-c);return i===l||i===c||r&&l===c||u>h&&f<p}function Ot(t,e,s){return Math.max(e,Math.min(s,t))}function iN(t){return Ot(t,-32768,32767)}function Zs(t,e,s,r=1e-6){return t>=Math.min(e,s)-r&&t<=Math.max(e,s)+r}function qu(t,e,s){s=s||(c=>t[c]<e);let r=t.length-1,i=0,l;for(;r-i>1;)l=i+r>>1,s(l)?i=l:r=l;return{lo:i,hi:r}}const rr=(t,e,s,r)=>qu(t,s,r?i=>{const l=t[i][e];return l<s||l===s&&t[i+1][e]===s}:i=>t[i][e]<s),oN=(t,e,s)=>qu(t,s,r=>t[r][e]>=s);function lN(t,e,s){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>s;)i--;return r>0||i<t.length?t.slice(r,i):t}const qx=["push","pop","shift","splice","unshift"];function cN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),qx.forEach(s=>{const r="_onData"+Wu(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...l){const c=i.apply(this,l);return t._chartjs.listeners.forEach(u=>{typeof u[r]=="function"&&u[r](...l)}),c}})})}function Tp(t,e){const s=t._chartjs;if(!s)return;const r=s.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(qx.forEach(l=>{delete t[l]}),delete t._chartjs)}function dN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Yx=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Kx(t,e){let s=[],r=!1;return function(...i){s=i,r||(r=!0,Yx.call(window,()=>{r=!1,t.apply(e,s)}))}}function uN(t,e){let s;return function(...r){return e?(clearTimeout(s),s=setTimeout(t,e,r)):t.apply(this,r),e}}const Yu=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,hN=(t,e,s,r)=>t===(r?"left":"right")?s:t==="center"?(e+s)/2:e;function mN(t,e,s){const r=e.length;let i=0,l=r;if(t._sorted){const{iScale:c,vScale:u,_parsed:h}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=c.axis,{min:y,max:b,minDefined:j,maxDefined:_}=c.getUserBounds();if(j){if(i=Math.min(rr(h,p,y).lo,s?r:rr(e,p,c.getPixelForValue(y)).lo),f){const v=h.slice(0,i+1).reverse().findIndex(w=>!Ke(w[u.axis]));i-=Math.max(0,v)}i=Ot(i,0,r-1)}if(_){let v=Math.max(rr(h,c.axis,b,!0).hi+1,s?0:rr(e,p,c.getPixelForValue(b),!0).hi+1);if(f){const w=h.slice(v-1).findIndex(S=>!Ke(S[u.axis]));v+=Math.max(0,w)}l=Ot(v,i,r)-i}else l=r-i}return{start:i,count:l}}function fN(t){const{xScale:e,yScale:s,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!r)return t._scaleRanges=i,!0;const l=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==s.min||r.ymax!==s.max;return Object.assign(r,i),l}const Bo=t=>t===0||t===1,Dp=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Nt/s)),Rp=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Nt/s)+1,ai={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*At)+1,easeOutSine:t=>Math.sin(t*At),easeInOutSine:t=>-.5*(Math.cos(qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bo(t)?t:Dp(t,.075,.3),easeOutElastic:t=>Bo(t)?t:Rp(t,.075,.3),easeInOutElastic(t){return Bo(t)?t:t<.5?.5*Dp(t*2,.1125,.45):.5+.5*Rp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ai.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ai.easeInBounce(t*2)*.5:ai.easeOutBounce(t*2-1)*.5+.5};function Ku(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fp(t){return Ku(t)?t:new ui(t)}function Ud(t){return Ku(t)?t:new ui(t).saturate(.5).darken(.1).hexString()}const pN=["x","y","borderWidth","radius","tension"],gN=["color","borderColor","backgroundColor"];function xN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:gN},numbers:{type:"number",properties:pN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lp=new Map;function bN(t,e){e=e||{};const s=t+JSON.stringify(e);let r=Lp.get(s);return r||(r=new Intl.NumberFormat(t,e),Lp.set(s,r)),r}function Xx(t,e,s){return bN(e,s).format(t)}const vN={values(t){return bt(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const r=this.chart.options.locale;let i,l=t;if(s.length>1){const f=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),l=wN(t,s)}const c=Wx(Math.abs(l)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Xx(t,r,h)}};function wN(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Qx={formatters:vN};function jN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const dr=Object.create(null),wu=Object.create(null);function ii(t,e){if(!e)return t;const s=e.split(".");for(let r=0,i=s.length;r<i;++r){const l=s[r];t=t[l]||(t[l]=Object.create(null))}return t}function Hd(t,e,s){return typeof e=="string"?hi(ii(t,e),s):hi(ii(t,""),e)}class NN{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Ud(i.backgroundColor),this.hoverBorderColor=(r,i)=>Ud(i.borderColor),this.hoverColor=(r,i)=>Ud(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Hd(this,e,s)}get(e){return ii(this,e)}describe(e,s){return Hd(wu,e,s)}override(e,s){return Hd(dr,e,s)}route(e,s,r,i){const l=ii(this,e),c=ii(this,r),u="_"+s;Object.defineProperties(l,{[u]:{value:l[s],writable:!0},[s]:{enumerable:!0,get(){const h=this[u],f=c[i];return Be(h)?Object.assign({},f,h):Ie(h,f)},set(h){this[u]=h}}})}apply(e){e.forEach(s=>s(this))}}var ct=new NN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xN,yN,jN]);function _N(t){return!t||Ke(t.size)||Ke(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ip(t,e,s,r,i){let l=e[i];return l||(l=e[i]=t.measureText(i).width,s.push(i)),l>r&&(r=l),r}function Gn(t,e,s){const r=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*r)/r+i}function Op(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ju(t,e,s,r){Gx(t,e,s,r,null)}function Gx(t,e,s,r,i){let l,c,u,h,f,p,y,b;const j=e.pointStyle,_=e.rotation,v=e.radius;let w=(_||0)*Zj;if(j&&typeof j=="object"&&(l=j.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(s,r),t.rotate(w),t.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),j){default:i?t.ellipse(s,r,i/2,v,0,0,Nt):t.arc(s,r,v,0,Nt),t.closePath();break;case"triangle":p=i?i/2:v,t.moveTo(s+Math.sin(w)*p,r-Math.cos(w)*v),w+=Ep,t.lineTo(s+Math.sin(w)*p,r-Math.cos(w)*v),w+=Ep,t.lineTo(s+Math.sin(w)*p,r-Math.cos(w)*v),t.closePath();break;case"rectRounded":f=v*.516,h=v-f,c=Math.cos(w+Qn)*h,y=Math.cos(w+Qn)*(i?i/2-f:h),u=Math.sin(w+Qn)*h,b=Math.sin(w+Qn)*(i?i/2-f:h),t.arc(s-y,r-u,f,w-qe,w-At),t.arc(s+b,r-c,f,w-At,w),t.arc(s+y,r+u,f,w,w+At),t.arc(s-b,r+c,f,w+At,w+qe),t.closePath();break;case"rect":if(!_){h=Math.SQRT1_2*v,p=i?i/2:h,t.rect(s-p,r-h,2*p,2*h);break}w+=Qn;case"rectRot":y=Math.cos(w)*(i?i/2:v),c=Math.cos(w)*v,u=Math.sin(w)*v,b=Math.sin(w)*(i?i/2:v),t.moveTo(s-y,r-u),t.lineTo(s+b,r-c),t.lineTo(s+y,r+u),t.lineTo(s-b,r+c),t.closePath();break;case"crossRot":w+=Qn;case"cross":y=Math.cos(w)*(i?i/2:v),c=Math.cos(w)*v,u=Math.sin(w)*v,b=Math.sin(w)*(i?i/2:v),t.moveTo(s-y,r-u),t.lineTo(s+y,r+u),t.moveTo(s+b,r-c),t.lineTo(s-b,r+c);break;case"star":y=Math.cos(w)*(i?i/2:v),c=Math.cos(w)*v,u=Math.sin(w)*v,b=Math.sin(w)*(i?i/2:v),t.moveTo(s-y,r-u),t.lineTo(s+y,r+u),t.moveTo(s+b,r-c),t.lineTo(s-b,r+c),w+=Qn,y=Math.cos(w)*(i?i/2:v),c=Math.cos(w)*v,u=Math.sin(w)*v,b=Math.sin(w)*(i?i/2:v),t.moveTo(s-y,r-u),t.lineTo(s+y,r+u),t.moveTo(s+b,r-c),t.lineTo(s-b,r+c);break;case"line":c=i?i/2:Math.cos(w)*v,u=Math.sin(w)*v,t.moveTo(s-c,r-u),t.lineTo(s+c,r+u);break;case"dash":t.moveTo(s,r),t.lineTo(s+Math.cos(w)*(i?i/2:v),r+Math.sin(w)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function fi(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Rl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Fl(t){t.restore()}function kN(t,e,s,r,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const l=(e.x+s.x)/2;t.lineTo(l,e.y),t.lineTo(l,s.y)}else i==="after"!=!!r?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function SN(t,e,s,r){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?s.cp2x:s.cp1x,r?s.cp2y:s.cp1y,s.x,s.y)}function CN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ke(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function AN(t,e,s,r,i){if(i.strikethrough||i.underline){const l=t.measureText(r),c=e-l.actualBoundingBoxLeft,u=e+l.actualBoundingBoxRight,h=s-l.actualBoundingBoxAscent,f=s+l.actualBoundingBoxDescent,p=i.strikethrough?(h+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(c,p),t.lineTo(u,p),t.stroke()}}function EN(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function pi(t,e,s,r,i,l={}){const c=bt(e)?e:[e],u=l.strokeWidth>0&&l.strokeColor!=="";let h,f;for(t.save(),t.font=i.string,CN(t,l),h=0;h<c.length;++h)f=c[h],l.backdrop&&EN(t,l.backdrop),u&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),Ke(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(f,s,r,l.maxWidth)),t.fillText(f,s,r,l.maxWidth),AN(t,s,r,f,l),r+=Number(i.lineHeight);t.restore()}function bl(t,e){const{x:s,y:r,w:i,h:l,radius:c}=e;t.arc(s+c.topLeft,r+c.topLeft,c.topLeft,1.5*qe,qe,!0),t.lineTo(s,r+l-c.bottomLeft),t.arc(s+c.bottomLeft,r+l-c.bottomLeft,c.bottomLeft,qe,At,!0),t.lineTo(s+i-c.bottomRight,r+l),t.arc(s+i-c.bottomRight,r+l-c.bottomRight,c.bottomRight,At,0,!0),t.lineTo(s+i,r+c.topRight),t.arc(s+i-c.topRight,r+c.topRight,c.topRight,0,-At,!0),t.lineTo(s+c.topLeft,r)}const PN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,MN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function TN(t,e){const s=(""+t).match(PN);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const DN=t=>+t||0;function Xu(t,e){const s={},r=Be(e),i=r?Object.keys(e):e,l=Be(t)?r?c=>Ie(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of i)s[c]=DN(l(c));return s}function Jx(t){return Xu(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Hr(t){return Xu(t,["topLeft","topRight","bottomLeft","bottomRight"])}function xs(t){const e=Jx(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||ct.font;let s=Ie(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let r=Ie(t.style,e.style);r&&!(""+r).match(MN)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ie(t.family,e.family),lineHeight:TN(Ie(t.lineHeight,e.lineHeight),s),size:s,style:r,weight:Ie(t.weight,e.weight),string:""};return i.string=_N(i),i}function zo(t,e,s,r){let i,l,c;for(i=0,l=t.length;i<l;++i)if(c=t[i],c!==void 0&&c!==void 0)return c}function RN(t,e,s){const{min:r,max:i}=t,l=qj(e,(i-r)/2),c=(u,h)=>s&&u===0?0:u+h;return{min:c(r,-Math.abs(l)),max:c(i,l)}}function hr(t,e){return Object.assign(Object.create(t),e)}function Qu(t,e=[""],s,r,i=()=>t[0]){const l=s||t;typeof r>"u"&&(r=s0("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:r,_getTarget:i,override:u=>Qu([u,...t],e,l,r)};return new Proxy(c,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return e0(u,h,()=>UN(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return zp(u).includes(h)},ownKeys(u){return zp(u)},set(u,h,f){const p=u._storage||(u._storage=i());return u[h]=p[h]=f,delete u._keys,!0}})}function Kr(t,e,s,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Zx(t,r),setContext:l=>Kr(t,l,s,r),override:l=>Kr(t.override(l),e,s,r)};return new Proxy(i,{deleteProperty(l,c){return delete l[c],delete t[c],!0},get(l,c,u){return e0(l,c,()=>LN(l,c,u))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(l,c,u){return t[c]=u,delete l[c],!0}})}function Zx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:r,isScriptable:Rn(s)?s:()=>s,isIndexable:Rn(r)?r:()=>r}}const FN=(t,e)=>t?t+Wu(e):e,Gu=(t,e)=>Be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function e0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=s();return t[e]=r,r}function LN(t,e,s){const{_proxy:r,_context:i,_subProxy:l,_descriptors:c}=t;let u=r[e];return Rn(u)&&c.isScriptable(e)&&(u=IN(e,u,t,s)),bt(u)&&u.length&&(u=ON(e,u,t,c.isIndexable)),Gu(e,u)&&(u=Kr(u,i,l&&l[e],c)),u}function IN(t,e,s,r){const{_proxy:i,_context:l,_subProxy:c,_stack:u}=s;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(l,c||r);return u.delete(t),Gu(t,h)&&(h=Ju(i._scopes,i,t,h)),h}function ON(t,e,s,r){const{_proxy:i,_context:l,_subProxy:c,_descriptors:u}=s;if(typeof l.index<"u"&&r(t))return e[l.index%e.length];if(Be(e[0])){const h=e,f=i._scopes.filter(p=>p!==h);e=[];for(const p of h){const y=Ju(f,i,t,p);e.push(Kr(y,l,c&&c[t],u))}}return e}function t0(t,e,s){return Rn(t)?t(e,s):t}const BN=(t,e)=>t===!0?e:typeof t=="string"?gl(e,t):void 0;function zN(t,e,s,r,i){for(const l of e){const c=BN(s,l);if(c){t.add(c);const u=t0(c._fallback,s,i);if(typeof u<"u"&&u!==s&&u!==r)return u}else if(c===!1&&typeof r<"u"&&s!==r)return null}return!1}function Ju(t,e,s,r){const i=e._rootScopes,l=t0(e._fallback,s,r),c=[...t,...i],u=new Set;u.add(r);let h=Bp(u,c,s,l||s,r);return h===null||typeof l<"u"&&l!==s&&(h=Bp(u,c,l,h,r),h===null)?!1:Qu(Array.from(u),[""],i,l,()=>$N(e,s,r))}function Bp(t,e,s,r,i){for(;s;)s=zN(t,e,s,r,i);return s}function $N(t,e,s){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return bt(i)&&Be(s)?s:i||{}}function UN(t,e,s,r){let i;for(const l of e)if(i=s0(FN(l,t),s),typeof i<"u")return Gu(t,i)?Ju(s,r,t,i):i}function s0(t,e){for(const s of e){if(!s)continue;const r=s[t];if(typeof r<"u")return r}}function zp(t){let e=t._keys;return e||(e=t._keys=HN(t._scopes)),e}function HN(t){const e=new Set;for(const s of t)for(const r of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const WN=Number.EPSILON||1e-14,Xr=(t,e)=>e<t.length&&!t[e].skip&&t[e],n0=t=>t==="x"?"y":"x";function VN(t,e,s,r){const i=t.skip?e:t,l=e,c=s.skip?e:s,u=vu(l,i),h=vu(c,l);let f=u/(u+h),p=h/(u+h);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const y=r*f,b=r*p;return{previous:{x:l.x-y*(c.x-i.x),y:l.y-y*(c.y-i.y)},next:{x:l.x+b*(c.x-i.x),y:l.y+b*(c.y-i.y)}}}function qN(t,e,s){const r=t.length;let i,l,c,u,h,f=Xr(t,0);for(let p=0;p<r-1;++p)if(h=f,f=Xr(t,p+1),!(!h||!f)){if(ri(e[p],0,WN)){s[p]=s[p+1]=0;continue}i=s[p]/e[p],l=s[p+1]/e[p],u=Math.pow(i,2)+Math.pow(l,2),!(u<=9)&&(c=3/Math.sqrt(u),s[p]=i*c*e[p],s[p+1]=l*c*e[p])}}function YN(t,e,s="x"){const r=n0(s),i=t.length;let l,c,u,h=Xr(t,0);for(let f=0;f<i;++f){if(c=u,u=h,h=Xr(t,f+1),!u)continue;const p=u[s],y=u[r];c&&(l=(p-c[s])/3,u[`cp1${s}`]=p-l,u[`cp1${r}`]=y-l*e[f]),h&&(l=(h[s]-p)/3,u[`cp2${s}`]=p+l,u[`cp2${r}`]=y+l*e[f])}}function KN(t,e="x"){const s=n0(e),r=t.length,i=Array(r).fill(0),l=Array(r);let c,u,h,f=Xr(t,0);for(c=0;c<r;++c)if(u=h,h=f,f=Xr(t,c+1),!!h){if(f){const p=f[e]-h[e];i[c]=p!==0?(f[s]-h[s])/p:0}l[c]=u?f?Yr(i[c-1])!==Yr(i[c])?0:(i[c-1]+i[c])/2:i[c-1]:i[c]}qN(t,i,l),YN(t,l,e)}function $o(t,e,s){return Math.max(Math.min(t,s),e)}function XN(t,e){let s,r,i,l,c,u=fi(t[0],e);for(s=0,r=t.length;s<r;++s)c=l,l=u,u=s<r-1&&fi(t[s+1],e),l&&(i=t[s],c&&(i.cp1x=$o(i.cp1x,e.left,e.right),i.cp1y=$o(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=$o(i.cp2x,e.left,e.right),i.cp2y=$o(i.cp2y,e.top,e.bottom)))}function QN(t,e,s,r,i){let l,c,u,h;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")KN(t,i);else{let f=r?t[t.length-1]:t[0];for(l=0,c=t.length;l<c;++l)u=t[l],h=VN(f,u,t[Math.min(l+1,c-(r?0:1))%c],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,f=u}e.capBezierPoints&&XN(t,s)}function Zu(){return typeof window<"u"&&typeof document<"u"}function eh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vl(t,e,s){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[s])):r=t,r}const Ll=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function GN(t,e){return Ll(t).getPropertyValue(e)}const JN=["top","right","bottom","left"];function ir(t,e,s){const r={};s=s?"-"+s:"";for(let i=0;i<4;i++){const l=JN[i];r[l]=parseFloat(t[e+"-"+l+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const ZN=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function e_(t,e){const s=t.touches,r=s&&s.length?s[0]:t,{offsetX:i,offsetY:l}=r;let c=!1,u,h;if(ZN(i,l,t.target))u=i,h=l;else{const f=e.getBoundingClientRect();u=r.clientX-f.left,h=r.clientY-f.top,c=!0}return{x:u,y:h,box:c}}function Zn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:r}=e,i=Ll(s),l=i.boxSizing==="border-box",c=ir(i,"padding"),u=ir(i,"border","width"),{x:h,y:f,box:p}=e_(t,s),y=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:j,height:_}=e;return l&&(j-=c.width+u.width,_-=c.height+u.height),{x:Math.round((h-y)/j*s.width/r),y:Math.round((f-b)/_*s.height/r)}}function t_(t,e,s){let r,i;if(e===void 0||s===void 0){const l=t&&eh(t);if(!l)e=t.clientWidth,s=t.clientHeight;else{const c=l.getBoundingClientRect(),u=Ll(l),h=ir(u,"border","width"),f=ir(u,"padding");e=c.width-f.width-h.width,s=c.height-f.height-h.height,r=vl(u.maxWidth,l,"clientWidth"),i=vl(u.maxHeight,l,"clientHeight")}}return{width:e,height:s,maxWidth:r||yl,maxHeight:i||yl}}const Uo=t=>Math.round(t*10)/10;function s_(t,e,s,r){const i=Ll(t),l=ir(i,"margin"),c=vl(i.maxWidth,t,"clientWidth")||yl,u=vl(i.maxHeight,t,"clientHeight")||yl,h=t_(t,e,s);let{width:f,height:p}=h;if(i.boxSizing==="content-box"){const b=ir(i,"border","width"),j=ir(i,"padding");f-=j.width+b.width,p-=j.height+b.height}return f=Math.max(0,f-l.width),p=Math.max(0,r?f/r:p-l.height),f=Uo(Math.min(f,c,h.maxWidth)),p=Uo(Math.min(p,u,h.maxHeight)),f&&!p&&(p=Uo(f/2)),(e!==void 0||s!==void 0)&&r&&h.height&&p>h.height&&(p=h.height,f=Uo(Math.floor(p*r))),{width:f,height:p}}function $p(t,e,s){const r=e||1,i=Math.floor(t.height*r),l=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(s||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||c.height!==i||c.width!==l?(t.currentDevicePixelRatio=r,c.height=i,c.width=l,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const n_=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Zu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Up(t,e){const s=GN(t,e),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function er(t,e,s,r){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function r_(t,e,s,r){return{x:t.x+s*(e.x-t.x),y:r==="middle"?s<.5?t.y:e.y:r==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function a_(t,e,s,r){const i={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},c=er(t,i,s),u=er(i,l,s),h=er(l,e,s),f=er(c,u,s),p=er(u,h,s);return er(f,p,s)}const i_=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,r){return s-r},leftForLtr(s,r){return s-r}}},o_=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Wr(t,e,s){return t?i_(e,s):o_()}function r0(t,e){let s,r;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=r)}function a0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function i0(t){return t==="angle"?{between:Vu,compare:aN,normalize:as}:{between:Zs,compare:(e,s)=>e-s,normalize:e=>e}}function Hp({start:t,end:e,count:s,loop:r,style:i}){return{start:t%s,end:e%s,loop:r&&(e-t+1)%s===0,style:i}}function l_(t,e,s){const{property:r,start:i,end:l}=s,{between:c,normalize:u}=i0(r),h=e.length;let{start:f,end:p,loop:y}=t,b,j;if(y){for(f+=h,p+=h,b=0,j=h;b<j&&c(u(e[f%h][r]),i,l);++b)f--,p--;f%=h,p%=h}return p<f&&(p+=h),{start:f,end:p,loop:y,style:t.style}}function o0(t,e,s){if(!s)return[t];const{property:r,start:i,end:l}=s,c=e.length,{compare:u,between:h,normalize:f}=i0(r),{start:p,end:y,loop:b,style:j}=l_(t,e,s),_=[];let v=!1,w=null,S,M,A;const E=()=>h(i,A,S)&&u(i,A)!==0,P=()=>u(l,S)===0||h(l,A,S),F=()=>v||E(),B=()=>!v||P();for(let R=p,C=p;R<=y;++R)M=e[R%c],!M.skip&&(S=f(M[r]),S!==A&&(v=h(S,i,l),w===null&&F()&&(w=u(S,i)===0?R:C),w!==null&&B()&&(_.push(Hp({start:w,end:R,loop:b,count:c,style:j})),w=null),C=R,A=S));return w!==null&&_.push(Hp({start:w,end:y,loop:b,count:c,style:j})),_}function l0(t,e){const s=[],r=t.segments;for(let i=0;i<r.length;i++){const l=o0(r[i],t.points,e);l.length&&s.push(...l)}return s}function c_(t,e,s,r){let i=0,l=e-1;if(s&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(l+=i);l>i&&t[l%e].skip;)l--;return l%=e,{start:i,end:l}}function d_(t,e,s,r){const i=t.length,l=[];let c=e,u=t[e],h;for(h=e+1;h<=s;++h){const f=t[h%i];f.skip||f.stop?u.skip||(r=!1,l.push({start:e%i,end:(h-1)%i,loop:r}),e=c=f.stop?h:null):(c=h,u.skip&&(e=h)),u=f}return c!==null&&l.push({start:e%i,end:c%i,loop:r}),l}function u_(t,e){const s=t.points,r=t.options.spanGaps,i=s.length;if(!i)return[];const l=!!t._loop,{start:c,end:u}=c_(s,i,l,r);if(r===!0)return Wp(t,[{start:c,end:u,loop:l}],s,e);const h=u<c?u+i:u,f=!!t._fullLoop&&c===0&&u===i-1;return Wp(t,d_(s,c,h,f),s,e)}function Wp(t,e,s,r){return!r||!r.setContext||!s?e:h_(t,e,s,r)}function h_(t,e,s,r){const i=t._chart.getContext(),l=Vp(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,h=s.length,f=[];let p=l,y=e[0].start,b=y;function j(_,v,w,S){const M=u?-1:1;if(_!==v){for(_+=h;s[_%h].skip;)_-=M;for(;s[v%h].skip;)v+=M;_%h!==v%h&&(f.push({start:_%h,end:v%h,loop:w,style:S}),p=S,y=v%h)}}for(const _ of e){y=u?y:_.start;let v=s[y%h],w;for(b=y+1;b<=_.end;b++){const S=s[b%h];w=Vp(r.setContext(hr(i,{type:"segment",p0:v,p1:S,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:c}))),m_(w,p)&&j(y,b-1,_.loop,p),v=S,p=w}y<b-1&&j(y,b-1,_.loop,p)}return f}function Vp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function m_(t,e){if(!e)return!1;const s=[],r=function(i,l){return Ku(l)?(s.includes(l)||s.push(l),s.indexOf(l)):l};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ho(t,e,s){return t.options.clip?t[s]:e[s]}function f_(t,e){const{xScale:s,yScale:r}=t;return s&&r?{left:Ho(s,e,"left"),right:Ho(s,e,"right"),top:Ho(r,e,"top"),bottom:Ho(r,e,"bottom")}:e}function c0(t,e){const s=e._clip;if(s.disabled)return!1;const r=f_(e,t.chartArea);return{left:s.left===!1?0:r.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:r.right+(s.right===!0?0:s.right),top:s.top===!1?0:r.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:r.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class p_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,r,i){const l=s.listeners[i],c=s.duration;l.forEach(u=>u({chart:e,initial:s.initial,numSteps:c,currentStep:Math.min(r-s.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=Yx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const l=r.items;let c=l.length-1,u=!1,h;for(;c>=0;--c)h=l[c],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),u=!0):(l[c]=l[l.length-1],l.pop());u&&(i.draw(),this._notify(i,r,e,"progress")),l.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),s+=l.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let r=s.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,r)),r}listen(e,s,r){this._getAnims(e).listeners[s].push(r)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const r=s.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xs=new p_;const qp="transparent",g_={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const r=Fp(t||qp),i=r.valid&&Fp(e||qp);return i&&i.valid?i.mix(r,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class x_{constructor(e,s,r,i){const l=s[r];i=zo([e.to,i,l,e.from]);const c=zo([e.from,l,i]);this._active=!0,this._fn=e.fn||g_[e.type||typeof c],this._easing=ai[e.easing]||ai.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=r,this._from=c,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,r){if(this._active){this._notify(!1);const i=this._target[this._prop],l=r-this._start,c=this._duration-l;this._start=r,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=zo([e.to,s,i,e.from]),this._from=zo([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,r=this._duration,i=this._prop,l=this._from,c=this._loop,u=this._to;let h;if(this._active=l!==u&&(c||s<r),!this._active){this._target[i]=u,this._notify(!0);return}if(s<0){this._target[i]=l;return}h=s/r%2,h=c&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(l,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,r)=>{e.push({res:s,rej:r})})}_notify(e){const s=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][s]()}}class d0{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Be(e))return;const s=Object.keys(ct.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const l=e[i];if(!Be(l))return;const c={};for(const u of s)c[u]=l[u];(bt(l.properties)&&l.properties||[i]).forEach(u=>{(u===i||!r.has(u))&&r.set(u,c)})})}_animateOptions(e,s){const r=s.options,i=b_(e,r);if(!i)return[];const l=this._createAnimations(i,r);return r.$shared&&y_(e.options.$animations,r).then(()=>{e.options=r},()=>{}),l}_createAnimations(e,s){const r=this._properties,i=[],l=e.$animations||(e.$animations={}),c=Object.keys(s),u=Date.now();let h;for(h=c.length-1;h>=0;--h){const f=c[h];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,s));continue}const p=s[f];let y=l[f];const b=r.get(f);if(y)if(b&&y.active()){y.update(b,p,u);continue}else y.cancel();if(!b||!b.duration){e[f]=p;continue}l[f]=y=new x_(b,e,f,p),i.push(y)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const r=this._createAnimations(e,s);if(r.length)return Xs.add(this._chart,r),!0}}function y_(t,e){const s=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const l=t[r[i]];l&&l.active()&&s.push(l.wait())}return Promise.all(s)}function b_(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Yp(t,e){const s=t&&t.options||{},r=s.reverse,i=s.min===void 0?e:0,l=s.max===void 0?e:0;return{start:r?l:i,end:r?i:l}}function v_(t,e,s){if(s===!1)return!1;const r=Yp(t,s),i=Yp(e,s);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function w_(t){let e,s,r,i;return Be(t)?(e=t.top,s=t.right,r=t.bottom,i=t.left):e=s=r=i=t,{top:e,right:s,bottom:r,left:i,disabled:t===!1}}function u0(t,e){const s=[],r=t._getSortedDatasetMetas(e);let i,l;for(i=0,l=r.length;i<l;++i)s.push(r[i].index);return s}function Kp(t,e,s,r={}){const i=t.keys,l=r.mode==="single";let c,u,h,f;if(e===null)return;let p=!1;for(c=0,u=i.length;c<u;++c){if(h=+i[c],h===s){if(p=!0,r.all)continue;break}f=t.values[h],zt(f)&&(l||e===0||Yr(e)===Yr(f))&&(e+=f)}return!p&&!r.all?0:e}function j_(t,e){const{iScale:s,vScale:r}=e,i=s.axis==="x"?"x":"y",l=r.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let h,f,p;for(h=0,f=c.length;h<f;++h)p=c[h],u[h]={[i]:p,[l]:t[p]};return u}function Wd(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function N_(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function __(t){const{min:e,max:s,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function k_(t,e,s){const r=t[e]||(t[e]={});return r[s]||(r[s]={})}function Xp(t,e,s,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const l=t[i.index];if(s&&l>0||!s&&l<0)return i.index}return null}function Qp(t,e){const{chart:s,_cachedMeta:r}=t,i=s._stacks||(s._stacks={}),{iScale:l,vScale:c,index:u}=r,h=l.axis,f=c.axis,p=N_(l,c,r),y=e.length;let b;for(let j=0;j<y;++j){const _=e[j],{[h]:v,[f]:w}=_,S=_._stacks||(_._stacks={});b=S[f]=k_(i,p,v),b[u]=w,b._top=Xp(b,c,!0,r.type),b._bottom=Xp(b,c,!1,r.type);const M=b._visualValues||(b._visualValues={});M[u]=w}}function Vd(t,e){const s=t.scales;return Object.keys(s).filter(r=>s[r].axis===e).shift()}function S_(t,e){return hr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function C_(t,e,s){return hr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Ha(t,e){const s=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const l=i._stacks;if(!l||l[r]===void 0||l[r][s]===void 0)return;delete l[r][s],l[r]._visualValues!==void 0&&l[r]._visualValues[s]!==void 0&&delete l[r]._visualValues[s]}}}const qd=t=>t==="reset"||t==="none",Gp=(t,e)=>e?t:Object.assign({},t),A_=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:u0(s,!0),values:null};class h0{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ha(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,r=this.getDataset(),i=(y,b,j,_)=>y==="x"?b:y==="r"?_:j,l=s.xAxisID=Ie(r.xAxisID,Vd(e,"x")),c=s.yAxisID=Ie(r.yAxisID,Vd(e,"y")),u=s.rAxisID=Ie(r.rAxisID,Vd(e,"r")),h=s.indexAxis,f=s.iAxisID=i(h,l,c,u),p=s.vAxisID=i(h,c,l,u);s.xScale=this.getScaleForId(l),s.yScale=this.getScaleForId(c),s.rScale=this.getScaleForId(u),s.iScale=this.getScaleForId(f),s.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Tp(this._data,this),e._stacked&&Ha(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),r=this._data;if(Be(s)){const i=this._cachedMeta;this._data=j_(s,i)}else if(r!==s){if(r){Tp(r,this);const i=this._cachedMeta;Ha(i),i._parsed=[]}s&&Object.isExtensible(s)&&cN(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const l=s._stacked;s._stacked=Wd(s.vScale,s),s.stack!==r.stack&&(i=!0,Ha(s),s.stack=r.stack),this._resyncElements(e),(i||l!==s._stacked)&&(Qp(this,s._parsed),s._stacked=Wd(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:r,_data:i}=this,{iScale:l,_stacked:c}=r,u=l.axis;let h=e===0&&s===i.length?!0:r._sorted,f=e>0&&r._parsed[e-1],p,y,b;if(this._parsing===!1)r._parsed=i,r._sorted=!0,b=i;else{bt(i[e])?b=this.parseArrayData(r,i,e,s):Be(i[e])?b=this.parseObjectData(r,i,e,s):b=this.parsePrimitiveData(r,i,e,s);const j=()=>y[u]===null||f&&y[u]<f[u];for(p=0;p<s;++p)r._parsed[p+e]=y=b[p],h&&(j()&&(h=!1),f=y);r._sorted=h}c&&Qp(this,b)}parsePrimitiveData(e,s,r,i){const{iScale:l,vScale:c}=e,u=l.axis,h=c.axis,f=l.getLabels(),p=l===c,y=new Array(i);let b,j,_;for(b=0,j=i;b<j;++b)_=b+r,y[b]={[u]:p||l.parse(f[_],_),[h]:c.parse(s[_],_)};return y}parseArrayData(e,s,r,i){const{xScale:l,yScale:c}=e,u=new Array(i);let h,f,p,y;for(h=0,f=i;h<f;++h)p=h+r,y=s[p],u[h]={x:l.parse(y[0],p),y:c.parse(y[1],p)};return u}parseObjectData(e,s,r,i){const{xScale:l,yScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=new Array(i);let p,y,b,j;for(p=0,y=i;p<y;++p)b=p+r,j=s[b],f[p]={x:l.parse(gl(j,u),b),y:c.parse(gl(j,h),b)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,r){const i=this.chart,l=this._cachedMeta,c=s[e.axis],u={keys:u0(i,!0),values:s._stacks[e.axis]._visualValues};return Kp(u,c,l.index,{mode:r})}updateRangeFromParsed(e,s,r,i){const l=r[s.axis];let c=l===null?NaN:l;const u=i&&r._stacks[s.axis];i&&u&&(i.values=u,c=Kp(i,l,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,s){const r=this._cachedMeta,i=r._parsed,l=r._sorted&&e===r.iScale,c=i.length,u=this._getOtherScale(e),h=A_(s,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:y}=__(u);let b,j;function _(){j=i[b];const v=j[u.axis];return!zt(j[e.axis])||p>v||y<v}for(b=0;b<c&&!(!_()&&(this.updateRangeFromParsed(f,e,j,h),l));++b);if(l){for(b=c-1;b>=0;--b)if(!_()){this.updateRangeFromParsed(f,e,j,h);break}}return f}getAllParsedValues(e){const s=this._cachedMeta._parsed,r=[];let i,l,c;for(i=0,l=s.length;i<l;++i)c=s[i][e.axis],zt(c)&&r.push(c);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,r=s.iScale,i=s.vScale,l=this.getParsed(e);return{label:r?""+r.getLabelForValue(l[r.axis]):"",value:i?""+i.getLabelForValue(l[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=w_(Ie(this.options.clip,v_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,r=this._cachedMeta,i=r.data||[],l=s.chartArea,c=[],u=this._drawStart||0,h=this._drawCount||i.length-u,f=this.options.drawActiveElementsOnTop;let p;for(r.dataset&&r.dataset.draw(e,l,u,h),p=u;p<u+h;++p){const y=i[p];y.hidden||(y.active&&f?c.push(y):y.draw(e,l))}for(p=0;p<c.length;++p)c[p].draw(e,l)}getStyle(e,s){const r=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,s,r){const i=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];l=c.$context||(c.$context=C_(this.getContext(),e,c)),l.parsed=this.getParsed(e),l.raw=i.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=S_(this.chart.getContext(),this.index)),l.dataset=i,l.index=l.datasetIndex=this.index;return l.active=!!s,l.mode=r,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",r){const i=s==="active",l=this._cachedDataOpts,c=e+"-"+s,u=l[c],h=this.enableOptionSharing&&xl(r);if(u)return Gp(u,h);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,e),y=i?[`${e}Hover`,"hover",e,""]:[e,""],b=f.getOptionScopes(this.getDataset(),p),j=Object.keys(ct.elements[e]),_=()=>this.getContext(r,i,s),v=f.resolveNamedOptions(b,j,_,y);return v.$shared&&(v.$shared=h,l[c]=Object.freeze(Gp(v,h))),v}_resolveAnimations(e,s,r){const i=this.chart,l=this._cachedDataOpts,c=`animation-${s}`,u=l[c];if(u)return u;let h;if(i.options.animation!==!1){const p=this.chart.config,y=p.datasetAnimationScopeKeys(this._type,s),b=p.getOptionScopes(this.getDataset(),y);h=p.createResolver(b,this.getContext(e,r,s))}const f=new d0(i,h&&h.animations);return h&&h._cacheable&&(l[c]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||qd(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const r=this.resolveDataElementOptions(e,s),i=this._sharedOptions,l=this.getSharedOptions(r),c=this.includeOptions(s,l)||l!==i;return this.updateSharedOptions(l,s,r),{sharedOptions:l,includeOptions:c}}updateElement(e,s,r,i){qd(i)?Object.assign(e,r):this._resolveAnimations(s,i).update(e,r)}updateSharedOptions(e,s,r){e&&!qd(s)&&this._resolveAnimations(void 0,s).update(e,r)}_setStyle(e,s,r,i){e.active=i;const l=this.getStyle(s,i);this._resolveAnimations(s,r,i).update(e,{options:!i&&this.getSharedOptions(l)||l})}removeHoverStyle(e,s,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,s,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,r=this._cachedMeta.data;for(const[u,h,f]of this._syncList)this[u](h,f);this._syncList=[];const i=r.length,l=s.length,c=Math.min(l,i);c&&this.parse(0,c),l>i?this._insertElements(i,l-i,e):l<i&&this._removeElements(l,i-l)}_insertElements(e,s,r=!0){const i=this._cachedMeta,l=i.data,c=e+s;let u;const h=f=>{for(f.length+=s,u=f.length-1;u>=c;u--)f[u]=f[u-s]};for(h(l),u=e;u<c;++u)l[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,s),r&&this.updateElements(l,e,s,"reset")}updateElements(e,s,r,i){}_removeElements(e,s){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,s);r._stacked&&Ha(r,i)}r.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,r,i]=e;this[s](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class E_ extends h0{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:r,data:i=[],_dataset:l}=s,c=this.chart._animationsDisabled;let{start:u,count:h}=mN(s,i,c);this._drawStart=u,this._drawCount=h,fN(s)&&(u=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!l._decimated,r.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!c,options:f},e),this.updateElements(i,u,h,e)}updateElements(e,s,r,i){const l=i==="reset",{iScale:c,vScale:u,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:p,includeOptions:y}=this._getSharedOptions(s,i),b=c.axis,j=u.axis,{spanGaps:_,segment:v}=this.options,w=mi(_)?_:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||l||i==="none",M=s+r,A=e.length;let E=s>0&&this.getParsed(s-1);for(let P=0;P<A;++P){const F=e[P],B=S?F:{};if(P<s||P>=M){B.skip=!0;continue}const R=this.getParsed(P),C=Ke(R[j]),O=B[b]=c.getPixelForValue(R[b],P),T=B[j]=l||C?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,R,h):R[j],P);B.skip=isNaN(O)||isNaN(T)||C,B.stop=P>0&&Math.abs(R[b]-E[b])>w,v&&(B.parsed=R,B.raw=f.data[P]),y&&(B.options=p||this.resolveDataElementOptions(P,F.active?"active":i)),S||this.updateElement(F,P,B,i),E=R}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,r=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const l=i[0].size(this.resolveDataElementOptions(0)),c=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,l,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Jn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class th{static override(e){Object.assign(th.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Jn()}parse(){return Jn()}format(){return Jn()}add(){return Jn()}diff(){return Jn()}startOf(){return Jn()}endOf(){return Jn()}}var P_={_date:th};function M_(t,e,s,r){const{controller:i,data:l,_sorted:c}=t,u=i._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&c&&l.length){const f=u._reversePixels?oN:rr;if(r){if(i._sharedOptions){const p=l[0],y=typeof p.getRange=="function"&&p.getRange(e);if(y){const b=f(l,e,s-y),j=f(l,e,s+y);return{lo:b.lo,hi:j.hi}}}}else{const p=f(l,e,s);if(h){const{vScale:y}=i._cachedMeta,{_parsed:b}=t,j=b.slice(0,p.lo+1).reverse().findIndex(v=>!Ke(v[y.axis]));p.lo-=Math.max(0,j);const _=b.slice(p.hi).findIndex(v=>!Ke(v[y.axis]));p.hi+=Math.max(0,_)}return p}}return{lo:0,hi:l.length-1}}function Il(t,e,s,r,i){const l=t.getSortedVisibleDatasetMetas(),c=s[e];for(let u=0,h=l.length;u<h;++u){const{index:f,data:p}=l[u],{lo:y,hi:b}=M_(l[u],e,c,i);for(let j=y;j<=b;++j){const _=p[j];_.skip||r(_,f,j)}}}function T_(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(r,i){const l=e?Math.abs(r.x-i.x):0,c=s?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function Yd(t,e,s,r,i){const l=[];return!i&&!t.isPointInArea(e)||Il(t,s,e,function(u,h,f){!i&&!fi(u,t.chartArea,0)||u.inRange(e.x,e.y,r)&&l.push({element:u,datasetIndex:h,index:f})},!0),l}function D_(t,e,s,r){let i=[];function l(c,u,h){const{startAngle:f,endAngle:p}=c.getProps(["startAngle","endAngle"],r),{angle:y}=Vx(c,{x:e.x,y:e.y});Vu(y,f,p)&&i.push({element:c,datasetIndex:u,index:h})}return Il(t,s,e,l),i}function R_(t,e,s,r,i,l){let c=[];const u=T_(s);let h=Number.POSITIVE_INFINITY;function f(p,y,b){const j=p.inRange(e.x,e.y,i);if(r&&!j)return;const _=p.getCenterPoint(i);if(!(!!l||t.isPointInArea(_))&&!j)return;const w=u(e,_);w<h?(c=[{element:p,datasetIndex:y,index:b}],h=w):w===h&&c.push({element:p,datasetIndex:y,index:b})}return Il(t,s,e,f),c}function Kd(t,e,s,r,i,l){return!l&&!t.isPointInArea(e)?[]:s==="r"&&!r?D_(t,e,s,i):R_(t,e,s,r,i,l)}function Jp(t,e,s,r,i){const l=[],c=s==="x"?"inXRange":"inYRange";let u=!1;return Il(t,s,e,(h,f,p)=>{h[c]&&h[c](e[s],i)&&(l.push({element:h,datasetIndex:f,index:p}),u=u||h.inRange(e.x,e.y,i))}),r&&!u?[]:l}var F_={modes:{index(t,e,s,r){const i=Zn(e,t),l=s.axis||"x",c=s.includeInvisible||!1,u=s.intersect?Yd(t,i,l,r,c):Kd(t,i,l,!1,r,c),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,y=f.data[p];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:p})}),h):[]},dataset(t,e,s,r){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;let u=s.intersect?Yd(t,i,l,r,c):Kd(t,i,l,!1,r,c);if(u.length>0){const h=u[0].datasetIndex,f=t.getDatasetMeta(h).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:h,index:p})}return u},point(t,e,s,r){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Yd(t,i,l,r,c)},nearest(t,e,s,r){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Kd(t,i,l,s.intersect,r,c)},x(t,e,s,r){const i=Zn(e,t);return Jp(t,i,"x",s.intersect,r)},y(t,e,s,r){const i=Zn(e,t);return Jp(t,i,"y",s.intersect,r)}}};const m0=["left","top","right","bottom"];function Wa(t,e){return t.filter(s=>s.pos===e)}function Zp(t,e){return t.filter(s=>m0.indexOf(s.pos)===-1&&s.box.axis===e)}function Va(t,e){return t.sort((s,r)=>{const i=e?r:s,l=e?s:r;return i.weight===l.weight?i.index-l.index:i.weight-l.weight})}function L_(t){const e=[];let s,r,i,l,c,u;for(s=0,r=(t||[]).length;s<r;++s)i=t[s],{position:l,options:{stack:c,stackWeight:u=1}}=i,e.push({index:s,box:i,pos:l,horizontal:i.isHorizontal(),weight:i.weight,stack:c&&l+c,stackWeight:u});return e}function I_(t){const e={};for(const s of t){const{stack:r,pos:i,stackWeight:l}=s;if(!r||!m0.includes(i))continue;const c=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return e}function O_(t,e){const s=I_(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let l,c,u;for(l=0,c=t.length;l<c;++l){u=t[l];const{fullSize:h}=u.box,f=s[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*r:h&&e.availableWidth,u.height=i):(u.width=r,u.height=p?p*i:h&&e.availableHeight)}return s}function B_(t){const e=L_(t),s=Va(e.filter(f=>f.box.fullSize),!0),r=Va(Wa(e,"left"),!0),i=Va(Wa(e,"right")),l=Va(Wa(e,"top"),!0),c=Va(Wa(e,"bottom")),u=Zp(e,"x"),h=Zp(e,"y");return{fullSize:s,leftAndTop:r.concat(l),rightAndBottom:i.concat(h).concat(c).concat(u),chartArea:Wa(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:l.concat(c).concat(u)}}function eg(t,e,s,r){return Math.max(t[s],e[s])+Math.max(t[r],e[r])}function f0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function z_(t,e,s,r){const{pos:i,box:l}=s,c=t.maxPadding;if(!Be(i)){s.size&&(t[i]-=s.size);const y=r[s.stack]||{size:0,count:1};y.size=Math.max(y.size,s.horizontal?l.height:l.width),s.size=y.size/y.count,t[i]+=s.size}l.getPadding&&f0(c,l.getPadding());const u=Math.max(0,e.outerWidth-eg(c,t,"left","right")),h=Math.max(0,e.outerHeight-eg(c,t,"top","bottom")),f=u!==t.w,p=h!==t.h;return t.w=u,t.h=h,s.horizontal?{same:f,other:p}:{same:p,other:f}}function $_(t){const e=t.maxPadding;function s(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function U_(t,e){const s=e.maxPadding;function r(i){const l={left:0,top:0,right:0,bottom:0};return i.forEach(c=>{l[c]=Math.max(e[c],s[c])}),l}return r(t?["left","right"]:["top","bottom"])}function Ja(t,e,s,r){const i=[];let l,c,u,h,f,p;for(l=0,c=t.length,f=0;l<c;++l){u=t[l],h=u.box,h.update(u.width||e.w,u.height||e.h,U_(u.horizontal,e));const{same:y,other:b}=z_(e,s,u,r);f|=y&&i.length,p=p||b,h.fullSize||i.push(u)}return f&&Ja(i,e,s,r)||p}function Wo(t,e,s,r,i){t.top=s,t.left=e,t.right=e+r,t.bottom=s+i,t.width=r,t.height=i}function tg(t,e,s,r){const i=s.padding;let{x:l,y:c}=e;for(const u of t){const h=u.box,f=r[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const y=e.w*p,b=f.size||h.height;xl(f.start)&&(c=f.start),h.fullSize?Wo(h,i.left,c,s.outerWidth-i.right-i.left,b):Wo(h,e.left+f.placed,c,y,b),f.start=c,f.placed+=y,c=h.bottom}else{const y=e.h*p,b=f.size||h.width;xl(f.start)&&(l=f.start),h.fullSize?Wo(h,l,i.top,b,s.outerHeight-i.bottom-i.top):Wo(h,l,e.top+f.placed,b,y),f.start=l,f.placed+=y,l=h.right}}e.x=l,e.y=c}var ps={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,r){if(!t)return;const i=xs(t.options.layout.padding),l=Math.max(e-i.width,0),c=Math.max(s-i.height,0),u=B_(t.boxes),h=u.vertical,f=u.horizontal;Ve(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const p=h.reduce((v,w)=>w.box.options&&w.box.options.display===!1?v:v+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},i);f0(b,xs(r));const j=Object.assign({maxPadding:b,w:l,h:c,x:i.left,y:i.top},i),_=O_(h.concat(f),y);Ja(u.fullSize,j,y,_),Ja(h,j,y,_),Ja(f,j,y,_)&&Ja(h,j,y,_),$_(j),tg(u.leftAndTop,j,y,_),j.x+=j.w,j.y+=j.h,tg(u.rightAndBottom,j,y,_),t.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},Ve(u.chartArea,v=>{const w=v.box;Object.assign(w,t.chartArea),w.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class p0{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,r){}removeEventListener(e,s,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,r,i){return s=Math.max(0,s||e.width),r=r||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):r)}}isAttached(e){return!0}updateConfig(e){}}class H_ extends p0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const nl="$chartjs",W_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sg=t=>t===null||t==="";function V_(t,e){const s=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[nl]={initial:{height:r,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",sg(i)){const l=Up(t,"width");l!==void 0&&(t.width=l)}if(sg(r))if(t.style.height==="")t.height=t.width/(e||2);else{const l=Up(t,"height");l!==void 0&&(t.height=l)}return t}const g0=n_?{passive:!0}:!1;function q_(t,e,s){t&&t.addEventListener(e,s,g0)}function Y_(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,g0)}function K_(t,e){const s=W_[t.type]||t.type,{x:r,y:i}=Zn(t,e);return{type:s,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function wl(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function X_(t,e,s){const r=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||wl(u.addedNodes,r),c=c&&!wl(u.removedNodes,r);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function Q_(t,e,s){const r=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||wl(u.removedNodes,r),c=c&&!wl(u.addedNodes,r);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const gi=new Map;let ng=0;function x0(){const t=window.devicePixelRatio;t!==ng&&(ng=t,gi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function G_(t,e){gi.size||window.addEventListener("resize",x0),gi.set(t,e)}function J_(t){gi.delete(t),gi.size||window.removeEventListener("resize",x0)}function Z_(t,e,s){const r=t.canvas,i=r&&eh(r);if(!i)return;const l=Kx((u,h)=>{const f=i.clientWidth;s(u,h),f<i.clientWidth&&s()},window),c=new ResizeObserver(u=>{const h=u[0],f=h.contentRect.width,p=h.contentRect.height;f===0&&p===0||l(f,p)});return c.observe(i),G_(t,l),c}function Xd(t,e,s){s&&s.disconnect(),e==="resize"&&J_(t)}function e2(t,e,s){const r=t.canvas,i=Kx(l=>{t.ctx!==null&&s(K_(l,t))},t);return q_(r,e,i),i}class t2 extends p0{acquireContext(e,s){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(V_(e,s),r):null}releaseContext(e){const s=e.canvas;if(!s[nl])return!1;const r=s[nl].initial;["height","width"].forEach(l=>{const c=r[l];Ke(c)?s.removeAttribute(l):s.setAttribute(l,c)});const i=r.style||{};return Object.keys(i).forEach(l=>{s.style[l]=i[l]}),s.width=s.width,delete s[nl],!0}addEventListener(e,s,r){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),c={attach:X_,detach:Q_,resize:Z_}[s]||e2;i[s]=c(e,s,r)}removeEventListener(e,s){const r=e.$proxies||(e.$proxies={}),i=r[s];if(!i)return;({attach:Xd,detach:Xd,resize:Xd}[s]||Y_)(e,s,i),r[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,r,i){return s_(e,s,r,i)}isAttached(e){const s=e&&eh(e);return!!(s&&s.isConnected)}}function s2(t){return!Zu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?H_:t2}class an{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}hasValue(){return mi(this.x)&&mi(this.y)}getProps(e,s){const r=this.$animations;if(!s||!r)return this;const i={};return e.forEach(l=>{i[l]=r[l]&&r[l].active()?r[l]._to:this[l]}),i}}function n2(t,e){const s=t.options.ticks,r=r2(t),i=Math.min(s.maxTicksLimit||r,r),l=s.major.enabled?i2(e):[],c=l.length,u=l[0],h=l[c-1],f=[];if(c>i)return o2(e,f,l,c/i),f;const p=a2(l,e,i);if(c>0){let y,b;const j=c>1?Math.round((h-u)/(c-1)):null;for(Vo(e,f,p,Ke(j)?0:u-j,u),y=0,b=c-1;y<b;y++)Vo(e,f,p,l[y],l[y+1]);return Vo(e,f,p,h,Ke(j)?e.length:h+j),f}return Vo(e,f,p),f}function r2(t){const e=t.options.offset,s=t._tickSize(),r=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(r,i))}function a2(t,e,s){const r=l2(t),i=e.length/s;if(!r)return Math.max(i,1);const l=eN(r);for(let c=0,u=l.length-1;c<u;c++){const h=l[c];if(h>i)return h}return Math.max(i,1)}function i2(t){const e=[];let s,r;for(s=0,r=t.length;s<r;s++)t[s].major&&e.push(s);return e}function o2(t,e,s,r){let i=0,l=s[0],c;for(r=Math.ceil(r),c=0;c<t.length;c++)c===l&&(e.push(t[c]),i++,l=s[i*r])}function Vo(t,e,s,r,i){const l=Ie(r,0),c=Math.min(Ie(i,t.length),t.length);let u=0,h,f,p;for(s=Math.ceil(s),i&&(h=i-r,s=h/Math.floor(h/s)),p=l;p<0;)u++,p=Math.round(l+u*s);for(f=Math.max(l,0);f<c;f++)f===p&&(e.push(t[f]),u++,p=Math.round(l+u*s))}function l2(t){const e=t.length;let s,r;if(e<2)return!1;for(r=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==r)return!1;return r}const c2=t=>t==="left"?"right":t==="right"?"left":t,rg=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,ag=(t,e)=>Math.min(e||t,t);function ig(t,e){const s=[],r=t.length/e,i=t.length;let l=0;for(;l<i;l+=r)s.push(t[Math.floor(l)]);return s}function d2(t,e,s){const r=t.ticks.length,i=Math.min(e,r-1),l=t._startPixel,c=t._endPixel,u=1e-6;let h=t.getPixelForTick(i),f;if(!(s&&(r===1?f=Math.max(h-l,c-h):e===0?f=(t.getPixelForTick(1)-h)/2:f=(h-t.getPixelForTick(i-1))/2,h+=i<e?f:-f,h<l-u||h>c+u)))return h}function u2(t,e){Ve(t,s=>{const r=s.gc,i=r.length/2;let l;if(i>e){for(l=0;l<i;++l)delete s.data[r[l]];r.splice(0,i)}})}function qa(t){return t.drawTicks?t.tickLength:0}function og(t,e){if(!t.display)return 0;const s=Bt(t.font,e),r=xs(t.padding);return(bt(t.text)?t.text.length:1)*s.lineHeight+r.height}function h2(t,e){return hr(t,{scale:e,type:"scale"})}function m2(t,e,s){return hr(t,{tick:s,index:e,type:"tick"})}function f2(t,e,s){let r=Yu(t);return(s&&e!=="right"||!s&&e==="right")&&(r=c2(r)),r}function p2(t,e,s,r){const{top:i,left:l,bottom:c,right:u,chart:h}=t,{chartArea:f,scales:p}=h;let y=0,b,j,_;const v=c-i,w=u-l;if(t.isHorizontal()){if(j=Lt(r,l,u),Be(s)){const S=Object.keys(s)[0],M=s[S];_=p[S].getPixelForValue(M)+v-e}else s==="center"?_=(f.bottom+f.top)/2+v-e:_=rg(t,s,e);b=u-l}else{if(Be(s)){const S=Object.keys(s)[0],M=s[S];j=p[S].getPixelForValue(M)-w+e}else s==="center"?j=(f.left+f.right)/2-w+e:j=rg(t,s,e);_=Lt(r,c,i),y=s==="left"?-At:At}return{titleX:j,titleY:_,maxWidth:b,rotation:y}}class sa extends an{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:r,_suggestedMax:i}=this;return e=Rs(e,Number.POSITIVE_INFINITY),s=Rs(s,Number.NEGATIVE_INFINITY),r=Rs(r,Number.POSITIVE_INFINITY),i=Rs(i,Number.NEGATIVE_INFINITY),{min:Rs(e,r),max:Rs(s,i),minDefined:zt(e),maxDefined:zt(s)}}getMinMax(e){let{min:s,max:r,minDefined:i,maxDefined:l}=this.getUserBounds(),c;if(i&&l)return{min:s,max:r};const u=this.getMatchingVisibleMetas();for(let h=0,f=u.length;h<f;++h)c=u[h].controller.getMinMax(this,e),i||(s=Math.min(s,c.min)),l||(r=Math.max(r,c.max));return s=l&&s>r?r:s,r=i&&s>r?s:r,{min:Rs(s,Rs(r,s)),max:Rs(r,Rs(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ge(this.options.beforeUpdate,[this])}update(e,s,r){const{beginAtZero:i,grace:l,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=RN(this,l,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?ig(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=n2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,r;this.isHorizontal()?(s=this.left,r=this.right):(s=this.top,r=this.bottom,e=!e),this._startPixel=s,this._endPixel=r,this._reversePixels=e,this._length=r-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ge(this.options.afterUpdate,[this])}beforeSetDimensions(){Ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let r,i,l;for(r=0,i=e.length;r<i;r++)l=e[r],l.label=Ge(s.callback,[l.value,r,e],this)}afterTickToLabelConversion(){Ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,r=ag(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,l=s.maxRotation;let c=i,u,h,f;if(!this._isVisible()||!s.display||i>=l||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const p=this._getLabelSizes(),y=p.widest.width,b=p.highest.height,j=Ot(this.chart.width-y,0,this.maxWidth);u=e.offset?this.maxWidth/r:j/(r-1),y+6>u&&(u=j/(r-(e.offset?.5:1)),h=this.maxHeight-qa(e.grid)-s.padding-og(e.title,this.chart.options.font),f=Math.sqrt(y*y+b*b),c=rN(Math.min(Math.asin(Ot((p.highest.height+6)/u,-1,1)),Math.asin(Ot(h/f,-1,1))-Math.asin(Ot(b/f,-1,1)))),c=Math.max(i,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ge(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:r,title:i,grid:l}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const h=og(i,s.options.font);if(u?(e.width=this.maxWidth,e.height=qa(l)+h):(e.height=this.maxHeight,e.width=qa(l)+h),r.display&&this.ticks.length){const{first:f,last:p,widest:y,highest:b}=this._getLabelSizes(),j=r.padding*2,_=nr(this.labelRotation),v=Math.cos(_),w=Math.sin(_);if(u){const S=r.mirror?0:w*y.width+v*b.height;e.height=Math.min(this.maxHeight,e.height+S+j)}else{const S=r.mirror?0:v*y.width+w*b.height;e.width=Math.min(this.maxWidth,e.width+S+j)}this._calculatePadding(f,p,w,v)}}this._handleMargins(),u?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,r,i){const{ticks:{align:l,padding:c},position:u}=this.options,h=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,j=0;h?f?(b=i*e.width,j=r*s.height):(b=r*e.height,j=i*s.width):l==="start"?j=s.width:l==="end"?b=e.width:l!=="inner"&&(b=e.width/2,j=s.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((j-y+c)*this.width/(this.width-y),0)}else{let p=s.height/2,y=e.height/2;l==="start"?(p=0,y=e.height):l==="end"&&(p=s.height,y=0),this.paddingTop=p+c,this.paddingBottom=y+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ge(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,r;for(s=0,r=e.length;s<r;s++)Ke(e[s].label)&&(e.splice(s,1),r--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let r=this.ticks;s<r.length&&(r=ig(r,s)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,r){const{ctx:i,_longestTextCache:l}=this,c=[],u=[],h=Math.floor(s/ag(s,r));let f=0,p=0,y,b,j,_,v,w,S,M,A,E,P;for(y=0;y<s;y+=h){if(_=e[y].label,v=this._resolveTickFontOptions(y),i.font=w=v.string,S=l[w]=l[w]||{data:{},gc:[]},M=v.lineHeight,A=E=0,!Ke(_)&&!bt(_))A=Ip(i,S.data,S.gc,A,_),E=M;else if(bt(_))for(b=0,j=_.length;b<j;++b)P=_[b],!Ke(P)&&!bt(P)&&(A=Ip(i,S.data,S.gc,A,P),E+=M);c.push(A),u.push(E),f=Math.max(A,f),p=Math.max(E,p)}u2(l,s);const F=c.indexOf(f),B=u.indexOf(p),R=C=>({width:c[C]||0,height:u[C]||0});return{first:R(0),last:R(s-1),widest:R(F),highest:R(B),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return iN(this._alignToPixels?Gn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const r=s[e];return r.$context||(r.$context=m2(this.getContext(),e,r))}return this.$context||(this.$context=h2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=nr(this.labelRotation),r=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),l=this._getLabelSizes(),c=e.autoSkipPadding||0,u=l?l.widest.width+c:0,h=l?l.highest.height+c:0;return this.isHorizontal()?h*r>u*i?u/r:h/i:h*i<u*r?h/r:u/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,r=this.chart,i=this.options,{grid:l,position:c,border:u}=i,h=l.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),b=qa(l),j=[],_=u.setContext(this.getContext()),v=_.display?_.width:0,w=v/2,S=function(Y){return Gn(r,Y,v)};let M,A,E,P,F,B,R,C,O,T,W,ee;if(c==="top")M=S(this.bottom),B=this.bottom-b,C=M-w,T=S(e.top)+w,ee=e.bottom;else if(c==="bottom")M=S(this.top),T=e.top,ee=S(e.bottom)-w,B=M+w,C=this.top+b;else if(c==="left")M=S(this.right),F=this.right-b,R=M-w,O=S(e.left)+w,W=e.right;else if(c==="right")M=S(this.left),O=e.left,W=S(e.right)-w,F=M+w,R=this.left+b;else if(s==="x"){if(c==="center")M=S((e.top+e.bottom)/2+.5);else if(Be(c)){const Y=Object.keys(c)[0],re=c[Y];M=S(this.chart.scales[Y].getPixelForValue(re))}T=e.top,ee=e.bottom,B=M+w,C=B+b}else if(s==="y"){if(c==="center")M=S((e.left+e.right)/2);else if(Be(c)){const Y=Object.keys(c)[0],re=c[Y];M=S(this.chart.scales[Y].getPixelForValue(re))}F=M-w,R=F-b,O=e.left,W=e.right}const ae=Ie(i.ticks.maxTicksLimit,y),ge=Math.max(1,Math.ceil(y/ae));for(A=0;A<y;A+=ge){const Y=this.getContext(A),re=l.setContext(Y),V=u.setContext(Y),te=re.lineWidth,se=re.color,L=V.dash||[],H=V.dashOffset,U=re.tickWidth,G=re.tickColor,z=re.tickBorderDash||[],Z=re.tickBorderDashOffset;E=d2(this,A,h),E!==void 0&&(P=Gn(r,E,te),f?F=R=O=W=P:B=C=T=ee=P,j.push({tx1:F,ty1:B,tx2:R,ty2:C,x1:O,y1:T,x2:W,y2:ee,width:te,color:se,borderDash:L,borderDashOffset:H,tickWidth:U,tickColor:G,tickBorderDash:z,tickBorderDashOffset:Z}))}return this._ticksLength=y,this._borderValue=M,j}_computeLabelItems(e){const s=this.axis,r=this.options,{position:i,ticks:l}=r,c=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:f,padding:p,mirror:y}=l,b=qa(r.grid),j=b+p,_=y?-p:j,v=-nr(this.labelRotation),w=[];let S,M,A,E,P,F,B,R,C,O,T,W,ee="middle";if(i==="top")F=this.bottom-_,B=this._getXAxisLabelAlignment();else if(i==="bottom")F=this.top+_,B=this._getXAxisLabelAlignment();else if(i==="left"){const ge=this._getYAxisLabelAlignment(b);B=ge.textAlign,P=ge.x}else if(i==="right"){const ge=this._getYAxisLabelAlignment(b);B=ge.textAlign,P=ge.x}else if(s==="x"){if(i==="center")F=(e.top+e.bottom)/2+j;else if(Be(i)){const ge=Object.keys(i)[0],Y=i[ge];F=this.chart.scales[ge].getPixelForValue(Y)+j}B=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")P=(e.left+e.right)/2-j;else if(Be(i)){const ge=Object.keys(i)[0],Y=i[ge];P=this.chart.scales[ge].getPixelForValue(Y)}B=this._getYAxisLabelAlignment(b).textAlign}s==="y"&&(h==="start"?ee="top":h==="end"&&(ee="bottom"));const ae=this._getLabelSizes();for(S=0,M=u.length;S<M;++S){A=u[S],E=A.label;const ge=l.setContext(this.getContext(S));R=this.getPixelForTick(S)+l.labelOffset,C=this._resolveTickFontOptions(S),O=C.lineHeight,T=bt(E)?E.length:1;const Y=T/2,re=ge.color,V=ge.textStrokeColor,te=ge.textStrokeWidth;let se=B;c?(P=R,B==="inner"&&(S===M-1?se=this.options.reverse?"left":"right":S===0?se=this.options.reverse?"right":"left":se="center"),i==="top"?f==="near"||v!==0?W=-T*O+O/2:f==="center"?W=-ae.highest.height/2-Y*O+O:W=-ae.highest.height+O/2:f==="near"||v!==0?W=O/2:f==="center"?W=ae.highest.height/2-Y*O:W=ae.highest.height-T*O,y&&(W*=-1),v!==0&&!ge.showLabelBackdrop&&(P+=O/2*Math.sin(v))):(F=R,W=(1-T)*O/2);let L;if(ge.showLabelBackdrop){const H=xs(ge.backdropPadding),U=ae.heights[S],G=ae.widths[S];let z=W-H.top,Z=0-H.left;switch(ee){case"middle":z-=U/2;break;case"bottom":z-=U;break}switch(B){case"center":Z-=G/2;break;case"right":Z-=G;break;case"inner":S===M-1?Z-=G:S>0&&(Z-=G/2);break}L={left:Z,top:z,width:G+H.width,height:U+H.height,color:ge.backdropColor}}w.push({label:E,font:C,textOffset:W,options:{rotation:v,color:re,strokeColor:V,strokeWidth:te,textAlign:se,textBaseline:ee,translation:[P,F],backdrop:L}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-nr(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:r,mirror:i,padding:l}}=this.options,c=this._getLabelSizes(),u=e+l,h=c.widest.width;let f,p;return s==="left"?i?(p=this.right+l,r==="near"?f="left":r==="center"?(f="center",p+=h/2):(f="right",p+=h)):(p=this.right-u,r==="near"?f="right":r==="center"?(f="center",p-=h/2):(f="left",p=this.left)):s==="right"?i?(p=this.left+l,r==="near"?f="right":r==="center"?(f="center",p-=h/2):(f="left",p-=h)):(p=this.left+u,r==="near"?f="left":r==="center"?(f="center",p+=h/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:r,top:i,width:l,height:c}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(r,i,l,c),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(l=>l.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,c;const u=(h,f,p)=>{!p.width||!p.color||(r.save(),r.lineWidth=p.width,r.strokeStyle=p.color,r.setLineDash(p.borderDash||[]),r.lineDashOffset=p.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(s.display)for(l=0,c=i.length;l<c;++l){const h=i[l];s.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),s.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:r,grid:i}}=this,l=r.setContext(this.getContext()),c=r.display?l.width:0;if(!c)return;const u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,p,y,b;this.isHorizontal()?(f=Gn(e,this.left,c)-c/2,p=Gn(e,this.right,u)+u/2,y=b=h):(y=Gn(e,this.top,c)-c/2,b=Gn(e,this.bottom,u)+u/2,f=p=h),s.save(),s.lineWidth=l.width,s.strokeStyle=l.color,s.beginPath(),s.moveTo(f,y),s.lineTo(p,b),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Rl(r,i);const l=this.getLabelItems(e);for(const c of l){const u=c.options,h=c.font,f=c.label,p=c.textOffset;pi(r,f,0,p,h,u)}i&&Fl(r)}drawTitle(){const{ctx:e,options:{position:s,title:r,reverse:i}}=this;if(!r.display)return;const l=Bt(r.font),c=xs(r.padding),u=r.align;let h=l.lineHeight/2;s==="bottom"||s==="center"||Be(s)?(h+=c.bottom,bt(r.text)&&(h+=l.lineHeight*(r.text.length-1))):h+=c.top;const{titleX:f,titleY:p,maxWidth:y,rotation:b}=p2(this,h,s,u);pi(e,r.text,0,0,l,{color:r.color,maxWidth:y,rotation:b,textAlign:f2(u,s,i),textBaseline:"middle",translation:[f,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,r=Ie(e.grid&&e.grid.z,-1),i=Ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sa.prototype.draw?[{z:s,draw:l=>{this.draw(l)}}]:[{z:r,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let l,c;for(l=0,c=s.length;l<c;++l){const u=s[l];u[r]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Bt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qo{constructor(e,s,r){this.type=e,this.scope=s,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let r;y2(s)&&(r=this.register(s));const i=this.items,l=e.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in i||(i[l]=e,g2(e,c,r),this.override&&ct.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const s=this.items,r=e.id,i=this.scope;r in s&&delete s[r],i&&r in ct[i]&&(delete ct[i][r],this.override&&delete dr[r])}}function g2(t,e,s){const r=hi(Object.create(null),[s?ct.get(s):{},ct.get(e),t.defaults]);ct.set(e,r),t.defaultRoutes&&x2(e,t.defaultRoutes),t.descriptors&&ct.describe(e,t.descriptors)}function x2(t,e){Object.keys(e).forEach(s=>{const r=s.split("."),i=r.pop(),l=[t].concat(r).join("."),c=e[s].split("."),u=c.pop(),h=c.join(".");ct.route(l,i,h,u)})}function y2(t){return"id"in t&&"defaults"in t}class b2{constructor(){this.controllers=new qo(h0,"datasets",!0),this.elements=new qo(an,"elements"),this.plugins=new qo(Object,"plugins"),this.scales=new qo(sa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,r){[...s].forEach(i=>{const l=r||this._getRegistryForType(i);r||l.isForType(i)||l===this.plugins&&i.id?this._exec(e,l,i):Ve(i,c=>{const u=r||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,s,r){const i=Wu(e);Ge(r["before"+i],[],r),s[e](r),Ge(r["after"+i],[],r)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const r=this._typedRegistries[s];if(r.isForType(e))return r}return this.plugins}_get(e,s,r){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Ls=new b2;class v2{constructor(){this._init=[]}notify(e,s,r,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=i?this._descriptors(e).filter(i):this._descriptors(e),c=this._notify(l,e,s,r);return s==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,s,r,i){i=i||{};for(const l of e){const c=l.plugin,u=c[r],h=[s,i,l.options];if(Ge(u,h,c)===!1&&i.cancelable)return!1}return!0}invalidate(){Ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const r=e&&e.config,i=Ie(r.options&&r.options.plugins,{}),l=w2(r);return i===!1&&!s?[]:N2(e,l,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],r=this._cache,i=(l,c)=>l.filter(u=>!c.some(h=>u.plugin.id===h.plugin.id));this._notify(i(s,r),e,"stop"),this._notify(i(r,s),e,"start")}}function w2(t){const e={},s=[],r=Object.keys(Ls.plugins.items);for(let l=0;l<r.length;l++)s.push(Ls.getPlugin(r[l]));const i=t.plugins||[];for(let l=0;l<i.length;l++){const c=i[l];s.indexOf(c)===-1&&(s.push(c),e[c.id]=!0)}return{plugins:s,localIds:e}}function j2(t,e){return!e&&t===!1?null:t===!0?{}:t}function N2(t,{plugins:e,localIds:s},r,i){const l=[],c=t.getContext();for(const u of e){const h=u.id,f=j2(r[h],i);f!==null&&l.push({plugin:u,options:_2(t.config,{plugin:u,local:s[h]},f,c)})}return l}function _2(t,{plugin:e,local:s},r,i){const l=t.pluginScopeKeys(e),c=t.getOptionScopes(r,l);return s&&e.defaults&&c.push(e.defaults),t.createResolver(c,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nu(t,e){const s=ct.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function k2(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function S2(t,e){return t===e?"_index_":"_value_"}function lg(t){if(t==="x"||t==="y"||t==="r")return t}function C2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _u(t,...e){if(lg(t))return t;for(const s of e){const r=s.axis||C2(s.position)||t.length>1&&lg(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function cg(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function A2(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(s.length)return cg(t,"x",s[0])||cg(t,"y",s[0])}return{}}function E2(t,e){const s=dr[t.type]||{scales:{}},r=e.scales||{},i=Nu(t.type,e),l=Object.create(null);return Object.keys(r).forEach(c=>{const u=r[c];if(!Be(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const h=_u(c,u,A2(c,t),ct.scales[u.type]),f=S2(h,i),p=s.scales||{};l[c]=ni(Object.create(null),[{axis:h},u,p[h],p[f]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,h=c.indexAxis||Nu(u,e),p=(dr[u]||{}).scales||{};Object.keys(p).forEach(y=>{const b=k2(y,h),j=c[b+"AxisID"]||b;l[j]=l[j]||Object.create(null),ni(l[j],[{axis:b},r[j],p[y]])})}),Object.keys(l).forEach(c=>{const u=l[c];ni(u,[ct.scales[u.type],ct.scale])}),l}function y0(t){const e=t.options||(t.options={});e.plugins=Ie(e.plugins,{}),e.scales=E2(t,e)}function b0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function P2(t){return t=t||{},t.data=b0(t.data),y0(t),t}const dg=new Map,v0=new Set;function Yo(t,e){let s=dg.get(t);return s||(s=e(),dg.set(t,s),v0.add(s)),s}const Ya=(t,e,s)=>{const r=gl(e,s);r!==void 0&&t.add(r)};class M2{constructor(e){this._config=P2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=b0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),y0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Yo(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Yo(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,r=this.type;return Yo(`${r}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const r=this._scopeCache;let i=r.get(e);return(!i||s)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,s,r){const{options:i,type:l}=this,c=this._cachedScopes(e,r),u=c.get(s);if(u)return u;const h=new Set;s.forEach(p=>{e&&(h.add(e),p.forEach(y=>Ya(h,e,y))),p.forEach(y=>Ya(h,i,y)),p.forEach(y=>Ya(h,dr[l]||{},y)),p.forEach(y=>Ya(h,ct,y)),p.forEach(y=>Ya(h,wu,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),v0.has(s)&&c.set(s,f),f}chartOptionScopes(){const{options:e,type:s}=this;return[e,dr[s]||{},ct.datasets[s]||{},{type:s},ct,wu]}resolveNamedOptions(e,s,r,i=[""]){const l={$shared:!0},{resolver:c,subPrefixes:u}=ug(this._resolverCache,e,i);let h=c;if(D2(c,s)){l.$shared=!1,r=Rn(r)?r():r;const f=this.createResolver(e,r,u);h=Kr(c,r,f)}for(const f of s)l[f]=h[f];return l}createResolver(e,s,r=[""],i){const{resolver:l}=ug(this._resolverCache,e,r);return Be(s)?Kr(l,s,void 0,i):l}}function ug(t,e,s){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=s.join();let l=r.get(i);return l||(l={resolver:Qu(e,s),subPrefixes:s.filter(u=>!u.toLowerCase().includes("hover"))},r.set(i,l)),l}const T2=t=>Be(t)&&Object.getOwnPropertyNames(t).some(e=>Rn(t[e]));function D2(t,e){const{isScriptable:s,isIndexable:r}=Zx(t);for(const i of e){const l=s(i),c=r(i),u=(c||l)&&t[i];if(l&&(Rn(u)||T2(u))||c&&bt(u))return!0}return!1}var R2="4.5.0";const F2=["top","bottom","left","right","chartArea"];function hg(t,e){return t==="top"||t==="bottom"||F2.indexOf(t)===-1&&e==="x"}function mg(t,e){return function(s,r){return s[t]===r[t]?s[e]-r[e]:s[t]-r[t]}}function fg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ge(s&&s.onComplete,[t],e)}function L2(t){const e=t.chart,s=e.options.animation;Ge(s&&s.onProgress,[t],e)}function w0(t){return Zu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rl={},pg=t=>{const e=w0(t);return Object.values(rl).filter(s=>s.canvas===e).pop()};function I2(t,e,s){const r=Object.keys(t);for(const i of r){const l=+i;if(l>=e){const c=t[i];delete t[i],(s>0||l>e)&&(t[l+s]=c)}}}function O2(t,e,s,r){return!s||t.type==="mouseout"?null:r?e:t}let Ol=class{static defaults=ct;static instances=rl;static overrides=dr;static registry=Ls;static version=R2;static getChart=pg;static register(...e){Ls.add(...e),gg()}static unregister(...e){Ls.remove(...e),gg()}constructor(e,s){const r=this.config=new M2(s),i=w0(e),l=pg(i);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||s2(i)),this.platform.updateConfig(r);const u=this.platform.acquireContext(i,c.aspectRatio),h=u&&u.canvas,f=h&&h.height,p=h&&h.width;if(this.id=Vj(),this.ctx=u,this.canvas=h,this.width=p,this.height=f,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new v2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uN(y=>this.update(y),c.resizeDelay||0),this._dataChanges=[],rl[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Xs.listen(this,"complete",fg),Xs.listen(this,"progress",L2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:r,height:i,_aspectRatio:l}=this;return Ke(e)?s&&l?l:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$p(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Op(this.canvas,this.ctx),this}stop(){return Xs.stop(this),this}resize(e,s){Xs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const r=this.options,i=this.canvas,l=r.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(i,e,s,l),u=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,$p(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),Ge(r.onResize,[this,c],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Ve(s,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,r=this.scales,i=Object.keys(r).reduce((c,u)=>(c[u]=!1,c),{});let l=[];s&&(l=l.concat(Object.keys(s).map(c=>{const u=s[c],h=_u(c,u),f=h==="r",p=h==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),Ve(l,c=>{const u=c.options,h=u.id,f=_u(h,u),p=Ie(u.type,c.dtype);(u.position===void 0||hg(u.position,f)!==hg(c.dposition))&&(u.position=c.dposition),i[h]=!0;let y=null;if(h in r&&r[h].type===p)y=r[h];else{const b=Ls.getScale(p);y=new b({id:h,type:p,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(u,e)}),Ve(i,(c,u)=>{c||delete r[u]}),Ve(r,c=>{ps.configure(this,c,c.options),ps.addBox(this,c)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,r=e.length;if(e.sort((i,l)=>i.index-l.index),r>s){for(let i=s;i<r;++i)this._destroyDatasetMeta(i);e.splice(s,r-s)}this._sortedMetasets=e.slice(0).sort(mg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((r,i)=>{s.filter(l=>l===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=s.length;r<i;r++){const l=s[r];let c=this.getDatasetMeta(r);const u=l.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(r),c=this.getDatasetMeta(r)),c.type=u,c.indexAxis=l.indexAxis||Nu(u,this.options),c.order=l.order||0,c.index=r,c.label=""+l.label,c.visible=this.isDatasetVisible(r),c.controller)c.controller.updateIndex(r),c.controller.linkScales();else{const h=Ls.getController(u),{datasetElementType:f,dataElementType:p}=ct.datasets[u];Object.assign(h,{dataElementType:Ls.getElement(p),datasetElementType:f&&Ls.getElement(f)}),c.controller=new h(this,r),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){Ve(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const r=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:y}=this.getDatasetMeta(f),b=!i&&l.indexOf(y)===-1;y.buildOrUpdateElements(b),c=Math.max(+y.getMaxOverflow(),c)}c=this._minPadding=r.layout.autoPadding?c:0,this._updateLayout(c),i||Ve(l,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(mg("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Ve(this.scales,e=>{ps.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Ap(s,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:l}of s){const c=r==="_removeElements"?-l:l;I2(e,i,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,r=l=>new Set(e.filter(c=>c[0]===l).map((c,u)=>u+","+c.splice(1).join(","))),i=r(0);for(let l=1;l<s;l++)if(!Ap(i,r(l)))return;return Array.from(i).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ps.update(this,this.width,this.height,e);const s=this.chartArea,r=s.width<=0||s.height<=0;this._layers=[],Ve(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,l)=>{i._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,r=this.data.datasets.length;s<r;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,r=this.data.datasets.length;s<r;++s)this._updateDataset(s,Rn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xs.has(this)?this.attached&&!Xs.running(this)&&Xs.start(this):(this.draw(),fg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,r=[];let i,l;for(i=0,l=s.length;i<l;++i){const c=s[i];(!e||c.visible)&&r.push(c)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=c0(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Rl(s,i),e.controller.draw(),i&&Fl(s),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return fi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,r,i){const l=F_.modes[s];return typeof l=="function"?l(this,e,r,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],r=this._metasets;let i=r.filter(l=>l&&l._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=hr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!s.hidden}setDatasetVisibility(e,s){const r=this.getDatasetMeta(e);r.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,r){const i=r?"show":"hide",l=this.getDatasetMeta(e),c=l.controller._resolveAnimations(void 0,i);xl(s)?(l.data[s].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),c.update(l,{visible:r}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Xs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Op(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete rl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,r=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c,u)=>{l.offsetX=c,l.offsetY=u,this._eventHandler(l)};Ve(this.options.events,l=>r(l,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,r=(h,f)=>{s.addEventListener(this,h,f),e[h]=f},i=(h,f)=>{e[h]&&(s.removeEventListener(this,h,f),delete e[h])},l=(h,f)=>{this.canvas&&this.resize(h,f)};let c;const u=()=>{i("attach",u),this.attached=!0,this.resize(),r("resize",l),r("detach",c)};c=()=>{this.attached=!1,i("resize",l),this._stop(),this._resize(0,0),r("attach",u)},s.isAttached(this.canvas)?u():c()}unbindEvents(){Ve(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Ve(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,r){const i=r?"set":"remove";let l,c,u,h;for(s==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){c=e[u];const f=c&&this.getDatasetMeta(c.datasetIndex).controller;f&&f[i+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],r=e.map(({datasetIndex:l,index:c})=>{const u=this.getDatasetMeta(l);if(!u)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:u.data[c],index:c}});!fl(r,s)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,s))}notifyPlugins(e,s,r){return this._plugins.notify(this,e,s,r)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,r){const i=this.options.hover,l=(h,f)=>h.filter(p=>!f.some(y=>p.datasetIndex===y.datasetIndex&&p.index===y.index)),c=l(s,e),u=r?e:l(e,s);c.length&&this.updateHoverStyle(c,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,s){const r={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const l=this._handleEvent(e,s,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(l||r.changed)&&this.render(),this}_handleEvent(e,s,r){const{_active:i=[],options:l}=this,c=s,u=this._getActiveElements(e,i,r,c),h=Gj(e),f=O2(e,this._lastEvent,r,h);r&&(this._lastEvent=null,Ge(l.onHover,[e,u,this],this),h&&Ge(l.onClick,[e,u,this],this));const p=!fl(u,i);return(p||s)&&(this._active=u,this._updateHoverStyles(u,i,s)),this._lastEvent=f,p}_getActiveElements(e,s,r,i){if(e.type==="mouseout")return[];if(!r)return s;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,i)}};function gg(){return Ve(Ol.instances,t=>t._plugins.invalidate())}function B2(t,e,s){const{startAngle:r,x:i,y:l,outerRadius:c,innerRadius:u,options:h}=e,{borderWidth:f,borderJoinStyle:p}=h,y=Math.min(f/c,as(r-s));if(t.beginPath(),t.arc(i,l,c-f/2,r+y/2,s-y/2),u>0){const b=Math.min(f/u,as(r-s));t.arc(i,l,u+f/2,s-b/2,r+b/2,!0)}else{const b=Math.min(f/2,c*as(r-s));if(p==="round")t.arc(i,l,b,s-qe/2,r+qe/2,!0);else if(p==="bevel"){const j=2*b*b,_=-j*Math.cos(s+qe/2)+i,v=-j*Math.sin(s+qe/2)+l,w=j*Math.cos(r+qe/2)+i,S=j*Math.sin(r+qe/2)+l;t.lineTo(_,v),t.lineTo(w,S)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function z2(t,e,s){const{startAngle:r,pixelMargin:i,x:l,y:c,outerRadius:u,innerRadius:h}=e;let f=i/u;t.beginPath(),t.arc(l,c,u,r-f,s+f),h>i?(f=i/h,t.arc(l,c,h,s+f,r-f,!0)):t.arc(l,c,i,s+At,r-At),t.closePath(),t.clip()}function $2(t){return Xu(t,["outerStart","outerEnd","innerStart","innerEnd"])}function U2(t,e,s,r){const i=$2(t.options.borderRadius),l=(s-e)/2,c=Math.min(l,r*e/2),u=h=>{const f=(s-Math.min(l,h))*r/2;return Ot(h,0,Math.min(l,f))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Ot(i.innerStart,0,c),innerEnd:Ot(i.innerEnd,0,c)}}function zr(t,e,s,r){return{x:s+t*Math.cos(e),y:r+t*Math.sin(e)}}function jl(t,e,s,r,i,l){const{x:c,y:u,startAngle:h,pixelMargin:f,innerRadius:p}=e,y=Math.max(e.outerRadius+r+s-f,0),b=p>0?p+r+s+f:0;let j=0;const _=i-h;if(r){const ge=p>0?p-r:0,Y=y>0?y-r:0,re=(ge+Y)/2,V=re!==0?_*re/(re+r):_;j=(_-V)/2}const v=Math.max(.001,_*y-s/qe)/y,w=(_-v)/2,S=h+w+j,M=i-w-j,{outerStart:A,outerEnd:E,innerStart:P,innerEnd:F}=U2(e,b,y,M-S),B=y-A,R=y-E,C=S+A/B,O=M-E/R,T=b+P,W=b+F,ee=S+P/T,ae=M-F/W;if(t.beginPath(),l){const ge=(C+O)/2;if(t.arc(c,u,y,C,ge),t.arc(c,u,y,ge,O),E>0){const te=zr(R,O,c,u);t.arc(te.x,te.y,E,O,M+At)}const Y=zr(W,M,c,u);if(t.lineTo(Y.x,Y.y),F>0){const te=zr(W,ae,c,u);t.arc(te.x,te.y,F,M+At,ae+Math.PI)}const re=(M-F/b+(S+P/b))/2;if(t.arc(c,u,b,M-F/b,re,!0),t.arc(c,u,b,re,S+P/b,!0),P>0){const te=zr(T,ee,c,u);t.arc(te.x,te.y,P,ee+Math.PI,S-At)}const V=zr(B,S,c,u);if(t.lineTo(V.x,V.y),A>0){const te=zr(B,C,c,u);t.arc(te.x,te.y,A,S-At,C)}}else{t.moveTo(c,u);const ge=Math.cos(C)*y+c,Y=Math.sin(C)*y+u;t.lineTo(ge,Y);const re=Math.cos(O)*y+c,V=Math.sin(O)*y+u;t.lineTo(re,V)}t.closePath()}function H2(t,e,s,r,i){const{fullCircles:l,startAngle:c,circumference:u}=e;let h=e.endAngle;if(l){jl(t,e,s,r,h,i);for(let f=0;f<l;++f)t.fill();isNaN(u)||(h=c+(u%Nt||Nt))}return jl(t,e,s,r,h,i),t.fill(),h}function W2(t,e,s,r,i){const{fullCircles:l,startAngle:c,circumference:u,options:h}=e,{borderWidth:f,borderJoinStyle:p,borderDash:y,borderDashOffset:b,borderRadius:j}=h,_=h.borderAlign==="inner";if(!f)return;t.setLineDash(y||[]),t.lineDashOffset=b,_?(t.lineWidth=f*2,t.lineJoin=p||"round"):(t.lineWidth=f,t.lineJoin=p||"bevel");let v=e.endAngle;if(l){jl(t,e,s,r,v,i);for(let w=0;w<l;++w)t.stroke();isNaN(u)||(v=c+(u%Nt||Nt))}_&&z2(t,e,v),h.selfJoin&&v-c>=qe&&j===0&&p!=="miter"&&B2(t,e,v),l||(jl(t,e,s,r,v,i),t.stroke())}class V2 extends an{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,r){const i=this.getProps(["x","y"],r),{angle:l,distance:c}=Vx(i,{x:e,y:s}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),b=(this.options.spacing+this.options.borderWidth)/2,j=Ie(y,h-u),_=Vu(l,u,h)&&u!==h,v=j>=Nt||_,w=Zs(c,f+b,p+b);return v&&w}getCenterPoint(e){const{x:s,y:r,startAngle:i,endAngle:l,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,p=(i+l)/2,y=(c+u+f+h)/2;return{x:s+Math.cos(p)*y,y:r+Math.sin(p)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:r}=this,i=(s.offset||0)/4,l=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Nt?Math.floor(r/Nt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);const h=1-Math.sin(Math.min(qe,r||0)),f=i*h;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,H2(e,this,f,l,c),W2(e,this,f,l,c),e.restore()}}function j0(t,e,s=e){t.lineCap=Ie(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Ie(s.borderDash,e.borderDash)),t.lineDashOffset=Ie(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Ie(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ie(s.borderWidth,e.borderWidth),t.strokeStyle=Ie(s.borderColor,e.borderColor)}function q2(t,e,s){t.lineTo(s.x,s.y)}function Y2(t){return t.stepped?kN:t.tension||t.cubicInterpolationMode==="monotone"?SN:q2}function N0(t,e,s={}){const r=t.length,{start:i=0,end:l=r-1}=s,{start:c,end:u}=e,h=Math.max(i,c),f=Math.min(l,u),p=i<c&&l<c||i>u&&l>u;return{count:r,start:h,loop:e.loop,ilen:f<h&&!p?r+f-h:f-h}}function K2(t,e,s,r){const{points:i,options:l}=e,{count:c,start:u,loop:h,ilen:f}=N0(i,s,r),p=Y2(l);let{move:y=!0,reverse:b}=r||{},j,_,v;for(j=0;j<=f;++j)_=i[(u+(b?f-j:j))%c],!_.skip&&(y?(t.moveTo(_.x,_.y),y=!1):p(t,v,_,b,l.stepped),v=_);return h&&(_=i[(u+(b?f:0))%c],p(t,v,_,b,l.stepped)),!!h}function X2(t,e,s,r){const i=e.points,{count:l,start:c,ilen:u}=N0(i,s,r),{move:h=!0,reverse:f}=r||{};let p=0,y=0,b,j,_,v,w,S;const M=E=>(c+(f?u-E:E))%l,A=()=>{v!==w&&(t.lineTo(p,w),t.lineTo(p,v),t.lineTo(p,S))};for(h&&(j=i[M(0)],t.moveTo(j.x,j.y)),b=0;b<=u;++b){if(j=i[M(b)],j.skip)continue;const E=j.x,P=j.y,F=E|0;F===_?(P<v?v=P:P>w&&(w=P),p=(y*p+E)/++y):(A(),t.lineTo(E,P),_=F,y=0,v=w=P),S=P}A()}function ku(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?X2:K2}function Q2(t){return t.stepped?r_:t.tension||t.cubicInterpolationMode==="monotone"?a_:er}function G2(t,e,s,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,r)&&i.closePath()),j0(t,e.options),t.stroke(i)}function J2(t,e,s,r){const{segments:i,options:l}=e,c=ku(e);for(const u of i)j0(t,l,u.style),t.beginPath(),c(t,e,u,{start:s,end:s+r-1})&&t.closePath(),t.stroke()}const Z2=typeof Path2D=="function";function ek(t,e,s,r){Z2&&!e.options.segment?G2(t,e,s,r):J2(t,e,s,r)}class Bl extends an{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;QN(this._points,r,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=u_(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,r=e.length;return r&&s[e[r-1].end]}interpolate(e,s){const r=this.options,i=e[s],l=this.points,c=l0(this,{property:s,start:i,end:i});if(!c.length)return;const u=[],h=Q2(r);let f,p;for(f=0,p=c.length;f<p;++f){const{start:y,end:b}=c[f],j=l[y],_=l[b];if(j===_){u.push(j);continue}const v=Math.abs((i-j[s])/(_[s]-j[s])),w=h(j,_,v,r.stepped);w[s]=e[s],u.push(w)}return u.length===1?u[0]:u}pathSegment(e,s,r){return ku(this)(e,this,s,r)}path(e,s,r){const i=this.segments,l=ku(this);let c=this._loop;s=s||0,r=r||this.points.length-s;for(const u of i)c&=l(e,this,u,{start:s,end:s+r-1});return!!c}draw(e,s,r,i){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),ek(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xg(t,e,s,r){const i=t.options,{[s]:l}=t.getProps([s],r);return Math.abs(e-l)<i.radius+i.hitRadius}class tk extends an{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,r){const i=this.options,{x:l,y:c}=this.getProps(["x","y"],r);return Math.pow(e-l,2)+Math.pow(s-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return xg(this,e,"x",s)}inYRange(e,s){return xg(this,e,"y",s)}getCenterPoint(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const r=s&&e.borderWidth||0;return(s+r)*2}draw(e,s){const r=this.options;this.skip||r.radius<.1||!fi(this,s,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ju(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function _0(t,e){const{x:s,y:r,base:i,width:l,height:c}=t.getProps(["x","y","base","width","height"],e);let u,h,f,p,y;return t.horizontal?(y=c/2,u=Math.min(s,i),h=Math.max(s,i),f=r-y,p=r+y):(y=l/2,u=s-y,h=s+y,f=Math.min(r,i),p=Math.max(r,i)),{left:u,top:f,right:h,bottom:p}}function Pn(t,e,s,r){return t?0:Ot(e,s,r)}function sk(t,e,s){const r=t.options.borderWidth,i=t.borderSkipped,l=Jx(r);return{t:Pn(i.top,l.top,0,s),r:Pn(i.right,l.right,0,e),b:Pn(i.bottom,l.bottom,0,s),l:Pn(i.left,l.left,0,e)}}function nk(t,e,s){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,l=Hr(i),c=Math.min(e,s),u=t.borderSkipped,h=r||Be(i);return{topLeft:Pn(!h||u.top||u.left,l.topLeft,0,c),topRight:Pn(!h||u.top||u.right,l.topRight,0,c),bottomLeft:Pn(!h||u.bottom||u.left,l.bottomLeft,0,c),bottomRight:Pn(!h||u.bottom||u.right,l.bottomRight,0,c)}}function rk(t){const e=_0(t),s=e.right-e.left,r=e.bottom-e.top,i=sk(t,s/2,r/2),l=nk(t,s/2,r/2);return{outer:{x:e.left,y:e.top,w:s,h:r,radius:l},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,l.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(i.b,i.r))}}}}function Qd(t,e,s,r){const i=e===null,l=s===null,u=t&&!(i&&l)&&_0(t,r);return u&&(i||Zs(e,u.left,u.right))&&(l||Zs(s,u.top,u.bottom))}function ak(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ik(t,e){t.rect(e.x,e.y,e.w,e.h)}function Gd(t,e,s={}){const r=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,l=(t.x+t.w!==s.x+s.w?e:0)-r,c=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+l,h:t.h+c,radius:t.radius}}class ok extends an{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:r,backgroundColor:i}}=this,{inner:l,outer:c}=rk(this),u=ak(c.radius)?bl:ik;e.save(),(c.w!==l.w||c.h!==l.h)&&(e.beginPath(),u(e,Gd(c,s,l)),e.clip(),u(e,Gd(l,-s,c)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),u(e,Gd(l,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,r){return Qd(this,e,s,r)}inXRange(e,s){return Qd(this,e,null,s)}inYRange(e,s){return Qd(this,null,e,s)}getCenterPoint(e){const{x:s,y:r,base:i,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(s+i)/2:s,y:l?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function lk(t,e,s){const r=t.segments,i=t.points,l=e.points,c=[];for(const u of r){let{start:h,end:f}=u;f=zl(h,f,i);const p=Su(s,i[h],i[f],u.loop);if(!e.segments){c.push({source:u,target:p,start:i[h],end:i[f]});continue}const y=l0(e,p);for(const b of y){const j=Su(s,l[b.start],l[b.end],b.loop),_=o0(u,i,j);for(const v of _)c.push({source:v,target:b,start:{[s]:yg(p,j,"start",Math.max)},end:{[s]:yg(p,j,"end",Math.min)}})}}return c}function Su(t,e,s,r){if(r)return;let i=e[t],l=s[t];return t==="angle"&&(i=as(i),l=as(l)),{property:t,start:i,end:l}}function ck(t,e){const{x:s=null,y:r=null}=t||{},i=e.points,l=[];return e.segments.forEach(({start:c,end:u})=>{u=zl(c,u,i);const h=i[c],f=i[u];r!==null?(l.push({x:h.x,y:r}),l.push({x:f.x,y:r})):s!==null&&(l.push({x:s,y:h.y}),l.push({x:s,y:f.y}))}),l}function zl(t,e,s){for(;e>t;e--){const r=s[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function yg(t,e,s,r){return t&&e?r(t[s],e[s]):t?t[s]:e?e[s]:0}function k0(t,e){let s=[],r=!1;return bt(t)?(r=!0,s=t):s=ck(t,e),s.length?new Bl({points:s,options:{tension:0},_loop:r,_fullLoop:r}):null}function bg(t){return t&&t.fill!==!1}function dk(t,e,s){let i=t[e].fill;const l=[e];let c;if(!s)return i;for(;i!==!1&&l.indexOf(i)===-1;){if(!zt(i))return i;if(c=t[i],!c)return!1;if(c.visible)return i;l.push(i),i=c.fill}return!1}function uk(t,e,s){const r=pk(t);if(Be(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return zt(i)&&Math.floor(i)===i?hk(r[0],e,i,s):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function hk(t,e,s,r){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=r?!1:s}function mk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:Be(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function fk(t,e,s){let r;return t==="start"?r=s:t==="end"?r=e.options.reverse?e.min:e.max:Be(t)?r=t.value:r=e.getBaseValue(),r}function pk(t){const e=t.options,s=e.fill;let r=Ie(s&&s.target,s);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function gk(t){const{scale:e,index:s,line:r}=t,i=[],l=r.segments,c=r.points,u=xk(e,s);u.push(k0({x:null,y:e.bottom},r));for(let h=0;h<l.length;h++){const f=l[h];for(let p=f.start;p<=f.end;p++)yk(i,c[p],u)}return new Bl({points:i,options:{}})}function xk(t,e){const s=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const l=r[i];if(l.index===e)break;l.hidden||s.unshift(l.dataset)}return s}function yk(t,e,s){const r=[];for(let i=0;i<s.length;i++){const l=s[i],{first:c,last:u,point:h}=bk(l,e,"x");if(!(!h||c&&u)){if(c)r.unshift(h);else if(t.push(h),!u)break}}t.push(...r)}function bk(t,e,s){const r=t.interpolate(e,s);if(!r)return{};const i=r[s],l=t.segments,c=t.points;let u=!1,h=!1;for(let f=0;f<l.length;f++){const p=l[f],y=c[p.start][s],b=c[p.end][s];if(Zs(i,y,b)){u=i===y,h=i===b;break}}return{first:u,last:h,point:r}}class S0{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,r){const{x:i,y:l,radius:c}=this;return s=s||{start:0,end:Nt},e.arc(i,l,c,s.end,s.start,!0),!r.bounds}interpolate(e){const{x:s,y:r,radius:i}=this,l=e.angle;return{x:s+Math.cos(l)*i,y:r+Math.sin(l)*i,angle:l}}}function vk(t){const{chart:e,fill:s,line:r}=t;if(zt(s))return wk(e,s);if(s==="stack")return gk(t);if(s==="shape")return!0;const i=jk(t);return i instanceof S0?i:k0(i,r)}function wk(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function jk(t){return(t.scale||{}).getPointPositionForValue?_k(t):Nk(t)}function Nk(t){const{scale:e={},fill:s}=t,r=mk(s,e);if(zt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function _k(t){const{scale:e,fill:s}=t,r=e.options,i=e.getLabels().length,l=r.reverse?e.max:e.min,c=fk(s,e,l),u=[];if(r.grid.circular){const h=e.getPointPositionForValue(0,l);return new S0({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(c)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,c));return u}function Jd(t,e,s){const r=vk(e),{chart:i,index:l,line:c,scale:u,axis:h}=e,f=c.options,p=f.fill,y=f.backgroundColor,{above:b=y,below:j=y}=p||{},_=i.getDatasetMeta(l),v=c0(i,_);r&&c.points.length&&(Rl(t,s),kk(t,{line:c,target:r,above:b,below:j,area:s,scale:u,axis:h,clip:v}),Fl(t))}function kk(t,e){const{line:s,target:r,above:i,below:l,area:c,scale:u,clip:h}=e,f=s._loop?"angle":e.axis;t.save();let p=l;l!==i&&(f==="x"?(vg(t,r,c.top),Zd(t,{line:s,target:r,color:i,scale:u,property:f,clip:h}),t.restore(),t.save(),vg(t,r,c.bottom)):f==="y"&&(wg(t,r,c.left),Zd(t,{line:s,target:r,color:l,scale:u,property:f,clip:h}),t.restore(),t.save(),wg(t,r,c.right),p=i)),Zd(t,{line:s,target:r,color:p,scale:u,property:f,clip:h}),t.restore()}function vg(t,e,s){const{segments:r,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of r){const{start:h,end:f}=u,p=i[h],y=i[zl(h,f,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(p.x,s),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(y.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function wg(t,e,s){const{segments:r,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of r){const{start:h,end:f}=u,p=i[h],y=i[zl(h,f,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(s,p.y),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(s,y.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function Zd(t,e){const{line:s,target:r,property:i,color:l,scale:c,clip:u}=e,h=lk(s,r,i);for(const{source:f,target:p,start:y,end:b}of h){const{style:{backgroundColor:j=l}={}}=f,_=r!==!0;t.save(),t.fillStyle=j,Sk(t,c,u,_&&Su(i,y,b)),t.beginPath();const v=!!s.pathSegment(t,f);let w;if(_){v?t.closePath():jg(t,r,b,i);const S=!!r.pathSegment(t,p,{move:v,reverse:!0});w=v&&S,w||jg(t,r,y,i)}t.closePath(),t.fill(w?"evenodd":"nonzero"),t.restore()}}function Sk(t,e,s,r){const i=e.chart.chartArea,{property:l,start:c,end:u}=r||{};if(l==="x"||l==="y"){let h,f,p,y;l==="x"?(h=c,f=i.top,p=u,y=i.bottom):(h=i.left,f=c,p=i.right,y=u),t.beginPath(),s&&(h=Math.max(h,s.left),p=Math.min(p,s.right),f=Math.max(f,s.top),y=Math.min(y,s.bottom)),t.rect(h,f,p-h,y-f),t.clip()}}function jg(t,e,s,r){const i=e.interpolate(s,r);i&&t.lineTo(i.x,i.y)}var Ck={id:"filler",afterDatasetsUpdate(t,e,s){const r=(t.data.datasets||[]).length,i=[];let l,c,u,h;for(c=0;c<r;++c)l=t.getDatasetMeta(c),u=l.dataset,h=null,u&&u.options&&u instanceof Bl&&(h={visible:t.isDatasetVisible(c),index:c,fill:uk(u,c,r),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:u}),l.$filler=h,i.push(h);for(c=0;c<r;++c)h=i[c],!(!h||h.fill===!1)&&(h.fill=dk(i,c,s.propagate))},beforeDraw(t,e,s){const r=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let c=i.length-1;c>=0;--c){const u=i[c].$filler;u&&(u.line.updateControlPoints(l,u.axis),r&&u.fill&&Jd(t.ctx,u,l))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const l=r[i].$filler;bg(l)&&Jd(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,s){const r=e.meta.$filler;!bg(r)||s.drawTime!=="beforeDatasetDraw"||Jd(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ng=(t,e)=>{let{boxHeight:s=e,boxWidth:r=e}=t;return t.usePointStyle&&(s=Math.min(s,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(e,s)}},Ak=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class _g extends an{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,r){this.maxWidth=e,this.maxHeight=s,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ge(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(r=>e.filter(r,this.chart.data))),e.sort&&(s=s.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Bt(r.font),l=i.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=Ng(r,l);let f,p;s.font=i.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(c,l,u,h)+10):(p=this.maxHeight,f=this._fitCols(c,i,u,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,s,r,i){const{ctx:l,maxWidth:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],p=i+u;let y=e;l.textAlign="left",l.textBaseline="middle";let b=-1,j=-p;return this.legendItems.forEach((_,v)=>{const w=r+s/2+l.measureText(_.text).width;(v===0||f[f.length-1]+w+2*u>c)&&(y+=p,f[f.length-(v>0?0:1)]=0,j+=p,b++),h[v]={left:0,top:j,row:b,width:w,height:i},f[f.length-1]+=w+u}),y}_fitCols(e,s,r,i){const{ctx:l,maxHeight:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],p=c-e;let y=u,b=0,j=0,_=0,v=0;return this.legendItems.forEach((w,S)=>{const{itemWidth:M,itemHeight:A}=Ek(r,s,l,w,i);S>0&&j+A+2*u>p&&(y+=b+u,f.push({width:b,height:j}),_+=b+u,v++,b=j=0),h[S]={left:_,top:j,col:v,width:M,height:A},b=Math.max(b,M),j+=A+u}),y+=b,f.push({width:b,height:j}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:r,labels:{padding:i},rtl:l}}=this,c=Wr(l,this.left,this.width);if(this.isHorizontal()){let u=0,h=Lt(r,this.left+i,this.right-this.lineWidths[u]);for(const f of s)u!==f.row&&(u=f.row,h=Lt(r,this.left+i,this.right-this.lineWidths[u])),f.top+=this.top+e+i,f.left=c.leftForLtr(c.x(h),f.width),h+=f.width+i}else{let u=0,h=Lt(r,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const f of s)f.col!==u&&(u=f.col,h=Lt(r,this.top+e+i,this.bottom-this.columnSizes[u].height)),f.top=h,f.left+=this.left+i,f.left=c.leftForLtr(c.x(f.left),f.width),h+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Rl(e,this),this._draw(),Fl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:r,ctx:i}=this,{align:l,labels:c}=e,u=ct.color,h=Wr(e.rtl,this.left,this.width),f=Bt(c.font),{padding:p}=c,y=f.size,b=y/2;let j;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:_,boxHeight:v,itemHeight:w}=Ng(c,y),S=function(F,B,R){if(isNaN(_)||_<=0||isNaN(v)||v<0)return;i.save();const C=Ie(R.lineWidth,1);if(i.fillStyle=Ie(R.fillStyle,u),i.lineCap=Ie(R.lineCap,"butt"),i.lineDashOffset=Ie(R.lineDashOffset,0),i.lineJoin=Ie(R.lineJoin,"miter"),i.lineWidth=C,i.strokeStyle=Ie(R.strokeStyle,u),i.setLineDash(Ie(R.lineDash,[])),c.usePointStyle){const O={radius:v*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:C},T=h.xPlus(F,_/2),W=B+b;Gx(i,O,T,W,c.pointStyleWidth&&_)}else{const O=B+Math.max((y-v)/2,0),T=h.leftForLtr(F,_),W=Hr(R.borderRadius);i.beginPath(),Object.values(W).some(ee=>ee!==0)?bl(i,{x:T,y:O,w:_,h:v,radius:W}):i.rect(T,O,_,v),i.fill(),C!==0&&i.stroke()}i.restore()},M=function(F,B,R){pi(i,R.text,F,B+w/2,f,{strikethrough:R.hidden,textAlign:h.textAlign(R.textAlign)})},A=this.isHorizontal(),E=this._computeTitleHeight();A?j={x:Lt(l,this.left+p,this.right-r[0]),y:this.top+p+E,line:0}:j={x:this.left+p,y:Lt(l,this.top+E+p,this.bottom-s[0].height),line:0},r0(this.ctx,e.textDirection);const P=w+p;this.legendItems.forEach((F,B)=>{i.strokeStyle=F.fontColor,i.fillStyle=F.fontColor;const R=i.measureText(F.text).width,C=h.textAlign(F.textAlign||(F.textAlign=c.textAlign)),O=_+b+R;let T=j.x,W=j.y;h.setWidth(this.width),A?B>0&&T+O+p>this.right&&(W=j.y+=P,j.line++,T=j.x=Lt(l,this.left+p,this.right-r[j.line])):B>0&&W+P>this.bottom&&(T=j.x=T+s[j.line].width+p,j.line++,W=j.y=Lt(l,this.top+E+p,this.bottom-s[j.line].height));const ee=h.x(T);if(S(ee,W,F),T=hN(C,T+_+b,A?T+O:this.right,e.rtl),M(h.x(T),W,F),A)j.x+=O+p;else if(typeof F.text!="string"){const ae=f.lineHeight;j.y+=C0(F,ae)+p}else j.y+=P}),a0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,r=Bt(s.font),i=xs(s.padding);if(!s.display)return;const l=Wr(e.rtl,this.left,this.width),c=this.ctx,u=s.position,h=r.size/2,f=i.top+h;let p,y=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+f,y=Lt(e.align,y,this.right-b);else{const _=this.columnSizes.reduce((v,w)=>Math.max(v,w.height),0);p=f+Lt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const j=Lt(u,y,y+b);c.textAlign=l.textAlign(Yu(u)),c.textBaseline="middle",c.strokeStyle=s.color,c.fillStyle=s.color,c.font=r.string,pi(c,s.text,j,p,r)}_computeTitleHeight(){const e=this.options.title,s=Bt(e.font),r=xs(e.padding);return e.display?s.lineHeight+r.height:0}_getLegendItemAt(e,s){let r,i,l;if(Zs(e,this.left,this.right)&&Zs(s,this.top,this.bottom)){for(l=this.legendHitBoxes,r=0;r<l.length;++r)if(i=l[r],Zs(e,i.left,i.left+i.width)&&Zs(s,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const s=this.options;if(!Tk(e.type,s))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,l=Ak(i,r);i&&!l&&Ge(s.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!l&&Ge(s.onHover,[e,r,this],this)}else r&&Ge(s.onClick,[e,r,this],this)}}function Ek(t,e,s,r,i){const l=Pk(r,t,e,s),c=Mk(i,r,e.lineHeight);return{itemWidth:l,itemHeight:c}}function Pk(t,e,s,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((l,c)=>l.length>c.length?l:c)),e+s.size/2+r.measureText(i).width}function Mk(t,e,s){let r=t;return typeof e.text!="string"&&(r=C0(e,s)),r}function C0(t,e){const s=t.text?t.text.length:0;return e*s}function Tk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Dk={id:"legend",_element:_g,start(t,e,s){const r=t.legend=new _g({ctx:t.ctx,options:s,chart:t});ps.configure(t,r,s),ps.addBox(t,r)},stop(t){ps.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const r=t.legend;ps.configure(t,r,s),r.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const r=e.datasetIndex,i=s.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:i,color:l,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(s?0:void 0),p=xs(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:l,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:c&&(u||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class A0 extends an{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=bt(r.text)?r.text.length:1;this._padding=xs(r.padding);const l=i*Bt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:r,bottom:i,right:l,options:c}=this,u=c.align;let h=0,f,p,y;return this.isHorizontal()?(p=Lt(u,r,l),y=s+e,f=l-r):(c.position==="left"?(p=r+e,y=Lt(u,i,s),h=qe*-.5):(p=l-e,y=Lt(u,s,i),h=qe*.5),f=i-s),{titleX:p,titleY:y,maxWidth:f,rotation:h}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const r=Bt(s.font),l=r.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:h,rotation:f}=this._drawArgs(l);pi(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:f,textAlign:Yu(s.align),textBaseline:"middle",translation:[c,u]})}}function Rk(t,e){const s=new A0({ctx:t.ctx,options:e,chart:t});ps.configure(t,s,e),ps.addBox(t,s),t.titleBlock=s}var Fk={id:"title",_element:A0,start(t,e,s){Rk(t,s)},stop(t){const e=t.titleBlock;ps.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const r=t.titleBlock;ps.configure(t,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Za={average(t){if(!t.length)return!1;let e,s,r=new Set,i=0,l=0;for(e=0,s=t.length;e<s;++e){const u=t[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();r.add(h.x),i+=h.y,++l}}return l===0||r.size===0?!1:{x:[...r].reduce((u,h)=>u+h)/r.size,y:i/l}},nearest(t,e){if(!t.length)return!1;let s=e.x,r=e.y,i=Number.POSITIVE_INFINITY,l,c,u;for(l=0,c=t.length;l<c;++l){const h=t[l].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),p=vu(e,f);p<i&&(i=p,u=h)}}if(u){const h=u.tooltipPosition();s=h.x,r=h.y}return{x:s,y:r}}};function Fs(t,e){return e&&(bt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Qs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Lk(t,e){const{element:s,datasetIndex:r,index:i}=e,l=t.getDatasetMeta(r).controller,{label:c,value:u}=l.getLabelAndValue(i);return{chart:t,label:c,parsed:l.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:u,dataset:l.getDataset(),dataIndex:i,datasetIndex:r,element:s}}function kg(t,e){const s=t.chart.ctx,{body:r,footer:i,title:l}=t,{boxWidth:c,boxHeight:u}=e,h=Bt(e.bodyFont),f=Bt(e.titleFont),p=Bt(e.footerFont),y=l.length,b=i.length,j=r.length,_=xs(e.padding);let v=_.height,w=0,S=r.reduce((E,P)=>E+P.before.length+P.lines.length+P.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,y&&(v+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),S){const E=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;v+=j*E+(S-j)*h.lineHeight+(S-1)*e.bodySpacing}b&&(v+=e.footerMarginTop+b*p.lineHeight+(b-1)*e.footerSpacing);let M=0;const A=function(E){w=Math.max(w,s.measureText(E).width+M)};return s.save(),s.font=f.string,Ve(t.title,A),s.font=h.string,Ve(t.beforeBody.concat(t.afterBody),A),M=e.displayColors?c+2+e.boxPadding:0,Ve(r,E=>{Ve(E.before,A),Ve(E.lines,A),Ve(E.after,A)}),M=0,s.font=p.string,Ve(t.footer,A),s.restore(),w+=_.width,{width:w,height:v}}function Ik(t,e){const{y:s,height:r}=e;return s<r/2?"top":s>t.height-r/2?"bottom":"center"}function Ok(t,e,s,r){const{x:i,width:l}=r,c=s.caretSize+s.caretPadding;if(t==="left"&&i+l+c>e.width||t==="right"&&i-l-c<0)return!0}function Bk(t,e,s,r){const{x:i,width:l}=s,{width:c,chartArea:{left:u,right:h}}=t;let f="center";return r==="center"?f=i<=(u+h)/2?"left":"right":i<=l/2?f="left":i>=c-l/2&&(f="right"),Ok(f,t,e,s)&&(f="center"),f}function Sg(t,e,s){const r=s.yAlign||e.yAlign||Ik(t,s);return{xAlign:s.xAlign||e.xAlign||Bk(t,e,s,r),yAlign:r}}function zk(t,e){let{x:s,width:r}=t;return e==="right"?s-=r:e==="center"&&(s-=r/2),s}function $k(t,e,s){let{y:r,height:i}=t;return e==="top"?r+=s:e==="bottom"?r-=i+s:r-=i/2,r}function Cg(t,e,s,r){const{caretSize:i,caretPadding:l,cornerRadius:c}=t,{xAlign:u,yAlign:h}=s,f=i+l,{topLeft:p,topRight:y,bottomLeft:b,bottomRight:j}=Hr(c);let _=zk(e,u);const v=$k(e,h,f);return h==="center"?u==="left"?_+=f:u==="right"&&(_-=f):u==="left"?_-=Math.max(p,b)+i:u==="right"&&(_+=Math.max(y,j)+i),{x:Ot(_,0,r.width-e.width),y:Ot(v,0,r.height-e.height)}}function Ko(t,e,s){const r=xs(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Ag(t){return Fs([],Qs(t))}function Uk(t,e,s){return hr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Eg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const E0={beforeTitle:Ks,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,r=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return s[e.dataIndex]}return""},afterTitle:Ks,beforeBody:Ks,beforeLabel:Ks,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ke(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Ks,afterBody:Ks,beforeFooter:Ks,footer:Ks,afterFooter:Ks};function Gt(t,e,s,r){const i=t[e].call(s,r);return typeof i>"u"?E0[e].call(s,r):i}class Pg extends an{static positioners=Za;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&s.options.animation&&r.animations,l=new d0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=Uk(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:r}=s,i=Gt(r,"beforeTitle",this,e),l=Gt(r,"title",this,e),c=Gt(r,"afterTitle",this,e);let u=[];return u=Fs(u,Qs(i)),u=Fs(u,Qs(l)),u=Fs(u,Qs(c)),u}getBeforeBody(e,s){return Ag(Gt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:r}=s,i=[];return Ve(e,l=>{const c={before:[],lines:[],after:[]},u=Eg(r,l);Fs(c.before,Qs(Gt(u,"beforeLabel",this,l))),Fs(c.lines,Gt(u,"label",this,l)),Fs(c.after,Qs(Gt(u,"afterLabel",this,l))),i.push(c)}),i}getAfterBody(e,s){return Ag(Gt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:r}=s,i=Gt(r,"beforeFooter",this,e),l=Gt(r,"footer",this,e),c=Gt(r,"afterFooter",this,e);let u=[];return u=Fs(u,Qs(i)),u=Fs(u,Qs(l)),u=Fs(u,Qs(c)),u}_createItems(e){const s=this._active,r=this.chart.data,i=[],l=[],c=[];let u=[],h,f;for(h=0,f=s.length;h<f;++h)u.push(Lk(this.chart,s[h]));return e.filter&&(u=u.filter((p,y,b)=>e.filter(p,y,b,r))),e.itemSort&&(u=u.sort((p,y)=>e.itemSort(p,y,r))),Ve(u,p=>{const y=Eg(e.callbacks,p);i.push(Gt(y,"labelColor",this,p)),l.push(Gt(y,"labelPointStyle",this,p)),c.push(Gt(y,"labelTextColor",this,p))}),this.labelColors=i,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=u,u}update(e,s){const r=this.options.setContext(this.getContext()),i=this._active;let l,c=[];if(!i.length)this.opacity!==0&&(l={opacity:0});else{const u=Za[r.position].call(this,i,this._eventPosition);c=this._createItems(r),this.title=this.getTitle(c,r),this.beforeBody=this.getBeforeBody(c,r),this.body=this.getBody(c,r),this.afterBody=this.getAfterBody(c,r),this.footer=this.getFooter(c,r);const h=this._size=kg(this,r),f=Object.assign({},u,h),p=Sg(this.chart,r,f),y=Cg(r,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,l={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,r,i){const l=this.getCaretPosition(e,r,i);s.lineTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineTo(l.x3,l.y3)}getCaretPosition(e,s,r){const{xAlign:i,yAlign:l}=this,{caretSize:c,cornerRadius:u}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:y}=Hr(u),{x:b,y:j}=e,{width:_,height:v}=s;let w,S,M,A,E,P;return l==="center"?(E=j+v/2,i==="left"?(w=b,S=w-c,A=E+c,P=E-c):(w=b+_,S=w+c,A=E-c,P=E+c),M=w):(i==="left"?S=b+Math.max(h,p)+c:i==="right"?S=b+_-Math.max(f,y)-c:S=this.caretX,l==="top"?(A=j,E=A-c,w=S-c,M=S+c):(A=j+v,E=A+c,w=S+c,M=S-c),P=A),{x1:w,x2:S,x3:M,y1:A,y2:E,y3:P}}drawTitle(e,s,r){const i=this.title,l=i.length;let c,u,h;if(l){const f=Wr(r.rtl,this.x,this.width);for(e.x=Ko(this,r.titleAlign,r),s.textAlign=f.textAlign(r.titleAlign),s.textBaseline="middle",c=Bt(r.titleFont),u=r.titleSpacing,s.fillStyle=r.titleColor,s.font=c.string,h=0;h<l;++h)s.fillText(i[h],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,h+1===l&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,s,r,i,l){const c=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:h,boxWidth:f}=l,p=Bt(l.bodyFont),y=Ko(this,"left",l),b=i.x(y),j=h<p.lineHeight?(p.lineHeight-h)/2:0,_=s.y+j;if(l.usePointStyle){const v={radius:Math.min(f,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},w=i.leftForLtr(b,f)+f/2,S=_+h/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,ju(e,v,w,S),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,ju(e,v,w,S)}else{e.lineWidth=Be(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const v=i.leftForLtr(b,f),w=i.leftForLtr(i.xPlus(b,1),f-2),S=Hr(c.borderRadius);Object.values(S).some(M=>M!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,bl(e,{x:v,y:_,w:f,h,radius:S}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),bl(e,{x:w,y:_+1,w:f-2,h:h-2,radius:S}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(v,_,f,h),e.strokeRect(v,_,f,h),e.fillStyle=c.backgroundColor,e.fillRect(w,_+1,f-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,s,r){const{body:i}=this,{bodySpacing:l,bodyAlign:c,displayColors:u,boxHeight:h,boxWidth:f,boxPadding:p}=r,y=Bt(r.bodyFont);let b=y.lineHeight,j=0;const _=Wr(r.rtl,this.x,this.width),v=function(R){s.fillText(R,_.x(e.x+j),e.y+b/2),e.y+=b+l},w=_.textAlign(c);let S,M,A,E,P,F,B;for(s.textAlign=c,s.textBaseline="middle",s.font=y.string,e.x=Ko(this,w,r),s.fillStyle=r.bodyColor,Ve(this.beforeBody,v),j=u&&w!=="right"?c==="center"?f/2+p:f+2+p:0,E=0,F=i.length;E<F;++E){for(S=i[E],M=this.labelTextColors[E],s.fillStyle=M,Ve(S.before,v),A=S.lines,u&&A.length&&(this._drawColorBox(s,e,E,_,r),b=Math.max(y.lineHeight,h)),P=0,B=A.length;P<B;++P)v(A[P]),b=y.lineHeight;Ve(S.after,v)}j=0,b=y.lineHeight,Ve(this.afterBody,v),e.y-=l}drawFooter(e,s,r){const i=this.footer,l=i.length;let c,u;if(l){const h=Wr(r.rtl,this.x,this.width);for(e.x=Ko(this,r.footerAlign,r),e.y+=r.footerMarginTop,s.textAlign=h.textAlign(r.footerAlign),s.textBaseline="middle",c=Bt(r.footerFont),s.fillStyle=r.footerColor,s.font=c.string,u=0;u<l;++u)s.fillText(i[u],h.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+r.footerSpacing}}drawBackground(e,s,r,i){const{xAlign:l,yAlign:c}=this,{x:u,y:h}=e,{width:f,height:p}=r,{topLeft:y,topRight:b,bottomLeft:j,bottomRight:_}=Hr(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(u+y,h),c==="top"&&this.drawCaret(e,s,r,i),s.lineTo(u+f-b,h),s.quadraticCurveTo(u+f,h,u+f,h+b),c==="center"&&l==="right"&&this.drawCaret(e,s,r,i),s.lineTo(u+f,h+p-_),s.quadraticCurveTo(u+f,h+p,u+f-_,h+p),c==="bottom"&&this.drawCaret(e,s,r,i),s.lineTo(u+j,h+p),s.quadraticCurveTo(u,h+p,u,h+p-j),c==="center"&&l==="left"&&this.drawCaret(e,s,r,i),s.lineTo(u,h+y),s.quadraticCurveTo(u,h,u+y,h),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,r=this.$animations,i=r&&r.x,l=r&&r.y;if(i||l){const c=Za[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=kg(this,e),h=Object.assign({},c,this._size),f=Sg(s,e,h),p=Cg(e,h,f,s);(i._to!==p.x||l._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},l={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const c=xs(s.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&u&&(e.save(),e.globalAlpha=r,this.drawBackground(l,e,i,s),r0(e,s.textDirection),l.y+=c.top,this.drawTitle(l,e,s),this.drawBody(l,e,s),this.drawFooter(l,e,s),a0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const r=this._active,i=e.map(({datasetIndex:u,index:h})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[h],index:h}}),l=!fl(r,i),c=this._positionChanged(i,s);(l||c)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,r=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,l=this._active||[],c=this._getActiveElements(e,l,s,r),u=this._positionChanged(c,e),h=s||!fl(c,l)||u;return h&&(this._active=c,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),h}_getActiveElements(e,s,r,i){const l=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,l.mode,l,r);return l.reverse&&c.reverse(),c}_positionChanged(e,s){const{caretX:r,caretY:i,options:l}=this,c=Za[l.position].call(this,e,s);return c!==!1&&(r!==c.x||i!==c.y)}}var Hk={id:"tooltip",_element:Pg,positioners:Za,afterInit(t,e,s){s&&(t.tooltip=new Pg({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:E0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Wk=(t,e,s,r)=>(typeof e=="string"?(s=t.push(e)-1,r.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function Vk(t,e,s,r){const i=t.indexOf(e);if(i===-1)return Wk(t,e,s,r);const l=t.lastIndexOf(e);return i!==l?s:i}const qk=(t,e)=>t===null?null:Ot(Math.round(t),0,e);function Mg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yk extends sa{static id="category";static defaults={ticks:{callback:Mg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const r=this.getLabels();for(const{index:i,label:l}of s)r[i]===l&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(Ke(e))return null;const r=this.getLabels();return s=isFinite(s)&&r[s]===e?s:Vk(r,e,Ie(s,e),this._addedLabels),qk(s,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),s||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,s=this.max,r=this.options.offset,i=[];let l=this.getLabels();l=e===0&&s===l.length-1?l:l.slice(e,s+1),this._valueRange=Math.max(l.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let c=e;c<=s;c++)i.push({value:c});return i}getLabelForValue(e){return Mg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Kk(t,e){const s=[],{bounds:i,step:l,min:c,max:u,precision:h,count:f,maxTicks:p,maxDigits:y,includeBounds:b}=t,j=l||1,_=p-1,{min:v,max:w}=e,S=!Ke(c),M=!Ke(u),A=!Ke(f),E=(w-v)/(y+1);let P=Pp((w-v)/_/j)*j,F,B,R,C;if(P<1e-14&&!S&&!M)return[{value:v},{value:w}];C=Math.ceil(w/P)-Math.floor(v/P),C>_&&(P=Pp(C*P/_/j)*j),Ke(h)||(F=Math.pow(10,h),P=Math.ceil(P*F)/F),i==="ticks"?(B=Math.floor(v/P)*P,R=Math.ceil(w/P)*P):(B=v,R=w),S&&M&&l&&sN((u-c)/l,P/1e3)?(C=Math.round(Math.min((u-c)/P,p)),P=(u-c)/C,B=c,R=u):A?(B=S?c:B,R=M?u:R,C=f-1,P=(R-B)/C):(C=(R-B)/P,ri(C,Math.round(C),P/1e3)?C=Math.round(C):C=Math.ceil(C));const O=Math.max(Mp(P),Mp(B));F=Math.pow(10,Ke(h)?O:h),B=Math.round(B*F)/F,R=Math.round(R*F)/F;let T=0;for(S&&(b&&B!==c?(s.push({value:c}),B<c&&T++,ri(Math.round((B+T*P)*F)/F,c,Tg(c,E,t))&&T++):B<c&&T++);T<C;++T){const W=Math.round((B+T*P)*F)/F;if(M&&W>u)break;s.push({value:W})}return M&&b&&R!==u?s.length&&ri(s[s.length-1].value,u,Tg(u,E,t))?s[s.length-1].value=u:s.push({value:u}):(!M||R===u)&&s.push({value:R}),s}function Tg(t,e,{horizontal:s,minRotation:r}){const i=nr(r),l=(s?Math.sin(i):Math.cos(i))||.001,c=.75*e*(""+t).length;return Math.min(e/l,c)}class Xk extends sa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ke(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:i,max:l}=this;const c=h=>i=s?i:h,u=h=>l=r?l:h;if(e){const h=Yr(i),f=Yr(l);h<0&&f<0?u(0):h>0&&f>0&&c(0)}if(i===l){let h=l===0?1:Math.abs(l*.05);u(l+h),e||c(i-h)}this.min=i,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},l=this._range||this,c=Kk(i,l);return e.bounds==="ticks"&&nN(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let s=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-s)/Math.max(e.length-1,1)/2;s-=i,r+=i}this._startValue=s,this._endValue=r,this._valueRange=r-s}getLabelForValue(e){return Xx(e,this.chart.options.locale,this.options.ticks.format)}}class Qk extends Xk{static id="linear";static defaults={ticks:{callback:Qx.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=zt(e)?e:0,this.max=zt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,r=nr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,l.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const $l={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jt=Object.keys($l);function Dg(t,e){return t-e}function Rg(t,e){if(Ke(e))return null;const s=t._adapter,{parser:r,round:i,isoWeekday:l}=t._parseOpts;let c=e;return typeof r=="function"&&(c=r(c)),zt(c)||(c=typeof r=="string"?s.parse(c,r):s.parse(c)),c===null?null:(i&&(c=i==="week"&&(mi(l)||l===!0)?s.startOf(c,"isoWeek",l):s.startOf(c,i)),+c)}function Fg(t,e,s,r){const i=Jt.length;for(let l=Jt.indexOf(t);l<i-1;++l){const c=$l[Jt[l]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((s-e)/(u*c.size))<=r)return Jt[l]}return Jt[i-1]}function Gk(t,e,s,r,i){for(let l=Jt.length-1;l>=Jt.indexOf(s);l--){const c=Jt[l];if($l[c].common&&t._adapter.diff(i,r,c)>=e-1)return c}return Jt[s?Jt.indexOf(s):0]}function Jk(t){for(let e=Jt.indexOf(t)+1,s=Jt.length;e<s;++e)if($l[Jt[e]].common)return Jt[e]}function Lg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:r,hi:i}=qu(s,e),l=s[r]>=e?s[r]:s[i];t[l]=!0}}function Zk(t,e,s,r){const i=t._adapter,l=+i.startOf(e[0].value,r),c=e[e.length-1].value;let u,h;for(u=l;u<=c;u=+i.add(u,1,r))h=s[u],h>=0&&(e[h].major=!0);return e}function Ig(t,e,s){const r=[],i={},l=e.length;let c,u;for(c=0;c<l;++c)u=e[c],i[u]=c,r.push({value:u,major:!1});return l===0||!s?r:Zk(t,r,i,s)}class Og extends sa{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const r=e.time||(e.time={}),i=this._adapter=new P_._date(e.adapters.date);i.init(s),ni(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Rg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,r=e.time.unit||"day";let{min:i,max:l,minDefined:c,maxDefined:u}=this.getUserBounds();function h(f){!c&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!u&&!isNaN(f.max)&&(l=Math.max(l,f.max))}(!c||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=zt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),r),l=zt(l)&&!isNaN(l)?l:+s.endOf(Date.now(),r)+1,this.min=Math.min(i,l-1),this.max=Math.max(i+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],r=e[e.length-1]),{min:s,max:r}}buildTicks(){const e=this.options,s=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const l=this.min,c=this.max,u=lN(i,l,c);return this._unit=s.unit||(r.autoSkip?Fg(s.minUnit,this.min,this.max,this._getLabelCapacity(l)):Gk(this,u.length,s.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Jk(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),Ig(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,r=0,i,l;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?r=l:r=(l-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;s=Ot(s,0,c),r=Ot(r,0,c),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,s=this.min,r=this.max,i=this.options,l=i.time,c=l.unit||Fg(l.minUnit,s,r,this._getLabelCapacity(s)),u=Ie(i.ticks.stepSize,1),h=c==="week"?l.isoWeekday:!1,f=mi(h)||h===!0,p={};let y=s,b,j;if(f&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,f?"day":c),e.diff(r,s,c)>1e5*u)throw new Error(s+" and "+r+" are too far apart with stepSize of "+u+" "+c);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(b=y,j=0;b<r;b=+e.add(b,u,c),j++)Lg(p,b,_);return(b===r||i.bounds==="ticks"||j===1)&&Lg(p,b,_),Object.keys(p).sort(Dg).map(v=>+v)}getLabelForValue(e){const s=this._adapter,r=this.options.time;return r.tooltipFormat?s.format(e,r.tooltipFormat):s.format(e,r.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,l=this._unit,c=s||i[l];return this._adapter.format(e,c)}_tickFormatFunction(e,s,r,i){const l=this.options,c=l.ticks.callback;if(c)return Ge(c,[e,s,r],this);const u=l.time.displayFormats,h=this._unit,f=this._majorUnit,p=h&&u[h],y=f&&u[f],b=r[s],j=f&&y&&b&&b.major;return this._adapter.format(e,i||(j?y:p))}generateTickLabels(e){let s,r,i;for(s=0,r=e.length;s<r;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+r)*s.factor)}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,r=this.ctx.measureText(e).width,i=nr(this.isHorizontal()?s.maxRotation:s.minRotation),l=Math.cos(i),c=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:r*l+u*c,h:r*c+u*l}}_getLabelCapacity(e){const s=this.options.time,r=s.displayFormats,i=r[s.unit]||r.millisecond,l=this._tickFormatFunction(e,0,Ig(this,[e],this._majorUnit),i),c=this._getLabelSize(l),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],s,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,r=i.length;s<r;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,r;if(e.length)return e;const i=this.getLabels();for(s=0,r=i.length;s<r;++s)e.push(Rg(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dN(e.sort(Dg))}}function Xo(t,e,s){let r=0,i=t.length-1,l,c,u,h;s?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=rr(t,"pos",e)),{pos:l,time:u}=t[r],{pos:c,time:h}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=rr(t,"time",e)),{time:l,pos:u}=t[r],{time:c,pos:h}=t[i]);const f=c-l;return f?u+(h-u)*(e-l)/f:u}class iC extends Og{static id="timeseries";static defaults=Og.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Xo(s,this.min),this._tableRange=Xo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:r}=this,i=[],l=[];let c,u,h,f,p;for(c=0,u=e.length;c<u;++c)f=e[c],f>=s&&f<=r&&i.push(f);if(i.length<2)return[{time:s,pos:0},{time:r,pos:1}];for(c=0,u=i.length;c<u;++c)p=i[c+1],h=i[c-1],f=i[c],Math.round((p+h)/2)!==f&&l.push({time:f,pos:c/(u-1)});return l}_generate(){const e=this.min,s=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(s)||r.length===1)&&r.push(s),r.sort((i,l)=>i-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),r=this.getLabelTimestamps();return s.length&&r.length?e=this.normalize(s.concat(r)):e=s.length?s:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Xo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return Xo(this._table,r*this._tableRange+this._minPos,!0)}}const P0="label";function Bg(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function eS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function M0(t,e){t.labels=e}function T0(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P0;const r=[];t.datasets=e.map(i=>{const l=t.datasets.find(c=>c[s]===i[s]);return!l||!i.data||r.includes(l)?{...i}:(r.push(l),Object.assign(l,i),l)})}function tS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P0;const s={labels:[],datasets:[]};return M0(s,t.labels),T0(s,t.datasets,e),s}function sS(t,e){const{height:s=150,width:r=300,redraw:i=!1,datasetIdKey:l,type:c,data:u,options:h,plugins:f=[],fallbackContent:p,updateMode:y,...b}=t,j=N.useRef(null),_=N.useRef(null),v=()=>{j.current&&(_.current=new Ol(j.current,{type:c,data:tS(u,l),options:h&&{...h},plugins:f}),Bg(e,_.current))},w=()=>{Bg(e,null),_.current&&(_.current.destroy(),_.current=null)};return N.useEffect(()=>{!i&&_.current&&h&&eS(_.current,h)},[i,h]),N.useEffect(()=>{!i&&_.current&&M0(_.current.config.data,u.labels)},[i,u.labels]),N.useEffect(()=>{!i&&_.current&&u.datasets&&T0(_.current.config.data,u.datasets,l)},[i,u.datasets]),N.useEffect(()=>{_.current&&(i?(w(),setTimeout(v)):_.current.update(y))},[i,h,u.labels,u.datasets,y]),N.useEffect(()=>{_.current&&(w(),setTimeout(v))},[c]),N.useEffect(()=>(v(),()=>w()),[]),Eu.createElement("canvas",{ref:j,role:"img",height:s,width:r,...b},p)}const nS=N.forwardRef(sS);function rS(t,e){return Ol.register(e),N.forwardRef((s,r)=>Eu.createElement(nS,{...s,ref:r,type:t}))}const aS=rS("line",E_),iS="https://65.20.84.140:3004/api".replace("/api","")||"http://localhost:5000";class oS{constructor(){this.baseURL=`${iS}/api/dashboard`}createAxiosInstance(){const e=localStorage.getItem("access_token");return Le.create({baseURL:this.baseURL,headers:{Authorization:e?`Bearer ${e}`:"","Content-Type":"application/json"},timeout:1e4})}async safeApiCall(e,s={}){try{const i=await this.createAxiosInstance().get(e,s);if(i.data.success)return i.data;throw new Error(i.data.message||"API call failed")}catch(r){throw r.response?.status===401?new Error("Please refresh the page to reload your session"):r.response?.status===403?new Error("You don't have permission to view this data"):r.code==="ECONNREFUSED"||r.message.includes("Network Error")?new Error("Unable to connect to server. Please check if the backend is running."):new Error(r.response?.data?.message||"Unable to load dashboard data")}}async getOverview(){return await this.safeApiCall("/overview")}async getTrends(e=30){return await this.safeApiCall(`/trends?days=${e}`)}async getCampaigns(e=10){return await this.safeApiCall(`/campaigns?limit=${e}`)}async getBrands(e=8){return await this.safeApiCall(`/brands?limit=${e}`)}async getRealTimeMetrics(){return await this.safeApiCall("/realtime")}async getSummary(){return await this.safeApiCall("/summary")}async testConnection(){try{const e=await this.createAxiosInstance().get("/summary");return{success:!0,message:"API connection successful"}}catch(e){return e.response?.status===401?{success:!1,message:"Session expired. Please refresh the page."}:e.response?.status===403?{success:!1,message:"Access denied. You may not have permission to view dashboard data."}:e.code==="ECONNREFUSED"||e.message.includes("Network Error")?{success:!1,message:"Cannot connect to server. Please check if the backend is running."}:{success:!1,message:"Unable to connect to dashboard service."}}}async forceGetOverview(){return await this.safeApiCall(`/overview?_t=${Date.now()}`)}async forceGetTrends(e=30){return await this.safeApiCall(`/trends?days=${e}&_t=${Date.now()}`)}async forceGetCampaigns(e=10){return await this.safeApiCall(`/campaigns?limit=${e}&_t=${Date.now()}`)}async forceGetBrands(e=8){return await this.safeApiCall(`/brands?limit=${e}&_t=${Date.now()}`)}}const Ka=new oS;Ol.register(Yk,Qk,tk,Bl,ok,V2,Fk,Hk,Dk,Ck);const lS=()=>{const t=ur(),{user:e}=wi(),[s,r]=N.useState("overview"),[i,l]=N.useState({}),[c,u]=N.useState({overview:!1,trends:!1,campaigns:!1}),[h,f]=N.useState(null),[p,y]=N.useState(null),b=N.useCallback(async A=>{try{u(P=>({...P,[A]:!0})),f(null);let E;switch(A){case"overview":E=await Ka.getOverview();try{const P=await Ka.getRealTimeMetrics();P?.data&&y(P.data)}catch{}break;case"trends":E=await Ka.getTrends();break;case"campaigns":E=await Ka.getCampaigns();break;default:return}E?.data?(l(F=>({...F,[A]:E.data})),Object.values(E.data).some(F=>typeof F=="object"&&Object.values(F).some(B=>B>0)||typeof F=="number"&&F>0)&&zd.success(`${A.charAt(0).toUpperCase()+A.slice(1)} data loaded`)):l(P=>({...P,[A]:{}}))}catch(E){E.message.includes("refresh")||E.message.includes("session")?f("Your session has expired. Please refresh the page to continue."):E.message.includes("permission")?f("You don't have permission to view this data."):f(`Unable to load ${A} data. Please try refreshing the page.`)}finally{u(E=>({...E,[A]:!1}))}},[]);N.useEffect(()=>{const E=setTimeout(async()=>{try{const P=await Ka.testConnection();P.success?await b("overview"):P.message.includes("Session expired")||P.message.includes("refresh")?f("Your session has expired. Please refresh the page to continue."):P.message.includes("Access denied")?f("You don't have permission to view dashboard data. Please contact your administrator."):P.message.includes("server")?f("Unable to connect to the server. Please check if the backend is running."):f("Unable to load dashboard. Please try refreshing the page.")}catch{f("Failed to initialize dashboard. Please refresh the page.")}},1e3);return()=>clearTimeout(E)},[]);const j=N.useCallback(A=>{console.log("Navigating to:",A),t(A)},[t]),_=[{id:"overview",name:"Overview",icon:ei,color:"blue"},{id:"trends",name:"Trends",icon:si,color:"green"},{id:"campaigns",name:"Campaigns",icon:Js,color:"purple"}],v=A=>{console.log(`SafeDashboard: Changing to ${A} tab`),r(A),!i[A]&&!c[A]&&(console.log(`SafeDashboard: Loading data for new tab: ${A}`),b(A))},w=(A,E)=>({responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"bold"}}},title:{display:!0,text:A,font:{size:16,weight:"bold"},padding:20},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#3B82F6",borderWidth:2,cornerRadius:8,padding:12}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{font:{size:11,weight:"500"},color:"#6B7280"}},y:{beginAtZero:!0,display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},title:{display:!0,text:E,font:{size:12,weight:"bold"},color:"#374151"},ticks:{font:{size:11},color:"#6B7280"}}},elements:{point:{radius:6,hoverRadius:8,borderWidth:3,backgroundColor:"#fff"},line:{tension:.4,borderWidth:3}}}),S=(A,E)=>{console.log("Export disabled to prevent loops"),zd.error("Export temporarily disabled")},M=({title:A,value:E,change:P,icon:F,color:B,loading:R})=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 transition-all duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:A}),a.jsxs("div",{className:"flex items-center mt-2",children:[R?a.jsx("div",{className:"animate-pulse bg-gray-200 h-8 w-20 rounded"}):a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:typeof E=="number"&&E>=1e3?E>=1e5?`${(E/1e5).toFixed(1)}L`:`${(E/1e3).toFixed(1)}K`:E?.toLocaleString?.()||E||"0"}),P!==void 0&&!R&&a.jsxs("span",{className:`ml-2 text-sm font-medium ${P>0?"text-green-600":P<0?"text-red-600":"text-gray-600"}`,children:[P>0?"+":"",P,"%"]})]})]}),a.jsx("div",{className:`p-3 rounded-full bg-${B}-100`,children:a.jsx(F,{className:`h-6 w-6 text-${B}-600`})})]})});return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("span",{className:"ml-3 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:e?.username||"User"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${Object.values(c).some(Boolean)?"bg-yellow-400 animate-pulse":"bg-green-400"}`}),a.jsx("span",{className:"text-xs text-gray-500",children:Object.values(c).some(Boolean)?"Loading...":"Ready"})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>{b(s),zd.loading("Refreshing current tab...")},disabled:Object.values(c).some(Boolean),className:"flex items-center space-x-2 px-3 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(_t,{className:`h-4 w-4 ${Object.values(c).some(Boolean)?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})}),a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(_1,{className:"h-4 w-4"}),a.jsx("span",{children:"Export"})]}),a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:a.jsxs("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>S(),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Export Overview (JSON)"}),a.jsx("button",{onClick:()=>S(),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Export Campaigns (CSV)"}),a.jsx("button",{onClick:()=>S(),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Export Brands (JSON)"})]})})]})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:_.map(A=>{const E=A.icon;return a.jsxs("button",{onClick:()=>v(A.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${s===A.id?`border-${A.color}-500 text-${A.color}-600`:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(E,{className:"h-4 w-4"}),a.jsx("span",{children:A.name}),c[A.id]&&a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"})]},A.id)})})})}),h&&a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start space-x-3",children:[a.jsx(fu,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Dashboard Notice"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:h}),h.includes("session")||h.includes("refresh")?a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors",children:"Refresh Page"}):h.includes("permission")?a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Contact your administrator if you believe you should have access to this data."}):a.jsx("button",{onClick:()=>{f(null),b(s)},className:"mt-2 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors",children:"Try Again"})]}),a.jsx("button",{onClick:()=>f(null),className:"text-blue-600 hover:text-blue-800",children:a.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 mb-8",children:[s==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(M,{title:"Total Campaigns",value:i.overview?.campaigns?.total||0,icon:Js,color:"blue",loading:c.overview}),a.jsx(M,{title:"Total Leads",value:i.overview?.performance?.total_leads||0,icon:qr,color:"green",loading:c.overview}),a.jsx(M,{title:"Total Spent",value:`₹${(i.overview?.performance?.total_spent||0).toLocaleString()}`,icon:si,color:"purple",loading:c.overview}),a.jsx(M,{title:"Avg Cost/Lead",value:`₹${(i.overview?.performance?.avg_cost_per_lead||0).toFixed(2)}`,icon:Js,color:"orange",loading:c.overview})]}),!c.overview&&(!i.overview?.campaigns?.total||i.overview.campaigns.total===0)&&!h&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(ei,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to your Dashboard!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any campaigns or reports yet. Get started by creating your first campaign."}),a.jsxs("button",{onClick:()=>j("/campaigns?action=create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Js,{className:"h-4 w-4 mr-2"}),"Create Your First Campaign"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>j("/campaigns?action=create"),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group",children:[a.jsx(Js,{className:"h-8 w-8 text-gray-400 group-hover:text-blue-500 mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:"Create Campaign"})]}),a.jsxs("button",{onClick:()=>j("/reports?action=generate"),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all duration-200 group",children:[a.jsx(ei,{className:"h-8 w-8 text-gray-400 group-hover:text-green-500 mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-green-700",children:"Generate Report"})]}),a.jsxs("button",{onClick:()=>j("/business-manager"),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group",children:[a.jsx(tn,{className:"h-8 w-8 text-gray-400 group-hover:text-purple-500 mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-purple-700",children:"Business Manager"})]}),a.jsxs("button",{onClick:()=>j("/user-management"),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all duration-200 group",children:[a.jsx(qr,{className:"h-8 w-8 text-gray-400 group-hover:text-orange-500 mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-orange-700",children:"Manage Users"})]})]})]})]}),s==="trends"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Performance Trends"}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"})]}),a.jsx("span",{children:"Multiple Metrics"})]})]}),c.trends?a.jsx("div",{className:"animate-pulse bg-gray-200 h-80 rounded-lg"}):i.trends?.chart?a.jsx("div",{className:"h-80 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4",children:a.jsx(aS,{data:{...i.trends.chart,datasets:i.trends.chart.datasets?.map((A,E)=>{const P=[{border:"#3B82F6",bg:"rgba(59, 130, 246, 0.1)",hover:"#1D4ED8"},{border:"#10B981",bg:"rgba(16, 185, 129, 0.1)",hover:"#047857"},{border:"#F59E0B",bg:"rgba(245, 158, 11, 0.1)",hover:"#D97706"},{border:"#EF4444",bg:"rgba(239, 68, 68, 0.1)",hover:"#DC2626"},{border:"#8B5CF6",bg:"rgba(139, 92, 246, 0.1)",hover:"#7C3AED"},{border:"#06B6D4",bg:"rgba(6, 182, 212, 0.1)",hover:"#0891B2"}],F=P[E%P.length];return{...A,borderColor:F.border,backgroundColor:F.bg,pointBackgroundColor:F.border,pointBorderColor:"#ffffff",pointHoverBackgroundColor:F.hover,pointHoverBorderColor:"#ffffff",fill:!0,tension:.4}})||[]},options:w("","Number of Leads")})}):a.jsxs("div",{className:"h-80 flex flex-col items-center justify-center text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(si,{className:"h-16 w-16 text-gray-300 mb-4"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"No trends data available"}),a.jsx("p",{className:"text-sm",children:"Data will appear here once campaigns generate leads"})]})]}),i.trends?.summary&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Trends Summary"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.trends.summary.total_leads}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Leads (30d)"})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",i.trends.summary.total_spent.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent (30d)"})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",i.trends.summary.avg_cost_per_lead]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Cost/Lead"})]})]})]})]}),s==="campaigns"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Performing Campaigns"}),a.jsxs("button",{onClick:()=>j("/campaigns"),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:[a.jsx("span",{children:"View All"}),a.jsx(Mx,{className:"h-4 w-4"})]})]}),c.campaigns?a.jsx("div",{className:"space-y-3",children:[...Array(5)].map((A,E)=>a.jsxs("div",{className:"animate-pulse flex items-center justify-between p-4 bg-gray-100 rounded-lg",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),a.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/3"})]}),a.jsx("div",{className:"h-4 bg-gray-300 rounded w-16"})]},E))}):i.campaigns?.campaigns?.length>0?a.jsx("div",{className:"space-y-3",children:i.campaigns.campaigns.map((A,E)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:A.campaign_name}),a.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:A.brand})]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[A.total_leads," leads • ₹",A.total_spent.toLocaleString()," spent"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",A.avg_cost_per_lead.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:"cost/lead"}),A.performance_score&&a.jsx("div",{className:"mt-1",children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-8 bg-gray-200 rounded-full h-1",children:a.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${Math.min(A.performance_score,100)}%`}})}),a.jsxs("span",{className:"text-xs text-gray-500",children:[A.performance_score,"/100"]})]})})]})]},A.campaign_id||E))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No campaigns data available"})]})})]})]})},Xa={getAllRoles:async()=>{try{return(await fe.get("/permissions/roles-list")).data}catch(t){throw console.error("Error fetching roles:",t),t}},getAllRolesWithPermissions:async()=>{try{const t=await fe.get("/permissions/roles-list"),e=t.data.data||t.data,s=await Promise.all(e.map(async r=>{try{const i=await fe.get(`/permissions/role/${r.id}/permissions`),l=i.data.data||i.data.permissions||[];return{...r,permissions:l}}catch(i){return console.error(`Error fetching permissions for role ${r.id}:`,i),{...r,permissions:[]}}}));return{...t.data,data:s}}catch(t){throw console.error("Error fetching roles with permissions:",t),t}},getAllModules:async()=>{try{return(await fe.get("/permissions/modules")).data}catch(t){throw console.error("Error fetching modules:",t),t}},getModulesWithPermissions:async()=>{try{return(await fe.get("/permissions/modules-with-permissions")).data}catch(t){throw console.error("Error fetching modules with permissions:",t),t}},getAllPermissions:async()=>{try{return(await fe.get("/permissions")).data}catch(t){throw console.error("Error fetching permissions:",t),t}},getRolePermissions:async t=>{try{return(await fe.get(`/permissions/role/${t}/permissions`)).data}catch(e){throw console.error("Error fetching role permissions:",e),e}},getUserRoles:async t=>{try{return(await fe.get(`/permissions/user/${t}/roles`)).data}catch(e){throw console.error("Error fetching user roles:",e),e}},getUserPermissions:async t=>{try{return(await fe.get(`/permissions/user/${t}`)).data}catch(e){throw console.error("Error fetching user permissions:",e),e}},checkUserPermission:async(t,e)=>{try{return(await fe.post("/permissions/check",{user_id:t,permission_key:e})).data}catch(s){throw console.error("Error checking user permission:",s),s}},createRole:async t=>{try{return(await fe.post("/permissions/role",t)).data}catch(e){throw console.error("Error creating role:",e),e}},createRoleWithPermissions:async(t,e,s=[])=>{try{const r=await fe.post("/permissions/role",{name:t,description:e}),i=r.data.data?.id||r.data.data?.roleId;return s.length>0&&i&&await fe.post("/permissions/role/assign",{roleId:i,permissions:s}),r.data}catch(r){throw console.error("Error creating role with permissions:",r),r}},assignPermissionsToRole:async(t,e)=>{try{return(await fe.post("/permissions/role/assign",{roleId:t,permissions:e})).data}catch(s){throw console.error("Error assigning permissions to role:",s),s}},updateRole:async(t,e)=>{try{const s={role_name:e.name,description:e.description,is_active:e.is_active!==void 0?e.is_active:!0};return(await fe.put(`/permissions/roles/${t}`,s)).data}catch(s){throw console.error("Error updating role:",s),s}},updateRoleWithPermissions:async(t,e,s,r=[])=>{try{const i=await fe.put(`/permissions/roles/${t}`,{role_name:e,description:s});return r.length>=0&&await fe.post("/permissions/role/assign",{roleId:t,permissions:r}),i.data}catch(i){throw console.error("Error updating role with permissions:",i),i}},deleteRole:async t=>{try{return(await fe.delete(`/permissions/role/${t}`)).data}catch(e){throw console.error("Error deleting role:",e),e}},assignPermissionToRole:async(t,e)=>{try{return(await fe.post("/permissions/grant-role-permission",{role_id:t,permission_id:e})).data}catch(s){throw console.error("Error assigning permission to role:",s),s}},revokePermissionFromRole:async(t,e)=>{try{return(await fe.delete("/permissions/revoke-role-permission",{data:{role_id:t,permission_id:e}})).data}catch(s){throw console.error("Error revoking permission from role:",s),s}},assignUserToRole:async(t,e)=>{try{return(await fe.post("/permissions/assign-role",{user_id:t,role_id:e})).data}catch(s){throw console.error("Error assigning user to role:",s),s}},removeUserFromRole:async(t,e)=>{try{return(await fe.delete("/permissions/revoke-role",{data:{user_id:t,role_id:e}})).data}catch(s){throw console.error("Error removing user from role:",s),s}},getAuditLogs:async(t={})=>{try{return(await fe.get("/permissions/audit",{params:t})).data}catch(e){throw console.error("Error fetching audit logs:",e),e}}},cS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState([]),[i,l]=N.useState(!0),[c,u]=N.useState(null),[h,f]=N.useState(!1),[p,y]=N.useState(!1),[b,j]=N.useState(null),[_,v]=N.useState(""),[w,S]=N.useState(""),[M,A]=N.useState({}),[E,P]=N.useState(""),[F,B]=N.useState(""),[R,C]=N.useState({}),[O,T]=N.useState(""),[W,ee]=N.useState(""),[ae,ge]=N.useState(null),Y=N.useCallback(X=>{const be=["User Management","Role Management","Brand","Campaign Types","Campaigns","Campaign Data","Cards Account","Cards","Card Users","Report Analytics","Reports","Facebook Accounts","Facebook Pages","Business Manager","Ads Manager"],Ae=Fe=>({users:"User Management","user management":"User Management",campaigns:"Campaigns",campaign:"Campaigns",campaign_data:"Campaign Data","campaign-data":"Campaign Data",campaign_types:"Campaign Types","campaign-types":"Campaign Types","campaign types":"Campaign Types",brand:"Brand",brands:"Brand",cards:"Cards",accounts:"Cards Account",account:"Cards Account","cards account":"Cards Account",card_users:"Card Users","card-users":"Card Users","card users":"Card Users","cards users":"Card Users",reports:"Reports",report:"Reports","report analytics":"Report Analytics",analytics:"Report Analytics",permissions:"Role Management","role management":"Role Management",system:"Role Management","facebook accounts":"Facebook Accounts",facebook_accounts:"Facebook Accounts","facebook pages":"Facebook Pages",facebook_pages:"Facebook Pages","business manager":"Business Manager",business_manager:"Business Manager","ads manager":"Ads Manager",ads_manager:"Ads Manager","ads managers":"Ads Manager",ads_managers:"Ads Manager"})[Fe.toLowerCase()]||Fe,ke=Fe=>{const we=Ae(Fe),De=be.indexOf(we);return De!==-1?De:999};return X.sort((Fe,we)=>{const De=ke(Fe.name),rt=ke(we.name);return De!==rt?De-rt:(Fe.name||"").localeCompare(we.name||"")})},[]),re=N.useMemo(()=>Y(s.filter(X=>X.name&&X.name.toLowerCase()!=="system")),[s,Y]),V=N.useCallback(async(X=!1)=>{try{l(!0),u(null),T("");const be=X?`?_t=${Date.now()}`:"",[Ae,ke]=await Promise.all([Xa.getAllRolesWithPermissions(be),Xa.getModulesWithPermissions(be)]),we=(Ae.data||Ae).map(De=>({...De,id:De.id||De.role_id,name:String(De.name||De.role_name||"").trim(),role_name:String(De.role_name||De.name||"").trim(),is_system_role:De.is_system_role===1||De.is_system_role===!0}));e(we),r(ke.data||ke),X&&(ee("Data refreshed successfully!"),console.log("🔄 Data force refreshed at",new Date().toLocaleTimeString()),console.log("📦 Loaded modules:",ke.data?.length||0))}catch(be){console.error("Error loading data:",be);const Ae=be.response?.data?.message||be.message||"Failed to load data";u(Ae),T(Ae)}finally{l(!1)}},[]);N.useEffect(()=>{V()},[V]);const te=N.useCallback(X=>{const be=String(X.name||X.role_name||"");P(be),B(X.description||"");const Ae={};X.permissions&&X.permissions.length>0&&X.permissions.forEach(ke=>{const Fe=ke.permission_key||ke.key;s.forEach(we=>{if(we.permissions&&we.permissions.length>0){const De=we.permissions.find(rt=>rt.key===Fe);De&&(Ae[we.id]||(Ae[we.id]=[]),Ae[we.id].includes(De.key)||Ae[we.id].push(De.key))}})}),C(Ae)},[s]);N.useEffect(()=>{b&&s.length>0&&p&&te(b)},[s,b,p,te]);const se=N.useCallback(X=>{const be=[];return!X||!X.trim()?be.push("Role name is required"):((X.trim().length<3||X.trim().length>50)&&be.push("Role name must be between 3 and 50 characters"),/^[a-zA-Z0-9\s\-_]+$/.test(X.trim())||be.push("Role name can only contain letters, numbers, spaces, hyphens, and underscores")),be},[]),L=N.useCallback(X=>X&&X.trim().length>255?["Description cannot exceed 255 characters"]:[],[]),H=N.useCallback(X=>{console.error("RBAC Error:",X),f(!1),y(!1),j(null),v(""),S(""),A({}),P(""),B(""),C({});const be=X.response?.data;ge({message:be?.message||X.message,details:be?.details,userRole:be?.details?.userRole,requiredPermission:be?.details?.requiredPermission,availableActions:be?.details?.availableActions,suggestion:be?.details?.suggestion}),T(be?.message||X.message)},[]);N.useEffect(()=>{if(ae){const X=setTimeout(()=>ge(null),12e3);return()=>clearTimeout(X)}},[ae]),N.useEffect(()=>{if(W){const X=setTimeout(()=>ee(""),5e3);return()=>clearTimeout(X)}},[W]),N.useEffect(()=>{if(O){const X=setTimeout(()=>T(""),8e3);return()=>clearTimeout(X)}},[O]);const U=N.useCallback(async()=>{try{T(""),ee("");const X=se(_),be=L(w),Ae=[...X,...be];if(Ae.length>0){T(Ae.join(". "));return}const ke=[];Object.entries(M).forEach(([Fe,we])=>{we.forEach(De=>{ke.push(De)})}),await Xa.createRoleWithPermissions(_.trim(),w.trim(),ke),v(""),S(""),A({}),f(!1),await V(),ee("Role created successfully!")}catch(X){console.error("Error creating role:",X),X.response?.status===403?H(X):X.response?.status===409?T("A role with this name already exists. Please choose a different name."):X.response?.status===400?T("Invalid role data. Please check your inputs."):T(`Error creating role: ${X.response?.data?.message||X.message}`)}},[_,w,M,se,L,V,H]),G=N.useCallback(async()=>{try{T(""),ee("");const X=se(E),be=L(F),Ae=[...X,...be];if(Ae.length>0){T(Ae.join(". "));return}const ke=[];Object.entries(R).forEach(([Fe,we])=>{we.forEach(De=>{ke.push(De)})}),await Xa.updateRoleWithPermissions(b.id,E.trim(),F.trim(),ke),P(""),B(""),C({}),y(!1),j(null),await V(),ee("Role updated successfully!")}catch(X){if(console.error("Error updating role:",X),X.response?.status===403){const be=X.response?.data;be?.details?.requiredPermission||be?.message?.includes("permission")?H(X):T("Cannot update this role: It is a system role.")}else X.response?.status===409?T("A role with this name already exists. Please choose a different name."):X.response?.status===400?T("Invalid role data. Please check your inputs."):T(`Error updating role: ${X.response?.data?.message||X.message}`)}},[E,F,R,b,se,L,V,H]),z=N.useCallback(async(X,be,Ae)=>{if(Ae){T(`Cannot delete "${be}" because it is a system role.`);return}if(window.confirm(`Are you sure you want to delete the role "${be}"?`))try{T(""),await Xa.deleteRole(X),await V(),ee("Role deleted successfully!")}catch(ke){if(console.error("Error deleting role:",ke),ke.response?.status===403){const Fe=ke.response?.data;Fe?.details?.requiredPermission||Fe?.message?.includes("permission")?H(ke):T("Cannot delete this role: It is a system role or has restrictions.")}else ke.response?.status===400?T("Cannot delete this role: It may be assigned to active users."):T(`Error deleting role: ${ke.response?.data?.message||ke.message}`)}},[V,H]),Z=N.useCallback((X,be,Ae)=>{A(ke=>{const Fe=ke[X]||[];return Ae?{...ke,[X]:[...Fe,be]}:{...ke,[X]:Fe.filter(we=>we!==be)}})},[]),ie=N.useCallback((X,be,Ae)=>{A(ke=>Ae?{...ke,[X]:be.map(Fe=>Fe.key)}:{...ke,[X]:[]})},[]),xe=N.useCallback((X,be,Ae)=>{C(ke=>{const Fe=ke[X]||[];return Ae?{...ke,[X]:[...Fe,be]}:{...ke,[X]:Fe.filter(we=>we!==be)}})},[]),ze=N.useCallback((X,be,Ae)=>{C(ke=>Ae?{...ke,[X]:be.map(Fe=>Fe.key)}:{...ke,[X]:[]})},[]),st=N.useCallback(X=>!X||X.length===0?"No permissions assigned":X.map(be=>be.permission_name||be.name||be).join(", "),[]),Et=N.useCallback(()=>{f(!1),v(""),S(""),A({}),T("")},[]),is=N.useCallback(()=>{y(!1),j(null),P(""),B(""),C({}),T("")},[]),ft=N.useCallback(X=>{X.key==="Escape"&&(h?Et():p&&is())},[h,p,Et,is]);return N.useEffect(()=>{if(h||p)return document.addEventListener("keydown",ft),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",ft),document.body.style.overflow="unset"}},[h,p,ft]),i?a.jsx("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),"Loading role management interface..."]})}):c?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:a.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",c]})}),a.jsx("button",{className:"btn-primary",onClick:V,children:"Retry"})]}):a.jsxs("div",{className:"p-6",children:[ae&&a.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.94-.833-2.31 0L4.504 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-red-700 font-medium text-base mb-3",children:ae.message}),ae.details&&a.jsxs("div",{className:"bg-red-50 rounded-md p-4 border border-red-200 space-y-2",children:[ae.userRole&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Current Role:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ae.userRole})]}),ae.requiredPermission&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Required Permission:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ae.requiredPermission})]}),ae.suggestion&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Suggestion:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ae.suggestion})]}),ae.availableActions&&ae.availableActions.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Available Actions:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ae.availableActions.join(", ")})]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{className:"text-red-400 hover:text-red-600 transition-colors",onClick:()=>ge(null),"aria-label":"Dismiss error message",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),W&&a.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:a.jsx("p",{className:"text-green-600",children:W})}),O&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("p",{className:"text-red-600",children:O})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage user roles and permissions for all system modules"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:()=>V(!0),disabled:i,"aria-label":"Refresh data",title:"Refresh modules and permissions data",children:[a.jsx("svg",{className:`w-4 h-4 ${i?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Refresh"})]}),a.jsx("button",{className:"btn-primary",onClick:()=>f(!0),"aria-label":"Create new role",children:"Create Role"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No roles found"})}):t.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 role-name-display",children:X.name}),X.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:X.description||"No description"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.jsx("div",{className:"max-w-xs truncate",children:st(X.permissions)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>{j(X),y(!0)},"aria-label":`Edit role ${X.name}`,children:"Edit"}),a.jsx("button",{className:`text-xs px-3 py-1 ${X.is_system_role?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-danger"}`,onClick:()=>z(X.id,X.name,X.is_system_role),disabled:X.is_system_role,title:X.is_system_role?"System roles cannot be deleted":"Delete this role","aria-label":`Delete role ${X.name}`,children:"Delete"})]})]},X.id))})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[a.jsxs("div",{children:[a.jsx("h3",{id:"create-modal-title",className:"text-xl font-bold text-gray-900",children:"Create New Role"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions and access levels"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all",onClick:Et,"aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsx("div",{className:"w-80 border-r border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"new-role-name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:_,onChange:X=>v(X.target.value),placeholder:"Enter role name",maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"new-role-description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:w,onChange:X=>S(X.target.value),placeholder:"Enter role description",rows:"4",maxLength:255})]}),a.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Permission Summary"}),a.jsx("div",{className:"space-y-2",children:re.map(X=>{const be=M[X.id]||[],Ae=X.permissions?X.permissions.length:0;return a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:X.name}),a.jsxs("span",{className:`font-medium ${be.length>0?"text-blue-600":"text-gray-400"}`,children:[be.length,"/",Ae]})]},X.id)})})]})]})}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Module Permissions"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the permissions for each module"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-6",children:re.map(X=>{const be=M[X.id]||[],Ae=X.permissions?X.permissions.map(we=>we.key):[],ke=Ae.length>0&&Ae.every(we=>be.includes(we)),Fe=X.permissions?[...X.permissions].sort((we,De)=>{const rt=ne=>{const oe=ne.name.toLowerCase(),me=ne.key.toLowerCase();return oe.includes("view")||oe.includes("get")||oe.includes("read")||me.includes("view")||me.includes("get")?1:oe.includes("add")||oe.includes("create")||me.includes("add")||me.includes("create")?2:oe.includes("update")||oe.includes("edit")||oe.includes("modify")||me.includes("update")||me.includes("edit")?3:oe.includes("delete")||oe.includes("remove")||me.includes("delete")||me.includes("remove")?4:5};return rt(we)-rt(De)}):[];return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50 rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${be.length>0?"bg-blue-500":"bg-gray-300"}`}),a.jsx("h5",{className:"font-semibold text-gray-900",children:X.name}),a.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[be.length,"/",Ae.length]})]}),a.jsx("button",{type:"button",className:`text-xs px-4 py-2 rounded-full border transition-all font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>ie(X.id,X.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${X.name}`,children:ke?"Deselect All":"Select All"})]}),a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Fe.map(we=>a.jsxs("label",{className:"flex items-start space-x-3 p-3 hover:bg-blue-50 rounded-lg border border-transparent hover:border-blue-200 transition-all cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors",checked:M[X.id]?.includes(we.key)||!1,onChange:De=>Z(X.id,we.key,De.target.checked),"aria-describedby":we.description?`${X.id}-${we.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-900",children:we.name}),we.description&&a.jsx("p",{id:`${X.id}-${we.key}-desc`,className:"text-xs text-gray-500 mt-1",children:we.description})]})]},`${X.id}-${we.key}`))})})]},X.id)})})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50 space-x-3",children:[a.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:Et,children:"Cancel"}),a.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:U,disabled:!_.trim(),children:"Create Role"})]})]})}),p&&b&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-modal-title",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{id:"edit-modal-title",className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",b.name]}),b.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System Role"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",onClick:is,"aria-label":"Close modal",children:"×"})]}),a.jsxs("div",{className:"p-6",children:[b.is_system_role&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",role:"alert",children:a.jsxs("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"System Role:"})," This role cannot be modified as it is required for system functionality. You can view the role details but cannot make changes."]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"edit-role-name",type:"text",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:E,onChange:X=>P(X.target.value),placeholder:"Enter role name",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"edit-role-description",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:F,onChange:X=>B(X.target.value),placeholder:"Enter role description",rows:"3",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:255})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),a.jsx("div",{className:"h-96 overflow-y-auto border border-gray-200 rounded-md p-4 bg-gray-50",children:re.map(X=>{const be=R[X.id]||[],Ae=X.permissions?X.permissions.map(we=>we.key):[],ke=Ae.length>0&&Ae.every(we=>be.includes(we)),Fe=X.permissions?[...X.permissions].sort((we,De)=>{const rt=ne=>{const oe=ne.name.toLowerCase(),me=ne.key.toLowerCase();return oe.includes("view")||oe.includes("get")||oe.includes("read")||me.includes("view")||me.includes("get")?1:oe.includes("add")||oe.includes("create")||me.includes("add")||me.includes("create")?2:oe.includes("update")||oe.includes("edit")||oe.includes("modify")||me.includes("update")||me.includes("edit")?3:oe.includes("delete")||oe.includes("remove")||me.includes("delete")||me.includes("remove")?4:5};return rt(we)-rt(De)}):[];return a.jsxs("div",{className:`mb-6 last:mb-0 bg-white rounded-lg border border-gray-200 p-4 ${b.is_system_role?"opacity-75":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:X.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[be.length," of ",Ae.length," selected"]}),!b.is_system_role&&a.jsx("button",{type:"button",className:`text-xs px-3 py-1 rounded border transition-colors font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100"}`,onClick:()=>ze(X.id,X.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${X.name}`,children:ke?"Deselect All":"Select All"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Fe.map(we=>a.jsxs("label",{className:`flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-md border border-transparent hover:border-gray-200 transition-colors ${b.is_system_role?"cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:R[X.id]?.includes(we.key)||!1,onChange:De=>xe(X.id,we.key,De.target.checked),disabled:b.is_system_role,"aria-describedby":we.description?`edit-${X.id}-${we.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:we.name}),we.description&&a.jsx("p",{id:`edit-${X.id}-${we.key}-desc`,className:"text-xs text-gray-500 mt-1",children:we.description})]})]},`edit-${X.id}-${we.key}`))})]},X.id)})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-4 border-t space-x-2",children:[a.jsx("button",{className:"btn-secondary px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:is,children:"Cancel"}),!b.is_system_role&&a.jsx("button",{className:"btn-primary px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:G,disabled:!E.trim(),children:"Update Role"})]})]})})]})},dS=()=>a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ni,{className:"h-8 w-8 text-primary-500 mr-3"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role & Permission Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage roles, permissions, and user access"})]})]})})}),a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:a.jsx(cS,{})})]}),Qo={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([r,i])=>i!=null&&i!=="").reduce((r,[i,l])=>({...r,[i]:l}),{});console.log("API getAll params:",e);const s=await fe.get("/campaign-types",{params:e});return console.log("API getAll response:",s.data),s.data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await fe.get(`/campaign-types/${t}`);return console.log("API getById response:",e.data),e.data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("API create data:",t);const e=await fe.post("/campaign-types",t);return console.log("API create response:",e.data),e.data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("API update id:",t,"data:",e);const s=await fe.put(`/campaign-types/${t}`,e);return console.log("API update response:",s.data),s.data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("API delete id:",t);const e=await fe.delete(`/campaign-types/${t}`);return console.log("API delete response:",e.data),e.data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}}},Ul=({error:t,onDismiss:e,className:s="",dismissible:r=!0,variant:i="error"})=>{if(!t)return null;const c={error:{container:"bg-red-50 border-red-200",icon:"text-red-400",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-400",title:"text-amber-800",text:"text-amber-700"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",title:"text-blue-800",text:"text-blue-700"}}[i];let u="",h=i==="error"?"Error":i==="warning"?"Warning":"Information";return typeof t=="string"?u=t:t?.message?u=t.message:t?.response?.data?.message?u=t.response.data.message:u="An unexpected error occurred",(u.toLowerCase().includes("permission denied")||u.toLowerCase().includes("access denied")||u.toLowerCase().includes("unauthorized")||u.toLowerCase().includes("forbidden"))&&(h="Access Denied"),a.jsx("div",{className:`rounded-md border p-4 ${c.container} ${s}`,role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Oe,{className:`h-5 w-5 ${c.icon}`,"aria-hidden":"true"})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:`text-sm font-medium ${c.title}`,children:h}),a.jsx("div",{className:`mt-1 text-sm ${c.text}`,children:u})]}),r&&e&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:a.jsx("button",{onClick:e,className:`inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600 ${c.icon} hover:bg-red-100`,"aria-label":"Dismiss error",children:a.jsx(lt,{className:"h-4 w-4"})})})})]})})},uS=({isOpen:t,onClose:e,onSubmit:s,editData:r=null,isLoading:i=!1})=>{const[l,c]=N.useState({type_name:"",description:"",is_active:!0}),[u,h]=N.useState({}),[f,p]=N.useState("");N.useEffect(()=>{c(r?{type_name:r.type_name||"",description:r.description||"",is_active:r.is_active!==void 0?r.is_active===1||r.is_active===!0:!0}:{type_name:"",description:"",is_active:!0}),h({}),p("")},[r,t]);const y=()=>{const _={};return l.type_name.trim()?l.type_name.length>100&&(_.type_name="Campaign type name must be less than 100 characters"):_.type_name="Campaign type name is required",l.description&&l.description.length>1e3&&(_.description="Description must be less than 1000 characters"),h(_),Object.keys(_).length===0},b=_=>{const{name:v,value:w,type:S,checked:M}=_.target;c(A=>({...A,[v]:S==="checkbox"?M:w})),u[v]&&h(A=>({...A,[v]:""}))},j=async _=>{if(_.preventDefault(),!!y())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r?"Edit Campaign Type":"Create Campaign Type"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"h-6 w-6"})})]}),f&&a.jsx(Ul,{error:f,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Campaign Type Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"type_name",name:"type_name",value:l.type_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.type_name?"border-red-500":""}`,placeholder:"Enter campaign type name",maxLength:100,disabled:i}),u.type_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.type_name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":r?"Update":"Create"})]})]})]})}):null},hS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,f]=N.useState("all"),[p,y]=N.useState("created_at"),[b,j]=N.useState("desc"),[_,v]=N.useState(1),[w]=N.useState(10),[S,M]=N.useState(null),[A,E]=N.useState(!1),[P,F]=N.useState(null),[B,R]=N.useState(!1),[C,O]=N.useState(!1),[T,W]=N.useState(null),[ee,ae]=N.useState(!1),[ge,Y]=N.useState(null),re=async()=>{try{r(!0),l(null);const ie={search:c||void 0,status:h==="all"?void 0:h,page:_,limit:w},xe=await Qo.getAll(ie);xe.success?(e(xe.data||[]),M(xe.meta||null)):l(xe.message||"Failed to fetch campaign types")}catch(ie){l(ie.response?.data?.message||"Failed to fetch campaign types"),console.error("Error fetching campaign types:",ie)}finally{r(!1)}};N.useEffect(()=>{re()},[c,h,p,b,_]),N.useEffect(()=>{if(i){const ie=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(ie)}},[i]);const V=async ie=>{try{R(!0),l(null),console.log("Submitting form data:",ie),console.log("Editing item:",P);let xe;if(P?(console.log("Updating campaign type with ID:",P.id),xe=await Qo.update(P.id,ie)):(console.log("Creating new campaign type"),xe=await Qo.create(ie)),console.log("API Response:",xe),xe.success||xe.data)return E(!1),F(null),re(),console.log(P?"Campaign type updated successfully":"Campaign type created successfully"),{success:!0};throw new Error(xe.message||"Operation failed")}catch(xe){throw console.error("Form submission error:",xe),console.error("Error response data:",xe.response?.data),console.error("Error status:",xe.response?.status),xe}finally{R(!1)}},te=async ie=>{try{ae(!0),Y(null);const xe=await Qo.delete(ie);if(xe.success)O(!1),W(null),Y(null),re(),console.log("Campaign type deleted successfully");else throw new Error(xe.message||"Delete failed")}catch(xe){console.error("Delete error:",xe),Y(xe.response?.data?.message||xe.message||"Delete failed")}finally{ae(!1)}},se=ie=>{u(ie.target.value),v(1)},L=ie=>{f(ie),v(1)},H=ie=>{p===ie?j(b==="asc"?"desc":"asc"):(y(ie),j("asc")),v(1)},U=ie=>{F(ie),E(!0)},G=()=>{F(null),E(!0)},z=ie=>{W(ie),O(!0)},Z=ie=>ie?cr(ie):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Types"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campaign types"})]}),a.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search campaign types...",value:c,onChange:se,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:ie=>L(ie.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:re,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),S&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-blue-700",children:[a.jsxs("span",{children:["Showing ",t.length," of ",S.pagination.totalCount," campaign types"]}),a.jsxs("span",{children:["Page ",S.pagination.currentPage," of ",S.pagination.totalPages]})]})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(lt,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_t,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading campaign types..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ze,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaign types found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first campaign type."}),a.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("type_name"),children:["Name",p==="type_name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(ie=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ie.type_name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:ie.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ie.is_active===1||ie.is_active===!0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ie.is_active===1||ie.is_active===!0?a.jsxs(a.Fragment,{children:[a.jsx(Pl,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ou,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Z(ie.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>U(ie),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(sn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>z(ie),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(gs,{className:"h-4 w-4"})})]})})]},ie.id))})]})}),S&&S.pagination.totalPages>1&&a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4 rounded-b-lg",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>v(Math.max(1,_-1)),disabled:!S.pagination.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(S.pagination.totalPages,_+1)),disabled:!S.pagination.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",a.jsx("span",{className:"font-medium",children:_})," of"," ",a.jsx("span",{className:"font-medium",children:S.pagination.totalPages})]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>v(Math.max(1,_-1)),disabled:!S.pagination.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(S.pagination.totalPages,_+1)),disabled:!S.pagination.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]}),a.jsx(uS,{isOpen:A,onClose:()=>{E(!1),F(null),l(null)},onSubmit:V,editData:P,isLoading:B}),C&&T&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Oe,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Campaign Type"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',T.type_name,'"? This action cannot be undone.']}),ge&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:ge})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{O(!1),W(null),Y(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:ee,children:"Cancel"}),a.jsx("button",{onClick:()=>te(T.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:ee,children:ee?"Deleting...":"Delete"})]})]})})})]})},en={getCampaigns:async(t={})=>(await fe.get("/campaigns",{params:t})).data,getCampaign:async t=>(await fe.get(`/campaigns/${t}`)).data,createCampaign:async t=>(await fe.post("/campaigns",t)).data,updateCampaign:async(t,e)=>(await fe.put(`/campaigns/${t}`,e)).data,deleteCampaign:async t=>(await fe.delete(`/campaigns/${t}`)).data,toggleCampaignStatus:async t=>(await fe.put(`/campaigns/${t}/toggle-status`)).data,toggleCampaignEnabled:async t=>(await fe.put(`/campaigns/${t}/toggle-enabled`)).data,activateCampaign:async t=>(await fe.put(`/campaigns/${t}/activate`)).data,deactivateCampaign:async t=>(await fe.put(`/campaigns/${t}/deactivate`)).data,getCampaignStats:async()=>(await fe.get("/campaigns/stats")).data,getCampaignsByBrand:async(t,e={})=>(await fe.get(`/campaigns/by-brand/${t}`,{params:e})).data,getCampaignTypes:async()=>(await fe.get("/campaign-types")).data,getBrands:async()=>(await fe.get("/brands/active")).data},mS=({campaign:t=null,isOpen:e,onClose:s,onSave:r})=>{const[i,l]=N.useState({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""}),[c,u]=N.useState(""),[h,f]=N.useState(""),[p,y]=N.useState([]),[b,j]=N.useState([]),[_,v]=N.useState(!1),[w,S]=N.useState(""),[M,A]=N.useState({}),E=[{value:"video",label:"Video"},{value:"image",label:"Image"},{value:"carousel",label:"Carousel"},{value:"collection",label:"Collection"}],P=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}];N.useEffect(()=>{if(e){if(R(),t){console.log("🔧 Initializing form with campaign data:",t);const Y=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Extracted brand ID:",Y,"from brand:",t.brand),l({name:t.name||"",persona:F(t.persona),gender:F(t.gender),min_age:t.min_age?t.min_age.toString():"",max_age:t.max_age?t.max_age.toString():"",location:F(t.location),creatives:t.creatives||"image",is_enabled:t.is_enabled!==void 0?!!t.is_enabled:!0,campaign_type_id:t.campaign_type_id||"",brand:Y})}else l({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""});B(),S(""),A({})}},[e,t]),N.useEffect(()=>{if(t&&b.length>0){const Y=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Re-setting brand after brands loaded. Brand ID:",Y,"Available brands:",b.length),l(re=>({...re,brand:Y}))}},[t,b]);const F=Y=>{if(!Y)return[];if(Array.isArray(Y))return Y;try{const re=JSON.parse(Y);return Array.isArray(re)?re:[]}catch{return[]}},B=()=>{u(""),f("")},R=async()=>{try{const Y=await en.getCampaignTypes();Y.success&&y(Y.data||[]);const re=await en.getBrands();re.success&&(console.log("🏢 Loaded brands:",re.data),j(re.data||[]))}catch(Y){console.error("Error loading dropdown data:",Y)}},C=Y=>{const{name:re,value:V,type:te,checked:se}=Y.target;l(L=>({...L,[re]:te==="checkbox"?se:V})),M[re]&&A(L=>({...L,[re]:null}))},O=(Y,re,V)=>{const te=re.trim();te&&!i[Y].includes(te)&&(l(se=>({...se,[Y]:[...se[Y],te]})),V(""))},T=(Y,re)=>{l(V=>({...V,[Y]:V[Y].filter((te,se)=>se!==re)}))},W=(Y,re,V,te)=>{Y.key==="Enter"&&V.trim()&&(Y.preventDefault(),O(re,V,te))},ee=(Y,re)=>{l(V=>({...V,gender:re?[...V.gender,Y]:V.gender.filter(te=>te!==Y)}))},ae=()=>{const Y={};return i.name.trim()||(Y.name="Campaign name is required"),i.campaign_type_id||(Y.campaign_type_id="Campaign type is required"),i.brand||(Y.brand="Brand is required"),i.persona.length===0&&(Y.persona="At least one persona is required"),i.gender.length===0&&(Y.gender="At least one gender is required"),i.location.length===0&&(Y.location="At least one location is required"),i.creatives||(Y.creatives="Creative type is required"),i.min_age?(isNaN(i.min_age)||parseInt(i.min_age)<0||parseInt(i.min_age)>100)&&(Y.min_age="Minimum age must be a number between 0 and 100"):Y.min_age="Minimum age is required",i.max_age?(isNaN(i.max_age)||parseInt(i.max_age)<0||parseInt(i.max_age)>100)&&(Y.max_age="Maximum age must be a number between 0 and 100"):Y.max_age="Maximum age is required",i.min_age&&i.max_age&&parseInt(i.min_age)>parseInt(i.max_age)&&(Y.min_age="Minimum age cannot be greater than maximum age"),A(Y),Object.keys(Y).length===0},ge=async Y=>{if(Y.preventDefault(),!!ae()){v(!0),S("");try{const re={name:i.name.trim(),persona:i.persona,gender:i.gender,min_age:i.min_age?parseInt(i.min_age):null,max_age:i.max_age?parseInt(i.max_age):null,location:i.location,creatives:i.creatives,is_enabled:i.is_enabled,campaign_type_id:parseInt(i.campaign_type_id),brand:parseInt(i.brand)};let V;t?V=await en.updateCampaign(t.id,re):V=await en.createCampaign(re),V.success?(r(V.data),s()):S(V.message||"Failed to save campaign")}catch(re){console.error("Error saving campaign:",re),S(re.response?.data?.message||"Failed to save campaign. Please try again.")}finally{v(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Campaign":"Create New Campaign"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:ge,className:"p-6 space-y-6",children:[w&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:w})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:C,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${M.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter campaign name"}),M.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"campaign_type_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),a.jsxs("select",{id:"campaign_type_id",name:"campaign_type_id",value:i.campaign_type_id,onChange:C,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${M.campaign_type_id?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Campaign Type"}),p.filter(Y=>Y.is_active).map(Y=>a.jsx("option",{value:Y.id,children:Y.type_name},Y.id))]}),M.campaign_type_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.campaign_type_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),a.jsxs("select",{id:"brand",name:"brand",value:i.brand,onChange:C,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${M.brand?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Brand"}),b.map(Y=>a.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),M.brand&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.brand})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Age *"}),a.jsx("input",{type:"number",id:"min_age",name:"min_age",min:"0",max:"100",value:i.min_age,onChange:C,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${M.min_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter minimum age"}),M.min_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.min_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Age *"}),a.jsx("input",{type:"number",id:"max_age",name:"max_age",min:"0",max:"100",value:i.max_age,onChange:C,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${M.max_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter maximum age"}),M.max_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.max_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"creatives",className:"block text-sm font-medium text-gray-700 mb-1",children:"Creative Type"}),a.jsx("select",{id:"creatives",name:"creatives",value:i.creatives,onChange:C,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:E.map(Y=>a.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona (Multiple Values) *"}),M.persona&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.persona}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.persona.map((Y,re)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 border border-purple-200",children:[a.jsx("span",{children:Y}),a.jsx("button",{type:"button",onClick:()=>T("persona",re),className:"ml-2 text-purple-600 hover:text-purple-800",children:a.jsx(lt,{className:"h-3 w-3"})})]},re))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:c,onChange:Y=>u(Y.target.value),onKeyDown:Y=>W(Y,"persona",c,u),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type persona and press Enter"}),a.jsx("button",{type:"button",onClick:()=>O("persona",c,u),disabled:!c.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Ze,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gender (Multiple Selection) *"}),M.gender&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.gender}),i.gender.length>0&&a.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:i.gender.map((Y,re)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:[a.jsx("span",{children:Y}),a.jsx("button",{type:"button",onClick:()=>T("gender",re),className:"ml-2 text-blue-600 hover:text-blue-800",children:a.jsx(lt,{className:"h-3 w-3"})})]},re))}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:P.map(Y=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.gender.includes(Y.value),onChange:re=>ee(Y.value,re.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:Y.label})]},Y.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (Multiple Values) *"}),M.location&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.location}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.location.map((Y,re)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 border border-green-200",children:[a.jsx("span",{children:Y}),a.jsx("button",{type:"button",onClick:()=>T("location",re),className:"ml-2 text-green-600 hover:text-green-800",children:a.jsx(lt,{className:"h-3 w-3"})})]},re))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:h,onChange:Y=>f(Y.target.value),onKeyDown:Y=>W(Y,"location",h,f),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type location and press Enter"}),a.jsx("button",{type:"button",onClick:()=>O("location",h,f),disabled:!h.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Ze,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:"is_enabled",className:"block text-sm font-medium text-gray-700",children:"Campaign Status *"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`text-sm ${i.is_enabled?"text-gray-500":"text-gray-900 font-medium"}`,children:"Disabled"}),a.jsx("button",{type:"button",onClick:()=>l(Y=>({...Y,is_enabled:!Y.is_enabled})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${i.is_enabled?"bg-purple-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.is_enabled?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:`text-sm ${i.is_enabled?"text-purple-600 font-medium":"text-gray-500"}`,children:"Enabled"})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:_,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:_?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-4 w-4"}),a.jsx("span",{children:t?"Update Campaign":"Create Campaign"})]})})]})]})]})}):null},fS=()=>{const t=ur(),[e,s]=N.useState([]),[r,i]=N.useState([]),[l,c]=N.useState(!0),[u,h]=N.useState(""),[f,p]=N.useState(""),[y,b]=N.useState(""),[j,_]=N.useState(""),[v,w]=N.useState({delete:null,toggle:null}),[S,M]=N.useState(!1),[A,E]=N.useState(null),[P,F]=N.useState(null),[B,R]=N.useState(null),[C,O]=N.useState(null);N.useEffect(()=>{T(),W()},[]);const T=async()=>{try{c(!0),h("");const z=await en.getCampaigns();if(z.success){const Z=z.data?.campaigns||z.data||[];s(Z)}else h(z.message||"Failed to load campaigns")}catch(z){console.error("Error loading campaigns:",z),h("Failed to load campaigns. Please try again.")}finally{c(!1)}},W=async()=>{try{const z=await en.getCampaignTypes();z.success&&i(z.data||[])}catch(z){console.error("Error loading campaign types:",z)}},ee=()=>{E(null),M(!0)},ae=z=>{E(z),M(!0),O(null)},ge=z=>{F(z),O(null)},Y=async()=>{try{const z=await en.deleteCampaign(P.id);z.success?(s(Z=>(Array.isArray(Z)?Z:[]).filter(ie=>ie.id!==P.id)),F(null)):h(z.message||"Failed to delete campaign")}catch(z){console.error("Error deleting campaign:",z),h("Failed to delete campaign. Please try again.")}},re=async z=>{try{const Z=await en.toggleCampaignEnabled(z.id);Z.success?s(ie=>(Array.isArray(ie)?ie:[]).map(xe=>xe.id===z.id?{...xe,is_enabled:!xe.is_enabled}:xe)):h(Z.message||"Failed to update campaign status")}catch(Z){console.error("Error toggling campaign status:",Z),h("Failed to update campaign status. Please try again.")}O(null)},V=z=>{s(A?Z=>(Array.isArray(Z)?Z:[]).map(ie=>ie.id===z.id?z:ie):Z=>[z,...Array.isArray(Z)?Z:[]])},te=z=>{t(`/campaigns/${z.id}`)},se=(Array.isArray(e)?e:[]).filter(z=>{const Z=z.brand?.name||"",ie=z.name.toLowerCase().includes(f.toLowerCase())||Z.toLowerCase().includes(f.toLowerCase()),xe=!y||z.campaign_type_id===parseInt(y),ze=!j||j==="enabled"&&z.is_enabled||j==="disabled"&&!z.is_enabled;return ie&&xe&&ze}),L=z=>{if(z.campaignType?.name)return z.campaignType.name;const Z=(Array.isArray(r)?r:[]).find(ie=>ie.id===z.campaign_type_id);return Z?Z.type_name:"Unknown"},H=z=>{if(!z)return[];if(Array.isArray(z))return z;try{return JSON.parse(z)}catch{return[]}},U=z=>{if(!z)return[];if(Array.isArray(z))return z;try{const Z=JSON.parse(z);return Array.isArray(Z)?Z:[]}catch{return z.split(",").map(Z=>Z.trim()).filter(Z=>Z)}},G=z=>{if(!z)return[];if(Array.isArray(z))return z;try{const Z=JSON.parse(z);return Array.isArray(Z)?Z:[]}catch{return z.split(",").map(Z=>Z.trim()).filter(Z=>Z)}};return l?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(z=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},z))})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[C&&a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(null)}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your advertising campaigns"})]}),a.jsxs("button",{onClick:ee,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[a.jsx(Ze,{className:"h-5 w-5"}),a.jsx("span",{children:"New Campaign"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search campaigns...",value:f,onChange:z=>p(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:y,onChange:z=>b(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Campaign Types"}),(Array.isArray(r)?r:[]).map(z=>a.jsx("option",{value:z.id,children:z.type_name},z.id))]})}),a.jsx("div",{children:a.jsxs("select",{value:j,onChange:z=>_(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"})]})}),a.jsx("div",{children:a.jsx("button",{onClick:()=>{p(""),b(""),_("")},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]})}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx(fu,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:u}),a.jsx("button",{onClick:()=>h(""),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:se.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(k1,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:(Array.isArray(e)?e:[]).length===0?"Get started by creating your first campaign.":"Try adjusting your search or filter criteria."}),(Array.isArray(e)?e:[]).length===0&&a.jsx("button",{onClick:ee,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Campaign"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creative"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map(z=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`/campaigns/${z.id}`),children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.name}),z.brand?.name&&a.jsx("div",{className:"text-sm text-gray-500",children:z.brand.name})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:L(z)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:z.creatives})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.is_enabled?"Enabled":"Disabled"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:cr(z.created_at)}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),te(z)},className:"text-blue-500 hover:text-blue-700 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:a.jsx(Vr,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ae(z)},className:"text-yellow-500 hover:text-yellow-700 p-1 rounded-md hover:bg-yellow-50 transition-colors",title:"Edit Campaign",children:a.jsx(M1,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),re(z)},className:`p-1 rounded-md transition-colors ${z.is_enabled?"text-red-500 hover:text-red-700 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:z.is_enabled?"Disable Campaign":"Enable Campaign",children:a.jsx("div",{className:`h-4 w-4 rounded-full ${z.is_enabled?"bg-red-500":"bg-green-500"}`})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ge(z)},className:"text-red-500 hover:text-red-700 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Campaign",children:a.jsx(gs,{className:"h-4 w-4"})})]})})]},z.id))})]})})}),se.length>0&&a.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",se.length," of ",(Array.isArray(e)?e:[]).length," campaigns"]})]}),a.jsx(mS,{campaign:A,isOpen:S,onClose:()=>{M(!1),E(null)},onSave:V}),B&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Campaign Details"}),a.jsx("button",{onClick:()=>R(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:B.name})]}),B.brand?.name&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Brand"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:B.brand.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Type"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:L(B)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Persona"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:U(B.persona).length>0?U(B.persona).map((z,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-purple-100 text-purple-800",children:z},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:H(B.gender).join(", ")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Locations"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:G(B.location).length>0?G(B.location).map((z,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:z},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Creatives"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:B.creatives})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),a.jsx("p",{className:`mt-1 text-sm font-medium ${B.is_enabled?"text-green-600":"text-red-600"}`,children:B.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:I1(B.created_at)})]})]})]})}),P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(fu,{className:"h-6 w-6 text-red-600 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Campaign"})]}),a.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:['Are you sure you want to delete "',P.name,'"? This action cannot be undone.']}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>F(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})},Go={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([r,i])=>i!=null&&i!=="").reduce((r,[i,l])=>({...r,[i]:l}),{});console.log("Brand API getAll params:",e);const s=await fe.get("/brands",{params:e});return console.log("Brand API getAll response:",s.data),s.data}catch(e){throw console.error("Brand API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await fe.get(`/brands/${t}`);return console.log("Brand API getById response:",e.data),e.data}catch(e){throw console.error("Brand API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("Brand API create data:",t);const e=await fe.post("/brands",t);return console.log("Brand API create response:",e.data),e.data}catch(e){throw console.error("Brand API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("Brand API update id:",t,"data:",e);const s=await fe.put(`/brands/${t}`,e);return console.log("Brand API update response:",s.data),s.data}catch(s){throw console.error("Brand API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("Brand API delete id:",t);const e=await fe.delete(`/brands/${t}`);return console.log("Brand API delete response:",e.data),e.data}catch(e){throw console.error("Brand API delete error:",e.response?.data||e.message),e}}},pS=({isOpen:t,onClose:e,onSubmit:s,editData:r=null,isLoading:i=!1})=>{const[l,c]=N.useState({name:"",description:"",is_active:!0}),[u,h]=N.useState({}),[f,p]=N.useState("");N.useEffect(()=>{c(r?{name:r.name||"",description:r.description||"",is_active:r.is_active!==void 0?r.is_active:!0}:{name:"",description:"",is_active:!0}),h({}),p("")},[r,t]);const y=()=>{const _={};return l.name.trim()?l.name.length>255&&(_.name="Brand name must be less than 255 characters"):_.name="Brand name is required",l.description&&l.description.length>1e3&&(_.description="Description must be less than 1000 characters"),h(_),Object.keys(_).length===0},b=_=>{const{name:v,value:w,type:S,checked:M}=_.target;c(A=>({...A,[v]:S==="checkbox"?M:w})),u[v]&&h(A=>({...A,[v]:""}))},j=async _=>{if(_.preventDefault(),!!y())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r?"Edit Brand":"Create Brand"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"h-6 w-6"})})]}),f&&a.jsx(Ul,{error:f,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.name?"border-red-500":""}`,placeholder:"Enter brand name",maxLength:255,disabled:i}),u.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":r?"Update":"Create"})]})]})]})}):null},gS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,f]=N.useState("all"),[p,y]=N.useState("created_at"),[b,j]=N.useState("desc"),[_,v]=N.useState(1),[w]=N.useState(10),[S,M]=N.useState(!1),[A,E]=N.useState(null),[P,F]=N.useState(!1),[B,R]=N.useState(!1),[C,O]=N.useState(null),[T,W]=N.useState(!1),[ee,ae]=N.useState(null),ge=async()=>{try{r(!0),l(null);const z={search:c,status:h==="all"?void 0:h,sort:p,order:b,page:_,limit:w},Z=await Go.getAll(z);Z.success?e(Z.data||[]):l(Z.message||"Failed to fetch brands")}catch(z){l(z.response?.data?.message||"Failed to fetch brands"),console.error("Error fetching brands:",z)}finally{r(!1)}};N.useEffect(()=>{ge()},[c,h,p,b,_]),N.useEffect(()=>{if(i){const z=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(z)}},[i]);const Y=async z=>{try{F(!0),l(null),console.log("Submitting form data:",z),console.log("Editing item:",A);let Z;if(A?(console.log("Updating brand with ID:",A.id),Z=await Go.update(A.id,z)):(console.log("Creating new brand"),Z=await Go.create(z)),console.log("API Response:",Z),Z.success||Z.data)return M(!1),E(null),ge(),console.log(A?"Brand updated successfully":"Brand created successfully"),{success:!0};throw new Error(Z.message||"Operation failed")}catch(Z){throw console.error("Form submission error:",Z),console.error("Error response data:",Z.response?.data),console.error("Error status:",Z.response?.status),Z}finally{F(!1)}},re=async z=>{try{W(!0),ae(null);const Z=await Go.delete(z);if(Z.success)R(!1),O(null),ae(null),ge(),console.log("Brand deleted successfully");else throw new Error(Z.message||"Delete failed")}catch(Z){console.error("Delete error:",Z),ae(Z.response?.data?.message||Z.message||"Delete failed")}finally{W(!1)}},V=z=>{u(z.target.value),v(1)},te=z=>{f(z),v(1)},se=z=>{p===z?j(b==="asc"?"desc":"asc"):(y(z),j("asc")),v(1)},L=z=>{E(z),M(!0)},H=()=>{E(null),M(!0)},U=z=>{O(z),R(!0)},G=z=>z?cr(z):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your brand portfolio"})]}),a.jsxs("button",{onClick:H,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search brands...",value:c,onChange:V,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:z=>te(z.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:ge,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(lt,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_t,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading brands..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ze,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No brands found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first brand."}),a.jsxs("button",{onClick:H,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("name"),children:["Name",p==="name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>se("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(z=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:z.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.is_active?a.jsxs(a.Fragment,{children:[a.jsx(Pl,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ou,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:G(z.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>L(z),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(sn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>U(z),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(gs,{className:"h-4 w-4"})})]})})]},z.id))})]})}),a.jsx(pS,{isOpen:S,onClose:()=>{M(!1),E(null),l(null)},onSubmit:Y,editData:A,isLoading:P}),B&&C&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Oe,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Brand"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',C.name,'"? This action cannot be undone.']}),ee&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:ee})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{R(!1),O(null),ae(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:T,children:"Cancel"}),a.jsx("button",{onClick:()=>re(C.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:T,children:T?"Deleting...":"Delete"})]})]})})})]})},Qa={getAll:async(t={})=>{try{return(await fe.get("/campaign-data",{params:t})).data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{return(await fe.get(`/campaign-data/${t}`)).data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{return(await fe.post("/campaign-data",t)).data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{return(await fe.put(`/campaign-data/${t}`,e)).data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{return(await fe.delete(`/campaign-data/${t}`)).data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}},getCampaignsForDropdown:async()=>{try{const t=await fe.get("/campaigns",{params:{is_enabled:!0,limit:1e3}});return{success:t.data.success,data:t.data.data?.campaigns||t.data.data||[],message:t.data.message}}catch(t){throw console.error("API getCampaignsForDropdown error:",t.response?.data||t.message),t}},getCardsForDropdown:async()=>{try{return(await fe.get("/campaign-data/cards")).data}catch(t){throw console.error("API getCardsForDropdown error:",t.response?.data||t.message),t}},getByCampaignId:async(t,e={})=>{try{return(await fe.get("/campaign-data",{params:{campaign_id:t,...e}})).data}catch(s){throw console.error("API getByCampaignId error:",s.response?.data||s.message),s}}},xS=()=>{const{id:t}=ex(),e=ur(),[s,r]=N.useState(null),[i,l]=N.useState(!0),[c,u]=N.useState([]),[h,f]=N.useState(!0),[p,y]=N.useState(null),[b,j]=N.useState(""),[_,v]=N.useState(1),[w]=N.useState(10),[S,M]=N.useState(!1),[A,E]=N.useState(null),[P,F]=N.useState(!1),[B,R]=N.useState(!1),[C,O]=N.useState(null),[T,W]=N.useState(!1),[ee,ae]=N.useState([]),[ge,Y]=N.useState(!1),[re,V]=N.useState({from:"",to:""}),[te,se]=N.useState({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""});function L(){const ne=new Date;ne.setDate(ne.getDate()-1);const oe=ne.getFullYear(),me=String(ne.getMonth()+1).padStart(2,"0"),He=String(ne.getDate()).padStart(2,"0");return`${oe}-${me}-${He}`}const H=()=>{const ne=new Date,oe=new Date(ne.getFullYear(),ne.getMonth(),1),me=new Date(ne.getFullYear(),ne.getMonth()+1,0),He=Pt=>{const pe=Pt.getFullYear(),Pe=String(Pt.getMonth()+1).padStart(2,"0"),pt=String(Pt.getDate()).padStart(2,"0");return`${pe}-${Pe}-${pt}`},os={from:He(oe),to:He(me)};return console.log("Current month range:",os),os},U=async()=>{try{l(!0);const ne=await en.getCampaign(t);ne.success&&ne.data?r(ne.data):y("Campaign not found")}catch(ne){console.error("Error fetching campaign:",ne),y("Failed to load campaign details")}finally{l(!1)}},G=async()=>{try{f(!0),y(null);const ne={search:b,page:_,limit:w,date_from:Ae(re.from),date_to:Ae(re.to)},oe=await Qa.getByCampaignId(t,ne);oe.success?u(oe.data||[]):y(oe.message||"Failed to fetch campaign data")}catch(ne){y(ne.response?.data?.message||"Failed to fetch campaign data"),console.error("Error fetching campaign data:",ne)}finally{f(!1)}},z=async()=>{try{Y(!0);const ne=await Qa.getCardsForDropdown();ne.success&&ae(ne.data||[])}catch(ne){console.error("Error fetching cards:",ne)}finally{Y(!1)}};N.useEffect(()=>{t&&(U(),z())},[t]),N.useEffect(()=>{t&&ke(re.from)&&ke(re.to)&&G()},[t,b,_,re]);const Z=ne=>{const{name:oe,value:me}=ne.target;se(He=>({...He,[oe]:me}))},ie=async ne=>{ne.preventDefault();try{if(F(!0),y(null),!te.card_id||!te.data_date){y("Card and Date are required fields");return}const oe={campaign_id:parseInt(t),facebook_result:parseInt(te.facebook_result)||0,zoho_result:parseInt(te.zoho_result)||0,spent:parseFloat(te.spent)||0,data_date:te.data_date,card_id:parseInt(te.card_id)};let me;if(A?me=await Qa.update(A.id,oe):me=await Qa.create(oe),me.success||me.data)M(!1),E(null),se({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""}),G();else throw new Error(me.message||"Operation failed")}catch(oe){console.error("Form submission error:",oe);const me=oe.response?.data?.message||oe.response?.data?.error||oe.message||"Operation failed";y(me)}finally{F(!1)}},xe=async ne=>{try{W(!0);const oe=await Qa.delete(ne);if(oe.success)R(!1),O(null),G();else throw new Error(oe.message||"Delete failed")}catch(oe){console.error("Delete error:",oe),y(oe.response?.data?.message||"Delete failed")}finally{W(!1)}},ze=ne=>{j(ne.target.value),v(1)},st=ne=>{y(null),E(ne),se({facebook_result:ne.facebook_result?.toString()||"",zoho_result:ne.zoho_result?.toString()||"",spent:ne.spent?.toString()||"",data_date:ne.data_date||"",card_id:ne.card_id?.toString()||""}),M(!0)},Et=()=>{y(null),E(null),se({facebook_result:"",zoho_result:"",spent:"",data_date:L(),card_id:""}),M(!0)},is=ne=>{O(ne),R(!0)},ft=ne=>ne?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(ne)):"₹0.00",X=ne=>{const oe=ee.find(me=>me.id===ne);return oe?oe.card_name:"-"},be=ne=>{if(!ne)return"";if(ne.includes("T")||ne.includes("-"))try{const oe=new Date(ne);if(!isNaN(oe.getTime())){const me=String(oe.getDate()).padStart(2,"0"),He=String(oe.getMonth()+1).padStart(2,"0"),os=oe.getFullYear();return`${me}/${He}/${os}`}}catch(oe){console.error("Error parsing date:",ne,oe)}if(ne.match(/^\d{4}-\d{2}-\d{2}$/)){const[oe,me,He]=ne.split("-");return`${He}/${me}/${oe}`}return ne},Ae=ne=>{if(!ne)return"";const[oe,me,He]=ne.split("/");return`${He}-${me.padStart(2,"0")}-${oe.padStart(2,"0")}`},ke=ne=>{if(!ne)return!1;const oe=ne.split("/");if(oe.length!==3)return!1;const[me,He,os]=oe,Pt=parseInt(me,10),pe=parseInt(He,10),Pe=parseInt(os,10);if(isNaN(Pt)||isNaN(pe)||isNaN(Pe)||Pt<1||Pt>31||pe<1||pe>12||Pe<1900||Pe>2100)return!1;const pt=new Date(Pe,pe-1,Pt);return pt.getFullYear()===Pe&&pt.getMonth()===pe-1&&pt.getDate()===Pt};N.useEffect(()=>{const ne=H();V({from:be(ne.from),to:be(ne.to)})},[]);const Fe=(ne,oe)=>{let me=oe.replace(/[^0-9/]/g,"");if(me.length>=2&&me.charAt(2)!=="/"&&(me.length===2?me=me+"/":me.length>2&&me.length<=4&&(me=me.substring(0,2)+"/"+me.substring(2))),me.length>=5&&me.charAt(5)!=="/"){if(me.length===5)me=me+"/";else if(me.length>5){const He=me.split("/");He.length===2&&(me=He[0]+"/"+He[1].substring(0,2)+"/"+He[1].substring(2))}}me.length<=10&&V(He=>({...He,[ne]:me}))},we=(ne,oe)=>{oe&&V(me=>({...me,[ne]:be(oe)}))},De=ne=>{let oe=ne.replace(/[^0-9/]/g,"");if(oe.length>=2&&oe.charAt(2)!=="/"&&(oe.length===2?oe=oe+"/":oe.length>2&&oe.length<=4&&(oe=oe.substring(0,2)+"/"+oe.substring(2))),oe.length>=5&&oe.charAt(5)!=="/"){if(oe.length===5)oe=oe+"/";else if(oe.length>5){const me=oe.split("/");me.length===2&&(oe=me[0]+"/"+me[1].substring(0,2)+"/"+me[1].substring(2))}}if(oe.length<=10)if(ke(oe)){const me=Ae(oe);se(He=>({...He,data_date:me}))}else se(me=>({...me,data_date:oe}))},rt=ne=>{ne&&se(oe=>({...oe,data_date:ne}))};return i?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(ne=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},ne))})]})}):s?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[a.jsx(pu,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),a.jsx("div",{children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Data"}),a.jsxs("button",{onClick:Et,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Data Entry"]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_from",className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_from_picker").showPicker&&document.getElementById("date_from_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_from",value:re.from,onChange:ne=>Fe("from",ne.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_from_picker",className:"absolute opacity-0 pointer-events-none",onChange:ne=>we("from",ne.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_to",className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_to_picker").showPicker&&document.getElementById("date_to_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_to",value:re.to,onChange:ne=>Fe("to",ne.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_to_picker",className:"absolute opacity-0 pointer-events-none",onChange:ne=>we("to",ne.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",id:"search",placeholder:"Search data...",value:b,onChange:ze,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:G,disabled:h,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})})]})}),p&&a.jsx("div",{className:"mx-6 mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:p}),a.jsx("button",{onClick:()=>y(null),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"overflow-hidden",children:h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_t,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading performance data..."})]}):c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(ei,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No performance data yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your campaign performance by adding data entries."}),a.jsxs("button",{onClick:Et,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add First Entry"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Card"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(ne=>{const oe=parseInt(ne.facebook_result)||0,me=parseInt(ne.zoho_result)||0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:cr(ne.data_date)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:oe})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:me})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-green-600",children:ft(ne.spent)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-blue-600 font-medium",children:oe>0?ft(parseFloat(ne.spent)/oe):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-purple-600 font-medium",children:me>0?ft(parseFloat(ne.spent)/me):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:ne.card_display_name||ne.card_name||X(ne.card_id)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>st(ne),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(sn,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>is(ne),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(gs,{className:"h-4 w-4"})})]})})]},ne.id)})})]})})})]}),S&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:A?"Edit Performance Data":"Add Performance Data"}),p&&S&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Oe,{className:"h-4 w-4 text-red-400"}),a.jsx("div",{className:"ml-2",children:a.jsx("p",{className:"text-sm text-red-700",children:p})})]})}),a.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_result",className:"block text-sm font-medium text-gray-700",children:"Facebook Result"}),a.jsx("input",{type:"number",id:"facebook_result",name:"facebook_result",value:te.facebook_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"zoho_result",className:"block text-sm font-medium text-gray-700",children:"Zoho Result"}),a.jsx("input",{type:"number",id:"zoho_result",name:"zoho_result",value:te.zoho_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"spent",className:"block text-sm font-medium text-gray-700",children:"Spent (₹)"}),a.jsx("input",{type:"number",step:"0.01",id:"spent",name:"spent",value:te.spent,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"data_date",className:"block text-sm font-medium text-gray-700",children:"Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("form_date_picker").showPicker&&document.getElementById("form_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"data_date",name:"data_date",value:te.data_date?be(te.data_date):"",onChange:ne=>De(ne.target.value),placeholder:"DD/MM/YYYY",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3 pl-10"}),a.jsx("input",{type:"date",id:"form_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:ne=>rt(ne.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:te.card_id,onChange:Z,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3",children:[a.jsx("option",{value:"",children:"Select Card"}),ee.map(ne=>a.jsx("option",{value:ne.id,children:ne.card_name},ne.id))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{M(!1),E(null),y(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:P,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:P||ge,children:P?"Saving...":A?"Update":"Create"})]})]})]})})}),B&&C&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Oe,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Performance Data"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this performance data entry? This action cannot be undone."})}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{R(!1),O(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:T,children:"Cancel"}),a.jsx("button",{onClick:()=>xe(C.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:T,children:T?"Deleting...":"Delete"})]})]})})})]}):a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[a.jsx(pu,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})]})})},yS="modulepreload",bS=function(t){return"/"+t},zg={},$g=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){let f=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");i=f(s.map(p=>{if(p=bS(p),p in zg)return;zg[p]=!0;const y=p.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":yS,y||(j.as="script"),j.crossOrigin="",j.href=p,h&&j.setAttribute("nonce",h),document.head.appendChild(j),y)return new Promise((_,v)=>{j.addEventListener("load",_),j.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},Sn="/cards",tr={getAll:async(t={})=>{try{return(await fe.get(Sn,{params:t})).data}catch(e){throw console.error("API get all cards error:",e.response?.data||e),e}},getActive:async(t={})=>{try{return(await fe.get(`${Sn}/active`,{params:t})).data}catch(e){throw console.error("API get active cards error:",e.response?.data||e),e}},getById:async t=>{try{return(await fe.get(`${Sn}/${t}`)).data}catch(e){throw console.error("API get card error:",e.response?.data||e),e}},getByAccount:async t=>{try{return(await fe.get(`${Sn}/by-account/${t}`)).data}catch(e){throw console.error("API get cards by account error:",e.response?.data||e),e}},create:async t=>{try{return(await fe.post(Sn,t)).data}catch(e){throw console.error("API create card error:",e.response?.data||e),e}},update:async(t,e)=>{try{return(await fe.put(`${Sn}/${t}`,e)).data}catch(s){throw console.error("API update card error:",s.response?.data||s),s}},addBalance:async(t,e,s="")=>{try{return(await fe.post(`${Sn}/${t}/add-balance`,{amount:Number(e),description:s||""})).data}catch(r){throw console.error("API add balance error:",r.response?.data||r),r}},delete:async t=>{try{return(await fe.delete(`${Sn}/${t}`)).data}catch(e){throw console.error("API delete card error:",e.response?.data||e),e}}},eu="/accounts",Cu={createAccount:async t=>{try{return(await Ct.post(eu,t)).data}catch(e){return console.error("API createAccount error:",e.response?.data||e),e.response?.data||{success:!1,message:e.message}}},getAll:async()=>{try{return(await Ct.get(eu)).data}catch(t){return console.error("API getAll accounts error:",t.response?.data||t),t.response?.data||{success:!1,message:t.message}}},addAmount:async(t,e)=>{try{return(await Ct.post(`${eu}/${t}/add-amount`,{amount:e})).data}catch(s){return console.error("API addAmount error:",s.response?.data||s),s.response?.data||{success:!1,message:s.message}}}},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:Cu},Symbol.toStringTag,{value:"Module"})),vS=({isOpen:t,onClose:e,onSubmit:s,editData:r=null,isLoading:i=!1,accounts:l=[]})=>{const[c,u]=N.useState(""),[h,f]=N.useState({card_name:"",card_number_last4:"",card_type:"",is_active:!0,account_id:""}),[p,y]=N.useState({});N.useEffect(()=>{f(r?{card_name:r.card_name||"",card_number_last4:r.card_number_last4||"",card_type:r.card_type||"",account_id:r.account_id||"",is_active:r.is_active!==void 0?r.is_active:!0}:{card_name:"",card_number_last4:"",card_type:"",account_id:"",is_active:!0}),y({})},[r,t]),N.useEffect(()=>{t&&u("")},[t]);const b=()=>{const v={};return h.card_name.trim()?h.card_name.length>100&&(v.card_name="Card name must be less than 100 characters"):v.card_name="Card name is required",h.card_number_last4.trim()?/^\d{4}$/.test(h.card_number_last4)||(v.card_number_last4="Must be exactly 4 digits"):v.card_number_last4="Last 4 digits are required",h.card_type||(v.card_type="Card type is required"),h.account_id||(v.account_id="Account selection is required"),h.account_id||(v.account_id="Account selection is required"),y(v),Object.keys(v).length===0},j=v=>{const{name:w,value:S,type:M,checked:A}=v.target;let E=M==="checkbox"?A:S;w==="card_number_last4"&&(E=S.replace(/\D/g,"").slice(0,4)),f(P=>({...P,[w]:E})),p[w]&&y(P=>({...P,[w]:""}))},_=async v=>{if(v.preventDefault(),!!b())try{u("");const w={...h,account_id:h.account_id?Number(h.account_id):null};await s(w)}catch(w){console.error("Form submission error:",w),u(w?.response?.data?.message||w.message||"An error occurred")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r?"Edit Card":"Add New Card"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"h-6 w-6"})})]}),c&&a.jsx(Ul,{error:c,onDismiss:()=>u(""),className:"mb-4"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"account_id",className:"block text-sm font-medium text-gray-700 mb-1",children:["Account ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"account_id",name:"account_id",value:h.account_id,onChange:j,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${p.account_id?"border-red-500":""}`,disabled:i,children:[a.jsx("option",{value:"",children:"Select an account"}),l.map(v=>a.jsx("option",{value:v.id,children:v.account_name},v.id))]}),p.account_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.account_id})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_name",name:"card_name",value:h.card_name,onChange:j,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${p.card_name?"border-red-500":""}`,placeholder:"Enter card name",maxLength:100,disabled:i}),p.card_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.card_name})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_number_last4",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last 4 Digits ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_number_last4",name:"card_number_last4",value:h.card_number_last4,onChange:j,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${p.card_number_last4?"border-red-500":""}`,placeholder:"1234",maxLength:4,disabled:i}),p.card_number_last4&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.card_number_last4})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_type",name:"card_type",value:h.card_type,onChange:j,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${p.card_type?"border-red-500":""}`,placeholder:"e.g., Visa, MasterCard, American Express",maxLength:50,disabled:i}),p.card_type&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.card_type})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:h.is_active,onChange:j,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":r?"Update":"Create"})]})]})]})}):null},wS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,f]=N.useState(1),[p]=N.useState(10),[y,b]=N.useState(!1),[j,_]=N.useState(null),[v,w]=N.useState(!1),[S,M]=N.useState(!1),[A,E]=N.useState(null),[P,F]=N.useState(!1),[B,R]=N.useState(!1),[C,O]=N.useState(null),[T,W]=N.useState(""),[ee,ae]=N.useState(!1),[ge,Y]=N.useState(!1),[re,V]=N.useState(""),[te,se]=N.useState(""),[L,H]=N.useState(!1),[U,G]=N.useState([]),[z,Z]=N.useState(!1),[ie,xe]=N.useState(null),[ze,st]=N.useState(""),[Et,is]=N.useState(!1),ft=async()=>{try{r(!0);const pe=await Cu.getAll();console.log("Accounts API response:",pe);let Pe=[];Array.isArray(pe)?Pe=pe:pe?.success&&Array.isArray(pe?.data)?Pe=pe.data:Array.isArray(pe?.accounts)?Pe=pe.accounts:Array.isArray(pe?.data?.accounts)&&(Pe=pe.data.accounts),G(Pe),Array.isArray(pe)||pe?.success===!1&&console.error("Accounts fetch failed:",pe?.message)}catch(pe){console.error("Error fetching accounts:",pe?.response?.data||pe)}finally{r(!1)}},X=async()=>{try{r(!0),l(null);const pe={search:c,page:h,limit:p},Pe=await tr.getAll(pe);Pe.success?e(Pe.data?.cards||[]):l(Pe.message||"Failed to fetch cards")}catch(pe){l(pe.response?.data?.message||"Failed to fetch cards"),console.error("Error fetching cards:",pe)}finally{r(!1)}};N.useEffect(()=>{const pe=setTimeout(()=>{f(1),ft()},300);return()=>clearTimeout(pe)},[c]),N.useEffect(()=>{ft()},[h]),N.useEffect(()=>{ft()},[]);const be=(pe=null)=>{_(pe),b(!0)},Ae=()=>{b(!1),_(null)},ke=async pe=>{try{if(w(!0),j){const Pe=await tr.update(j.id||j._id,pe);if(!Pe.success)throw new Error(Pe.message||"Update failed")}else{const Pe=await tr.create(pe);if(!Pe.success)throw new Error(Pe.message||"Creation failed")}Ae(),await ft()}catch(Pe){throw console.error("Form submission error:",Pe),Pe}finally{w(!1)}},Fe=async()=>{if(A)try{F(!0);const pe=await tr.delete(A.id||A._id);if(!pe.success)throw new Error(pe.message||"Delete failed");M(!1),E(null),await X()}catch(pe){console.error("Delete error:",pe),alert(pe.response?.data?.message||"Failed to delete card")}finally{F(!1)}},we=()=>{M(!1),E(null)},De=()=>{R(!1),O(null),W("")},rt=async()=>{if(!C||!T)return;const pe=parseFloat(T);if(isNaN(pe)||pe<=0){alert("Please enter a valid positive amount");return}try{ae(!0);const Pe=await tr.addBalance(C.id||C._id,pe);if(!Pe.success)throw new Error(Pe.message||"Failed to add balance");R(!1),O(null),W(""),await X()}catch(Pe){console.error("Add balance error:",Pe),alert(Pe.response?.data?.message||"Failed to add balance")}finally{ae(!1)}},ne=N.useMemo(()=>c.trim()?U.filter(pe=>pe.account_name?.toLowerCase().includes(c.toLowerCase())):U,[U,c]),oe=ne.length,me=Math.ceil(oe/p),He=(h-1)*p,os=He+p,Pt=ne.slice(He,os);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(lr,{className:"h-7 w-7 text-blue-600"}),"Accounts Management"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>ft(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>be(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Card"]}),a.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-green-600 text-sm font-medium text-white hover:bg-green-700 transition-colors",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Account"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:pe=>u(pe.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search accounts..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),z&&ie&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6",children:[a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[a.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Add Amount to ",ie.account_name]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (integer)"}),a.jsx("input",{type:"number",step:"1",value:ze,onChange:pe=>st(pe.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0"})]})]})}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:async()=>{const pe=parseInt(ze,10);if(!Number.isFinite(pe)){alert("Please enter a valid integer amount");return}try{is(!0);const Pe=await Cu.addAmount(ie.id,pe);Pe?.success===!1&&alert(Pe?.message||"Failed to add amount"),Z(!1),xe(null),st(""),await ft()}catch(Pe){console.error("Add account amount error:",Pe),alert(Pe?.response?.data?.message||"Failed to add amount")}finally{is(!1)}},disabled:Et,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:Et?"Saving...":"Save"}),a.jsx("button",{onClick:()=>{Z(!1),xe(null),st("")},disabled:Et,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),s?a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"}),[...Array(5)].map((pe,Pe)=>a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"},Pe))]})}):Pt.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No accounts found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Create an account to get started."}),!c&&a.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-green-600 text-sm font-medium text-white hover:bg-green-700 transition-colors",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance (AED)"}),a.jsx("th",{className:"px-6 py-3"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Pt.map(pe=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:pe.account_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:pe.id}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["AED ",Number(pe.amount||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsxs("a",{href:`/cards/account/${pe.id}`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(Vr,{className:"h-3 w-3 mr-1"})," View Cards"]}),a.jsx("button",{onClick:()=>{xe(pe),st(""),Z(!0)},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"+ Add Amount"})]})})]},pe.id))})]})}),me>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",He+1," to ",Math.min(os,oe)," of ",oe," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(pe=>Math.max(1,pe-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",me]}),a.jsx("button",{onClick:()=>f(pe=>Math.min(me,pe+1)),disabled:h>=me,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(vS,{isOpen:y,onClose:Ae,onSubmit:ke,editData:j,isLoading:v,accounts:U}),S&&A&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Oe,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Card"}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',A.card_name,'"? This action cannot be undone.']})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:Fe,disabled:P,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:P?"Deleting...":"Delete"}),a.jsx("button",{onClick:we,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),B&&C&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(yp,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Balance"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['Add balance to "',C.card_name,'"']}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"balance-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (₹)"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(yp,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"number",id:"balance-amount",value:T,onChange:pe=>W(pe.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]})]})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:rt,disabled:ee||!T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:ee?"Adding...":"Add Balance"}),a.jsx("button",{onClick:De,disabled:ee,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),ge&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full sm:p-6",children:[a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Account"}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name *"}),a.jsx("input",{type:"text",value:re,onChange:pe=>V(pe.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter account name"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),a.jsx("input",{type:"number",step:"0.01",value:te,onChange:pe=>se(pe.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]})]})]})}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:async()=>{if(!re.trim()){alert("Account name is required");return}const pe=te===""?0:parseFloat(te);if(isNaN(pe)){alert("Amount must be a number");return}try{H(!0);const pt=await(await $g(async()=>{const{default:mr}=await Promise.resolve().then(()=>Ug);return{default:mr}},void 0)).default.createAccount({account_name:re.trim(),amount:pe}),Os=pt&&(pt.data?.account||pt.account||pt);if(pt&&(pt.success===!0||Os&&(Os.id||Os.account_name))){Y(!1),V(""),se("");try{await(await $g(async()=>{const{default:Si}=await Promise.resolve().then(()=>Ug);return{default:Si}},void 0)).default.getAll()}catch{}alert("Account created successfully")}else alert(pt?.message||"Failed to create account")}catch(Pe){console.error("Create account error:",Pe),alert(Pe?.response?.data?.message||"Failed to create account")}finally{H(!1)}},disabled:L,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:L?"Saving...":"Save"}),a.jsx("button",{onClick:()=>Y(!1),disabled:L,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},jS=()=>{const{accountId:t}=ex(),[e,s]=N.useState([]),[r,i]=N.useState(!0),[l,c]=N.useState(null),u=async()=>{try{i(!0),c(null);const h=await tr.getByAccount(t),f=Array.isArray(h?.data?.cards)?h.data.cards:Array.isArray(h)?h:h?.cards||[];s(f)}catch(h){c(h.response?.data?.message||"Failed to load cards"),s([])}finally{i(!1)}};return N.useEffect(()=>{u()},[t]),a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ou,{to:"/cards",className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-sm text-gray-700 hover:bg-gray-50",children:[a.jsx(pu,{className:"h-4 w-4 mr-2"})," Back to Accounts"]}),a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(lr,{className:"h-7 w-7 text-blue-600"})," Account ",t," - Cards"]})]}),a.jsxs("button",{onClick:u,disabled:r,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`})," Refresh"]})]}),l&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4 text-sm text-red-700",children:l}),r?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((h,f)=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},f))}):e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards found for this account"}),a.jsx("p",{className:"text-gray-500",children:"Create a card and assign it to this account."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(h=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:h.card_name}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Card ID: ",h.id]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:h.card_type&&a.jsxs("p",{className:"text-sm text-gray-700",children:["Type: ",h.card_type]})})]})},h.id))})]})},Jo={getAll:async(t={})=>(await fe.get("/card-users",{params:t})).data,getById:async t=>(await fe.get(`/card-users/${t}`)).data,create:async t=>(await fe.post("/card-users",t)).data,update:async(t,e)=>(await fe.put(`/card-users/${t}`,e)).data,delete:async t=>(await fe.delete(`/card-users/${t}`)).data,getCardsByUser:async t=>(await fe.get(`/card-users/user/${t}/cards`)).data,getUsersByCard:async t=>(await fe.get(`/card-users/card/${t}/users`)).data},NS={getAll:async(t={})=>(await fe.get("/user-management",{params:t})).data,getById:async t=>(await fe.get(`/user-management/${t}`)).data,getForDropdown:async()=>{const t=await fe.get("/user-management",{params:{limit:100,is_active:!0}});return t.data.success&&t.data.data?.users?{success:!0,data:t.data.data.users.map(e=>({id:e.id,name:e.username,username:e.username,is_active:e.is_active}))}:t.data},create:async t=>(await fe.post("/user-management",t)).data,update:async(t,e)=>(await fe.put(`/user-management/${t}`,e)).data,delete:async t=>(await fe.delete(`/user-management/${t}`)).data,toggleStatus:async t=>(await fe.patch(`/user-management/${t}/toggle-status`)).data,getRoles:async()=>{try{const t=await fe.get("/user-management/roles");return t.data.success&&t.data.data?.roles?{success:!0,data:{roles:t.data.data.roles.map(e=>({id:e.id,role_name:e.display_name||e.name,name:e.name,display_name:e.display_name||e.name,description:e.description,is_system_role:e.is_system_role}))}}:t.data}catch(t){console.error("Error fetching roles from user-management API:",t);try{const e=await fe.get("/permissions/roles-list");return e.data.success&&e.data.data?{success:!0,data:{roles:e.data.data.map(s=>({id:s.id,role_name:s.name,name:s.name,display_name:s.display_name||s.name,description:s.description,is_system_role:s.is_system_role}))}}:e.data}catch(e){throw console.error("Both user-management and permissions APIs failed:",e),t}}},checkUsername:async t=>(await fe.get(`/user-management/check/username/${t}`)).data},Zo=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}/${s}/${e}`},Hg=t=>{if(!t)return"";if(t.includes("T")){const i=new Date(t);if(!isNaN(i.getTime())){const l=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0");return`${String(i.getDate()).padStart(2,"0")}/${c}/${l}`}}const[e,s,r]=t.split("-");return e&&s&&r?`${r}/${s}/${e}`:""},_S=t=>{if(!t)return"";const[e,s,r]=t.split("/");return`${r}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`},kS=({isOpen:t,onClose:e,onSubmit:s,editData:r,isLoading:i})=>{const[l,c]=N.useState({card_id:"",user_id:"",assigned_date:Zo(),is_primary:!1}),[u,h]=N.useState({}),[f,p]=N.useState([]),[y,b]=N.useState([]),[j,_]=N.useState(!1);N.useEffect(()=>{t&&(c(r?{card_id:r.card_id?.toString()||"",user_id:r.user_id?.toString()||"",assigned_date:r.assigned_date?Hg(r.assigned_date):Zo(),is_primary:!!r.is_primary}:{card_id:"",user_id:"",assigned_date:Zo(),is_primary:!1}),h({}))},[t,r]),N.useEffect(()=>{t&&v()},[t]);const v=async()=>{_(!0);try{console.log("🔄 CardUsersForm: Loading options..."),console.log("📡 CardUsersForm: Calling cardsService.getActive...");const P=await tr.getActive({limit:100});console.log("📨 CardUsersForm: Cards response:",P);const F=P?.data?.cards||P?.data||[];console.log("📋 CardUsersForm: Extracted cards list:",F),console.log("📊 CardUsersForm: Cards list length:",F.length),Array.isArray(F)&&F.length>0&&F.forEach((C,O)=>{console.log(`   Card ${O+1}: ID=${C.id}, Name="${C.card_name}", Balance=${C.current_balance}`)}),p(Array.isArray(F)?F:[]),console.log("👥 CardUsersForm: Loading users...");const R=(await NS.getForDropdown())?.data||[];console.log("👥 CardUsersForm: Users loaded:",R.length),b(Array.isArray(R)?R:[])}catch(P){console.error("❌ CardUsersForm: Error loading options:",P),p([]),b([])}finally{_(!1)}},w=P=>{const{name:F,value:B,type:R,checked:C}=P.target;if(F==="assigned_date"){let O=B.replace(/[^0-9/]/g,"");if(O.length>=2&&O.charAt(2)!=="/"&&(O.length===2?O=O+"/":O.length>2&&O.length<=4&&(O=O.substring(0,2)+"/"+O.substring(2))),O.length>=5&&O.charAt(5)!=="/"){if(O.length===5)O=O+"/";else if(O.length>5){const T=O.split("/");T.length===2&&(O=T[0]+"/"+T[1].substring(0,2)+"/"+T[1].substring(2))}}O.length<=10&&c(T=>({...T,[F]:O}))}else c(O=>({...O,[F]:R==="checkbox"?C:B}));u[F]&&h(O=>({...O,[F]:""}))},S=()=>{const P={};return l.card_id||(P.card_id="Card is required"),l.user_id||(P.user_id="User is required"),l.assigned_date||(P.assigned_date="Assigned date is required"),h(P),Object.keys(P).length===0},M=async P=>{if(P.preventDefault(),!!S())try{const F={...l,card_id:parseInt(l.card_id),user_id:parseInt(l.user_id),assigned_date:_S(l.assigned_date)};await s(F)}catch(F){console.error("Form submission error:",F),h({submit:F.response?.data?.message||F.message||"An error occurred while saving"})}},A=P=>{P&&c(F=>({...F,assigned_date:Hg(P)}))},E=()=>{c({card_id:"",user_id:"",assigned_date:Zo(),is_primary:!1}),h({}),e()};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:E}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsx("button",{onClick:E,className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.jsx(lt,{className:"h-6 w-6"})})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"w-full mt-3 text-center sm:mt-0 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:r?"Edit Card Assignment":"Assign Card to User"}),a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[u.submit&&a.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:u.submit})]})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:l.card_id,onChange:w,disabled:j||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.card_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a card..."}),f.map(P=>a.jsxs("option",{value:P.id,children:[P.card_name," (••••",P.card_number_last4,")"]},P.id))]}),u.card_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.card_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"User *"}),a.jsxs("select",{id:"user_id",name:"user_id",value:l.user_id,onChange:w,disabled:j||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.user_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a user..."}),y.map(P=>a.jsx("option",{value:P.id,children:P.username},P.id))]}),u.user_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.user_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"assigned_date",className:"block text-sm font-medium text-gray-700",children:"Assigned Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("assigned_date_picker").showPicker&&document.getElementById("assigned_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"assigned_date",name:"assigned_date",value:l.assigned_date,onChange:w,placeholder:"DD/MM/YYYY",disabled:i,required:!0,className:`pl-10 mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.assigned_date?"border-red-300":"border-gray-300"}`}),a.jsx("input",{type:"date",id:"assigned_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:P=>A(P.target.value),tabIndex:-1})]}),u.assigned_date&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.assigned_date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_primary",name:"is_primary",checked:l.is_primary,onChange:w,disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-700",children:"Set as primary card for this user"})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:E,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i||j,className:"px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Saving...":r?"Update Assignment":"Create Assignment"})]})]})]})})]})]})}):null},SS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,f]=N.useState(1),[p]=N.useState(10),[y,b]=N.useState(!1),[j,_]=N.useState(null),[v,w]=N.useState(!1),[S,M]=N.useState(!1),[A,E]=N.useState(null),[P,F]=N.useState(!1),[B,R]=N.useState(null),C=async()=>{try{r(!0),l(null);const H={search:c,page:h,limit:p},U=await Jo.getAll(H);if(U.success){console.log("📊 Card Users API Response:",U),console.log("📊 Response data structure:",Object.keys(U.data||{}));const G=U.data?.assignments||U.data?.cardUsers||U.data||[];console.log("📊 Extracted assignments:",G.length),G.length>0&&console.log("📊 First assignment sample:",{id:G[0].id,card_name:G[0].card_name,username:G[0].username,card_id:G[0].card_id,user_id:G[0].user_id}),e(G)}else l(U.message||"Failed to fetch card assignments")}catch(H){l(H.response?.data?.message||"Failed to fetch card assignments"),console.error("Error fetching assignments:",H)}finally{r(!1)}};N.useEffect(()=>{const H=setTimeout(()=>{f(1),C()},300);return()=>clearTimeout(H)},[c]),N.useEffect(()=>{C()},[h]),N.useEffect(()=>{C()},[]);const O=(H=null)=>{_(H),b(!0)},T=()=>{b(!1),_(null)},W=async H=>{try{if(w(!0),j){const U=await Jo.update(j.id||j._id,H);if(!U.success)throw new Error(U.message||"Update failed")}else{const U=await Jo.create(H);if(!U.success)throw new Error(U.message||"Creation failed")}T(),await C()}catch(U){throw console.error("Form submission error:",U),U}finally{w(!1)}},ee=H=>{E(H),M(!0)},ae=async()=>{if(A)try{F(!0),R(null);const H=await Jo.delete(A.id||A._id);if(!H.success)throw new Error(H.message||"Delete failed");M(!1),E(null),R(null),await C()}catch(H){console.error("Delete error:",H);const U=H.response?.data?.message||H.message||"Failed to delete assignment";R(U)}finally{F(!1)}},ge=()=>{M(!1),E(null),R(null)},Y=N.useMemo(()=>c.trim()?t.filter(H=>H.card_name?.toLowerCase().includes(c.toLowerCase())||H.username?.toLowerCase().includes(c.toLowerCase())||H.card_number_last4?.includes(c)):t,[t,c]),re=Y.length,V=Math.ceil(re/p),te=(h-1)*p,se=te+p,L=Y.slice(te,se);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(hl,{className:"h-7 w-7 text-blue-600"}),"Card User Assignments"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>C(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(_t,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>O(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:H=>u(H.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search assignments..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((H,U)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},U))})})}):L.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx(hl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by assigning a card to a user."}),!c&&a.jsxs("button",{onClick:()=>O(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(lr,{className:"h-4 w-4 mr-1"}),"Card"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ml,{className:"h-4 w-4 mr-1"}),"User"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ti,{className:"h-4 w-4 mr-1"}),"Assigned Date"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(H=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(lr,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.card_name||"Unknown Card"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["••••",H.card_number_last4||"****"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ml,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.username||"Unknown User"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.assigned_date?cr(H.assigned_date):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.is_primary?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:H.is_primary?a.jsxs(a.Fragment,{children:[a.jsx(Pl,{className:"w-3 h-3 mr-1"})," Primary"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ou,{className:"w-3 h-3 mr-1"})," Secondary"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>O(H),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(sn,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>ee(H),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[a.jsx(gs,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},H.id||H._id))})]})}),V>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",te+1," to ",Math.min(se,re)," of ",re," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(H=>Math.max(1,H-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",V]}),a.jsx("button",{onClick:()=>f(H=>Math.min(V,H+1)),disabled:h>=V,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(kS,{isOpen:y,onClose:T,onSubmit:W,editData:j,isLoading:v}),S&&A&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Oe,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Assignment"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the assignment of "',A.card_name,'" to "',A.username,'"? This action cannot be undone.']}),B&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:B})})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:ae,disabled:P,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:P?"Deleting...":"Delete"}),a.jsx("button",{onClick:ge,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},tu="https://65.20.84.140:3004/api",CS=({account:t,onClose:e,onSave:s,setMessage:r})=>{const[i,l]=N.useState({email:t?.email||"",password:"",authenticator:t?.authenticator||"",phone_number:t?.phone_number||"",status:t?.status||"enabled"}),[c,u]=N.useState(null),[h,f]=N.useState(t?.id_image_path?`${tu.replace("/api","")}${t.id_image_path}`:null),[p,y]=N.useState(!1),[b,j]=N.useState(!1),[_,v]=N.useState({}),w=N.useRef(null),S=!!t,M=()=>{const R=localStorage.getItem("authToken"),C=localStorage.getItem("access_token"),O=R||C;return console.log("🔐 [FacebookAccountForm] Token check:",{authToken:R?"Present":"Missing",accessToken:C?"Present":"Missing",finalToken:O?"Present":"Missing"}),O},A=R=>{const{name:C,value:O}=R.target;l(T=>({...T,[C]:O})),_[C]&&v(T=>({...T,[C]:""}))},E=R=>{const C=R.target.files[0];if(C){if(!C.type.startsWith("image/")){ue.error("Please select an image file");return}if(C.size>5*1024*1024){ue.error("Image size must be less than 5MB");return}u(C);const O=new FileReader;O.onload=T=>{f(T.target.result)},O.readAsDataURL(C)}},P=()=>{u(null),f(t?.id_image_path?`${tu.replace("/api","")}${t.id_image_path}`:null),w.current&&(w.current.value="")},F=()=>{const R={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(R.email="Please enter a valid email address"):R.email="Email is required",!S&&!i.password&&(R.password="Password is required"),i.phone_number&&!/^\+?[\d\s\-\(\)]+$/.test(i.phone_number)&&(R.phone_number="Please enter a valid phone number"),i.authenticator&&i.authenticator.length>500&&(R.authenticator="Authenticator text cannot exceed 500 characters"),v(R),Object.keys(R).length===0},B=async R=>{try{if(R.preventDefault(),console.log("🚀 [FacebookAccountForm] Form submission started"),console.log("📝 [FacebookAccountForm] Form data:",i),console.log("🖼️ [FacebookAccountForm] Selected image:",c?c.name:"None"),!F()){console.log("❌ [FacebookAccountForm] Validation failed"),ue.error("Please fix the errors before submitting");return}console.log("✅ [FacebookAccountForm] Validation passed, starting API call"),j(!0);try{console.log("📝 [FacebookAccountForm] Starting FormData creation...");const C=new FormData;console.log("📝 [FacebookAccountForm] Adding email:",i.email),C.append("email",i.email),i.password?(console.log("📝 [FacebookAccountForm] Adding password: [HIDDEN]"),C.append("password",i.password)):console.log("📝 [FacebookAccountForm] No password provided"),i.authenticator&&(console.log("📝 [FacebookAccountForm] Adding authenticator"),C.append("authenticator",i.authenticator)),i.phone_number&&(console.log("📝 [FacebookAccountForm] Adding phone_number:",i.phone_number),C.append("phone_number",i.phone_number)),console.log("📝 [FacebookAccountForm] Adding status:",i.status),C.append("status",i.status),c?(console.log("📝 [FacebookAccountForm] Adding image file:",c.name),C.append("id_image",c)):console.log("📝 [FacebookAccountForm] No image file selected"),console.log("✅ [FacebookAccountForm] FormData creation completed");const O=S?`/facebook-accounts/${t.id}`:"/facebook-accounts",T=S?"put":"post",W=`${tu}${O}`,ee=M();console.log("🌍 [FacebookAccountForm] API Details:"),console.log("   Method:",T),console.log("   URL:",W),console.log("   Token:",ee?"Present":"Missing"),console.log("   FormData contents:");for(let[ge,Y]of C.entries())console.log(`     ${ge}:`,Y instanceof File?`File(${Y.name})`:Y);const ae=await Le({method:T,url:W,data:C,headers:{Authorization:`Bearer ${ee}`,"Content-Type":"multipart/form-data"}});console.log("✅ [FacebookAccountForm] API Response received:",ae.data),ae.data.success?(ue.success(ae.data.message),s()):ue.error(ae.data.message||"Failed to save account")}catch(C){if(console.error("❌ [FacebookAccountForm] Error saving account:",C),console.log("❌ [FacebookAccountForm] Error details:",{status:C.response?.status,statusText:C.response?.statusText,data:C.response?.data}),C.response?.status===409){v(O=>({...O,email:"This email address is already registered. Please use a different email."})),ue.error("Account with this email already exists");return}if(ot(C))mt({closeForm:()=>{e()},setMessage:r,error:C,context:"saving Facebook account"});else if(C.response?.data?.errors){const O={};C.response.data.errors.forEach(T=>{O[T.path||T.param||T.field]=T.msg||T.message}),v(O),ue.error("Please fix the validation errors")}else ue.error(C.response?.data?.message||"Failed to save account")}finally{console.log("🔄 [FacebookAccountForm] Setting loading to false"),j(!1)}}catch(C){console.error("🚫 [FacebookAccountForm] Outer error caught:",C),ue.error("An unexpected error occurred. Please try again."),j(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-8 mx-auto p-5 border max-w-2xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:S?"Edit Facebook Account":"Add Facebook Account"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lt,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:R=>{console.log("📝 [FacebookAccountForm] Form onSubmit triggered"),B(R)},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Tl,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),a.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:A,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${_.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook email address",required:!0}),_.email&&a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"w-5 h-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:_.email})]}),_.email.includes("already")&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Please use a different email address or edit the existing account."})]})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(E1,{className:"w-4 h-4 inline mr-1"}),"Password ",!S&&"*",S&&a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(leave empty to keep current password)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:i.password,onChange:A,className:`block w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${_.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook password",required:!S}),a.jsx("button",{type:"button",onClick:()=>y(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:p?a.jsx(cl,{className:"w-4 h-4"}):a.jsx(Vr,{className:"w-4 h-4"})})]}),_.password&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Oe,{className:"w-4 h-4 mr-1"}),_.password]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(ji,{className:"w-4 h-4 inline mr-1"}),"Phone Number",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:i.phone_number,onChange:A,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${_.phone_number?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"+1234567890"}),_.phone_number&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Oe,{className:"w-4 h-4 mr-1"}),_.phone_number]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"authenticator",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Ni,{className:"w-4 h-4 inline mr-1"}),"2FA Authenticator Details",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("textarea",{id:"authenticator",name:"authenticator",value:i.authenticator,onChange:A,rows:3,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${_.authenticator?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"2FA backup codes, secret key, or other authenticator details...",maxLength:500}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[_.authenticator?a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Oe,{className:"w-4 h-4 mr-1"}),_.authenticator]}):a.jsx("p",{className:"text-xs text-gray-500",children:"Store 2FA backup codes or secret keys securely"}),a.jsxs("span",{className:"text-xs text-gray-400",children:[i.authenticator.length,"/500"]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(wp,{className:"w-4 h-4 inline mr-1"}),"ID Image",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),h?a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:h,alt:"ID Preview",className:"w-24 h-24 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:P,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(lt,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600",children:c?"New image selected":"Current ID image"}),a.jsx("button",{type:"button",onClick:()=>w.current?.click(),className:"mt-2 text-sm text-primary-600 hover:text-primary-700",children:"Change Image"})]})]}):a.jsx("div",{className:"border-2 border-gray-300 border-dashed rounded-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wp,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("button",{type:"button",onClick:()=>w.current?.click(),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Click to upload"}),a.jsx("span",{className:"text-gray-500",children:" or drag and drop"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG, JPEG up to 5MB"})]})}),a.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:i.status,onChange:A,className:"block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,onClick:R=>{console.log("👆 [FacebookAccountForm] Submit button clicked")},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:b?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),S?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"w-4 h-4 mr-2"}),S?"Update Account":"Create Account"]})})]})]})]})})},Wg="https://65.20.84.140:3004/api",AS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(!1),[c,u]=N.useState(null),[h,f]=N.useState(""),[p,y]=N.useState("all"),[b,j]=N.useState(1),[_,v]=N.useState(1),[w,S]=N.useState(0),[M]=N.useState(10),[A,E]=N.useState(null),[P,F]=N.useState(null),B=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),R=Le.create({baseURL:Wg,headers:{Authorization:`Bearer ${B()}`,"Content-Type":"application/json"}}),C=async(V=1,te="",se="all")=>{try{r(!0);const L=new URLSearchParams({page:V.toString(),limit:M.toString()});te&&L.append("search",te),se&&se!=="all"&&L.append("status",se);const H=await R.get(`/facebook-accounts?${L}`);H.data.success?(e(H.data.data),v(H.data.pagination?.totalPages||1),S(H.data.pagination?.total||0),j(H.data.pagination?.page||1)):ue.error("Failed to fetch Facebook accounts")}catch(L){ot(L)?mt({closeForm:()=>{},setMessage:F,error:L,context:"loading Facebook accounts"}):(console.error("Error fetching accounts:",L),ue.error(L.response?.data?.message||"Failed to fetch accounts"))}finally{r(!1)}};N.useEffect(()=>{C(b,h,p)},[b,h,p]),N.useEffect(()=>{const V=setTimeout(()=>{b===1?C(1,h,p):j(1)},500);return()=>clearTimeout(V)},[h]);const O=V=>{y(V),j(1)},T=()=>{l(!1),u(null),C(b,h,p),ue.success(c?"Account updated successfully!":"Account created successfully!")},W=V=>{u(V),l(!0)},ee=async V=>{try{const te=await R.patch(`/facebook-accounts/${V}/toggle-status`);te.data.success?(ue.success(te.data.message),C(b,h,p)):ue.error(te.data.message||"Failed to toggle account status")}catch(te){ot(te)?mt({closeForm:()=>{},setMessage:F,error:te,context:"updating Facebook account status"}):ue.error(te.response?.data?.message||"Failed to toggle account status")}},ae=async V=>{try{const te=await R.delete(`/facebook-accounts/${V}`);te.data.success?(ue.success("Account deleted successfully!"),E(null),C(b,h,p)):ue.error(te.data.message||"Failed to delete account")}catch(te){ot(te)?mt({closeForm:()=>{E(null)},setMessage:F,error:te,context:"deleting Facebook account"}):ue.error(te.response?.data?.message||"Failed to delete account")}},ge=V=>V?new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Y=({status:V})=>{const se=(H=>{switch(H){case"enabled":return{className:"bg-green-100 text-green-800",icon:Iu,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:$r,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:$r,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:$r,label:"Unknown"}}})(V),L=se.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${se.className}`,children:[a.jsx(L,{className:"w-3 h-3 mr-1"}),se.label]})},re=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>j(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>j(Math.min(_,b+1)),disabled:b===_,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(b-1)*M+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(b*M,w)})," of"," ",a.jsx("span",{className:"font-medium",children:w})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>j(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(_)].map((V,te)=>{const se=te+1;return se===1||se===_||se>=b-2&&se<=b+2?a.jsx("button",{onClick:()=>j(se),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${se===b?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:se},se):se===b-3||se===b+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},se):null}),a.jsx("button",{onClick:()=>j(Math.min(_,b+1)),disabled:b===_,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Accounts"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook account credentials and their status"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Facebook Account"]})})]})}),P&&P.type==="error"&&P.isAccessDenied&&a.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 shadow-lg rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:P.content}),a.jsxs("div",{className:"mt-3 flex space-x-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700",children:"Refresh Page"}),a.jsx("button",{onClick:()=>F(null),className:"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700",children:"Dismiss"})]})]})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by email or phone...",value:h,onChange:V=>f(V.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:V=>O(V.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>C(b,h,p),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(_t,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(_t,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook accounts..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(ml,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook accounts found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"?"Try adjusting your filters":"Add your first Facebook account to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:V.id_image_path?a.jsx("img",{src:`${Wg.replace("/api","")}${V.id_image_path}`,alt:"ID",className:"h-10 w-10 rounded-full object-cover"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:a.jsx(ml,{className:"h-6 w-6 text-gray-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(Tl,{className:"w-4 h-4 mr-1 text-gray-400"}),V.email]}),V.authenticator&&a.jsx("div",{className:"text-xs text-gray-500",children:"2FA Enabled"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:V.phone_number?a.jsxs("div",{className:"flex items-center",children:[a.jsx(ji,{className:"w-4 h-4 mr-1 text-gray-400"}),V.phone_number]}):a.jsx("span",{className:"text-gray-400",children:"No phone"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Y,{status:V.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.jsx("div",{children:ge(V.created_at)}),V.created_by_name&&a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",V.created_by_name]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>ee(V.id),className:`p-1 rounded ${V.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${V.status==="enabled"?"Disable":"Enable"} account`,children:V.status==="enabled"?a.jsx(ul,{className:"w-5 h-5"}):a.jsx(dl,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>W(V),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit account",children:a.jsx(sn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>E(V.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete account",children:a.jsx(gs,{className:"w-4 h-4"})})]})})]},V.id))})]})}),_>1&&a.jsx(re,{})]})}),i&&a.jsx(CS,{account:c,onClose:()=>{l(!1),u(null)},onSave:T,setMessage:F}),A&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(gs,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Account"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook account? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>ae(A),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Account"}),a.jsx("button",{onClick:()=>E(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},ES="https://65.20.84.140:3004/api",PS=({page:t,onClose:e,onSave:s,setMessage:r})=>{const[i,l]=N.useState({facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),[c,u]=N.useState([]),[h,f]=N.useState(!1),[p,y]=N.useState({}),[b,j]=N.useState({}),_=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),v=Le.create({baseURL:ES,headers:{Authorization:`Bearer ${_()}`,"Content-Type":"application/json"}}),w=async()=>{try{const E=await v.get("/facebook-accounts?limit=1000");if(E.data.success){const P=E.data.data||[];console.log("🗺 Fetched Facebook accounts:",P),P.forEach(F=>{console.log("🗺 Account ID:",F.id,"type:",typeof F.id,"email:",F.email)}),u(P)}}catch(E){console.error("Error fetching Facebook accounts:",E),ue.error("Failed to load Facebook accounts")}};N.useEffect(()=>{w(),t?(console.log("🔧 Editing page data:",t),console.log("🔧 facebook_account_id value:",t.facebook_account_id,"type:",typeof t.facebook_account_id),l({facebook_account_id:t.facebook_account_id?String(t.facebook_account_id):"",page_name:t.page_name||"",page_description:t.page_description||"",status:t.status||"enabled"})):l({facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),y({}),j({})},[t]);const S=E=>{const{name:P,value:F}=E.target;l(B=>({...B,[P]:F})),p[P]&&y(B=>{const R={...B};return delete R[P],R}),b[P]&&j(B=>{const R={...B};return delete R[P],R})},M=()=>{const E={};return i.facebook_account_id||(E.facebook_account_id="Facebook account is required"),i.page_name.trim()?i.page_name.trim().length<2?E.page_name="Page name must be at least 2 characters":i.page_name.trim().length>255&&(E.page_name="Page name must be less than 255 characters"):E.page_name="Page name is required",i.page_description&&i.page_description.trim().length>1e3&&(E.page_description="Description must be less than 1000 characters"),i.status||(E.status="Status is required"),j(E),Object.keys(E).length===0},A=async E=>{if(E.preventDefault(),console.log("🔄 Form submit triggered"),console.log("📝 Form data:",i),!M()){console.log("❌ Form validation failed:",b);return}f(!0),y({});try{const P=_();console.log("🔑 Auth token present:",!!P);const F={facebook_account_id:parseInt(i.facebook_account_id),page_name:i.page_name.trim(),page_description:i.page_description.trim()||null,status:i.status};console.log("📤 Submitting data:",F);let B;t?(console.log("✏️ Updating page with ID:",t.id),B=await v.put(`/facebook-pages/${t.id}`,F)):(console.log("➕ Creating new page"),B=await v.post("/facebook-pages",F)),console.log("✅ API Response:",B.data),B.data.success?(ue.success(t?"Page updated successfully!":"Page created successfully!"),s()):(console.log("❌ API returned failure:",B.data),ue.error(B.data.message||"Failed to save page"))}catch(P){console.error("❌ Error saving page:",P),ot(P)?mt({closeForm:()=>{e()},setMessage:r,error:P,context:"saving Facebook page"}):P.response?(console.log("📋 Error response data:",P.response.data),console.log("📋 Error status:",P.response.status),P.response.status===400&&P.response.data.errors?(y(P.response.data.errors),ue.error("Please fix the validation errors")):P.response.status===409?(ue.error("A page with this name already exists for the selected Facebook account"),y({page_name:"Page name already exists for this account"})):ue.error(P.response.data.message||"Failed to save page")):P.request?(console.log("📡 No response received:",P.request),ue.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",P.message),ue.error("An unexpected error occurred"))}finally{f(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:A,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(di,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Facebook Page":"Add Facebook Page"})})]}),a.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_account_id",className:"block text-sm font-medium text-gray-700",children:"Facebook Account *"}),a.jsxs("select",{id:"facebook_account_id",name:"facebook_account_id",value:i.facebook_account_id,onChange:S,disabled:h,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${p.facebook_account_id||b.facebook_account_id?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:"Select Facebook Account"}),c.map(E=>{const P=String(E.id)===i.facebook_account_id;console.log(`🔍 Option ${E.id} (${typeof E.id}) vs formData ${i.facebook_account_id} (${typeof i.facebook_account_id}) = ${P}`);const F=E.status==="enabled"?"":` (${E.status.charAt(0).toUpperCase()+E.status.slice(1)})`;return a.jsxs("option",{value:E.id,disabled:E.status!=="enabled",children:[E.email,F]},E.id)})]}),(p.facebook_account_id||b.facebook_account_id)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.facebook_account_id||b.facebook_account_id]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_name",className:"block text-sm font-medium text-gray-700",children:"Page Name *"}),a.jsx("input",{type:"text",id:"page_name",name:"page_name",value:i.page_name,onChange:S,disabled:h,placeholder:"Enter page name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${p.page_name||b.page_name?"border-red-500":""}`,required:!0,maxLength:255}),(p.page_name||b.page_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.page_name||b.page_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_description",className:"block text-sm font-medium text-gray-700",children:"Page Description"}),a.jsx("textarea",{id:"page_description",name:"page_description",value:i.page_description,onChange:S,disabled:h,placeholder:"Enter page description (optional)",rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${p.page_description||b.page_description?"border-red-500":""}`,maxLength:1e3}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[i.page_description.length,"/1000 characters"]}),(p.page_description||b.page_description)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.page_description||b.page_description]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:i.status,onChange:S,disabled:h,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${p.status||b.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(p.status||b.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.status||b.status]})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,disabled:h,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),t?"Update Page":"Create Page"]})})]})]})})})},MS="https://65.20.84.140:3004/api",TS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(!0),[i,l]=N.useState(!1),[c,u]=N.useState(null),[h,f]=N.useState(""),[p,y]=N.useState("all"),[b,j]=N.useState("all"),[_,v]=N.useState(1),[w,S]=N.useState(1),[M,A]=N.useState(0),[E]=N.useState(10),[P,F]=N.useState(null),[B,R]=N.useState([]),[C,O]=N.useState(null),T=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),W=Le.create({baseURL:MS,headers:{Authorization:`Bearer ${T()}`,"Content-Type":"application/json"}}),ee=async()=>{try{const U=await W.get("/facebook-accounts?limit=1000");U.data.success&&R(U.data.data||[])}catch(U){ot(U)?mt({closeForm:()=>{},setMessage:O,error:U,context:"loading Facebook accounts"}):console.error("Error fetching Facebook accounts:",U)}},ae=async(U=1,G="",z="all",Z="all")=>{try{r(!0);const ie=new URLSearchParams({page:U.toString(),limit:E.toString()});G&&ie.append("search",G),z&&z!=="all"&&ie.append("status",z),Z&&Z!=="all"&&ie.append("facebook_account_id",Z);const xe=await W.get(`/facebook-pages?${ie}`);xe.data.success?(e(xe.data.data||[]),S(xe.data.pagination?.totalPages||1),A(xe.data.pagination?.total||0),v(xe.data.pagination?.page||1)):ue.error("Failed to fetch Facebook pages")}catch(ie){ot(ie)?mt({closeForm:()=>{},setMessage:O,error:ie,context:"loading Facebook pages"}):(console.error("Error fetching pages:",ie),ue.error(ie.response?.data?.message||"Failed to fetch pages"))}finally{r(!1)}};N.useEffect(()=>{ee(),ae(_,h,p,b)},[_,h,p,b]),N.useEffect(()=>{const U=setTimeout(()=>{_===1?ae(1,h,p,b):v(1)},500);return()=>clearTimeout(U)},[h]);const ge=U=>{y(U),v(1)},Y=U=>{j(U),v(1)},re=()=>{l(!1),u(null),ae(_,h,p,b),ue.success(c?"Page updated successfully!":"Page created successfully!")},V=U=>{u(U),l(!0)},te=async U=>{try{const G=await W.patch(`/facebook-pages/${U}/toggle-status`);G.data.success?(ue.success(G.data.message),ae(_,h,p,b)):ue.error("Failed to toggle page status")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:O,error:G,context:"updating Facebook page status"}):ue.error(G.response?.data?.message||"Failed to toggle page status")}},se=async U=>{try{(await W.delete(`/facebook-pages/${U}`)).data.success?(ue.success("Page deleted successfully!"),F(null),ae(_,h,p,b)):ue.error("Failed to delete page")}catch(G){ot(G)?mt({closeForm:()=>{F(null)},setMessage:O,error:G,context:"deleting Facebook page"}):ue.error(G.response?.data?.message||"Failed to delete page")}},L=({status:U})=>{const z=(ie=>{switch(ie){case"enabled":return{className:"bg-green-100 text-green-800",icon:Iu,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:$r,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Ml,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:$r,label:"Unknown"}}})(U),Z=z.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.className}`,children:[a.jsx(Z,{className:"w-3 h-3 mr-1"}),z.label]})},H=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>v(Math.max(1,_-1)),disabled:_===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(w,_+1)),disabled:_===w,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(_-1)*E+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(_*E,M)})," of"," ",a.jsx("span",{className:"font-medium",children:M})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>v(Math.max(1,_-1)),disabled:_===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(w)].map((U,G)=>{const z=G+1;return z===1||z===w||z>=_-2&&z<=_+2?a.jsx("button",{onClick:()=>v(z),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${z===_?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:z},z):z===_-3||z===_+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},z):null}),a.jsx("button",{onClick:()=>v(Math.min(w,_+1)),disabled:_===w,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Pages"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook pages linked to your accounts"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Facebook Page"]})})]})}),C&&C.type==="error"&&C.isAccessDenied&&a.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 shadow-lg rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:C.content}),a.jsxs("div",{className:"mt-3 flex space-x-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700",children:"Refresh Page"}),a.jsx("button",{onClick:()=>O(null),className:"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700",children:"Dismiss"})]})]})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by page name...",value:h,onChange:U=>f(U.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:U=>ge(U.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{children:a.jsxs("select",{value:b,onChange:U=>Y(U.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Accounts"}),B.map(U=>a.jsx("option",{value:U.id,children:U.email},U.id))]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>ae(_,h,p,b),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(_t,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(_t,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook pages..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(di,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook pages found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"||b!=="all"?"Try adjusting your filters":"Add your first Facebook page to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(di,{className:"h-6 w-6 text-blue-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.page_name}),U.page_description&&a.jsx("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:U.page_description})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(A1,{className:"w-4 h-4 mr-1 text-gray-400"}),U.facebook_account_email||`Account #${U.facebook_account_id}`]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(L,{status:U.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>te(U.id),className:`p-1 rounded ${U.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${U.status==="enabled"?"Disable":"Enable"} page`,children:U.status==="enabled"?a.jsx(ul,{className:"w-5 h-5"}):a.jsx(dl,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>V(U),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit page",children:a.jsx(sn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(U.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete page",children:a.jsx(gs,{className:"w-4 h-4"})})]})})]},U.id))})]})}),w>1&&a.jsx(H,{})]})}),i&&a.jsx(PS,{page:c,onClose:()=>{l(!1),u(null)},onSave:re,setMessage:O}),P&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(gs,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Page"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook page? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>se(P),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Page"}),a.jsx("button",{onClick:()=>F(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},Vg="https://65.20.84.140:3004/api",DS=({bm:t,onClose:e,onSave:s,setMessage:r})=>{const[i,l]=N.useState({bm_name:"",email:"",phone_number:"",status:"enabled"}),[c,u]=N.useState([]),[h,f]=N.useState(!1),[p,y]=N.useState({}),[b,j]=N.useState({});N.useEffect(()=>{(async()=>{try{const E=await Le.get(`${Vg}/facebook-accounts`);Array.isArray(E.data)?u(E.data):E.data.data&&Array.isArray(E.data.data)?u(E.data.data):(console.error("Invalid Facebook accounts response format:",E.data),ue.error("Failed to load Facebook accounts: Invalid data format"),u([]))}catch(E){ot(E)?mt():(console.error("Error fetching Facebook accounts:",E),ue.error("Failed to load Facebook accounts")),u([])}})()},[]);const _=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),v=Le.create({baseURL:Vg,headers:{Authorization:`Bearer ${_()}`,"Content-Type":"application/json"}});N.useEffect(()=>{l(t?{bm_name:t.bm_name||"",email:t.email||"",phone_number:t.phone_number||"",status:t.status||"enabled"}:{bm_name:"",email:"",phone_number:"",status:"enabled"}),y({}),j({})},[t]);const w=A=>{const{name:E,value:P}=A.target;l(F=>({...F,[E]:P})),p[E]&&y(F=>{const B={...F};return delete B[E],B}),b[E]&&j(F=>{const B={...F};return delete B[E],B})},S=()=>{const A={};return i.bm_name.trim()?i.bm_name.trim().length<2?A.bm_name="Business Manager name must be at least 2 characters":i.bm_name.trim().length>255&&(A.bm_name="Business Manager name must be less than 255 characters"):A.bm_name="Business Manager name is required",i.email||(A.email="Please select an email address"),i.phone_number&&i.phone_number.trim().length>50&&(A.phone_number="Phone number must be less than 50 characters"),i.status||(A.status="Status is required"),j(A),Object.keys(A).length===0},M=async A=>{if(A.preventDefault(),console.log("🔄 BM Form submit triggered"),console.log("📝 Form data:",i),!S()){console.log("❌ Form validation failed:",b);return}f(!0),y({});try{const E=_();console.log("🔑 Auth token present:",!!E);const P={bm_name:i.bm_name.trim(),email:i.email,phone_number:i.phone_number.trim()||null,status:i.status};console.log("📤 Submitting BM data:",P);let F;t?(console.log("✏️ Updating BM with ID:",t.id),F=await v.put(`/bm/${t.id}`,P)):(console.log("➕ Creating new BM"),F=await v.post("/bm",P)),console.log("✅ API Response:",F.data),F.data.success?(ue.success(t?"Business Manager updated successfully!":"Business Manager created successfully!"),s()):(console.log("❌ API returned failure:",F.data),ue.error(F.data.message||"Failed to save Business Manager"))}catch(E){console.error("❌ Error saving BM:",E),ot(E)?mt({closeForm:()=>{e()},setMessage:r,error:E,context:"saving Business Manager"}):E.response?(console.log("📋 Error response data:",E.response.data),console.log("📋 Error status:",E.response.status),E.response.status===400&&E.response.data.errors?(y(E.response.data.errors),ue.error("Please fix the validation errors")):E.response.status===409?ue.error(E.response.data?.message||"Conflict: resource already exists"):ue.error(E.response.data.message||"Failed to save Business Manager")):E.request?(console.log("📡 No response received:",E.request),ue.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",E.message),ue.error("An unexpected error occurred"))}finally{f(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(tn,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Business Manager":"Add Business Manager"})})]}),a.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bm_name",className:"block text-sm font-medium text-gray-700",children:"Business Manager Name *"}),a.jsx("input",{type:"text",id:"bm_name",name:"bm_name",value:i.bm_name,onChange:w,disabled:h,placeholder:"Enter Business Manager name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${p.bm_name||b.bm_name?"border-red-500":""}`,required:!0,maxLength:255}),(p.bm_name||b.bm_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.bm_name||b.bm_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),a.jsxs("select",{id:"email",name:"email",value:i.email,onChange:w,disabled:h,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${p.email||b.email?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:"Select an Email Address"}),Array.isArray(c)&&c.map(A=>a.jsx("option",{value:A?.email,children:A?.email},A?.id))]}),(p.email||b.email)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.email||b.email]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ji,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:i.phone_number,onChange:w,disabled:h,placeholder:"Enter phone number (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${p.phone_number||b.phone_number?"border-red-500":""}`,maxLength:50})]}),(p.phone_number||b.phone_number)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.phone_number||b.phone_number]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:i.status,onChange:w,disabled:h,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${p.status||b.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(p.status||b.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),p.status||b.status]})]})]}),i.status==="disabled"&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oe,{className:"h-4 w-4 text-yellow-600 mr-2"}),a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Warning:"})," Disabling this Business Manager will automatically disable all associated Ads Managers."]})]})}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,disabled:h,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),t?"Update BM":"Create BM"]})})]})]})})})},RS="https://65.20.84.140:3004/api",FS=({adsManager:t,selectedBMId:e,onClose:s,onSave:r,setMessage:i})=>{const[l,c]=N.useState({ads_manager_name:"",email:"",phone_number:"",status:"enabled",bm_id:e||""}),[u,h]=N.useState([]),[f,p]=N.useState(!1),[y,b]=N.useState(!1),[j,_]=N.useState({}),[v,w]=N.useState({}),S=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),M=Le.create({baseURL:RS,headers:{Authorization:`Bearer ${S()}`,"Content-Type":"application/json"}});N.useEffect(()=>{(async()=>{b(!0);try{const R=await M.get("/bm/dropdown");R.data.success?h(R.data.data):(console.log("Failed to load BM options:",R.data.message),ue.error("Failed to load Business Manager options"))}catch(R){console.error("Error loading BM options:",R),ue.error("Failed to load Business Manager options")}finally{b(!1)}})()},[]),N.useEffect(()=>{c(t?{ads_manager_name:t.ads_manager_name||"",email:t.email||"",phone_number:t.phone_number||"",status:t.status||"enabled",bm_id:t.bm_id||e||""}:{ads_manager_name:"",email:"",phone_number:"",status:"enabled",bm_id:e||""}),_({}),w({})},[t,e]);const A=B=>{const{name:R,value:C}=B.target;c(O=>({...O,[R]:C})),j[R]&&_(O=>{const T={...O};return delete T[R],T}),v[R]&&w(O=>{const T={...O};return delete T[R],T})},E=()=>{const B={};return l.ads_manager_name.trim()?l.ads_manager_name.trim().length<2?B.ads_manager_name="Ads Manager name must be at least 2 characters":l.ads_manager_name.trim().length>255&&(B.ads_manager_name="Ads Manager name must be less than 255 characters"):B.ads_manager_name="Ads Manager name is required",l.email&&l.email.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email.trim())||(B.email="Please provide a valid email address")),l.phone_number&&l.phone_number.trim().length>50&&(B.phone_number="Phone number must be less than 50 characters"),l.bm_id||(B.bm_id="Business Manager is required"),l.status||(B.status="Status is required"),w(B),Object.keys(B).length===0},P=async B=>{if(B.preventDefault(),console.log("🔄 Ads Manager Form submit triggered"),console.log("📝 Form data:",l),!E()){console.log("❌ Form validation failed:",v);return}p(!0),_({});try{const R=S();console.log("🔑 Auth token present:",!!R);const C={ads_manager_name:l.ads_manager_name.trim(),email:l.email.trim()||null,phone_number:l.phone_number.trim()||null,bm_id:parseInt(l.bm_id),status:l.status};console.log("📤 Submitting Ads Manager data:",C);let O;t?(console.log("✏️ Updating Ads Manager with ID:",t.id),O=await M.put(`/ads-managers/${t.id}`,C)):(console.log("➕ Creating new Ads Manager"),O=await M.post("/ads-managers",C)),console.log("✅ API Response:",O.data),O.data.success?(ue.success(t?"Ads Manager updated successfully!":"Ads Manager created successfully!"),r()):(console.log("❌ API returned failure:",O.data),ue.error(O.data.message||"Failed to save Ads Manager"))}catch(R){if(console.error("❌ Error saving Ads Manager:",R),ot(R))mt({closeForm:()=>{s()},setMessage:i,error:R,context:"saving Ads Manager"});else if(R.response)if(console.log("📋 Error response data:",R.response.data),console.log("📋 Error status:",R.response.status),console.log("📋 Error message:",R.response.data.message),R.response.status===400&&R.response.data.errors)_(R.response.data.errors),ue.error("Please fix the validation errors");else if(R.response.status===409){const C=R.response.data.message||"Conflict error occurred";C.includes("email")?(ue.error("An Ads Manager with this email already exists"),_({email:"Email already exists"})):C.includes("name")||C.includes("already exists")?(ue.error("An Ads Manager with this name already exists for this Business Manager"),_({ads_manager_name:"This name already exists for this Business Manager"})):ue.error(C)}else ue.error(R.response.data.message||"Failed to save Ads Manager");else R.request?(console.log("📡 No response received:",R.request),ue.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",R.message),ue.error("An unexpected error occurred"))}finally{p(!1)}},F=()=>{const B=u.find(R=>R.id===parseInt(l.bm_id));return B?B.bm_name:"Unknown Business Manager"};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:P,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(hl,{className:"h-6 w-6 text-green-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Ads Manager":"Add Ads Manager"})})]}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"ads_manager_name",className:"block text-sm font-medium text-gray-700",children:"Ads Manager Name *"}),a.jsx("input",{type:"text",id:"ads_manager_name",name:"ads_manager_name",value:l.ads_manager_name,onChange:A,disabled:f,placeholder:"Enter Ads Manager name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${j.ads_manager_name||v.ads_manager_name?"border-red-500":""}`,required:!0,maxLength:255}),(j.ads_manager_name||v.ads_manager_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),j.ads_manager_name||v.ads_manager_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Tl,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:A,disabled:f,placeholder:"Enter email address (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${j.email||v.email?"border-red-500":""}`})]}),(j.email||v.email)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),j.email||v.email]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ji,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:l.phone_number,onChange:A,disabled:f,placeholder:"Enter phone number (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${j.phone_number||v.phone_number?"border-red-500":""}`,maxLength:50})]}),(j.phone_number||v.phone_number)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),j.phone_number||v.phone_number]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bm_id",className:"block text-sm font-medium text-gray-700",children:"Business Manager *"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(tn,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("select",{id:"bm_id",name:"bm_id",value:l.bm_id,onChange:A,disabled:f||y,className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${j.bm_id||v.bm_id?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:y?"Loading Business Managers...":"Select Business Manager"}),u.map(B=>a.jsx("option",{value:B.id,children:B.bm_name},B.id))]})]}),(j.bm_id||v.bm_id)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),j.bm_id||v.bm_id]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:l.status,onChange:A,disabled:f,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${j.status||v.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(j.status||v.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Oe,{className:"h-4 w-4 mr-1"}),j.status||v.status]})]})]}),l.bm_id&&!y&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(tn,{className:"h-4 w-4 text-blue-600 mr-2"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Assigned to:"})," ",F()]})]})}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:f,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:f||y,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),t?"Update Ads Manager":"Create Ads Manager"]})})]})]})})})},LS="https://65.20.84.140:3004/api",IS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState(null),[i,l]=N.useState([]),[c,u]=N.useState(!0),[h,f]=N.useState(!1),[p,y]=N.useState(!1),[b,j]=N.useState(!1),[_,v]=N.useState(null),[w,S]=N.useState(null),[M,A]=N.useState(""),[E,P]=N.useState("all"),[F,B]=N.useState(null),R=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),C=Le.create({baseURL:LS,headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}),O=async(U="",G="all")=>{try{console.log("🔍 Frontend: fetchBMs called with:",{search:U,status:G}),u(!0);const z=new URLSearchParams({limit:"100"});U&&z.append("search",U),G&&G!=="all"&&z.append("status",G);const Z=`/bm?${z}`;console.log("🔍 Frontend: API URL:",Z);const ie=await C.get(Z);ie.data.success?(e(ie.data.data||[]),!s&&ie.data.data.length>0&&r(ie.data.data[0])):ue.error("Failed to fetch Business Managers")}catch(z){ot(z)?mt({closeForm:()=>{},setMessage:B,error:z,context:"loading Business Managers"}):(console.error("Error fetching BMs:",z),ue.error(z.response?.data?.message||"Failed to fetch BMs"))}finally{u(!1)}},T=async U=>{if(!U){l([]);return}try{f(!0);const G=await C.get(`/ads-managers/bm/${U}`);G.data.success?l(G.data.data||[]):ue.error("Failed to fetch Ads Managers")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:B,error:G,context:"loading Ads Managers"}):(console.error("Error fetching Ads Managers:",G),ue.error(G.response?.data?.message||"Failed to fetch Ads Managers"))}finally{f(!1)}};N.useEffect(()=>{console.log("🔍 Frontend: useEffect triggered - searchTerm:",M,"statusFilter:",E),O(M,E)},[M,E]),N.useEffect(()=>{s?T(s.id):l([])},[s]);const W=U=>{r(U)},ee=()=>{y(!1),v(null),O(M,E),ue.success(_?"BM updated successfully!":"BM created successfully!")},ae=()=>{j(!1),S(null),s&&T(s.id),ue.success(w?"Ads Manager updated successfully!":"Ads Manager created successfully!")},ge=U=>{v(U),y(!0)},Y=U=>{S(U),j(!0)},re=async U=>{try{const G=await C.patch(`/bm/${U}/toggle-status`);G.data.success?(ue.success(G.data.message),O(M,E),s&&s.id===U&&T(U)):ue.error("Failed to toggle BM status")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:B,error:G,context:"updating Business Manager status"}):(console.error("Error toggling BM status:",G),ue.error(G.response?.data?.message||"Failed to toggle status"))}},V=async U=>{try{const G=await C.patch(`/ads-managers/${U}/toggle-status`);G.data.success?(ue.success(G.data.message),s&&T(s.id)):ue.error("Failed to toggle Ads Manager status")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:B,error:G,context:"updating Ads Manager status"}):(console.error("Error toggling Ads Manager status:",G),ue.error(G.response?.data?.message||"Failed to toggle status"))}},te=async U=>{if(window.confirm("Are you sure you want to delete this Business Manager? This will also delete all associated Ads Managers."))try{(await C.delete(`/bm/${U}`)).data.success?(ue.success("BM deleted successfully!"),O(M,E),s&&s.id===U&&r(null)):ue.error("Failed to delete BM")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:B,error:G,context:"deleting Business Manager"}):(console.error("Error deleting BM:",G),ue.error(G.response?.data?.message||"Failed to delete BM"))}},se=async U=>{if(window.confirm("Are you sure you want to delete this Ads Manager?"))try{(await C.delete(`/ads-managers/${U}`)).data.success?(ue.success("Ads Manager deleted successfully!"),s&&T(s.id)):ue.error("Failed to delete Ads Manager")}catch(G){ot(G)?mt({closeForm:()=>{},setMessage:B,error:G,context:"deleting Ads Manager"}):(console.error("Error deleting Ads Manager:",G),ue.error(G.response?.data?.message||"Failed to delete Ads Manager"))}},L=U=>U?new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",H=({status:U,type:G="bm"})=>{const Z=(xe=>{switch(xe){case"enabled":return{className:"bg-green-100 text-green-800",icon:Iu,label:"Active"};case"disabled":return{className:"bg-red-100 text-red-800",icon:$r,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Ml,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:Oe,label:"Unknown"}}})(U),ie=Z.icon;return a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Z.className}`,children:[a.jsx(ie,{className:"w-3 h-3 mr-1"}),Z.label]})};return a.jsxs(a.Fragment,{children:[F&&F.type==="error"&&F.isAccessDenied&&a.jsx("div",{className:"bg-red-100 border-2 border-red-300 shadow-lg rounded-lg p-4 m-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Access Denied"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:F.content}),a.jsxs("div",{className:"mt-3 flex space-x-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700",children:"Refresh Page"}),a.jsx("button",{onClick:()=>B(null),className:"bg-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-700",children:"Dismiss"})]})]})]})}),a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsxs("div",{className:"w-1/3 bg-white border-r border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(tn,{className:"h-6 w-6 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Business Managers"})]}),a.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ze,{className:"w-4 h-4 mr-1"}),"Add BM"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search Business Managers...",value:M,onChange:U=>A(U.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("select",{value:E,onChange:U=>P(U.target.value),className:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended"})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:c?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(_t,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading Business Managers..."})]}):t.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(tn,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No Business Managers found"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:M||E!=="all"?"Try adjusting your filters":"Create your first Business Manager to get started"})]}):a.jsx("div",{className:"divide-y divide-gray-200",children:t.map(U=>a.jsx("div",{className:`p-4 cursor-pointer transition-colors hover:bg-gray-50 ${s?.id===U.id?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>W(U),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:U.bm_name}),a.jsx(H,{status:U.status})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Tl,{className:"w-3 h-3 mr-1"}),a.jsx("span",{className:"truncate",children:U.email})]}),U.phone_number&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ji,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:U.phone_number})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(qr,{className:"w-3 h-3 mr-1"}),a.jsxs("span",{children:[U.ads_managers_count||0," Ads Managers"]})]})]})]}),a.jsxs("div",{className:"ml-2 flex items-center space-x-1",children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),re(U.id)},className:`p-1 rounded hover:bg-gray-200 ${U.status==="enabled"?"text-red-600":"text-green-600"}`,title:`${U.status==="enabled"?"Disable":"Enable"} BM`,children:U.status==="enabled"?a.jsx(ul,{className:"w-4 h-4"}):a.jsx(dl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:G=>{G.stopPropagation(),ge(U)},className:"p-1 rounded hover:bg-gray-200 text-blue-600",title:"Edit BM",children:a.jsx(sn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:G=>{G.stopPropagation(),te(U.id)},className:"p-1 rounded hover:bg-gray-200 text-red-600",title:"Delete BM",children:a.jsx(gs,{className:"w-4 h-4"})})]})]})},U.id))})})]}),a.jsx("div",{className:"flex-1 bg-white flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(si,{className:"h-6 w-6 text-green-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ads Managers"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["for ",s.bm_name]})]})]}),a.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:[a.jsx(Ze,{className:"w-4 h-4 mr-1"}),"Add Ads Manager"]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(H,{status:s.status}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:s.bm_name}),a.jsx("div",{className:"text-gray-500",children:s.email})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," Ads Manager",i.length!==1?"s":""]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_t,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading Ads Managers..."})]}):i.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(si,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No Ads Managers found"}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Create the first Ads Manager for ",s.bm_name]}),a.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add First Ads Manager"]})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(U=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(H,{status:U.status,type:"ads"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>V(U.id),className:`p-1 rounded hover:bg-gray-200 ${U.status==="enabled"?"text-red-600":"text-green-600"}`,title:`${U.status==="enabled"?"Disable":"Enable"} Ads Manager`,children:U.status==="enabled"?a.jsx(ul,{className:"w-4 h-4"}):a.jsx(dl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Y(U),className:"p-1 rounded hover:bg-gray-200 text-blue-600",title:"Edit Ads Manager",children:a.jsx(sn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>se(U.id),className:"p-1 rounded hover:bg-gray-200 text-red-600",title:"Delete Ads Manager",children:a.jsx(gs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:U.ads_manager_name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",L(U.created_at)]})]})]},U.id))})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(tn,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Business Manager"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Choose a Business Manager from the left panel to view and manage its Ads Managers"}),t.length===0&&a.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Create First Business Manager"]})]})})})]}),p&&a.jsx(DS,{bm:_,onClose:()=>{y(!1),v(null)},onSave:ee,setMessage:B}),b&&s&&a.jsx(FS,{adsManager:w,selectedBM:s,onClose:()=>{j(!1),S(null)},onSave:ae,setMessage:B})]})},ks="/reports",ht={generateReports:async t=>{try{return(await Ct.post(`${ks}/generate`,t)).data}catch(e){throw console.error("Reports Service - Generate reports error:",e),e.response?.data||e}},syncReports:async t=>{try{return(await Ct.post(`${ks}/sync`,t)).data}catch(e){throw console.error("Reports Service - Sync reports error:",e),e.response?.data||e}},convertDateFormat:t=>{if(!t)return"";const e=t.split("/");if(e.length===3){const[s,r,i]=e;return`${i}-${r.padStart(2,"0")}-${s.padStart(2,"0")}`}return t},getAllReports:async(t={})=>{try{const{date_from:e,date_to:s,campaign_id:r,brand_id:i,...l}=t,c=ht.formatDate(new Date),u=(()=>{const b=new Date;return b.setDate(b.getDate()-30),ht.formatDate(b)})(),h=e?ht.convertDateFormat(e):u,f=s?ht.convertDateFormat(s):c,p={dateFrom:h,dateTo:f};r&&(p.campaignId=r),i&&(p.brandId=i);const y=await Ct.post(`${ks}/generate`,p);if(y.data.success){const b=y.data.data.reports||[],j=parseInt(l.page)||1,_=parseInt(l.limit)||20,v=(j-1)*_,w=v+_,S=b.slice(v,w);return{success:!0,message:y.data.message,data:S,meta:{pagination:{currentPage:j,totalPages:Math.ceil(b.length/_),totalCount:b.length,limit:_,hasNext:w<b.length,hasPrev:j>1},summary:y.data.data.summary}}}else return y.data}catch(e){throw console.error("Reports Service - Get all reports error:",e),e.response?.data||e}},getReportById:async t=>{try{return(await Ct.get(`${ks}/${t}`)).data}catch(e){throw console.error("Reports Service - Get report by ID error:",e),e.response?.data||e}},createReport:async t=>{try{return(await Ct.post(ks,t)).data}catch(e){throw console.error("Reports Service - Create report error:",e),e.response?.data||e}},updateReport:async(t,e)=>{try{return(await Ct.put(`${ks}/${t}`,e)).data}catch(s){throw console.error("Reports Service - Update report error:",s),s.response?.data||s}},deleteReport:async t=>{try{return(await Ct.delete(`${ks}/${t}`)).data}catch(e){throw console.error("Reports Service - Delete report error:",e),e.response?.data||e}},deleteReportsInRange:async t=>{try{return(await Ct.delete(`${ks}/range`,{data:t})).data}catch(e){throw console.error("Reports Service - Delete reports in range error:",e),e.response?.data||e}},getFilterOptions:async()=>{try{return(await Ct.get(`${ks}/filters`)).data}catch(t){throw console.error("Reports Service - Get filter options error:",t),t.response?.data||t}},getReportStats:async(t={})=>{try{return(await Ct.get(`${ks}/stats`,{params:t})).data}catch(e){throw console.error("Reports Service - Get report stats error:",e),e.response?.data||e}},getDashboardStats:async(t={})=>{try{return(await Ct.get(`${ks}/dashboard`,{params:t})).data}catch(e){throw console.error("Reports Service - Get dashboard stats error:",e),e.response?.data||e}},formatDate:t=>t?new Date(t).toISOString().split("T")[0]:"",getDateRange:t=>{const e=new Date,s=new Date(e);switch(s.setDate(e.getDate()-1),t){case"today":return{dateFrom:ht.formatDate(e),dateTo:ht.formatDate(e)};case"yesterday":return{dateFrom:ht.formatDate(s),dateTo:ht.formatDate(s)};case"last7days":const r=new Date(e);return r.setDate(e.getDate()-7),{dateFrom:ht.formatDate(r),dateTo:ht.formatDate(s)};case"last30days":const i=new Date(e);return i.setDate(e.getDate()-30),{dateFrom:ht.formatDate(i),dateTo:ht.formatDate(s)};case"thisMonth":const l=new Date(e.getFullYear(),e.getMonth(),1);return{dateFrom:ht.formatDate(l),dateTo:ht.formatDate(s)};case"lastMonth":const c=new Date(e.getFullYear(),e.getMonth()-1,1),u=new Date(e.getFullYear(),e.getMonth(),0);return{dateFrom:ht.formatDate(c),dateTo:ht.formatDate(u)};default:return{dateFrom:ht.formatDate(s),dateTo:ht.formatDate(s)}}}},su=({width:t="w-full",height:e="h-4",className:s=""})=>a.jsx("div",{className:`${t} ${e} bg-gray-200 rounded animate-pulse ${s}`}),OS=()=>{const[t,e]=N.useState([]),[s,r]=N.useState([]),[i,l]=N.useState([]),[c,u]=N.useState(!0),[h,f]=N.useState(""),[p,y]=N.useState({campaign_name:"",brand_name:"",date_preset:"",date_from:"",date_to:""}),[b,j]=N.useState({page:1,limit:20,totalPages:0,totalCount:0,hasNext:!1,hasPrev:!1});N.useEffect(()=>{(p.date_from||p.date_to||p.campaign_name||p.brand_name||b.page>1)&&v()},[p,b.page,b.limit]),N.useEffect(()=>{_()},[]);const _=async()=>{try{u(!0);const C={page:1,limit:1e3};console.log("Loading all reports for dropdowns with params:",C);const O=await ht.getAllReports(C);if(console.log("All reports response:",O),O.success){const T=O.data||[],W=[...new Set(T.map(ae=>ae.campaign_name).filter(ae=>ae&&ae!=="-"&&ae!==null&&ae!==void 0))].sort(),ee=[...new Set(T.map(ae=>ae.brand_name).filter(ae=>ae&&ae!=="-"&&ae!==null&&ae!==void 0))].sort();console.log("Extracted unique campaigns:",W),console.log("Extracted unique brands:",ee),r(W),l(ee),e(T.slice(0,b.limit)),j(ae=>({...ae,totalCount:T.length,totalPages:Math.ceil(T.length/b.limit),hasNext:T.length>b.limit,hasPrev:!1})),f("")}else f(O.message||"Failed to load reports"),e([]),r([]),l([])}catch(C){console.error("Error loading all reports:",C),f(C.message||"Failed to load reports"),e([]),r([]),l([])}finally{u(!1)}},v=async()=>{try{u(!0);const C={page:b.page,limit:b.limit,...Object.fromEntries(Object.entries(p).filter(([T,W])=>W!==""))};console.log("Loading reports with params:",C),console.log("Current filters:",p);const O=await ht.getAllReports(C);if(console.log("Reports response:",O),O.success){let T=O.data||[];p.campaign_name&&(T=T.filter(W=>W.campaign_name===p.campaign_name)),p.brand_name&&(T=T.filter(W=>W.brand_name===p.brand_name)),e(T),O.meta?.pagination&&j(W=>({...W,...O.meta.pagination})),f("")}else f(O.message||"Failed to load reports"),e([])}catch(C){console.error("Error loading reports:",C),f(C.message||"Failed to load reports"),e([])}finally{u(!1)}},w=C=>{const O=new Date,T=new Date(O);T.setDate(T.getDate()-1);let W,ee;switch(C){case"today":W=ee=O.toISOString().split("T")[0];break;case"yesterday":W=ee=T.toISOString().split("T")[0];break;case"last7days":const ae=new Date(O);ae.setDate(ae.getDate()-7),W=ae.toISOString().split("T")[0],ee=O.toISOString().split("T")[0];break;case"lastMonth":const ge=new Date(O);ge.setMonth(ge.getMonth()-1),W=ge.toISOString().split("T")[0],ee=O.toISOString().split("T")[0];break;case"last3Months":const Y=new Date(O);Y.setMonth(Y.getMonth()-3),W=Y.toISOString().split("T")[0],ee=O.toISOString().split("T")[0];break;default:return}y(ae=>({...ae,date_preset:C,date_from:W,date_to:ee})),j(ae=>({...ae,page:1}))},S=(C,O)=>{y(T=>({...T,[C]:O})),j(T=>({...T,page:1}))},M=()=>{y({campaign_name:"",brand_name:"",date_preset:"",date_from:"",date_to:""}),j(C=>({...C,page:1})),_()},A=C=>{j(O=>({...O,page:C}))},E=C=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(C||0),P=C=>new Intl.NumberFormat("en-US").format(C||0),F=C=>C?new Date(C).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",B=C=>C?new Date(C+"T00:00:00").toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"",R=C=>{if(!C)return"";const O=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,T=C.match(O);if(T){const W=T[1].padStart(2,"0"),ee=T[2].padStart(2,"0");return`${T[3]}-${ee}-${W}`}return""};return c&&t.length===0?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(su,{className:"h-8 w-64 mb-4"}),a.jsx(su,{className:"h-6 w-96"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3,4,5].map(C=>a.jsx(su,{className:"h-20 w-full"},C))})]}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reports"}),a.jsx("p",{className:"text-gray-600",children:"Manage and view your advertising campaign reports"})]}),a.jsx("div",{className:"mb-6 flex flex-wrap gap-3",children:a.jsxs("button",{onClick:_,disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors flex items-center disabled:opacity-50",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})}),a.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Date Filters"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last7days",label:"Last 7 Days"},{value:"lastMonth",label:"Last Month"},{value:"last3Months",label:"Last 3 Months"}].map(C=>a.jsx("button",{type:"button",onClick:()=>w(C.value),className:`px-3 py-1 text-xs border rounded-md transition-colors ${p.date_preset===C.value?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:C.label},C.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),a.jsxs("select",{value:p.brand_name,onChange:C=>S("brand_name",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Brands"}),i.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign"}),a.jsxs("select",{value:p.campaign_name,onChange:C=>S("campaign_name",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Campaigns"}),s.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date (dd/mm/yyyy)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"dd/mm/yyyy",value:p.date_from?B(p.date_from):"",onChange:C=>{const T=C.target.value.replace(/[^0-9/]/g,"");let W=T;if(T.length>=2&&!T.includes("/")&&(W=T.slice(0,2)+"/"+T.slice(2)),T.length>=5&&T.split("/").length===2){const ee=T.split("/");W=ee[0]+"/"+ee[1].slice(0,2)+"/"+ee[1].slice(2)}if(W.length<=10){const ee=R(W);S("date_from",ee),S("date_preset","")}},onBlur:C=>{const O=C.target.value;O&&!/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.test(O)&&alert("Please enter date in dd/mm/yyyy format")},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("input",{type:"date",value:p.date_from,onChange:C=>{S("date_from",C.target.value),S("date_preset","")},className:"absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 w-6 h-6 cursor-pointer",onFocus:C=>C.target.showPicker&&C.target.showPicker(),style:{pointerEvents:"all"}}),a.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date (dd/mm/yyyy)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"dd/mm/yyyy",value:p.date_to?B(p.date_to):"",onChange:C=>{const T=C.target.value.replace(/[^0-9/]/g,"");let W=T;if(T.length>=2&&!T.includes("/")&&(W=T.slice(0,2)+"/"+T.slice(2)),T.length>=5&&T.split("/").length===2){const ee=T.split("/");W=ee[0]+"/"+ee[1].slice(0,2)+"/"+ee[1].slice(2)}if(W.length<=10){const ee=R(W);S("date_to",ee),S("date_preset","")}},onBlur:C=>{const O=C.target.value;O&&!/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.test(O)&&alert("Please enter date in dd/mm/yyyy format")},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("input",{type:"date",value:p.date_to,onChange:C=>{S("date_to",C.target.value),S("date_preset","")},className:"absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 w-6 h-6 cursor-pointer",onFocus:C=>C.target.showPicker&&C.target.showPicker(),style:{pointerEvents:"all"}}),a.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:M,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-md font-medium transition-colors",children:"Clear Filters"})})]})]}),h&&a.jsx(Ul,{message:h,className:"mb-6"}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Reports (",b.totalCount,")"]})}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(b.page-1)*b.limit+1," to ",Math.min(b.page*b.limit,b.totalCount)," of ",b.totalCount]})]}),t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating some reports."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost Per Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost Per Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost Per Lead"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((C,O)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(C.report_date||C.data_date||C.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.campaign_name||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.campaign_type||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.brand_name||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(C.facebook_leads||C.facebook_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(C.zoho_leads||C.zoho_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:P(C.total_leads||C.leads||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E(C.facebook_cost_per_lead||(C.amount_spend||C.spent||0)/(C.facebook_leads||C.facebook_result||1))}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E(C.zoho_cost_per_lead||(C.amount_spend||C.spent||0)/(C.zoho_leads||C.zoho_result||1))}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:E(C.total_cost_per_lead||0)})]},C.id||`${C.campaign_id}-${C.report_date}-${O}`))})]})}),b.totalPages>1&&a.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex justify-between flex-1 sm:hidden",children:[a.jsx("button",{onClick:()=>A(b.page-1),disabled:!b.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>A(b.page+1),disabled:!b.hasNext,className:"relative ml-3 inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",a.jsx("span",{className:"font-medium",children:b.page})," of"," ",a.jsx("span",{className:"font-medium",children:b.totalPages})]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[a.jsxs("button",{onClick:()=>A(b.page-1),disabled:!b.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{className:"sr-only",children:"Previous"}),a.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),a.jsxs("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:[b.page," / ",b.totalPages]}),a.jsxs("button",{onClick:()=>A(b.page+1),disabled:!b.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{className:"sr-only",children:"Next"}),a.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]})]})},nu=()=>{console.log("🔒 Hiding TOTP fields from user interface..."),['input[name*="totp" i]','input[name*="totp_secret" i]','input[name*="totp-secret" i]','input[id*="totp" i]','input[id*="totp_secret" i]','input[id*="totp-secret" i]','label[for*="totp" i]','label[for*="totp_secret" i]','label[for*="totp-secret" i]','button[data-action*="generate-totp" i]','button[data-action*="generate_totp" i]','input[type="button"][value*="Generate TOTP" i]','input[type="submit"][value*="Generate TOTP" i]',".totp-field",".totp-secret-field",".totp_secret_field",".totp-container",".totp_container",".generate-totp",".generate_totp",'[data-field*="totp" i]','[data-field*="totp-secret" i]','[data-field*="totp_secret" i]','[data-name*="totp" i]','[data-name*="totp-secret" i]','[data-name*="totp_secret" i]'].forEach(r=>{try{const i=document.querySelectorAll(r);i.forEach(l=>{l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true");const c=l.closest(".form-group, .form-field, .field-container, .input-group");c&&(c.style.display="none",c.style.visibility="hidden",c.setAttribute("hidden","true"))}),i.length>0&&console.log(`🔒 Hidden ${i.length} elements matching: ${r}`)}catch(i){console.warn(`⚠️ Error hiding elements for selector "${r}":`,i)}}),(r=>{r.forEach(i=>{const l=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1),c=[];let u;for(;u=l.nextNode();)u.textContent.toLowerCase().includes(i.toLowerCase())&&c.push(u);c.forEach(h=>{let f=h.parentElement;for(;f&&f.tagName!=="BODY";){if(["INPUT","LABEL","BUTTON","DIV","SPAN","TR","TD","TH"].includes(f.tagName)){f.style.display="none",f.style.visibility="hidden",f.setAttribute("hidden","true"),console.log(`🔒 Hidden element containing text "${i}":`,f.tagName,f.className);break}f=f.parentElement}})})})(["TOTP Secret","Generate TOTP","TOTP secret","totp secret","Two-Factor Authentication Secret","Authenticator Secret"]),document.querySelectorAll('button, input[type="button"], input[type="submit"]').forEach(r=>{const i=r.textContent||r.value||"";if(i.toLowerCase().includes("generate totp")||i.toLowerCase().includes("generate secret")||i.toLowerCase().includes("totp secret")){r.style.display="none",r.style.visibility="hidden",r.setAttribute("hidden","true");const l=r.closest(".form-group, .form-field, .field-container, .button-group");l&&(l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true")),console.log(`🔒 Hidden button with text: "${i}"`)}}),console.log("✅ TOTP fields hiding completed")},D0=()=>{console.log("🔒 Initializing TOTP field hiding..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",nu):nu(),new MutationObserver(e=>{let s=!1;e.forEach(r=>{r.type==="childList"&&r.addedNodes.length>0&&r.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&i.querySelector&&(i.querySelector('input[name*="totp" i]')||i.querySelector('*[class*="totp" i]')||i.textContent?.toLowerCase().includes("totp secret")||i.textContent?.toLowerCase().includes("generate totp"))&&(s=!0)})}),s&&(console.log("🔒 New TOTP content detected, hiding fields..."),setTimeout(nu,100))}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","name"]}),console.log("✅ TOTP field hiding initialized with mutation observer")};typeof window<"u"&&D0();const BS=()=>{console.log("🚀 AuthenticatedRedirect: Component is rendering!");const{loading:t}=wi(),e=localStorage.getItem("access_token"),s=localStorage.getItem("user");return console.log("🔄 AuthenticatedRedirect:",{loading:t,hasAccessToken:!!e,hasUser:!!s,pathname:window.location.pathname}),t?(console.log("⏳ AuthenticatedRedirect: Still loading..."),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})):e&&s?(console.log("✅ AuthenticatedRedirect: Has tokens, redirecting to dashboard"),a.jsx(il,{to:"/dashboard",replace:!0})):(console.log("🚪 AuthenticatedRedirect: No tokens, redirecting to login"),a.jsx(il,{to:"/login",replace:!0}))};function zS(){return N.useEffect(()=>{console.log("🔒 App: Initializing TOTP field hiding..."),console.log("🌐 App: Current URL:",window.location.href),console.log("🌐 App: Current pathname:",window.location.pathname),D0()},[]),a.jsx(y1,{children:a.jsx(Iv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(Pv,{children:[a.jsx(yt,{path:"/login",element:a.jsxs(a.Fragment,{children:[console.log("🚨 Rendering Login route"),a.jsx(L1,{})]})}),a.jsx(yt,{path:"/",element:a.jsxs(a.Fragment,{children:[console.log("🏠 Rendering Root route"),a.jsx(BS,{})]})}),a.jsx(yt,{path:"/dashboard",element:a.jsx(D1,{children:a.jsx(Ft,{children:a.jsx(lS,{})})})}),a.jsx(yt,{path:"/user-management",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(z1,{})})})})}),a.jsx(yt,{path:"/role-management",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(dS,{})})})})}),a.jsx(yt,{path:"/brands",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(gS,{})})})})}),a.jsx(yt,{path:"/campaign-types",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(hS,{})})})})}),a.jsx(yt,{path:"/cards",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(wS,{})})})})}),a.jsx(yt,{path:"/cards/account/:accountId",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(jS,{})})})})}),a.jsx(yt,{path:"/card-users",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(SS,{})})})})}),a.jsx(yt,{path:"/campaigns",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(fS,{})})})})}),a.jsx(yt,{path:"/campaigns/:id",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(xS,{})})})})}),a.jsx(yt,{path:"/facebook-accounts",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(AS,{})})})})}),a.jsx(yt,{path:"/facebook-pages",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(TS,{})})})})}),a.jsx(yt,{path:"/business-manager",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(IS,{})})})})}),a.jsx(yt,{path:"/reports",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx(OS,{})})})})}),a.jsx(yt,{path:"/analytics",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx("div",{className:"p-6",children:"Analytics Module (Coming Soon)"})})})})}),a.jsx(yt,{path:"/settings",element:a.jsx(Wt,{children:a.jsx(Ht,{children:a.jsx(Ft,{children:a.jsx("div",{className:"p-6",children:"Settings Module (Coming Soon)"})})})})})]})})})}Bb.createRoot(document.getElementById("root")).render(a.jsx(zS,{}));
