function Zp(n,a){for(var o=0;o<a.length;o++){const c=a[o];if(typeof c!="string"&&!Array.isArray(c)){for(const u in c)if(u!=="default"&&!(u in n)){const m=Object.getOwnPropertyDescriptor(c,u);m&&Object.defineProperty(n,u,m.get?m:{enumerable:!0,get:()=>c[u]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(u){if(u.ep)return;u.ep=!0;const m=o(u);fetch(u.href,m)}})();function hm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oi={exports:{}},Rn={},ii={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu;function eh(){if(Pu)return Ae;Pu=1;var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function R(S){return S===null||typeof S!="object"?null:(S=b&&S[b]||S["@@iterator"],typeof S=="function"?S:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,j={};function C(S,V,H){this.props=S,this.context=V,this.refs=j,this.updater=H||I}C.prototype.isReactComponent={},C.prototype.setState=function(S,V){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,V,"setState")},C.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function W(){}W.prototype=C.prototype;function _(S,V,H){this.props=S,this.context=V,this.refs=j,this.updater=H||I}var T=_.prototype=new W;T.constructor=_,k(T,C.prototype),T.isPureReactComponent=!0;var L=Array.isArray,z=Object.prototype.hasOwnProperty,ie={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function B(S,V,H){var te,U={},ne=null,je=null;if(V!=null)for(te in V.ref!==void 0&&(je=V.ref),V.key!==void 0&&(ne=""+V.key),V)z.call(V,te)&&!$.hasOwnProperty(te)&&(U[te]=V[te]);var Se=arguments.length-2;if(Se===1)U.children=H;else if(1<Se){for(var De=Array(Se),D=0;D<Se;D++)De[D]=arguments[D+2];U.children=De}if(S&&S.defaultProps)for(te in Se=S.defaultProps,Se)U[te]===void 0&&(U[te]=Se[te]);return{$$typeof:n,type:S,key:ne,ref:je,props:U,_owner:ie.current}}function X(S,V){return{$$typeof:n,type:S.type,key:V,ref:S.ref,props:S.props,_owner:S._owner}}function Q(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function ae(S){var V={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(H){return V[H]})}var _e=/\/+/g;function G(S,V){return typeof S=="object"&&S!==null&&S.key!=null?ae(""+S.key):V.toString(36)}function Ne(S,V,H,te,U){var ne=typeof S;(ne==="undefined"||ne==="boolean")&&(S=null);var je=!1;if(S===null)je=!0;else switch(ne){case"string":case"number":je=!0;break;case"object":switch(S.$$typeof){case n:case a:je=!0}}if(je)return je=S,U=U(je),S=te===""?"."+G(je,0):te,L(U)?(H="",S!=null&&(H=S.replace(_e,"$&/")+"/"),Ne(U,V,H,"",function(D){return D})):U!=null&&(Q(U)&&(U=X(U,H+(!U.key||je&&je.key===U.key?"":(""+U.key).replace(_e,"$&/")+"/")+S)),V.push(U)),1;if(je=0,te=te===""?".":te+":",L(S))for(var Se=0;Se<S.length;Se++){ne=S[Se];var De=te+G(ne,Se);je+=Ne(ne,V,H,De,U)}else if(De=R(S),typeof De=="function")for(S=De.call(S),Se=0;!(ne=S.next()).done;)ne=ne.value,De=te+G(ne,Se++),je+=Ne(ne,V,H,De,U);else if(ne==="object")throw V=String(S),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return je}function he(S,V,H){if(S==null)return S;var te=[],U=0;return Ne(S,te,"","",function(ne){return V.call(H,ne,U++)}),te}function q(S){if(S._status===-1){var V=S._result;V=V(),V.then(function(H){(S._status===0||S._status===-1)&&(S._status=1,S._result=H)},function(H){(S._status===0||S._status===-1)&&(S._status=2,S._result=H)}),S._status===-1&&(S._status=0,S._result=V)}if(S._status===1)return S._result.default;throw S._result}var ce={current:null},Y={transition:null},oe={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:Y,ReactCurrentOwner:ie};function M(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:he,forEach:function(S,V,H){he(S,function(){V.apply(this,arguments)},H)},count:function(S){var V=0;return he(S,function(){V++}),V},toArray:function(S){return he(S,function(V){return V})||[]},only:function(S){if(!Q(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ae.Component=C,Ae.Fragment=o,Ae.Profiler=u,Ae.PureComponent=_,Ae.StrictMode=c,Ae.Suspense=x,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ae.act=M,Ae.cloneElement=function(S,V,H){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var te=k({},S.props),U=S.key,ne=S.ref,je=S._owner;if(V!=null){if(V.ref!==void 0&&(ne=V.ref,je=ie.current),V.key!==void 0&&(U=""+V.key),S.type&&S.type.defaultProps)var Se=S.type.defaultProps;for(De in V)z.call(V,De)&&!$.hasOwnProperty(De)&&(te[De]=V[De]===void 0&&Se!==void 0?Se[De]:V[De])}var De=arguments.length-2;if(De===1)te.children=H;else if(1<De){Se=Array(De);for(var D=0;D<De;D++)Se[D]=arguments[D+2];te.children=Se}return{$$typeof:n,type:S.type,key:U,ref:ne,props:te,_owner:je}},Ae.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:m,_context:S},S.Consumer=S},Ae.createElement=B,Ae.createFactory=function(S){var V=B.bind(null,S);return V.type=S,V},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(S){return{$$typeof:h,render:S}},Ae.isValidElement=Q,Ae.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:q}},Ae.memo=function(S,V){return{$$typeof:w,type:S,compare:V===void 0?null:V}},Ae.startTransition=function(S){var V=Y.transition;Y.transition={};try{S()}finally{Y.transition=V}},Ae.unstable_act=M,Ae.useCallback=function(S,V){return ce.current.useCallback(S,V)},Ae.useContext=function(S){return ce.current.useContext(S)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(S){return ce.current.useDeferredValue(S)},Ae.useEffect=function(S,V){return ce.current.useEffect(S,V)},Ae.useId=function(){return ce.current.useId()},Ae.useImperativeHandle=function(S,V,H){return ce.current.useImperativeHandle(S,V,H)},Ae.useInsertionEffect=function(S,V){return ce.current.useInsertionEffect(S,V)},Ae.useLayoutEffect=function(S,V){return ce.current.useLayoutEffect(S,V)},Ae.useMemo=function(S,V){return ce.current.useMemo(S,V)},Ae.useReducer=function(S,V,H){return ce.current.useReducer(S,V,H)},Ae.useRef=function(S){return ce.current.useRef(S)},Ae.useState=function(S){return ce.current.useState(S)},Ae.useSyncExternalStore=function(S,V,H){return ce.current.useSyncExternalStore(S,V,H)},Ae.useTransition=function(){return ce.current.useTransition()},Ae.version="18.3.1",Ae}var Tu;function Di(){return Tu||(Tu=1,ii.exports=eh()),ii.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au;function th(){if(Au)return Rn;Au=1;var n=Di(),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function f(h,x,w){var y,b={},R=null,I=null;w!==void 0&&(R=""+w),x.key!==void 0&&(R=""+x.key),x.ref!==void 0&&(I=x.ref);for(y in x)c.call(x,y)&&!m.hasOwnProperty(y)&&(b[y]=x[y]);if(h&&h.defaultProps)for(y in x=h.defaultProps,x)b[y]===void 0&&(b[y]=x[y]);return{$$typeof:a,type:h,key:R,ref:I,props:b,_owner:u.current}}return Rn.Fragment=o,Rn.jsx=f,Rn.jsxs=f,Rn}var Du;function rh(){return Du||(Du=1,oi.exports=th()),oi.exports}var r=rh(),g=Di();const Ii=hm(g),sh=Zp({__proto__:null,default:Ii},[g]);var Ja={},ci={exports:{}},jt={},di={exports:{}},ui={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu;function nh(){return Iu||(Iu=1,(function(n){function a(Y,oe){var M=Y.length;Y.push(oe);e:for(;0<M;){var S=M-1>>>1,V=Y[S];if(0<u(V,oe))Y[S]=oe,Y[M]=V,M=S;else break e}}function o(Y){return Y.length===0?null:Y[0]}function c(Y){if(Y.length===0)return null;var oe=Y[0],M=Y.pop();if(M!==oe){Y[0]=M;e:for(var S=0,V=Y.length,H=V>>>1;S<H;){var te=2*(S+1)-1,U=Y[te],ne=te+1,je=Y[ne];if(0>u(U,M))ne<V&&0>u(je,U)?(Y[S]=je,Y[ne]=M,S=ne):(Y[S]=U,Y[te]=M,S=te);else if(ne<V&&0>u(je,M))Y[S]=je,Y[ne]=M,S=ne;else break e}}return oe}function u(Y,oe){var M=Y.sortIndex-oe.sortIndex;return M!==0?M:Y.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;n.unstable_now=function(){return m.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var x=[],w=[],y=1,b=null,R=3,I=!1,k=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Y){for(var oe=o(w);oe!==null;){if(oe.callback===null)c(w);else if(oe.startTime<=Y)c(w),oe.sortIndex=oe.expirationTime,a(x,oe);else break;oe=o(w)}}function L(Y){if(j=!1,T(Y),!k)if(o(x)!==null)k=!0,q(z);else{var oe=o(w);oe!==null&&ce(L,oe.startTime-Y)}}function z(Y,oe){k=!1,j&&(j=!1,W(B),B=-1),I=!0;var M=R;try{for(T(oe),b=o(x);b!==null&&(!(b.expirationTime>oe)||Y&&!ae());){var S=b.callback;if(typeof S=="function"){b.callback=null,R=b.priorityLevel;var V=S(b.expirationTime<=oe);oe=n.unstable_now(),typeof V=="function"?b.callback=V:b===o(x)&&c(x),T(oe)}else c(x);b=o(x)}if(b!==null)var H=!0;else{var te=o(w);te!==null&&ce(L,te.startTime-oe),H=!1}return H}finally{b=null,R=M,I=!1}}var ie=!1,$=null,B=-1,X=5,Q=-1;function ae(){return!(n.unstable_now()-Q<X)}function _e(){if($!==null){var Y=n.unstable_now();Q=Y;var oe=!0;try{oe=$(!0,Y)}finally{oe?G():(ie=!1,$=null)}}else ie=!1}var G;if(typeof _=="function")G=function(){_(_e)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,he=Ne.port2;Ne.port1.onmessage=_e,G=function(){he.postMessage(null)}}else G=function(){C(_e,0)};function q(Y){$=Y,ie||(ie=!0,G())}function ce(Y,oe){B=C(function(){Y(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){k||I||(k=!0,q(z))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_getFirstCallbackNode=function(){return o(x)},n.unstable_next=function(Y){switch(R){case 1:case 2:case 3:var oe=3;break;default:oe=R}var M=R;R=oe;try{return Y()}finally{R=M}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var M=R;R=Y;try{return oe()}finally{R=M}},n.unstable_scheduleCallback=function(Y,oe,M){var S=n.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?S+M:S):M=S,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=M+V,Y={id:y++,callback:oe,priorityLevel:Y,startTime:M,expirationTime:V,sortIndex:-1},M>S?(Y.sortIndex=M,a(w,Y),o(x)===null&&Y===o(w)&&(j?(W(B),B=-1):j=!0,ce(L,M-S))):(Y.sortIndex=V,a(x,Y),k||I||(k=!0,q(z))),Y},n.unstable_shouldYield=ae,n.unstable_wrapCallback=function(Y){var oe=R;return function(){var M=R;R=oe;try{return Y.apply(this,arguments)}finally{R=M}}}})(ui)),ui}var Fu;function ah(){return Fu||(Fu=1,di.exports=nh()),di.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu;function lh(){if(Lu)return jt;Lu=1;var n=Di(),a=ah();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,u={};function m(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)c.add(t[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},b={};function R(e){return x.call(b,e)?!0:x.call(y,e)?!1:w.test(e)?b[e]=!0:(y[e]=!0,!1)}function I(e,t,s,l){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,t,s,l){if(t===null||typeof t>"u"||I(e,t,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function j(e,t,s,l,i,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new j(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(W,_);C[t]=new j(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(W,_);C[t]=new j(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(W,_);C[t]=new j(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,s,l){var i=C.hasOwnProperty(t)?C[t]:null;(i!==null?i.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k(t,s,i,l)&&(s=null),l||i===null?R(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,l=i.attributeNamespace,s===null?e.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,l?e.setAttributeNS(l,t,s):e.setAttribute(t,s))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ae=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),Y=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var M=Object.assign,S;function V(e){if(S===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var H=!1;function te(e,t){if(!e||H)return"";H=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var l=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){l=F}e.call(t.prototype)}else{try{throw Error()}catch(F){l=F}e()}}catch(F){if(F&&l&&typeof F.stack=="string"){for(var i=F.stack.split(`
`),d=l.stack.split(`
`),p=i.length-1,v=d.length-1;1<=p&&0<=v&&i[p]!==d[v];)v--;for(;1<=p&&0<=v;p--,v--)if(i[p]!==d[v]){if(p!==1||v!==1)do if(p--,v--,0>v||i[p]!==d[v]){var N=`
`+i[p].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=p&&0<=v);break}}}finally{H=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?V(e):""}function U(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1),e;case 11:return e=te(e.type.render,!1),e;case 1:return e=te(e.type,!0),e;default:return""}}function ne(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case ie:return"Portal";case X:return"Profiler";case B:return"StrictMode";case G:return"Suspense";case Ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ae:return(e.displayName||"Context")+".Consumer";case Q:return(e._context.displayName||"Context")+".Provider";case _e:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case he:return t=e.displayName||null,t!==null?t:ne(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return ne(e(t))}catch{}}return null}function je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function De(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function D(e){var t=De(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(p){l=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function K(e){e._valueTracker||(e._valueTracker=D(e))}function ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=De(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function ke(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ee(e,t){var s=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function ye(e,t){var s=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;s=Se(t.value!=null?t.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ve(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function st(e,t){Ve(e,t);var s=Se(t.value),l=t.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Me(e,t.type,s):t.hasOwnProperty("defaultValue")&&Me(e,t.type,Se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zt(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Me(e,t,s){(t!=="number"||ke(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var $e=Array.isArray;function yr(e,t,s,l){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Se(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,l&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function J(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function de(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(o(92));if($e(s)){if(1<s.length)throw Error(o(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Se(s)}}function ge(e,t){var s=Se(t.value),l=Se(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function or(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?or(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var It,Xt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,l,i){MSApp.execUnsafeLocalFunction(function(){return e(t,s,l,i)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(It=It||document.createElement("div"),It.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=It.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bt(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rf=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(e){rf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qs[t]=qs[e]})});function qi(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||qs.hasOwnProperty(e)&&qs[e]?(""+t).trim():t+"px"}function Wi(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var l=s.indexOf("--")===0,i=qi(s,t[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,i):e[s]=i}}var sf=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,t){if(t){if(sf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=null;function bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jl=null,ds=null,us=null;function Yi(e){if(e=pn(e)){if(typeof jl!="function")throw Error(o(280));var t=e.stateNode;t&&(t=ua(t),jl(e.stateNode,e.type,t))}}function Qi(e){ds?us?us.push(e):us=[e]:ds=e}function Ki(){if(ds){var e=ds,t=us;if(us=ds=null,Yi(e),t)for(e=0;e<t.length;e++)Yi(t[e])}}function Ji(e,t){return e(t)}function Gi(){}var Nl=!1;function Xi(e,t,s){if(Nl)return e(t,s);Nl=!0;try{return Ji(e,t,s)}finally{Nl=!1,(ds!==null||us!==null)&&(Gi(),Ki())}}function Ws(e,t){var s=e.stateNode;if(s===null)return null;var l=ua(s);if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var kl=!1;if(h)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){kl=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{kl=!1}function nf(e,t,s,l,i,d,p,v,N){var F=Array.prototype.slice.call(arguments,3);try{t.apply(s,F)}catch(ee){this.onError(ee)}}var Qs=!1,Vn=null,Hn=!1,Sl=null,af={onError:function(e){Qs=!0,Vn=e}};function lf(e,t,s,l,i,d,p,v,N){Qs=!1,Vn=null,nf.apply(af,arguments)}function of(e,t,s,l,i,d,p,v,N){if(lf.apply(this,arguments),Qs){if(Qs){var F=Vn;Qs=!1,Vn=null}else throw Error(o(198));Hn||(Hn=!0,Sl=F)}}function qr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Zi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ec(e){if(qr(e)!==e)throw Error(o(188))}function cf(e){var t=e.alternate;if(!t){if(t=qr(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,l=t;;){var i=s.return;if(i===null)break;var d=i.alternate;if(d===null){if(l=i.return,l!==null){s=l;continue}break}if(i.child===d.child){for(d=i.child;d;){if(d===s)return ec(i),e;if(d===l)return ec(i),t;d=d.sibling}throw Error(o(188))}if(s.return!==l.return)s=i,l=d;else{for(var p=!1,v=i.child;v;){if(v===s){p=!0,s=i,l=d;break}if(v===l){p=!0,l=i,s=d;break}v=v.sibling}if(!p){for(v=d.child;v;){if(v===s){p=!0,s=d,l=i;break}if(v===l){p=!0,l=d,s=i;break}v=v.sibling}if(!p)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function tc(e){return e=cf(e),e!==null?rc(e):null}function rc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rc(e);if(t!==null)return t;e=e.sibling}return null}var sc=a.unstable_scheduleCallback,nc=a.unstable_cancelCallback,df=a.unstable_shouldYield,uf=a.unstable_requestPaint,Ke=a.unstable_now,mf=a.unstable_getCurrentPriorityLevel,Cl=a.unstable_ImmediatePriority,ac=a.unstable_UserBlockingPriority,qn=a.unstable_NormalPriority,ff=a.unstable_LowPriority,lc=a.unstable_IdlePriority,Wn=null,Zt=null;function pf(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Wn,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:xf,hf=Math.log,gf=Math.LN2;function xf(e){return e>>>=0,e===0?32:31-(hf(e)/gf|0)|0}var Yn=64,Qn=4194304;function Ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kn(e,t){var s=e.pendingLanes;if(s===0)return 0;var l=0,i=e.suspendedLanes,d=e.pingedLanes,p=s&268435455;if(p!==0){var v=p&~i;v!==0?l=Ks(v):(d&=p,d!==0&&(l=Ks(d)))}else p=s&~i,p!==0?l=Ks(p):d!==0&&(l=Ks(d));if(l===0)return 0;if(t!==0&&t!==l&&(t&i)===0&&(i=l&-l,d=t&-t,i>=d||i===16&&(d&4194240)!==0))return t;if((l&4)!==0&&(l|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)s=31-Vt(t),i=1<<s,l|=e[s],t&=~i;return l}function yf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vf(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,i=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-Vt(d),v=1<<p,N=i[p];N===-1?((v&s)===0||(v&l)!==0)&&(i[p]=yf(v,t)):N<=t&&(e.expiredLanes|=v),d&=~v}}function _l(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oc(){var e=Yn;return Yn<<=1,(Yn&4194240)===0&&(Yn=64),e}function El(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Js(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=s}function wf(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-Vt(s),d=1<<i;t[i]=0,l[i]=-1,e[i]=-1,s&=~d}}function Rl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Vt(s),i=1<<l;i&t|e[l]&t&&(e[l]|=t),s&=~i}}var Le=0;function ic(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var cc,Pl,dc,uc,mc,Tl=!1,Jn=[],vr=null,wr=null,br=null,Gs=new Map,Xs=new Map,jr=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,t){switch(e){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function Zs(e,t,s,l,i,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[i]},t!==null&&(t=pn(t),t!==null&&Pl(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jf(e,t,s,l,i){switch(t){case"focusin":return vr=Zs(vr,e,t,s,l,i),!0;case"dragenter":return wr=Zs(wr,e,t,s,l,i),!0;case"mouseover":return br=Zs(br,e,t,s,l,i),!0;case"pointerover":var d=i.pointerId;return Gs.set(d,Zs(Gs.get(d)||null,e,t,s,l,i)),!0;case"gotpointercapture":return d=i.pointerId,Xs.set(d,Zs(Xs.get(d)||null,e,t,s,l,i)),!0}return!1}function pc(e){var t=Wr(e.target);if(t!==null){var s=qr(t);if(s!==null){if(t=s.tag,t===13){if(t=Zi(s),t!==null){e.blockedOn=t,mc(e.priority,function(){dc(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Dl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);wl=l,s.target.dispatchEvent(l),wl=null}else return t=pn(s),t!==null&&Pl(t),e.blockedOn=s,!1;t.shift()}return!0}function hc(e,t,s){Gn(e)&&s.delete(t)}function Nf(){Tl=!1,vr!==null&&Gn(vr)&&(vr=null),wr!==null&&Gn(wr)&&(wr=null),br!==null&&Gn(br)&&(br=null),Gs.forEach(hc),Xs.forEach(hc)}function en(e,t){e.blockedOn===t&&(e.blockedOn=null,Tl||(Tl=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Nf)))}function tn(e){function t(i){return en(i,e)}if(0<Jn.length){en(Jn[0],e);for(var s=1;s<Jn.length;s++){var l=Jn[s];l.blockedOn===e&&(l.blockedOn=null)}}for(vr!==null&&en(vr,e),wr!==null&&en(wr,e),br!==null&&en(br,e),Gs.forEach(t),Xs.forEach(t),s=0;s<jr.length;s++)l=jr[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<jr.length&&(s=jr[0],s.blockedOn===null);)pc(s),s.blockedOn===null&&jr.shift()}var ms=L.ReactCurrentBatchConfig,Xn=!0;function kf(e,t,s,l){var i=Le,d=ms.transition;ms.transition=null;try{Le=1,Al(e,t,s,l)}finally{Le=i,ms.transition=d}}function Sf(e,t,s,l){var i=Le,d=ms.transition;ms.transition=null;try{Le=4,Al(e,t,s,l)}finally{Le=i,ms.transition=d}}function Al(e,t,s,l){if(Xn){var i=Dl(e,t,s,l);if(i===null)Jl(e,t,l,Zn,s),fc(e,l);else if(jf(i,e,t,s,l))l.stopPropagation();else if(fc(e,l),t&4&&-1<bf.indexOf(e)){for(;i!==null;){var d=pn(i);if(d!==null&&cc(d),d=Dl(e,t,s,l),d===null&&Jl(e,t,l,Zn,s),d===i)break;i=d}i!==null&&l.stopPropagation()}else Jl(e,t,l,null,s)}}var Zn=null;function Dl(e,t,s,l){if(Zn=null,e=bl(l),e=Wr(e),e!==null)if(t=qr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Zi(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zn=e,null}function gc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mf()){case Cl:return 1;case ac:return 4;case qn:case ff:return 16;case lc:return 536870912;default:return 16}default:return 16}}var Nr=null,Il=null,ea=null;function xc(){if(ea)return ea;var e,t=Il,s=t.length,l,i="value"in Nr?Nr.value:Nr.textContent,d=i.length;for(e=0;e<s&&t[e]===i[e];e++);var p=s-e;for(l=1;l<=p&&t[s-l]===i[d-l];l++);return ea=i.slice(e,1<l?1-l:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function yc(){return!1}function Pt(e){function t(s,l,i,d,p){this._reactName=s,this._targetInst=i,this.type=l,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(s=e[v],this[v]=s?s(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ra:yc,this.isPropagationStopped=yc,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=Pt(fs),rn=M({},fs,{view:0,detail:0}),Cf=Pt(rn),Ll,Ml,sn,sa=M({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&e.type==="mousemove"?(Ll=e.screenX-sn.screenX,Ml=e.screenY-sn.screenY):Ml=Ll=0,sn=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Ml}}),vc=Pt(sa),_f=M({},sa,{dataTransfer:0}),Ef=Pt(_f),Rf=M({},rn,{relatedTarget:0}),Ol=Pt(Rf),Pf=M({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Tf=Pt(Pf),Af=M({},fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Df=Pt(Af),If=M({},fs,{data:0}),wc=Pt(If),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Of(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mf[e])?!!t[e]:!1}function Ul(){return Of}var Uf=M({},rn,{key:function(e){if(e.key){var t=Ff[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(e){return e.type==="keypress"?ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$f=Pt(Uf),zf=M({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=Pt(zf),Bf=M({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),Vf=Pt(Bf),Hf=M({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qf=Pt(Hf),Wf=M({},sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yf=Pt(Wf),Qf=[9,13,27,32],$l=h&&"CompositionEvent"in window,nn=null;h&&"documentMode"in document&&(nn=document.documentMode);var Kf=h&&"TextEvent"in window&&!nn,jc=h&&(!$l||nn&&8<nn&&11>=nn),Nc=" ",kc=!1;function Sc(e,t){switch(e){case"keyup":return Qf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function Jf(e,t){switch(e){case"compositionend":return Cc(t);case"keypress":return t.which!==32?null:(kc=!0,Nc);case"textInput":return e=t.data,e===Nc&&kc?null:e;default:return null}}function Gf(e,t){if(ps)return e==="compositionend"||!$l&&Sc(e,t)?(e=xc(),ea=Il=Nr=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jc&&t.locale!=="ko"?null:t.data;default:return null}}var Xf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xf[e.type]:t==="textarea"}function Ec(e,t,s,l){Qi(l),t=ia(t,"onChange"),0<t.length&&(s=new Fl("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var an=null,ln=null;function Zf(e){Wc(e,0)}function na(e){var t=vs(e);if(ve(t))return e}function ep(e,t){if(e==="change")return t}var Rc=!1;if(h){var zl;if(h){var Bl="oninput"in document;if(!Bl){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),Bl=typeof Pc.oninput=="function"}zl=Bl}else zl=!1;Rc=zl&&(!document.documentMode||9<document.documentMode)}function Tc(){an&&(an.detachEvent("onpropertychange",Ac),ln=an=null)}function Ac(e){if(e.propertyName==="value"&&na(ln)){var t=[];Ec(t,ln,e,bl(e)),Xi(Zf,t)}}function tp(e,t,s){e==="focusin"?(Tc(),an=t,ln=s,an.attachEvent("onpropertychange",Ac)):e==="focusout"&&Tc()}function rp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return na(ln)}function sp(e,t){if(e==="click")return na(t)}function np(e,t){if(e==="input"||e==="change")return na(t)}function ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:ap;function on(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var i=s[l];if(!x.call(t,i)||!Ht(e[i],t[i]))return!1}return!0}function Dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ic(e,t){var s=Dc(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Dc(s)}}function Fc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lc(){for(var e=window,t=ke();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ke(e.document)}return t}function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lp(e){var t=Lc(),s=e.focusedElem,l=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Fc(s.ownerDocument.documentElement,s)){if(l!==null&&Vl(s)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=s.textContent.length,d=Math.min(l.start,i);l=l.end===void 0?d:Math.min(l.end,i),!e.extend&&d>l&&(i=l,l=d,d=i),i=Ic(s,d);var p=Ic(s,l);i&&p&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),d>l?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var op=h&&"documentMode"in document&&11>=document.documentMode,hs=null,Hl=null,cn=null,ql=!1;function Mc(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ql||hs==null||hs!==ke(l)||(l=hs,"selectionStart"in l&&Vl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cn&&on(cn,l)||(cn=l,l=ia(Hl,"onSelect"),0<l.length&&(t=new Fl("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=hs)))}function aa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var gs={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionend:aa("Transition","TransitionEnd")},Wl={},Oc={};h&&(Oc=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function la(e){if(Wl[e])return Wl[e];if(!gs[e])return e;var t=gs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Oc)return Wl[e]=t[s];return e}var Uc=la("animationend"),$c=la("animationiteration"),zc=la("animationstart"),Bc=la("transitionend"),Vc=new Map,Hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Vc.set(e,t),m(t,[e])}for(var Yl=0;Yl<Hc.length;Yl++){var Ql=Hc[Yl],ip=Ql.toLowerCase(),cp=Ql[0].toUpperCase()+Ql.slice(1);kr(ip,"on"+cp)}kr(Uc,"onAnimationEnd"),kr($c,"onAnimationIteration"),kr(zc,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Bc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(dn));function qc(e,t,s){var l=e.type||"unknown-event";e.currentTarget=s,of(l,t,void 0,e),e.currentTarget=null}function Wc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],i=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var p=l.length-1;0<=p;p--){var v=l[p],N=v.instance,F=v.currentTarget;if(v=v.listener,N!==d&&i.isPropagationStopped())break e;qc(i,v,F),d=N}else for(p=0;p<l.length;p++){if(v=l[p],N=v.instance,F=v.currentTarget,v=v.listener,N!==d&&i.isPropagationStopped())break e;qc(i,v,F),d=N}}}if(Hn)throw e=Sl,Hn=!1,Sl=null,e}function ze(e,t){var s=t[ro];s===void 0&&(s=t[ro]=new Set);var l=e+"__bubble";s.has(l)||(Yc(t,e,2,!1),s.add(l))}function Kl(e,t,s){var l=0;t&&(l|=4),Yc(s,e,l,t)}var oa="_reactListening"+Math.random().toString(36).slice(2);function un(e){if(!e[oa]){e[oa]=!0,c.forEach(function(s){s!=="selectionchange"&&(dp.has(s)||Kl(s,!1,e),Kl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oa]||(t[oa]=!0,Kl("selectionchange",!1,t))}}function Yc(e,t,s,l){switch(gc(t)){case 1:var i=kf;break;case 4:i=Sf;break;default:i=Al}s=i.bind(null,t,s,e),i=void 0,!kl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),l?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function Jl(e,t,s,l,i){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var v=l.stateNode.containerInfo;if(v===i||v.nodeType===8&&v.parentNode===i)break;if(p===4)for(p=l.return;p!==null;){var N=p.tag;if((N===3||N===4)&&(N=p.stateNode.containerInfo,N===i||N.nodeType===8&&N.parentNode===i))return;p=p.return}for(;v!==null;){if(p=Wr(v),p===null)return;if(N=p.tag,N===5||N===6){l=d=p;continue e}v=v.parentNode}}l=l.return}Xi(function(){var F=d,ee=bl(s),re=[];e:{var Z=Vc.get(e);if(Z!==void 0){var ue=Fl,fe=e;switch(e){case"keypress":if(ta(s)===0)break e;case"keydown":case"keyup":ue=$f;break;case"focusin":fe="focus",ue=Ol;break;case"focusout":fe="blur",ue=Ol;break;case"beforeblur":case"afterblur":ue=Ol;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Vf;break;case Uc:case $c:case zc:ue=Tf;break;case Bc:ue=qf;break;case"scroll":ue=Cf;break;case"wheel":ue=Yf;break;case"copy":case"cut":case"paste":ue=Df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=bc}var pe=(t&4)!==0,Je=!pe&&e==="scroll",P=pe?Z!==null?Z+"Capture":null:Z;pe=[];for(var E=F,A;E!==null;){A=E;var le=A.stateNode;if(A.tag===5&&le!==null&&(A=le,P!==null&&(le=Ws(E,P),le!=null&&pe.push(mn(E,le,A)))),Je)break;E=E.return}0<pe.length&&(Z=new ue(Z,fe,null,s,ee),re.push({event:Z,listeners:pe}))}}if((t&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",Z&&s!==wl&&(fe=s.relatedTarget||s.fromElement)&&(Wr(fe)||fe[ir]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(fe=s.relatedTarget||s.toElement,ue=F,fe=fe?Wr(fe):null,fe!==null&&(Je=qr(fe),fe!==Je||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=F),ue!==fe)){if(pe=vc,le="onMouseLeave",P="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(pe=bc,le="onPointerLeave",P="onPointerEnter",E="pointer"),Je=ue==null?Z:vs(ue),A=fe==null?Z:vs(fe),Z=new pe(le,E+"leave",ue,s,ee),Z.target=Je,Z.relatedTarget=A,le=null,Wr(ee)===F&&(pe=new pe(P,E+"enter",fe,s,ee),pe.target=A,pe.relatedTarget=Je,le=pe),Je=le,ue&&fe)t:{for(pe=ue,P=fe,E=0,A=pe;A;A=xs(A))E++;for(A=0,le=P;le;le=xs(le))A++;for(;0<E-A;)pe=xs(pe),E--;for(;0<A-E;)P=xs(P),A--;for(;E--;){if(pe===P||P!==null&&pe===P.alternate)break t;pe=xs(pe),P=xs(P)}pe=null}else pe=null;ue!==null&&Qc(re,Z,ue,pe,!1),fe!==null&&Je!==null&&Qc(re,Je,fe,pe,!0)}}e:{if(Z=F?vs(F):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var xe=ep;else if(_c(Z))if(Rc)xe=np;else{xe=rp;var we=tp}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(xe=sp);if(xe&&(xe=xe(e,F))){Ec(re,xe,s,ee);break e}we&&we(e,Z,F),e==="focusout"&&(we=Z._wrapperState)&&we.controlled&&Z.type==="number"&&Me(Z,"number",Z.value)}switch(we=F?vs(F):window,e){case"focusin":(_c(we)||we.contentEditable==="true")&&(hs=we,Hl=F,cn=null);break;case"focusout":cn=Hl=hs=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Mc(re,s,ee);break;case"selectionchange":if(op)break;case"keydown":case"keyup":Mc(re,s,ee)}var be;if($l)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else ps?Sc(e,s)&&(Ce="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ce="onCompositionStart");Ce&&(jc&&s.locale!=="ko"&&(ps||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&ps&&(be=xc()):(Nr=ee,Il="value"in Nr?Nr.value:Nr.textContent,ps=!0)),we=ia(F,Ce),0<we.length&&(Ce=new wc(Ce,e,null,s,ee),re.push({event:Ce,listeners:we}),be?Ce.data=be:(be=Cc(s),be!==null&&(Ce.data=be)))),(be=Kf?Jf(e,s):Gf(e,s))&&(F=ia(F,"onBeforeInput"),0<F.length&&(ee=new wc("onBeforeInput","beforeinput",null,s,ee),re.push({event:ee,listeners:F}),ee.data=be))}Wc(re,t)})}function mn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ia(e,t){for(var s=t+"Capture",l=[];e!==null;){var i=e,d=i.stateNode;i.tag===5&&d!==null&&(i=d,d=Ws(e,s),d!=null&&l.unshift(mn(e,d,i)),d=Ws(e,t),d!=null&&l.push(mn(e,d,i))),e=e.return}return l}function xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qc(e,t,s,l,i){for(var d=t._reactName,p=[];s!==null&&s!==l;){var v=s,N=v.alternate,F=v.stateNode;if(N!==null&&N===l)break;v.tag===5&&F!==null&&(v=F,i?(N=Ws(s,d),N!=null&&p.unshift(mn(s,N,v))):i||(N=Ws(s,d),N!=null&&p.push(mn(s,N,v)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var up=/\r\n?/g,mp=/\u0000|\uFFFD/g;function Kc(e){return(typeof e=="string"?e:""+e).replace(up,`
`).replace(mp,"")}function ca(e,t,s){if(t=Kc(t),Kc(e)!==t&&s)throw Error(o(425))}function da(){}var Gl=null,Xl=null;function Zl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eo=typeof setTimeout=="function"?setTimeout:void 0,fp=typeof clearTimeout=="function"?clearTimeout:void 0,Jc=typeof Promise=="function"?Promise:void 0,pp=typeof queueMicrotask=="function"?queueMicrotask:typeof Jc<"u"?function(e){return Jc.resolve(null).then(e).catch(hp)}:eo;function hp(e){setTimeout(function(){throw e})}function to(e,t){var s=t,l=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(l===0){e.removeChild(i),tn(t);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=i}while(s);tn(t)}function Sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ys=Math.random().toString(36).slice(2),er="__reactFiber$"+ys,fn="__reactProps$"+ys,ir="__reactContainer$"+ys,ro="__reactEvents$"+ys,gp="__reactListeners$"+ys,xp="__reactHandles$"+ys;function Wr(e){var t=e[er];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ir]||s[er]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Gc(e);e!==null;){if(s=e[er])return s;e=Gc(e)}return t}e=s,s=e.parentNode}return null}function pn(e){return e=e[er]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function ua(e){return e[fn]||null}var so=[],ws=-1;function Cr(e){return{current:e}}function Be(e){0>ws||(e.current=so[ws],so[ws]=null,ws--)}function Ue(e,t){ws++,so[ws]=e.current,e.current=t}var _r={},dt=Cr(_r),xt=Cr(!1),Yr=_r;function bs(e,t){var s=e.type.contextTypes;if(!s)return _r;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var i={},d;for(d in s)i[d]=t[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yt(e){return e=e.childContextTypes,e!=null}function ma(){Be(xt),Be(dt)}function Xc(e,t,s){if(dt.current!==_r)throw Error(o(168));Ue(dt,t),Ue(xt,s)}function Zc(e,t,s){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var i in l)if(!(i in t))throw Error(o(108,je(e)||"Unknown",i));return M({},s,l)}function fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Yr=dt.current,Ue(dt,e),Ue(xt,xt.current),!0}function ed(e,t,s){var l=e.stateNode;if(!l)throw Error(o(169));s?(e=Zc(e,t,Yr),l.__reactInternalMemoizedMergedChildContext=e,Be(xt),Be(dt),Ue(dt,e)):Be(xt),Ue(xt,s)}var cr=null,pa=!1,no=!1;function td(e){cr===null?cr=[e]:cr.push(e)}function yp(e){pa=!0,td(e)}function Er(){if(!no&&cr!==null){no=!0;var e=0,t=Le;try{var s=cr;for(Le=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}cr=null,pa=!1}catch(i){throw cr!==null&&(cr=cr.slice(e+1)),sc(Cl,Er),i}finally{Le=t,no=!1}}return null}var js=[],Ns=0,ha=null,ga=0,Ft=[],Lt=0,Qr=null,dr=1,ur="";function Kr(e,t){js[Ns++]=ga,js[Ns++]=ha,ha=e,ga=t}function rd(e,t,s){Ft[Lt++]=dr,Ft[Lt++]=ur,Ft[Lt++]=Qr,Qr=e;var l=dr;e=ur;var i=32-Vt(l)-1;l&=~(1<<i),s+=1;var d=32-Vt(t)+i;if(30<d){var p=i-i%5;d=(l&(1<<p)-1).toString(32),l>>=p,i-=p,dr=1<<32-Vt(t)+i|s<<i|l,ur=d+e}else dr=1<<d|s<<i|l,ur=e}function ao(e){e.return!==null&&(Kr(e,1),rd(e,1,0))}function lo(e){for(;e===ha;)ha=js[--Ns],js[Ns]=null,ga=js[--Ns],js[Ns]=null;for(;e===Qr;)Qr=Ft[--Lt],Ft[Lt]=null,ur=Ft[--Lt],Ft[Lt]=null,dr=Ft[--Lt],Ft[Lt]=null}var Tt=null,At=null,He=!1,qt=null;function sd(e,t){var s=$t(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function nd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,At=Sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Qr!==null?{id:dr,overflow:ur}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=$t(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Tt=e,At=null,!0):!1;default:return!1}}function oo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(He){var t=At;if(t){var s=t;if(!nd(e,t)){if(oo(e))throw Error(o(418));t=Sr(s.nextSibling);var l=Tt;t&&nd(e,t)?sd(l,s):(e.flags=e.flags&-4097|2,He=!1,Tt=e)}}else{if(oo(e))throw Error(o(418));e.flags=e.flags&-4097|2,He=!1,Tt=e}}}function ad(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function xa(e){if(e!==Tt)return!1;if(!He)return ad(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zl(e.type,e.memoizedProps)),t&&(t=At)){if(oo(e))throw ld(),Error(o(418));for(;t;)sd(e,t),t=Sr(t.nextSibling)}if(ad(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){At=Sr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}At=null}}else At=Tt?Sr(e.stateNode.nextSibling):null;return!0}function ld(){for(var e=At;e;)e=Sr(e.nextSibling)}function ks(){At=Tt=null,He=!1}function co(e){qt===null?qt=[e]:qt.push(e)}var vp=L.ReactCurrentBatchConfig;function hn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var l=s.stateNode}if(!l)throw Error(o(147,e));var i=l,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var v=i.refs;p===null?delete v[d]:v[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function od(e){var t=e._init;return t(e._payload)}function id(e){function t(P,E){if(e){var A=P.deletions;A===null?(P.deletions=[E],P.flags|=16):A.push(E)}}function s(P,E){if(!e)return null;for(;E!==null;)t(P,E),E=E.sibling;return null}function l(P,E){for(P=new Map;E!==null;)E.key!==null?P.set(E.key,E):P.set(E.index,E),E=E.sibling;return P}function i(P,E){return P=Lr(P,E),P.index=0,P.sibling=null,P}function d(P,E,A){return P.index=A,e?(A=P.alternate,A!==null?(A=A.index,A<E?(P.flags|=2,E):A):(P.flags|=2,E)):(P.flags|=1048576,E)}function p(P){return e&&P.alternate===null&&(P.flags|=2),P}function v(P,E,A,le){return E===null||E.tag!==6?(E=ti(A,P.mode,le),E.return=P,E):(E=i(E,A),E.return=P,E)}function N(P,E,A,le){var xe=A.type;return xe===$?ee(P,E,A.props.children,le,A.key):E!==null&&(E.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&od(xe)===E.type)?(le=i(E,A.props),le.ref=hn(P,E,A),le.return=P,le):(le=Ba(A.type,A.key,A.props,null,P.mode,le),le.ref=hn(P,E,A),le.return=P,le)}function F(P,E,A,le){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=ri(A,P.mode,le),E.return=P,E):(E=i(E,A.children||[]),E.return=P,E)}function ee(P,E,A,le,xe){return E===null||E.tag!==7?(E=ss(A,P.mode,le,xe),E.return=P,E):(E=i(E,A),E.return=P,E)}function re(P,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ti(""+E,P.mode,A),E.return=P,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case z:return A=Ba(E.type,E.key,E.props,null,P.mode,A),A.ref=hn(P,null,E),A.return=P,A;case ie:return E=ri(E,P.mode,A),E.return=P,E;case q:var le=E._init;return re(P,le(E._payload),A)}if($e(E)||oe(E))return E=ss(E,P.mode,A,null),E.return=P,E;ya(P,E)}return null}function Z(P,E,A,le){var xe=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return xe!==null?null:v(P,E,""+A,le);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case z:return A.key===xe?N(P,E,A,le):null;case ie:return A.key===xe?F(P,E,A,le):null;case q:return xe=A._init,Z(P,E,xe(A._payload),le)}if($e(A)||oe(A))return xe!==null?null:ee(P,E,A,le,null);ya(P,A)}return null}function ue(P,E,A,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number")return P=P.get(A)||null,v(E,P,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case z:return P=P.get(le.key===null?A:le.key)||null,N(E,P,le,xe);case ie:return P=P.get(le.key===null?A:le.key)||null,F(E,P,le,xe);case q:var we=le._init;return ue(P,E,A,we(le._payload),xe)}if($e(le)||oe(le))return P=P.get(A)||null,ee(E,P,le,xe,null);ya(E,le)}return null}function fe(P,E,A,le){for(var xe=null,we=null,be=E,Ce=E=0,lt=null;be!==null&&Ce<A.length;Ce++){be.index>Ce?(lt=be,be=null):lt=be.sibling;var Fe=Z(P,be,A[Ce],le);if(Fe===null){be===null&&(be=lt);break}e&&be&&Fe.alternate===null&&t(P,be),E=d(Fe,E,Ce),we===null?xe=Fe:we.sibling=Fe,we=Fe,be=lt}if(Ce===A.length)return s(P,be),He&&Kr(P,Ce),xe;if(be===null){for(;Ce<A.length;Ce++)be=re(P,A[Ce],le),be!==null&&(E=d(be,E,Ce),we===null?xe=be:we.sibling=be,we=be);return He&&Kr(P,Ce),xe}for(be=l(P,be);Ce<A.length;Ce++)lt=ue(be,P,Ce,A[Ce],le),lt!==null&&(e&&lt.alternate!==null&&be.delete(lt.key===null?Ce:lt.key),E=d(lt,E,Ce),we===null?xe=lt:we.sibling=lt,we=lt);return e&&be.forEach(function(Mr){return t(P,Mr)}),He&&Kr(P,Ce),xe}function pe(P,E,A,le){var xe=oe(A);if(typeof xe!="function")throw Error(o(150));if(A=xe.call(A),A==null)throw Error(o(151));for(var we=xe=null,be=E,Ce=E=0,lt=null,Fe=A.next();be!==null&&!Fe.done;Ce++,Fe=A.next()){be.index>Ce?(lt=be,be=null):lt=be.sibling;var Mr=Z(P,be,Fe.value,le);if(Mr===null){be===null&&(be=lt);break}e&&be&&Mr.alternate===null&&t(P,be),E=d(Mr,E,Ce),we===null?xe=Mr:we.sibling=Mr,we=Mr,be=lt}if(Fe.done)return s(P,be),He&&Kr(P,Ce),xe;if(be===null){for(;!Fe.done;Ce++,Fe=A.next())Fe=re(P,Fe.value,le),Fe!==null&&(E=d(Fe,E,Ce),we===null?xe=Fe:we.sibling=Fe,we=Fe);return He&&Kr(P,Ce),xe}for(be=l(P,be);!Fe.done;Ce++,Fe=A.next())Fe=ue(be,P,Ce,Fe.value,le),Fe!==null&&(e&&Fe.alternate!==null&&be.delete(Fe.key===null?Ce:Fe.key),E=d(Fe,E,Ce),we===null?xe=Fe:we.sibling=Fe,we=Fe);return e&&be.forEach(function(Xp){return t(P,Xp)}),He&&Kr(P,Ce),xe}function Je(P,E,A,le){if(typeof A=="object"&&A!==null&&A.type===$&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case z:e:{for(var xe=A.key,we=E;we!==null;){if(we.key===xe){if(xe=A.type,xe===$){if(we.tag===7){s(P,we.sibling),E=i(we,A.props.children),E.return=P,P=E;break e}}else if(we.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&od(xe)===we.type){s(P,we.sibling),E=i(we,A.props),E.ref=hn(P,we,A),E.return=P,P=E;break e}s(P,we);break}else t(P,we);we=we.sibling}A.type===$?(E=ss(A.props.children,P.mode,le,A.key),E.return=P,P=E):(le=Ba(A.type,A.key,A.props,null,P.mode,le),le.ref=hn(P,E,A),le.return=P,P=le)}return p(P);case ie:e:{for(we=A.key;E!==null;){if(E.key===we)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){s(P,E.sibling),E=i(E,A.children||[]),E.return=P,P=E;break e}else{s(P,E);break}else t(P,E);E=E.sibling}E=ri(A,P.mode,le),E.return=P,P=E}return p(P);case q:return we=A._init,Je(P,E,we(A._payload),le)}if($e(A))return fe(P,E,A,le);if(oe(A))return pe(P,E,A,le);ya(P,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,E!==null&&E.tag===6?(s(P,E.sibling),E=i(E,A),E.return=P,P=E):(s(P,E),E=ti(A,P.mode,le),E.return=P,P=E),p(P)):s(P,E)}return Je}var Ss=id(!0),cd=id(!1),va=Cr(null),wa=null,Cs=null,uo=null;function mo(){uo=Cs=wa=null}function fo(e){var t=va.current;Be(va),e._currentValue=t}function po(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function _s(e,t){wa=e,uo=Cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(vt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(uo!==e)if(e={context:e,memoizedValue:t,next:null},Cs===null){if(wa===null)throw Error(o(308));Cs=e,wa.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Jr=null;function ho(e){Jr===null?Jr=[e]:Jr.push(e)}function dd(e,t,s,l){var i=t.interleaved;return i===null?(s.next=s,ho(t)):(s.next=i.next,i.next=s),t.interleaved=s,mr(e,l)}function mr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Rr=!1;function go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ud(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pr(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ie&2)!==0){var i=l.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),l.pending=t,mr(e,s)}return i=l.interleaved,i===null?(t.next=t,ho(l)):(t.next=i.next,i.next=t),l.interleaved=t,mr(e,s)}function ba(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Rl(e,s)}}function md(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var i=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var p={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?i=d=p:d=d.next=p,s=s.next}while(s!==null);d===null?i=d=t:d=d.next=t}else i=d=t;s={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ja(e,t,s,l){var i=e.updateQueue;Rr=!1;var d=i.firstBaseUpdate,p=i.lastBaseUpdate,v=i.shared.pending;if(v!==null){i.shared.pending=null;var N=v,F=N.next;N.next=null,p===null?d=F:p.next=F,p=N;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,v=ee.lastBaseUpdate,v!==p&&(v===null?ee.firstBaseUpdate=F:v.next=F,ee.lastBaseUpdate=N))}if(d!==null){var re=i.baseState;p=0,ee=F=N=null,v=d;do{var Z=v.lane,ue=v.eventTime;if((l&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var fe=e,pe=v;switch(Z=t,ue=s,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){re=fe.call(ue,re,Z);break e}re=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,Z=typeof fe=="function"?fe.call(ue,re,Z):fe,Z==null)break e;re=M({},re,Z);break e;case 2:Rr=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,Z=i.effects,Z===null?i.effects=[v]:Z.push(v))}else ue={eventTime:ue,lane:Z,tag:v.tag,payload:v.payload,callback:v.callback,next:null},ee===null?(F=ee=ue,N=re):ee=ee.next=ue,p|=Z;if(v=v.next,v===null){if(v=i.shared.pending,v===null)break;Z=v,v=Z.next,Z.next=null,i.lastBaseUpdate=Z,i.shared.pending=null}}while(!0);if(ee===null&&(N=re),i.baseState=N,i.firstBaseUpdate=F,i.lastBaseUpdate=ee,t=i.shared.interleaved,t!==null){i=t;do p|=i.lane,i=i.next;while(i!==t)}else d===null&&(i.shared.lanes=0);Zr|=p,e.lanes=p,e.memoizedState=re}}function fd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],i=l.callback;if(i!==null){if(l.callback=null,l=s,typeof i!="function")throw Error(o(191,i));i.call(l)}}}var gn={},tr=Cr(gn),xn=Cr(gn),yn=Cr(gn);function Gr(e){if(e===gn)throw Error(o(174));return e}function xo(e,t){switch(Ue(yn,t),Ue(xn,e),Ue(tr,gn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rt(t,e)}Be(tr),Ue(tr,t)}function Es(){Be(tr),Be(xn),Be(yn)}function pd(e){Gr(yn.current);var t=Gr(tr.current),s=Rt(t,e.type);t!==s&&(Ue(xn,e),Ue(tr,s))}function yo(e){xn.current===e&&(Be(tr),Be(xn))}var qe=Cr(0);function Na(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vo=[];function wo(){for(var e=0;e<vo.length;e++)vo[e]._workInProgressVersionPrimary=null;vo.length=0}var ka=L.ReactCurrentDispatcher,bo=L.ReactCurrentBatchConfig,Xr=0,We=null,Ze=null,nt=null,Sa=!1,vn=!1,wn=0,wp=0;function ut(){throw Error(o(321))}function jo(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ht(e[s],t[s]))return!1;return!0}function No(e,t,s,l,i,d){if(Xr=d,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ka.current=e===null||e.memoizedState===null?kp:Sp,e=s(l,i),vn){d=0;do{if(vn=!1,wn=0,25<=d)throw Error(o(301));d+=1,nt=Ze=null,t.updateQueue=null,ka.current=Cp,e=s(l,i)}while(vn)}if(ka.current=Ea,t=Ze!==null&&Ze.next!==null,Xr=0,nt=Ze=We=null,Sa=!1,t)throw Error(o(300));return e}function ko(){var e=wn!==0;return wn=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?We.memoizedState=nt=e:nt=nt.next=e,nt}function Ot(){if(Ze===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=nt===null?We.memoizedState:nt.next;if(t!==null)nt=t,Ze=e;else{if(e===null)throw Error(o(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},nt===null?We.memoizedState=nt=e:nt=nt.next=e}return nt}function bn(e,t){return typeof t=="function"?t(e):t}function So(e){var t=Ot(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var l=Ze,i=l.baseQueue,d=s.pending;if(d!==null){if(i!==null){var p=i.next;i.next=d.next,d.next=p}l.baseQueue=i=d,s.pending=null}if(i!==null){d=i.next,l=l.baseState;var v=p=null,N=null,F=d;do{var ee=F.lane;if((Xr&ee)===ee)N!==null&&(N=N.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),l=F.hasEagerState?F.eagerState:e(l,F.action);else{var re={lane:ee,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};N===null?(v=N=re,p=l):N=N.next=re,We.lanes|=ee,Zr|=ee}F=F.next}while(F!==null&&F!==d);N===null?p=l:N.next=v,Ht(l,t.memoizedState)||(vt=!0),t.memoizedState=l,t.baseState=p,t.baseQueue=N,s.lastRenderedState=l}if(e=s.interleaved,e!==null){i=e;do d=i.lane,We.lanes|=d,Zr|=d,i=i.next;while(i!==e)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Co(e){var t=Ot(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var l=s.dispatch,i=s.pending,d=t.memoizedState;if(i!==null){s.pending=null;var p=i=i.next;do d=e(d,p.action),p=p.next;while(p!==i);Ht(d,t.memoizedState)||(vt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function hd(){}function gd(e,t){var s=We,l=Ot(),i=t(),d=!Ht(l.memoizedState,i);if(d&&(l.memoizedState=i,vt=!0),l=l.queue,_o(vd.bind(null,s,l,e),[e]),l.getSnapshot!==t||d||nt!==null&&nt.memoizedState.tag&1){if(s.flags|=2048,jn(9,yd.bind(null,s,l,i,t),void 0,null),at===null)throw Error(o(349));(Xr&30)!==0||xd(s,t,i)}return i}function xd(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function yd(e,t,s,l){t.value=s,t.getSnapshot=l,wd(t)&&bd(e)}function vd(e,t,s){return s(function(){wd(t)&&bd(e)})}function wd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ht(e,s)}catch{return!0}}function bd(e){var t=mr(e,1);t!==null&&Kt(t,e,1,-1)}function jd(e){var t=rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:e},t.queue=e,e=e.dispatch=Np.bind(null,We,e),[t.memoizedState,e]}function jn(e,t,s,l){return e={tag:e,create:t,destroy:s,deps:l,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e)),e}function Nd(){return Ot().memoizedState}function Ca(e,t,s,l){var i=rr();We.flags|=e,i.memoizedState=jn(1|t,s,void 0,l===void 0?null:l)}function _a(e,t,s,l){var i=Ot();l=l===void 0?null:l;var d=void 0;if(Ze!==null){var p=Ze.memoizedState;if(d=p.destroy,l!==null&&jo(l,p.deps)){i.memoizedState=jn(t,s,d,l);return}}We.flags|=e,i.memoizedState=jn(1|t,s,d,l)}function kd(e,t){return Ca(8390656,8,e,t)}function _o(e,t){return _a(2048,8,e,t)}function Sd(e,t){return _a(4,2,e,t)}function Cd(e,t){return _a(4,4,e,t)}function _d(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ed(e,t,s){return s=s!=null?s.concat([e]):null,_a(4,4,_d.bind(null,t,e),s)}function Eo(){}function Rd(e,t){var s=Ot();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&jo(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function Pd(e,t){var s=Ot();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&jo(t,l[1])?l[0]:(e=e(),s.memoizedState=[e,t],e)}function Td(e,t,s){return(Xr&21)===0?(e.baseState&&(e.baseState=!1,vt=!0),e.memoizedState=s):(Ht(s,t)||(s=oc(),We.lanes|=s,Zr|=s,e.baseState=!0),t)}function bp(e,t){var s=Le;Le=s!==0&&4>s?s:4,e(!0);var l=bo.transition;bo.transition={};try{e(!1),t()}finally{Le=s,bo.transition=l}}function Ad(){return Ot().memoizedState}function jp(e,t,s){var l=Ir(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},Dd(e))Id(t,s);else if(s=dd(e,t,s,l),s!==null){var i=gt();Kt(s,e,l,i),Fd(s,t,l)}}function Np(e,t,s){var l=Ir(e),i={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(Dd(e))Id(t,i);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,v=d(p,s);if(i.hasEagerState=!0,i.eagerState=v,Ht(v,p)){var N=t.interleaved;N===null?(i.next=i,ho(t)):(i.next=N.next,N.next=i),t.interleaved=i;return}}catch{}finally{}s=dd(e,t,i,l),s!==null&&(i=gt(),Kt(s,e,l,i),Fd(s,t,l))}}function Dd(e){var t=e.alternate;return e===We||t!==null&&t===We}function Id(e,t){vn=Sa=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Fd(e,t,s){if((s&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Rl(e,s)}}var Ea={readContext:Mt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},kp={readContext:Mt,useCallback:function(e,t){return rr().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:kd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ca(4194308,4,_d.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ca(4,2,e,t)},useMemo:function(e,t){var s=rr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var l=rr();return t=s!==void 0?s(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=jp.bind(null,We,e),[l.memoizedState,e]},useRef:function(e){var t=rr();return e={current:e},t.memoizedState=e},useState:jd,useDebugValue:Eo,useDeferredValue:function(e){return rr().memoizedState=e},useTransition:function(){var e=jd(!1),t=e[0];return e=bp.bind(null,e[1]),rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var l=We,i=rr();if(He){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),at===null)throw Error(o(349));(Xr&30)!==0||xd(l,t,s)}i.memoizedState=s;var d={value:s,getSnapshot:t};return i.queue=d,kd(vd.bind(null,l,d,e),[e]),l.flags|=2048,jn(9,yd.bind(null,l,d,s,t),void 0,null),s},useId:function(){var e=rr(),t=at.identifierPrefix;if(He){var s=ur,l=dr;s=(l&~(1<<32-Vt(l)-1)).toString(32)+s,t=":"+t+"R"+s,s=wn++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=wp++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sp={readContext:Mt,useCallback:Rd,useContext:Mt,useEffect:_o,useImperativeHandle:Ed,useInsertionEffect:Sd,useLayoutEffect:Cd,useMemo:Pd,useReducer:So,useRef:Nd,useState:function(){return So(bn)},useDebugValue:Eo,useDeferredValue:function(e){var t=Ot();return Td(t,Ze.memoizedState,e)},useTransition:function(){var e=So(bn)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:hd,useSyncExternalStore:gd,useId:Ad,unstable_isNewReconciler:!1},Cp={readContext:Mt,useCallback:Rd,useContext:Mt,useEffect:_o,useImperativeHandle:Ed,useInsertionEffect:Sd,useLayoutEffect:Cd,useMemo:Pd,useReducer:Co,useRef:Nd,useState:function(){return Co(bn)},useDebugValue:Eo,useDeferredValue:function(e){var t=Ot();return Ze===null?t.memoizedState=e:Td(t,Ze.memoizedState,e)},useTransition:function(){var e=Co(bn)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:hd,useSyncExternalStore:gd,useId:Ad,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=M({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ro(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:M({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ra={isMounted:function(e){return(e=e._reactInternals)?qr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var l=gt(),i=Ir(e),d=fr(l,i);d.payload=t,s!=null&&(d.callback=s),t=Pr(e,d,i),t!==null&&(Kt(t,e,i,l),ba(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=gt(),i=Ir(e),d=fr(l,i);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Pr(e,d,i),t!==null&&(Kt(t,e,i,l),ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=gt(),l=Ir(e),i=fr(s,l);i.tag=2,t!=null&&(i.callback=t),t=Pr(e,i,l),t!==null&&(Kt(t,e,l,s),ba(t,e,l))}};function Ld(e,t,s,l,i,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,p):t.prototype&&t.prototype.isPureReactComponent?!on(s,l)||!on(i,d):!0}function Md(e,t,s){var l=!1,i=_r,d=t.contextType;return typeof d=="object"&&d!==null?d=Mt(d):(i=yt(t)?Yr:dt.current,l=t.contextTypes,d=(l=l!=null)?bs(e,i):_r),t=new t(s,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=d),t}function Od(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function Po(e,t,s,l){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs={},go(e);var d=t.contextType;typeof d=="object"&&d!==null?i.context=Mt(d):(d=yt(t)?Yr:dt.current,i.context=bs(e,d)),i.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Ro(e,t,d,s),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ra.enqueueReplaceState(i,i.state,null),ja(e,s,i,l),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Rs(e,t){try{var s="",l=t;do s+=U(l),l=l.return;while(l);var i=s}catch(d){i=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:i,digest:null}}function To(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ao(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var _p=typeof WeakMap=="function"?WeakMap:Map;function Ud(e,t,s){s=fr(-1,s),s.tag=3,s.payload={element:null};var l=t.value;return s.callback=function(){La||(La=!0,Yo=l),Ao(e,t)},s}function $d(e,t,s){s=fr(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var i=t.value;s.payload=function(){return l(i)},s.callback=function(){Ao(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){Ao(e,t),typeof l!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),s}function zd(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new _p;var i=new Set;l.set(t,i)}else i=l.get(t),i===void 0&&(i=new Set,l.set(t,i));i.has(s)||(i.add(s),e=zp.bind(null,e,t,s),t.then(e,e))}function Bd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vd(e,t,s,l,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=fr(-1,1),t.tag=2,Pr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ep=L.ReactCurrentOwner,vt=!1;function ht(e,t,s,l){t.child=e===null?cd(t,null,s,l):Ss(t,e.child,s,l)}function Hd(e,t,s,l,i){s=s.render;var d=t.ref;return _s(t,i),l=No(e,t,s,l,d,i),s=ko(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pr(e,t,i)):(He&&s&&ao(t),t.flags|=1,ht(e,t,l,i),t.child)}function qd(e,t,s,l,i){if(e===null){var d=s.type;return typeof d=="function"&&!ei(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=d,Wd(e,t,d,l,i)):(e=Ba(s.type,null,l,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&i)===0){var p=d.memoizedProps;if(s=s.compare,s=s!==null?s:on,s(p,l)&&e.ref===t.ref)return pr(e,t,i)}return t.flags|=1,e=Lr(d,l),e.ref=t.ref,e.return=t,t.child=e}function Wd(e,t,s,l,i){if(e!==null){var d=e.memoizedProps;if(on(d,l)&&e.ref===t.ref)if(vt=!1,t.pendingProps=l=d,(e.lanes&i)!==0)(e.flags&131072)!==0&&(vt=!0);else return t.lanes=e.lanes,pr(e,t,i)}return Do(e,t,s,l,i)}function Yd(e,t,s){var l=t.pendingProps,i=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Ts,Dt),Dt|=s;else{if((s&1073741824)===0)return e=d!==null?d.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(Ts,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:s,Ue(Ts,Dt),Dt|=l}else d!==null?(l=d.baseLanes|s,t.memoizedState=null):l=s,Ue(Ts,Dt),Dt|=l;return ht(e,t,i,s),t.child}function Qd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Do(e,t,s,l,i){var d=yt(s)?Yr:dt.current;return d=bs(t,d),_s(t,i),s=No(e,t,s,l,d,i),l=ko(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pr(e,t,i)):(He&&l&&ao(t),t.flags|=1,ht(e,t,s,i),t.child)}function Kd(e,t,s,l,i){if(yt(s)){var d=!0;fa(t)}else d=!1;if(_s(t,i),t.stateNode===null)Ta(e,t),Md(t,s,l),Po(t,s,l,i),l=!0;else if(e===null){var p=t.stateNode,v=t.memoizedProps;p.props=v;var N=p.context,F=s.contextType;typeof F=="object"&&F!==null?F=Mt(F):(F=yt(s)?Yr:dt.current,F=bs(t,F));var ee=s.getDerivedStateFromProps,re=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function";re||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==l||N!==F)&&Od(t,p,l,F),Rr=!1;var Z=t.memoizedState;p.state=Z,ja(t,l,p,i),N=t.memoizedState,v!==l||Z!==N||xt.current||Rr?(typeof ee=="function"&&(Ro(t,s,ee,l),N=t.memoizedState),(v=Rr||Ld(t,s,v,l,Z,N,F))?(re||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=N),p.props=l,p.state=N,p.context=F,l=v):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{p=t.stateNode,ud(e,t),v=t.memoizedProps,F=t.type===t.elementType?v:Wt(t.type,v),p.props=F,re=t.pendingProps,Z=p.context,N=s.contextType,typeof N=="object"&&N!==null?N=Mt(N):(N=yt(s)?Yr:dt.current,N=bs(t,N));var ue=s.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==re||Z!==N)&&Od(t,p,l,N),Rr=!1,Z=t.memoizedState,p.state=Z,ja(t,l,p,i);var fe=t.memoizedState;v!==re||Z!==fe||xt.current||Rr?(typeof ue=="function"&&(Ro(t,s,ue,l),fe=t.memoizedState),(F=Rr||Ld(t,s,F,l,Z,fe,N)||!1)?(ee||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,fe,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,fe,N)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=fe),p.props=l,p.state=fe,p.context=N,l=F):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),l=!1)}return Io(e,t,s,l,d,i)}function Io(e,t,s,l,i,d){Qd(e,t);var p=(t.flags&128)!==0;if(!l&&!p)return i&&ed(t,s,!1),pr(e,t,d);l=t.stateNode,Ep.current=t;var v=p&&typeof s.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&p?(t.child=Ss(t,e.child,null,d),t.child=Ss(t,null,v,d)):ht(e,t,v,d),t.memoizedState=l.state,i&&ed(t,s,!0),t.child}function Jd(e){var t=e.stateNode;t.pendingContext?Xc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xc(e,t.context,!1),xo(e,t.containerInfo)}function Gd(e,t,s,l,i){return ks(),co(i),t.flags|=256,ht(e,t,s,l),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xd(e,t,s){var l=t.pendingProps,i=qe.current,d=!1,p=(t.flags&128)!==0,v;if((v=p)||(v=e!==null&&e.memoizedState===null?!1:(i&2)!==0),v?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ue(qe,i&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(p=l.children,e=l.fallback,d?(l=t.mode,d=t.child,p={mode:"hidden",children:p},(l&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Va(p,l,0,null),e=ss(e,l,s,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Lo(s),t.memoizedState=Fo,e):Mo(t,p));if(i=e.memoizedState,i!==null&&(v=i.dehydrated,v!==null))return Rp(e,t,p,l,v,i,s);if(d){d=l.fallback,p=t.mode,i=e.child,v=i.sibling;var N={mode:"hidden",children:l.children};return(p&1)===0&&t.child!==i?(l=t.child,l.childLanes=0,l.pendingProps=N,t.deletions=null):(l=Lr(i,N),l.subtreeFlags=i.subtreeFlags&14680064),v!==null?d=Lr(v,d):(d=ss(d,p,s,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,p=e.child.memoizedState,p=p===null?Lo(s):{baseLanes:p.baseLanes|s,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~s,t.memoizedState=Fo,l}return d=e.child,e=d.sibling,l=Lr(d,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=s),l.return=t,l.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=l,t.memoizedState=null,l}function Mo(e,t){return t=Va({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pa(e,t,s,l){return l!==null&&co(l),Ss(t,e.child,null,s),e=Mo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rp(e,t,s,l,i,d,p){if(s)return t.flags&256?(t.flags&=-257,l=To(Error(o(422))),Pa(e,t,p,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=l.fallback,i=t.mode,l=Va({mode:"visible",children:l.children},i,0,null),d=ss(d,i,p,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,(t.mode&1)!==0&&Ss(t,e.child,null,p),t.child.memoizedState=Lo(p),t.memoizedState=Fo,d);if((t.mode&1)===0)return Pa(e,t,p,null);if(i.data==="$!"){if(l=i.nextSibling&&i.nextSibling.dataset,l)var v=l.dgst;return l=v,d=Error(o(419)),l=To(d,l,void 0),Pa(e,t,p,l)}if(v=(p&e.childLanes)!==0,vt||v){if(l=at,l!==null){switch(p&-p){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(l.suspendedLanes|p))!==0?0:i,i!==0&&i!==d.retryLane&&(d.retryLane=i,mr(e,i),Kt(l,e,i,-1))}return Zo(),l=To(Error(o(421))),Pa(e,t,p,l)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Bp.bind(null,e),i._reactRetry=t,null):(e=d.treeContext,At=Sr(i.nextSibling),Tt=t,He=!0,qt=null,e!==null&&(Ft[Lt++]=dr,Ft[Lt++]=ur,Ft[Lt++]=Qr,dr=e.id,ur=e.overflow,Qr=t),t=Mo(t,l.children),t.flags|=4096,t)}function Zd(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),po(e.return,t,s)}function Oo(e,t,s,l,i){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:i}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=i)}function eu(e,t,s){var l=t.pendingProps,i=l.revealOrder,d=l.tail;if(ht(e,t,l.children,s),l=qe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,s,t);else if(e.tag===19)Zd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ue(qe,l),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&Na(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),Oo(t,!1,i,s,d);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Na(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}Oo(t,!0,s,null,d);break;case"together":Oo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ta(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=Lr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Lr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Pp(e,t,s){switch(t.tag){case 3:Jd(t),ks();break;case 5:pd(t);break;case 1:yt(t.type)&&fa(t);break;case 4:xo(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,i=t.memoizedProps.value;Ue(va,l._currentValue),l._currentValue=i;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ue(qe,qe.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Xd(e,t,s):(Ue(qe,qe.current&1),e=pr(e,t,s),e!==null?e.sibling:null);Ue(qe,qe.current&1);break;case 19:if(l=(s&t.childLanes)!==0,(e.flags&128)!==0){if(l)return eu(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(qe,qe.current),l)break;return null;case 22:case 23:return t.lanes=0,Yd(e,t,s)}return pr(e,t,s)}var tu,Uo,ru,su;tu=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Uo=function(){},ru=function(e,t,s,l){var i=e.memoizedProps;if(i!==l){e=t.stateNode,Gr(tr.current);var d=null;switch(s){case"input":i=Ee(e,i),l=Ee(e,l),d=[];break;case"select":i=M({},i,{value:void 0}),l=M({},l,{value:void 0}),d=[];break;case"textarea":i=J(e,i),l=J(e,l),d=[];break;default:typeof i.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=da)}yl(s,l);var p;s=null;for(F in i)if(!l.hasOwnProperty(F)&&i.hasOwnProperty(F)&&i[F]!=null)if(F==="style"){var v=i[F];for(p in v)v.hasOwnProperty(p)&&(s||(s={}),s[p]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(u.hasOwnProperty(F)?d||(d=[]):(d=d||[]).push(F,null));for(F in l){var N=l[F];if(v=i?.[F],l.hasOwnProperty(F)&&N!==v&&(N!=null||v!=null))if(F==="style")if(v){for(p in v)!v.hasOwnProperty(p)||N&&N.hasOwnProperty(p)||(s||(s={}),s[p]="");for(p in N)N.hasOwnProperty(p)&&v[p]!==N[p]&&(s||(s={}),s[p]=N[p])}else s||(d||(d=[]),d.push(F,s)),s=N;else F==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,v=v?v.__html:void 0,N!=null&&v!==N&&(d=d||[]).push(F,N)):F==="children"?typeof N!="string"&&typeof N!="number"||(d=d||[]).push(F,""+N):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(u.hasOwnProperty(F)?(N!=null&&F==="onScroll"&&ze("scroll",e),d||v===N||(d=[])):(d=d||[]).push(F,N))}s&&(d=d||[]).push("style",s);var F=d;(t.updateQueue=F)&&(t.flags|=4)}},su=function(e,t,s,l){s!==l&&(t.flags|=4)};function Nn(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags&14680064,l|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Tp(e,t,s){var l=t.pendingProps;switch(lo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return yt(t.type)&&ma(),mt(t),null;case 3:return l=t.stateNode,Es(),Be(xt),Be(dt),wo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(xa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,qt!==null&&(Jo(qt),qt=null))),Uo(e,t),mt(t),null;case 5:yo(t);var i=Gr(yn.current);if(s=t.type,e!==null&&t.stateNode!=null)ru(e,t,s,l,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(o(166));return mt(t),null}if(e=Gr(tr.current),xa(t)){l=t.stateNode,s=t.type;var d=t.memoizedProps;switch(l[er]=t,l[fn]=d,e=(t.mode&1)!==0,s){case"dialog":ze("cancel",l),ze("close",l);break;case"iframe":case"object":case"embed":ze("load",l);break;case"video":case"audio":for(i=0;i<dn.length;i++)ze(dn[i],l);break;case"source":ze("error",l);break;case"img":case"image":case"link":ze("error",l),ze("load",l);break;case"details":ze("toggle",l);break;case"input":ye(l,d),ze("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},ze("invalid",l);break;case"textarea":de(l,d),ze("invalid",l)}yl(s,d),i=null;for(var p in d)if(d.hasOwnProperty(p)){var v=d[p];p==="children"?typeof v=="string"?l.textContent!==v&&(d.suppressHydrationWarning!==!0&&ca(l.textContent,v,e),i=["children",v]):typeof v=="number"&&l.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&ca(l.textContent,v,e),i=["children",""+v]):u.hasOwnProperty(p)&&v!=null&&p==="onScroll"&&ze("scroll",l)}switch(s){case"input":K(l),zt(l,d,!0);break;case"textarea":K(l),Oe(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=da)}l=i,t.updateQueue=l,l!==null&&(t.flags|=4)}else{p=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=or(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=p.createElement(s,{is:l.is}):(e=p.createElement(s),s==="select"&&(p=e,l.multiple?p.multiple=!0:l.size&&(p.size=l.size))):e=p.createElementNS(e,s),e[er]=t,e[fn]=l,tu(e,t,!1,!1),t.stateNode=e;e:{switch(p=vl(s,l),s){case"dialog":ze("cancel",e),ze("close",e),i=l;break;case"iframe":case"object":case"embed":ze("load",e),i=l;break;case"video":case"audio":for(i=0;i<dn.length;i++)ze(dn[i],e);i=l;break;case"source":ze("error",e),i=l;break;case"img":case"image":case"link":ze("error",e),ze("load",e),i=l;break;case"details":ze("toggle",e),i=l;break;case"input":ye(e,l),i=Ee(e,l),ze("invalid",e);break;case"option":i=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},i=M({},l,{value:void 0}),ze("invalid",e);break;case"textarea":de(e,l),i=J(e,l),ze("invalid",e);break;default:i=l}yl(s,i),v=i;for(d in v)if(v.hasOwnProperty(d)){var N=v[d];d==="style"?Wi(e,N):d==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Xt(e,N)):d==="children"?typeof N=="string"?(s!=="textarea"||N!=="")&&Bt(e,N):typeof N=="number"&&Bt(e,""+N):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(u.hasOwnProperty(d)?N!=null&&d==="onScroll"&&ze("scroll",e):N!=null&&T(e,d,N,p))}switch(s){case"input":K(e),zt(e,l,!1);break;case"textarea":K(e),Oe(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Se(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?yr(e,!!l.multiple,d,!1):l.defaultValue!=null&&yr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=da)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)su(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(s=Gr(yn.current),Gr(tr.current),xa(t)){if(l=t.stateNode,s=t.memoizedProps,l[er]=t,(d=l.nodeValue!==s)&&(e=Tt,e!==null))switch(e.tag){case 3:ca(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ca(l.nodeValue,s,(e.mode&1)!==0)}d&&(t.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[er]=t,t.stateNode=l}return mt(t),null;case 13:if(Be(qe),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&At!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ld(),ks(),t.flags|=98560,d=!1;else if(d=xa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[er]=t}else ks(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),d=!1}else qt!==null&&(Jo(qt),qt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qe.current&1)!==0?et===0&&(et=3):Zo())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return Es(),Uo(e,t),e===null&&un(t.stateNode.containerInfo),mt(t),null;case 10:return fo(t.type._context),mt(t),null;case 17:return yt(t.type)&&ma(),mt(t),null;case 19:if(Be(qe),d=t.memoizedState,d===null)return mt(t),null;if(l=(t.flags&128)!==0,p=d.rendering,p===null)if(l)Nn(d,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(p=Na(e),p!==null){for(t.flags|=128,Nn(d,!1),l=p.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=s,s=t.child;s!==null;)d=s,e=l,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ue(qe,qe.current&1|2),t.child}e=e.sibling}d.tail!==null&&Ke()>As&&(t.flags|=128,l=!0,Nn(d,!1),t.lanes=4194304)}else{if(!l)if(e=Na(p),e!==null){if(t.flags|=128,l=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Nn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!He)return mt(t),null}else 2*Ke()-d.renderingStartTime>As&&s!==1073741824&&(t.flags|=128,l=!0,Nn(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(s=d.last,s!==null?s.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Ke(),t.sibling=null,s=qe.current,Ue(qe,l?s&1|2:s&1),t):(mt(t),null);case 22:case 23:return Xo(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(Dt&1073741824)!==0&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function Ap(e,t){switch(lo(t),t.tag){case 1:return yt(t.type)&&ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Es(),Be(xt),Be(dt),wo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return yo(t),null;case 13:if(Be(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ks()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(qe),null;case 4:return Es(),null;case 10:return fo(t.type._context),null;case 22:case 23:return Xo(),null;case 24:return null;default:return null}}var Aa=!1,ft=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ps(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Ye(e,t,l)}else s.current=null}function $o(e,t,s){try{s()}catch(l){Ye(e,t,l)}}var nu=!1;function Ip(e,t){if(Gl=Xn,e=Lc(),Vl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var i=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var p=0,v=-1,N=-1,F=0,ee=0,re=e,Z=null;t:for(;;){for(var ue;re!==s||i!==0&&re.nodeType!==3||(v=p+i),re!==d||l!==0&&re.nodeType!==3||(N=p+l),re.nodeType===3&&(p+=re.nodeValue.length),(ue=re.firstChild)!==null;)Z=re,re=ue;for(;;){if(re===e)break t;if(Z===s&&++F===i&&(v=p),Z===d&&++ee===l&&(N=p),(ue=re.nextSibling)!==null)break;re=Z,Z=re.parentNode}re=ue}s=v===-1||N===-1?null:{start:v,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xl={focusedElem:e,selectionRange:s},Xn=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var fe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,Je=fe.memoizedState,P=t.stateNode,E=P.getSnapshotBeforeUpdate(t.elementType===t.type?pe:Wt(t.type,pe),Je);P.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(le){Ye(t,t.return,le)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return fe=nu,nu=!1,fe}function kn(e,t,s){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var i=l=l.next;do{if((i.tag&e)===e){var d=i.destroy;i.destroy=void 0,d!==void 0&&$o(t,s,d)}i=i.next}while(i!==l)}}function Da(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==t)}}function zo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function au(e){var t=e.alternate;t!==null&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[er],delete t[fn],delete t[ro],delete t[gp],delete t[xp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lu(e){return e.tag===5||e.tag===3||e.tag===4}function ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=da));else if(l!==4&&(e=e.child,e!==null))for(Bo(e,t,s),e=e.sibling;e!==null;)Bo(e,t,s),e=e.sibling}function Vo(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Vo(e,t,s),e=e.sibling;e!==null;)Vo(e,t,s),e=e.sibling}var ot=null,Yt=!1;function Tr(e,t,s){for(s=s.child;s!==null;)iu(e,t,s),s=s.sibling}function iu(e,t,s){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Wn,s)}catch{}switch(s.tag){case 5:ft||Ps(s,t);case 6:var l=ot,i=Yt;ot=null,Tr(e,t,s),ot=l,Yt=i,ot!==null&&(Yt?(e=ot,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):ot.removeChild(s.stateNode));break;case 18:ot!==null&&(Yt?(e=ot,s=s.stateNode,e.nodeType===8?to(e.parentNode,s):e.nodeType===1&&to(e,s),tn(e)):to(ot,s.stateNode));break;case 4:l=ot,i=Yt,ot=s.stateNode.containerInfo,Yt=!0,Tr(e,t,s),ot=l,Yt=i;break;case 0:case 11:case 14:case 15:if(!ft&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){i=l=l.next;do{var d=i,p=d.destroy;d=d.tag,p!==void 0&&((d&2)!==0||(d&4)!==0)&&$o(s,t,p),i=i.next}while(i!==l)}Tr(e,t,s);break;case 1:if(!ft&&(Ps(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(v){Ye(s,t,v)}Tr(e,t,s);break;case 21:Tr(e,t,s);break;case 22:s.mode&1?(ft=(l=ft)||s.memoizedState!==null,Tr(e,t,s),ft=l):Tr(e,t,s);break;default:Tr(e,t,s)}}function cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Dp),t.forEach(function(l){var i=Vp.bind(null,e,l);s.has(l)||(s.add(l),l.then(i,i))})}}function Qt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var i=s[l];try{var d=e,p=t,v=p;e:for(;v!==null;){switch(v.tag){case 5:ot=v.stateNode,Yt=!1;break e;case 3:ot=v.stateNode.containerInfo,Yt=!0;break e;case 4:ot=v.stateNode.containerInfo,Yt=!0;break e}v=v.return}if(ot===null)throw Error(o(160));iu(d,p,i),ot=null,Yt=!1;var N=i.alternate;N!==null&&(N.return=null),i.return=null}catch(F){Ye(i,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)du(t,e),t=t.sibling}function du(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),sr(e),l&4){try{kn(3,e,e.return),Da(3,e)}catch(pe){Ye(e,e.return,pe)}try{kn(5,e,e.return)}catch(pe){Ye(e,e.return,pe)}}break;case 1:Qt(t,e),sr(e),l&512&&s!==null&&Ps(s,s.return);break;case 5:if(Qt(t,e),sr(e),l&512&&s!==null&&Ps(s,s.return),e.flags&32){var i=e.stateNode;try{Bt(i,"")}catch(pe){Ye(e,e.return,pe)}}if(l&4&&(i=e.stateNode,i!=null)){var d=e.memoizedProps,p=s!==null?s.memoizedProps:d,v=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&Ve(i,d),vl(v,p);var F=vl(v,d);for(p=0;p<N.length;p+=2){var ee=N[p],re=N[p+1];ee==="style"?Wi(i,re):ee==="dangerouslySetInnerHTML"?Xt(i,re):ee==="children"?Bt(i,re):T(i,ee,re,F)}switch(v){case"input":st(i,d);break;case"textarea":ge(i,d);break;case"select":var Z=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!d.multiple;var ue=d.value;ue!=null?yr(i,!!d.multiple,ue,!1):Z!==!!d.multiple&&(d.defaultValue!=null?yr(i,!!d.multiple,d.defaultValue,!0):yr(i,!!d.multiple,d.multiple?[]:"",!1))}i[fn]=d}catch(pe){Ye(e,e.return,pe)}}break;case 6:if(Qt(t,e),sr(e),l&4){if(e.stateNode===null)throw Error(o(162));i=e.stateNode,d=e.memoizedProps;try{i.nodeValue=d}catch(pe){Ye(e,e.return,pe)}}break;case 3:if(Qt(t,e),sr(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{tn(t.containerInfo)}catch(pe){Ye(e,e.return,pe)}break;case 4:Qt(t,e),sr(e);break;case 13:Qt(t,e),sr(e),i=e.child,i.flags&8192&&(d=i.memoizedState!==null,i.stateNode.isHidden=d,!d||i.alternate!==null&&i.alternate.memoizedState!==null||(Wo=Ke())),l&4&&cu(e);break;case 22:if(ee=s!==null&&s.memoizedState!==null,e.mode&1?(ft=(F=ft)||ee,Qt(t,e),ft=F):Qt(t,e),sr(e),l&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!ee&&(e.mode&1)!==0)for(me=e,ee=e.child;ee!==null;){for(re=me=ee;me!==null;){switch(Z=me,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:kn(4,Z,Z.return);break;case 1:Ps(Z,Z.return);var fe=Z.stateNode;if(typeof fe.componentWillUnmount=="function"){l=Z,s=Z.return;try{t=l,fe.props=t.memoizedProps,fe.state=t.memoizedState,fe.componentWillUnmount()}catch(pe){Ye(l,s,pe)}}break;case 5:Ps(Z,Z.return);break;case 22:if(Z.memoizedState!==null){fu(re);continue}}ue!==null?(ue.return=Z,me=ue):fu(re)}ee=ee.sibling}e:for(ee=null,re=e;;){if(re.tag===5){if(ee===null){ee=re;try{i=re.stateNode,F?(d=i.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=re.stateNode,N=re.memoizedProps.style,p=N!=null&&N.hasOwnProperty("display")?N.display:null,v.style.display=qi("display",p))}catch(pe){Ye(e,e.return,pe)}}}else if(re.tag===6){if(ee===null)try{re.stateNode.nodeValue=F?"":re.memoizedProps}catch(pe){Ye(e,e.return,pe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===e)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===e)break e;for(;re.sibling===null;){if(re.return===null||re.return===e)break e;ee===re&&(ee=null),re=re.return}ee===re&&(ee=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Qt(t,e),sr(e),l&4&&cu(e);break;case 21:break;default:Qt(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(lu(s)){var l=s;break e}s=s.return}throw Error(o(160))}switch(l.tag){case 5:var i=l.stateNode;l.flags&32&&(Bt(i,""),l.flags&=-33);var d=ou(e);Vo(e,d,i);break;case 3:case 4:var p=l.stateNode.containerInfo,v=ou(e);Bo(e,v,p);break;default:throw Error(o(161))}}catch(N){Ye(e,e.return,N)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fp(e,t,s){me=e,uu(e)}function uu(e,t,s){for(var l=(e.mode&1)!==0;me!==null;){var i=me,d=i.child;if(i.tag===22&&l){var p=i.memoizedState!==null||Aa;if(!p){var v=i.alternate,N=v!==null&&v.memoizedState!==null||ft;v=Aa;var F=ft;if(Aa=p,(ft=N)&&!F)for(me=i;me!==null;)p=me,N=p.child,p.tag===22&&p.memoizedState!==null?pu(i):N!==null?(N.return=p,me=N):pu(i);for(;d!==null;)me=d,uu(d),d=d.sibling;me=i,Aa=v,ft=F}mu(e)}else(i.subtreeFlags&8772)!==0&&d!==null?(d.return=i,me=d):mu(e)}}function mu(e){for(;me!==null;){var t=me;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ft||Da(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!ft)if(s===null)l.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:Wt(t.type,s.memoizedProps);l.componentDidUpdate(i,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&fd(t,d,l);break;case 3:var p=t.updateQueue;if(p!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}fd(t,p,s)}break;case 5:var v=t.stateNode;if(s===null&&t.flags&4){s=v;var N=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&s.focus();break;case"img":N.src&&(s.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var ee=F.memoizedState;if(ee!==null){var re=ee.dehydrated;re!==null&&tn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ft||t.flags&512&&zo(t)}catch(Z){Ye(t,t.return,Z)}}if(t===e){me=null;break}if(s=t.sibling,s!==null){s.return=t.return,me=s;break}me=t.return}}function fu(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var s=t.sibling;if(s!==null){s.return=t.return,me=s;break}me=t.return}}function pu(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Da(4,t)}catch(N){Ye(t,s,N)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var i=t.return;try{l.componentDidMount()}catch(N){Ye(t,i,N)}}var d=t.return;try{zo(t)}catch(N){Ye(t,d,N)}break;case 5:var p=t.return;try{zo(t)}catch(N){Ye(t,p,N)}}}catch(N){Ye(t,t.return,N)}if(t===e){me=null;break}var v=t.sibling;if(v!==null){v.return=t.return,me=v;break}me=t.return}}var Lp=Math.ceil,Ia=L.ReactCurrentDispatcher,Ho=L.ReactCurrentOwner,Ut=L.ReactCurrentBatchConfig,Ie=0,at=null,Xe=null,it=0,Dt=0,Ts=Cr(0),et=0,Sn=null,Zr=0,Fa=0,qo=0,Cn=null,wt=null,Wo=0,As=1/0,hr=null,La=!1,Yo=null,Ar=null,Ma=!1,Dr=null,Oa=0,_n=0,Qo=null,Ua=-1,$a=0;function gt(){return(Ie&6)!==0?Ke():Ua!==-1?Ua:Ua=Ke()}function Ir(e){return(e.mode&1)===0?1:(Ie&2)!==0&&it!==0?it&-it:vp.transition!==null?($a===0&&($a=oc()),$a):(e=Le,e!==0||(e=window.event,e=e===void 0?16:gc(e.type)),e)}function Kt(e,t,s,l){if(50<_n)throw _n=0,Qo=null,Error(o(185));Js(e,s,l),((Ie&2)===0||e!==at)&&(e===at&&((Ie&2)===0&&(Fa|=s),et===4&&Fr(e,it)),bt(e,l),s===1&&Ie===0&&(t.mode&1)===0&&(As=Ke()+500,pa&&Er()))}function bt(e,t){var s=e.callbackNode;vf(e,t);var l=Kn(e,e===at?it:0);if(l===0)s!==null&&nc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(s!=null&&nc(s),t===1)e.tag===0?yp(gu.bind(null,e)):td(gu.bind(null,e)),pp(function(){(Ie&6)===0&&Er()}),s=null;else{switch(ic(l)){case 1:s=Cl;break;case 4:s=ac;break;case 16:s=qn;break;case 536870912:s=lc;break;default:s=qn}s=ku(s,hu.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function hu(e,t){if(Ua=-1,$a=0,(Ie&6)!==0)throw Error(o(327));var s=e.callbackNode;if(Ds()&&e.callbackNode!==s)return null;var l=Kn(e,e===at?it:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=za(e,l);else{t=l;var i=Ie;Ie|=2;var d=yu();(at!==e||it!==t)&&(hr=null,As=Ke()+500,ts(e,t));do try{Up();break}catch(v){xu(e,v)}while(!0);mo(),Ia.current=d,Ie=i,Xe!==null?t=0:(at=null,it=0,t=et)}if(t!==0){if(t===2&&(i=_l(e),i!==0&&(l=i,t=Ko(e,i))),t===1)throw s=Sn,ts(e,0),Fr(e,l),bt(e,Ke()),s;if(t===6)Fr(e,l);else{if(i=e.current.alternate,(l&30)===0&&!Mp(i)&&(t=za(e,l),t===2&&(d=_l(e),d!==0&&(l=d,t=Ko(e,d))),t===1))throw s=Sn,ts(e,0),Fr(e,l),bt(e,Ke()),s;switch(e.finishedWork=i,e.finishedLanes=l,t){case 0:case 1:throw Error(o(345));case 2:rs(e,wt,hr);break;case 3:if(Fr(e,l),(l&130023424)===l&&(t=Wo+500-Ke(),10<t)){if(Kn(e,0)!==0)break;if(i=e.suspendedLanes,(i&l)!==l){gt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=eo(rs.bind(null,e,wt,hr),t);break}rs(e,wt,hr);break;case 4:if(Fr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,i=-1;0<l;){var p=31-Vt(l);d=1<<p,p=t[p],p>i&&(i=p),l&=~d}if(l=i,l=Ke()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Lp(l/1960))-l,10<l){e.timeoutHandle=eo(rs.bind(null,e,wt,hr),l);break}rs(e,wt,hr);break;case 5:rs(e,wt,hr);break;default:throw Error(o(329))}}}return bt(e,Ke()),e.callbackNode===s?hu.bind(null,e):null}function Ko(e,t){var s=Cn;return e.current.memoizedState.isDehydrated&&(ts(e,t).flags|=256),e=za(e,t),e!==2&&(t=wt,wt=s,t!==null&&Jo(t)),e}function Jo(e){wt===null?wt=e:wt.push.apply(wt,e)}function Mp(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var i=s[l],d=i.getSnapshot;i=i.value;try{if(!Ht(d(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t){for(t&=~qo,t&=~Fa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Vt(t),l=1<<s;e[s]=-1,t&=~l}}function gu(e){if((Ie&6)!==0)throw Error(o(327));Ds();var t=Kn(e,0);if((t&1)===0)return bt(e,Ke()),null;var s=za(e,t);if(e.tag!==0&&s===2){var l=_l(e);l!==0&&(t=l,s=Ko(e,l))}if(s===1)throw s=Sn,ts(e,0),Fr(e,t),bt(e,Ke()),s;if(s===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rs(e,wt,hr),bt(e,Ke()),null}function Go(e,t){var s=Ie;Ie|=1;try{return e(t)}finally{Ie=s,Ie===0&&(As=Ke()+500,pa&&Er())}}function es(e){Dr!==null&&Dr.tag===0&&(Ie&6)===0&&Ds();var t=Ie;Ie|=1;var s=Ut.transition,l=Le;try{if(Ut.transition=null,Le=1,e)return e()}finally{Le=l,Ut.transition=s,Ie=t,(Ie&6)===0&&Er()}}function Xo(){Dt=Ts.current,Be(Ts)}function ts(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,fp(s)),Xe!==null)for(s=Xe.return;s!==null;){var l=s;switch(lo(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ma();break;case 3:Es(),Be(xt),Be(dt),wo();break;case 5:yo(l);break;case 4:Es();break;case 13:Be(qe);break;case 19:Be(qe);break;case 10:fo(l.type._context);break;case 22:case 23:Xo()}s=s.return}if(at=e,Xe=e=Lr(e.current,null),it=Dt=t,et=0,Sn=null,qo=Fa=Zr=0,wt=Cn=null,Jr!==null){for(t=0;t<Jr.length;t++)if(s=Jr[t],l=s.interleaved,l!==null){s.interleaved=null;var i=l.next,d=s.pending;if(d!==null){var p=d.next;d.next=i,l.next=p}s.pending=l}Jr=null}return e}function xu(e,t){do{var s=Xe;try{if(mo(),ka.current=Ea,Sa){for(var l=We.memoizedState;l!==null;){var i=l.queue;i!==null&&(i.pending=null),l=l.next}Sa=!1}if(Xr=0,nt=Ze=We=null,vn=!1,wn=0,Ho.current=null,s===null||s.return===null){et=1,Sn=t,Xe=null;break}e:{var d=e,p=s.return,v=s,N=t;if(t=it,v.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=N,ee=v,re=ee.tag;if((ee.mode&1)===0&&(re===0||re===11||re===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=Bd(p);if(ue!==null){ue.flags&=-257,Vd(ue,p,v,d,t),ue.mode&1&&zd(d,F,t),t=ue,N=F;var fe=t.updateQueue;if(fe===null){var pe=new Set;pe.add(N),t.updateQueue=pe}else fe.add(N);break e}else{if((t&1)===0){zd(d,F,t),Zo();break e}N=Error(o(426))}}else if(He&&v.mode&1){var Je=Bd(p);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),Vd(Je,p,v,d,t),co(Rs(N,v));break e}}d=N=Rs(N,v),et!==4&&(et=2),Cn===null?Cn=[d]:Cn.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var P=Ud(d,N,t);md(d,P);break e;case 1:v=N;var E=d.type,A=d.stateNode;if((d.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ar===null||!Ar.has(A)))){d.flags|=65536,t&=-t,d.lanes|=t;var le=$d(d,v,t);md(d,le);break e}}d=d.return}while(d!==null)}wu(s)}catch(xe){t=xe,Xe===s&&s!==null&&(Xe=s=s.return);continue}break}while(!0)}function yu(){var e=Ia.current;return Ia.current=Ea,e===null?Ea:e}function Zo(){(et===0||et===3||et===2)&&(et=4),at===null||(Zr&268435455)===0&&(Fa&268435455)===0||Fr(at,it)}function za(e,t){var s=Ie;Ie|=2;var l=yu();(at!==e||it!==t)&&(hr=null,ts(e,t));do try{Op();break}catch(i){xu(e,i)}while(!0);if(mo(),Ie=s,Ia.current=l,Xe!==null)throw Error(o(261));return at=null,it=0,et}function Op(){for(;Xe!==null;)vu(Xe)}function Up(){for(;Xe!==null&&!df();)vu(Xe)}function vu(e){var t=Nu(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?wu(e):Xe=t,Ho.current=null}function wu(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Tp(s,t,Dt),s!==null){Xe=s;return}}else{if(s=Ap(s,t),s!==null){s.flags&=32767,Xe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Xe=null;return}}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);et===0&&(et=5)}function rs(e,t,s){var l=Le,i=Ut.transition;try{Ut.transition=null,Le=1,$p(e,t,s,l)}finally{Ut.transition=i,Le=l}return null}function $p(e,t,s,l){do Ds();while(Dr!==null);if((Ie&6)!==0)throw Error(o(327));s=e.finishedWork;var i=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(wf(e,d),e===at&&(Xe=at=null,it=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ma||(Ma=!0,ku(qn,function(){return Ds(),null})),d=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||d){d=Ut.transition,Ut.transition=null;var p=Le;Le=1;var v=Ie;Ie|=4,Ho.current=null,Ip(e,s),du(s,e),lp(Xl),Xn=!!Gl,Xl=Gl=null,e.current=s,Fp(s),uf(),Ie=v,Le=p,Ut.transition=d}else e.current=s;if(Ma&&(Ma=!1,Dr=e,Oa=i),d=e.pendingLanes,d===0&&(Ar=null),pf(s.stateNode),bt(e,Ke()),t!==null)for(l=e.onRecoverableError,s=0;s<t.length;s++)i=t[s],l(i.value,{componentStack:i.stack,digest:i.digest});if(La)throw La=!1,e=Yo,Yo=null,e;return(Oa&1)!==0&&e.tag!==0&&Ds(),d=e.pendingLanes,(d&1)!==0?e===Qo?_n++:(_n=0,Qo=e):_n=0,Er(),null}function Ds(){if(Dr!==null){var e=ic(Oa),t=Ut.transition,s=Le;try{if(Ut.transition=null,Le=16>e?16:e,Dr===null)var l=!1;else{if(e=Dr,Dr=null,Oa=0,(Ie&6)!==0)throw Error(o(331));var i=Ie;for(Ie|=4,me=e.current;me!==null;){var d=me,p=d.child;if((me.flags&16)!==0){var v=d.deletions;if(v!==null){for(var N=0;N<v.length;N++){var F=v[N];for(me=F;me!==null;){var ee=me;switch(ee.tag){case 0:case 11:case 15:kn(8,ee,d)}var re=ee.child;if(re!==null)re.return=ee,me=re;else for(;me!==null;){ee=me;var Z=ee.sibling,ue=ee.return;if(au(ee),ee===F){me=null;break}if(Z!==null){Z.return=ue,me=Z;break}me=ue}}}var fe=d.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var Je=pe.sibling;pe.sibling=null,pe=Je}while(pe!==null)}}me=d}}if((d.subtreeFlags&2064)!==0&&p!==null)p.return=d,me=p;else e:for(;me!==null;){if(d=me,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:kn(9,d,d.return)}var P=d.sibling;if(P!==null){P.return=d.return,me=P;break e}me=d.return}}var E=e.current;for(me=E;me!==null;){p=me;var A=p.child;if((p.subtreeFlags&2064)!==0&&A!==null)A.return=p,me=A;else e:for(p=E;me!==null;){if(v=me,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:Da(9,v)}}catch(xe){Ye(v,v.return,xe)}if(v===p){me=null;break e}var le=v.sibling;if(le!==null){le.return=v.return,me=le;break e}me=v.return}}if(Ie=i,Er(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Wn,e)}catch{}l=!0}return l}finally{Le=s,Ut.transition=t}}return!1}function bu(e,t,s){t=Rs(s,t),t=Ud(e,t,1),e=Pr(e,t,1),t=gt(),e!==null&&(Js(e,1,t),bt(e,t))}function Ye(e,t,s){if(e.tag===3)bu(e,e,s);else for(;t!==null;){if(t.tag===3){bu(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ar===null||!Ar.has(l))){e=Rs(s,e),e=$d(t,e,1),t=Pr(t,e,1),e=gt(),t!==null&&(Js(t,1,e),bt(t,e));break}}t=t.return}}function zp(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),t=gt(),e.pingedLanes|=e.suspendedLanes&s,at===e&&(it&s)===s&&(et===4||et===3&&(it&130023424)===it&&500>Ke()-Wo?ts(e,0):qo|=s),bt(e,t)}function ju(e,t){t===0&&((e.mode&1)===0?t=1:(t=Qn,Qn<<=1,(Qn&130023424)===0&&(Qn=4194304)));var s=gt();e=mr(e,t),e!==null&&(Js(e,t,s),bt(e,s))}function Bp(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),ju(e,s)}function Vp(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(o(314))}l!==null&&l.delete(t),ju(e,s)}var Nu;Nu=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)vt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return vt=!1,Pp(e,t,s);vt=(e.flags&131072)!==0}else vt=!1,He&&(t.flags&1048576)!==0&&rd(t,ga,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ta(e,t),e=t.pendingProps;var i=bs(t,dt.current);_s(t,s),i=No(null,t,l,e,i,s);var d=ko();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(l)?(d=!0,fa(t)):d=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,go(t),i.updater=Ra,t.stateNode=i,i._reactInternals=t,Po(t,l,e,s),t=Io(null,t,l,!0,d,s)):(t.tag=0,He&&d&&ao(t),ht(null,t,i,s),t=t.child),t;case 16:l=t.elementType;e:{switch(Ta(e,t),e=t.pendingProps,i=l._init,l=i(l._payload),t.type=l,i=t.tag=qp(l),e=Wt(l,e),i){case 0:t=Do(null,t,l,e,s);break e;case 1:t=Kd(null,t,l,e,s);break e;case 11:t=Hd(null,t,l,e,s);break e;case 14:t=qd(null,t,l,Wt(l.type,e),s);break e}throw Error(o(306,l,""))}return t;case 0:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Wt(l,i),Do(e,t,l,i,s);case 1:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Wt(l,i),Kd(e,t,l,i,s);case 3:e:{if(Jd(t),e===null)throw Error(o(387));l=t.pendingProps,d=t.memoizedState,i=d.element,ud(e,t),ja(t,l,null,s);var p=t.memoizedState;if(l=p.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){i=Rs(Error(o(423)),t),t=Gd(e,t,l,s,i);break e}else if(l!==i){i=Rs(Error(o(424)),t),t=Gd(e,t,l,s,i);break e}else for(At=Sr(t.stateNode.containerInfo.firstChild),Tt=t,He=!0,qt=null,s=cd(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ks(),l===i){t=pr(e,t,s);break e}ht(e,t,l,s)}t=t.child}return t;case 5:return pd(t),e===null&&io(t),l=t.type,i=t.pendingProps,d=e!==null?e.memoizedProps:null,p=i.children,Zl(l,i)?p=null:d!==null&&Zl(l,d)&&(t.flags|=32),Qd(e,t),ht(e,t,p,s),t.child;case 6:return e===null&&io(t),null;case 13:return Xd(e,t,s);case 4:return xo(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ss(t,null,l,s):ht(e,t,l,s),t.child;case 11:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Wt(l,i),Hd(e,t,l,i,s);case 7:return ht(e,t,t.pendingProps,s),t.child;case 8:return ht(e,t,t.pendingProps.children,s),t.child;case 12:return ht(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(l=t.type._context,i=t.pendingProps,d=t.memoizedProps,p=i.value,Ue(va,l._currentValue),l._currentValue=p,d!==null)if(Ht(d.value,p)){if(d.children===i.children&&!xt.current){t=pr(e,t,s);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var v=d.dependencies;if(v!==null){p=d.child;for(var N=v.firstContext;N!==null;){if(N.context===l){if(d.tag===1){N=fr(-1,s&-s),N.tag=2;var F=d.updateQueue;if(F!==null){F=F.shared;var ee=F.pending;ee===null?N.next=N:(N.next=ee.next,ee.next=N),F.pending=N}}d.lanes|=s,N=d.alternate,N!==null&&(N.lanes|=s),po(d.return,s,t),v.lanes|=s;break}N=N.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(o(341));p.lanes|=s,v=p.alternate,v!==null&&(v.lanes|=s),po(p,s,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}ht(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,l=t.pendingProps.children,_s(t,s),i=Mt(i),l=l(i),t.flags|=1,ht(e,t,l,s),t.child;case 14:return l=t.type,i=Wt(l,t.pendingProps),i=Wt(l.type,i),qd(e,t,l,i,s);case 15:return Wd(e,t,t.type,t.pendingProps,s);case 17:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Wt(l,i),Ta(e,t),t.tag=1,yt(l)?(e=!0,fa(t)):e=!1,_s(t,s),Md(t,l,i),Po(t,l,i,s),Io(null,t,l,!0,e,s);case 19:return eu(e,t,s);case 22:return Yd(e,t,s)}throw Error(o(156,t.tag))};function ku(e,t){return sc(e,t)}function Hp(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,s,l){return new Hp(e,t,s,l)}function ei(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qp(e){if(typeof e=="function")return ei(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_e)return 11;if(e===he)return 14}return 2}function Lr(e,t){var s=e.alternate;return s===null?(s=$t(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ba(e,t,s,l,i,d){var p=2;if(l=e,typeof e=="function")ei(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case $:return ss(s.children,i,d,t);case B:p=8,i|=8;break;case X:return e=$t(12,s,t,i|2),e.elementType=X,e.lanes=d,e;case G:return e=$t(13,s,t,i),e.elementType=G,e.lanes=d,e;case Ne:return e=$t(19,s,t,i),e.elementType=Ne,e.lanes=d,e;case ce:return Va(s,i,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:p=10;break e;case ae:p=9;break e;case _e:p=11;break e;case he:p=14;break e;case q:p=16,l=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=$t(p,s,t,i),t.elementType=e,t.type=l,t.lanes=d,t}function ss(e,t,s,l){return e=$t(7,e,l,t),e.lanes=s,e}function Va(e,t,s,l){return e=$t(22,e,l,t),e.elementType=ce,e.lanes=s,e.stateNode={isHidden:!1},e}function ti(e,t,s){return e=$t(6,e,null,t),e.lanes=s,e}function ri(e,t,s){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wp(e,t,s,l,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=l,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function si(e,t,s,l,i,d,p,v,N){return e=new Wp(e,t,s,v,N),t===1?(t=1,d===!0&&(t|=8)):t=0,d=$t(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},go(d),e}function Yp(e,t,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:l==null?null:""+l,children:e,containerInfo:t,implementation:s}}function Su(e){if(!e)return _r;e=e._reactInternals;e:{if(qr(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var s=e.type;if(yt(s))return Zc(e,s,t)}return t}function Cu(e,t,s,l,i,d,p,v,N){return e=si(s,l,!0,e,i,d,p,v,N),e.context=Su(null),s=e.current,l=gt(),i=Ir(s),d=fr(l,i),d.callback=t??null,Pr(s,d,i),e.current.lanes=i,Js(e,i,l),bt(e,l),e}function Ha(e,t,s,l){var i=t.current,d=gt(),p=Ir(i);return s=Su(s),t.context===null?t.context=s:t.pendingContext=s,t=fr(d,p),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Pr(i,t,p),e!==null&&(Kt(e,i,p,d),ba(e,i,p)),p}function qa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _u(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ni(e,t){_u(e,t),(e=e.alternate)&&_u(e,t)}function Qp(){return null}var Eu=typeof reportError=="function"?reportError:function(e){console.error(e)};function ai(e){this._internalRoot=e}Wa.prototype.render=ai.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));Ha(e,t,null,null)},Wa.prototype.unmount=ai.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;es(function(){Ha(null,e,null,null)}),t[ir]=null}};function Wa(e){this._internalRoot=e}Wa.prototype.unstable_scheduleHydration=function(e){if(e){var t=uc();e={blockedOn:null,target:e,priority:t};for(var s=0;s<jr.length&&t!==0&&t<jr[s].priority;s++);jr.splice(s,0,e),s===0&&pc(e)}};function li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ya(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ru(){}function Kp(e,t,s,l,i){if(i){if(typeof l=="function"){var d=l;l=function(){var F=qa(p);d.call(F)}}var p=Cu(t,l,e,0,null,!1,!1,"",Ru);return e._reactRootContainer=p,e[ir]=p.current,un(e.nodeType===8?e.parentNode:e),es(),p}for(;i=e.lastChild;)e.removeChild(i);if(typeof l=="function"){var v=l;l=function(){var F=qa(N);v.call(F)}}var N=si(e,0,!1,null,null,!1,!1,"",Ru);return e._reactRootContainer=N,e[ir]=N.current,un(e.nodeType===8?e.parentNode:e),es(function(){Ha(t,N,s,l)}),N}function Qa(e,t,s,l,i){var d=s._reactRootContainer;if(d){var p=d;if(typeof i=="function"){var v=i;i=function(){var N=qa(p);v.call(N)}}Ha(t,p,e,i)}else p=Kp(s,t,e,i,l);return qa(p)}cc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ks(t.pendingLanes);s!==0&&(Rl(t,s|1),bt(t,Ke()),(Ie&6)===0&&(As=Ke()+500,Er()))}break;case 13:es(function(){var l=mr(e,1);if(l!==null){var i=gt();Kt(l,e,1,i)}}),ni(e,1)}},Pl=function(e){if(e.tag===13){var t=mr(e,134217728);if(t!==null){var s=gt();Kt(t,e,134217728,s)}ni(e,134217728)}},dc=function(e){if(e.tag===13){var t=Ir(e),s=mr(e,t);if(s!==null){var l=gt();Kt(s,e,t,l)}ni(e,t)}},uc=function(){return Le},mc=function(e,t){var s=Le;try{return Le=e,t()}finally{Le=s}},jl=function(e,t,s){switch(t){case"input":if(st(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var i=ua(l);if(!i)throw Error(o(90));ve(l),st(l,i)}}}break;case"textarea":ge(e,s);break;case"select":t=s.value,t!=null&&yr(e,!!s.multiple,t,!1)}},Ji=Go,Gi=es;var Jp={usingClientEntryPoint:!1,Events:[pn,vs,ua,Qi,Ki,Go]},En={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gp={bundleType:En.bundleType,version:En.version,rendererPackageName:En.rendererPackageName,rendererConfig:En.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tc(e),e===null?null:e.stateNode},findFiberByHostInstance:En.findFiberByHostInstance||Qp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Wn=Ka.inject(Gp),Zt=Ka}catch{}}return jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp,jt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!li(t))throw Error(o(200));return Yp(e,t,null,s)},jt.createRoot=function(e,t){if(!li(e))throw Error(o(299));var s=!1,l="",i=Eu;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=si(e,1,!1,null,null,s,!1,l,i),e[ir]=t.current,un(e.nodeType===8?e.parentNode:e),new ai(t)},jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=tc(t),e=e===null?null:e.stateNode,e},jt.flushSync=function(e){return es(e)},jt.hydrate=function(e,t,s){if(!Ya(t))throw Error(o(200));return Qa(null,e,t,!0,s)},jt.hydrateRoot=function(e,t,s){if(!li(e))throw Error(o(405));var l=s!=null&&s.hydratedSources||null,i=!1,d="",p=Eu;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),t=Cu(t,null,e,1,s??null,i,!1,d,p),e[ir]=t.current,un(e),l)for(e=0;e<l.length;e++)s=l[e],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Wa(t)},jt.render=function(e,t,s){if(!Ya(t))throw Error(o(200));return Qa(null,e,t,!1,s)},jt.unmountComponentAtNode=function(e){if(!Ya(e))throw Error(o(40));return e._reactRootContainer?(es(function(){Qa(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1},jt.unstable_batchedUpdates=Go,jt.unstable_renderSubtreeIntoContainer=function(e,t,s,l){if(!Ya(s))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Qa(e,t,s,!1,l)},jt.version="18.3.1-next-f1338f8080-20240426",jt}var Mu;function gm(){if(Mu)return ci.exports;Mu=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),ci.exports=lh(),ci.exports}var Ou;function oh(){if(Ou)return Ja;Ou=1;var n=gm();return Ja.createRoot=n.createRoot,Ja.hydrateRoot=n.hydrateRoot,Ja}var ih=oh();const ch=hm(ih);gm();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function In(){return In=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},In.apply(this,arguments)}var Or;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Or||(Or={}));const Uu="popstate";function dh(n){n===void 0&&(n={});function a(c,u){let{pathname:m,search:f,hash:h}=c.location;return vi("",{pathname:m,search:f,hash:h},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function o(c,u){return typeof u=="string"?u:nl(u)}return mh(a,o,null,n)}function Ge(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function xm(n,a){if(!n){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function uh(){return Math.random().toString(36).substr(2,8)}function $u(n,a){return{usr:n.state,key:n.key,idx:a}}function vi(n,a,o,c){return o===void 0&&(o=null),In({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof a=="string"?Os(a):a,{state:o,key:a&&a.key||c||uh()})}function nl(n){let{pathname:a="/",search:o="",hash:c=""}=n;return o&&o!=="?"&&(a+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(a+=c.charAt(0)==="#"?c:"#"+c),a}function Os(n){let a={};if(n){let o=n.indexOf("#");o>=0&&(a.hash=n.substr(o),n=n.substr(0,o));let c=n.indexOf("?");c>=0&&(a.search=n.substr(c),n=n.substr(0,c)),n&&(a.pathname=n)}return a}function mh(n,a,o,c){c===void 0&&(c={});let{window:u=document.defaultView,v5Compat:m=!1}=c,f=u.history,h=Or.Pop,x=null,w=y();w==null&&(w=0,f.replaceState(In({},f.state,{idx:w}),""));function y(){return(f.state||{idx:null}).idx}function b(){h=Or.Pop;let C=y(),W=C==null?null:C-w;w=C,x&&x({action:h,location:j.location,delta:W})}function R(C,W){h=Or.Push;let _=vi(j.location,C,W);w=y()+1;let T=$u(_,w),L=j.createHref(_);try{f.pushState(T,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;u.location.assign(L)}m&&x&&x({action:h,location:j.location,delta:1})}function I(C,W){h=Or.Replace;let _=vi(j.location,C,W);w=y();let T=$u(_,w),L=j.createHref(_);f.replaceState(T,"",L),m&&x&&x({action:h,location:j.location,delta:0})}function k(C){let W=u.location.origin!=="null"?u.location.origin:u.location.href,_=typeof C=="string"?C:nl(C);return _=_.replace(/ $/,"%20"),Ge(W,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,W)}let j={get action(){return h},get location(){return n(u,f)},listen(C){if(x)throw new Error("A history only accepts one active listener");return u.addEventListener(Uu,b),x=C,()=>{u.removeEventListener(Uu,b),x=null}},createHref(C){return a(u,C)},createURL:k,encodeLocation(C){let W=k(C);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:R,replace:I,go(C){return f.go(C)}};return j}var zu;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(zu||(zu={}));function fh(n,a,o){return o===void 0&&(o="/"),ph(n,a,o)}function ph(n,a,o,c){let u=typeof a=="string"?Os(a):a,m=Fi(u.pathname||"/",o);if(m==null)return null;let f=ym(n);hh(f);let h=null;for(let x=0;h==null&&x<f.length;++x){let w=_h(m);h=kh(f[x],w)}return h}function ym(n,a,o,c){a===void 0&&(a=[]),o===void 0&&(o=[]),c===void 0&&(c="");let u=(m,f,h)=>{let x={relativePath:h===void 0?m.path||"":h,caseSensitive:m.caseSensitive===!0,childrenIndex:f,route:m};x.relativePath.startsWith("/")&&(Ge(x.relativePath.startsWith(c),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(c.length));let w=$r([c,x.relativePath]),y=o.concat(x);m.children&&m.children.length>0&&(Ge(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),ym(m.children,a,y,w)),!(m.path==null&&!m.index)&&a.push({path:w,score:jh(w,m.index),routesMeta:y})};return n.forEach((m,f)=>{var h;if(m.path===""||!((h=m.path)!=null&&h.includes("?")))u(m,f);else for(let x of vm(m.path))u(m,f,x)}),a}function vm(n){let a=n.split("/");if(a.length===0)return[];let[o,...c]=a,u=o.endsWith("?"),m=o.replace(/\?$/,"");if(c.length===0)return u?[m,""]:[m];let f=vm(c.join("/")),h=[];return h.push(...f.map(x=>x===""?m:[m,x].join("/"))),u&&h.push(...f),h.map(x=>n.startsWith("/")&&x===""?"/":x)}function hh(n){n.sort((a,o)=>a.score!==o.score?o.score-a.score:Nh(a.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}const gh=/^:[\w-]+$/,xh=3,yh=2,vh=1,wh=10,bh=-2,Bu=n=>n==="*";function jh(n,a){let o=n.split("/"),c=o.length;return o.some(Bu)&&(c+=bh),a&&(c+=yh),o.filter(u=>!Bu(u)).reduce((u,m)=>u+(gh.test(m)?xh:m===""?vh:wh),c)}function Nh(n,a){return n.length===a.length&&n.slice(0,-1).every((c,u)=>c===a[u])?n[n.length-1]-a[a.length-1]:0}function kh(n,a,o){let{routesMeta:c}=n,u={},m="/",f=[];for(let h=0;h<c.length;++h){let x=c[h],w=h===c.length-1,y=m==="/"?a:a.slice(m.length)||"/",b=Sh({path:x.relativePath,caseSensitive:x.caseSensitive,end:w},y),R=x.route;if(!b)return null;Object.assign(u,b.params),f.push({params:u,pathname:$r([m,b.pathname]),pathnameBase:Th($r([m,b.pathnameBase])),route:R}),b.pathnameBase!=="/"&&(m=$r([m,b.pathnameBase]))}return f}function Sh(n,a){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[o,c]=Ch(n.path,n.caseSensitive,n.end),u=a.match(o);if(!u)return null;let m=u[0],f=m.replace(/(.)\/+$/,"$1"),h=u.slice(1);return{params:c.reduce((w,y,b)=>{let{paramName:R,isOptional:I}=y;if(R==="*"){let j=h[b]||"";f=m.slice(0,m.length-j.length).replace(/(.)\/+$/,"$1")}const k=h[b];return I&&!k?w[R]=void 0:w[R]=(k||"").replace(/%2F/g,"/"),w},{}),pathname:m,pathnameBase:f,pattern:n}}function Ch(n,a,o){a===void 0&&(a=!1),o===void 0&&(o=!0),xm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let c=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,x)=>(c.push({paramName:h,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(c.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,a?void 0:"i"),c]}function _h(n){try{return n.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return xm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),n}}function Fi(n,a){if(a==="/")return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let o=a.endsWith("/")?a.length-1:a.length,c=n.charAt(o);return c&&c!=="/"?null:n.slice(o)||"/"}function Eh(n,a){a===void 0&&(a="/");let{pathname:o,search:c="",hash:u=""}=typeof n=="string"?Os(n):n;return{pathname:o?o.startsWith("/")?o:Rh(o,a):a,search:Ah(c),hash:Dh(u)}}function Rh(n,a){let o=a.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?o.length>1&&o.pop():u!=="."&&o.push(u)}),o.length>1?o.join("/"):"/"}function mi(n,a,o,c){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ph(n){return n.filter((a,o)=>o===0||a.route.path&&a.route.path.length>0)}function Li(n,a){let o=Ph(n);return a?o.map((c,u)=>u===o.length-1?c.pathname:c.pathnameBase):o.map(c=>c.pathnameBase)}function Mi(n,a,o,c){c===void 0&&(c=!1);let u;typeof n=="string"?u=Os(n):(u=In({},n),Ge(!u.pathname||!u.pathname.includes("?"),mi("?","pathname","search",u)),Ge(!u.pathname||!u.pathname.includes("#"),mi("#","pathname","hash",u)),Ge(!u.search||!u.search.includes("#"),mi("#","search","hash",u)));let m=n===""||u.pathname==="",f=m?"/":u.pathname,h;if(f==null)h=o;else{let b=a.length-1;if(!c&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),b-=1;u.pathname=R.join("/")}h=b>=0?a[b]:"/"}let x=Eh(u,h),w=f&&f!=="/"&&f.endsWith("/"),y=(m||f===".")&&o.endsWith("/");return!x.pathname.endsWith("/")&&(w||y)&&(x.pathname+="/"),x}const $r=n=>n.join("/").replace(/\/\/+/g,"/"),Th=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ah=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Dh=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ih(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const wm=["post","put","patch","delete"];new Set(wm);const Fh=["get",...wm];new Set(Fh);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fn(){return Fn=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},Fn.apply(this,arguments)}const Oi=g.createContext(null),Lh=g.createContext(null),Vr=g.createContext(null),cl=g.createContext(null),xr=g.createContext({outlet:null,matches:[],isDataRoute:!1}),bm=g.createContext(null);function Mh(n,a){let{relative:o}=a===void 0?{}:a;Us()||Ge(!1);let{basename:c,navigator:u}=g.useContext(Vr),{hash:m,pathname:f,search:h}=Nm(n,{relative:o}),x=f;return c!=="/"&&(x=f==="/"?c:$r([c,f])),u.createHref({pathname:x,search:h,hash:m})}function Us(){return g.useContext(cl)!=null}function $s(){return Us()||Ge(!1),g.useContext(cl).location}function jm(n){g.useContext(Vr).static||g.useLayoutEffect(n)}function zs(){let{isDataRoute:n}=g.useContext(xr);return n?Gh():Oh()}function Oh(){Us()||Ge(!1);let n=g.useContext(Oi),{basename:a,future:o,navigator:c}=g.useContext(Vr),{matches:u}=g.useContext(xr),{pathname:m}=$s(),f=JSON.stringify(Li(u,o.v7_relativeSplatPath)),h=g.useRef(!1);return jm(()=>{h.current=!0}),g.useCallback(function(w,y){if(y===void 0&&(y={}),!h.current)return;if(typeof w=="number"){c.go(w);return}let b=Mi(w,JSON.parse(f),m,y.relative==="path");n==null&&a!=="/"&&(b.pathname=b.pathname==="/"?a:$r([a,b.pathname])),(y.replace?c.replace:c.push)(b,y.state,y)},[a,c,f,m,n])}function Uh(){let{matches:n}=g.useContext(xr),a=n[n.length-1];return a?a.params:{}}function Nm(n,a){let{relative:o}=a===void 0?{}:a,{future:c}=g.useContext(Vr),{matches:u}=g.useContext(xr),{pathname:m}=$s(),f=JSON.stringify(Li(u,c.v7_relativeSplatPath));return g.useMemo(()=>Mi(n,JSON.parse(f),m,o==="path"),[n,f,m,o])}function $h(n,a){return zh(n,a)}function zh(n,a,o,c){Us()||Ge(!1);let{navigator:u}=g.useContext(Vr),{matches:m}=g.useContext(xr),f=m[m.length-1],h=f?f.params:{};f&&f.pathname;let x=f?f.pathnameBase:"/";f&&f.route;let w=$s(),y;if(a){var b;let C=typeof a=="string"?Os(a):a;x==="/"||(b=C.pathname)!=null&&b.startsWith(x)||Ge(!1),y=C}else y=w;let R=y.pathname||"/",I=R;if(x!=="/"){let C=x.replace(/^\//,"").split("/");I="/"+R.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=fh(n,{pathname:I}),j=Wh(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:$r([x,u.encodeLocation?u.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?x:$r([x,u.encodeLocation?u.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),m,o,c);return a&&j?g.createElement(cl.Provider,{value:{location:Fn({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Or.Pop}},j):j}function Bh(){let n=Jh(),a=Ih(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),o=n instanceof Error?n.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},a),o?g.createElement("pre",{style:u},o):null,null)}const Vh=g.createElement(Bh,null);class Hh extends g.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,o){return o.location!==a.location||o.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:o.error,location:o.location,revalidation:a.revalidation||o.revalidation}}componentDidCatch(a,o){console.error("React Router caught the following error during render",a,o)}render(){return this.state.error!==void 0?g.createElement(xr.Provider,{value:this.props.routeContext},g.createElement(bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qh(n){let{routeContext:a,match:o,children:c}=n,u=g.useContext(Oi);return u&&u.static&&u.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=o.route.id),g.createElement(xr.Provider,{value:a},c)}function Wh(n,a,o,c){var u;if(a===void 0&&(a=[]),o===void 0&&(o=null),c===void 0&&(c=null),n==null){var m;if(!o)return null;if(o.errors)n=o.matches;else if((m=c)!=null&&m.v7_partialHydration&&a.length===0&&!o.initialized&&o.matches.length>0)n=o.matches;else return null}let f=n,h=(u=o)==null?void 0:u.errors;if(h!=null){let y=f.findIndex(b=>b.route.id&&h?.[b.route.id]!==void 0);y>=0||Ge(!1),f=f.slice(0,Math.min(f.length,y+1))}let x=!1,w=-1;if(o&&c&&c.v7_partialHydration)for(let y=0;y<f.length;y++){let b=f[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(w=y),b.route.id){let{loaderData:R,errors:I}=o,k=b.route.loader&&R[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||k){x=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}return f.reduceRight((y,b,R)=>{let I,k=!1,j=null,C=null;o&&(I=h&&b.route.id?h[b.route.id]:void 0,j=b.route.errorElement||Vh,x&&(w<0&&R===0?(Xh("route-fallback"),k=!0,C=null):w===R&&(k=!0,C=b.route.hydrateFallbackElement||null)));let W=a.concat(f.slice(0,R+1)),_=()=>{let T;return I?T=j:k?T=C:b.route.Component?T=g.createElement(b.route.Component,null):b.route.element?T=b.route.element:T=y,g.createElement(qh,{match:b,routeContext:{outlet:y,matches:W,isDataRoute:o!=null},children:T})};return o&&(b.route.ErrorBoundary||b.route.errorElement||R===0)?g.createElement(Hh,{location:o.location,revalidation:o.revalidation,component:j,error:I,children:_(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):_()},null)}var km=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(km||{}),Sm=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Sm||{});function Yh(n){let a=g.useContext(Oi);return a||Ge(!1),a}function Qh(n){let a=g.useContext(Lh);return a||Ge(!1),a}function Kh(n){let a=g.useContext(xr);return a||Ge(!1),a}function Cm(n){let a=Kh(),o=a.matches[a.matches.length-1];return o.route.id||Ge(!1),o.route.id}function Jh(){var n;let a=g.useContext(bm),o=Qh(),c=Cm();return a!==void 0?a:(n=o.errors)==null?void 0:n[c]}function Gh(){let{router:n}=Yh(km.UseNavigateStable),a=Cm(Sm.UseNavigateStable),o=g.useRef(!1);return jm(()=>{o.current=!0}),g.useCallback(function(u,m){m===void 0&&(m={}),o.current&&(typeof u=="number"?n.navigate(u):n.navigate(u,Fn({fromRouteId:a},m)))},[n,a])}const Vu={};function Xh(n,a,o){Vu[n]||(Vu[n]=!0)}function Zh(n,a){n?.v7_startTransition,n?.v7_relativeSplatPath}function wi(n){let{to:a,replace:o,state:c,relative:u}=n;Us()||Ge(!1);let{future:m,static:f}=g.useContext(Vr),{matches:h}=g.useContext(xr),{pathname:x}=$s(),w=zs(),y=Mi(a,Li(h,m.v7_relativeSplatPath),x,u==="path"),b=JSON.stringify(y);return g.useEffect(()=>w(JSON.parse(b),{replace:o,state:c,relative:u}),[w,b,u,o,c]),null}function ct(n){Ge(!1)}function eg(n){let{basename:a="/",children:o=null,location:c,navigationType:u=Or.Pop,navigator:m,static:f=!1,future:h}=n;Us()&&Ge(!1);let x=a.replace(/^\/*/,"/"),w=g.useMemo(()=>({basename:x,navigator:m,static:f,future:Fn({v7_relativeSplatPath:!1},h)}),[x,h,m,f]);typeof c=="string"&&(c=Os(c));let{pathname:y="/",search:b="",hash:R="",state:I=null,key:k="default"}=c,j=g.useMemo(()=>{let C=Fi(y,x);return C==null?null:{location:{pathname:C,search:b,hash:R,state:I,key:k},navigationType:u}},[x,y,b,R,I,k,u]);return j==null?null:g.createElement(Vr.Provider,{value:w},g.createElement(cl.Provider,{children:o,value:j}))}function tg(n){let{children:a,location:o}=n;return $h(bi(a),o)}new Promise(()=>{});function bi(n,a){a===void 0&&(a=[]);let o=[];return g.Children.forEach(n,(c,u)=>{if(!g.isValidElement(c))return;let m=[...a,u];if(c.type===g.Fragment){o.push.apply(o,bi(c.props.children,m));return}c.type!==ct&&Ge(!1),!c.props.index||!c.props.children||Ge(!1);let f={id:c.props.id||m.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(f.children=bi(c.props.children,m)),o.push(f)}),o}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ji(){return ji=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])}return n},ji.apply(this,arguments)}function rg(n,a){if(n==null)return{};var o={},c=Object.keys(n),u,m;for(m=0;m<c.length;m++)u=c[m],!(a.indexOf(u)>=0)&&(o[u]=n[u]);return o}function sg(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ng(n,a){return n.button===0&&(!a||a==="_self")&&!sg(n)}const ag=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lg="6";try{window.__reactRouterVersion=lg}catch{}const og="startTransition",Hu=sh[og];function ig(n){let{basename:a,children:o,future:c,window:u}=n,m=g.useRef();m.current==null&&(m.current=dh({window:u,v5Compat:!0}));let f=m.current,[h,x]=g.useState({action:f.action,location:f.location}),{v7_startTransition:w}=c||{},y=g.useCallback(b=>{w&&Hu?Hu(()=>x(b)):x(b)},[x,w]);return g.useLayoutEffect(()=>f.listen(y),[f,y]),g.useEffect(()=>Zh(c),[c]),g.createElement(eg,{basename:a,children:o,location:h.location,navigationType:h.action,navigator:f,future:c})}const cg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qu=g.forwardRef(function(a,o){let{onClick:c,relative:u,reloadDocument:m,replace:f,state:h,target:x,to:w,preventScrollReset:y,viewTransition:b}=a,R=rg(a,ag),{basename:I}=g.useContext(Vr),k,j=!1;if(typeof w=="string"&&dg.test(w)&&(k=w,cg))try{let T=new URL(window.location.href),L=w.startsWith("//")?new URL(T.protocol+w):new URL(w),z=Fi(L.pathname,I);L.origin===T.origin&&z!=null?w=z+L.search+L.hash:j=!0}catch{}let C=Mh(w,{relative:u}),W=ug(w,{replace:f,state:h,target:x,preventScrollReset:y,relative:u,viewTransition:b});function _(T){c&&c(T),T.defaultPrevented||W(T)}return g.createElement("a",ji({},R,{href:k||C,onClick:j||m?c:_,ref:o,target:x}))});var Wu;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Wu||(Wu={}));var Yu;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Yu||(Yu={}));function ug(n,a){let{target:o,replace:c,state:u,preventScrollReset:m,relative:f,viewTransition:h}=a===void 0?{}:a,x=zs(),w=$s(),y=Nm(n,{relative:f});return g.useCallback(b=>{if(ng(b,o)){b.preventDefault();let R=c!==void 0?c:nl(w)===nl(y);x(n,{replace:R,state:u,preventScrollReset:m,relative:f,viewTransition:h})}},[w,x,y,c,u,o,n,m,f,h])}function _m(n,a){return function(){return n.apply(a,arguments)}}const{toString:mg}=Object.prototype,{getPrototypeOf:Ui}=Object,{iterator:dl,toStringTag:Em}=Symbol,ul=(n=>a=>{const o=mg.call(a);return n[o]||(n[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Gt=n=>(n=n.toLowerCase(),a=>ul(a)===n),ml=n=>a=>typeof a===n,{isArray:Bs}=Array,Ln=ml("undefined");function On(n){return n!==null&&!Ln(n)&&n.constructor!==null&&!Ln(n.constructor)&&_t(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Rm=Gt("ArrayBuffer");function fg(n){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(n):a=n&&n.buffer&&Rm(n.buffer),a}const pg=ml("string"),_t=ml("function"),Pm=ml("number"),Un=n=>n!==null&&typeof n=="object",hg=n=>n===!0||n===!1,tl=n=>{if(ul(n)!=="object")return!1;const a=Ui(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Em in n)&&!(dl in n)},gg=n=>{if(!Un(n)||On(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},xg=Gt("Date"),yg=Gt("File"),vg=Gt("Blob"),wg=Gt("FileList"),bg=n=>Un(n)&&_t(n.pipe),jg=n=>{let a;return n&&(typeof FormData=="function"&&n instanceof FormData||_t(n.append)&&((a=ul(n))==="formdata"||a==="object"&&_t(n.toString)&&n.toString()==="[object FormData]"))},Ng=Gt("URLSearchParams"),[kg,Sg,Cg,_g]=["ReadableStream","Request","Response","Headers"].map(Gt),Eg=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $n(n,a,{allOwnKeys:o=!1}={}){if(n===null||typeof n>"u")return;let c,u;if(typeof n!="object"&&(n=[n]),Bs(n))for(c=0,u=n.length;c<u;c++)a.call(null,n[c],c,n);else{if(On(n))return;const m=o?Object.getOwnPropertyNames(n):Object.keys(n),f=m.length;let h;for(c=0;c<f;c++)h=m[c],a.call(null,n[h],h,n)}}function Tm(n,a){if(On(n))return null;a=a.toLowerCase();const o=Object.keys(n);let c=o.length,u;for(;c-- >0;)if(u=o[c],a===u.toLowerCase())return u;return null}const as=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Am=n=>!Ln(n)&&n!==as;function Ni(){const{caseless:n}=Am(this)&&this||{},a={},o=(c,u)=>{const m=n&&Tm(a,u)||u;tl(a[m])&&tl(c)?a[m]=Ni(a[m],c):tl(c)?a[m]=Ni({},c):Bs(c)?a[m]=c.slice():a[m]=c};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&$n(arguments[c],o);return a}const Rg=(n,a,o,{allOwnKeys:c}={})=>($n(a,(u,m)=>{o&&_t(u)?n[m]=_m(u,o):n[m]=u},{allOwnKeys:c}),n),Pg=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Tg=(n,a,o,c)=>{n.prototype=Object.create(a.prototype,c),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:a.prototype}),o&&Object.assign(n.prototype,o)},Ag=(n,a,o,c)=>{let u,m,f;const h={};if(a=a||{},n==null)return a;do{for(u=Object.getOwnPropertyNames(n),m=u.length;m-- >0;)f=u[m],(!c||c(f,n,a))&&!h[f]&&(a[f]=n[f],h[f]=!0);n=o!==!1&&Ui(n)}while(n&&(!o||o(n,a))&&n!==Object.prototype);return a},Dg=(n,a,o)=>{n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=a.length;const c=n.indexOf(a,o);return c!==-1&&c===o},Ig=n=>{if(!n)return null;if(Bs(n))return n;let a=n.length;if(!Pm(a))return null;const o=new Array(a);for(;a-- >0;)o[a]=n[a];return o},Fg=(n=>a=>n&&a instanceof n)(typeof Uint8Array<"u"&&Ui(Uint8Array)),Lg=(n,a)=>{const c=(n&&n[dl]).call(n);let u;for(;(u=c.next())&&!u.done;){const m=u.value;a.call(n,m[0],m[1])}},Mg=(n,a)=>{let o;const c=[];for(;(o=n.exec(a))!==null;)c.push(o);return c},Og=Gt("HTMLFormElement"),Ug=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,c,u){return c.toUpperCase()+u}),Qu=(({hasOwnProperty:n})=>(a,o)=>n.call(a,o))(Object.prototype),$g=Gt("RegExp"),Dm=(n,a)=>{const o=Object.getOwnPropertyDescriptors(n),c={};$n(o,(u,m)=>{let f;(f=a(u,m,n))!==!1&&(c[m]=f||u)}),Object.defineProperties(n,c)},zg=n=>{Dm(n,(a,o)=>{if(_t(n)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const c=n[o];if(_t(c)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},Bg=(n,a)=>{const o={},c=u=>{u.forEach(m=>{o[m]=!0})};return Bs(n)?c(n):c(String(n).split(a)),o},Vg=()=>{},Hg=(n,a)=>n!=null&&Number.isFinite(n=+n)?n:a;function qg(n){return!!(n&&_t(n.append)&&n[Em]==="FormData"&&n[dl])}const Wg=n=>{const a=new Array(10),o=(c,u)=>{if(Un(c)){if(a.indexOf(c)>=0)return;if(On(c))return c;if(!("toJSON"in c)){a[u]=c;const m=Bs(c)?[]:{};return $n(c,(f,h)=>{const x=o(f,u+1);!Ln(x)&&(m[h]=x)}),a[u]=void 0,m}}return c};return o(n,0)},Yg=Gt("AsyncFunction"),Qg=n=>n&&(Un(n)||_t(n))&&_t(n.then)&&_t(n.catch),Im=((n,a)=>n?setImmediate:a?((o,c)=>(as.addEventListener("message",({source:u,data:m})=>{u===as&&m===o&&c.length&&c.shift()()},!1),u=>{c.push(u),as.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",_t(as.postMessage)),Kg=typeof queueMicrotask<"u"?queueMicrotask.bind(as):typeof process<"u"&&process.nextTick||Im,Jg=n=>n!=null&&_t(n[dl]),O={isArray:Bs,isArrayBuffer:Rm,isBuffer:On,isFormData:jg,isArrayBufferView:fg,isString:pg,isNumber:Pm,isBoolean:hg,isObject:Un,isPlainObject:tl,isEmptyObject:gg,isReadableStream:kg,isRequest:Sg,isResponse:Cg,isHeaders:_g,isUndefined:Ln,isDate:xg,isFile:yg,isBlob:vg,isRegExp:$g,isFunction:_t,isStream:bg,isURLSearchParams:Ng,isTypedArray:Fg,isFileList:wg,forEach:$n,merge:Ni,extend:Rg,trim:Eg,stripBOM:Pg,inherits:Tg,toFlatObject:Ag,kindOf:ul,kindOfTest:Gt,endsWith:Dg,toArray:Ig,forEachEntry:Lg,matchAll:Mg,isHTMLForm:Og,hasOwnProperty:Qu,hasOwnProp:Qu,reduceDescriptors:Dm,freezeMethods:zg,toObjectSet:Bg,toCamelCase:Ug,noop:Vg,toFiniteNumber:Hg,findKey:Tm,global:as,isContextDefined:Am,isSpecCompliantForm:qg,toJSONObject:Wg,isAsyncFn:Yg,isThenable:Qg,setImmediate:Im,asap:Kg,isIterable:Jg};function Pe(n,a,o,c,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",a&&(this.code=a),o&&(this.config=o),c&&(this.request=c),u&&(this.response=u,this.status=u.status?u.status:null)}O.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const Fm=Pe.prototype,Lm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Lm[n]={value:n}});Object.defineProperties(Pe,Lm);Object.defineProperty(Fm,"isAxiosError",{value:!0});Pe.from=(n,a,o,c,u,m)=>{const f=Object.create(Fm);return O.toFlatObject(n,f,function(x){return x!==Error.prototype},h=>h!=="isAxiosError"),Pe.call(f,n.message,a,o,c,u),f.cause=n,f.name=n.name,m&&Object.assign(f,m),f};const Gg=null;function ki(n){return O.isPlainObject(n)||O.isArray(n)}function Mm(n){return O.endsWith(n,"[]")?n.slice(0,-2):n}function Ku(n,a,o){return n?n.concat(a).map(function(u,m){return u=Mm(u),!o&&m?"["+u+"]":u}).join(o?".":""):a}function Xg(n){return O.isArray(n)&&!n.some(ki)}const Zg=O.toFlatObject(O,{},null,function(a){return/^is[A-Z]/.test(a)});function fl(n,a,o){if(!O.isObject(n))throw new TypeError("target must be an object");a=a||new FormData,o=O.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,C){return!O.isUndefined(C[j])});const c=o.metaTokens,u=o.visitor||y,m=o.dots,f=o.indexes,x=(o.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(a);if(!O.isFunction(u))throw new TypeError("visitor must be a function");function w(k){if(k===null)return"";if(O.isDate(k))return k.toISOString();if(O.isBoolean(k))return k.toString();if(!x&&O.isBlob(k))throw new Pe("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(k)||O.isTypedArray(k)?x&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function y(k,j,C){let W=k;if(k&&!C&&typeof k=="object"){if(O.endsWith(j,"{}"))j=c?j:j.slice(0,-2),k=JSON.stringify(k);else if(O.isArray(k)&&Xg(k)||(O.isFileList(k)||O.endsWith(j,"[]"))&&(W=O.toArray(k)))return j=Mm(j),W.forEach(function(T,L){!(O.isUndefined(T)||T===null)&&a.append(f===!0?Ku([j],L,m):f===null?j:j+"[]",w(T))}),!1}return ki(k)?!0:(a.append(Ku(C,j,m),w(k)),!1)}const b=[],R=Object.assign(Zg,{defaultVisitor:y,convertValue:w,isVisitable:ki});function I(k,j){if(!O.isUndefined(k)){if(b.indexOf(k)!==-1)throw Error("Circular reference detected in "+j.join("."));b.push(k),O.forEach(k,function(W,_){(!(O.isUndefined(W)||W===null)&&u.call(a,W,O.isString(_)?_.trim():_,j,R))===!0&&I(W,j?j.concat(_):[_])}),b.pop()}}if(!O.isObject(n))throw new TypeError("data must be an object");return I(n),a}function Ju(n){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(c){return a[c]})}function $i(n,a){this._pairs=[],n&&fl(n,this,a)}const Om=$i.prototype;Om.append=function(a,o){this._pairs.push([a,o])};Om.toString=function(a){const o=a?function(c){return a.call(this,c,Ju)}:Ju;return this._pairs.map(function(u){return o(u[0])+"="+o(u[1])},"").join("&")};function ex(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Um(n,a,o){if(!a)return n;const c=o&&o.encode||ex;O.isFunction(o)&&(o={serialize:o});const u=o&&o.serialize;let m;if(u?m=u(a,o):m=O.isURLSearchParams(a)?a.toString():new $i(a,o).toString(c),m){const f=n.indexOf("#");f!==-1&&(n=n.slice(0,f)),n+=(n.indexOf("?")===-1?"?":"&")+m}return n}class Gu{constructor(){this.handlers=[]}use(a,o,c){return this.handlers.push({fulfilled:a,rejected:o,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){O.forEach(this.handlers,function(c){c!==null&&a(c)})}}const $m={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tx=typeof URLSearchParams<"u"?URLSearchParams:$i,rx=typeof FormData<"u"?FormData:null,sx=typeof Blob<"u"?Blob:null,nx={isBrowser:!0,classes:{URLSearchParams:tx,FormData:rx,Blob:sx},protocols:["http","https","file","blob","url","data"]},zi=typeof window<"u"&&typeof document<"u",Si=typeof navigator=="object"&&navigator||void 0,ax=zi&&(!Si||["ReactNative","NativeScript","NS"].indexOf(Si.product)<0),lx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ox=zi&&window.location.href||"http://localhost",ix=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zi,hasStandardBrowserEnv:ax,hasStandardBrowserWebWorkerEnv:lx,navigator:Si,origin:ox},Symbol.toStringTag,{value:"Module"})),pt={...ix,...nx};function cx(n,a){return fl(n,new pt.classes.URLSearchParams,{visitor:function(o,c,u,m){return pt.isNode&&O.isBuffer(o)?(this.append(c,o.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...a})}function dx(n){return O.matchAll(/\w+|\[(\w*)]/g,n).map(a=>a[0]==="[]"?"":a[1]||a[0])}function ux(n){const a={},o=Object.keys(n);let c;const u=o.length;let m;for(c=0;c<u;c++)m=o[c],a[m]=n[m];return a}function zm(n){function a(o,c,u,m){let f=o[m++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),x=m>=o.length;return f=!f&&O.isArray(u)?u.length:f,x?(O.hasOwnProp(u,f)?u[f]=[u[f],c]:u[f]=c,!h):((!u[f]||!O.isObject(u[f]))&&(u[f]=[]),a(o,c,u[f],m)&&O.isArray(u[f])&&(u[f]=ux(u[f])),!h)}if(O.isFormData(n)&&O.isFunction(n.entries)){const o={};return O.forEachEntry(n,(c,u)=>{a(dx(c),u,o,0)}),o}return null}function mx(n,a,o){if(O.isString(n))try{return(a||JSON.parse)(n),O.trim(n)}catch(c){if(c.name!=="SyntaxError")throw c}return(o||JSON.stringify)(n)}const zn={transitional:$m,adapter:["xhr","http","fetch"],transformRequest:[function(a,o){const c=o.getContentType()||"",u=c.indexOf("application/json")>-1,m=O.isObject(a);if(m&&O.isHTMLForm(a)&&(a=new FormData(a)),O.isFormData(a))return u?JSON.stringify(zm(a)):a;if(O.isArrayBuffer(a)||O.isBuffer(a)||O.isStream(a)||O.isFile(a)||O.isBlob(a)||O.isReadableStream(a))return a;if(O.isArrayBufferView(a))return a.buffer;if(O.isURLSearchParams(a))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(m){if(c.indexOf("application/x-www-form-urlencoded")>-1)return cx(a,this.formSerializer).toString();if((h=O.isFileList(a))||c.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return fl(h?{"files[]":a}:a,x&&new x,this.formSerializer)}}return m||u?(o.setContentType("application/json",!1),mx(a)):a}],transformResponse:[function(a){const o=this.transitional||zn.transitional,c=o&&o.forcedJSONParsing,u=this.responseType==="json";if(O.isResponse(a)||O.isReadableStream(a))return a;if(a&&O.isString(a)&&(c&&!this.responseType||u)){const f=!(o&&o.silentJSONParsing)&&u;try{return JSON.parse(a)}catch(h){if(f)throw h.name==="SyntaxError"?Pe.from(h,Pe.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],n=>{zn.headers[n]={}});const fx=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),px=n=>{const a={};let o,c,u;return n&&n.split(`
`).forEach(function(f){u=f.indexOf(":"),o=f.substring(0,u).trim().toLowerCase(),c=f.substring(u+1).trim(),!(!o||a[o]&&fx[o])&&(o==="set-cookie"?a[o]?a[o].push(c):a[o]=[c]:a[o]=a[o]?a[o]+", "+c:c)}),a},Xu=Symbol("internals");function Pn(n){return n&&String(n).trim().toLowerCase()}function rl(n){return n===!1||n==null?n:O.isArray(n)?n.map(rl):String(n)}function hx(n){const a=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=o.exec(n);)a[c[1]]=c[2];return a}const gx=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fi(n,a,o,c,u){if(O.isFunction(c))return c.call(this,a,o);if(u&&(a=o),!!O.isString(a)){if(O.isString(c))return a.indexOf(c)!==-1;if(O.isRegExp(c))return c.test(a)}}function xx(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,o,c)=>o.toUpperCase()+c)}function yx(n,a){const o=O.toCamelCase(" "+a);["get","set","has"].forEach(c=>{Object.defineProperty(n,c+o,{value:function(u,m,f){return this[c].call(this,a,u,m,f)},configurable:!0})})}let Et=class{constructor(a){a&&this.set(a)}set(a,o,c){const u=this;function m(h,x,w){const y=Pn(x);if(!y)throw new Error("header name must be a non-empty string");const b=O.findKey(u,y);(!b||u[b]===void 0||w===!0||w===void 0&&u[b]!==!1)&&(u[b||x]=rl(h))}const f=(h,x)=>O.forEach(h,(w,y)=>m(w,y,x));if(O.isPlainObject(a)||a instanceof this.constructor)f(a,o);else if(O.isString(a)&&(a=a.trim())&&!gx(a))f(px(a),o);else if(O.isObject(a)&&O.isIterable(a)){let h={},x,w;for(const y of a){if(!O.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[w=y[0]]=(x=h[w])?O.isArray(x)?[...x,y[1]]:[x,y[1]]:y[1]}f(h,o)}else a!=null&&m(o,a,c);return this}get(a,o){if(a=Pn(a),a){const c=O.findKey(this,a);if(c){const u=this[c];if(!o)return u;if(o===!0)return hx(u);if(O.isFunction(o))return o.call(this,u,c);if(O.isRegExp(o))return o.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,o){if(a=Pn(a),a){const c=O.findKey(this,a);return!!(c&&this[c]!==void 0&&(!o||fi(this,this[c],c,o)))}return!1}delete(a,o){const c=this;let u=!1;function m(f){if(f=Pn(f),f){const h=O.findKey(c,f);h&&(!o||fi(c,c[h],h,o))&&(delete c[h],u=!0)}}return O.isArray(a)?a.forEach(m):m(a),u}clear(a){const o=Object.keys(this);let c=o.length,u=!1;for(;c--;){const m=o[c];(!a||fi(this,this[m],m,a,!0))&&(delete this[m],u=!0)}return u}normalize(a){const o=this,c={};return O.forEach(this,(u,m)=>{const f=O.findKey(c,m);if(f){o[f]=rl(u),delete o[m];return}const h=a?xx(m):String(m).trim();h!==m&&delete o[m],o[h]=rl(u),c[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const o=Object.create(null);return O.forEach(this,(c,u)=>{c!=null&&c!==!1&&(o[u]=a&&O.isArray(c)?c.join(", "):c)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,o])=>a+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...o){const c=new this(a);return o.forEach(u=>c.set(u)),c}static accessor(a){const c=(this[Xu]=this[Xu]={accessors:{}}).accessors,u=this.prototype;function m(f){const h=Pn(f);c[h]||(yx(u,f),c[h]=!0)}return O.isArray(a)?a.forEach(m):m(a),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(Et.prototype,({value:n},a)=>{let o=a[0].toUpperCase()+a.slice(1);return{get:()=>n,set(c){this[o]=c}}});O.freezeMethods(Et);function pi(n,a){const o=this||zn,c=a||o,u=Et.from(c.headers);let m=c.data;return O.forEach(n,function(h){m=h.call(o,m,u.normalize(),a?a.status:void 0)}),u.normalize(),m}function Bm(n){return!!(n&&n.__CANCEL__)}function Vs(n,a,o){Pe.call(this,n??"canceled",Pe.ERR_CANCELED,a,o),this.name="CanceledError"}O.inherits(Vs,Pe,{__CANCEL__:!0});function Vm(n,a,o){const c=o.config.validateStatus;!o.status||!c||c(o.status)?n(o):a(new Pe("Request failed with status code "+o.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function vx(n){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return a&&a[1]||""}function wx(n,a){n=n||10;const o=new Array(n),c=new Array(n);let u=0,m=0,f;return a=a!==void 0?a:1e3,function(x){const w=Date.now(),y=c[m];f||(f=w),o[u]=x,c[u]=w;let b=m,R=0;for(;b!==u;)R+=o[b++],b=b%n;if(u=(u+1)%n,u===m&&(m=(m+1)%n),w-f<a)return;const I=y&&w-y;return I?Math.round(R*1e3/I):void 0}}function bx(n,a){let o=0,c=1e3/a,u,m;const f=(w,y=Date.now())=>{o=y,u=null,m&&(clearTimeout(m),m=null),n(...w)};return[(...w)=>{const y=Date.now(),b=y-o;b>=c?f(w,y):(u=w,m||(m=setTimeout(()=>{m=null,f(u)},c-b)))},()=>u&&f(u)]}const al=(n,a,o=3)=>{let c=0;const u=wx(50,250);return bx(m=>{const f=m.loaded,h=m.lengthComputable?m.total:void 0,x=f-c,w=u(x),y=f<=h;c=f;const b={loaded:f,total:h,progress:h?f/h:void 0,bytes:x,rate:w||void 0,estimated:w&&h&&y?(h-f)/w:void 0,event:m,lengthComputable:h!=null,[a?"download":"upload"]:!0};n(b)},o)},Zu=(n,a)=>{const o=n!=null;return[c=>a[0]({lengthComputable:o,total:n,loaded:c}),a[1]]},em=n=>(...a)=>O.asap(()=>n(...a)),jx=pt.hasStandardBrowserEnv?((n,a)=>o=>(o=new URL(o,pt.origin),n.protocol===o.protocol&&n.host===o.host&&(a||n.port===o.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,Nx=pt.hasStandardBrowserEnv?{write(n,a,o,c,u,m){const f=[n+"="+encodeURIComponent(a)];O.isNumber(o)&&f.push("expires="+new Date(o).toGMTString()),O.isString(c)&&f.push("path="+c),O.isString(u)&&f.push("domain="+u),m===!0&&f.push("secure"),document.cookie=f.join("; ")},read(n){const a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kx(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Sx(n,a){return a?n.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):n}function Hm(n,a,o){let c=!kx(a);return n&&(c||o==!1)?Sx(n,a):a}const tm=n=>n instanceof Et?{...n}:n;function os(n,a){a=a||{};const o={};function c(w,y,b,R){return O.isPlainObject(w)&&O.isPlainObject(y)?O.merge.call({caseless:R},w,y):O.isPlainObject(y)?O.merge({},y):O.isArray(y)?y.slice():y}function u(w,y,b,R){if(O.isUndefined(y)){if(!O.isUndefined(w))return c(void 0,w,b,R)}else return c(w,y,b,R)}function m(w,y){if(!O.isUndefined(y))return c(void 0,y)}function f(w,y){if(O.isUndefined(y)){if(!O.isUndefined(w))return c(void 0,w)}else return c(void 0,y)}function h(w,y,b){if(b in a)return c(w,y);if(b in n)return c(void 0,w)}const x={url:m,method:m,data:m,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(w,y,b)=>u(tm(w),tm(y),b,!0)};return O.forEach(Object.keys({...n,...a}),function(y){const b=x[y]||u,R=b(n[y],a[y],y);O.isUndefined(R)&&b!==h||(o[y]=R)}),o}const qm=n=>{const a=os({},n);let{data:o,withXSRFToken:c,xsrfHeaderName:u,xsrfCookieName:m,headers:f,auth:h}=a;a.headers=f=Et.from(f),a.url=Um(Hm(a.baseURL,a.url,a.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let x;if(O.isFormData(o)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((x=f.getContentType())!==!1){const[w,...y]=x?x.split(";").map(b=>b.trim()).filter(Boolean):[];f.setContentType([w||"multipart/form-data",...y].join("; "))}}if(pt.hasStandardBrowserEnv&&(c&&O.isFunction(c)&&(c=c(a)),c||c!==!1&&jx(a.url))){const w=u&&m&&Nx.read(m);w&&f.set(u,w)}return a},Cx=typeof XMLHttpRequest<"u",_x=Cx&&function(n){return new Promise(function(o,c){const u=qm(n);let m=u.data;const f=Et.from(u.headers).normalize();let{responseType:h,onUploadProgress:x,onDownloadProgress:w}=u,y,b,R,I,k;function j(){I&&I(),k&&k(),u.cancelToken&&u.cancelToken.unsubscribe(y),u.signal&&u.signal.removeEventListener("abort",y)}let C=new XMLHttpRequest;C.open(u.method.toUpperCase(),u.url,!0),C.timeout=u.timeout;function W(){if(!C)return;const T=Et.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),z={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:T,config:n,request:C};Vm(function($){o($),j()},function($){c($),j()},z),C=null}"onloadend"in C?C.onloadend=W:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(W)},C.onabort=function(){C&&(c(new Pe("Request aborted",Pe.ECONNABORTED,n,C)),C=null)},C.onerror=function(){c(new Pe("Network Error",Pe.ERR_NETWORK,n,C)),C=null},C.ontimeout=function(){let L=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const z=u.transitional||$m;u.timeoutErrorMessage&&(L=u.timeoutErrorMessage),c(new Pe(L,z.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,n,C)),C=null},m===void 0&&f.setContentType(null),"setRequestHeader"in C&&O.forEach(f.toJSON(),function(L,z){C.setRequestHeader(z,L)}),O.isUndefined(u.withCredentials)||(C.withCredentials=!!u.withCredentials),h&&h!=="json"&&(C.responseType=u.responseType),w&&([R,k]=al(w,!0),C.addEventListener("progress",R)),x&&C.upload&&([b,I]=al(x),C.upload.addEventListener("progress",b),C.upload.addEventListener("loadend",I)),(u.cancelToken||u.signal)&&(y=T=>{C&&(c(!T||T.type?new Vs(null,n,C):T),C.abort(),C=null)},u.cancelToken&&u.cancelToken.subscribe(y),u.signal&&(u.signal.aborted?y():u.signal.addEventListener("abort",y)));const _=vx(u.url);if(_&&pt.protocols.indexOf(_)===-1){c(new Pe("Unsupported protocol "+_+":",Pe.ERR_BAD_REQUEST,n));return}C.send(m||null)})},Ex=(n,a)=>{const{length:o}=n=n?n.filter(Boolean):[];if(a||o){let c=new AbortController,u;const m=function(w){if(!u){u=!0,h();const y=w instanceof Error?w:this.reason;c.abort(y instanceof Pe?y:new Vs(y instanceof Error?y.message:y))}};let f=a&&setTimeout(()=>{f=null,m(new Pe(`timeout ${a} of ms exceeded`,Pe.ETIMEDOUT))},a);const h=()=>{n&&(f&&clearTimeout(f),f=null,n.forEach(w=>{w.unsubscribe?w.unsubscribe(m):w.removeEventListener("abort",m)}),n=null)};n.forEach(w=>w.addEventListener("abort",m));const{signal:x}=c;return x.unsubscribe=()=>O.asap(h),x}},Rx=function*(n,a){let o=n.byteLength;if(o<a){yield n;return}let c=0,u;for(;c<o;)u=c+a,yield n.slice(c,u),c=u},Px=async function*(n,a){for await(const o of Tx(n))yield*Rx(o,a)},Tx=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const a=n.getReader();try{for(;;){const{done:o,value:c}=await a.read();if(o)break;yield c}}finally{await a.cancel()}},rm=(n,a,o,c)=>{const u=Px(n,a);let m=0,f,h=x=>{f||(f=!0,c&&c(x))};return new ReadableStream({async pull(x){try{const{done:w,value:y}=await u.next();if(w){h(),x.close();return}let b=y.byteLength;if(o){let R=m+=b;o(R)}x.enqueue(new Uint8Array(y))}catch(w){throw h(w),w}},cancel(x){return h(x),u.return()}},{highWaterMark:2})},pl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wm=pl&&typeof ReadableStream=="function",Ax=pl&&(typeof TextEncoder=="function"?(n=>a=>n.encode(a))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ym=(n,...a)=>{try{return!!n(...a)}catch{return!1}},Dx=Wm&&Ym(()=>{let n=!1;const a=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!a}),sm=64*1024,Ci=Wm&&Ym(()=>O.isReadableStream(new Response("").body)),ll={stream:Ci&&(n=>n.body)};pl&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!ll[a]&&(ll[a]=O.isFunction(n[a])?o=>o[a]():(o,c)=>{throw new Pe(`Response type '${a}' is not supported`,Pe.ERR_NOT_SUPPORT,c)})})})(new Response);const Ix=async n=>{if(n==null)return 0;if(O.isBlob(n))return n.size;if(O.isSpecCompliantForm(n))return(await new Request(pt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(O.isArrayBufferView(n)||O.isArrayBuffer(n))return n.byteLength;if(O.isURLSearchParams(n)&&(n=n+""),O.isString(n))return(await Ax(n)).byteLength},Fx=async(n,a)=>{const o=O.toFiniteNumber(n.getContentLength());return o??Ix(a)},Lx=pl&&(async n=>{let{url:a,method:o,data:c,signal:u,cancelToken:m,timeout:f,onDownloadProgress:h,onUploadProgress:x,responseType:w,headers:y,withCredentials:b="same-origin",fetchOptions:R}=qm(n);w=w?(w+"").toLowerCase():"text";let I=Ex([u,m&&m.toAbortSignal()],f),k;const j=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let C;try{if(x&&Dx&&o!=="get"&&o!=="head"&&(C=await Fx(y,c))!==0){let z=new Request(a,{method:"POST",body:c,duplex:"half"}),ie;if(O.isFormData(c)&&(ie=z.headers.get("content-type"))&&y.setContentType(ie),z.body){const[$,B]=Zu(C,al(em(x)));c=rm(z.body,sm,$,B)}}O.isString(b)||(b=b?"include":"omit");const W="credentials"in Request.prototype;k=new Request(a,{...R,signal:I,method:o.toUpperCase(),headers:y.normalize().toJSON(),body:c,duplex:"half",credentials:W?b:void 0});let _=await fetch(k,R);const T=Ci&&(w==="stream"||w==="response");if(Ci&&(h||T&&j)){const z={};["status","statusText","headers"].forEach(X=>{z[X]=_[X]});const ie=O.toFiniteNumber(_.headers.get("content-length")),[$,B]=h&&Zu(ie,al(em(h),!0))||[];_=new Response(rm(_.body,sm,$,()=>{B&&B(),j&&j()}),z)}w=w||"text";let L=await ll[O.findKey(ll,w)||"text"](_,n);return!T&&j&&j(),await new Promise((z,ie)=>{Vm(z,ie,{data:L,headers:Et.from(_.headers),status:_.status,statusText:_.statusText,config:n,request:k})})}catch(W){throw j&&j(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,n,k),{cause:W.cause||W}):Pe.from(W,W&&W.code,n,k)}}),_i={http:Gg,xhr:_x,fetch:Lx};O.forEach(_i,(n,a)=>{if(n){try{Object.defineProperty(n,"name",{value:a})}catch{}Object.defineProperty(n,"adapterName",{value:a})}});const nm=n=>`- ${n}`,Mx=n=>O.isFunction(n)||n===null||n===!1,Qm={getAdapter:n=>{n=O.isArray(n)?n:[n];const{length:a}=n;let o,c;const u={};for(let m=0;m<a;m++){o=n[m];let f;if(c=o,!Mx(o)&&(c=_i[(f=String(o)).toLowerCase()],c===void 0))throw new Pe(`Unknown adapter '${f}'`);if(c)break;u[f||"#"+m]=c}if(!c){const m=Object.entries(u).map(([h,x])=>`adapter ${h} `+(x===!1?"is not supported by the environment":"is not available in the build"));let f=a?m.length>1?`since :
`+m.map(nm).join(`
`):" "+nm(m[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return c},adapters:_i};function hi(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Vs(null,n)}function am(n){return hi(n),n.headers=Et.from(n.headers),n.data=pi.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Qm.getAdapter(n.adapter||zn.adapter)(n).then(function(c){return hi(n),c.data=pi.call(n,n.transformResponse,c),c.headers=Et.from(c.headers),c},function(c){return Bm(c)||(hi(n),c&&c.response&&(c.response.data=pi.call(n,n.transformResponse,c.response),c.response.headers=Et.from(c.response.headers))),Promise.reject(c)})}const Km="1.11.0",hl={};["object","boolean","number","function","string","symbol"].forEach((n,a)=>{hl[n]=function(c){return typeof c===n||"a"+(a<1?"n ":" ")+n}});const lm={};hl.transitional=function(a,o,c){function u(m,f){return"[Axios v"+Km+"] Transitional option '"+m+"'"+f+(c?". "+c:"")}return(m,f,h)=>{if(a===!1)throw new Pe(u(f," has been removed"+(o?" in "+o:"")),Pe.ERR_DEPRECATED);return o&&!lm[f]&&(lm[f]=!0,console.warn(u(f," has been deprecated since v"+o+" and will be removed in the near future"))),a?a(m,f,h):!0}};hl.spelling=function(a){return(o,c)=>(console.warn(`${c} is likely a misspelling of ${a}`),!0)};function Ox(n,a,o){if(typeof n!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const c=Object.keys(n);let u=c.length;for(;u-- >0;){const m=c[u],f=a[m];if(f){const h=n[m],x=h===void 0||f(h,m,n);if(x!==!0)throw new Pe("option "+m+" must be "+x,Pe.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Pe("Unknown option "+m,Pe.ERR_BAD_OPTION)}}const sl={assertOptions:Ox,validators:hl},nr=sl.validators;let ls=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Gu,response:new Gu}}async request(a,o){try{return await this._request(a,o)}catch(c){if(c instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const m=u.stack?u.stack.replace(/^.+\n/,""):"";try{c.stack?m&&!String(c.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(c.stack+=`
`+m):c.stack=m}catch{}}throw c}}_request(a,o){typeof a=="string"?(o=o||{},o.url=a):o=a||{},o=os(this.defaults,o);const{transitional:c,paramsSerializer:u,headers:m}=o;c!==void 0&&sl.assertOptions(c,{silentJSONParsing:nr.transitional(nr.boolean),forcedJSONParsing:nr.transitional(nr.boolean),clarifyTimeoutError:nr.transitional(nr.boolean)},!1),u!=null&&(O.isFunction(u)?o.paramsSerializer={serialize:u}:sl.assertOptions(u,{encode:nr.function,serialize:nr.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),sl.assertOptions(o,{baseUrl:nr.spelling("baseURL"),withXsrfToken:nr.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let f=m&&O.merge(m.common,m[o.method]);m&&O.forEach(["delete","get","head","post","put","patch","common"],k=>{delete m[k]}),o.headers=Et.concat(f,m);const h=[];let x=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(o)===!1||(x=x&&j.synchronous,h.unshift(j.fulfilled,j.rejected))});const w=[];this.interceptors.response.forEach(function(j){w.push(j.fulfilled,j.rejected)});let y,b=0,R;if(!x){const k=[am.bind(this),void 0];for(k.unshift(...h),k.push(...w),R=k.length,y=Promise.resolve(o);b<R;)y=y.then(k[b++],k[b++]);return y}R=h.length;let I=o;for(b=0;b<R;){const k=h[b++],j=h[b++];try{I=k(I)}catch(C){j.call(this,C);break}}try{y=am.call(this,I)}catch(k){return Promise.reject(k)}for(b=0,R=w.length;b<R;)y=y.then(w[b++],w[b++]);return y}getUri(a){a=os(this.defaults,a);const o=Hm(a.baseURL,a.url,a.allowAbsoluteUrls);return Um(o,a.params,a.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(a){ls.prototype[a]=function(o,c){return this.request(os(c||{},{method:a,url:o,data:(c||{}).data}))}});O.forEach(["post","put","patch"],function(a){function o(c){return function(m,f,h){return this.request(os(h||{},{method:a,headers:c?{"Content-Type":"multipart/form-data"}:{},url:m,data:f}))}}ls.prototype[a]=o(),ls.prototype[a+"Form"]=o(!0)});let Ux=class Jm{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(m){o=m});const c=this;this.promise.then(u=>{if(!c._listeners)return;let m=c._listeners.length;for(;m-- >0;)c._listeners[m](u);c._listeners=null}),this.promise.then=u=>{let m;const f=new Promise(h=>{c.subscribe(h),m=h}).then(u);return f.cancel=function(){c.unsubscribe(m)},f},a(function(m,f,h){c.reason||(c.reason=new Vs(m,f,h),o(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const o=this._listeners.indexOf(a);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const a=new AbortController,o=c=>{a.abort(c)};return this.subscribe(o),a.signal.unsubscribe=()=>this.unsubscribe(o),a.signal}static source(){let a;return{token:new Jm(function(u){a=u}),cancel:a}}};function $x(n){return function(o){return n.apply(null,o)}}function zx(n){return O.isObject(n)&&n.isAxiosError===!0}const Ei={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ei).forEach(([n,a])=>{Ei[a]=n});function Gm(n){const a=new ls(n),o=_m(ls.prototype.request,a);return O.extend(o,ls.prototype,a,{allOwnKeys:!0}),O.extend(o,a,null,{allOwnKeys:!0}),o.create=function(u){return Gm(os(n,u))},o}const Qe=Gm(zn);Qe.Axios=ls;Qe.CanceledError=Vs;Qe.CancelToken=Ux;Qe.isCancel=Bm;Qe.VERSION=Km;Qe.toFormData=fl;Qe.AxiosError=Pe;Qe.Cancel=Qe.CanceledError;Qe.all=function(a){return Promise.all(a)};Qe.spread=$x;Qe.isAxiosError=zx;Qe.mergeConfig=os;Qe.AxiosHeaders=Et;Qe.formToJSON=n=>zm(O.isHTMLForm(n)?new FormData(n):n);Qe.getAdapter=Qm.getAdapter;Qe.HttpStatusCode=Ei;Qe.default=Qe;const{Axios:q0,AxiosError:W0,CanceledError:Y0,isCancel:Q0,CancelToken:K0,VERSION:J0,all:G0,Cancel:X0,isAxiosError:Z0,spread:ey,toFormData:ty,AxiosHeaders:ry,HttpStatusCode:sy,formToJSON:ny,getAdapter:ay,mergeConfig:ly}=Qe,Bx="http://localhost:5000/api",se=Qe.create({baseURL:Bx,headers:{"Content-Type":"application/json"}});window.clearAllTokens=()=>{console.log(" Clearing all tokens manually..."),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),sessionStorage.clear(),console.log(" All tokens cleared! Redirecting to login..."),window.location.href="/login"};const Vx=()=>{const n=localStorage.getItem("access_token"),a=localStorage.getItem("authToken"),o=localStorage.getItem("auth_token");return!n&&(a||o)?(console.log("Cleaning up old token format, please login again"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login"),null):n};se.interceptors.request.use(n=>{const a=Vx();return console.log(" Token being sent:",a?`${a.substring(0,20)}...`:"No token"),a&&(n.headers.Authorization=`Bearer ${a}`),n});se.interceptors.response.use(n=>n,n=>{if(n.response?.status===401){localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user");const a=n.response?.data?.message||"Your session has expired. Please log in again.";window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage",a),window.location.href="/login")}else if(n.response?.status===403){const a=n.response?.data?.message||"Access denied. You don't have permission to perform this action.";console.error("Permission denied:",a),(a.includes("Wrong token type")||a.includes("access token"))&&(console.log("Token type error detected, clearing old tokens"),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage","Please log in again to get a fresh access token."),window.location.href="/login"))}else if(n.response?.status===404){const a=n.response?.data?.message||"The item you're looking for doesn't exist or may have been removed.";console.error("Resource not found:",a)}else if(n.response?.status>=500){const a=n.response?.data?.message||"We're experiencing technical difficulties. Please try again in a few minutes.";console.error("Server error:",a)}else n.response?.data?.message&&console.error("API Error:",n.response.data.message);if(n.response?.data?.message)n.userMessage=n.response.data.message;else switch(n.response?.status){case 400:n.userMessage="There was an issue with your request. Please check your input and try again.";break;case 403:n.userMessage="Access denied. You don't have permission to perform this action.";break;case 404:n.userMessage="The item you're looking for doesn't exist or may have been removed.";break;case 409:n.userMessage="This action conflicts with existing data. Please try again.";break;case 422:n.userMessage="Some of the information you provided is not valid. Please check and try again.";break;case 429:n.userMessage="You're making too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:n.userMessage="We're experiencing technical difficulties. Please try again in a few minutes.";break;default:n.userMessage="Something went wrong. Please try again later."}return Promise.reject(n)});const Hx=g.createContext(),qx=({children:n})=>{const[a,o]=g.useState(null),[c,u]=g.useState(null),[m,f]=g.useState(!0);g.useEffect(()=>{(()=>{try{const k=localStorage.getItem("access_token")||localStorage.getItem("authToken"),j=localStorage.getItem("user");k&&j&&(u(k),o(JSON.parse(j)),localStorage.getItem("authToken")&&!localStorage.getItem("access_token")&&(console.log("Migrating authToken to access_token"),localStorage.setItem("access_token",k),localStorage.removeItem("authToken")))}catch(k){console.error("Error loading auth from localStorage:",k),localStorage.removeItem("authToken"),localStorage.removeItem("access_token"),localStorage.removeItem("user")}finally{f(!1)}})()},[]);const h=(I,k)=>{o(I),u(k),localStorage.setItem("access_token",k),localStorage.setItem("user",JSON.stringify(I)),localStorage.removeItem("authToken")},x=()=>{o(null),u(null),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user");try{se.post("/auth/logout")}catch(I){console.error("Error calling logout endpoint:",I)}},w=()=>!!(a&&c),R={user:a,token:c,loading:m,login:h,logout:x,isAuthenticated:w,hasRole:I=>a?.role_name===I,hasPermission:I=>w()?a?.role_name==="super_admin"||a?.role?.name==="super_admin"?!0:a?.permissions&&Array.isArray(a.permissions)?a.permissions.includes(I):a?.permissions&&typeof a.permissions=="object"?!!a.permissions[I]:!0:!1};return r.jsx(Hx.Provider,{value:R,children:n})},Bi=Qe.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Bi.interceptors.request.use(n=>{const a=localStorage.getItem("access_token")||localStorage.getItem("authToken");return a?(n.headers.Authorization=`Bearer ${a}`,console.log(" Using token from services/api.js:",a.substring(0,20)+"...")):console.log(" No token found in services/api.js"),n},n=>Promise.reject(n));Bi.interceptors.response.use(n=>n,n=>(n.response?.status===401?(localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.href="/login"):n.response?.status===403&&n.response?.data?.message?.includes("malformed")&&(localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),console.log(" Malformed token detected, clearing storage"),window.location.href="/login"),Promise.reject(n)));class Wx{constructor(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.CACHE_DURATION=300*1e3,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null,this.maxRetries=3}getCurrentUser(){try{const a=localStorage.getItem("user");if(!a)return null;const o=JSON.parse(a);return!o||typeof o!="object"||!o.id?(console.warn("Invalid user data structure"),this.clearUserData(),null):o}catch(a){return console.error("Error parsing user data:",a),this.clearUserData(),null}}clearUserData(){try{localStorage.removeItem("user"),this.clearCache()}catch(a){console.error("Error clearing user data:",a)}}clearCache(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null}isPermissionsCacheValid(){return this.permissionsCacheTimestamp?Date.now()-this.permissionsCacheTimestamp<this.CACHE_DURATION:!1}isRolesCacheValid(){return this.rolesCacheTimestamp?Date.now()-this.rolesCacheTimestamp<this.CACHE_DURATION:!1}async makeApiRequest(a,o=0){try{const c=await Bi.get(a);if(!c||!c.data)throw new Error("Invalid API response structure");if(!c.data.success)throw new Error(c.data.message||"API request failed");return c.data.data}catch(c){if(console.error(`API request failed for ${a}:`,c.message),o<this.maxRetries&&this.isRetryableError(c))return console.log(`Retrying request ${o+1}/${this.maxRetries}`),await this.delay(Math.pow(2,o)*1e3),this.makeApiRequest(a,o+1);throw c}}isRetryableError(a){return a.code==="NETWORK_ERROR"||a.response?.status>=500||a.message.includes("timeout")}delay(a){return new Promise(o=>setTimeout(o,a))}async getUserPermissions(a=null){try{return(a?{id:a}:this.getCurrentUser())?.id?this.isPermissionsCacheValid()&&this.cachedPermissions?this.cachedPermissions:this.pendingPermissionsRequest?await this.pendingPermissionsRequest:(this.pendingPermissionsRequest=this.makeApiRequest("/permissions/my-permissions").then(c=>{const u=this.validatePermissionsData(c);return this.cachedPermissions=u,this.permissionsCacheTimestamp=Date.now(),u}).catch(c=>(console.error("Failed to get user permissions:",c.message),{})).finally(()=>{this.pendingPermissionsRequest=null}),await this.pendingPermissionsRequest):(console.warn("No valid user found for permissions request"),{})}catch(o){return console.error("Error in getUserPermissions:",o),{}}}validatePermissionsData(a){if(!a||typeof a!="object")return console.warn("Invalid permissions data structure"),{};const o={};for(const[c,u]of Object.entries(a))Array.isArray(u)&&(o[c]=u.filter(m=>m&&typeof m=="object"&&typeof m.permission_key=="string"));return o}async getUserRoles(a=null){try{return(a?{id:a}:this.getCurrentUser())?.id?this.isRolesCacheValid()&&this.cachedRoles?this.cachedRoles:this.pendingRolesRequest?await this.pendingRolesRequest:(this.pendingRolesRequest=this.makeApiRequest("/permissions/my-roles").then(c=>{const u=this.validateRolesData(c);return this.cachedRoles=u,this.rolesCacheTimestamp=Date.now(),u}).catch(c=>(console.error("Failed to get user roles:",c.message),[])).finally(()=>{this.pendingRolesRequest=null}),await this.pendingRolesRequest):(console.warn("No valid user found for roles request"),[])}catch(o){return console.error("Error in getUserRoles:",o),[]}}validateRolesData(a){return Array.isArray(a)?a.filter(o=>o&&typeof o=="object"&&typeof o.name=="string"):(console.warn("Invalid roles data structure"),[])}async hasPermission(a,o=null){try{if(!a||typeof a!="string")return console.warn("Invalid permission key provided"),!1;const c=await this.getUserPermissions(o);for(const u of Object.keys(c))if((c[u]||[]).some(f=>f.permission_key===a))return!0;return!1}catch(c){return console.error("Error checking permission:",c),!1}}async hasModuleAccess(a,o=null){try{if(!a||typeof a!="string")return console.warn("Invalid module name provided"),!1;const c=await this.getUserPermissions(o);return c[a]&&c[a].length>0}catch(c){return console.error("Error checking module access:",c),!1}}async hasAnyPermission(a,o=null){try{if(!Array.isArray(a)||a.length===0)return console.warn("Invalid permission keys array provided"),!1;const c=a.map(m=>this.hasPermission(m,o));return(await Promise.all(c)).some(m=>m===!0)}catch(c){return console.error("Error checking permissions:",c),!1}}async hasRole(a,o=null){try{return!a||typeof a!="string"?(console.warn("Invalid role name provided"),!1):(await this.getUserRoles(o)).some(u=>u.name===a)}catch(c){return console.error("Error checking role:",c),!1}}async hasAnyRole(a,o=null){try{if(!Array.isArray(a)||a.length===0)return console.warn("Invalid role names array provided"),!1;const u=(await this.getUserRoles(o)).map(m=>m.name);return a.some(m=>u.includes(m))}catch(c){return console.error("Error checking roles:",c),!1}}getModulePermissions(){return{dashboard:["dashboard.view"],"user-management":["users.read","users.create","users.update","users.delete"],"role-management":["roles.read"],"campaign-types":["campaign-types.read"],"campaign-data":["campaign-data.read"],campaigns:["campaigns.read"],ads:["ads.read"],cards:["cards.read"],"card-users":["card-users.read"],"reports-table":["reports.read"],reports:["reports.read"],analytics:["analytics.view"],"2fa":["2fa.setup"],modules:["modules.read"],settings:["settings.update"]}}async canAccessRoute(a,o=null){try{if(!a||typeof a!="string")return console.warn("Invalid route path provided"),!1;const c=a.replace(/^\/+/,"").toLowerCase(),m=this.getModulePermissions()[c];return!m||m.length===0?!0:await this.hasAnyPermission(m,o)}catch(c){return console.error("Error checking route access:",c),!1}}async refreshPermissions(){try{this.clearCache();const a=this.getCurrentUser();a?.id&&await Promise.allSettled([this.getUserPermissions(a.id),this.getUserRoles(a.id)])}catch(a){console.error("Error refreshing permissions:",a)}}destroy(){this.clearCache()}}const Is=new Wx,Yx=g.createContext(),Nt=({children:n})=>{const[a,o]=g.useState({}),[c,u]=g.useState([]),[m,f]=g.useState(!0),[h,x]=g.useState(null),[w,y]=g.useState(null);g.useEffect(()=>{b()},[]),g.useEffect(()=>{const B=()=>{const X=Is.getCurrentUser();X!==w&&(y(X),b())};return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)},[w]);const b=async()=>{try{f(!0),x(null);const B=Is.getCurrentUser();if(y(B),B){const[X,Q]=await Promise.all([Is.getUserPermissions(B.id),Is.getUserRoles(B.id)]);o(X),u(Q)}else o({}),u([])}catch(B){console.error("Error initializing permissions:",B),x(B.message)}finally{f(!1)}},R=async()=>{await Is.refreshPermissions(),await b()},I=B=>{if(!a||Object.keys(a).length===0)return!1;for(const X of Object.keys(a))if((a[X]||[]).some(ae=>ae.permission_key===B))return!0;return!1},k=B=>Array.isArray(B)?B.some(X=>I(X)):I(B),j=B=>a[B]&&a[B].length>0,C=B=>c.some(X=>X.name===B),W=B=>Array.isArray(B)?B.some(X=>C(X)):C(B),_=B=>{const X=B.replace("/",""),ae=Is.getModulePermissions()[X];return!ae||ae.length===0?!0:k(ae)},T=()=>{const B=[];for(const X of Object.keys(a)){const Q=a[X]||[];B.push(...Q.map(ae=>ae.permission_key))}return[...new Set(B)]},L=()=>!c||c.length===0?0:Math.max(...c.map(B=>B.level||0)),$={permissions:a,roles:c,loading:m,error:h,user:w,initializePermissions:b,refreshPermissions:R,hasPermission:I,hasAnyPermission:k,hasModuleAccess:j,hasRole:C,hasAnyRole:W,canAccessRoute:_,getAllPermissionKeys:T,getHighestRoleLevel:L,isAdmin:()=>L()>=8||W(["Admin","Super Admin"]),isSuperAdmin:()=>L()>=10||C("Super Admin")};return r.jsx(Yx.Provider,{value:$,children:n})},Qx=()=>{const[n,a]=g.useState(null),[o,c]=g.useState(!0),[u,m]=g.useState(null),f=async()=>{try{c(!0),m(null);const h=await se.get("/user-access/modules");h.data.success?a(h.data.data):m(h.data.message)}catch(h){console.error("Error fetching user access:",h),m(h.response?.data?.message||"Failed to fetch user permissions")}finally{c(!1)}};return g.useEffect(()=>{localStorage.getItem("access_token")||localStorage.getItem("authToken")?f():c(!1)},[]),{userAccess:n,loading:o,error:u,refetch:f}};var Kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Re=(n,a)=>{const o=g.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:m=2,absoluteStrokeWidth:f,children:h,...x},w)=>g.createElement("svg",{ref:w,...Kx,width:u,height:u,stroke:c,strokeWidth:f?Number(m)*24/Number(u):m,className:`lucide lucide-${Jx(n)}`,...x},[...a.map(([y,b])=>g.createElement(y,b)),...(Array.isArray(h)?h:[h])||[]]));return o.displayName=`${n}`,o},om=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),tt=Re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),im=Re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),cm=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jt=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),zr=Re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Bn=Re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Gx=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Xx=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xm=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ls=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Zx=Re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),e0=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ri=Re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ol=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Mn=Re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Vi=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),gi=Re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Dn=Re("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),dm=Re("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Pi=Re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),um=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),t0=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Hs=Re("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),r0=Re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),s0=Re("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),rt=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lr=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Zm=Re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Hr=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),n0=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),a0=Re("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ms=Re("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),xi=Re("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]),Ur=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),cs=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),l0=Re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ti=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),il=Re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Ai=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),is=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),gl=Re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ct=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kt=({children:n})=>{const[a,o]=g.useState(!0),[c,u]=g.useState(!1),m=$s(),f=zs(),{userAccess:h}=Qx(),x=Ii.useMemo(()=>{try{const j=localStorage.getItem("user");return j?JSON.parse(j):null}catch{return null}},[]),w=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),f("/login")},y={Home:gi,Users:is,Key:dm,Tags:xi,Database:Zx,CreditCard:Ls,UserCheck:il,Target:Ur,BarChart3:Jt,FileText:Mn,Settings:n0},b=j=>{const C=["Dashboard","User Management","Role Management","Brand Management","Campaign Type","Campaign","Cards","Cards Users","Report","Report Analytics"],W={"Campaign Types":"Campaign Type",Campaigns:"Campaign","Card Users":"Cards Users",Reports:"Report","Report Analytics":"Report Analytics"},_=T=>{let L=C.indexOf(T);if(L!==-1)return L;const z=W[T];return z&&(L=C.indexOf(z),L!==-1)?L:-1};return j.sort((T,L)=>{const z=_(T.name),ie=_(L.name);return z!==-1&&ie!==-1?z-ie:z!==-1?-1:ie!==-1?1:(T.name||"").localeCompare(L.name||"")})},R=h?.navigation?.map(j=>({...j,icon:y[j.icon]||gi}))||[{name:"Dashboard",href:"/dashboard",icon:gi},{name:"User Management",href:"/user-management",icon:is},{name:"Role Management",href:"/role-management",icon:dm},{name:"Brand Management",href:"/brands",icon:xi},{name:"Campaign Type",href:"/campaign-types",icon:xi},{name:"Campaign",href:"/campaigns",icon:Ur},{name:"Cards",href:"/cards",icon:Ls},{name:"Cards Users",href:"/card-users",icon:il},{name:"Report",href:"/reports-table",icon:Mn},{name:"Report Analytics",href:"/report-analytics",icon:Jt}],I=b(R),k=j=>m.pathname===j;return r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:`hidden md:flex md:flex-shrink-0 transition-all duration-300 ${a?"md:w-64":"md:w-16"}`,children:r.jsx("div",{className:"flex flex-col w-full",children:r.jsxs("div",{className:"flex flex-col flex-grow bg-sidebar-bg overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 flex-shrink-0 px-4 bg-gray-900",children:[r.jsxs("div",{className:`flex items-center ${a?"block":"hidden"}`,children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Ur,{className:"h-8 w-8 text-primary-500"})}),r.jsx("div",{className:"ml-3",children:r.jsx("h1",{className:"text-xl font-bold text-white",children:"Ads Reporter"})})]}),r.jsx("button",{onClick:()=>o(!a),className:"p-1 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",children:a?r.jsx(Gx,{className:"h-5 w-5"}):r.jsx(Xx,{className:"h-5 w-5"})})]}),r.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[r.jsx("div",{className:"flex-1 space-y-1",children:I.map(j=>{const C=j.icon;return r.jsxs(qu,{to:j.href,className:`sidebar-link ${k(j.href)?"active":""}`,title:a?"":j.name,children:[r.jsx(C,{className:`h-5 w-5 ${a?"mr-3":"mx-auto"}`}),a&&r.jsx("span",{className:"text-sm font-medium",children:j.name})]},j.name)})}),r.jsx("div",{className:"pt-4 border-t border-gray-700",children:r.jsxs("button",{onClick:w,className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",title:a?"":"Logout",children:[r.jsx(um,{className:`h-5 w-5 ${a?"mr-3":"mx-auto"}`}),a&&r.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})}),r.jsx("div",{className:`md:hidden ${c?"block":"hidden"}`,children:r.jsxs("div",{className:"fixed inset-0 flex z-40",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>u(!1)}),r.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-sidebar-bg",children:[r.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:r.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>u(!1),children:r.jsx(Ct,{className:"h-6 w-6 text-white"})})}),r.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-gray-900",children:[r.jsx(Ur,{className:"h-8 w-8 text-primary-500"}),r.jsx("h1",{className:"ml-3 text-xl font-bold text-white",children:"Ads Reporter"})]}),r.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[r.jsx("div",{className:"flex-1 space-y-1",children:I.map(j=>{const C=j.icon;return r.jsxs(qu,{to:j.href,className:`sidebar-link ${k(j.href)?"active":""}`,onClick:()=>u(!1),children:[r.jsx(C,{className:"h-5 w-5 mr-3"}),r.jsx("span",{className:"text-sm font-medium",children:j.name})]},j.name)})}),r.jsx("div",{className:"pt-4 border-t border-gray-700",children:r.jsxs("button",{onClick:()=>{u(!1),w()},className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",children:[r.jsx(um,{className:"h-5 w-5 mr-3"}),r.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})]})}),r.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[r.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[r.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>u(!0),children:r.jsx(t0,{className:"h-6 w-6"})}),r.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[r.jsx("div",{className:"flex-1",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:I.find(j=>j.href===m.pathname)?.name||"Dashboard"})}),r.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:x?.username||"User"}),r.jsx("div",{className:"h-8 w-8 bg-primary-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-white",children:(x?.username||"U")[0].toUpperCase()})})]})})]})]}),r.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:n})]})]})},St=({children:n})=>localStorage.getItem("access_token")||localStorage.getItem("authToken")?n:r.jsx(wi,{to:"/login",replace:!0}),xl=()=>{console.log(" Clearing all authentication tokens..."),["access_token","authToken","auth_token","refresh_token","user"].forEach(a=>{localStorage.removeItem(a),sessionStorage.removeItem(a)}),console.log(" All tokens cleared"),typeof window<"u"&&(window.location.href="/login")},o0=async()=>{const n=localStorage.getItem("access_token")||localStorage.getItem("authToken");if(!n)return console.log(" No token found"),!1;try{const a=JSON.parse(atob(n.split(".")[1])),o=Date.now()/1e3;return a.exp&&a.exp<o?(console.log(" Token has expired"),xl(),!1):!0}catch{return console.log(" Could not decode token, assuming valid"),!0}},i0=n=>{(n.response?.status===401||n.status===401)&&(console.log(" 401 Unauthorized - clearing tokens and redirecting"),sessionStorage.setItem("recent_auth_error","true"),xl())};typeof window<"u"&&(window.clearAllTokens=xl,window.checkTokenExpiry=o0);const c0=()=>{const[n,a]=g.useState({username:"",password:"",twofa_code:""}),[o,c]=g.useState(!1),[u,m]=g.useState(!1),[f,h]=g.useState(""),[x,w]=g.useState(!1),[y,b]=g.useState(!1),[R,I]=g.useState(""),[k,j]=g.useState("credentials"),[C,W]=g.useState(null),[_,T]=g.useState(""),L=zs();g.useEffect(()=>{const B=sessionStorage.getItem("loginMessage");B&&(T(B),sessionStorage.removeItem("loginMessage"),setTimeout(()=>T(""),5e3))},[]);const z=async B=>{B.preventDefault(),m(!0),h(""),console.log("Login attempt:",{username:n.username,step:k});try{if(k==="credentials"){console.log("Making API call to backend...");try{const X=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password})});console.log("API response status:",X.status),console.log("API response ok:",X.ok);const Q=await X.json();console.log("API response data:",Q),Q.success?Q.data.requires_2fa_setup?(b(!0),W(Q.data.user.id),I(Q.data.qr_code),j("2fa_setup"),console.log("2FA setup required for user:",Q.data.user.username)):Q.data.requires_2fa?(w(!0),W(Q.data.user.id),j("2fa"),console.log("2FA required for user:",Q.data.user.username)):(console.log("Login successful, storing token and navigating..."),localStorage.setItem("access_token",Q.data.access_token),localStorage.setItem("authToken",Q.data.access_token),localStorage.setItem("user",JSON.stringify(Q.data.user)),L("/dashboard")):h(Q.message||"Invalid username or password")}catch(X){if(console.error("Login API Error:",X),X.response?.status===401)i0(X),h("Invalid username or password. Please check your credentials and try again.");else if(X.code==="ECONNREFUSED"||!X.response)if(console.warn("API not available, using demo mode"),n.username==="admin"&&n.password==="password"){const Q="demo-token-"+Date.now();localStorage.setItem("access_token",Q),localStorage.setItem("authToken",Q),localStorage.setItem("user",JSON.stringify({id:1,username:n.username,role_id:1})),L("/dashboard")}else h("API unavailable. Use demo credentials: admin/password");else h("Failed to connect to server. Please try again or use demo credentials: admin/password")}}else if(k==="2fa")try{console.log("Making 2FA API call with user ID:",C,"token:",n.twofa_code);const Q=await(await fetch("http://localhost:5000/api/auth/login-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:C,token:n.twofa_code})})).json();if(console.log("2FA API response:",Q),Q.success){const{access_token:ae,user:_e}=Q.data;localStorage.setItem("access_token",ae),localStorage.setItem("authToken",ae),localStorage.setItem("user",JSON.stringify(_e)),console.log("2FA verification successful, navigating to dashboard"),L("/dashboard")}else{const ae=Q.message||"Invalid 2FA code";console.error("2FA verification failed:",ae),h(ae),a({...n,twofa_code:""})}}catch{if(console.warn("API not available, using demo 2FA"),n.twofa_code==="123456"){const Q="demo-token-2fa-"+Date.now();localStorage.setItem("access_token",Q),localStorage.setItem("authToken",Q),localStorage.setItem("user",JSON.stringify({id:1,username:n.username,role_id:1,has_2fa:!0})),L("/dashboard")}else h("API unavailable. Demo 2FA code: 123456"),a({...n,twofa_code:""})}else if(k==="2fa_setup")try{console.log("Completing 2FA setup with user ID:",C,"token:",n.twofa_code);const Q=await(await fetch("http://localhost:5000/api/auth/login-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:C,token:n.twofa_code})})).json();if(console.log("2FA setup completion API response:",Q),Q.success){const{access_token:ae,user:_e}=Q.data;localStorage.setItem("access_token",ae),localStorage.setItem("authToken",ae),localStorage.setItem("user",JSON.stringify(_e)),console.log("2FA setup completed successfully, navigating to dashboard"),L("/dashboard")}else{const ae=Q.message||"Invalid 2FA code. Please try again.";console.error("2FA setup failed:",ae),h(ae),a({...n,twofa_code:""})}}catch(X){console.error("2FA setup API error:",X),h("Failed to complete 2FA setup. Please try again."),a({...n,twofa_code:""})}}catch(X){console.error("Login error:",X),h("An error occurred. Please try again.")}finally{m(!1)}},ie=B=>{const{name:X,value:Q}=B.target;a({...n,[X]:Q}),h("")},$=()=>{j("credentials"),w(!1),b(!1),I(""),W(null),a({...n,twofa_code:""}),h("")};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:r.jsx(Ur,{className:"h-10 w-10 text-purple-600"})}),r.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Welcome Back"}),r.jsx("p",{className:"mt-2 text-sm text-purple-100",children:k==="credentials"?"Sign in to your Ads Reporter account":k==="2fa_setup"?"Set up two-factor authentication":"Enter your 2FA code to complete login"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[_&&r.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg text-sm",children:_}),f&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:f}),r.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg text-sm",children:[r.jsx("strong",{children:"Demo Credentials:"})," username: ",r.jsx("code",{children:"admin"}),", password: ",r.jsx("code",{children:"password"}),r.jsx("br",{}),r.jsx("button",{type:"button",onClick:xl,className:"mt-1 text-xs text-blue-600 hover:text-blue-800 underline",children:"Clear stored tokens if having login issues"})]}),r.jsxs("form",{onSubmit:z,className:"space-y-6",children:[k==="credentials"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),r.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:n.username,onChange:ie,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your username"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:n.password,onChange:ie,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"}),r.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:o?r.jsx(Ri,{className:"h-5 w-5"}):r.jsx(ol,{className:"h-5 w-5"})})]})]})]}):k==="2fa_setup"?r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:r.jsx(Ms,{className:"h-8 w-8 text-blue-600"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Set up Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),r.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200 inline-block mb-4",children:R?r.jsx("img",{src:R,alt:"2FA QR Code",className:"w-40 h-40 mx-auto"}):r.jsx("div",{className:"w-40 h-40 bg-gray-100 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})})}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"After scanning, enter the 6-digit code from your app to complete setup"})]}),r.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),r.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:n.twofa_code,onChange:B=>{const X=B.target.value.replace(/\D/g,"").substring(0,6);a({...n,twofa_code:X}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),r.jsx("button",{type:"button",onClick:$,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:" Back to login"})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:r.jsx(a0,{className:"h-8 w-8 text-green-600"})}),r.jsx("p",{className:"text-sm text-gray-600",children:"Please enter the 6-digit code from your authenticator app"})]}),r.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Code"}),r.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:n.twofa_code,onChange:B=>{const X=B.target.value.replace(/\D/g,"").substring(0,6);a({...n,twofa_code:X}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),r.jsx("button",{type:"button",onClick:$,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:" Back to login"})]}),r.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):k==="credentials"?"Sign In":k==="2fa_setup"?"Complete Setup":"Verify & Continue"})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Ads Reporter  2025 - Secure Login System"})})]})]})})},ef=n=>{if(!n)return null;if(n instanceof Date)return n;if(typeof n=="string"){const a=/^(\d{2})\/(\d{2})\/(\d{4})$/,o=n.match(a);if(o){const[,u,m,f]=o,h=new Date(f,m-1,u);return isNaN(h.getTime())?null:h}const c=new Date(n);return isNaN(c.getTime())?null:c}return null},Br=n=>{if(!n)return"N/A";try{const a=ef(n);if(!a)return"Invalid Date";const o=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear();return`${o}/${c}/${u}`}catch(a){return console.error("Error formatting date:",a),"Invalid Date"}},d0=n=>{if(!n)return"N/A";try{const a=ef(n);if(!a)return"Invalid Date";const o=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear(),m=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0");return`${o}/${c}/${u} ${m}:${f}`}catch(a){return console.error("Error formatting datetime:",a),"Invalid Date"}},Tn="http://localhost:5000/api",u0=({isOpen:n,onClose:a,title:o,children:c,size:u="md"})=>{if(!n)return null;const m={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:`relative bg-white shadow-xl rounded-lg w-full ${m[u]}`,children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),r.jsx("div",{className:"p-6",children:c})]})})},m0=({isOpen:n,onClose:a,user:o,roles:c,onSubmit:u,isLoading:m})=>{const[f,h]=g.useState({username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),[x,w]=g.useState(!1),[y,b]=g.useState({});g.useEffect(()=>{h(o?{username:o.username||"",password:"",confirm_password:"",role_id:o.role_id||"",enable_2fa:o.is_2fa_enabled||!1}:{username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),b({})},[o,n]);const R=I=>{I.preventDefault(),b({});const k={};if(f.username.trim()||(k.username="Username is required"),!o&&!f.password&&(k.password="Password is required"),f.password&&f.password.length<6&&(k.password="Password must be at least 6 characters"),f.password!==f.confirm_password&&(k.confirm_password="Passwords do not match"),f.role_id||(k.role_id="Role is required"),Object.keys(k).length>0){b(k);return}u(f)};return r.jsx(u0,{isOpen:n,onClose:a,title:o?"Edit User":"Create New User",size:"lg",children:r.jsxs("form",{onSubmit:R,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),r.jsx("input",{type:"text",value:f.username,onChange:I=>h({...f,username:I.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),y.username&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.username})]}),r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),r.jsxs("select",{value:f.role_id,onChange:I=>h({...f,role_id:I.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.role_id?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select a role"}),c.map(I=>r.jsx("option",{value:I.id,children:I.display_name||I.name},I.id))]}),y.role_id&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.role_id})]}),r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o?"New Password (leave empty to keep current)":"Password *"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:x?"text":"password",value:f.password,onChange:I=>h({...f,password:I.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter password"}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w(!x),children:x?r.jsx(Ri,{className:"h-4 w-4 text-gray-400"}):r.jsx(ol,{className:"h-4 w-4 text-gray-400"})})]}),y.password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password})]}),r.jsxs("div",{className:"md:col-span-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",!o&&"*"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:x?"text":"password",value:f.confirm_password,onChange:I=>h({...f,confirm_password:I.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${y.confirm_password?"border-red-500":"border-gray-300"}`,placeholder:"Confirm password"}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w(!x),children:x?r.jsx(Ri,{className:"h-4 w-4 text-gray-400"}):r.jsx(ol,{className:"h-4 w-4 text-gray-400"})})]}),y.confirm_password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.confirm_password})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[r.jsx("input",{type:"checkbox",id:"enable_2fa",checked:f.enable_2fa,onChange:I=>h({...f,enable_2fa:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"enable_2fa",className:"text-sm font-medium text-gray-900",children:"Enable Two-Factor Authentication (Google Authenticator)"}),r.jsx(Ms,{className:"h-4 w-4 text-blue-500"})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Xm,{className:"w-4 h-4 mr-2 animate-spin"}),o?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zm,{className:"w-4 h-4 mr-2"}),o?"Update User":"Create User"]})})]})]})})},f0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState([]),[u,m]=g.useState(!0),[f,h]=g.useState(""),[x,w]=g.useState([]),[y,b]=g.useState(!1),[R,I]=g.useState(null),[k,j]=g.useState(!1),[C,W]=g.useState({type:"",content:""}),_=()=>{const $=localStorage.getItem("access_token")||localStorage.getItem("authToken");return console.log(" Debug Auth Header:",{access_token:localStorage.getItem("access_token"),authToken:localStorage.getItem("authToken"),finalToken:$,hasToken:!!$}),$?{Authorization:`Bearer ${$}`}:{}},T=async()=>{try{m(!0);const $=_();console.log(" Making API request to:",`${Tn}/user-management`),console.log(" Headers:",$);const B=await fetch(`${Tn}/user-management`,{headers:$});if(console.log(" Response status:",B.status),!B.ok)throw B.status===403&&W({type:"error",content:"Authentication required. Please login first."}),new Error(`HTTP error! status: ${B.status}`);const X=await B.json();X.success&&(a(X.data.users||[]),c(X.data.roles||[]),w(X.data.users||[]))}catch($){console.error("Error fetching users:",$),W({type:"error",content:"Failed to load users"})}finally{m(!1)}},L=async $=>{try{j(!0);const X=await(await fetch(`${Tn}/user-management`,{method:"POST",headers:{"Content-Type":"application/json",..._()},body:JSON.stringify($)})).json();X.success?(W({type:"success",content:"User created successfully! If 2FA is enabled, the user will set it up during their first login."}),b(!1),await T()):W({type:"error",content:X.message||"Failed to create user"})}catch(B){console.error("Error creating user:",B),W({type:"error",content:"Failed to create user"})}finally{j(!1)}},z=async $=>{try{j(!0);const X=await(await fetch(`${Tn}/user-management/${R.id}`,{method:"PUT",headers:{"Content-Type":"application/json",..._()},body:JSON.stringify($)})).json();X.success?(W({type:"success",content:"User updated successfully!"}),b(!1),I(null),await T()):W({type:"error",content:X.message||"Failed to update user"})}catch(B){console.error("Error updating user:",B),W({type:"error",content:"Failed to update user"})}finally{j(!1)}},ie=async $=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const X=await(await fetch(`${Tn}/user-management/${$}`,{method:"DELETE",headers:_()})).json();X.success?(W({type:"success",content:"User deleted successfully!"}),await T()):W({type:"error",content:X.message||"Failed to delete user"})}catch(B){console.error("Error deleting user:",B),W({type:"error",content:"Failed to delete user"})}};return g.useEffect(()=>{try{if(!Array.isArray(n)){w([]);return}const $=n.filter(B=>{if(!B)return!1;const X=B.username||"",Q=B.role_name||"",ae=f.toLowerCase();return X.toLowerCase().includes(ae)||Q.toLowerCase().includes(ae)});w($)}catch($){console.error("Error filtering users:",$),w([])}},[f,n]),g.useEffect(()=>{T()},[]),g.useEffect(()=>{if(C.content){const $=setTimeout(()=>{W({type:"",content:""})},5e3);return()=>clearTimeout($)}},[C]),u?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xm,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(is,{className:"h-7 w-7 mr-3 text-blue-600"}),"User Management"]}),r.jsx("p",{className:"mt-1 text-gray-600",children:"Manage users and their authentication settings"})]}),r.jsxs("button",{onClick:()=>{I(null),b(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"w-4 h-4 mr-2"}),"Create User"]})]})}),C.content&&r.jsxs("div",{className:`mb-4 p-4 rounded-lg flex items-center ${C.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[C.type==="success"?r.jsx(Bn,{className:"h-5 w-5 mr-2"}):r.jsx(tt,{className:"h-5 w-5 mr-2"}),C.content]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search users...",value:f,onChange:$=>h($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2FA"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map($=>!$||!$.id||!$.username?null:r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-white",children:$.username?$.username[0].toUpperCase():"?"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.username||"Unknown"}),r.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",$.id||"N/A"]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:$.role_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.is_2fa_enabled?r.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[r.jsx(Ms,{className:"w-3 h-3 mr-1"}),"Enabled"]}):r.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.last_login?Br($.last_login):"Never"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Br($.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{I($),b(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit User",children:r.jsx(Hs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ie($.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:r.jsx(cs,{className:"h-4 w-4"})})]})})]},$.id))})]}),x.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(is,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f?"No users found":"No users yet"}),r.jsx("p",{className:"text-gray-600 mb-4",children:f?"Try adjusting your search terms":"Get started by creating your first user"}),!f&&r.jsxs("button",{onClick:()=>{I(null),b(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),r.jsx(m0,{isOpen:y,onClose:()=>{b(!1),I(null)},user:R,roles:o,onSubmit:R?z:L,isLoading:k})]})},p0=()=>{const n=[{id:1,name:"Total Users",value:"12",icon:is,color:"bg-blue-500"},{id:2,name:"Active Campaigns",value:"8",icon:Ur,color:"bg-green-500"},{id:3,name:"Reports Generated",value:"24",icon:Mn,color:"bg-purple-500"},{id:4,name:"Analytics Views",value:"156",icon:Jt,color:"bg-orange-500"}];return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome to Ads Reporting Software"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor your advertising campaigns and manage your reporting system."})]}),r.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:n.map(a=>{const o=a.icon;return r.jsx("div",{className:"card",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`flex-shrink-0 ${a.color} rounded-md p-3`,children:r.jsx(o,{className:"h-6 w-6 text-white"})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a.name}),r.jsx("dd",{className:"text-3xl font-bold text-gray-900",children:a.value})]})})]})},a.id)})}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"New user registration"}),r.jsx("span",{className:"text-sm text-gray-400",children:"2 hours ago"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Campaign report generated"}),r.jsx("span",{className:"text-sm text-gray-400",children:"5 hours ago"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Analytics data updated"}),r.jsx("span",{className:"text-sm text-gray-400",children:"1 day ago"})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{className:"w-full btn-primary text-left",children:"Create New Campaign"}),r.jsx("button",{className:"w-full btn-secondary text-left",children:"Generate Report"}),r.jsx("button",{className:"w-full btn-secondary text-left",children:"View Analytics"})]})]})]})]})},ar={getAllRoles:async()=>{try{return(await se.get("/permissions/roles-list")).data}catch(n){throw console.error("Error fetching roles:",n),n}},getAllRolesWithPermissions:async()=>{try{const n=await se.get("/permissions/roles-list"),a=n.data.data||n.data,o=await Promise.all(a.map(async c=>{try{const u=await se.get(`/permissions/role/${c.id}/permissions`),m=u.data.data||u.data.permissions||[];return{...c,permissions:m}}catch(u){return console.error(`Error fetching permissions for role ${c.id}:`,u),{...c,permissions:[]}}}));return{...n.data,data:o}}catch(n){throw console.error("Error fetching roles with permissions:",n),n}},getAllModules:async()=>{try{return(await se.get("/permissions/modules")).data}catch(n){throw console.error("Error fetching modules:",n),n}},getModulesWithPermissions:async()=>{try{return(await se.get("/permissions/modules-with-permissions")).data}catch(n){throw console.error("Error fetching modules with permissions:",n),n}},getAllPermissions:async()=>{try{return(await se.get("/permissions")).data}catch(n){throw console.error("Error fetching permissions:",n),n}},getRolePermissions:async n=>{try{return(await se.get(`/permissions/role/${n}/permissions`)).data}catch(a){throw console.error("Error fetching role permissions:",a),a}},getUserRoles:async n=>{try{return(await se.get(`/permissions/user/${n}/roles`)).data}catch(a){throw console.error("Error fetching user roles:",a),a}},getUserPermissions:async n=>{try{return(await se.get(`/permissions/user/${n}`)).data}catch(a){throw console.error("Error fetching user permissions:",a),a}},checkUserPermission:async(n,a)=>{try{return(await se.post("/permissions/check",{user_id:n,permission_key:a})).data}catch(o){throw console.error("Error checking user permission:",o),o}},createRole:async n=>{try{return(await se.post("/permissions/role",n)).data}catch(a){throw console.error("Error creating role:",a),a}},createRoleWithPermissions:async(n,a,o=[])=>{try{const c=await se.post("/permissions/role",{name:n,description:a}),u=c.data.data?.id||c.data.data?.roleId;return o.length>0&&u&&await se.post("/permissions/role/assign",{roleId:u,permissions:o}),c.data}catch(c){throw console.error("Error creating role with permissions:",c),c}},assignPermissionsToRole:async(n,a)=>{try{return(await se.post("/permissions/role/assign",{roleId:n,permissions:a})).data}catch(o){throw console.error("Error assigning permissions to role:",o),o}},updateRole:async(n,a)=>{try{return(await se.put(`/permissions/roles/${n}`,a)).data}catch(o){throw console.error("Error updating role:",o),o}},updateRoleWithPermissions:async(n,a,o,c=[])=>{try{const u=await se.put(`/permissions/roles/${n}`,{name:a,description:o});return c.length>=0&&await se.post("/permissions/role/assign",{roleId:n,permissions:c}),u.data}catch(u){throw console.error("Error updating role with permissions:",u),u}},deleteRole:async n=>{try{return(await se.delete(`/permissions/role/${n}`)).data}catch(a){throw console.error("Error deleting role:",a),a}},assignPermissionToRole:async(n,a)=>{try{return(await se.post("/permissions/grant-role-permission",{role_id:n,permission_id:a})).data}catch(o){throw console.error("Error assigning permission to role:",o),o}},revokePermissionFromRole:async(n,a)=>{try{return(await se.delete("/permissions/revoke-role-permission",{data:{role_id:n,permission_id:a}})).data}catch(o){throw console.error("Error revoking permission from role:",o),o}},assignUserToRole:async(n,a)=>{try{return(await se.post("/permissions/assign-role",{user_id:n,role_id:a})).data}catch(o){throw console.error("Error assigning user to role:",o),o}},removeUserFromRole:async(n,a)=>{try{return(await se.delete("/permissions/revoke-role",{data:{user_id:n,role_id:a}})).data}catch(o){throw console.error("Error removing user from role:",o),o}},getAuditLogs:async(n={})=>{try{return(await se.get("/permissions/audit",{params:n})).data}catch(a){throw console.error("Error fetching audit logs:",a),a}}},mm=()=>{const[n,a]=g.useState([]),[o,c]=g.useState([]),[u,m]=g.useState(!0),[f,h]=g.useState(null),[x,w]=g.useState(!1),[y,b]=g.useState(!1),[R,I]=g.useState(null),[k,j]=g.useState(""),[C,W]=g.useState(""),[_,T]=g.useState({}),[L,z]=g.useState(""),[ie,$]=g.useState(""),[B,X]=g.useState({}),[Q,ae]=g.useState(""),[_e,G]=g.useState(""),Ne=g.useCallback(D=>{const K=["User Management","Role Management","Campaign Type","Campaign","Campaign Data","Cards","Cards Users","Report","Report Analytics"],ve=Ee=>({users:"User Management",campaigns:"Campaign",campaign_data:"Campaign Data","campaign-data":"Campaign Data",campaign_types:"Campaign Type","campaign-types":"Campaign Type",cards:"Cards",card_users:"Cards Users","card-users":"Cards Users",reports:"Report",permissions:"Role Management",system:"Role Management"})[Ee.toLowerCase()]||Ee,ke=Ee=>{const ye=ve(Ee),Ve=K.indexOf(ye);return Ve!==-1?Ve:999};return D.sort((Ee,ye)=>{const Ve=ke(Ee.name),st=ke(ye.name);return Ve!==st?Ve-st:(Ee.name||"").localeCompare(ye.name||"")})},[]),he=g.useMemo(()=>Ne(o.filter(D=>D.name&&D.name.toLowerCase()!=="system")),[o,Ne]),q=g.useCallback(async()=>{try{m(!0),h(null),ae("");const[D,K]=await Promise.all([ar.getAllRolesWithPermissions(),ar.getModulesWithPermissions()]),ke=(D.data||D).map(Ee=>({...Ee,id:Ee.id||Ee.role_id,name:String(Ee.name||Ee.role_name||"").trim(),role_name:String(Ee.role_name||Ee.name||"").trim(),is_system_role:Ee.is_system_role===1||Ee.is_system_role===!0}));a(ke),c(K.data||K)}catch(D){console.error("Error loading data:",D);const K=D.response?.data?.message||D.message||"Failed to load data";h(K),ae(K)}finally{m(!1)}},[]);g.useEffect(()=>{q()},[q]);const ce=g.useCallback(D=>{const K=String(D.name||D.role_name||"");z(K),$(D.description||"");const ve={};D.permissions&&D.permissions.length>0&&D.permissions.forEach(ke=>{const Ee=ke.permission_key||ke.key;o.forEach(ye=>{if(ye.permissions&&ye.permissions.length>0){const Ve=ye.permissions.find(st=>st.key===Ee);Ve&&(ve[ye.id]||(ve[ye.id]=[]),ve[ye.id].includes(Ve.key)||ve[ye.id].push(Ve.key))}})}),X(ve)},[o]);g.useEffect(()=>{R&&o.length>0&&y&&ce(R)},[o,R,y,ce]);const Y=g.useCallback(D=>{const K=[];return!D||!D.trim()?K.push("Role name is required"):(D.trim().length<3&&K.push("Role name must be at least 3 characters"),D.trim().length>50&&K.push("Role name must be less than 50 characters"),/^[a-zA-Z0-9\s\-_]+$/.test(D.trim())||K.push("Role name can only contain letters, numbers, spaces, hyphens, and underscores")),K},[]);g.useEffect(()=>{if(_e){const D=setTimeout(()=>G(""),5e3);return()=>clearTimeout(D)}},[_e]),g.useEffect(()=>{if(Q){const D=setTimeout(()=>ae(""),8e3);return()=>clearTimeout(D)}},[Q]);const oe=g.useCallback(async()=>{try{ae(""),G("");const D=Y(k);if(D.length>0){ae(D.join(". "));return}const K=[];Object.entries(_).forEach(([ve,ke])=>{ke.forEach(Ee=>{K.push(Ee)})}),await ar.createRoleWithPermissions(k.trim(),C.trim(),K),j(""),W(""),T({}),w(!1),await q(),G("Role created successfully!")}catch(D){console.error("Error creating role:",D),D.response?.status===409?ae("A role with this name already exists. Please choose a different name."):D.response?.status===400?ae("Invalid role data. Please check your inputs."):ae(`Error creating role: ${D.response?.data?.message||D.message}`)}},[k,C,_,Y,q]),M=g.useCallback(async()=>{try{ae(""),G("");const D=Y(L);if(D.length>0){ae(D.join(". "));return}const K=[];Object.entries(B).forEach(([ve,ke])=>{ke.forEach(Ee=>{K.push(Ee)})}),await ar.updateRoleWithPermissions(R.id,L.trim(),ie.trim(),K),z(""),$(""),X({}),b(!1),I(null),await q(),G("Role updated successfully!")}catch(D){console.error("Error updating role:",D),D.response?.status===409?ae("A role with this name already exists. Please choose a different name."):D.response?.status===400?ae("Invalid role data. Please check your inputs."):D.response?.status===403?ae("Cannot update this role: It is a system role."):ae(`Error updating role: ${D.response?.data?.message||D.message}`)}},[L,ie,B,R,Y,q]),S=g.useCallback(async(D,K,ve)=>{if(ve){ae(`Cannot delete "${K}" because it is a system role.`);return}if(window.confirm(`Are you sure you want to delete the role "${K}"?`))try{ae(""),await ar.deleteRole(D),await q(),G("Role deleted successfully!")}catch(ke){console.error("Error deleting role:",ke),ke.response?.status===403?ae("Cannot delete this role: It is a system role or has restrictions."):ke.response?.status===400?ae("Cannot delete this role: It may be assigned to active users."):ae(`Error deleting role: ${ke.response?.data?.message||ke.message}`)}},[q]),V=g.useCallback((D,K,ve)=>{T(ke=>{const Ee=ke[D]||[];return ve?{...ke,[D]:[...Ee,K]}:{...ke,[D]:Ee.filter(ye=>ye!==K)}})},[]),H=g.useCallback((D,K,ve)=>{T(ke=>ve?{...ke,[D]:K.map(Ee=>Ee.key)}:{...ke,[D]:[]})},[]),te=g.useCallback((D,K,ve)=>{X(ke=>{const Ee=ke[D]||[];return ve?{...ke,[D]:[...Ee,K]}:{...ke,[D]:Ee.filter(ye=>ye!==K)}})},[]),U=g.useCallback((D,K,ve)=>{X(ke=>ve?{...ke,[D]:K.map(Ee=>Ee.key)}:{...ke,[D]:[]})},[]),ne=g.useCallback(D=>!D||D.length===0?"No permissions assigned":D.map(K=>K.permission_name||K.name||K).join(", "),[]),je=g.useCallback(()=>{w(!1),j(""),W(""),T({}),ae("")},[]),Se=g.useCallback(()=>{b(!1),I(null),z(""),$(""),X({}),ae("")},[]),De=g.useCallback(D=>{D.key==="Escape"&&(x?je():y&&Se())},[x,y,je,Se]);return g.useEffect(()=>{if(x||y)return document.addEventListener("keydown",De),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",De),document.body.style.overflow="unset"}},[x,y,De]),u?r.jsx("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:r.jsxs("div",{className:"inline-flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),"Loading role management interface..."]})}):f?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:r.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",f]})}),r.jsx("button",{className:"btn-primary",onClick:q,children:"Retry"})]}):r.jsxs("div",{className:"p-6",children:[_e&&r.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:r.jsx("p",{className:"text-green-600",children:_e})}),Q&&r.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("p",{className:"text-red-600",children:Q})}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),r.jsx("button",{className:"btn-primary",onClick:()=>w(!0),"aria-label":"Create new role",children:"Create Role"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No roles found"})}):n.map(D=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 role-name-display",children:D.name}),D.is_system_role&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:D.description||"No description"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:r.jsx("div",{className:"max-w-xs truncate",children:ne(D.permissions)})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[r.jsx("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>{I(D),b(!0)},"aria-label":`Edit role ${D.name}`,children:"Edit"}),r.jsx("button",{className:`text-xs px-3 py-1 ${D.is_system_role?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-danger"}`,onClick:()=>S(D.id,D.name,D.is_system_role),disabled:D.is_system_role,title:D.is_system_role?"System roles cannot be deleted":"Delete this role","aria-label":`Delete role ${D.name}`,children:"Delete"})]})]},D.id))})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[r.jsxs("div",{children:[r.jsx("h3",{id:"create-modal-title",className:"text-xl font-bold text-gray-900",children:"Create New Role"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions and access levels"})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all",onClick:je,"aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[r.jsx("div",{className:"w-80 border-r border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"new-role-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role Name *"}),r.jsx("input",{id:"new-role-name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:k,onChange:D=>j(D.target.value),placeholder:"Enter role name",maxLength:50,"aria-required":"true"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"new-role-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{id:"new-role-description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:C,onChange:D=>W(D.target.value),placeholder:"Enter role description",rows:"4",maxLength:255})]}),r.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Permission Summary"}),r.jsx("div",{className:"space-y-2",children:he.map(D=>{const K=_[D.id]||[],ve=D.permissions?D.permissions.length:0;return r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-600",children:D.name}),r.jsxs("span",{className:`font-medium ${K.length>0?"text-blue-600":"text-gray-400"}`,children:[K.length,"/",ve]})]},D.id)})})]})]})}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Module Permissions"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the permissions for each module"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsx("div",{className:"space-y-6",children:he.map(D=>{const K=_[D.id]||[],ve=D.permissions?D.permissions.map(ye=>ye.key):[],ke=ve.length>0&&ve.every(ye=>K.includes(ye)),Ee=D.permissions?[...D.permissions].sort((ye,Ve)=>{const st=zt=>{const Me=zt.name.toLowerCase(),$e=zt.key.toLowerCase();return Me.includes("view")||Me.includes("get")||Me.includes("read")||$e.includes("view")||$e.includes("get")?1:Me.includes("add")||Me.includes("create")||$e.includes("add")||$e.includes("create")?2:Me.includes("update")||Me.includes("edit")||Me.includes("modify")||$e.includes("update")||$e.includes("edit")?3:Me.includes("delete")||Me.includes("remove")||$e.includes("delete")||$e.includes("remove")?4:5};return st(ye)-st(Ve)}):[];return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50 rounded-t-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${K.length>0?"bg-blue-500":"bg-gray-300"}`}),r.jsx("h5",{className:"font-semibold text-gray-900",children:D.name}),r.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[K.length,"/",ve.length]})]}),r.jsx("button",{type:"button",className:`text-xs px-4 py-2 rounded-full border transition-all font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>H(D.id,D.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${D.name}`,children:ke?"Deselect All":"Select All"})]}),r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Ee.map(ye=>r.jsxs("label",{className:"flex items-start space-x-3 p-3 hover:bg-blue-50 rounded-lg border border-transparent hover:border-blue-200 transition-all cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors",checked:_[D.id]?.includes(ye.key)||!1,onChange:Ve=>V(D.id,ye.key,Ve.target.checked),"aria-describedby":ye.description?`${D.id}-${ye.key}-desc`:void 0}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-900",children:ye.name}),ye.description&&r.jsx("p",{id:`${D.id}-${ye.key}-desc`,className:"text-xs text-gray-500 mt-1",children:ye.description})]})]},`${D.id}-${ye.key}`))})})]},D.id)})})})]})]}),r.jsxs("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50 space-x-3",children:[r.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:je,children:"Cancel"}),r.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:oe,disabled:!k.trim(),children:"Create Role"})]})]})}),y&&R&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-modal-title",children:r.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("h3",{id:"edit-modal-title",className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",R.name]}),R.is_system_role&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System Role"})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",onClick:Se,"aria-label":"Close modal",children:""})]}),r.jsxs("div",{className:"p-6",children:[R.is_system_role&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",role:"alert",children:r.jsxs("p",{className:"text-blue-800 text-sm",children:[r.jsx("strong",{children:"System Role:"})," This role cannot be modified as it is required for system functionality. You can view the role details but cannot make changes."]})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"edit-role-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),r.jsx("input",{id:"edit-role-name",type:"text",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${R.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:L,onChange:D=>z(D.target.value),placeholder:"Enter role name",disabled:R.is_system_role,readOnly:R.is_system_role,maxLength:50,"aria-required":"true"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"edit-role-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{id:"edit-role-description",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${R.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:ie,onChange:D=>$(D.target.value),placeholder:"Enter role description",rows:"3",disabled:R.is_system_role,readOnly:R.is_system_role,maxLength:255})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),r.jsx("div",{className:"h-96 overflow-y-auto border border-gray-200 rounded-md p-4 bg-gray-50",children:he.map(D=>{const K=B[D.id]||[],ve=D.permissions?D.permissions.map(ye=>ye.key):[],ke=ve.length>0&&ve.every(ye=>K.includes(ye)),Ee=D.permissions?[...D.permissions].sort((ye,Ve)=>{const st=zt=>{const Me=zt.name.toLowerCase(),$e=zt.key.toLowerCase();return Me.includes("view")||Me.includes("get")||Me.includes("read")||$e.includes("view")||$e.includes("get")?1:Me.includes("add")||Me.includes("create")||$e.includes("add")||$e.includes("create")?2:Me.includes("update")||Me.includes("edit")||Me.includes("modify")||$e.includes("update")||$e.includes("edit")?3:Me.includes("delete")||Me.includes("remove")||$e.includes("delete")||$e.includes("remove")?4:5};return st(ye)-st(Ve)}):[];return r.jsxs("div",{className:`mb-6 last:mb-0 bg-white rounded-lg border border-gray-200 p-4 ${R.is_system_role?"opacity-75":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:D.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[K.length," of ",ve.length," selected"]}),!R.is_system_role&&r.jsx("button",{type:"button",className:`text-xs px-3 py-1 rounded border transition-colors font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100"}`,onClick:()=>U(D.id,D.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${D.name}`,children:ke?"Deselect All":"Select All"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Ee.map(ye=>r.jsxs("label",{className:`flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-md border border-transparent hover:border-gray-200 transition-colors ${R.is_system_role?"cursor-not-allowed":"cursor-pointer"}`,children:[r.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:B[D.id]?.includes(ye.key)||!1,onChange:Ve=>te(D.id,ye.key,Ve.target.checked),disabled:R.is_system_role,"aria-describedby":ye.description?`edit-${D.id}-${ye.key}-desc`:void 0}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:ye.name}),ye.description&&r.jsx("p",{id:`edit-${D.id}-${ye.key}-desc`,className:"text-xs text-gray-500 mt-1",children:ye.description})]})]},`edit-${D.id}-${ye.key}`))})]},D.id)})})]})]}),r.jsxs("div",{className:"flex items-center justify-end p-4 border-t space-x-2",children:[r.jsx("button",{className:"btn-secondary px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:Se,children:"Cancel"}),!R.is_system_role&&r.jsx("button",{className:"btn-primary px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:M,disabled:!L.trim(),children:"Update Role"})]})]})})]})},tf={getAll:async(n={})=>(await se.get("/users",{params:n})).data,getById:async n=>(await se.get(`/users/${n}`)).data,getForDropdown:async()=>{const n=await se.get("/users",{params:{limit:100,is_active:!0}});return n.data.success&&n.data.data?.users?{success:!0,data:n.data.data.users.map(a=>({id:a.id,name:a.username,username:a.username,is_active:a.is_active}))}:n.data},create:async n=>(await se.post("/users",n)).data,update:async(n,a)=>(await se.put(`/users/${n}`,a)).data,delete:async n=>(await se.delete(`/users/${n}`)).data,toggleStatus:async n=>(await se.patch(`/users/${n}/toggle-status`)).data,getRoles:async()=>{try{const n=await se.get("/permissions/roles-list");return n.data.success&&n.data.data?{success:!0,data:{roles:n.data.data.map(a=>({id:a.id,role_name:a.name,name:a.name,description:a.description,is_system_role:a.is_system_role}))}}:n.data}catch(n){return console.error("Error fetching roles from permissions API:",n),(await se.get("/users/roles")).data}},checkUsername:async n=>(await se.get(`/users/check/username/${n}`)).data},h0=({user:n,onManageRoles:a,loading:o})=>r.jsxs("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-medium text-sm",children:n.username?.[0]?.toUpperCase()||"U"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"font-medium text-gray-900",children:n.username}),r.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",n.id]})]})]}),r.jsxs("button",{onClick:()=>a(n),disabled:o,className:"btn-secondary text-sm",children:[r.jsx(Ms,{className:"h-4 w-4 mr-1"}),"Manage Roles"]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Roles:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:n.roles?.length>0?n.roles.map(c=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[c.name," ",r.jsxs("span",{className:"ml-1 text-xs",children:["L",c.level]})]},c.id)):r.jsx("span",{className:"text-xs text-gray-400",children:"No roles assigned"})})]})]}),g0=({user:n,isOpen:a,onClose:o,onSave:c,allRoles:u,loading:m})=>{const[f,h]=g.useState([]),[x,w]=g.useState([]),[y,b]=g.useState(!1);g.useEffect(()=>{n&&a&&R()},[n,a]);const R=async()=>{if(n?.id)try{b(!0);const C=(await ar.getUserRoles(n.id)).data||[];w(C),h(C.map(W=>W.id))}catch(j){console.error("Error fetching user roles:",j)}finally{b(!1)}},I=j=>{h(C=>C.includes(j)?C.filter(W=>W!==j):[...C,j])},k=async()=>{if(n?.id)try{b(!0);const j=x.map(_=>_.id),C=f.filter(_=>!j.includes(_)),W=j.filter(_=>!f.includes(_));for(const _ of C)await ar.assignUserToRole(n.id,_);for(const _ of W)await ar.removeUserFromRole(n.id,_);c()}catch(j){console.error("Error updating user roles:",j)}finally{b(!1)}};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Manage Roles for ",n?.username]}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ct,{className:"h-5 w-5"})})]}),y?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Pi,{className:"h-6 w-6 animate-spin text-gray-400"})}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Select roles for this user:"}),u.map(j=>r.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:f.includes(j.id),onChange:()=>I(j.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:j.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Level ",j.level||1]}),j.description&&r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.description})]})]},j.id))]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:o,className:"btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:k,disabled:y,className:"btn-primary",children:[y&&r.jsx(Pi,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}):null},x0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState([]),[u,m]=g.useState(!0),[f,h]=g.useState(""),[x,w]=g.useState(""),[y,b]=g.useState(null),[R,I]=g.useState(!1);g.useEffect(()=>{k()},[]);const k=async()=>{try{m(!0),h("");const T=(await ar.getAllRoles()).data||[];c(T);const L=await tf.getAll({limit:100});let z=[];L.success&&L.data?.users?z=L.data.users:(console.warn("Failed to load users, using default data"),z=[{id:1,username:"admin"},{id:2,username:"manager"},{id:3,username:"user1"}]);const ie=await Promise.all(z.map(async $=>{try{const B=await ar.getUserRoles($.id);return{...$,roles:B.data||[]}}catch(B){return console.warn(`Error loading roles for user ${$.id}:`,B),{...$,roles:[]}}}));a(ie)}catch(_){h(_.response?.data?.message||"Failed to load data"),console.error("Error loading data:",_)}finally{m(!1)}},j=g.useMemo(()=>n.filter(_=>_.username.toLowerCase().includes(x.toLowerCase())),[n,x]),C=_=>{b(_),I(!0)},W=()=>{I(!1),b(null),k()};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ai,{className:"h-7 w-7 text-primary-500 mr-2"}),r.jsx("h1",{className:"text-2xl font-bold",children:"User Role Management"})]})}),f&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:f}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Users & Their Roles"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hr,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search users...",value:x,onChange:_=>w(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[j.length," users"]})]})]}),u?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(Pi,{className:"h-8 w-8 animate-spin text-gray-400"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.length===0?r.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:x?"No users found matching your search.":"No users available."}):j.map(_=>r.jsx(h0,{user:_,onManageRoles:C,loading:u},_.id))})]}),r.jsx(g0,{user:y,isOpen:R,onClose:()=>I(!1),onSave:W,allRoles:o,loading:u})]})},y0=({active:n,onClick:a,icon:o,children:c})=>r.jsxs("button",{onClick:a,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-primary-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[r.jsx(o,{className:"h-4 w-4 mr-2"}),c]}),v0=()=>{const[n,a]=g.useState("roles"),o=[{id:"roles",label:"Role Management",icon:Ms},{id:"user-roles",label:"User Roles",icon:is}],c=()=>{switch(n){case"roles":return r.jsx(mm,{});case"user-roles":return r.jsx(x0,{});default:return r.jsx(mm,{})}};return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ms,{className:"h-8 w-8 text-primary-500 mr-3"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role & Permission Management"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Manage roles, permissions, and user access"})]})]})}),r.jsx("div",{className:"flex space-x-2 mt-4",children:o.map(u=>r.jsx(y0,{active:n===u.id,onClick:()=>a(u.id),icon:u.icon,children:u.label},u.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:c()})]})},Ga={getAll:async(n={})=>{try{const a=Object.entries(n).filter(([c,u])=>u!=null&&u!=="").reduce((c,[u,m])=>({...c,[u]:m}),{});console.log("API getAll params:",a);const o=await se.get("/campaign-types",{params:a});return console.log("API getAll response:",o.data),o.data}catch(a){throw console.error("API getAll error:",a.response?.data||a.message),a}},getById:async n=>{try{const a=await se.get(`/campaign-types/${n}`);return console.log("API getById response:",a.data),a.data}catch(a){throw console.error("API getById error:",a.response?.data||a.message),a}},create:async n=>{try{console.log("API create data:",n);const a=await se.post("/campaign-types",n);return console.log("API create response:",a.data),a.data}catch(a){throw console.error("API create error:",a.response?.data||a.message),a}},update:async(n,a)=>{try{console.log("API update id:",n,"data:",a);const o=await se.put(`/campaign-types/${n}`,a);return console.log("API update response:",o.data),o.data}catch(o){throw console.error("API update error:",o.response?.data||o.message),o}},delete:async n=>{try{console.log("API delete id:",n);const a=await se.delete(`/campaign-types/${n}`);return console.log("API delete response:",a.data),a.data}catch(a){throw console.error("API delete error:",a.response?.data||a.message),a}}},Hi=({error:n,onDismiss:a,className:o="",dismissible:c=!0,variant:u="error"})=>{if(!n)return null;const f={error:{container:"bg-red-50 border-red-200",icon:"text-red-400",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-400",title:"text-amber-800",text:"text-amber-700"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",title:"text-blue-800",text:"text-blue-700"}}[u];let h="",x=u==="error"?"Error":u==="warning"?"Warning":"Information";return typeof n=="string"?h=n:n?.message?h=n.message:n?.response?.data?.message?h=n.response.data.message:h="An unexpected error occurred",(h.toLowerCase().includes("permission denied")||h.toLowerCase().includes("access denied")||h.toLowerCase().includes("unauthorized")||h.toLowerCase().includes("forbidden"))&&(x="Access Denied"),r.jsx("div",{className:`rounded-md border p-4 ${f.container} ${o}`,role:"alert",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(tt,{className:`h-5 w-5 ${f.icon}`,"aria-hidden":"true"})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h3",{className:`text-sm font-medium ${f.title}`,children:x}),r.jsx("div",{className:`mt-1 text-sm ${f.text}`,children:h})]}),c&&a&&r.jsx("div",{className:"ml-auto pl-3",children:r.jsx("div",{className:"-mx-1.5 -my-1.5",children:r.jsx("button",{onClick:a,className:`inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600 ${f.icon} hover:bg-red-100`,"aria-label":"Dismiss error",children:r.jsx(Ct,{className:"h-4 w-4"})})})})]})})},w0=({isOpen:n,onClose:a,onSubmit:o,editData:c=null,isLoading:u=!1})=>{const[m,f]=g.useState({type_name:"",description:"",is_active:!0}),[h,x]=g.useState({}),[w,y]=g.useState("");g.useEffect(()=>{f(c?{type_name:c.type_name||"",description:c.description||"",is_active:c.is_active!==void 0?c.is_active:!0}:{type_name:"",description:"",is_active:!0}),x({}),y("")},[c,n]);const b=()=>{const k={};return m.type_name.trim()?m.type_name.length>100&&(k.type_name="Campaign type name must be less than 100 characters"):k.type_name="Campaign type name is required",m.description&&m.description.length>1e3&&(k.description="Description must be less than 1000 characters"),x(k),Object.keys(k).length===0},R=k=>{const{name:j,value:C,type:W,checked:_}=k.target;f(T=>({...T,[j]:W==="checkbox"?_:C})),h[j]&&x(T=>({...T,[j]:""}))},I=async k=>{if(k.preventDefault(),!!b())try{y(""),await o(m)}catch(j){console.error("Form submission error:",j),y(j?.response?.data?.message||j.message||"An error occurred while saving")}};return n?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Campaign Type":"Create Campaign Type"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),w&&r.jsx(Hi,{error:w,onDismiss:()=>y(""),className:"mb-4"}),r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Campaign Type Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"type_name",name:"type_name",value:m.type_name,onChange:R,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${h.type_name?"border-red-500":""}`,placeholder:"Enter campaign type name",maxLength:100,disabled:u}),h.type_name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.type_name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:R,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${h.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:u}),h.description&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.description}),r.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[m.description.length,"/1000 characters"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:m.is_active,onChange:R,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:u}),r.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:u?"Saving...":c?"Update":"Create"})]})]})]})}):null},b0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState(!0),[u,m]=g.useState(null),[f,h]=g.useState(""),[x,w]=g.useState("all"),[y,b]=g.useState("created_at"),[R,I]=g.useState("desc"),[k,j]=g.useState(1),[C]=g.useState(10),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(!1),[$,B]=g.useState(!1),[X,Q]=g.useState(null),[ae,_e]=g.useState(!1),G=async()=>{try{c(!0),m(null);const H={search:f,status:x,sort:y,order:R,page:k,limit:C},te=await Ga.getAll(H);te.success?a(te.data||[]):m(te.message||"Failed to fetch campaign types")}catch(H){m(H.response?.data?.message||"Failed to fetch campaign types"),console.error("Error fetching campaign types:",H)}finally{c(!1)}};g.useEffect(()=>{G()},[f,x,y,R,k]);const Ne=async H=>{try{ie(!0),m(null),console.log("Submitting form data:",H),console.log("Editing item:",T);let te;if(T?(console.log("Updating campaign type with ID:",T.id),te=await Ga.update(T.id,H)):(console.log("Creating new campaign type"),te=await Ga.create(H)),console.log("API Response:",te),te.success||te.data)_(!1),L(null),G(),console.log(T?"Campaign type updated successfully":"Campaign type created successfully");else throw new Error(te.message||"Operation failed")}catch(te){console.error("Form submission error:",te),console.error("Error response data:",te.response?.data),console.error("Error status:",te.response?.status);const U=te.response?.data?.message||te.response?.data?.error||te.message||"Operation failed";m(U)}finally{ie(!1)}},he=async H=>{try{_e(!0);const te=await Ga.delete(H);if(te.success)B(!1),Q(null),G(),console.log("Campaign type deleted successfully");else throw new Error(te.message||"Delete failed")}catch(te){console.error("Delete error:",te),m(te.response?.data?.message||"Delete failed")}finally{_e(!1)}},q=H=>{h(H.target.value),j(1)},ce=H=>{w(H),j(1)},Y=H=>{y===H?I(R==="asc"?"desc":"asc"):(b(H),I("asc")),j(1)},oe=H=>{L(H),_(!0)},M=()=>{L(null),_(!0)},S=H=>{Q(H),B(!0)},V=H=>H?Br(H):"-";return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Types"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campaign types"})]}),r.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search campaign types...",value:f,onChange:q,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),r.jsx("div",{children:r.jsxs("select",{value:x,onChange:H=>ce(H.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active Only"}),r.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:G,disabled:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]})})]})})}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}),r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lr,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Loading campaign types..."})]}):n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(rt,{className:"h-12 w-12 mx-auto"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaign types found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first campaign type."}),r.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]}):r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("type_name"),children:["Name",y==="type_name"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("is_active"),children:["Status",y==="is_active"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("created_at"),children:["Created",y==="created_at"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(H=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.type_name})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:H.description||"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Bn,{className:"h-3 w-3 mr-1"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(gl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:V(H.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>oe(H),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:r.jsx(Hs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>S(H),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:r.jsx(cs,{className:"h-4 w-4"})})]})})]},H.id))})]})}),r.jsx(w0,{isOpen:W,onClose:()=>{_(!1),L(null),m(null)},onSubmit:Ne,editData:T,isLoading:z}),$&&X&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx(tt,{className:"mx-auto h-12 w-12 text-red-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Campaign Type"}),r.jsx("div",{className:"mt-2 px-7 py-3",children:r.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',X.type_name,'"? This action cannot be undone.']})}),r.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>{B(!1),Q(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:ae,children:"Cancel"}),r.jsx("button",{onClick:()=>he(X.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:ae,children:ae?"Deleting...":"Delete"})]})]})})})]})},gr={getCampaigns:async(n={})=>(await se.get("/campaigns",{params:n})).data,getCampaign:async n=>(await se.get(`/campaigns/${n}`)).data,createCampaign:async n=>(await se.post("/campaigns",n)).data,updateCampaign:async(n,a)=>(await se.put(`/campaigns/${n}`,a)).data,deleteCampaign:async n=>(await se.delete(`/campaigns/${n}`)).data,toggleCampaignStatus:async n=>(await se.put(`/campaigns/${n}/toggle-status`)).data,toggleCampaignEnabled:async n=>(await se.put(`/campaigns/${n}/toggle-enabled`)).data,activateCampaign:async n=>(await se.put(`/campaigns/${n}/activate`)).data,deactivateCampaign:async n=>(await se.put(`/campaigns/${n}/deactivate`)).data,getCampaignStats:async()=>(await se.get("/campaigns/stats")).data,getCampaignsByBrand:async(n,a={})=>(await se.get(`/campaigns/by-brand/${n}`,{params:a})).data,getCampaignTypes:async()=>(await se.get("/campaign-types")).data,getBrands:async()=>(await se.get("/brands/active")).data},j0=({campaign:n=null,isOpen:a,onClose:o,onSave:c})=>{const[u,m]=g.useState({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""}),[f,h]=g.useState(""),[x,w]=g.useState(""),[y,b]=g.useState(""),[R,I]=g.useState([]),[k,j]=g.useState([]),[C,W]=g.useState(!1),[_,T]=g.useState(""),[L,z]=g.useState({}),ie=[{value:"video",label:"Video"},{value:"image",label:"Image"},{value:"carousel",label:"Carousel"},{value:"collection",label:"Collection"}];g.useEffect(()=>{if(a){if(X(),n){console.log(" Initializing form with campaign data:",n);const q=typeof n.brand=="object"&&n.brand?.id?n.brand.id.toString():n.brand?n.brand.toString():"";console.log(" Extracted brand ID:",q,"from brand:",n.brand),m({name:n.name||"",persona:$(n.persona),gender:$(n.gender),min_age:n.min_age?n.min_age.toString():"",max_age:n.max_age?n.max_age.toString():"",location:$(n.location),creatives:n.creatives||"image",is_enabled:n.is_enabled!==void 0?!!n.is_enabled:!0,campaign_type_id:n.campaign_type_id||"",brand:q})}else m({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""});B(),T(""),z({})}},[a,n]),g.useEffect(()=>{if(n&&k.length>0){const q=typeof n.brand=="object"&&n.brand?.id?n.brand.id.toString():n.brand?n.brand.toString():"";console.log(" Re-setting brand after brands loaded. Brand ID:",q,"Available brands:",k.length),m(ce=>({...ce,brand:q}))}},[n,k]);const $=q=>{if(!q)return[];if(Array.isArray(q))return q;try{const ce=JSON.parse(q);return Array.isArray(ce)?ce:[]}catch{return[]}},B=()=>{h(""),w(""),b("")},X=async()=>{try{const q=await gr.getCampaignTypes();q.success&&I(q.data||[]);const ce=await gr.getBrands();ce.success&&(console.log(" Loaded brands:",ce.data),j(ce.data||[]))}catch(q){console.error("Error loading dropdown data:",q)}},Q=q=>{const{name:ce,value:Y,type:oe,checked:M}=q.target;m(S=>({...S,[ce]:oe==="checkbox"?M:Y})),L[ce]&&z(S=>({...S,[ce]:null}))},ae=(q,ce,Y)=>{const oe=ce.trim();oe&&!u[q].includes(oe)&&(m(M=>({...M,[q]:[...M[q],oe]})),Y(""))},_e=(q,ce)=>{m(Y=>({...Y,[q]:Y[q].filter((oe,M)=>M!==ce)}))},G=(q,ce,Y,oe)=>{q.key==="Enter"&&Y.trim()&&(q.preventDefault(),ae(ce,Y,oe))},Ne=()=>{const q={};return u.name.trim()||(q.name="Campaign name is required"),u.campaign_type_id||(q.campaign_type_id="Campaign type is required"),u.brand||(q.brand="Brand is required"),u.min_age&&(isNaN(u.min_age)||u.min_age<0||u.min_age>100)&&(q.min_age="Minimum age must be a number between 0 and 100"),u.max_age&&(isNaN(u.max_age)||u.max_age<0||u.max_age>100)&&(q.max_age="Maximum age must be a number between 0 and 100"),u.min_age&&u.max_age&&parseInt(u.min_age)>parseInt(u.max_age)&&(q.min_age="Minimum age cannot be greater than maximum age"),z(q),Object.keys(q).length===0},he=async q=>{if(q.preventDefault(),!!Ne()){W(!0),T("");try{const ce={name:u.name.trim(),persona:u.persona,gender:u.gender,min_age:u.min_age?parseInt(u.min_age):null,max_age:u.max_age?parseInt(u.max_age):null,location:u.location,creatives:u.creatives,is_enabled:u.is_enabled,campaign_type_id:parseInt(u.campaign_type_id),brand:parseInt(u.brand)};let Y;n?Y=await gr.updateCampaign(n.id,ce):Y=await gr.createCampaign(ce),Y.success?(c(Y.data),o()):T(Y.message||"Failed to save campaign")}catch(ce){console.error("Error saving campaign:",ce),T(ce.response?.data?.message||"Failed to save campaign. Please try again.")}finally{W(!1)}}};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Edit Campaign":"Create New Campaign"}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:he,className:"p-6 space-y-6",children:[_&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400"}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:_})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:Q,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${L.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter campaign name"}),L.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"campaign_type_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),r.jsxs("select",{id:"campaign_type_id",name:"campaign_type_id",value:u.campaign_type_id,onChange:Q,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${L.campaign_type_id?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[r.jsx("option",{value:"",children:"Select Campaign Type"}),R.filter(q=>q.is_active).map(q=>r.jsx("option",{value:q.id,children:q.type_name},q.id))]}),L.campaign_type_id&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.campaign_type_id})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),r.jsxs("select",{id:"brand",name:"brand",value:u.brand,onChange:Q,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${L.brand?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[r.jsx("option",{value:"",children:"Select Brand"}),k.map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]}),L.brand&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.brand})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"min_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Age"}),r.jsx("input",{type:"number",id:"min_age",name:"min_age",min:"0",max:"100",value:u.min_age,onChange:Q,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${L.min_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter minimum age"}),L.min_age&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.min_age})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"max_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Age"}),r.jsx("input",{type:"number",id:"max_age",name:"max_age",min:"0",max:"100",value:u.max_age,onChange:Q,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${L.max_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter maximum age"}),L.max_age&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.max_age})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"creatives",className:"block text-sm font-medium text-gray-700 mb-1",children:"Creative Type"}),r.jsx("select",{id:"creatives",name:"creatives",value:u.creatives,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:ie.map(q=>r.jsx("option",{value:q.value,children:q.label},q.value))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona (Multiple Values)"}),r.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:u.persona.map((q,ce)=>r.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 border border-purple-200",children:[r.jsx("span",{children:q}),r.jsx("button",{type:"button",onClick:()=>_e("persona",ce),className:"ml-2 text-purple-600 hover:text-purple-800",children:r.jsx(Ct,{className:"h-3 w-3"})})]},ce))}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:f,onChange:q=>h(q.target.value),onKeyDown:q=>G(q,"persona",f,h),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type persona and press Enter"}),r.jsx("button",{type:"button",onClick:()=>ae("persona",f,h),disabled:!f.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(rt,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender (Multiple Values)"}),r.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:u.gender.map((q,ce)=>r.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:[r.jsx("span",{children:q}),r.jsx("button",{type:"button",onClick:()=>_e("gender",ce),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx(Ct,{className:"h-3 w-3"})})]},ce))}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:x,onChange:q=>w(q.target.value),onKeyDown:q=>G(q,"gender",x,w),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type gender and press Enter"}),r.jsx("button",{type:"button",onClick:()=>ae("gender",x,w),disabled:!x.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(rt,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (Multiple Values)"}),r.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:u.location.map((q,ce)=>r.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 border border-green-200",children:[r.jsx("span",{children:q}),r.jsx("button",{type:"button",onClick:()=>_e("location",ce),className:"ml-2 text-green-600 hover:text-green-800",children:r.jsx(Ct,{className:"h-3 w-3"})})]},ce))}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:y,onChange:q=>b(q.target.value),onKeyDown:q=>G(q,"location",y,b),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type location and press Enter"}),r.jsx("button",{type:"button",onClick:()=>ae("location",y,b),disabled:!y.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(rt,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{htmlFor:"is_enabled",className:"block text-sm font-medium text-gray-700",children:"Campaign Status"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm ${u.is_enabled?"text-gray-500":"text-gray-900 font-medium"}`,children:"Disabled"}),r.jsx("button",{type:"button",onClick:()=>m(q=>({...q,is_enabled:!q.is_enabled})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${u.is_enabled?"bg-purple-600":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.is_enabled?"translate-x-6":"translate-x-1"}`})}),r.jsx("span",{className:`text-sm ${u.is_enabled?"text-purple-600 font-medium":"text-gray-500"}`,children:"Enabled"})]})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:C,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:C,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:C?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Zm,{className:"h-4 w-4"}),r.jsx("span",{children:n?"Update Campaign":"Create Campaign"})]})})]})]})]})}):null},N0=()=>{const n=zs(),[a,o]=g.useState([]),[c,u]=g.useState([]),[m,f]=g.useState(!0),[h,x]=g.useState(""),[w,y]=g.useState(""),[b,R]=g.useState(""),[I,k]=g.useState(""),[j,C]=g.useState({delete:null,toggle:null}),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(null),[$,B]=g.useState(null),[X,Q]=g.useState(null);g.useEffect(()=>{ae(),_e()},[]);const ae=async()=>{try{f(!0),x("");const U=await gr.getCampaigns();if(U.success){const ne=U.data?.campaigns||U.data||[];o(ne)}else x(U.message||"Failed to load campaigns")}catch(U){console.error("Error loading campaigns:",U),x("Failed to load campaigns. Please try again.")}finally{f(!1)}},_e=async()=>{try{const U=await gr.getCampaignTypes();U.success&&u(U.data||[])}catch(U){console.error("Error loading campaign types:",U)}},G=()=>{L(null),_(!0)},Ne=U=>{L(U),_(!0),Q(null)},he=U=>{ie(U),Q(null)},q=async()=>{try{const U=await gr.deleteCampaign(z.id);U.success?(o(ne=>(Array.isArray(ne)?ne:[]).filter(je=>je.id!==z.id)),ie(null)):x(U.message||"Failed to delete campaign")}catch(U){console.error("Error deleting campaign:",U),x("Failed to delete campaign. Please try again.")}},ce=async U=>{try{const ne=await gr.toggleCampaignEnabled(U.id);ne.success?o(je=>(Array.isArray(je)?je:[]).map(Se=>Se.id===U.id?{...Se,is_enabled:!Se.is_enabled}:Se)):x(ne.message||"Failed to update campaign status")}catch(ne){console.error("Error toggling campaign status:",ne),x("Failed to update campaign status. Please try again.")}Q(null)},Y=U=>{o(T?ne=>(Array.isArray(ne)?ne:[]).map(je=>je.id===U.id?U:je):ne=>[U,...Array.isArray(ne)?ne:[]])},oe=U=>{n(`/campaigns/${U.id}`)},M=(Array.isArray(a)?a:[]).filter(U=>{const ne=U.brand?.name||"",je=U.name.toLowerCase().includes(w.toLowerCase())||ne.toLowerCase().includes(w.toLowerCase()),Se=!b||U.campaign_type_id===parseInt(b),De=!I||I==="enabled"&&U.is_enabled||I==="disabled"&&!U.is_enabled;return je&&Se&&De}),S=U=>{if(U.campaignType?.name)return U.campaignType.name;const ne=(Array.isArray(c)?c:[]).find(je=>je.id===U.campaign_type_id);return ne?ne.type_name:"Unknown"},V=U=>{if(!U)return[];if(Array.isArray(U))return U;try{return JSON.parse(U)}catch{return[]}},H=U=>{if(!U)return[];if(Array.isArray(U))return U;try{const ne=JSON.parse(U);return Array.isArray(ne)?ne:[]}catch{return U.split(",").map(ne=>ne.trim()).filter(ne=>ne)}},te=U=>{if(!U)return[];if(Array.isArray(U))return U;try{const ne=JSON.parse(U);return Array.isArray(ne)?ne:[]}catch{return U.split(",").map(ne=>ne.trim()).filter(ne=>ne)}};return m?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(U=>r.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},U))})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto",children:[X&&r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>Q(null)}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your advertising campaigns"})]}),r.jsxs("button",{onClick:G,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[r.jsx(rt,{className:"h-5 w-5"}),r.jsx("span",{children:"New Campaign"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search campaigns...",value:w,onChange:U=>y(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),r.jsx("div",{children:r.jsxs("select",{value:b,onChange:U=>R(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[r.jsx("option",{value:"",children:"All Campaign Types"}),(Array.isArray(c)?c:[]).map(U=>r.jsx("option",{value:U.id,children:U.type_name},U.id))]})}),r.jsx("div",{children:r.jsxs("select",{value:I,onChange:U=>k(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"enabled",children:"Enabled"}),r.jsx("option",{value:"disabled",children:"Disabled"})]})}),r.jsx("div",{children:r.jsx("button",{onClick:()=>{y(""),R(""),k("")},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]})}),h&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx(im,{className:"h-5 w-5 text-red-400"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm text-red-800",children:h}),r.jsx("button",{onClick:()=>x(""),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:M.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(Vi,{className:"h-12 w-12 mx-auto"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:(Array.isArray(a)?a:[]).length===0?"Get started by creating your first campaign.":"Try adjusting your search or filter criteria."}),(Array.isArray(a)?a:[]).length===0&&r.jsx("button",{onClick:G,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Campaign"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creative"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(U=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/campaigns/${U.id}`),children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name}),U.brand?.name&&r.jsx("div",{className:"text-sm text-gray-500",children:U.brand.name})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-900",children:S(U)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:U.creatives})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.is_enabled?"Enabled":"Disabled"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Br(U.created_at)}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),oe(U)},className:"text-blue-500 hover:text-blue-700 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:r.jsx(ol,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),Ne(U)},className:"text-yellow-500 hover:text-yellow-700 p-1 rounded-md hover:bg-yellow-50 transition-colors",title:"Edit Campaign",children:r.jsx(r0,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),ce(U)},className:`p-1 rounded-md transition-colors ${U.is_enabled?"text-red-500 hover:text-red-700 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:U.is_enabled?"Disable Campaign":"Enable Campaign",children:r.jsx("div",{className:`h-4 w-4 rounded-full ${U.is_enabled?"bg-red-500":"bg-green-500"}`})}),r.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),he(U)},className:"text-red-500 hover:text-red-700 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Campaign",children:r.jsx(cs,{className:"h-4 w-4"})})]})})]},U.id))})]})})}),M.length>0&&r.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",M.length," of ",(Array.isArray(a)?a:[]).length," campaigns"]})]}),r.jsx(j0,{campaign:T,isOpen:W,onClose:()=>{_(!1),L(null)},onSave:Y}),$&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Campaign Details"}),r.jsx("button",{onClick:()=>B(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Name"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$.name})]}),$.brand?.name&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Brand"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$.brand.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Type"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:S($)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Persona"}),r.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:H($.persona).length>0?H($.persona).map((U,ne)=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-purple-100 text-purple-800",children:U},ne)):r.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:V($.gender).join(", ")||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Locations"}),r.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:te($.location).length>0?te($.location).map((U,ne)=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:U},ne)):r.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Creatives"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:$.creatives})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),r.jsx("p",{className:`mt-1 text-sm font-medium ${$.is_enabled?"text-green-600":"text-red-600"}`,children:$.is_enabled?"Enabled":"Disabled"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d0($.created_at)})]})]})]})}),z&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(im,{className:"h-6 w-6 text-red-600 mr-3"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Campaign"})]}),r.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:['Are you sure you want to delete "',z.name,'"? This action cannot be undone.']}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:q,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})},Xa={getAll:async(n={})=>{try{const a=Object.entries(n).filter(([c,u])=>u!=null&&u!=="").reduce((c,[u,m])=>({...c,[u]:m}),{});console.log("Brand API getAll params:",a);const o=await se.get("/brands",{params:a});return console.log("Brand API getAll response:",o.data),o.data}catch(a){throw console.error("Brand API getAll error:",a.response?.data||a.message),a}},getById:async n=>{try{const a=await se.get(`/brands/${n}`);return console.log("Brand API getById response:",a.data),a.data}catch(a){throw console.error("Brand API getById error:",a.response?.data||a.message),a}},create:async n=>{try{console.log("Brand API create data:",n);const a=await se.post("/brands",n);return console.log("Brand API create response:",a.data),a.data}catch(a){throw console.error("Brand API create error:",a.response?.data||a.message),a}},update:async(n,a)=>{try{console.log("Brand API update id:",n,"data:",a);const o=await se.put(`/brands/${n}`,a);return console.log("Brand API update response:",o.data),o.data}catch(o){throw console.error("Brand API update error:",o.response?.data||o.message),o}},delete:async n=>{try{console.log("Brand API delete id:",n);const a=await se.delete(`/brands/${n}`);return console.log("Brand API delete response:",a.data),a.data}catch(a){throw console.error("Brand API delete error:",a.response?.data||a.message),a}}},k0=({isOpen:n,onClose:a,onSubmit:o,editData:c=null,isLoading:u=!1})=>{const[m,f]=g.useState({name:"",description:"",is_active:!0}),[h,x]=g.useState({}),[w,y]=g.useState("");g.useEffect(()=>{f(c?{name:c.name||"",description:c.description||"",is_active:c.is_active!==void 0?c.is_active:!0}:{name:"",description:"",is_active:!0}),x({}),y("")},[c,n]);const b=()=>{const k={};return m.name.trim()?m.name.length>255&&(k.name="Brand name must be less than 255 characters"):k.name="Brand name is required",m.description&&m.description.length>1e3&&(k.description="Description must be less than 1000 characters"),x(k),Object.keys(k).length===0},R=k=>{const{name:j,value:C,type:W,checked:_}=k.target;f(T=>({...T,[j]:W==="checkbox"?_:C})),h[j]&&x(T=>({...T,[j]:""}))},I=async k=>{if(k.preventDefault(),!!b())try{y(""),await o(m)}catch(j){console.error("Form submission error:",j),y(j?.response?.data?.message||j.message||"An error occurred while saving")}};return n?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Brand":"Create Brand"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),w&&r.jsx(Hi,{error:w,onDismiss:()=>y(""),className:"mb-4"}),r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:R,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${h.name?"border-red-500":""}`,placeholder:"Enter brand name",maxLength:255,disabled:u}),h.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:R,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${h.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:u}),h.description&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.description}),r.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[m.description.length,"/1000 characters"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:m.is_active,onChange:R,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:u}),r.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:u?"Saving...":c?"Update":"Create"})]})]})]})}):null},S0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState(!0),[u,m]=g.useState(null),[f,h]=g.useState(""),[x,w]=g.useState("all"),[y,b]=g.useState("created_at"),[R,I]=g.useState("desc"),[k,j]=g.useState(1),[C]=g.useState(10),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(!1),[$,B]=g.useState(!1),[X,Q]=g.useState(null),[ae,_e]=g.useState(!1),G=async()=>{try{c(!0),m(null);const H={search:f,status:x==="all"?void 0:x,sort:y,order:R,page:k,limit:C},te=await Xa.getAll(H);te.success?a(te.data||[]):m(te.message||"Failed to fetch brands")}catch(H){m(H.response?.data?.message||"Failed to fetch brands"),console.error("Error fetching brands:",H)}finally{c(!1)}};g.useEffect(()=>{G()},[f,x,y,R,k]);const Ne=async H=>{try{ie(!0),m(null),console.log("Submitting form data:",H),console.log("Editing item:",T);let te;if(T?(console.log("Updating brand with ID:",T.id),te=await Xa.update(T.id,H)):(console.log("Creating new brand"),te=await Xa.create(H)),console.log("API Response:",te),te.success||te.data)_(!1),L(null),G(),console.log(T?"Brand updated successfully":"Brand created successfully");else throw new Error(te.message||"Operation failed")}catch(te){console.error("Form submission error:",te),console.error("Error response data:",te.response?.data),console.error("Error status:",te.response?.status);const U=te.response?.data?.message||te.response?.data?.error||te.message||"Operation failed";m(U)}finally{ie(!1)}},he=async H=>{try{_e(!0);const te=await Xa.delete(H);if(te.success)B(!1),Q(null),G(),console.log("Brand deleted successfully");else throw new Error(te.message||"Delete failed")}catch(te){console.error("Delete error:",te),m(te.response?.data?.message||"Delete failed")}finally{_e(!1)}},q=H=>{h(H.target.value),j(1)},ce=H=>{w(H),j(1)},Y=H=>{y===H?I(R==="asc"?"desc":"asc"):(b(H),I("asc")),j(1)},oe=H=>{L(H),_(!0)},M=()=>{L(null),_(!0)},S=H=>{Q(H),B(!0)},V=H=>H?Br(H):"-";return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your brand portfolio"})]}),r.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search brands...",value:f,onChange:q,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),r.jsx("div",{children:r.jsxs("select",{value:x,onChange:H=>ce(H.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active Only"}),r.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:G,disabled:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]})})]})})}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}),r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lr,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Loading brands..."})]}):n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(rt,{className:"h-12 w-12 mx-auto"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No brands found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first brand."}),r.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]}):r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("name"),children:["Name",y==="name"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("is_active"),children:["Status",y==="is_active"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("created_at"),children:["Created",y==="created_at"&&r.jsx("span",{className:"ml-1",children:R==="asc"?"":""})]}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(H=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:H.description||"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Bn,{className:"h-3 w-3 mr-1"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(gl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:V(H.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>oe(H),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:r.jsx(Hs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>S(H),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:r.jsx(cs,{className:"h-4 w-4"})})]})})]},H.id))})]})}),r.jsx(k0,{isOpen:W,onClose:()=>{_(!1),L(null),m(null)},onSubmit:Ne,editData:T,isLoading:z}),$&&X&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx(tt,{className:"mx-auto h-12 w-12 text-red-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Brand"}),r.jsx("div",{className:"mt-2 px-7 py-3",children:r.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',X.name,'"? This action cannot be undone.']})}),r.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>{B(!1),Q(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:ae,children:"Cancel"}),r.jsx("button",{onClick:()=>he(X.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:ae,children:ae?"Deleting...":"Delete"})]})]})})})]})},An={getAll:async(n={})=>{try{return(await se.get("/campaign-data",{params:n})).data}catch(a){throw console.error("API getAll error:",a.response?.data||a.message),a}},getById:async n=>{try{return(await se.get(`/campaign-data/${n}`)).data}catch(a){throw console.error("API getById error:",a.response?.data||a.message),a}},create:async n=>{try{return(await se.post("/campaign-data",n)).data}catch(a){throw console.error("API create error:",a.response?.data||a.message),a}},update:async(n,a)=>{try{return(await se.put(`/campaign-data/${n}`,a)).data}catch(o){throw console.error("API update error:",o.response?.data||o.message),o}},delete:async n=>{try{return(await se.delete(`/campaign-data/${n}`)).data}catch(a){throw console.error("API delete error:",a.response?.data||a.message),a}},getCampaignsForDropdown:async()=>{try{const n=await se.get("/campaigns",{params:{is_enabled:!0,limit:1e3}});return{success:n.data.success,data:n.data.data?.campaigns||n.data.data||[],message:n.data.message}}catch(n){throw console.error("API getCampaignsForDropdown error:",n.response?.data||n.message),n}},getCardsForDropdown:async()=>{try{return(await se.get("/campaign-data/cards")).data}catch(n){throw console.error("API getCardsForDropdown error:",n.response?.data||n.message),n}},getByCampaignId:async(n,a={})=>{try{return(await se.get("/campaign-data",{params:{campaign_id:n,...a}})).data}catch(o){throw console.error("API getByCampaignId error:",o.response?.data||o.message),o}}},C0=()=>{const{id:n}=Uh(),a=zs(),[o,c]=g.useState(null),[u,m]=g.useState(!0),[f,h]=g.useState([]),[x,w]=g.useState(!0),[y,b]=g.useState(null),[R,I]=g.useState(""),[k,j]=g.useState(1),[C]=g.useState(10),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(!1),[$,B]=g.useState(!1),[X,Q]=g.useState(null),[ae,_e]=g.useState(!1),[G,Ne]=g.useState([]),[he,q]=g.useState(!1),[ce,Y]=g.useState({from:"",to:""}),[oe,M]=g.useState({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""});function S(){const J=new Date;J.setDate(J.getDate()-1);const de=J.getFullYear(),ge=String(J.getMonth()+1).padStart(2,"0"),Oe=String(J.getDate()).padStart(2,"0");return`${de}-${ge}-${Oe}`}const V=()=>{const J=new Date,de=new Date(J.getFullYear(),J.getMonth(),1),ge=new Date(J.getFullYear(),J.getMonth()+1,0),Oe=Rt=>{const It=Rt.getFullYear(),Xt=String(Rt.getMonth()+1).padStart(2,"0"),Bt=String(Rt.getDate()).padStart(2,"0");return`${It}-${Xt}-${Bt}`},or={from:Oe(de),to:Oe(ge)};return console.log("Current month range:",or),or},H=async()=>{try{m(!0);const J=await gr.getCampaign(n);J.success&&J.data?c(J.data):b("Campaign not found")}catch(J){console.error("Error fetching campaign:",J),b("Failed to load campaign details")}finally{m(!1)}},te=async()=>{try{w(!0),b(null);const J={search:R,page:k,limit:C,date_from:Ve(ce.from),date_to:Ve(ce.to)},de=await An.getByCampaignId(n,J);de.success?h(de.data||[]):b(de.message||"Failed to fetch campaign data")}catch(J){b(J.response?.data?.message||"Failed to fetch campaign data"),console.error("Error fetching campaign data:",J)}finally{w(!1)}},U=async()=>{try{q(!0);const J=await An.getCardsForDropdown();J.success&&Ne(J.data||[])}catch(J){console.error("Error fetching cards:",J)}finally{q(!1)}};g.useEffect(()=>{n&&(H(),U())},[n]),g.useEffect(()=>{n&&st(ce.from)&&st(ce.to)&&te()},[n,R,k,ce]);const ne=J=>{const{name:de,value:ge}=J.target;M(Oe=>({...Oe,[de]:ge}))},je=async J=>{J.preventDefault();try{if(ie(!0),b(null),!oe.card_id||!oe.data_date){b("Card and Date are required fields");return}const de={campaign_id:parseInt(n),facebook_result:parseInt(oe.facebook_result)||0,zoho_result:parseInt(oe.zoho_result)||0,spent:parseFloat(oe.spent)||0,data_date:oe.data_date,card_id:parseInt(oe.card_id)};let ge;if(T?ge=await An.update(T.id,de):ge=await An.create(de),ge.success||ge.data)_(!1),L(null),M({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""}),te();else throw new Error(ge.message||"Operation failed")}catch(de){console.error("Form submission error:",de);const ge=de.response?.data?.message||de.response?.data?.error||de.message||"Operation failed";b(ge)}finally{ie(!1)}},Se=async J=>{try{_e(!0);const de=await An.delete(J);if(de.success)B(!1),Q(null),te();else throw new Error(de.message||"Delete failed")}catch(de){console.error("Delete error:",de),b(de.response?.data?.message||"Delete failed")}finally{_e(!1)}},De=J=>{I(J.target.value),j(1)},D=J=>{b(null),L(J),M({facebook_result:J.facebook_result?.toString()||"",zoho_result:J.zoho_result?.toString()||"",spent:J.spent?.toString()||"",data_date:J.data_date||"",card_id:J.card_id?.toString()||""}),_(!0)},K=()=>{b(null),L(null),M({facebook_result:"",zoho_result:"",spent:"",data_date:S(),card_id:""}),_(!0)},ve=J=>{Q(J),B(!0)},ke=J=>J?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(J)):"0.00",Ee=J=>{const de=G.find(ge=>ge.id===J);return de?de.card_name:"-"},ye=J=>{if(!J)return"";if(J.includes("T")||J.includes("-"))try{const de=new Date(J);if(!isNaN(de.getTime())){const ge=String(de.getDate()).padStart(2,"0"),Oe=String(de.getMonth()+1).padStart(2,"0"),or=de.getFullYear();return`${ge}/${Oe}/${or}`}}catch(de){console.error("Error parsing date:",J,de)}if(J.match(/^\d{4}-\d{2}-\d{2}$/)){const[de,ge,Oe]=J.split("-");return`${Oe}/${ge}/${de}`}return J},Ve=J=>{if(!J)return"";const[de,ge,Oe]=J.split("/");return`${Oe}-${ge.padStart(2,"0")}-${de.padStart(2,"0")}`},st=J=>{if(!J)return!1;const de=J.split("/");if(de.length!==3)return!1;const[ge,Oe,or]=de,Rt=parseInt(ge,10),It=parseInt(Oe,10),Xt=parseInt(or,10);if(isNaN(Rt)||isNaN(It)||isNaN(Xt)||Rt<1||Rt>31||It<1||It>12||Xt<1900||Xt>2100)return!1;const Bt=new Date(Xt,It-1,Rt);return Bt.getFullYear()===Xt&&Bt.getMonth()===It-1&&Bt.getDate()===Rt};g.useEffect(()=>{const J=V();Y({from:ye(J.from),to:ye(J.to)})},[]);const zt=(J,de)=>{let ge=de.replace(/[^0-9/]/g,"");if(ge.length>=2&&ge.charAt(2)!=="/"&&(ge.length===2?ge=ge+"/":ge.length>2&&ge.length<=4&&(ge=ge.substring(0,2)+"/"+ge.substring(2))),ge.length>=5&&ge.charAt(5)!=="/"){if(ge.length===5)ge=ge+"/";else if(ge.length>5){const Oe=ge.split("/");Oe.length===2&&(ge=Oe[0]+"/"+Oe[1].substring(0,2)+"/"+Oe[1].substring(2))}}ge.length<=10&&Y(Oe=>({...Oe,[J]:ge}))},Me=(J,de)=>{de&&Y(ge=>({...ge,[J]:ye(de)}))},$e=J=>{let de=J.replace(/[^0-9/]/g,"");if(de.length>=2&&de.charAt(2)!=="/"&&(de.length===2?de=de+"/":de.length>2&&de.length<=4&&(de=de.substring(0,2)+"/"+de.substring(2))),de.length>=5&&de.charAt(5)!=="/"){if(de.length===5)de=de+"/";else if(de.length>5){const ge=de.split("/");ge.length===2&&(de=ge[0]+"/"+ge[1].substring(0,2)+"/"+ge[1].substring(2))}}if(de.length<=10)if(st(de)){const ge=Ve(de);M(Oe=>({...Oe,data_date:ge}))}else M(ge=>({...ge,data_date:de}))},yr=J=>{J&&M(de=>({...de,data_date:J}))};return u?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(J=>r.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},J))})]})}):o?r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>a("/campaigns"),className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[r.jsx(cm,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),r.jsx("div",{children:r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:o.name})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Data"}),r.jsxs("button",{onClick:K,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Data Entry"]})]})}),r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"date_from",className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date (DD/MM/YYYY)"}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_from_picker").showPicker&&document.getElementById("date_from_picker").showPicker()}),r.jsx("input",{type:"text",id:"date_from",value:ce.from,onChange:J=>zt("from",J.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),r.jsx("input",{type:"date",id:"date_from_picker",className:"absolute opacity-0 pointer-events-none",onChange:J=>Me("from",J.target.value),tabIndex:-1})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"date_to",className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date (DD/MM/YYYY)"}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_to_picker").showPicker&&document.getElementById("date_to_picker").showPicker()}),r.jsx("input",{type:"text",id:"date_to",value:ce.to,onChange:J=>zt("to",J.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),r.jsx("input",{type:"date",id:"date_to_picker",className:"absolute opacity-0 pointer-events-none",onChange:J=>Me("to",J.target.value),tabIndex:-1})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"search",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",id:"search",placeholder:"Search data...",value:R,onChange:De,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("button",{onClick:te,disabled:x,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})})]})}),y&&r.jsx("div",{className:"mx-6 mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm text-red-800",children:y}),r.jsx("button",{onClick:()=>b(null),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),r.jsx("div",{className:"overflow-hidden",children:x?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lr,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Loading performance data..."})]}):f.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(Jt,{className:"h-12 w-12 mx-auto"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No performance data yet"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your campaign performance by adding data entries."}),r.jsxs("button",{onClick:K,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add First Entry"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Result"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Result"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Card"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(J=>{const de=parseInt(J.facebook_result)||0,ge=parseInt(J.zoho_result)||0;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:Br(J.data_date)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-700",children:de})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-700",children:ge})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-green-600",children:ke(J.spent)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-700",children:J.card_display_name||J.card_name||Ee(J.card_id)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>D(J),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:r.jsx(Hs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ve(J),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:r.jsx(cs,{className:"h-4 w-4"})})]})})]},J.id)})})]})})})]}),W&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-md shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:T?"Edit Performance Data":"Add Performance Data"}),y&&W&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-4 w-4 text-red-400"}),r.jsx("div",{className:"ml-2",children:r.jsx("p",{className:"text-sm text-red-700",children:y})})]})}),r.jsxs("form",{onSubmit:je,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"facebook_result",className:"block text-sm font-medium text-gray-700",children:"Facebook Result"}),r.jsx("input",{type:"number",id:"facebook_result",name:"facebook_result",value:oe.facebook_result,onChange:ne,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"zoho_result",className:"block text-sm font-medium text-gray-700",children:"Zoho Result"}),r.jsx("input",{type:"number",id:"zoho_result",name:"zoho_result",value:oe.zoho_result,onChange:ne,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spent",className:"block text-sm font-medium text-gray-700",children:"Spent ()"}),r.jsx("input",{type:"number",step:"0.01",id:"spent",name:"spent",value:oe.spent,onChange:ne,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"data_date",className:"block text-sm font-medium text-gray-700",children:"Date * (DD/MM/YYYY)"}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("form_date_picker").showPicker&&document.getElementById("form_date_picker").showPicker()}),r.jsx("input",{type:"text",id:"data_date",name:"data_date",value:oe.data_date?ye(oe.data_date):"",onChange:J=>$e(J.target.value),placeholder:"DD/MM/YYYY",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3 pl-10"}),r.jsx("input",{type:"date",id:"form_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:J=>yr(J.target.value),tabIndex:-1})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),r.jsxs("select",{id:"card_id",name:"card_id",value:oe.card_id,onChange:ne,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3",children:[r.jsx("option",{value:"",children:"Select Card"}),G.map(J=>r.jsx("option",{value:J.id,children:J.card_name},J.id))]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>{_(!1),L(null),b(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:z,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:z||he,children:z?"Saving...":T?"Update":"Create"})]})]})]})})}),$&&X&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx(tt,{className:"mx-auto h-12 w-12 text-red-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Performance Data"}),r.jsx("div",{className:"mt-2 px-7 py-3",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this performance data entry? This action cannot be undone."})}),r.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>{B(!1),Q(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:ae,children:"Cancel"}),r.jsx("button",{onClick:()=>Se(X.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:ae,children:ae?"Deleting...":"Delete"})]})]})})})]}):r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),r.jsxs("button",{onClick:()=>a("/campaigns"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[r.jsx(cm,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})]})})},ns="/cards",Fs={getAll:async(n={})=>{try{return(await se.get(ns,{params:n})).data}catch(a){throw console.error("API get all cards error:",a.response?.data||a),a}},getActive:async(n={})=>{try{return(await se.get(`${ns}/active`,{params:n})).data}catch(a){throw console.error("API get active cards error:",a.response?.data||a),a}},getById:async n=>{try{return(await se.get(`${ns}/${n}`)).data}catch(a){throw console.error("API get card error:",a.response?.data||a),a}},create:async n=>{try{return(await se.post(ns,n)).data}catch(a){throw console.error("API create card error:",a.response?.data||a),a}},update:async(n,a)=>{try{return(await se.put(`${ns}/${n}`,a)).data}catch(o){throw console.error("API update card error:",o.response?.data||o),o}},addBalance:async(n,a,o="")=>{try{return(await se.post(`${ns}/${n}/add-balance`,{amount:Number(a),description:o||""})).data}catch(c){throw console.error("API add balance error:",c.response?.data||c),c}},delete:async n=>{try{return(await se.delete(`${ns}/${n}`)).data}catch(a){throw console.error("API delete card error:",a.response?.data||a),a}}},_0=({isOpen:n,onClose:a,onSubmit:o,editData:c=null,isLoading:u=!1})=>{const[m,f]=g.useState(""),[h,x]=g.useState({card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),[w,y]=g.useState({});g.useEffect(()=>{x(c?{card_name:c.card_name||"",card_number_last4:c.card_number_last4||"",card_type:c.card_type||"",current_balance:c.current_balance||"",is_active:c.is_active!==void 0?c.is_active:!0}:{card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),y({})},[c,n]),g.useEffect(()=>{n&&f("")},[n]);const b=()=>{const k={};return h.card_name.trim()?h.card_name.length>100&&(k.card_name="Card name must be less than 100 characters"):k.card_name="Card name is required",h.card_number_last4.trim()?/^\d{4}$/.test(h.card_number_last4)||(k.card_number_last4="Must be exactly 4 digits"):k.card_number_last4="Last 4 digits are required",h.card_type||(k.card_type="Card type is required"),h.current_balance.toString().trim()?(isNaN(parseFloat(h.current_balance))||parseFloat(h.current_balance)<0)&&(k.current_balance="Current balance must be a valid positive number"):k.current_balance="Current balance is required",y(k),Object.keys(k).length===0},R=k=>{const{name:j,value:C,type:W,checked:_}=k.target;let T=W==="checkbox"?_:C;if(j==="card_number_last4"&&(T=C.replace(/\D/g,"").slice(0,4)),j==="current_balance")if(C===""||/^\d*\.?\d*$/.test(C))T=C;else return;x(L=>({...L,[j]:T})),w[j]&&y(L=>({...L,[j]:""}))},I=async k=>{if(k.preventDefault(),!!b())try{f("");const j={...h,current_balance:parseFloat(h.current_balance)};await o(j)}catch(j){console.error("Form submission error:",j),f(j?.response?.data?.message||j.message||"An error occurred")}};return n?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Card":"Add New Card"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-6 w-6"})})]}),m&&r.jsx(Hi,{error:m,onDismiss:()=>f(""),className:"mb-4"}),r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"card_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"card_name",name:"card_name",value:h.card_name,onChange:R,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${w.card_name?"border-red-500":""}`,placeholder:"Enter card name",maxLength:100,disabled:u}),w.card_name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.card_name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"card_number_last4",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last 4 Digits ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"card_number_last4",name:"card_number_last4",value:h.card_number_last4,onChange:R,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${w.card_number_last4?"border-red-500":""}`,placeholder:"1234",maxLength:4,disabled:u}),w.card_number_last4&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.card_number_last4})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"card_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"card_type",name:"card_type",value:h.card_type,onChange:R,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${w.card_type?"border-red-500":""}`,placeholder:"e.g., Visa, MasterCard, American Express",maxLength:50,disabled:u}),w.card_type&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.card_type})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"current_balance",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Balance ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:""}),r.jsx("input",{type:"text",id:"current_balance",name:"current_balance",value:h.current_balance,onChange:R,className:`mt-1 block w-full pl-7 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${w.current_balance?"border-red-500":""}`,placeholder:"0.00",disabled:u})]}),w.current_balance&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.current_balance})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:h.is_active,onChange:R,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:u}),r.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,children:u?"Saving...":c?"Update":"Create"})]})]})]})}):null},E0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState(!0),[u,m]=g.useState(null),[f,h]=g.useState(""),[x,w]=g.useState(1),[y]=g.useState(10),[b,R]=g.useState(!1),[I,k]=g.useState(null),[j,C]=g.useState(!1),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(!1),[$,B]=g.useState(!1),[X,Q]=g.useState(null),[ae,_e]=g.useState(""),[G,Ne]=g.useState(!1),he=async()=>{try{c(!0),m(null);const K={search:f,page:x,limit:y},ve=await Fs.getAll(K);ve.success?a(ve.data?.cards||[]):m(ve.message||"Failed to fetch cards")}catch(K){m(K.response?.data?.message||"Failed to fetch cards"),console.error("Error fetching cards:",K)}finally{c(!1)}};g.useEffect(()=>{const K=setTimeout(()=>{w(1),he()},300);return()=>clearTimeout(K)},[f]),g.useEffect(()=>{he()},[x]),g.useEffect(()=>{he()},[]);const q=(K=null)=>{k(K),R(!0)},ce=()=>{R(!1),k(null)},Y=async K=>{try{if(C(!0),I){const ve=await Fs.update(I.id||I._id,K);if(!ve.success)throw new Error(ve.message||"Update failed")}else{const ve=await Fs.create(K);if(!ve.success)throw new Error(ve.message||"Creation failed")}ce(),await he()}catch(ve){throw console.error("Form submission error:",ve),ve}finally{C(!1)}},oe=K=>{L(K),_(!0)},M=async()=>{if(T)try{ie(!0);const K=await Fs.delete(T.id||T._id);if(!K.success)throw new Error(K.message||"Delete failed");_(!1),L(null),await he()}catch(K){console.error("Delete error:",K),alert(K.response?.data?.message||"Failed to delete card")}finally{ie(!1)}},S=()=>{_(!1),L(null)},V=K=>{Q(K),_e(""),B(!0)},H=()=>{B(!1),Q(null),_e("")},te=async()=>{if(!X||!ae)return;const K=parseFloat(ae);if(isNaN(K)||K<=0){alert("Please enter a valid positive amount");return}try{Ne(!0);const ve=await Fs.addBalance(X.id||X._id,K);if(!ve.success)throw new Error(ve.message||"Failed to add balance");B(!1),Q(null),_e(""),await he()}catch(ve){console.error("Add balance error:",ve),alert(ve.response?.data?.message||"Failed to add balance")}finally{Ne(!1)}},U=g.useMemo(()=>f.trim()?n.filter(K=>K.card_name?.toLowerCase().includes(f.toLowerCase())||K.card_number_last4?.includes(f)||K.card_type?.toLowerCase().includes(f.toLowerCase())):n,[n,f]),ne=U.length,je=Math.ceil(ne/y),Se=(x-1)*y,De=Se+y,D=U.slice(Se,De);return r.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Ls,{className:"h-7 w-7 text-blue-600"}),"Cards Management"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>he(),disabled:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]}),r.jsxs("button",{onClick:()=>q(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Card"]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Hr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:f,onChange:K=>h(K.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cards..."})]})}),u&&r.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-sm text-red-700",children:u})]})}),o?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((K,ve)=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},ve))}):D.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ls,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:f?"Try adjusting your search terms.":"Get started by adding your first card."}),!f&&r.jsxs("button",{onClick:()=>q(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Card"]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(K=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:K.card_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["   ",K.card_number_last4]})]}),r.jsx("div",{className:"flex items-center gap-1",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:K.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Bn,{className:"w-3 h-3 mr-1"})," Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(gl,{className:"w-3 h-3 mr-1"})," Inactive"]})})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Card Type"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:K.card_type||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Balance"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Dn,{className:"h-4 w-4 text-green-600 mr-1"}),r.jsx("span",{className:"text-sm font-semibold text-green-600",children:Number(K.current_balance||0).toFixed(2)})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(zr,{className:"h-3 w-3 mr-1"}),Br(K.created_at)]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>V(K),className:"inline-flex items-center px-3 py-1.5 border border-green-300 shadow-sm text-xs font-medium rounded text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[r.jsx(rt,{className:"h-3 w-3 mr-1"}),"Add Balance"]}),r.jsxs("button",{onClick:()=>q(K),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[r.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs("button",{onClick:()=>oe(K),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[r.jsx(cs,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]})},K.id||K._id))}),je>1&&r.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",Se+1," to ",Math.min(De,ne)," of ",ne," results"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(K=>Math.max(1,K-1)),disabled:x<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",x," of ",je]}),r.jsx("button",{onClick:()=>w(K=>Math.min(je,K+1)),disabled:x>=je,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),r.jsx(_0,{isOpen:b,onClose:ce,onSubmit:Y,editData:I,isLoading:j}),W&&T&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx(tt,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Card"}),r.jsx("div",{className:"mt-2",children:r.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',T.card_name,'"? This action cannot be undone.']})})]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{onClick:M,disabled:z,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:z?"Deleting...":"Delete"}),r.jsx("button",{onClick:S,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),$&&X&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx(Dn,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Balance"}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['Add balance to "',X.card_name,'"']}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{htmlFor:"balance-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount ()"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Dn,{className:"h-4 w-4 text-gray-400"})}),r.jsx("input",{type:"number",id:"balance-amount",value:ae,onChange:K=>_e(K.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]})]})]})]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{onClick:te,disabled:G||!ae,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:G?"Adding...":"Add Balance"}),r.jsx("button",{onClick:H,disabled:G,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Za={getAll:async(n={})=>(await se.get("/card-users",{params:n})).data,getById:async n=>(await se.get(`/card-users/${n}`)).data,create:async n=>(await se.post("/card-users",n)).data,update:async(n,a)=>(await se.put(`/card-users/${n}`,a)).data,delete:async n=>(await se.delete(`/card-users/${n}`)).data,getCardsByUser:async n=>(await se.get(`/card-users/user/${n}/cards`)).data,getUsersByCard:async n=>(await se.get(`/card-users/card/${n}/users`)).data},el=()=>{const n=new Date,a=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0");return`${String(n.getDate()).padStart(2,"0")}/${o}/${a}`},fm=n=>{if(!n)return"";if(n.includes("T")){const u=new Date(n);if(!isNaN(u.getTime())){const m=u.getFullYear(),f=String(u.getMonth()+1).padStart(2,"0");return`${String(u.getDate()).padStart(2,"0")}/${f}/${m}`}}const[a,o,c]=n.split("-");return a&&o&&c?`${c}/${o}/${a}`:""},R0=n=>{if(!n)return"";const[a,o,c]=n.split("/");return`${c}-${o.padStart(2,"0")}-${a.padStart(2,"0")}`},P0=({isOpen:n,onClose:a,onSubmit:o,editData:c,isLoading:u})=>{const[m,f]=g.useState({card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),[h,x]=g.useState({}),[w,y]=g.useState([]),[b,R]=g.useState([]),[I,k]=g.useState(!1);g.useEffect(()=>{n&&(f(c?{card_id:c.card_id?.toString()||"",user_id:c.user_id?.toString()||"",assigned_date:c.assigned_date?fm(c.assigned_date):el(),is_primary:!!c.is_primary}:{card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),x({}))},[n,c]),g.useEffect(()=>{n&&j()},[n]);const j=async()=>{k(!0);try{const z=await Fs.getActive({limit:100}),ie=z?.data?.cards||z?.data||[];y(Array.isArray(ie)?ie:[]);const B=(await tf.getForDropdown())?.data||[];R(Array.isArray(B)?B:[])}catch(z){console.error("Error loading options:",z),y([]),R([])}finally{k(!1)}},C=z=>{const{name:ie,value:$,type:B,checked:X}=z.target;if(ie==="assigned_date"){let Q=$.replace(/[^0-9/]/g,"");if(Q.length>=2&&Q.charAt(2)!=="/"&&(Q.length===2?Q=Q+"/":Q.length>2&&Q.length<=4&&(Q=Q.substring(0,2)+"/"+Q.substring(2))),Q.length>=5&&Q.charAt(5)!=="/"){if(Q.length===5)Q=Q+"/";else if(Q.length>5){const ae=Q.split("/");ae.length===2&&(Q=ae[0]+"/"+ae[1].substring(0,2)+"/"+ae[1].substring(2))}}Q.length<=10&&f(ae=>({...ae,[ie]:Q}))}else f(Q=>({...Q,[ie]:B==="checkbox"?X:$}));h[ie]&&x(Q=>({...Q,[ie]:""}))},W=()=>{const z={};return m.card_id||(z.card_id="Card is required"),m.user_id||(z.user_id="User is required"),m.assigned_date||(z.assigned_date="Assigned date is required"),x(z),Object.keys(z).length===0},_=async z=>{if(z.preventDefault(),!!W())try{const ie={...m,card_id:parseInt(m.card_id),user_id:parseInt(m.user_id),assigned_date:R0(m.assigned_date)};await o(ie)}catch(ie){console.error("Form submission error:",ie),x({submit:ie.response?.data?.message||ie.message||"An error occurred while saving"})}},T=z=>{z&&f(ie=>({...ie,assigned_date:fm(z)}))},L=()=>{f({card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),x({}),a()};return n?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:L}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:r.jsx("button",{onClick:L,className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.jsx(Ct,{className:"h-6 w-6"})})}),r.jsx("div",{className:"sm:flex sm:items-start",children:r.jsxs("div",{className:"w-full mt-3 text-center sm:mt-0 sm:text-left",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:c?"Edit Card Assignment":"Assign Card to User"}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[h.submit&&r.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-sm text-red-700",children:h.submit})]})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),r.jsxs("select",{id:"card_id",name:"card_id",value:m.card_id,onChange:C,disabled:I||u,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${h.card_id?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select a card..."}),w.map(z=>r.jsxs("option",{value:z.id,children:[z.card_name," (",z.card_number_last4,")"]},z.id))]}),h.card_id&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.card_id})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"User *"}),r.jsxs("select",{id:"user_id",name:"user_id",value:m.user_id,onChange:C,disabled:I||u,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${h.user_id?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select a user..."}),b.map(z=>r.jsx("option",{value:z.id,children:z.username},z.id))]}),h.user_id&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.user_id})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"assigned_date",className:"block text-sm font-medium text-gray-700",children:"Assigned Date * (DD/MM/YYYY)"}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("assigned_date_picker").showPicker&&document.getElementById("assigned_date_picker").showPicker()}),r.jsx("input",{type:"text",id:"assigned_date",name:"assigned_date",value:m.assigned_date,onChange:C,placeholder:"DD/MM/YYYY",disabled:u,required:!0,className:`pl-10 mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${h.assigned_date?"border-red-300":"border-gray-300"}`}),r.jsx("input",{type:"date",id:"assigned_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:z=>T(z.target.value),tabIndex:-1})]}),h.assigned_date&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:h.assigned_date})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"is_primary",name:"is_primary",checked:m.is_primary,onChange:C,disabled:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-700",children:"Set as primary card for this user"})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:L,disabled:u,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:u||I,className:"px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Saving...":c?"Update Assignment":"Create Assignment"})]})]})]})})]})]})}):null},T0=()=>{const[n,a]=g.useState([]),[o,c]=g.useState(!0),[u,m]=g.useState(null),[f,h]=g.useState(""),[x,w]=g.useState(1),[y]=g.useState(10),[b,R]=g.useState(!1),[I,k]=g.useState(null),[j,C]=g.useState(!1),[W,_]=g.useState(!1),[T,L]=g.useState(null),[z,ie]=g.useState(!1),$=async()=>{try{c(!0),m(null);const M={search:f,page:x,limit:y},S=await Za.getAll(M);if(S.success){console.log(" Card Users API Response:",S),console.log(" Response data structure:",Object.keys(S.data||{}));const V=S.data?.assignments||S.data?.cardUsers||S.data||[];console.log(" Extracted assignments:",V.length),V.length>0&&console.log(" First assignment sample:",{id:V[0].id,card_name:V[0].card_name,username:V[0].username,card_id:V[0].card_id,user_id:V[0].user_id}),a(V)}else m(S.message||"Failed to fetch card assignments")}catch(M){m(M.response?.data?.message||"Failed to fetch card assignments"),console.error("Error fetching assignments:",M)}finally{c(!1)}};g.useEffect(()=>{const M=setTimeout(()=>{w(1),$()},300);return()=>clearTimeout(M)},[f]),g.useEffect(()=>{$()},[x]),g.useEffect(()=>{$()},[]);const B=(M=null)=>{k(M),R(!0)},X=()=>{R(!1),k(null)},Q=async M=>{try{if(C(!0),I){const S=await Za.update(I.id||I._id,M);if(!S.success)throw new Error(S.message||"Update failed")}else{const S=await Za.create(M);if(!S.success)throw new Error(S.message||"Creation failed")}X(),await $()}catch(S){throw console.error("Form submission error:",S),S}finally{C(!1)}},ae=M=>{L(M),_(!0)},_e=async()=>{if(T)try{ie(!0);const M=await Za.delete(T.id||T._id);if(!M.success)throw new Error(M.message||"Delete failed");_(!1),L(null),await $()}catch(M){console.error("Delete error:",M);const S=M.response?.data?.message||M.message||"Failed to delete assignment";m(S),_(!1),L(null)}finally{ie(!1)}},G=()=>{_(!1),L(null)},Ne=g.useMemo(()=>f.trim()?n.filter(M=>M.card_name?.toLowerCase().includes(f.toLowerCase())||M.username?.toLowerCase().includes(f.toLowerCase())||M.card_number_last4?.includes(f)):n,[n,f]),he=Ne.length,q=Math.ceil(he/y),ce=(x-1)*y,Y=ce+y,oe=Ne.slice(ce,Y);return r.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(il,{className:"h-7 w-7 text-blue-600"}),"Card User Assignments"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>$(),disabled:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]}),r.jsxs("button",{onClick:()=>B(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Hr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:f,onChange:M=>h(M.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search assignments..."})]})}),u&&r.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-sm text-red-700",children:u})]})}),o?r.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:r.jsx("div",{className:"px-4 py-5 sm:p-6",children:r.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((M,S)=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},S))})})}):oe.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx(il,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),r.jsx("p",{className:"text-gray-500 mb-4",children:f?"Try adjusting your search terms.":"Get started by assigning a card to a user."}),!f&&r.jsxs("button",{onClick:()=>B(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Card"]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ai,{className:"h-4 w-4 mr-1"}),"User"]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(zr,{className:"h-4 w-4 mr-1"}),"Assigned Date"]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(M=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ls,{className:"h-4 w-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.card_name||"Unknown Card"}),r.jsxs("div",{className:"text-sm text-gray-500",children:["",M.card_number_last4||"****"]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ai,{className:"h-4 w-4 text-gray-400 mr-2"}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.username||"Unknown User"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.assigned_date?Br(M.assigned_date):"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.is_primary?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.is_primary?r.jsxs(r.Fragment,{children:[r.jsx(Bn,{className:"w-3 h-3 mr-1"})," Primary"]}):r.jsxs(r.Fragment,{children:[r.jsx(gl,{className:"w-3 h-3 mr-1"})," Secondary"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>B(M),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[r.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs("button",{onClick:()=>ae(M),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[r.jsx(cs,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},M.id||M._id))})]})}),q>1&&r.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",ce+1," to ",Math.min(Y,he)," of ",he," results"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:x<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",x," of ",q]}),r.jsx("button",{onClick:()=>w(M=>Math.min(q,M+1)),disabled:x>=q,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),r.jsx(P0,{isOpen:b,onClose:X,onSubmit:Q,editData:I,isLoading:j}),W&&T&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx(tt,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Assignment"}),r.jsx("div",{className:"mt-2",children:r.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the assignment of "',T.card_name,'" to "',T.username,'"? This action cannot be undone.']})})]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{onClick:_e,disabled:z,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:z?"Deleting...":"Delete"}),r.jsx("button",{onClick:G,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Te={buildDaily:async n=>{try{return(await se.post(`/reports/build?date=${n}`)).data}catch(a){throw console.error("Error building daily reports:",a),a}},buildRange:async(n,a)=>{try{return(await se.post(`/reports/build-range?from=${n}&to=${a}`)).data}catch(o){throw console.error("Error building range reports:",o),o}},rebuildCampaignRange:async(n,a,o)=>{try{return(await se.post(`/reports/rebuild-campaign?campaign_id=${n}&from=${a}&to=${o}`)).data}catch(c){throw console.error("Error rebuilding campaign reports:",c),c}},generateReport:async(n={})=>{try{const a=new URLSearchParams,o={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};return Object.entries(n).forEach(([u,m])=>{if(m!=null&&m!==""){const f=o[u]||u;a.append(f,m)}}),(await se.get(`/reports/generate?${a.toString()}`)).data}catch(a){throw console.error("Error generating report:",a),a}},getAll:async(n={})=>{try{const a=new URLSearchParams,{page:o=1,limit:c=10,...u}=n;return a.append("page",o),a.append("limit",c),Object.entries(u).forEach(([f,h])=>{h!=null&&h!==""&&a.append(f,h)}),(await se.get(`/reports?${a.toString()}`)).data}catch(a){throw console.error("Error fetching reports:",a),a}},getById:async n=>{try{return(await se.get(`/reports/${n}`)).data}catch(a){throw console.error("Error fetching report by ID:",a),a}},create:async n=>{try{return(await se.post("/reports",n)).data}catch(a){throw console.error("Error creating report:",a),a}},update:async(n,a)=>{try{return(await se.put(`/reports/${n}`,a)).data}catch(o){throw console.error("Error updating report:",o),o}},delete:async n=>{try{return(await se.delete(`/reports/${n}`)).data}catch(a){throw console.error("Error deleting report:",a),a}},getFilterOptions:async()=>{try{return(await se.get("/reports/filters")).data}catch(n){throw console.error("Error fetching filter options:",n),n}},getDashboardStats:async()=>{try{return(await se.get("/reports/dashboard")).data}catch(n){throw console.error("Error fetching dashboard stats:",n),n}},formatCurrency:n=>n==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(n),formatNumber:n=>n==null?"0":new Intl.NumberFormat("en-IN").format(n),calculateROI:(n,a)=>!a||a===0?0:(n-a)/a*100,calculateCostPerResult:(n,a)=>!a||a===0?0:n/a,getDateRangePresets:()=>{const n=new Date,a=new Date(n);a.setDate(a.getDate()-1);const o=new Date(n);o.setDate(o.getDate()-7);const c=new Date(n);c.setMonth(c.getMonth()-1);const u=new Date(n);u.setMonth(u.getMonth()-3);const m=f=>f.toISOString().split("T")[0];return{today:{label:"Today",from:m(n),to:m(n)},yesterday:{label:"Yesterday",from:m(a),to:m(a)},lastWeek:{label:"Last 7 Days",from:m(o),to:m(n)},lastMonth:{label:"Last 30 Days",from:m(c),to:m(n)},lastThreeMonths:{label:"Last 3 Months",from:m(u),to:m(n)}}}},pm=n=>{if(!n)return"";const a=new Date(n),o=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear();return`${o}/${c}/${u}`},A0=({isOpen:n,onClose:a,onReportGenerated:o})=>{const[c,u]=g.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[m,f]=g.useState(!1),[h,x]=g.useState({campaigns:[],brands:[],dateRange:{}}),[w,y]=g.useState("");g.useEffect(()=>{if(n){b();const _=new Date,T=new Date;T.setDate(_.getDate()-7),u({dateFrom:T.toISOString().split("T")[0],dateTo:_.toISOString().split("T")[0],campaignId:"",brand:""}),y("")}},[n]);const b=async()=>{try{const _=await Te.getFilterOptions();_.success&&x(_.data)}catch(_){console.error("Error loading filter options:",_)}},R=(_,T)=>{u(L=>({...L,[_]:T})),y("")},I=()=>{if(!c.dateFrom||!c.dateTo)return y("Please select both start and end dates"),!1;const _=new Date(c.dateFrom),T=new Date(c.dateTo);if(_>T)return y("Start date cannot be after end date"),!1;const L=Math.abs(T-_);return Math.ceil(L/(1e3*60*60*24))>365?(y("Date range cannot exceed 1 year"),!1):!0},k=(_,T)=>{y("Excel export is currently disabled due to missing dependency.")},j=async()=>{if(I()){f(!0),y("");try{const _=await Te.generateReport(c);_.success?_.data.message==="No data found for the selected date range"?y("No data found for the selected date range. Please try different filters."):k(_.data,c):y(_.message||"Failed to generate report")}catch(_){console.error("Error generating report:",_),y("Failed to generate report. Please try again.")}finally{f(!1)}}},C=()=>{m||a()},W=_=>{const L=Te.getDateRangePresets()[_];L&&u(z=>({...z,dateFrom:L.from,dateTo:L.to}))};return n?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:C}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[r.jsxs("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Jt,{className:"h-6 w-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Report"})]}),r.jsx("button",{onClick:C,disabled:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ct,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Generate and download an Excel report based on your selected filters"})]}),r.jsxs("div",{className:"bg-white px-6 py-4 space-y-6",children:[w&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-sm text-red-600",children:w})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[r.jsx(zr,{className:"h-4 w-4 mr-2 text-blue-600"}),"Date Range *"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Te.getDateRangePresets()).map(([_,T])=>r.jsx("button",{onClick:()=>W(_),disabled:m,className:"px-3 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:T.label},_))}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),r.jsx("input",{type:"date",value:c.dateFrom,onChange:_=>R("dateFrom",_.target.value),disabled:m,max:h.dateRange?.latest,min:h.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),r.jsx("input",{type:"date",value:c.dateTo,onChange:_=>R("dateTo",_.target.value),disabled:m,max:h.dateRange?.latest,min:c.dateFrom||h.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[r.jsx(Vi,{className:"h-4 w-4 mr-2 text-blue-600"}),"Filters (Optional)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Campaign"}),r.jsxs("select",{value:c.campaignId,onChange:_=>R("campaignId",_.target.value),disabled:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Campaigns"}),h.campaigns?.map(_=>r.jsxs("option",{value:_.id,children:[_.name," ",_.brand&&`(${_.brand})`]},_.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Brand"}),r.jsxs("select",{value:c.brand,onChange:_=>R("brand",_.target.value),disabled:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Brands"}),h.brands?.map(_=>r.jsx("option",{value:_,children:_},_))]})]})]})]}),h.dateRange?.earliest&&h.dateRange?.latest&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Available Data:"})," ",pm(h.dateRange.earliest)," to ",pm(h.dateRange.latest)]}),r.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[r.jsx("strong",{children:"Campaigns:"})," ",h.campaigns?.length||0," campaigns available"]}),r.jsxs("p",{className:"text-sm text-blue-600",children:[r.jsx("strong",{children:"Brands:"})," ",h.brands?.length||0," brands available"]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{type:"button",onClick:j,disabled:m||!c.dateFrom||!c.dateTo,className:"w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:m?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(e0,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),r.jsx("button",{type:"button",onClick:C,disabled:m,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}):null},yi=n=>{if(!n)return"";const a=new Date(n),o=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear();return`${o}/${c}/${u}`},D0=()=>{const[n,a]=g.useState(null),[o,c]=g.useState(!1),[u,m]=g.useState(null),[f,h]=g.useState(null),[x,w]=g.useState(!1),[y,b]=g.useState("summary");g.useEffect(()=>{R()},[]);const R=async()=>{try{c(!0);const _=await Te.getDashboardStats();_.success&&h(_.data)}catch(_){console.error("Error loading dashboard stats:",_),m("Failed to load dashboard statistics")}finally{c(!1)}},I=_=>{a(_),m(null)},k=()=>{a(null),m(null)},j=({title:_,value:T,icon:L,change:z,changeType:ie,description:$})=>r.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:_}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T}),$&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:$}),z&&r.jsxs("p",{className:`text-sm flex items-center mt-2 ${ie==="positive"?"text-green-600":"text-red-600"}`,children:[ie==="positive"?r.jsx(Ti,{className:"h-4 w-4 mr-1"}):r.jsx(l0,{className:"h-4 w-4 mr-1"}),z]})]}),r.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:r.jsx(L,{className:"h-6 w-6 text-blue-600"})})]})}),C=({title:_,data:T})=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:_}),r.jsx("div",{className:"space-y-4",children:Object.entries(T).map(([L,z])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 capitalize",children:L.replace(/([A-Z])/g," $1").toLowerCase()}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:typeof z=="number"&&L.includes("spent")?Te.formatCurrency(z):typeof z=="number"?Te.formatNumber(z):z})]},L))})]}),W=({reports:_})=>r.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:r.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Detailed Report Data"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Results"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost/Result"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((T,L)=>{const z=T.cost_per_result||Te.calculateCostPerResult(T.spent,T.total_results);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.campaign_name||`Campaign ${T.campaign_id}`}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:yi(T.report_date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te.formatCurrency(T.spent)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te.formatNumber(T.facebook_result||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Te.formatNumber(T.zoho_result||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Te.formatNumber(T.total_results||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z===0?"bg-gray-100 text-gray-800":z<5?"bg-green-100 text-green-800":z<10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:z===0?"N/A":Te.formatCurrency(z)})})]},L)})})]})})]})});return o&&!n&&!f?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),r.jsx("p",{className:"text-gray-600",children:"Generate and analyze comprehensive advertising reports"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Generate Report"]}),n&&r.jsx("button",{onClick:k,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Report"})]})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-sm text-red-600",children:u})]})}),n?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(j,{title:"Total Spent",value:Te.formatCurrency(n.summary?.totalSpent||0),icon:Dn,description:`From ${yi(n.filters?.dateFrom)} to ${yi(n.filters?.dateTo)}`}),r.jsx(j,{title:"Total Results",value:Te.formatNumber(n.summary?.totalResults||0),icon:Ur,description:`Facebook: ${Te.formatNumber(n.summary?.totalFacebookResults||0)} | Zoho: ${Te.formatNumber(n.summary?.totalZohoResults||0)}`}),r.jsx(j,{title:"Campaigns",value:Te.formatNumber(n.summary?.totalCampaigns||0),icon:is,description:`${n.summary?.totalRecords||0} total records`}),r.jsx(j,{title:"Avg Cost/Result",value:Te.formatCurrency(n.summary?.avgCostPerResult||0),icon:om})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>b("summary"),className:`px-3 py-2 rounded-md text-sm font-medium ${y==="summary"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Summary"}),r.jsx("button",{onClick:()=>b("detailed"),className:`px-3 py-2 rounded-md text-sm font-medium ${y==="detailed"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Detailed Data"}),r.jsx("button",{onClick:()=>b("breakdown"),className:`px-3 py-2 rounded-md text-sm font-medium ${y==="breakdown"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Breakdown"})]})}),y==="summary"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(C,{title:"Summary Statistics",data:n.summary||{}}),n.filters&&r.jsx(C,{title:"Applied Filters",data:n.filters})]}),y==="detailed"&&n.reports&&r.jsx(W,{reports:n.reports}),y==="breakdown"&&r.jsxs("div",{className:"space-y-6",children:[n.brandBreakdown&&n.brandBreakdown.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(s0,{className:"h-5 w-5 mr-2 text-blue-600"}),"Brand Breakdown"]}),r.jsx("div",{className:"space-y-3",children:n.brandBreakdown.map((_,T)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[r.jsx("span",{className:"font-medium text-gray-900",children:_.brand||"Unknown Brand"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Te.formatCurrency(_.total_spent)," spent"]}),r.jsxs("div",{className:"text-xs text-gray-500",children:[Te.formatNumber(_.total_results)," results | ",_.campaigns_count," campaigns"]})]})]},T))})]}),n.campaignBreakdown&&n.campaignBreakdown.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(Jt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Campaign Breakdown"]}),r.jsx("div",{className:"space-y-3",children:n.campaignBreakdown.map((_,T)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:_.campaign_name}),r.jsx("div",{className:"text-xs text-gray-500",children:_.brand})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:Te.formatCurrency(_.total_spent)}),r.jsxs("div",{className:"text-xs text-gray-500",children:[Te.formatNumber(_.total_results)," results"]})]})]},T))})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[f&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(j,{title:"Current Month",value:Te.formatCurrency(f.currentMonth?.totalSpent||0),icon:Dn,description:`${f.currentMonth?.month} overview`}),r.jsx(j,{title:"Monthly Campaigns",value:Te.formatNumber(f.currentMonth?.campaignsCount||0),icon:Ur,description:"Active this month"}),r.jsx(j,{title:"Monthly Results",value:Te.formatNumber(f.currentMonth?.totalLeads||0),icon:om}),r.jsx(j,{title:"Avg Cost/Lead",value:Te.formatCurrency(f.currentMonth?.avgCostPerLead||0),icon:Ti})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[r.jsx(Mn,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate Your First Report"}),r.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Generate Report" to create comprehensive reports from your campaign data with custom date ranges and filters.'}),r.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Get Started"]})]})]}),r.jsx(A0,{isOpen:x,onClose:()=>w(!1),onReportGenerated:I})]})},I0=()=>r.jsx("div",{className:"p-6",children:r.jsx(D0,{})}),F0=n=>n?new Date(n).toLocaleDateString("en-GB"):"",L0=(n,a)=>{if(!n||!a)return"";const o=new Date(n),c=new Date(a),u=Math.abs(c-o),m=Math.ceil(u/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<=7?`Last ${m} days`:m<=30?`Last ${Math.ceil(m/7)} weeks`:`${Math.ceil(m/30)} months`},M0=()=>{const[n,a]=g.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[o,c]=g.useState([]),[u,m]=g.useState(null),[f,h]=g.useState(!1),[x,w]=g.useState(""),[y,b]=g.useState({campaigns:[],brands:[],dateRange:{}}),[R,I]=g.useState(!0),[k,j]=g.useState(1),[C]=g.useState(15);g.useEffect(()=>{_(),W()},[]),g.useEffect(()=>{n.dateFrom&&n.dateTo&&T()},[n]);const W=()=>{const G=new Date,Ne=new Date;Ne.setDate(G.getDate()-30),a(he=>({...he,dateFrom:Ne.toISOString().split("T")[0],dateTo:G.toISOString().split("T")[0]}))},_=async()=>{try{const G=await Te.getFilterOptions();G.success&&b(G.data)}catch(G){console.error("Error loading filter options:",G)}},T=async()=>{if(!(!n.dateFrom||!n.dateTo)){h(!0),w("");try{const G=await Te.generateReport(n);if(G.success){const{reports:Ne=[],summary:he=null}=G.data||{};c(Ne),m(he),j(1),console.log(" Reports loaded:",{totalRecords:Ne.length,summary:he,filters:n})}else w(G.message||"Failed to load reports"),c([]),m(null)}catch(G){console.error("Error loading reports:",G),w("Failed to load reports. Please try again."),c([]),m(null)}finally{h(!1)}}},L=(G,Ne)=>{a(he=>({...he,[G]:Ne})),w("")},z=G=>{const he=Te.getDateRangePresets()[G];he&&a(q=>({...q,dateFrom:he.from,dateTo:he.to}))},ie=()=>{a({dateFrom:"",dateTo:"",campaignId:"",brand:""}),c([]),m(null),j(1)},$=Math.ceil(o.length/C),B=(k-1)*C,X=B+C,Q=o.slice(B,X),ae=G=>{j(Math.max(1,Math.min(G,$)))},_e=G=>!G||G===0?"bg-gray-100 text-gray-800":G<5?"bg-green-100 text-green-800":G<10?"bg-yellow-100 text-yellow-800":G<20?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";return r.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[r.jsx(Mn,{className:"h-8 w-8 mr-3 text-blue-600"}),"Campaign Reports"]}),r.jsxs("p",{className:"text-gray-600 mt-2",children:["Live data from campaign performance ",o.length>0&&r.jsxs("span",{className:"ml-1",children:[L0(n.dateFrom,n.dateTo)," ",o.length," records"]})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs("button",{onClick:T,disabled:f||!n.dateFrom||!n.dateTo,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(lr,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),f?"Loading...":"Refresh Data"]})})]}),u&&r.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ti,{className:"h-5 w-5 text-blue-600 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Campaigns"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:u.totalCampaigns||0})]})]})}),r.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Jt,{className:"h-5 w-5 text-green-600 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Leads"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:Te.formatNumber(u.totalResults||0)})]})]})}),r.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-5 w-5 bg-purple-600 rounded mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Total Spent"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Te.formatCurrency(u.totalSpent||0)})]})]})}),r.jsx("div",{className:"bg-orange-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-5 w-5 bg-orange-600 rounded-full mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Avg Cost/Lead"}),r.jsx("p",{className:"text-2xl font-bold text-orange-900",children:u.avgCostPerResult>0?Te.formatCurrency(u.avgCostPerResult):"N/A"})]})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("button",{onClick:()=>I(!R),className:"flex items-center text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:[r.jsx(Vi,{className:"h-5 w-5 mr-2 text-blue-600"}),"Filters & Date Range",r.jsx("svg",{className:`h-4 w-4 ml-2 transition-transform ${R?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),R&&r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[r.jsx(zr,{className:"h-4 w-4 inline mr-1"}),"Date Range (Required)"]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(Te.getDateRangePresets()).map(([G,Ne])=>r.jsx("button",{onClick:()=>z(G),disabled:f,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors disabled:opacity-50",children:Ne.label},G))}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"From Date"}),r.jsx("input",{type:"date",value:n.dateFrom,onChange:G=>L("dateFrom",G.target.value),disabled:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"To Date"}),r.jsx("input",{type:"date",value:n.dateTo,onChange:G=>L("dateTo",G.target.value),disabled:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Campaign"}),r.jsxs("select",{value:n.campaignId,onChange:G=>L("campaignId",G.target.value),disabled:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[r.jsx("option",{value:"",children:"All Campaigns"}),y.campaigns?.map(G=>r.jsxs("option",{value:G.id,children:[G.name," ",G.brand&&`(${G.brand})`]},G.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),r.jsxs("select",{value:n.brand,onChange:G=>L("brand",G.target.value),disabled:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[r.jsx("option",{value:"",children:"All Brands"}),y.brands?.map(G=>r.jsx("option",{value:G,children:G},G))]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:ie,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear all filters"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[o.length," record",o.length!==1?"s":""," found"]})]})]})]}),x&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-3"}),r.jsx("p",{className:"text-sm text-red-700",children:x})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Performance Data"}),o.length>0&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",B+1," to ",Math.min(X,o.length)," of ",o.length," entries"]})]})}),f?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading campaign data..."})]})}):o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Jt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No data available"}),r.jsx("p",{className:"text-gray-600 max-w-sm mx-auto",children:n.dateFrom&&n.dateTo?"No records found for the selected date range and filters. Try adjusting your selection.":"Please select a date range to view campaign reports."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Campaign"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Brand"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total Leads"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Amount Spent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Cost/Lead"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.map((G,Ne)=>{const he=G.cost_per_lead?parseFloat(G.cost_per_lead):0;return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.campaign_name||`Campaign ${G.campaign_id}`})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:G.brand||"Unknown"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F0(G.report_date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Te.formatNumber(G.facebook_result||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Te.formatNumber(G.zoho_result||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600",children:Te.formatNumber(G.leads||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Te.formatCurrency(G.spent||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${_e(he)}`,children:he>0?Te.formatCurrency(he):"N/A"})})]},`${G.id}-${Ne}`)})})]})}),$>1&&r.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",r.jsx("span",{className:"font-medium",children:B+1})," to"," ",r.jsx("span",{className:"font-medium",children:Math.min(X,o.length)})," of"," ",r.jsx("span",{className:"font-medium",children:o.length})," results"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>ae(k-1),disabled:k===1,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,$)},(G,Ne)=>{let he;return $<=5||k<=3?he=Ne+1:k>=$-2?he=$-4+Ne:he=k-2+Ne,r.jsx("button",{onClick:()=>ae(he),className:`px-3 py-1 text-sm rounded transition-colors ${k===he?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:he},he)})}),r.jsx("button",{onClick:()=>ae(k+1),disabled:k===$,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})]})},O0=()=>r.jsx("div",{className:"p-6",children:r.jsx(M0,{})}),U0=()=>{const[n,a]=g.useState(null),[o,c]=g.useState(!0),[u,m]=g.useState(null);g.useEffect(()=>{f()},[]);const f=async()=>{c(!0),m(null);try{const h=localStorage.getItem("authToken")||localStorage.getItem("access_token"),x={"Content-Type":"application/json",...h&&{Authorization:`Bearer ${h}`}},y=await(await fetch("/api/analytics/dashboard",{headers:x})).json();y.success?a(y.data):m(y.message||"Failed to load data")}catch(h){console.error("Error loading data:",h),m("Failed to connect to analytics API")}finally{c(!1)}};return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[r.jsx(Jt,{className:"mr-3"}),"Report Analytics Dashboard"]}),r.jsx("p",{className:"text-blue-100 mt-1",children:"Campaign performance insights and data visualization"})]}),r.jsxs("button",{onClick:f,disabled:o,className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium transition-colors bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50",children:[r.jsx(lr,{className:`h-4 w-4 ${o?"animate-spin":""}`}),r.jsx("span",{children:o?"Loading...":"Refresh"})]})]})}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(tt,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-red-600",children:u}),r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Make sure you're logged in and have proper permissions."})]})]})}),n&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Campaigns"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.overview?.campaignsCount||0})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Leads"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.overview?.totalLeads||0})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Spent"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",(n.overview?.totalSpent||0).toLocaleString()]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-orange-500",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Avg Cost/Lead"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",(n.overview?.avgCostPerLead||0).toFixed(2)]})]})})]}),n.topCampaigns&&n.topCampaigns.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:r.jsx("h3",{className:"text-lg font-medium text-white",children:"Top Campaigns"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Brand"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leads"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Spent"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.topCampaigns.map((h,x)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.campaign_name||`Campaign ${h.campaign_id}`}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.brand||"Unknown"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.total_leads||0}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(h.total_spent||0).toLocaleString()]})]},x))})]})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Debug Information:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"text-xs",children:[r.jsx("strong",{children:"Current Month:"})," ",n.overview?.currentMonth||"N/A"]}),r.jsxs("div",{className:"text-xs",children:[r.jsx("strong",{children:"User Role:"})," ",n.userRole||"N/A"]}),r.jsxs("div",{className:"text-xs",children:[r.jsx("strong",{children:"Data Scope:"})," ",n.dataScope||"N/A"]}),r.jsxs("div",{className:"text-xs",children:[r.jsx("strong",{children:"Top Campaigns Count:"})," ",n.topCampaigns?.length||0]}),r.jsxs("div",{className:"text-xs",children:[r.jsx("strong",{children:"Brand Performance Count:"})," ",n.brandPerformance?.length||0]})]}),r.jsxs("details",{className:"mt-4",children:[r.jsx("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Full Debug Data (Click to expand)"}),r.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(n,null,2)})]})]})]})]})},$0=()=>r.jsx("div",{className:"p-6",children:r.jsx(U0,{})}),z0=()=>localStorage.getItem("access_token")||localStorage.getItem("authToken")?r.jsx(wi,{to:"/dashboard",replace:!0}):r.jsx(wi,{to:"/login",replace:!0});function B0(){return r.jsx(qx,{children:r.jsx(ig,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(tg,{children:[r.jsx(ct,{path:"/login",element:r.jsx(c0,{})}),r.jsx(ct,{path:"/",element:r.jsx(z0,{})}),r.jsx(ct,{path:"/dashboard",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(p0,{})})})})}),r.jsx(ct,{path:"/user-management",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(f0,{})})})})}),r.jsx(ct,{path:"/role-management",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(v0,{})})})})}),r.jsx(ct,{path:"/brands",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(S0,{})})})})}),r.jsx(ct,{path:"/campaign-types",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(b0,{})})})})}),r.jsx(ct,{path:"/cards",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(E0,{})})})})}),r.jsx(ct,{path:"/card-users",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(T0,{})})})})}),r.jsx(ct,{path:"/campaigns",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(N0,{})})})})}),r.jsx(ct,{path:"/campaigns/:id",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(C0,{})})})})}),r.jsx(ct,{path:"/reports-table",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(O0,{})})})})}),r.jsx(ct,{path:"/reports",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx(I0,{})})})})}),r.jsx(ct,{path:"/report-analytics",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx($0,{})})})})}),r.jsx(ct,{path:"/analytics",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx("div",{className:"p-6",children:"Analytics Module (Coming Soon)"})})})})}),r.jsx(ct,{path:"/settings",element:r.jsx(St,{children:r.jsx(Nt,{children:r.jsx(kt,{children:r.jsx("div",{className:"p-6",children:"Settings Module (Coming Soon)"})})})})})]})})})}ch.createRoot(document.getElementById("root")).render(r.jsx(Ii.StrictMode,{children:r.jsx(B0,{})}));
