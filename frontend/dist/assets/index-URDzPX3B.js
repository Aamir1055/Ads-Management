function Mb(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function Wg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wd={exports:{}},Bi={},jd={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function Ob(){if(Im)return De;Im=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,v={};function _(P,L,fe){this.props=P,this.context=L,this.refs=v,this.updater=fe||w}_.prototype.isReactComponent={},_.prototype.setState=function(P,L){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,L,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function C(){}C.prototype=_.prototype;function S(P,L,fe){this.props=P,this.context=L,this.refs=v,this.updater=fe||w}var E=S.prototype=new C;E.constructor=S,j(E,_.prototype),E.isPureReactComponent=!0;var R=Array.isArray,A=Object.prototype.hasOwnProperty,F={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function z(P,L,fe){var me,I={},J=null,ue=null;if(L!=null)for(me in L.ref!==void 0&&(ue=L.ref),L.key!==void 0&&(J=""+L.key),L)A.call(L,me)&&!H.hasOwnProperty(me)&&(I[me]=L[me]);var ge=arguments.length-2;if(ge===1)I.children=fe;else if(1<ge){for(var Le=Array(ge),ot=0;ot<ge;ot++)Le[ot]=arguments[ot+2];I.children=Le}if(P&&P.defaultProps)for(me in ge=P.defaultProps,ge)I[me]===void 0&&(I[me]=ge[me]);return{$$typeof:t,type:P,key:J,ref:ue,props:I,_owner:F.current}}function K(P,L){return{$$typeof:t,type:P.type,key:L,ref:P.ref,props:P.props,_owner:P._owner}}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function M(P){var L={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return L[fe]})}var X=/\/+/g;function $(P,L){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):L.toString(36)}function re(P,L,fe,me,I){var J=typeof P;(J==="undefined"||J==="boolean")&&(P=null);var ue=!1;if(P===null)ue=!0;else switch(J){case"string":case"number":ue=!0;break;case"object":switch(P.$$typeof){case t:case e:ue=!0}}if(ue)return ue=P,I=I(ue),P=me===""?"."+$(ue,0):me,R(I)?(fe="",P!=null&&(fe=P.replace(X,"$&/")+"/"),re(I,L,fe,"",function(ot){return ot})):I!=null&&(W(I)&&(I=K(I,fe+(!I.key||ue&&ue.key===I.key?"":(""+I.key).replace(X,"$&/")+"/")+P)),L.push(I)),1;if(ue=0,me=me===""?".":me+":",R(P))for(var ge=0;ge<P.length;ge++){J=P[ge];var Le=me+$(J,ge);ue+=re(J,L,fe,Le,I)}else if(Le=b(P),typeof Le=="function")for(P=Le.call(P),ge=0;!(J=P.next()).done;)J=J.value,Le=me+$(J,ge++),ue+=re(J,L,fe,Le,I);else if(J==="object")throw L=String(P),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return ue}function le(P,L,fe){if(P==null)return P;var me=[],I=0;return re(P,me,"","",function(J){return L.call(fe,J,I++)}),me}function V(P){if(P._status===-1){var L=P._result;L=L(),L.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=L)}if(P._status===1)return P._result.default;throw P._result}var Z={current:null},G={transition:null},se={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:G,ReactCurrentOwner:F};function te(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:le,forEach:function(P,L,fe){le(P,function(){L.apply(this,arguments)},fe)},count:function(P){var L=0;return le(P,function(){L++}),L},toArray:function(P){return le(P,function(L){return L})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},De.Component=_,De.Fragment=s,De.Profiler=i,De.PureComponent=S,De.StrictMode=n,De.Suspense=h,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,De.act=te,De.cloneElement=function(P,L,fe){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var me=j({},P.props),I=P.key,J=P.ref,ue=P._owner;if(L!=null){if(L.ref!==void 0&&(J=L.ref,ue=F.current),L.key!==void 0&&(I=""+L.key),P.type&&P.type.defaultProps)var ge=P.type.defaultProps;for(Le in L)A.call(L,Le)&&!H.hasOwnProperty(Le)&&(me[Le]=L[Le]===void 0&&ge!==void 0?ge[Le]:L[Le])}var Le=arguments.length-2;if(Le===1)me.children=fe;else if(1<Le){ge=Array(Le);for(var ot=0;ot<Le;ot++)ge[ot]=arguments[ot+2];me.children=ge}return{$$typeof:t,type:P.type,key:I,ref:J,props:me,_owner:ue}},De.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},De.createElement=z,De.createFactory=function(P){var L=z.bind(null,P);return L.type=P,L},De.createRef=function(){return{current:null}},De.forwardRef=function(P){return{$$typeof:u,render:P}},De.isValidElement=W,De.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:V}},De.memo=function(P,L){return{$$typeof:m,type:P,compare:L===void 0?null:L}},De.startTransition=function(P){var L=G.transition;G.transition={};try{P()}finally{G.transition=L}},De.unstable_act=te,De.useCallback=function(P,L){return Z.current.useCallback(P,L)},De.useContext=function(P){return Z.current.useContext(P)},De.useDebugValue=function(){},De.useDeferredValue=function(P){return Z.current.useDeferredValue(P)},De.useEffect=function(P,L){return Z.current.useEffect(P,L)},De.useId=function(){return Z.current.useId()},De.useImperativeHandle=function(P,L,fe){return Z.current.useImperativeHandle(P,L,fe)},De.useInsertionEffect=function(P,L){return Z.current.useInsertionEffect(P,L)},De.useLayoutEffect=function(P,L){return Z.current.useLayoutEffect(P,L)},De.useMemo=function(P,L){return Z.current.useMemo(P,L)},De.useReducer=function(P,L,fe){return Z.current.useReducer(P,L,fe)},De.useRef=function(P){return Z.current.useRef(P)},De.useState=function(P){return Z.current.useState(P)},De.useSyncExternalStore=function(P,L,fe){return Z.current.useSyncExternalStore(P,L,fe)},De.useTransition=function(){return Z.current.useTransition()},De.version="18.3.1",De}var zm;function vu(){return zm||(zm=1,jd.exports=Ob()),jd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function Lb(){if(Bm)return Bi;Bm=1;var t=vu(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var p,x={},b=null,w=null;m!==void 0&&(b=""+m),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!l.hasOwnProperty(p)&&(x[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)x[p]===void 0&&(x[p]=h[p]);return{$$typeof:e,type:u,key:b,ref:w,props:x,_owner:i.current}}return Bi.Fragment=s,Bi.jsx=c,Bi.jsxs=c,Bi}var $m;function Fb(){return $m||($m=1,wd.exports=Lb()),wd.exports}var o=Fb(),N=vu();const pa=Wg(N),Ib=Mb({__proto__:null,default:pa},[N]);var Ao={},_d={exports:{}},zt={},Nd={exports:{}},kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function zb(){return Um||(Um=1,(function(t){function e(G,se){var te=G.length;G.push(se);e:for(;0<te;){var P=te-1>>>1,L=G[P];if(0<i(L,se))G[P]=se,G[te]=L,te=P;else break e}}function s(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var se=G[0],te=G.pop();if(te!==se){G[0]=te;e:for(var P=0,L=G.length,fe=L>>>1;P<fe;){var me=2*(P+1)-1,I=G[me],J=me+1,ue=G[J];if(0>i(I,te))J<L&&0>i(ue,I)?(G[P]=ue,G[J]=te,P=J):(G[P]=I,G[me]=te,P=me);else if(J<L&&0>i(ue,te))G[P]=ue,G[J]=te,P=J;else break e}}return se}function i(G,se){var te=G.sortIndex-se.sortIndex;return te!==0?te:G.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],m=[],p=1,x=null,b=3,w=!1,j=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var se=s(m);se!==null;){if(se.callback===null)n(m);else if(se.startTime<=G)n(m),se.sortIndex=se.expirationTime,e(h,se);else break;se=s(m)}}function R(G){if(v=!1,E(G),!j)if(s(h)!==null)j=!0,V(A);else{var se=s(m);se!==null&&Z(R,se.startTime-G)}}function A(G,se){j=!1,v&&(v=!1,C(z),z=-1),w=!0;var te=b;try{for(E(se),x=s(h);x!==null&&(!(x.expirationTime>se)||G&&!M());){var P=x.callback;if(typeof P=="function"){x.callback=null,b=x.priorityLevel;var L=P(x.expirationTime<=se);se=t.unstable_now(),typeof L=="function"?x.callback=L:x===s(h)&&n(h),E(se)}else n(h);x=s(h)}if(x!==null)var fe=!0;else{var me=s(m);me!==null&&Z(R,me.startTime-se),fe=!1}return fe}finally{x=null,b=te,w=!1}}var F=!1,H=null,z=-1,K=5,W=-1;function M(){return!(t.unstable_now()-W<K)}function X(){if(H!==null){var G=t.unstable_now();W=G;var se=!0;try{se=H(!0,G)}finally{se?$():(F=!1,H=null)}}else F=!1}var $;if(typeof S=="function")$=function(){S(X)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,le=re.port2;re.port1.onmessage=X,$=function(){le.postMessage(null)}}else $=function(){_(X,0)};function V(G){H=G,F||(F=!0,$())}function Z(G,se){z=_(function(){G(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){j||w||(j=!0,V(A))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(G){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var te=b;b=se;try{return G()}finally{b=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=b;b=G;try{return se()}finally{b=te}},t.unstable_scheduleCallback=function(G,se,te){var P=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?P+te:P):te=P,G){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=te+L,G={id:p++,callback:se,priorityLevel:G,startTime:te,expirationTime:L,sortIndex:-1},te>P?(G.sortIndex=te,e(m,G),s(h)===null&&G===s(m)&&(v?(C(z),z=-1):v=!0,Z(R,te-P))):(G.sortIndex=L,e(h,G),j||w||(j=!0,V(A))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var se=b;return function(){var te=b;b=se;try{return G.apply(this,arguments)}finally{b=te}}}})(kd)),kd}var Hm;function Bb(){return Hm||(Hm=1,Nd.exports=zb()),Nd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function $b(){if(Vm)return zt;Vm=1;var t=vu(),e=Bb();function s(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(r,a){c(r,a),c(r+"Capture",a)}function c(r,a){for(i[r]=a,r=0;r<a.length;r++)n.add(a[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},x={};function b(r){return h.call(x,r)?!0:h.call(p,r)?!1:m.test(r)?x[r]=!0:(p[r]=!0,!1)}function w(r,a,d,f){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,a,d,f){if(a===null||typeof a>"u"||w(r,a,d,f))return!0;if(f)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v(r,a,d,f,g,y,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=d,this.propertyName=r,this.type=a,this.sanitizeURL=y,this.removeEmptyString=k}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){_[r]=new v(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];_[a]=new v(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){_[r]=new v(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){_[r]=new v(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){_[r]=new v(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){_[r]=new v(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){_[r]=new v(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){_[r]=new v(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){_[r]=new v(r,5,!1,r.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function S(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(C,S);_[a]=new v(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(C,S);_[a]=new v(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(C,S);_[a]=new v(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){_[r]=new v(r,1,!1,r.toLowerCase(),null,!1,!1)}),_.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){_[r]=new v(r,1,!1,r.toLowerCase(),null,!0,!0)});function E(r,a,d,f){var g=_.hasOwnProperty(a)?_[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(j(a,d,g,f)&&(d=null),f||g===null?b(a)&&(d===null?r.removeAttribute(a):r.setAttribute(a,""+d)):g.mustUseProperty?r[g.propertyName]=d===null?g.type===3?!1:"":d:(a=g.attributeName,f=g.attributeNamespace,d===null?r.removeAttribute(a):(g=g.type,d=g===3||g===4&&d===!0?"":""+d,f?r.setAttributeNS(f,a,d):r.setAttribute(a,d))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),M=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),G=Symbol.iterator;function se(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,P;function L(r){if(P===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);P=a&&a[1]||""}return`
`+P+r}var fe=!1;function me(r,a){if(!r||fe)return"";fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(r,[],a)}else{try{a.call()}catch(Y){f=Y}r.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}r()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),y=f.stack.split(`
`),k=g.length-1,T=y.length-1;1<=k&&0<=T&&g[k]!==y[T];)T--;for(;1<=k&&0<=T;k--,T--)if(g[k]!==y[T]){if(k!==1||T!==1)do if(k--,T--,0>T||g[k]!==y[T]){var D=`
`+g[k].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=k&&0<=T);break}}}finally{fe=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?L(r):""}function I(r){switch(r.tag){case 5:return L(r.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return r=me(r.type,!1),r;case 11:return r=me(r.type.render,!1),r;case 1:return r=me(r.type,!0),r;default:return""}}function J(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case H:return"Fragment";case F:return"Portal";case K:return"Profiler";case z:return"StrictMode";case $:return"Suspense";case re:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case M:return(r.displayName||"Context")+".Consumer";case W:return(r._context.displayName||"Context")+".Provider";case X:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case le:return a=r.displayName||null,a!==null?a:J(r.type)||"Memo";case V:a=r._payload,r=r._init;try{return J(r(a))}catch{}}return null}function ue(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(a);case 8:return a===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ge(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Le(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ot(r){var a=Le(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),f=""+r[a];if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function ye(r){r._valueTracker||(r._valueTracker=ot(r))}function ze(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var d=a.getValue(),f="";return r&&(f=Le(r)?r.checked?"true":"false":r.value),r=f,r!==d?(a.setValue(r),!0):!1}function ss(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function q(r,a){var d=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function be(r,a){var d=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;d=ge(a.value!=null?a.value:d),r._wrapperState={initialChecked:f,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Te(r,a){a=a.checked,a!=null&&E(r,"checked",a,!1)}function Ne(r,a){Te(r,a);var d=ge(a.value),f=a.type;if(d!=null)f==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?je(r,a.type,d):a.hasOwnProperty("defaultValue")&&je(r,a.type,ge(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Pe(r,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,d||a===r.value||(r.value=a),r.defaultValue=a}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function je(r,a,d){(a!=="number"||ss(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var Ue=Array.isArray;function dt(r,a,d,f){if(r=r.options,a){a={};for(var g=0;g<d.length;g++)a["$"+d[g]]=!0;for(d=0;d<r.length;d++)g=a.hasOwnProperty("$"+r[d].value),r[d].selected!==g&&(r[d].selected=g),g&&f&&(r[d].defaultSelected=!0)}else{for(d=""+ge(d),a=null,g=0;g<r.length;g++){if(r[g].value===d){r[g].selected=!0,f&&(r[g].defaultSelected=!0);return}a!==null||r[g].disabled||(a=r[g])}a!==null&&(a.selected=!0)}}function ee(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(s(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function oe(r,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(s(92));if(Ue(d)){if(1<d.length)throw Error(s(93));d=d[0]}a=d}a==null&&(a=""),d=a}r._wrapperState={initialValue:ge(d)}}function he(r,a){var d=ge(a.value),f=ge(a.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),a.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),f!=null&&(r.defaultValue=""+f)}function qe(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function Fs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?Fs(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ns,Ns=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,f,g){MSApp.execUnsafeLocalFunction(function(){return r(a,d,f,g)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(ns=ns||document.createElement("div"),ns.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ns.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function fs(r,a){if(a){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=a;return}}r.textContent=a}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I0=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(r){I0.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),ni[a]=ni[r]})});function Ju(r,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||ni.hasOwnProperty(r)&&ni[r]?(""+a).trim():a+"px"}function Zu(r,a){r=r.style;for(var d in a)if(a.hasOwnProperty(d)){var f=d.indexOf("--")===0,g=Ju(d,a[d],f);d==="float"&&(d="cssFloat"),f?r.setProperty(d,g):r[d]=g}}var z0=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dl(r,a){if(a){if(z0[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(s(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(s(61))}if(a.style!=null&&typeof a.style!="object")throw Error(s(62))}}function Ml(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ol=null;function Ll(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Fl=null,fr=null,mr=null;function eh(r){if(r=ki(r)){if(typeof Fl!="function")throw Error(s(280));var a=r.stateNode;a&&(a=Va(a),Fl(r.stateNode,r.type,a))}}function th(r){fr?mr?mr.push(r):mr=[r]:fr=r}function sh(){if(fr){var r=fr,a=mr;if(mr=fr=null,eh(r),a)for(r=0;r<a.length;r++)eh(a[r])}}function nh(r,a){return r(a)}function rh(){}var Il=!1;function ih(r,a,d){if(Il)return r(a,d);Il=!0;try{return nh(r,a,d)}finally{Il=!1,(fr!==null||mr!==null)&&(rh(),sh())}}function ri(r,a){var d=r.stateNode;if(d===null)return null;var f=Va(d);if(f===null)return null;d=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(s(231,a,typeof d));return d}var zl=!1;if(u)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){zl=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{zl=!1}function B0(r,a,d,f,g,y,k,T,D){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(d,Y)}catch(ie){this.onError(ie)}}var ai=!1,ja=null,_a=!1,Bl=null,$0={onError:function(r){ai=!0,ja=r}};function U0(r,a,d,f,g,y,k,T,D){ai=!1,ja=null,B0.apply($0,arguments)}function H0(r,a,d,f,g,y,k,T,D){if(U0.apply(this,arguments),ai){if(ai){var Y=ja;ai=!1,ja=null}else throw Error(s(198));_a||(_a=!0,Bl=Y)}}function Ln(r){var a=r,d=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(d=a.return),r=a.return;while(r)}return a.tag===3?d:null}function ah(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function oh(r){if(Ln(r)!==r)throw Error(s(188))}function V0(r){var a=r.alternate;if(!a){if(a=Ln(r),a===null)throw Error(s(188));return a!==r?null:r}for(var d=r,f=a;;){var g=d.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===d)return oh(g),r;if(y===f)return oh(g),a;y=y.sibling}throw Error(s(188))}if(d.return!==f.return)d=g,f=y;else{for(var k=!1,T=g.child;T;){if(T===d){k=!0,d=g,f=y;break}if(T===f){k=!0,f=g,d=y;break}T=T.sibling}if(!k){for(T=y.child;T;){if(T===d){k=!0,d=y,f=g;break}if(T===f){k=!0,f=y,d=g;break}T=T.sibling}if(!k)throw Error(s(189))}}if(d.alternate!==f)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?r:a}function lh(r){return r=V0(r),r!==null?ch(r):null}function ch(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=ch(r);if(a!==null)return a;r=r.sibling}return null}var dh=e.unstable_scheduleCallback,uh=e.unstable_cancelCallback,W0=e.unstable_shouldYield,q0=e.unstable_requestPaint,nt=e.unstable_now,Y0=e.unstable_getCurrentPriorityLevel,$l=e.unstable_ImmediatePriority,hh=e.unstable_UserBlockingPriority,Na=e.unstable_NormalPriority,K0=e.unstable_LowPriority,fh=e.unstable_IdlePriority,ka=null,ks=null;function X0(r){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(ka,r,void 0,(r.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:J0,Q0=Math.log,G0=Math.LN2;function J0(r){return r>>>=0,r===0?32:31-(Q0(r)/G0|0)|0}var Sa=64,Ca=4194304;function oi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ea(r,a){var d=r.pendingLanes;if(d===0)return 0;var f=0,g=r.suspendedLanes,y=r.pingedLanes,k=d&268435455;if(k!==0){var T=k&~g;T!==0?f=oi(T):(y&=k,y!==0&&(f=oi(y)))}else k=d&~g,k!==0?f=oi(k):y!==0&&(f=oi(y));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,y=a&-a,g>=y||g===16&&(y&4194240)!==0))return a;if((f&4)!==0&&(f|=d&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=f;0<a;)d=31-ms(a),g=1<<d,f|=r[d],a&=~g;return f}function Z0(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ey(r,a){for(var d=r.suspendedLanes,f=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes;0<y;){var k=31-ms(y),T=1<<k,D=g[k];D===-1?((T&d)===0||(T&f)!==0)&&(g[k]=Z0(T,a)):D<=a&&(r.expiredLanes|=T),y&=~T}}function Ul(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function mh(){var r=Sa;return Sa<<=1,(Sa&4194240)===0&&(Sa=64),r}function Hl(r){for(var a=[],d=0;31>d;d++)a.push(r);return a}function li(r,a,d){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-ms(a),r[a]=d}function ty(r,a){var d=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<d;){var g=31-ms(d),y=1<<g;a[g]=0,f[g]=-1,r[g]=-1,d&=~y}}function Vl(r,a){var d=r.entangledLanes|=a;for(r=r.entanglements;d;){var f=31-ms(d),g=1<<f;g&a|r[f]&a&&(r[f]|=a),d&=~g}}var He=0;function ph(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var gh,Wl,xh,yh,bh,ql=!1,Pa=[],nn=null,rn=null,an=null,ci=new Map,di=new Map,on=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vh(r,a){switch(r){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":ci.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(a.pointerId)}}function ui(r,a,d,f,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:d,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},a!==null&&(a=ki(a),a!==null&&Wl(a)),r):(r.eventSystemFlags|=f,a=r.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),r)}function ny(r,a,d,f,g){switch(a){case"focusin":return nn=ui(nn,r,a,d,f,g),!0;case"dragenter":return rn=ui(rn,r,a,d,f,g),!0;case"mouseover":return an=ui(an,r,a,d,f,g),!0;case"pointerover":var y=g.pointerId;return ci.set(y,ui(ci.get(y)||null,r,a,d,f,g)),!0;case"gotpointercapture":return y=g.pointerId,di.set(y,ui(di.get(y)||null,r,a,d,f,g)),!0}return!1}function wh(r){var a=Fn(r.target);if(a!==null){var d=Ln(a);if(d!==null){if(a=d.tag,a===13){if(a=ah(d),a!==null){r.blockedOn=a,bh(r.priority,function(){xh(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Aa(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var d=Kl(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var f=new d.constructor(d.type,d);Ol=f,d.target.dispatchEvent(f),Ol=null}else return a=ki(d),a!==null&&Wl(a),r.blockedOn=d,!1;a.shift()}return!0}function jh(r,a,d){Aa(r)&&d.delete(a)}function ry(){ql=!1,nn!==null&&Aa(nn)&&(nn=null),rn!==null&&Aa(rn)&&(rn=null),an!==null&&Aa(an)&&(an=null),ci.forEach(jh),di.forEach(jh)}function hi(r,a){r.blockedOn===a&&(r.blockedOn=null,ql||(ql=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ry)))}function fi(r){function a(g){return hi(g,r)}if(0<Pa.length){hi(Pa[0],r);for(var d=1;d<Pa.length;d++){var f=Pa[d];f.blockedOn===r&&(f.blockedOn=null)}}for(nn!==null&&hi(nn,r),rn!==null&&hi(rn,r),an!==null&&hi(an,r),ci.forEach(a),di.forEach(a),d=0;d<on.length;d++)f=on[d],f.blockedOn===r&&(f.blockedOn=null);for(;0<on.length&&(d=on[0],d.blockedOn===null);)wh(d),d.blockedOn===null&&on.shift()}var pr=R.ReactCurrentBatchConfig,Ta=!0;function iy(r,a,d,f){var g=He,y=pr.transition;pr.transition=null;try{He=1,Yl(r,a,d,f)}finally{He=g,pr.transition=y}}function ay(r,a,d,f){var g=He,y=pr.transition;pr.transition=null;try{He=4,Yl(r,a,d,f)}finally{He=g,pr.transition=y}}function Yl(r,a,d,f){if(Ta){var g=Kl(r,a,d,f);if(g===null)uc(r,a,f,Ra,d),vh(r,f);else if(ny(g,r,a,d,f))f.stopPropagation();else if(vh(r,f),a&4&&-1<sy.indexOf(r)){for(;g!==null;){var y=ki(g);if(y!==null&&gh(y),y=Kl(r,a,d,f),y===null&&uc(r,a,f,Ra,d),y===g)break;g=y}g!==null&&f.stopPropagation()}else uc(r,a,f,null,d)}}var Ra=null;function Kl(r,a,d,f){if(Ra=null,r=Ll(f),r=Fn(r),r!==null)if(a=Ln(r),a===null)r=null;else if(d=a.tag,d===13){if(r=ah(a),r!==null)return r;r=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Ra=r,null}function _h(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y0()){case $l:return 1;case hh:return 4;case Na:case K0:return 16;case fh:return 536870912;default:return 16}default:return 16}}var ln=null,Xl=null,Da=null;function Nh(){if(Da)return Da;var r,a=Xl,d=a.length,f,g="value"in ln?ln.value:ln.textContent,y=g.length;for(r=0;r<d&&a[r]===g[r];r++);var k=d-r;for(f=1;f<=k&&a[d-f]===g[y-f];f++);return Da=g.slice(r,1<f?1-f:void 0)}function Ma(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Oa(){return!0}function kh(){return!1}function Qt(r){function a(d,f,g,y,k){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(d=r[T],this[T]=d?d(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Oa:kh,this.isPropagationStopped=kh,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),a}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=Qt(gr),mi=te({},gr,{view:0,detail:0}),oy=Qt(mi),Gl,Jl,pi,La=te({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==pi&&(pi&&r.type==="mousemove"?(Gl=r.screenX-pi.screenX,Jl=r.screenY-pi.screenY):Jl=Gl=0,pi=r),Gl)},movementY:function(r){return"movementY"in r?r.movementY:Jl}}),Sh=Qt(La),ly=te({},La,{dataTransfer:0}),cy=Qt(ly),dy=te({},mi,{relatedTarget:0}),Zl=Qt(dy),uy=te({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Qt(uy),fy=te({},gr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),my=Qt(fy),py=te({},gr,{data:0}),Ch=Qt(py),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=yy[r])?!!a[r]:!1}function ec(){return by}var vy=te({},mi,{key:function(r){if(r.key){var a=gy[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ma(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(r){return r.type==="keypress"?Ma(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ma(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wy=Qt(vy),jy=te({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=Qt(jy),_y=te({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),Ny=Qt(_y),ky=te({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sy=Qt(ky),Cy=te({},La,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ey=Qt(Cy),Py=[9,13,27,32],tc=u&&"CompositionEvent"in window,gi=null;u&&"documentMode"in document&&(gi=document.documentMode);var Ay=u&&"TextEvent"in window&&!gi,Ph=u&&(!tc||gi&&8<gi&&11>=gi),Ah=" ",Th=!1;function Rh(r,a){switch(r){case"keyup":return Py.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var xr=!1;function Ty(r,a){switch(r){case"compositionend":return Dh(a);case"keypress":return a.which!==32?null:(Th=!0,Ah);case"textInput":return r=a.data,r===Ah&&Th?null:r;default:return null}}function Ry(r,a){if(xr)return r==="compositionend"||!tc&&Rh(r,a)?(r=Nh(),Da=Xl=ln=null,xr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ph&&a.locale!=="ko"?null:a.data;default:return null}}var Dy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Dy[r.type]:a==="textarea"}function Oh(r,a,d,f){th(f),a=$a(a,"onChange"),0<a.length&&(d=new Ql("onChange","change",null,d,f),r.push({event:d,listeners:a}))}var xi=null,yi=null;function My(r){Zh(r,0)}function Fa(r){var a=jr(r);if(ze(a))return r}function Oy(r,a){if(r==="change")return a}var Lh=!1;if(u){var sc;if(u){var nc="oninput"in document;if(!nc){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),nc=typeof Fh.oninput=="function"}sc=nc}else sc=!1;Lh=sc&&(!document.documentMode||9<document.documentMode)}function Ih(){xi&&(xi.detachEvent("onpropertychange",zh),yi=xi=null)}function zh(r){if(r.propertyName==="value"&&Fa(yi)){var a=[];Oh(a,yi,r,Ll(r)),ih(My,a)}}function Ly(r,a,d){r==="focusin"?(Ih(),xi=a,yi=d,xi.attachEvent("onpropertychange",zh)):r==="focusout"&&Ih()}function Fy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Fa(yi)}function Iy(r,a){if(r==="click")return Fa(a)}function zy(r,a){if(r==="input"||r==="change")return Fa(a)}function By(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var ps=typeof Object.is=="function"?Object.is:By;function bi(r,a){if(ps(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var d=Object.keys(r),f=Object.keys(a);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!h.call(a,g)||!ps(r[g],a[g]))return!1}return!0}function Bh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $h(r,a){var d=Bh(r);r=0;for(var f;d;){if(d.nodeType===3){if(f=r+d.textContent.length,r<=a&&f>=a)return{node:d,offset:a-r};r=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Bh(d)}}function Uh(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Uh(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Hh(){for(var r=window,a=ss();a instanceof r.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)r=a.contentWindow;else break;a=ss(r.document)}return a}function rc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function $y(r){var a=Hh(),d=r.focusedElem,f=r.selectionRange;if(a!==d&&d&&d.ownerDocument&&Uh(d.ownerDocument.documentElement,d)){if(f!==null&&rc(d)){if(a=f.start,r=f.end,r===void 0&&(r=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(r,d.value.length);else if(r=(a=d.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var g=d.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!r.extend&&y>f&&(g=f,f=y,y=g),g=$h(d,y);var k=$h(d,f);g&&k&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),r.removeAllRanges(),y>f?(r.addRange(a),r.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),r.addRange(a)))}}for(a=[],r=d;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)r=a[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Uy=u&&"documentMode"in document&&11>=document.documentMode,yr=null,ic=null,vi=null,ac=!1;function Vh(r,a,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ac||yr==null||yr!==ss(f)||(f=yr,"selectionStart"in f&&rc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),vi&&bi(vi,f)||(vi=f,f=$a(ic,"onSelect"),0<f.length&&(a=new Ql("onSelect","select",null,a,d),r.push({event:a,listeners:f}),a.target=yr)))}function Ia(r,a){var d={};return d[r.toLowerCase()]=a.toLowerCase(),d["Webkit"+r]="webkit"+a,d["Moz"+r]="moz"+a,d}var br={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionend:Ia("Transition","TransitionEnd")},oc={},Wh={};u&&(Wh=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function za(r){if(oc[r])return oc[r];if(!br[r])return r;var a=br[r],d;for(d in a)if(a.hasOwnProperty(d)&&d in Wh)return oc[r]=a[d];return r}var qh=za("animationend"),Yh=za("animationiteration"),Kh=za("animationstart"),Xh=za("transitionend"),Qh=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(r,a){Qh.set(r,a),l(a,[r])}for(var lc=0;lc<Gh.length;lc++){var cc=Gh[lc],Hy=cc.toLowerCase(),Vy=cc[0].toUpperCase()+cc.slice(1);cn(Hy,"on"+Vy)}cn(qh,"onAnimationEnd"),cn(Yh,"onAnimationIteration"),cn(Kh,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(Xh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wy=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Jh(r,a,d){var f=r.type||"unknown-event";r.currentTarget=d,H0(f,a,void 0,r),r.currentTarget=null}function Zh(r,a){a=(a&4)!==0;for(var d=0;d<r.length;d++){var f=r[d],g=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var k=f.length-1;0<=k;k--){var T=f[k],D=T.instance,Y=T.currentTarget;if(T=T.listener,D!==y&&g.isPropagationStopped())break e;Jh(g,T,Y),y=D}else for(k=0;k<f.length;k++){if(T=f[k],D=T.instance,Y=T.currentTarget,T=T.listener,D!==y&&g.isPropagationStopped())break e;Jh(g,T,Y),y=D}}}if(_a)throw r=Bl,_a=!1,Bl=null,r}function Ke(r,a){var d=a[xc];d===void 0&&(d=a[xc]=new Set);var f=r+"__bubble";d.has(f)||(ef(a,r,2,!1),d.add(f))}function dc(r,a,d){var f=0;a&&(f|=4),ef(d,r,f,a)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function ji(r){if(!r[Ba]){r[Ba]=!0,n.forEach(function(d){d!=="selectionchange"&&(Wy.has(d)||dc(d,!1,r),dc(d,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Ba]||(a[Ba]=!0,dc("selectionchange",!1,a))}}function ef(r,a,d,f){switch(_h(a)){case 1:var g=iy;break;case 4:g=ay;break;default:g=Yl}d=g.bind(null,a,d,r),g=void 0,!zl||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?r.addEventListener(a,d,{capture:!0,passive:g}):r.addEventListener(a,d,!0):g!==void 0?r.addEventListener(a,d,{passive:g}):r.addEventListener(a,d,!1)}function uc(r,a,d,f,g){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var T=f.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(k===4)for(k=f.return;k!==null;){var D=k.tag;if((D===3||D===4)&&(D=k.stateNode.containerInfo,D===g||D.nodeType===8&&D.parentNode===g))return;k=k.return}for(;T!==null;){if(k=Fn(T),k===null)return;if(D=k.tag,D===5||D===6){f=y=k;continue e}T=T.parentNode}}f=f.return}ih(function(){var Y=y,ie=Ll(d),ce=[];e:{var ne=Qh.get(r);if(ne!==void 0){var pe=Ql,ve=r;switch(r){case"keypress":if(Ma(d)===0)break e;case"keydown":case"keyup":pe=wy;break;case"focusin":ve="focus",pe=Zl;break;case"focusout":ve="blur",pe=Zl;break;case"beforeblur":case"afterblur":pe=Zl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Ny;break;case qh:case Yh:case Kh:pe=hy;break;case Xh:pe=Sy;break;case"scroll":pe=oy;break;case"wheel":pe=Ey;break;case"copy":case"cut":case"paste":pe=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Eh}var we=(a&4)!==0,rt=!we&&r==="scroll",B=we?ne!==null?ne+"Capture":null:ne;we=[];for(var O=Y,U;O!==null;){U=O;var de=U.stateNode;if(U.tag===5&&de!==null&&(U=de,B!==null&&(de=ri(O,B),de!=null&&we.push(_i(O,de,U)))),rt)break;O=O.return}0<we.length&&(ne=new pe(ne,ve,null,d,ie),ce.push({event:ne,listeners:we}))}}if((a&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",pe=r==="mouseout"||r==="pointerout",ne&&d!==Ol&&(ve=d.relatedTarget||d.fromElement)&&(Fn(ve)||ve[Is]))break e;if((pe||ne)&&(ne=ie.window===ie?ie:(ne=ie.ownerDocument)?ne.defaultView||ne.parentWindow:window,pe?(ve=d.relatedTarget||d.toElement,pe=Y,ve=ve?Fn(ve):null,ve!==null&&(rt=Ln(ve),ve!==rt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=Y),pe!==ve)){if(we=Sh,de="onMouseLeave",B="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(we=Eh,de="onPointerLeave",B="onPointerEnter",O="pointer"),rt=pe==null?ne:jr(pe),U=ve==null?ne:jr(ve),ne=new we(de,O+"leave",pe,d,ie),ne.target=rt,ne.relatedTarget=U,de=null,Fn(ie)===Y&&(we=new we(B,O+"enter",ve,d,ie),we.target=U,we.relatedTarget=rt,de=we),rt=de,pe&&ve)t:{for(we=pe,B=ve,O=0,U=we;U;U=vr(U))O++;for(U=0,de=B;de;de=vr(de))U++;for(;0<O-U;)we=vr(we),O--;for(;0<U-O;)B=vr(B),U--;for(;O--;){if(we===B||B!==null&&we===B.alternate)break t;we=vr(we),B=vr(B)}we=null}else we=null;pe!==null&&tf(ce,ne,pe,we,!1),ve!==null&&rt!==null&&tf(ce,rt,ve,we,!0)}}e:{if(ne=Y?jr(Y):window,pe=ne.nodeName&&ne.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ne.type==="file")var _e=Oy;else if(Mh(ne))if(Lh)_e=zy;else{_e=Fy;var ke=Ly}else(pe=ne.nodeName)&&pe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(_e=Iy);if(_e&&(_e=_e(r,Y))){Oh(ce,_e,d,ie);break e}ke&&ke(r,ne,Y),r==="focusout"&&(ke=ne._wrapperState)&&ke.controlled&&ne.type==="number"&&je(ne,"number",ne.value)}switch(ke=Y?jr(Y):window,r){case"focusin":(Mh(ke)||ke.contentEditable==="true")&&(yr=ke,ic=Y,vi=null);break;case"focusout":vi=ic=yr=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,Vh(ce,d,ie);break;case"selectionchange":if(Uy)break;case"keydown":case"keyup":Vh(ce,d,ie)}var Se;if(tc)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else xr?Rh(r,d)&&(Ee="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ph&&d.locale!=="ko"&&(xr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&xr&&(Se=Nh()):(ln=ie,Xl="value"in ln?ln.value:ln.textContent,xr=!0)),ke=$a(Y,Ee),0<ke.length&&(Ee=new Ch(Ee,r,null,d,ie),ce.push({event:Ee,listeners:ke}),Se?Ee.data=Se:(Se=Dh(d),Se!==null&&(Ee.data=Se)))),(Se=Ay?Ty(r,d):Ry(r,d))&&(Y=$a(Y,"onBeforeInput"),0<Y.length&&(ie=new Ch("onBeforeInput","beforeinput",null,d,ie),ce.push({event:ie,listeners:Y}),ie.data=Se))}Zh(ce,a)})}function _i(r,a,d){return{instance:r,listener:a,currentTarget:d}}function $a(r,a){for(var d=a+"Capture",f=[];r!==null;){var g=r,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=ri(r,d),y!=null&&f.unshift(_i(r,y,g)),y=ri(r,a),y!=null&&f.push(_i(r,y,g))),r=r.return}return f}function vr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function tf(r,a,d,f,g){for(var y=a._reactName,k=[];d!==null&&d!==f;){var T=d,D=T.alternate,Y=T.stateNode;if(D!==null&&D===f)break;T.tag===5&&Y!==null&&(T=Y,g?(D=ri(d,y),D!=null&&k.unshift(_i(d,D,T))):g||(D=ri(d,y),D!=null&&k.push(_i(d,D,T)))),d=d.return}k.length!==0&&r.push({event:a,listeners:k})}var qy=/\r\n?/g,Yy=/\u0000|\uFFFD/g;function sf(r){return(typeof r=="string"?r:""+r).replace(qy,`
`).replace(Yy,"")}function Ua(r,a,d){if(a=sf(a),sf(r)!==a&&d)throw Error(s(425))}function Ha(){}var hc=null,fc=null;function mc(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,Ky=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Xy=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(r){return nf.resolve(null).then(r).catch(Qy)}:pc;function Qy(r){setTimeout(function(){throw r})}function gc(r,a){var d=a,f=0;do{var g=d.nextSibling;if(r.removeChild(d),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(f===0){r.removeChild(g),fi(a);return}f--}else d!=="$"&&d!=="$?"&&d!=="$!"||f++;d=g}while(d);fi(a)}function dn(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function rf(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return r;a--}else d==="/$"&&a++}r=r.previousSibling}return null}var wr=Math.random().toString(36).slice(2),Ss="__reactFiber$"+wr,Ni="__reactProps$"+wr,Is="__reactContainer$"+wr,xc="__reactEvents$"+wr,Gy="__reactListeners$"+wr,Jy="__reactHandles$"+wr;function Fn(r){var a=r[Ss];if(a)return a;for(var d=r.parentNode;d;){if(a=d[Is]||d[Ss]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(r=rf(r);r!==null;){if(d=r[Ss])return d;r=rf(r)}return a}r=d,d=r.parentNode}return null}function ki(r){return r=r[Ss]||r[Is],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function jr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function Va(r){return r[Ni]||null}var yc=[],_r=-1;function un(r){return{current:r}}function Xe(r){0>_r||(r.current=yc[_r],yc[_r]=null,_r--)}function Ye(r,a){_r++,yc[_r]=r.current,r.current=a}var hn={},_t=un(hn),Mt=un(!1),In=hn;function Nr(r,a){var d=r.type.contextTypes;if(!d)return hn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in d)g[y]=a[y];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=g),g}function Ot(r){return r=r.childContextTypes,r!=null}function Wa(){Xe(Mt),Xe(_t)}function af(r,a,d){if(_t.current!==hn)throw Error(s(168));Ye(_t,a),Ye(Mt,d)}function of(r,a,d){var f=r.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(s(108,ue(r)||"Unknown",g));return te({},d,f)}function qa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hn,In=_t.current,Ye(_t,r),Ye(Mt,Mt.current),!0}function lf(r,a,d){var f=r.stateNode;if(!f)throw Error(s(169));d?(r=of(r,a,In),f.__reactInternalMemoizedMergedChildContext=r,Xe(Mt),Xe(_t),Ye(_t,r)):Xe(Mt),Ye(Mt,d)}var zs=null,Ya=!1,bc=!1;function cf(r){zs===null?zs=[r]:zs.push(r)}function Zy(r){Ya=!0,cf(r)}function fn(){if(!bc&&zs!==null){bc=!0;var r=0,a=He;try{var d=zs;for(He=1;r<d.length;r++){var f=d[r];do f=f(!0);while(f!==null)}zs=null,Ya=!1}catch(g){throw zs!==null&&(zs=zs.slice(r+1)),dh($l,fn),g}finally{He=a,bc=!1}}return null}var kr=[],Sr=0,Ka=null,Xa=0,rs=[],is=0,zn=null,Bs=1,$s="";function Bn(r,a){kr[Sr++]=Xa,kr[Sr++]=Ka,Ka=r,Xa=a}function df(r,a,d){rs[is++]=Bs,rs[is++]=$s,rs[is++]=zn,zn=r;var f=Bs;r=$s;var g=32-ms(f)-1;f&=~(1<<g),d+=1;var y=32-ms(a)+g;if(30<y){var k=g-g%5;y=(f&(1<<k)-1).toString(32),f>>=k,g-=k,Bs=1<<32-ms(a)+g|d<<g|f,$s=y+r}else Bs=1<<y|d<<g|f,$s=r}function vc(r){r.return!==null&&(Bn(r,1),df(r,1,0))}function wc(r){for(;r===Ka;)Ka=kr[--Sr],kr[Sr]=null,Xa=kr[--Sr],kr[Sr]=null;for(;r===zn;)zn=rs[--is],rs[is]=null,$s=rs[--is],rs[is]=null,Bs=rs[--is],rs[is]=null}var Gt=null,Jt=null,Ge=!1,gs=null;function uf(r,a){var d=cs(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=r,a=r.deletions,a===null?(r.deletions=[d],r.flags|=16):a.push(d)}function hf(r,a){switch(r.tag){case 5:var d=r.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,Gt=r,Jt=dn(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,Gt=r,Jt=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=zn!==null?{id:Bs,overflow:$s}:null,r.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=cs(18,null,null,0),d.stateNode=a,d.return=r,r.child=d,Gt=r,Jt=null,!0):!1;default:return!1}}function jc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function _c(r){if(Ge){var a=Jt;if(a){var d=a;if(!hf(r,a)){if(jc(r))throw Error(s(418));a=dn(d.nextSibling);var f=Gt;a&&hf(r,a)?uf(f,d):(r.flags=r.flags&-4097|2,Ge=!1,Gt=r)}}else{if(jc(r))throw Error(s(418));r.flags=r.flags&-4097|2,Ge=!1,Gt=r}}}function ff(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Gt=r}function Qa(r){if(r!==Gt)return!1;if(!Ge)return ff(r),Ge=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!mc(r.type,r.memoizedProps)),a&&(a=Jt)){if(jc(r))throw mf(),Error(s(418));for(;a;)uf(r,a),a=dn(a.nextSibling)}if(ff(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(a===0){Jt=dn(r.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}r=r.nextSibling}Jt=null}}else Jt=Gt?dn(r.stateNode.nextSibling):null;return!0}function mf(){for(var r=Jt;r;)r=dn(r.nextSibling)}function Cr(){Jt=Gt=null,Ge=!1}function Nc(r){gs===null?gs=[r]:gs.push(r)}var eb=R.ReactCurrentBatchConfig;function Si(r,a,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var f=d.stateNode}if(!f)throw Error(s(147,r));var g=f,y=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(k){var T=g.refs;k===null?delete T[y]:T[y]=k},a._stringRef=y,a)}if(typeof r!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,r))}return r}function Ga(r,a){throw r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function pf(r){var a=r._init;return a(r._payload)}function gf(r){function a(B,O){if(r){var U=B.deletions;U===null?(B.deletions=[O],B.flags|=16):U.push(O)}}function d(B,O){if(!r)return null;for(;O!==null;)a(B,O),O=O.sibling;return null}function f(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function g(B,O){return B=wn(B,O),B.index=0,B.sibling=null,B}function y(B,O,U){return B.index=U,r?(U=B.alternate,U!==null?(U=U.index,U<O?(B.flags|=2,O):U):(B.flags|=2,O)):(B.flags|=1048576,O)}function k(B){return r&&B.alternate===null&&(B.flags|=2),B}function T(B,O,U,de){return O===null||O.tag!==6?(O=pd(U,B.mode,de),O.return=B,O):(O=g(O,U),O.return=B,O)}function D(B,O,U,de){var _e=U.type;return _e===H?ie(B,O,U.props.children,de,U.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===V&&pf(_e)===O.type)?(de=g(O,U.props),de.ref=Si(B,O,U),de.return=B,de):(de=jo(U.type,U.key,U.props,null,B.mode,de),de.ref=Si(B,O,U),de.return=B,de)}function Y(B,O,U,de){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=gd(U,B.mode,de),O.return=B,O):(O=g(O,U.children||[]),O.return=B,O)}function ie(B,O,U,de,_e){return O===null||O.tag!==7?(O=Kn(U,B.mode,de,_e),O.return=B,O):(O=g(O,U),O.return=B,O)}function ce(B,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=pd(""+O,B.mode,U),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case A:return U=jo(O.type,O.key,O.props,null,B.mode,U),U.ref=Si(B,null,O),U.return=B,U;case F:return O=gd(O,B.mode,U),O.return=B,O;case V:var de=O._init;return ce(B,de(O._payload),U)}if(Ue(O)||se(O))return O=Kn(O,B.mode,U,null),O.return=B,O;Ga(B,O)}return null}function ne(B,O,U,de){var _e=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return _e!==null?null:T(B,O,""+U,de);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===_e?D(B,O,U,de):null;case F:return U.key===_e?Y(B,O,U,de):null;case V:return _e=U._init,ne(B,O,_e(U._payload),de)}if(Ue(U)||se(U))return _e!==null?null:ie(B,O,U,de,null);Ga(B,U)}return null}function pe(B,O,U,de,_e){if(typeof de=="string"&&de!==""||typeof de=="number")return B=B.get(U)||null,T(O,B,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case A:return B=B.get(de.key===null?U:de.key)||null,D(O,B,de,_e);case F:return B=B.get(de.key===null?U:de.key)||null,Y(O,B,de,_e);case V:var ke=de._init;return pe(B,O,U,ke(de._payload),_e)}if(Ue(de)||se(de))return B=B.get(U)||null,ie(O,B,de,_e,null);Ga(O,de)}return null}function ve(B,O,U,de){for(var _e=null,ke=null,Se=O,Ee=O=0,xt=null;Se!==null&&Ee<U.length;Ee++){Se.index>Ee?(xt=Se,Se=null):xt=Se.sibling;var Ie=ne(B,Se,U[Ee],de);if(Ie===null){Se===null&&(Se=xt);break}r&&Se&&Ie.alternate===null&&a(B,Se),O=y(Ie,O,Ee),ke===null?_e=Ie:ke.sibling=Ie,ke=Ie,Se=xt}if(Ee===U.length)return d(B,Se),Ge&&Bn(B,Ee),_e;if(Se===null){for(;Ee<U.length;Ee++)Se=ce(B,U[Ee],de),Se!==null&&(O=y(Se,O,Ee),ke===null?_e=Se:ke.sibling=Se,ke=Se);return Ge&&Bn(B,Ee),_e}for(Se=f(B,Se);Ee<U.length;Ee++)xt=pe(Se,B,Ee,U[Ee],de),xt!==null&&(r&&xt.alternate!==null&&Se.delete(xt.key===null?Ee:xt.key),O=y(xt,O,Ee),ke===null?_e=xt:ke.sibling=xt,ke=xt);return r&&Se.forEach(function(jn){return a(B,jn)}),Ge&&Bn(B,Ee),_e}function we(B,O,U,de){var _e=se(U);if(typeof _e!="function")throw Error(s(150));if(U=_e.call(U),U==null)throw Error(s(151));for(var ke=_e=null,Se=O,Ee=O=0,xt=null,Ie=U.next();Se!==null&&!Ie.done;Ee++,Ie=U.next()){Se.index>Ee?(xt=Se,Se=null):xt=Se.sibling;var jn=ne(B,Se,Ie.value,de);if(jn===null){Se===null&&(Se=xt);break}r&&Se&&jn.alternate===null&&a(B,Se),O=y(jn,O,Ee),ke===null?_e=jn:ke.sibling=jn,ke=jn,Se=xt}if(Ie.done)return d(B,Se),Ge&&Bn(B,Ee),_e;if(Se===null){for(;!Ie.done;Ee++,Ie=U.next())Ie=ce(B,Ie.value,de),Ie!==null&&(O=y(Ie,O,Ee),ke===null?_e=Ie:ke.sibling=Ie,ke=Ie);return Ge&&Bn(B,Ee),_e}for(Se=f(B,Se);!Ie.done;Ee++,Ie=U.next())Ie=pe(Se,B,Ee,Ie.value,de),Ie!==null&&(r&&Ie.alternate!==null&&Se.delete(Ie.key===null?Ee:Ie.key),O=y(Ie,O,Ee),ke===null?_e=Ie:ke.sibling=Ie,ke=Ie);return r&&Se.forEach(function(Db){return a(B,Db)}),Ge&&Bn(B,Ee),_e}function rt(B,O,U,de){if(typeof U=="object"&&U!==null&&U.type===H&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var _e=U.key,ke=O;ke!==null;){if(ke.key===_e){if(_e=U.type,_e===H){if(ke.tag===7){d(B,ke.sibling),O=g(ke,U.props.children),O.return=B,B=O;break e}}else if(ke.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===V&&pf(_e)===ke.type){d(B,ke.sibling),O=g(ke,U.props),O.ref=Si(B,ke,U),O.return=B,B=O;break e}d(B,ke);break}else a(B,ke);ke=ke.sibling}U.type===H?(O=Kn(U.props.children,B.mode,de,U.key),O.return=B,B=O):(de=jo(U.type,U.key,U.props,null,B.mode,de),de.ref=Si(B,O,U),de.return=B,B=de)}return k(B);case F:e:{for(ke=U.key;O!==null;){if(O.key===ke)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){d(B,O.sibling),O=g(O,U.children||[]),O.return=B,B=O;break e}else{d(B,O);break}else a(B,O);O=O.sibling}O=gd(U,B.mode,de),O.return=B,B=O}return k(B);case V:return ke=U._init,rt(B,O,ke(U._payload),de)}if(Ue(U))return ve(B,O,U,de);if(se(U))return we(B,O,U,de);Ga(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(d(B,O.sibling),O=g(O,U),O.return=B,B=O):(d(B,O),O=pd(U,B.mode,de),O.return=B,B=O),k(B)):d(B,O)}return rt}var Er=gf(!0),xf=gf(!1),Ja=un(null),Za=null,Pr=null,kc=null;function Sc(){kc=Pr=Za=null}function Cc(r){var a=Ja.current;Xe(Ja),r._currentValue=a}function Ec(r,a,d){for(;r!==null;){var f=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),r===d)break;r=r.return}}function Ar(r,a){Za=r,kc=Pr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(Lt=!0),r.firstContext=null)}function as(r){var a=r._currentValue;if(kc!==r)if(r={context:r,memoizedValue:a,next:null},Pr===null){if(Za===null)throw Error(s(308));Pr=r,Za.dependencies={lanes:0,firstContext:r}}else Pr=Pr.next=r;return a}var $n=null;function Pc(r){$n===null?$n=[r]:$n.push(r)}function yf(r,a,d,f){var g=a.interleaved;return g===null?(d.next=d,Pc(a)):(d.next=g.next,g.next=d),a.interleaved=d,Us(r,f)}function Us(r,a){r.lanes|=a;var d=r.alternate;for(d!==null&&(d.lanes|=a),d=r,r=r.return;r!==null;)r.childLanes|=a,d=r.alternate,d!==null&&(d.childLanes|=a),d=r,r=r.return;return d.tag===3?d.stateNode:null}var mn=!1;function Ac(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bf(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Hs(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function pn(r,a,d){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Fe&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,Us(r,d)}return g=f.interleaved,g===null?(a.next=a,Pc(f)):(a.next=g.next,g.next=a),f.interleaved=a,Us(r,d)}function eo(r,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var f=a.lanes;f&=r.pendingLanes,d|=f,a.lanes=d,Vl(r,d)}}function vf(r,a){var d=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var k={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};y===null?g=y=k:y=y.next=k,d=d.next}while(d!==null);y===null?g=y=a:y=y.next=a}else g=y=a;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=a:r.next=a,d.lastBaseUpdate=a}function to(r,a,d,f){var g=r.updateQueue;mn=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var D=T,Y=D.next;D.next=null,k===null?y=Y:k.next=Y,k=D;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==k&&(T===null?ie.firstBaseUpdate=Y:T.next=Y,ie.lastBaseUpdate=D))}if(y!==null){var ce=g.baseState;k=0,ie=Y=D=null,T=y;do{var ne=T.lane,pe=T.eventTime;if((f&ne)===ne){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ve=r,we=T;switch(ne=a,pe=d,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ce=ve.call(pe,ce,ne);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ne=typeof ve=="function"?ve.call(pe,ce,ne):ve,ne==null)break e;ce=te({},ce,ne);break e;case 2:mn=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,ne=g.effects,ne===null?g.effects=[T]:ne.push(T))}else pe={eventTime:pe,lane:ne,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(Y=ie=pe,D=ce):ie=ie.next=pe,k|=ne;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;ne=T,T=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);if(ie===null&&(D=ce),g.baseState=D,g.firstBaseUpdate=Y,g.lastBaseUpdate=ie,a=g.shared.interleaved,a!==null){g=a;do k|=g.lane,g=g.next;while(g!==a)}else y===null&&(g.shared.lanes=0);Vn|=k,r.lanes=k,r.memoizedState=ce}}function wf(r,a,d){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var f=r[a],g=f.callback;if(g!==null){if(f.callback=null,f=d,typeof g!="function")throw Error(s(191,g));g.call(f)}}}var Ci={},Cs=un(Ci),Ei=un(Ci),Pi=un(Ci);function Un(r){if(r===Ci)throw Error(s(174));return r}function Tc(r,a){switch(Ye(Pi,a),Ye(Ei,r),Ye(Cs,Ci),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Xt(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Xt(a,r)}Xe(Cs),Ye(Cs,a)}function Tr(){Xe(Cs),Xe(Ei),Xe(Pi)}function jf(r){Un(Pi.current);var a=Un(Cs.current),d=Xt(a,r.type);a!==d&&(Ye(Ei,r),Ye(Cs,d))}function Rc(r){Ei.current===r&&(Xe(Cs),Xe(Ei))}var Je=un(0);function so(r){for(var a=r;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Dc=[];function Mc(){for(var r=0;r<Dc.length;r++)Dc[r]._workInProgressVersionPrimary=null;Dc.length=0}var no=R.ReactCurrentDispatcher,Oc=R.ReactCurrentBatchConfig,Hn=0,Ze=null,ut=null,pt=null,ro=!1,Ai=!1,Ti=0,tb=0;function Nt(){throw Error(s(321))}function Lc(r,a){if(a===null)return!1;for(var d=0;d<a.length&&d<r.length;d++)if(!ps(r[d],a[d]))return!1;return!0}function Fc(r,a,d,f,g,y){if(Hn=y,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,no.current=r===null||r.memoizedState===null?ib:ab,r=d(f,g),Ai){y=0;do{if(Ai=!1,Ti=0,25<=y)throw Error(s(301));y+=1,pt=ut=null,a.updateQueue=null,no.current=ob,r=d(f,g)}while(Ai)}if(no.current=oo,a=ut!==null&&ut.next!==null,Hn=0,pt=ut=Ze=null,ro=!1,a)throw Error(s(300));return r}function Ic(){var r=Ti!==0;return Ti=0,r}function Es(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ze.memoizedState=pt=r:pt=pt.next=r,pt}function os(){if(ut===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var a=pt===null?Ze.memoizedState:pt.next;if(a!==null)pt=a,ut=r;else{if(r===null)throw Error(s(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?Ze.memoizedState=pt=r:pt=pt.next=r}return pt}function Ri(r,a){return typeof a=="function"?a(r):a}function zc(r){var a=os(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var f=ut,g=f.baseQueue,y=d.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}f.baseQueue=g=y,d.pending=null}if(g!==null){y=g.next,f=f.baseState;var T=k=null,D=null,Y=y;do{var ie=Y.lane;if((Hn&ie)===ie)D!==null&&(D=D.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:r(f,Y.action);else{var ce={lane:ie,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};D===null?(T=D=ce,k=f):D=D.next=ce,Ze.lanes|=ie,Vn|=ie}Y=Y.next}while(Y!==null&&Y!==y);D===null?k=f:D.next=T,ps(f,a.memoizedState)||(Lt=!0),a.memoizedState=f,a.baseState=k,a.baseQueue=D,d.lastRenderedState=f}if(r=d.interleaved,r!==null){g=r;do y=g.lane,Ze.lanes|=y,Vn|=y,g=g.next;while(g!==r)}else g===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Bc(r){var a=os(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var f=d.dispatch,g=d.pending,y=a.memoizedState;if(g!==null){d.pending=null;var k=g=g.next;do y=r(y,k.action),k=k.next;while(k!==g);ps(y,a.memoizedState)||(Lt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),d.lastRenderedState=y}return[y,f]}function _f(){}function Nf(r,a){var d=Ze,f=os(),g=a(),y=!ps(f.memoizedState,g);if(y&&(f.memoizedState=g,Lt=!0),f=f.queue,$c(Cf.bind(null,d,f,r),[r]),f.getSnapshot!==a||y||pt!==null&&pt.memoizedState.tag&1){if(d.flags|=2048,Di(9,Sf.bind(null,d,f,g,a),void 0,null),gt===null)throw Error(s(349));(Hn&30)!==0||kf(d,a,g)}return g}function kf(r,a,d){r.flags|=16384,r={getSnapshot:a,value:d},a=Ze.updateQueue,a===null?(a={lastEffect:null,stores:null},Ze.updateQueue=a,a.stores=[r]):(d=a.stores,d===null?a.stores=[r]:d.push(r))}function Sf(r,a,d,f){a.value=d,a.getSnapshot=f,Ef(a)&&Pf(r)}function Cf(r,a,d){return d(function(){Ef(a)&&Pf(r)})}function Ef(r){var a=r.getSnapshot;r=r.value;try{var d=a();return!ps(r,d)}catch{return!0}}function Pf(r){var a=Us(r,1);a!==null&&vs(a,r,1,-1)}function Af(r){var a=Es();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:r},a.queue=r,r=r.dispatch=rb.bind(null,Ze,r),[a.memoizedState,r]}function Di(r,a,d,f){return r={tag:r,create:a,destroy:d,deps:f,next:null},a=Ze.updateQueue,a===null?(a={lastEffect:null,stores:null},Ze.updateQueue=a,a.lastEffect=r.next=r):(d=a.lastEffect,d===null?a.lastEffect=r.next=r:(f=d.next,d.next=r,r.next=f,a.lastEffect=r)),r}function Tf(){return os().memoizedState}function io(r,a,d,f){var g=Es();Ze.flags|=r,g.memoizedState=Di(1|a,d,void 0,f===void 0?null:f)}function ao(r,a,d,f){var g=os();f=f===void 0?null:f;var y=void 0;if(ut!==null){var k=ut.memoizedState;if(y=k.destroy,f!==null&&Lc(f,k.deps)){g.memoizedState=Di(a,d,y,f);return}}Ze.flags|=r,g.memoizedState=Di(1|a,d,y,f)}function Rf(r,a){return io(8390656,8,r,a)}function $c(r,a){return ao(2048,8,r,a)}function Df(r,a){return ao(4,2,r,a)}function Mf(r,a){return ao(4,4,r,a)}function Of(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Lf(r,a,d){return d=d!=null?d.concat([r]):null,ao(4,4,Of.bind(null,a,r),d)}function Uc(){}function Ff(r,a){var d=os();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Lc(a,f[1])?f[0]:(d.memoizedState=[r,a],r)}function If(r,a){var d=os();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Lc(a,f[1])?f[0]:(r=r(),d.memoizedState=[r,a],r)}function zf(r,a,d){return(Hn&21)===0?(r.baseState&&(r.baseState=!1,Lt=!0),r.memoizedState=d):(ps(d,a)||(d=mh(),Ze.lanes|=d,Vn|=d,r.baseState=!0),a)}function sb(r,a){var d=He;He=d!==0&&4>d?d:4,r(!0);var f=Oc.transition;Oc.transition={};try{r(!1),a()}finally{He=d,Oc.transition=f}}function Bf(){return os().memoizedState}function nb(r,a,d){var f=bn(r);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},$f(r))Uf(a,d);else if(d=yf(r,a,d,f),d!==null){var g=Dt();vs(d,r,f,g),Hf(d,a,f)}}function rb(r,a,d){var f=bn(r),g={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if($f(r))Uf(a,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var k=a.lastRenderedState,T=y(k,d);if(g.hasEagerState=!0,g.eagerState=T,ps(T,k)){var D=a.interleaved;D===null?(g.next=g,Pc(a)):(g.next=D.next,D.next=g),a.interleaved=g;return}}catch{}finally{}d=yf(r,a,g,f),d!==null&&(g=Dt(),vs(d,r,f,g),Hf(d,a,f))}}function $f(r){var a=r.alternate;return r===Ze||a!==null&&a===Ze}function Uf(r,a){Ai=ro=!0;var d=r.pending;d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a}function Hf(r,a,d){if((d&4194240)!==0){var f=a.lanes;f&=r.pendingLanes,d|=f,a.lanes=d,Vl(r,d)}}var oo={readContext:as,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},ib={readContext:as,useCallback:function(r,a){return Es().memoizedState=[r,a===void 0?null:a],r},useContext:as,useEffect:Rf,useImperativeHandle:function(r,a,d){return d=d!=null?d.concat([r]):null,io(4194308,4,Of.bind(null,a,r),d)},useLayoutEffect:function(r,a){return io(4194308,4,r,a)},useInsertionEffect:function(r,a){return io(4,2,r,a)},useMemo:function(r,a){var d=Es();return a=a===void 0?null:a,r=r(),d.memoizedState=[r,a],r},useReducer:function(r,a,d){var f=Es();return a=d!==void 0?d(a):a,f.memoizedState=f.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},f.queue=r,r=r.dispatch=nb.bind(null,Ze,r),[f.memoizedState,r]},useRef:function(r){var a=Es();return r={current:r},a.memoizedState=r},useState:Af,useDebugValue:Uc,useDeferredValue:function(r){return Es().memoizedState=r},useTransition:function(){var r=Af(!1),a=r[0];return r=sb.bind(null,r[1]),Es().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,d){var f=Ze,g=Es();if(Ge){if(d===void 0)throw Error(s(407));d=d()}else{if(d=a(),gt===null)throw Error(s(349));(Hn&30)!==0||kf(f,a,d)}g.memoizedState=d;var y={value:d,getSnapshot:a};return g.queue=y,Rf(Cf.bind(null,f,y,r),[r]),f.flags|=2048,Di(9,Sf.bind(null,f,y,d,a),void 0,null),d},useId:function(){var r=Es(),a=gt.identifierPrefix;if(Ge){var d=$s,f=Bs;d=(f&~(1<<32-ms(f)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ti++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=tb++,a=":"+a+"r"+d.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},ab={readContext:as,useCallback:Ff,useContext:as,useEffect:$c,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:If,useReducer:zc,useRef:Tf,useState:function(){return zc(Ri)},useDebugValue:Uc,useDeferredValue:function(r){var a=os();return zf(a,ut.memoizedState,r)},useTransition:function(){var r=zc(Ri)[0],a=os().memoizedState;return[r,a]},useMutableSource:_f,useSyncExternalStore:Nf,useId:Bf,unstable_isNewReconciler:!1},ob={readContext:as,useCallback:Ff,useContext:as,useEffect:$c,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:If,useReducer:Bc,useRef:Tf,useState:function(){return Bc(Ri)},useDebugValue:Uc,useDeferredValue:function(r){var a=os();return ut===null?a.memoizedState=r:zf(a,ut.memoizedState,r)},useTransition:function(){var r=Bc(Ri)[0],a=os().memoizedState;return[r,a]},useMutableSource:_f,useSyncExternalStore:Nf,useId:Bf,unstable_isNewReconciler:!1};function xs(r,a){if(r&&r.defaultProps){a=te({},a),r=r.defaultProps;for(var d in r)a[d]===void 0&&(a[d]=r[d]);return a}return a}function Hc(r,a,d,f){a=r.memoizedState,d=d(f,a),d=d==null?a:te({},a,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var lo={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,a,d){r=r._reactInternals;var f=Dt(),g=bn(r),y=Hs(f,g);y.payload=a,d!=null&&(y.callback=d),a=pn(r,y,g),a!==null&&(vs(a,r,g,f),eo(a,r,g))},enqueueReplaceState:function(r,a,d){r=r._reactInternals;var f=Dt(),g=bn(r),y=Hs(f,g);y.tag=1,y.payload=a,d!=null&&(y.callback=d),a=pn(r,y,g),a!==null&&(vs(a,r,g,f),eo(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var d=Dt(),f=bn(r),g=Hs(d,f);g.tag=2,a!=null&&(g.callback=a),a=pn(r,g,f),a!==null&&(vs(a,r,f,d),eo(a,r,f))}};function Vf(r,a,d,f,g,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,y,k):a.prototype&&a.prototype.isPureReactComponent?!bi(d,f)||!bi(g,y):!0}function Wf(r,a,d){var f=!1,g=hn,y=a.contextType;return typeof y=="object"&&y!==null?y=as(y):(g=Ot(a)?In:_t.current,f=a.contextTypes,y=(f=f!=null)?Nr(r,g):hn),a=new a(d,y),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=lo,r.stateNode=a,a._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=y),a}function qf(r,a,d,f){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,f),a.state!==r&&lo.enqueueReplaceState(a,a.state,null)}function Vc(r,a,d,f){var g=r.stateNode;g.props=d,g.state=r.memoizedState,g.refs={},Ac(r);var y=a.contextType;typeof y=="object"&&y!==null?g.context=as(y):(y=Ot(a)?In:_t.current,g.context=Nr(r,y)),g.state=r.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Hc(r,a,y,d),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&lo.enqueueReplaceState(g,g.state,null),to(r,d,g,f),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Rr(r,a){try{var d="",f=a;do d+=I(f),f=f.return;while(f);var g=d}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:a,stack:g,digest:null}}function Wc(r,a,d){return{value:r,source:null,stack:d??null,digest:a??null}}function qc(r,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var lb=typeof WeakMap=="function"?WeakMap:Map;function Yf(r,a,d){d=Hs(-1,d),d.tag=3,d.payload={element:null};var f=a.value;return d.callback=function(){go||(go=!0,od=f),qc(r,a)},d}function Kf(r,a,d){d=Hs(-1,d),d.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;d.payload=function(){return f(g)},d.callback=function(){qc(r,a)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(d.callback=function(){qc(r,a),typeof f!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),d}function Xf(r,a,d){var f=r.pingCache;if(f===null){f=r.pingCache=new lb;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(d)||(g.add(d),r=jb.bind(null,r,a,d),a.then(r,r))}function Qf(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function Gf(r,a,d,f,g){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Hs(-1,1),a.tag=2,pn(d,a,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var cb=R.ReactCurrentOwner,Lt=!1;function Rt(r,a,d,f){a.child=r===null?xf(a,null,d,f):Er(a,r.child,d,f)}function Jf(r,a,d,f,g){d=d.render;var y=a.ref;return Ar(a,g),f=Fc(r,a,d,f,y,g),d=Ic(),r!==null&&!Lt?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~g,Vs(r,a,g)):(Ge&&d&&vc(a),a.flags|=1,Rt(r,a,f,g),a.child)}function Zf(r,a,d,f,g){if(r===null){var y=d.type;return typeof y=="function"&&!md(y)&&y.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=y,em(r,a,y,f,g)):(r=jo(d.type,null,f,a,a.mode,g),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,(r.lanes&g)===0){var k=y.memoizedProps;if(d=d.compare,d=d!==null?d:bi,d(k,f)&&r.ref===a.ref)return Vs(r,a,g)}return a.flags|=1,r=wn(y,f),r.ref=a.ref,r.return=a,a.child=r}function em(r,a,d,f,g){if(r!==null){var y=r.memoizedProps;if(bi(y,f)&&r.ref===a.ref)if(Lt=!1,a.pendingProps=f=y,(r.lanes&g)!==0)(r.flags&131072)!==0&&(Lt=!0);else return a.lanes=r.lanes,Vs(r,a,g)}return Yc(r,a,d,f,g)}function tm(r,a,d){var f=a.pendingProps,g=f.children,y=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Mr,Zt),Zt|=d;else{if((d&1073741824)===0)return r=y!==null?y.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,Ye(Mr,Zt),Zt|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:d,Ye(Mr,Zt),Zt|=f}else y!==null?(f=y.baseLanes|d,a.memoizedState=null):f=d,Ye(Mr,Zt),Zt|=f;return Rt(r,a,g,d),a.child}function sm(r,a){var d=a.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Yc(r,a,d,f,g){var y=Ot(d)?In:_t.current;return y=Nr(a,y),Ar(a,g),d=Fc(r,a,d,f,y,g),f=Ic(),r!==null&&!Lt?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~g,Vs(r,a,g)):(Ge&&f&&vc(a),a.flags|=1,Rt(r,a,d,g),a.child)}function nm(r,a,d,f,g){if(Ot(d)){var y=!0;qa(a)}else y=!1;if(Ar(a,g),a.stateNode===null)uo(r,a),Wf(a,d,f),Vc(a,d,f,g),f=!0;else if(r===null){var k=a.stateNode,T=a.memoizedProps;k.props=T;var D=k.context,Y=d.contextType;typeof Y=="object"&&Y!==null?Y=as(Y):(Y=Ot(d)?In:_t.current,Y=Nr(a,Y));var ie=d.getDerivedStateFromProps,ce=typeof ie=="function"||typeof k.getSnapshotBeforeUpdate=="function";ce||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(T!==f||D!==Y)&&qf(a,k,f,Y),mn=!1;var ne=a.memoizedState;k.state=ne,to(a,f,k,g),D=a.memoizedState,T!==f||ne!==D||Mt.current||mn?(typeof ie=="function"&&(Hc(a,d,ie,f),D=a.memoizedState),(T=mn||Vf(a,d,T,f,ne,D,Y))?(ce||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=D),k.props=f,k.state=D,k.context=Y,f=T):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{k=a.stateNode,bf(r,a),T=a.memoizedProps,Y=a.type===a.elementType?T:xs(a.type,T),k.props=Y,ce=a.pendingProps,ne=k.context,D=d.contextType,typeof D=="object"&&D!==null?D=as(D):(D=Ot(d)?In:_t.current,D=Nr(a,D));var pe=d.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(T!==ce||ne!==D)&&qf(a,k,f,D),mn=!1,ne=a.memoizedState,k.state=ne,to(a,f,k,g);var ve=a.memoizedState;T!==ce||ne!==ve||Mt.current||mn?(typeof pe=="function"&&(Hc(a,d,pe,f),ve=a.memoizedState),(Y=mn||Vf(a,d,Y,f,ne,ve,D)||!1)?(ie||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ve,D),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ve,D)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ve),k.props=f,k.state=ve,k.context=D,f=Y):(typeof k.componentDidUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(a.flags|=1024),f=!1)}return Kc(r,a,d,f,y,g)}function Kc(r,a,d,f,g,y){sm(r,a);var k=(a.flags&128)!==0;if(!f&&!k)return g&&lf(a,d,!1),Vs(r,a,y);f=a.stateNode,cb.current=a;var T=k&&typeof d.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,r!==null&&k?(a.child=Er(a,r.child,null,y),a.child=Er(a,null,T,y)):Rt(r,a,T,y),a.memoizedState=f.state,g&&lf(a,d,!0),a.child}function rm(r){var a=r.stateNode;a.pendingContext?af(r,a.pendingContext,a.pendingContext!==a.context):a.context&&af(r,a.context,!1),Tc(r,a.containerInfo)}function im(r,a,d,f,g){return Cr(),Nc(g),a.flags|=256,Rt(r,a,d,f),a.child}var Xc={dehydrated:null,treeContext:null,retryLane:0};function Qc(r){return{baseLanes:r,cachePool:null,transitions:null}}function am(r,a,d){var f=a.pendingProps,g=Je.current,y=!1,k=(a.flags&128)!==0,T;if((T=k)||(T=r!==null&&r.memoizedState===null?!1:(g&2)!==0),T?(y=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),Ye(Je,g&1),r===null)return _c(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(k=f.children,r=f.fallback,y?(f=a.mode,y=a.child,k={mode:"hidden",children:k},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=_o(k,f,0,null),r=Kn(r,f,d,null),y.return=a,r.return=a,y.sibling=r,a.child=y,a.child.memoizedState=Qc(d),a.memoizedState=Xc,r):Gc(a,k));if(g=r.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return db(r,a,k,f,T,g,d);if(y){y=f.fallback,k=a.mode,g=r.child,T=g.sibling;var D={mode:"hidden",children:f.children};return(k&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=D,a.deletions=null):(f=wn(g,D),f.subtreeFlags=g.subtreeFlags&14680064),T!==null?y=wn(T,y):(y=Kn(y,k,d,null),y.flags|=2),y.return=a,f.return=a,f.sibling=y,a.child=f,f=y,y=a.child,k=r.child.memoizedState,k=k===null?Qc(d):{baseLanes:k.baseLanes|d,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=r.childLanes&~d,a.memoizedState=Xc,f}return y=r.child,r=y.sibling,f=wn(y,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=d),f.return=a,f.sibling=null,r!==null&&(d=a.deletions,d===null?(a.deletions=[r],a.flags|=16):d.push(r)),a.child=f,a.memoizedState=null,f}function Gc(r,a){return a=_o({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function co(r,a,d,f){return f!==null&&Nc(f),Er(a,r.child,null,d),r=Gc(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function db(r,a,d,f,g,y,k){if(d)return a.flags&256?(a.flags&=-257,f=Wc(Error(s(422))),co(r,a,k,f)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(y=f.fallback,g=a.mode,f=_o({mode:"visible",children:f.children},g,0,null),y=Kn(y,g,k,null),y.flags|=2,f.return=a,y.return=a,f.sibling=y,a.child=f,(a.mode&1)!==0&&Er(a,r.child,null,k),a.child.memoizedState=Qc(k),a.memoizedState=Xc,y);if((a.mode&1)===0)return co(r,a,k,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var T=f.dgst;return f=T,y=Error(s(419)),f=Wc(y,f,void 0),co(r,a,k,f)}if(T=(k&r.childLanes)!==0,Lt||T){if(f=gt,f!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,Us(r,g),vs(f,r,g,-1))}return fd(),f=Wc(Error(s(421))),co(r,a,k,f)}return g.data==="$?"?(a.flags|=128,a.child=r.child,a=_b.bind(null,r),g._reactRetry=a,null):(r=y.treeContext,Jt=dn(g.nextSibling),Gt=a,Ge=!0,gs=null,r!==null&&(rs[is++]=Bs,rs[is++]=$s,rs[is++]=zn,Bs=r.id,$s=r.overflow,zn=a),a=Gc(a,f.children),a.flags|=4096,a)}function om(r,a,d){r.lanes|=a;var f=r.alternate;f!==null&&(f.lanes|=a),Ec(r.return,a,d)}function Jc(r,a,d,f,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=d,y.tailMode=g)}function lm(r,a,d){var f=a.pendingProps,g=f.revealOrder,y=f.tail;if(Rt(r,a,f.children,d),f=Je.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&om(r,d,a);else if(r.tag===19)om(r,d,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Ye(Je,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(d=a.child,g=null;d!==null;)r=d.alternate,r!==null&&so(r)===null&&(g=d),d=d.sibling;d=g,d===null?(g=a.child,a.child=null):(g=d.sibling,d.sibling=null),Jc(a,!1,g,d,y);break;case"backwards":for(d=null,g=a.child,a.child=null;g!==null;){if(r=g.alternate,r!==null&&so(r)===null){a.child=g;break}r=g.sibling,g.sibling=d,d=g,g=r}Jc(a,!0,d,null,y);break;case"together":Jc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function uo(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function Vs(r,a,d){if(r!==null&&(a.dependencies=r.dependencies),Vn|=a.lanes,(d&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,d=wn(r,r.pendingProps),a.child=d,d.return=a;r.sibling!==null;)r=r.sibling,d=d.sibling=wn(r,r.pendingProps),d.return=a;d.sibling=null}return a.child}function ub(r,a,d){switch(a.tag){case 3:rm(a),Cr();break;case 5:jf(a);break;case 1:Ot(a.type)&&qa(a);break;case 4:Tc(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;Ye(Ja,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Ye(Je,Je.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?am(r,a,d):(Ye(Je,Je.current&1),r=Vs(r,a,d),r!==null?r.sibling:null);Ye(Je,Je.current&1);break;case 19:if(f=(d&a.childLanes)!==0,(r.flags&128)!==0){if(f)return lm(r,a,d);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ye(Je,Je.current),f)break;return null;case 22:case 23:return a.lanes=0,tm(r,a,d)}return Vs(r,a,d)}var cm,Zc,dm,um;cm=function(r,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Zc=function(){},dm=function(r,a,d,f){var g=r.memoizedProps;if(g!==f){r=a.stateNode,Un(Cs.current);var y=null;switch(d){case"input":g=q(r,g),f=q(r,f),y=[];break;case"select":g=te({},g,{value:void 0}),f=te({},f,{value:void 0}),y=[];break;case"textarea":g=ee(r,g),f=ee(r,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Ha)}Dl(d,f);var k;d=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var T=g[Y];for(k in T)T.hasOwnProperty(k)&&(d||(d={}),d[k]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in f){var D=f[Y];if(T=g?.[Y],f.hasOwnProperty(Y)&&D!==T&&(D!=null||T!=null))if(Y==="style")if(T){for(k in T)!T.hasOwnProperty(k)||D&&D.hasOwnProperty(k)||(d||(d={}),d[k]="");for(k in D)D.hasOwnProperty(k)&&T[k]!==D[k]&&(d||(d={}),d[k]=D[k])}else d||(y||(y=[]),y.push(Y,d)),d=D;else Y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,T=T?T.__html:void 0,D!=null&&T!==D&&(y=y||[]).push(Y,D)):Y==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(Y,""+D):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(i.hasOwnProperty(Y)?(D!=null&&Y==="onScroll"&&Ke("scroll",r),y||T===D||(y=[])):(y=y||[]).push(Y,D))}d&&(y=y||[]).push("style",d);var Y=y;(a.updateQueue=Y)&&(a.flags|=4)}},um=function(r,a,d,f){d!==f&&(a.flags|=4)};function Mi(r,a){if(!Ge)switch(r.tailMode){case"hidden":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function kt(r){var a=r.alternate!==null&&r.alternate.child===r.child,d=0,f=0;if(a)for(var g=r.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=f,r.childLanes=d,a}function hb(r,a,d){var f=a.pendingProps;switch(wc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return Ot(a.type)&&Wa(),kt(a),null;case 3:return f=a.stateNode,Tr(),Xe(Mt),Xe(_t),Mc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Qa(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gs!==null&&(dd(gs),gs=null))),Zc(r,a),kt(a),null;case 5:Rc(a);var g=Un(Pi.current);if(d=a.type,r!==null&&a.stateNode!=null)dm(r,a,d,f,g),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(s(166));return kt(a),null}if(r=Un(Cs.current),Qa(a)){f=a.stateNode,d=a.type;var y=a.memoizedProps;switch(f[Ss]=a,f[Ni]=y,r=(a.mode&1)!==0,d){case"dialog":Ke("cancel",f),Ke("close",f);break;case"iframe":case"object":case"embed":Ke("load",f);break;case"video":case"audio":for(g=0;g<wi.length;g++)Ke(wi[g],f);break;case"source":Ke("error",f);break;case"img":case"image":case"link":Ke("error",f),Ke("load",f);break;case"details":Ke("toggle",f);break;case"input":be(f,y),Ke("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Ke("invalid",f);break;case"textarea":oe(f,y),Ke("invalid",f)}Dl(d,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var T=y[k];k==="children"?typeof T=="string"?f.textContent!==T&&(y.suppressHydrationWarning!==!0&&Ua(f.textContent,T,r),g=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&Ua(f.textContent,T,r),g=["children",""+T]):i.hasOwnProperty(k)&&T!=null&&k==="onScroll"&&Ke("scroll",f)}switch(d){case"input":ye(f),Pe(f,y,!0);break;case"textarea":ye(f),qe(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ha)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Fs(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=k.createElement(d,{is:f.is}):(r=k.createElement(d),d==="select"&&(k=r,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):r=k.createElementNS(r,d),r[Ss]=a,r[Ni]=f,cm(r,a,!1,!1),a.stateNode=r;e:{switch(k=Ml(d,f),d){case"dialog":Ke("cancel",r),Ke("close",r),g=f;break;case"iframe":case"object":case"embed":Ke("load",r),g=f;break;case"video":case"audio":for(g=0;g<wi.length;g++)Ke(wi[g],r);g=f;break;case"source":Ke("error",r),g=f;break;case"img":case"image":case"link":Ke("error",r),Ke("load",r),g=f;break;case"details":Ke("toggle",r),g=f;break;case"input":be(r,f),g=q(r,f),Ke("invalid",r);break;case"option":g=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},g=te({},f,{value:void 0}),Ke("invalid",r);break;case"textarea":oe(r,f),g=ee(r,f),Ke("invalid",r);break;default:g=f}Dl(d,g),T=g;for(y in T)if(T.hasOwnProperty(y)){var D=T[y];y==="style"?Zu(r,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Ns(r,D)):y==="children"?typeof D=="string"?(d!=="textarea"||D!=="")&&fs(r,D):typeof D=="number"&&fs(r,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?D!=null&&y==="onScroll"&&Ke("scroll",r):D!=null&&E(r,y,D,k))}switch(d){case"input":ye(r),Pe(r,f,!1);break;case"textarea":ye(r),qe(r);break;case"option":f.value!=null&&r.setAttribute("value",""+ge(f.value));break;case"select":r.multiple=!!f.multiple,y=f.value,y!=null?dt(r,!!f.multiple,y,!1):f.defaultValue!=null&&dt(r,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Ha)}switch(d){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return kt(a),null;case 6:if(r&&a.stateNode!=null)um(r,a,r.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(s(166));if(d=Un(Pi.current),Un(Cs.current),Qa(a)){if(f=a.stateNode,d=a.memoizedProps,f[Ss]=a,(y=f.nodeValue!==d)&&(r=Gt,r!==null))switch(r.tag){case 3:Ua(f.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ua(f.nodeValue,d,(r.mode&1)!==0)}y&&(a.flags|=4)}else f=(d.nodeType===9?d:d.ownerDocument).createTextNode(f),f[Ss]=a,a.stateNode=f}return kt(a),null;case 13:if(Xe(Je),f=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ge&&Jt!==null&&(a.mode&1)!==0&&(a.flags&128)===0)mf(),Cr(),a.flags|=98560,y=!1;else if(y=Qa(a),f!==null&&f.dehydrated!==null){if(r===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Ss]=a}else Cr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),y=!1}else gs!==null&&(dd(gs),gs=null),y=!0;if(!y)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(Je.current&1)!==0?ht===0&&(ht=3):fd())),a.updateQueue!==null&&(a.flags|=4),kt(a),null);case 4:return Tr(),Zc(r,a),r===null&&ji(a.stateNode.containerInfo),kt(a),null;case 10:return Cc(a.type._context),kt(a),null;case 17:return Ot(a.type)&&Wa(),kt(a),null;case 19:if(Xe(Je),y=a.memoizedState,y===null)return kt(a),null;if(f=(a.flags&128)!==0,k=y.rendering,k===null)if(f)Mi(y,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(k=so(r),k!==null){for(a.flags|=128,Mi(y,!1),f=k.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=d,d=a.child;d!==null;)y=d,r=f,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,r=k.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return Ye(Je,Je.current&1|2),a.child}r=r.sibling}y.tail!==null&&nt()>Or&&(a.flags|=128,f=!0,Mi(y,!1),a.lanes=4194304)}else{if(!f)if(r=so(k),r!==null){if(a.flags|=128,f=!0,d=r.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Mi(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ge)return kt(a),null}else 2*nt()-y.renderingStartTime>Or&&d!==1073741824&&(a.flags|=128,f=!0,Mi(y,!1),a.lanes=4194304);y.isBackwards?(k.sibling=a.child,a.child=k):(d=y.last,d!==null?d.sibling=k:a.child=k,y.last=k)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=nt(),a.sibling=null,d=Je.current,Ye(Je,f?d&1|2:d&1),a):(kt(a),null);case 22:case 23:return hd(),f=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Zt&1073741824)!==0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),null;case 24:return null;case 25:return null}throw Error(s(156,a.tag))}function fb(r,a){switch(wc(a),a.tag){case 1:return Ot(a.type)&&Wa(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Tr(),Xe(Mt),Xe(_t),Mc(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return Rc(a),null;case 13:if(Xe(Je),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Cr()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Xe(Je),null;case 4:return Tr(),null;case 10:return Cc(a.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var ho=!1,St=!1,mb=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Dr(r,a){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){tt(r,a,f)}else d.current=null}function ed(r,a,d){try{d()}catch(f){tt(r,a,f)}}var hm=!1;function pb(r,a){if(hc=Ta,r=Hh(),rc(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var k=0,T=-1,D=-1,Y=0,ie=0,ce=r,ne=null;t:for(;;){for(var pe;ce!==d||g!==0&&ce.nodeType!==3||(T=k+g),ce!==y||f!==0&&ce.nodeType!==3||(D=k+f),ce.nodeType===3&&(k+=ce.nodeValue.length),(pe=ce.firstChild)!==null;)ne=ce,ce=pe;for(;;){if(ce===r)break t;if(ne===d&&++Y===g&&(T=k),ne===y&&++ie===f&&(D=k),(pe=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=pe}d=T===-1||D===-1?null:{start:T,end:D}}else d=null}d=d||{start:0,end:0}}else d=null;for(fc={focusedElem:r,selectionRange:d},Ta=!1,xe=a;xe!==null;)if(a=xe,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,xe=r;else for(;xe!==null;){a=xe;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,rt=ve.memoizedState,B=a.stateNode,O=B.getSnapshotBeforeUpdate(a.elementType===a.type?we:xs(a.type,we),rt);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=a.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(de){tt(a,a.return,de)}if(r=a.sibling,r!==null){r.return=a.return,xe=r;break}xe=a.return}return ve=hm,hm=!1,ve}function Oi(r,a,d){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&r)===r){var y=g.destroy;g.destroy=void 0,y!==void 0&&ed(a,d,y)}g=g.next}while(g!==f)}}function fo(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&r)===r){var f=d.create;d.destroy=f()}d=d.next}while(d!==a)}}function td(r){var a=r.ref;if(a!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof a=="function"?a(r):a.current=r}}function fm(r){var a=r.alternate;a!==null&&(r.alternate=null,fm(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[Ss],delete a[Ni],delete a[xc],delete a[Gy],delete a[Jy])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function mm(r){return r.tag===5||r.tag===3||r.tag===4}function pm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||mm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sd(r,a,d){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(r,a):d.insertBefore(r,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(r,d)):(a=d,a.appendChild(r)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Ha));else if(f!==4&&(r=r.child,r!==null))for(sd(r,a,d),r=r.sibling;r!==null;)sd(r,a,d),r=r.sibling}function nd(r,a,d){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?d.insertBefore(r,a):d.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(nd(r,a,d),r=r.sibling;r!==null;)nd(r,a,d),r=r.sibling}var bt=null,ys=!1;function gn(r,a,d){for(d=d.child;d!==null;)gm(r,a,d),d=d.sibling}function gm(r,a,d){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(ka,d)}catch{}switch(d.tag){case 5:St||Dr(d,a);case 6:var f=bt,g=ys;bt=null,gn(r,a,d),bt=f,ys=g,bt!==null&&(ys?(r=bt,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):bt.removeChild(d.stateNode));break;case 18:bt!==null&&(ys?(r=bt,d=d.stateNode,r.nodeType===8?gc(r.parentNode,d):r.nodeType===1&&gc(r,d),fi(r)):gc(bt,d.stateNode));break;case 4:f=bt,g=ys,bt=d.stateNode.containerInfo,ys=!0,gn(r,a,d),bt=f,ys=g;break;case 0:case 11:case 14:case 15:if(!St&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&ed(d,a,k),g=g.next}while(g!==f)}gn(r,a,d);break;case 1:if(!St&&(Dr(d,a),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(T){tt(d,a,T)}gn(r,a,d);break;case 21:gn(r,a,d);break;case 22:d.mode&1?(St=(f=St)||d.memoizedState!==null,gn(r,a,d),St=f):gn(r,a,d);break;default:gn(r,a,d)}}function xm(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new mb),a.forEach(function(f){var g=Nb.bind(null,r,f);d.has(f)||(d.add(f),f.then(g,g))})}}function bs(r,a){var d=a.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];try{var y=r,k=a,T=k;e:for(;T!==null;){switch(T.tag){case 5:bt=T.stateNode,ys=!1;break e;case 3:bt=T.stateNode.containerInfo,ys=!0;break e;case 4:bt=T.stateNode.containerInfo,ys=!0;break e}T=T.return}if(bt===null)throw Error(s(160));gm(y,k,g),bt=null,ys=!1;var D=g.alternate;D!==null&&(D.return=null),g.return=null}catch(Y){tt(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ym(a,r),a=a.sibling}function ym(r,a){var d=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bs(a,r),Ps(r),f&4){try{Oi(3,r,r.return),fo(3,r)}catch(we){tt(r,r.return,we)}try{Oi(5,r,r.return)}catch(we){tt(r,r.return,we)}}break;case 1:bs(a,r),Ps(r),f&512&&d!==null&&Dr(d,d.return);break;case 5:if(bs(a,r),Ps(r),f&512&&d!==null&&Dr(d,d.return),r.flags&32){var g=r.stateNode;try{fs(g,"")}catch(we){tt(r,r.return,we)}}if(f&4&&(g=r.stateNode,g!=null)){var y=r.memoizedProps,k=d!==null?d.memoizedProps:y,T=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&Te(g,y),Ml(T,k);var Y=Ml(T,y);for(k=0;k<D.length;k+=2){var ie=D[k],ce=D[k+1];ie==="style"?Zu(g,ce):ie==="dangerouslySetInnerHTML"?Ns(g,ce):ie==="children"?fs(g,ce):E(g,ie,ce,Y)}switch(T){case"input":Ne(g,y);break;case"textarea":he(g,y);break;case"select":var ne=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?dt(g,!!y.multiple,pe,!1):ne!==!!y.multiple&&(y.defaultValue!=null?dt(g,!!y.multiple,y.defaultValue,!0):dt(g,!!y.multiple,y.multiple?[]:"",!1))}g[Ni]=y}catch(we){tt(r,r.return,we)}}break;case 6:if(bs(a,r),Ps(r),f&4){if(r.stateNode===null)throw Error(s(162));g=r.stateNode,y=r.memoizedProps;try{g.nodeValue=y}catch(we){tt(r,r.return,we)}}break;case 3:if(bs(a,r),Ps(r),f&4&&d!==null&&d.memoizedState.isDehydrated)try{fi(a.containerInfo)}catch(we){tt(r,r.return,we)}break;case 4:bs(a,r),Ps(r);break;case 13:bs(a,r),Ps(r),g=r.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(ad=nt())),f&4&&xm(r);break;case 22:if(ie=d!==null&&d.memoizedState!==null,r.mode&1?(St=(Y=St)||ie,bs(a,r),St=Y):bs(a,r),Ps(r),f&8192){if(Y=r.memoizedState!==null,(r.stateNode.isHidden=Y)&&!ie&&(r.mode&1)!==0)for(xe=r,ie=r.child;ie!==null;){for(ce=xe=ie;xe!==null;){switch(ne=xe,pe=ne.child,ne.tag){case 0:case 11:case 14:case 15:Oi(4,ne,ne.return);break;case 1:Dr(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){f=ne,d=ne.return;try{a=f,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(we){tt(f,d,we)}}break;case 5:Dr(ne,ne.return);break;case 22:if(ne.memoizedState!==null){wm(ce);continue}}pe!==null?(pe.return=ne,xe=pe):wm(ce)}ie=ie.sibling}e:for(ie=null,ce=r;;){if(ce.tag===5){if(ie===null){ie=ce;try{g=ce.stateNode,Y?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=ce.stateNode,D=ce.memoizedProps.style,k=D!=null&&D.hasOwnProperty("display")?D.display:null,T.style.display=Ju("display",k))}catch(we){tt(r,r.return,we)}}}else if(ce.tag===6){if(ie===null)try{ce.stateNode.nodeValue=Y?"":ce.memoizedProps}catch(we){tt(r,r.return,we)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===r)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===r)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===r)break e;ie===ce&&(ie=null),ce=ce.return}ie===ce&&(ie=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:bs(a,r),Ps(r),f&4&&xm(r);break;case 21:break;default:bs(a,r),Ps(r)}}function Ps(r){var a=r.flags;if(a&2){try{e:{for(var d=r.return;d!==null;){if(mm(d)){var f=d;break e}d=d.return}throw Error(s(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(fs(g,""),f.flags&=-33);var y=pm(r);nd(r,y,g);break;case 3:case 4:var k=f.stateNode.containerInfo,T=pm(r);sd(r,T,k);break;default:throw Error(s(161))}}catch(D){tt(r,r.return,D)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function gb(r,a,d){xe=r,bm(r)}function bm(r,a,d){for(var f=(r.mode&1)!==0;xe!==null;){var g=xe,y=g.child;if(g.tag===22&&f){var k=g.memoizedState!==null||ho;if(!k){var T=g.alternate,D=T!==null&&T.memoizedState!==null||St;T=ho;var Y=St;if(ho=k,(St=D)&&!Y)for(xe=g;xe!==null;)k=xe,D=k.child,k.tag===22&&k.memoizedState!==null?jm(g):D!==null?(D.return=k,xe=D):jm(g);for(;y!==null;)xe=y,bm(y),y=y.sibling;xe=g,ho=T,St=Y}vm(r)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,xe=y):vm(r)}}function vm(r){for(;xe!==null;){var a=xe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:St||fo(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!St)if(d===null)f.componentDidMount();else{var g=a.elementType===a.type?d.memoizedProps:xs(a.type,d.memoizedProps);f.componentDidUpdate(g,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=a.updateQueue;y!==null&&wf(a,y,f);break;case 3:var k=a.updateQueue;if(k!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}wf(a,k,d)}break;case 5:var T=a.stateNode;if(d===null&&a.flags&4){d=T;var D=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&d.focus();break;case"img":D.src&&(d.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ie=Y.memoizedState;if(ie!==null){var ce=ie.dehydrated;ce!==null&&fi(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}St||a.flags&512&&td(a)}catch(ne){tt(a,a.return,ne)}}if(a===r){xe=null;break}if(d=a.sibling,d!==null){d.return=a.return,xe=d;break}xe=a.return}}function wm(r){for(;xe!==null;){var a=xe;if(a===r){xe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,xe=d;break}xe=a.return}}function jm(r){for(;xe!==null;){var a=xe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{fo(4,a)}catch(D){tt(a,d,D)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(D){tt(a,g,D)}}var y=a.return;try{td(a)}catch(D){tt(a,y,D)}break;case 5:var k=a.return;try{td(a)}catch(D){tt(a,k,D)}}}catch(D){tt(a,a.return,D)}if(a===r){xe=null;break}var T=a.sibling;if(T!==null){T.return=a.return,xe=T;break}xe=a.return}}var xb=Math.ceil,mo=R.ReactCurrentDispatcher,rd=R.ReactCurrentOwner,ls=R.ReactCurrentBatchConfig,Fe=0,gt=null,lt=null,vt=0,Zt=0,Mr=un(0),ht=0,Li=null,Vn=0,po=0,id=0,Fi=null,Ft=null,ad=0,Or=1/0,Ws=null,go=!1,od=null,xn=null,xo=!1,yn=null,yo=0,Ii=0,ld=null,bo=-1,vo=0;function Dt(){return(Fe&6)!==0?nt():bo!==-1?bo:bo=nt()}function bn(r){return(r.mode&1)===0?1:(Fe&2)!==0&&vt!==0?vt&-vt:eb.transition!==null?(vo===0&&(vo=mh()),vo):(r=He,r!==0||(r=window.event,r=r===void 0?16:_h(r.type)),r)}function vs(r,a,d,f){if(50<Ii)throw Ii=0,ld=null,Error(s(185));li(r,d,f),((Fe&2)===0||r!==gt)&&(r===gt&&((Fe&2)===0&&(po|=d),ht===4&&vn(r,vt)),It(r,f),d===1&&Fe===0&&(a.mode&1)===0&&(Or=nt()+500,Ya&&fn()))}function It(r,a){var d=r.callbackNode;ey(r,a);var f=Ea(r,r===gt?vt:0);if(f===0)d!==null&&uh(d),r.callbackNode=null,r.callbackPriority=0;else if(a=f&-f,r.callbackPriority!==a){if(d!=null&&uh(d),a===1)r.tag===0?Zy(Nm.bind(null,r)):cf(Nm.bind(null,r)),Xy(function(){(Fe&6)===0&&fn()}),d=null;else{switch(ph(f)){case 1:d=$l;break;case 4:d=hh;break;case 16:d=Na;break;case 536870912:d=fh;break;default:d=Na}d=Rm(d,_m.bind(null,r))}r.callbackPriority=a,r.callbackNode=d}}function _m(r,a){if(bo=-1,vo=0,(Fe&6)!==0)throw Error(s(327));var d=r.callbackNode;if(Lr()&&r.callbackNode!==d)return null;var f=Ea(r,r===gt?vt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||a)a=wo(r,f);else{a=f;var g=Fe;Fe|=2;var y=Sm();(gt!==r||vt!==a)&&(Ws=null,Or=nt()+500,qn(r,a));do try{vb();break}catch(T){km(r,T)}while(!0);Sc(),mo.current=y,Fe=g,lt!==null?a=0:(gt=null,vt=0,a=ht)}if(a!==0){if(a===2&&(g=Ul(r),g!==0&&(f=g,a=cd(r,g))),a===1)throw d=Li,qn(r,0),vn(r,f),It(r,nt()),d;if(a===6)vn(r,f);else{if(g=r.current.alternate,(f&30)===0&&!yb(g)&&(a=wo(r,f),a===2&&(y=Ul(r),y!==0&&(f=y,a=cd(r,y))),a===1))throw d=Li,qn(r,0),vn(r,f),It(r,nt()),d;switch(r.finishedWork=g,r.finishedLanes=f,a){case 0:case 1:throw Error(s(345));case 2:Yn(r,Ft,Ws);break;case 3:if(vn(r,f),(f&130023424)===f&&(a=ad+500-nt(),10<a)){if(Ea(r,0)!==0)break;if(g=r.suspendedLanes,(g&f)!==f){Dt(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=pc(Yn.bind(null,r,Ft,Ws),a);break}Yn(r,Ft,Ws);break;case 4:if(vn(r,f),(f&4194240)===f)break;for(a=r.eventTimes,g=-1;0<f;){var k=31-ms(f);y=1<<k,k=a[k],k>g&&(g=k),f&=~y}if(f=g,f=nt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*xb(f/1960))-f,10<f){r.timeoutHandle=pc(Yn.bind(null,r,Ft,Ws),f);break}Yn(r,Ft,Ws);break;case 5:Yn(r,Ft,Ws);break;default:throw Error(s(329))}}}return It(r,nt()),r.callbackNode===d?_m.bind(null,r):null}function cd(r,a){var d=Fi;return r.current.memoizedState.isDehydrated&&(qn(r,a).flags|=256),r=wo(r,a),r!==2&&(a=Ft,Ft=d,a!==null&&dd(a)),r}function dd(r){Ft===null?Ft=r:Ft.push.apply(Ft,r)}function yb(r){for(var a=r;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var g=d[f],y=g.getSnapshot;g=g.value;try{if(!ps(y(),g))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function vn(r,a){for(a&=~id,a&=~po,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var d=31-ms(a),f=1<<d;r[d]=-1,a&=~f}}function Nm(r){if((Fe&6)!==0)throw Error(s(327));Lr();var a=Ea(r,0);if((a&1)===0)return It(r,nt()),null;var d=wo(r,a);if(r.tag!==0&&d===2){var f=Ul(r);f!==0&&(a=f,d=cd(r,f))}if(d===1)throw d=Li,qn(r,0),vn(r,a),It(r,nt()),d;if(d===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,Yn(r,Ft,Ws),It(r,nt()),null}function ud(r,a){var d=Fe;Fe|=1;try{return r(a)}finally{Fe=d,Fe===0&&(Or=nt()+500,Ya&&fn())}}function Wn(r){yn!==null&&yn.tag===0&&(Fe&6)===0&&Lr();var a=Fe;Fe|=1;var d=ls.transition,f=He;try{if(ls.transition=null,He=1,r)return r()}finally{He=f,ls.transition=d,Fe=a,(Fe&6)===0&&fn()}}function hd(){Zt=Mr.current,Xe(Mr)}function qn(r,a){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,Ky(d)),lt!==null)for(d=lt.return;d!==null;){var f=d;switch(wc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Wa();break;case 3:Tr(),Xe(Mt),Xe(_t),Mc();break;case 5:Rc(f);break;case 4:Tr();break;case 13:Xe(Je);break;case 19:Xe(Je);break;case 10:Cc(f.type._context);break;case 22:case 23:hd()}d=d.return}if(gt=r,lt=r=wn(r.current,null),vt=Zt=a,ht=0,Li=null,id=po=Vn=0,Ft=Fi=null,$n!==null){for(a=0;a<$n.length;a++)if(d=$n[a],f=d.interleaved,f!==null){d.interleaved=null;var g=f.next,y=d.pending;if(y!==null){var k=y.next;y.next=g,f.next=k}d.pending=f}$n=null}return r}function km(r,a){do{var d=lt;try{if(Sc(),no.current=oo,ro){for(var f=Ze.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ro=!1}if(Hn=0,pt=ut=Ze=null,Ai=!1,Ti=0,rd.current=null,d===null||d.return===null){ht=1,Li=a,lt=null;break}e:{var y=r,k=d.return,T=d,D=a;if(a=vt,T.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=D,ie=T,ce=ie.tag;if((ie.mode&1)===0&&(ce===0||ce===11||ce===15)){var ne=ie.alternate;ne?(ie.updateQueue=ne.updateQueue,ie.memoizedState=ne.memoizedState,ie.lanes=ne.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=Qf(k);if(pe!==null){pe.flags&=-257,Gf(pe,k,T,y,a),pe.mode&1&&Xf(y,Y,a),a=pe,D=Y;var ve=a.updateQueue;if(ve===null){var we=new Set;we.add(D),a.updateQueue=we}else ve.add(D);break e}else{if((a&1)===0){Xf(y,Y,a),fd();break e}D=Error(s(426))}}else if(Ge&&T.mode&1){var rt=Qf(k);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Gf(rt,k,T,y,a),Nc(Rr(D,T));break e}}y=D=Rr(D,T),ht!==4&&(ht=2),Fi===null?Fi=[y]:Fi.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,a&=-a,y.lanes|=a;var B=Yf(y,D,a);vf(y,B);break e;case 1:T=D;var O=y.type,U=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(xn===null||!xn.has(U)))){y.flags|=65536,a&=-a,y.lanes|=a;var de=Kf(y,T,a);vf(y,de);break e}}y=y.return}while(y!==null)}Em(d)}catch(_e){a=_e,lt===d&&d!==null&&(lt=d=d.return);continue}break}while(!0)}function Sm(){var r=mo.current;return mo.current=oo,r===null?oo:r}function fd(){(ht===0||ht===3||ht===2)&&(ht=4),gt===null||(Vn&268435455)===0&&(po&268435455)===0||vn(gt,vt)}function wo(r,a){var d=Fe;Fe|=2;var f=Sm();(gt!==r||vt!==a)&&(Ws=null,qn(r,a));do try{bb();break}catch(g){km(r,g)}while(!0);if(Sc(),Fe=d,mo.current=f,lt!==null)throw Error(s(261));return gt=null,vt=0,ht}function bb(){for(;lt!==null;)Cm(lt)}function vb(){for(;lt!==null&&!W0();)Cm(lt)}function Cm(r){var a=Tm(r.alternate,r,Zt);r.memoizedProps=r.pendingProps,a===null?Em(r):lt=a,rd.current=null}function Em(r){var a=r;do{var d=a.alternate;if(r=a.return,(a.flags&32768)===0){if(d=hb(d,a,Zt),d!==null){lt=d;return}}else{if(d=fb(d,a),d!==null){d.flags&=32767,lt=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ht=6,lt=null;return}}if(a=a.sibling,a!==null){lt=a;return}lt=a=r}while(a!==null);ht===0&&(ht=5)}function Yn(r,a,d){var f=He,g=ls.transition;try{ls.transition=null,He=1,wb(r,a,d,f)}finally{ls.transition=g,He=f}return null}function wb(r,a,d,f){do Lr();while(yn!==null);if((Fe&6)!==0)throw Error(s(327));d=r.finishedWork;var g=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var y=d.lanes|d.childLanes;if(ty(r,y),r===gt&&(lt=gt=null,vt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||xo||(xo=!0,Rm(Na,function(){return Lr(),null})),y=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||y){y=ls.transition,ls.transition=null;var k=He;He=1;var T=Fe;Fe|=4,rd.current=null,pb(r,d),ym(d,r),$y(fc),Ta=!!hc,fc=hc=null,r.current=d,gb(d),q0(),Fe=T,He=k,ls.transition=y}else r.current=d;if(xo&&(xo=!1,yn=r,yo=g),y=r.pendingLanes,y===0&&(xn=null),X0(d.stateNode),It(r,nt()),a!==null)for(f=r.onRecoverableError,d=0;d<a.length;d++)g=a[d],f(g.value,{componentStack:g.stack,digest:g.digest});if(go)throw go=!1,r=od,od=null,r;return(yo&1)!==0&&r.tag!==0&&Lr(),y=r.pendingLanes,(y&1)!==0?r===ld?Ii++:(Ii=0,ld=r):Ii=0,fn(),null}function Lr(){if(yn!==null){var r=ph(yo),a=ls.transition,d=He;try{if(ls.transition=null,He=16>r?16:r,yn===null)var f=!1;else{if(r=yn,yn=null,yo=0,(Fe&6)!==0)throw Error(s(331));var g=Fe;for(Fe|=4,xe=r.current;xe!==null;){var y=xe,k=y.child;if((xe.flags&16)!==0){var T=y.deletions;if(T!==null){for(var D=0;D<T.length;D++){var Y=T[D];for(xe=Y;xe!==null;){var ie=xe;switch(ie.tag){case 0:case 11:case 15:Oi(8,ie,y)}var ce=ie.child;if(ce!==null)ce.return=ie,xe=ce;else for(;xe!==null;){ie=xe;var ne=ie.sibling,pe=ie.return;if(fm(ie),ie===Y){xe=null;break}if(ne!==null){ne.return=pe,xe=ne;break}xe=pe}}}var ve=y.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var rt=we.sibling;we.sibling=null,we=rt}while(we!==null)}}xe=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,xe=k;else e:for(;xe!==null;){if(y=xe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Oi(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,xe=B;break e}xe=y.return}}var O=r.current;for(xe=O;xe!==null;){k=xe;var U=k.child;if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,xe=U;else e:for(k=O;xe!==null;){if(T=xe,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:fo(9,T)}}catch(_e){tt(T,T.return,_e)}if(T===k){xe=null;break e}var de=T.sibling;if(de!==null){de.return=T.return,xe=de;break e}xe=T.return}}if(Fe=g,fn(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(ka,r)}catch{}f=!0}return f}finally{He=d,ls.transition=a}}return!1}function Pm(r,a,d){a=Rr(d,a),a=Yf(r,a,1),r=pn(r,a,1),a=Dt(),r!==null&&(li(r,1,a),It(r,a))}function tt(r,a,d){if(r.tag===3)Pm(r,r,d);else for(;a!==null;){if(a.tag===3){Pm(a,r,d);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(xn===null||!xn.has(f))){r=Rr(d,r),r=Kf(a,r,1),a=pn(a,r,1),r=Dt(),a!==null&&(li(a,1,r),It(a,r));break}}a=a.return}}function jb(r,a,d){var f=r.pingCache;f!==null&&f.delete(a),a=Dt(),r.pingedLanes|=r.suspendedLanes&d,gt===r&&(vt&d)===d&&(ht===4||ht===3&&(vt&130023424)===vt&&500>nt()-ad?qn(r,0):id|=d),It(r,a)}function Am(r,a){a===0&&((r.mode&1)===0?a=1:(a=Ca,Ca<<=1,(Ca&130023424)===0&&(Ca=4194304)));var d=Dt();r=Us(r,a),r!==null&&(li(r,a,d),It(r,d))}function _b(r){var a=r.memoizedState,d=0;a!==null&&(d=a.retryLane),Am(r,d)}function Nb(r,a){var d=0;switch(r.tag){case 13:var f=r.stateNode,g=r.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(s(314))}f!==null&&f.delete(a),Am(r,d)}var Tm;Tm=function(r,a,d){if(r!==null)if(r.memoizedProps!==a.pendingProps||Mt.current)Lt=!0;else{if((r.lanes&d)===0&&(a.flags&128)===0)return Lt=!1,ub(r,a,d);Lt=(r.flags&131072)!==0}else Lt=!1,Ge&&(a.flags&1048576)!==0&&df(a,Xa,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;uo(r,a),r=a.pendingProps;var g=Nr(a,_t.current);Ar(a,d),g=Fc(null,a,f,r,g,d);var y=Ic();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ot(f)?(y=!0,qa(a)):y=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ac(a),g.updater=lo,a.stateNode=g,g._reactInternals=a,Vc(a,f,r,d),a=Kc(null,a,f,!0,y,d)):(a.tag=0,Ge&&y&&vc(a),Rt(null,a,g,d),a=a.child),a;case 16:f=a.elementType;e:{switch(uo(r,a),r=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=Sb(f),r=xs(f,r),g){case 0:a=Yc(null,a,f,r,d);break e;case 1:a=nm(null,a,f,r,d);break e;case 11:a=Jf(null,a,f,r,d);break e;case 14:a=Zf(null,a,f,xs(f.type,r),d);break e}throw Error(s(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:xs(f,g),Yc(r,a,f,g,d);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:xs(f,g),nm(r,a,f,g,d);case 3:e:{if(rm(a),r===null)throw Error(s(387));f=a.pendingProps,y=a.memoizedState,g=y.element,bf(r,a),to(a,f,null,d);var k=a.memoizedState;if(f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){g=Rr(Error(s(423)),a),a=im(r,a,f,d,g);break e}else if(f!==g){g=Rr(Error(s(424)),a),a=im(r,a,f,d,g);break e}else for(Jt=dn(a.stateNode.containerInfo.firstChild),Gt=a,Ge=!0,gs=null,d=xf(a,null,f,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Cr(),f===g){a=Vs(r,a,d);break e}Rt(r,a,f,d)}a=a.child}return a;case 5:return jf(a),r===null&&_c(a),f=a.type,g=a.pendingProps,y=r!==null?r.memoizedProps:null,k=g.children,mc(f,g)?k=null:y!==null&&mc(f,y)&&(a.flags|=32),sm(r,a),Rt(r,a,k,d),a.child;case 6:return r===null&&_c(a),null;case 13:return am(r,a,d);case 4:return Tc(a,a.stateNode.containerInfo),f=a.pendingProps,r===null?a.child=Er(a,null,f,d):Rt(r,a,f,d),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:xs(f,g),Jf(r,a,f,g,d);case 7:return Rt(r,a,a.pendingProps,d),a.child;case 8:return Rt(r,a,a.pendingProps.children,d),a.child;case 12:return Rt(r,a,a.pendingProps.children,d),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,y=a.memoizedProps,k=g.value,Ye(Ja,f._currentValue),f._currentValue=k,y!==null)if(ps(y.value,k)){if(y.children===g.children&&!Mt.current){a=Vs(r,a,d);break e}}else for(y=a.child,y!==null&&(y.return=a);y!==null;){var T=y.dependencies;if(T!==null){k=y.child;for(var D=T.firstContext;D!==null;){if(D.context===f){if(y.tag===1){D=Hs(-1,d&-d),D.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var ie=Y.pending;ie===null?D.next=D:(D.next=ie.next,ie.next=D),Y.pending=D}}y.lanes|=d,D=y.alternate,D!==null&&(D.lanes|=d),Ec(y.return,d,a),T.lanes|=d;break}D=D.next}}else if(y.tag===10)k=y.type===a.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(s(341));k.lanes|=d,T=k.alternate,T!==null&&(T.lanes|=d),Ec(k,d,a),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===a){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}Rt(r,a,g.children,d),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,Ar(a,d),g=as(g),f=f(g),a.flags|=1,Rt(r,a,f,d),a.child;case 14:return f=a.type,g=xs(f,a.pendingProps),g=xs(f.type,g),Zf(r,a,f,g,d);case 15:return em(r,a,a.type,a.pendingProps,d);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:xs(f,g),uo(r,a),a.tag=1,Ot(f)?(r=!0,qa(a)):r=!1,Ar(a,d),Wf(a,f,g),Vc(a,f,g,d),Kc(null,a,f,!0,r,d);case 19:return lm(r,a,d);case 22:return tm(r,a,d)}throw Error(s(156,a.tag))};function Rm(r,a){return dh(r,a)}function kb(r,a,d,f){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(r,a,d,f){return new kb(r,a,d,f)}function md(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Sb(r){if(typeof r=="function")return md(r)?1:0;if(r!=null){if(r=r.$$typeof,r===X)return 11;if(r===le)return 14}return 2}function wn(r,a){var d=r.alternate;return d===null?(d=cs(r.tag,a,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=a,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,a=r.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function jo(r,a,d,f,g,y){var k=2;if(f=r,typeof r=="function")md(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case H:return Kn(d.children,g,y,a);case z:k=8,g|=8;break;case K:return r=cs(12,d,a,g|2),r.elementType=K,r.lanes=y,r;case $:return r=cs(13,d,a,g),r.elementType=$,r.lanes=y,r;case re:return r=cs(19,d,a,g),r.elementType=re,r.lanes=y,r;case Z:return _o(d,g,y,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case W:k=10;break e;case M:k=9;break e;case X:k=11;break e;case le:k=14;break e;case V:k=16,f=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return a=cs(k,d,a,g),a.elementType=r,a.type=f,a.lanes=y,a}function Kn(r,a,d,f){return r=cs(7,r,f,a),r.lanes=d,r}function _o(r,a,d,f){return r=cs(22,r,f,a),r.elementType=Z,r.lanes=d,r.stateNode={isHidden:!1},r}function pd(r,a,d){return r=cs(6,r,null,a),r.lanes=d,r}function gd(r,a,d){return a=cs(4,r.children!==null?r.children:[],r.key,a),a.lanes=d,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Cb(r,a,d,f,g){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function xd(r,a,d,f,g,y,k,T,D){return r=new Cb(r,a,d,T,D),a===1?(a=1,y===!0&&(a|=8)):a=0,y=cs(3,null,null,a),r.current=y,y.stateNode=r,y.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(y),r}function Eb(r,a,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:r,containerInfo:a,implementation:d}}function Dm(r){if(!r)return hn;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(s(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ot(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(s(171))}if(r.tag===1){var d=r.type;if(Ot(d))return of(r,d,a)}return a}function Mm(r,a,d,f,g,y,k,T,D){return r=xd(d,f,!0,r,g,y,k,T,D),r.context=Dm(null),d=r.current,f=Dt(),g=bn(d),y=Hs(f,g),y.callback=a??null,pn(d,y,g),r.current.lanes=g,li(r,g,f),It(r,f),r}function No(r,a,d,f){var g=a.current,y=Dt(),k=bn(g);return d=Dm(d),a.context===null?a.context=d:a.pendingContext=d,a=Hs(y,k),a.payload={element:r},f=f===void 0?null:f,f!==null&&(a.callback=f),r=pn(g,a,k),r!==null&&(vs(r,g,k,y),eo(r,g,k)),k}function ko(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Om(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<a?d:a}}function yd(r,a){Om(r,a),(r=r.alternate)&&Om(r,a)}function Pb(){return null}var Lm=typeof reportError=="function"?reportError:function(r){console.error(r)};function bd(r){this._internalRoot=r}So.prototype.render=bd.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));No(r,a,null,null)},So.prototype.unmount=bd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Wn(function(){No(null,r,null,null)}),a[Is]=null}};function So(r){this._internalRoot=r}So.prototype.unstable_scheduleHydration=function(r){if(r){var a=yh();r={blockedOn:null,target:r,priority:a};for(var d=0;d<on.length&&a!==0&&a<on[d].priority;d++);on.splice(d,0,r),d===0&&wh(r)}};function vd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Co(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function Ab(r,a,d,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var Y=ko(k);y.call(Y)}}var k=Mm(a,f,r,0,null,!1,!1,"",Fm);return r._reactRootContainer=k,r[Is]=k.current,ji(r.nodeType===8?r.parentNode:r),Wn(),k}for(;g=r.lastChild;)r.removeChild(g);if(typeof f=="function"){var T=f;f=function(){var Y=ko(D);T.call(Y)}}var D=xd(r,0,!1,null,null,!1,!1,"",Fm);return r._reactRootContainer=D,r[Is]=D.current,ji(r.nodeType===8?r.parentNode:r),Wn(function(){No(a,D,d,f)}),D}function Eo(r,a,d,f,g){var y=d._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var T=g;g=function(){var D=ko(k);T.call(D)}}No(a,k,r,g)}else k=Ab(d,a,r,g,f);return ko(k)}gh=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var d=oi(a.pendingLanes);d!==0&&(Vl(a,d|1),It(a,nt()),(Fe&6)===0&&(Or=nt()+500,fn()))}break;case 13:Wn(function(){var f=Us(r,1);if(f!==null){var g=Dt();vs(f,r,1,g)}}),yd(r,1)}},Wl=function(r){if(r.tag===13){var a=Us(r,134217728);if(a!==null){var d=Dt();vs(a,r,134217728,d)}yd(r,134217728)}},xh=function(r){if(r.tag===13){var a=bn(r),d=Us(r,a);if(d!==null){var f=Dt();vs(d,r,a,f)}yd(r,a)}},yh=function(){return He},bh=function(r,a){var d=He;try{return He=r,a()}finally{He=d}},Fl=function(r,a,d){switch(a){case"input":if(Ne(r,d),a=d.name,d.type==="radio"&&a!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var f=d[a];if(f!==r&&f.form===r.form){var g=Va(f);if(!g)throw Error(s(90));ze(f),Ne(f,g)}}}break;case"textarea":he(r,d);break;case"select":a=d.value,a!=null&&dt(r,!!d.multiple,a,!1)}},nh=ud,rh=Wn;var Tb={usingClientEntryPoint:!1,Events:[ki,jr,Va,th,sh,ud]},zi={findFiberByHostInstance:Fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rb={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=lh(r),r===null?null:r.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||Pb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Po.isDisabled&&Po.supportsFiber)try{ka=Po.inject(Rb),ks=Po}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb,zt.createPortal=function(r,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(a))throw Error(s(200));return Eb(r,a,null,d)},zt.createRoot=function(r,a){if(!vd(r))throw Error(s(299));var d=!1,f="",g=Lm;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=xd(r,1,!1,null,null,d,!1,f,g),r[Is]=a.current,ji(r.nodeType===8?r.parentNode:r),new bd(a)},zt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=lh(a),r=r===null?null:r.stateNode,r},zt.flushSync=function(r){return Wn(r)},zt.hydrate=function(r,a,d){if(!Co(a))throw Error(s(200));return Eo(null,r,a,!0,d)},zt.hydrateRoot=function(r,a,d){if(!vd(r))throw Error(s(405));var f=d!=null&&d.hydratedSources||null,g=!1,y="",k=Lm;if(d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),a=Mm(a,null,r,1,d??null,g,!1,y,k),r[Is]=a.current,ji(r),f)for(r=0;r<f.length;r++)d=f[r],g=d._getVersion,g=g(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,g]:a.mutableSourceEagerHydrationData.push(d,g);return new So(a)},zt.render=function(r,a,d){if(!Co(a))throw Error(s(200));return Eo(null,r,a,!1,d)},zt.unmountComponentAtNode=function(r){if(!Co(r))throw Error(s(40));return r._reactRootContainer?(Wn(function(){Eo(null,null,r,!1,function(){r._reactRootContainer=null,r[Is]=null})}),!0):!1},zt.unstable_batchedUpdates=ud,zt.unstable_renderSubtreeIntoContainer=function(r,a,d,f){if(!Co(d))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return Eo(r,a,d,!1,f)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var Wm;function qg(){if(Wm)return _d.exports;Wm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_d.exports=$b(),_d.exports}var qm;function Ub(){if(qm)return Ao;qm=1;var t=qg();return Ao.createRoot=t.createRoot,Ao.hydrateRoot=t.hydrateRoot,Ao}var Hb=Ub();const Vb=Wg(Hb);qg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ra.apply(this,arguments)}var Nn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nn||(Nn={}));const Ym="popstate";function Wb(t){t===void 0&&(t={});function e(n,i){let{pathname:l,search:c,hash:u}=n.location;return Xd("",{pathname:l,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:tl(i)}return Yb(e,s,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qb(){return Math.random().toString(36).substr(2,8)}function Km(t,e){return{usr:t.state,key:t.key,idx:e}}function Xd(t,e,s,n){return s===void 0&&(s=null),ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xr(e):e,{state:s,key:e&&e.key||n||qb()})}function tl(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xr(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Yb(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:l=!1}=n,c=i.history,u=Nn.Pop,h=null,m=p();m==null&&(m=0,c.replaceState(ra({},c.state,{idx:m}),""));function p(){return(c.state||{idx:null}).idx}function x(){u=Nn.Pop;let _=p(),C=_==null?null:_-m;m=_,h&&h({action:u,location:v.location,delta:C})}function b(_,C){u=Nn.Push;let S=Xd(v.location,_,C);m=p()+1;let E=Km(S,m),R=v.createHref(S);try{c.pushState(E,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(R)}l&&h&&h({action:u,location:v.location,delta:1})}function w(_,C){u=Nn.Replace;let S=Xd(v.location,_,C);m=p();let E=Km(S,m),R=v.createHref(S);c.replaceState(E,"",R),l&&h&&h({action:u,location:v.location,delta:0})}function j(_){let C=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof _=="string"?_:tl(_);return S=S.replace(/ $/,"%20"),at(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let v={get action(){return u},get location(){return t(i,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Ym,x),h=_,()=>{i.removeEventListener(Ym,x),h=null}},createHref(_){return e(i,_)},createURL:j,encodeLocation(_){let C=j(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:w,go(_){return c.go(_)}};return v}var Xm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xm||(Xm={}));function Kb(t,e,s){return s===void 0&&(s="/"),Xb(t,e,s)}function Xb(t,e,s,n){let i=typeof e=="string"?Xr(e):e,l=wu(i.pathname||"/",s);if(l==null)return null;let c=Kg(t);Qb(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=lv(l);u=iv(c[h],m)}return u}function Kg(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(l,c,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(at(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let m=Cn([n,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(at(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Kg(l.children,e,p,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:nv(m,l.index),routesMeta:p})};return t.forEach((l,c)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,c);else for(let h of Xg(l.path))i(l,c,h)}),e}function Xg(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let c=Xg(n.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function Qb(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:rv(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Gb=/^:[\w-]+$/,Jb=3,Zb=2,ev=1,tv=10,sv=-2,Qm=t=>t==="*";function nv(t,e){let s=t.split("/"),n=s.length;return s.some(Qm)&&(n+=sv),e&&(n+=Zb),s.filter(i=>!Qm(i)).reduce((i,l)=>i+(Gb.test(l)?Jb:l===""?ev:tv),n)}function rv(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function iv(t,e,s){let{routesMeta:n}=t,i={},l="/",c=[];for(let u=0;u<n.length;++u){let h=n[u],m=u===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",x=av({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),b=h.route;if(!x)return null;Object.assign(i,x.params),c.push({params:i,pathname:Cn([l,x.pathname]),pathnameBase:hv(Cn([l,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(l=Cn([l,x.pathnameBase]))}return c}function av(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=ov(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((m,p,x)=>{let{paramName:b,isOptional:w}=p;if(b==="*"){let v=u[x]||"";c=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const j=u[x];return w&&!j?m[b]=void 0:m[b]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:t}}function ov(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Yg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function lv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function cv(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Xr(t):t;return{pathname:s?s.startsWith("/")?s:dv(s,e):e,search:fv(n),hash:mv(i)}}function dv(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Sd(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function ju(t,e){let s=uv(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function _u(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Xr(t):(i=ra({},t),at(!i.pathname||!i.pathname.includes("?"),Sd("?","pathname","search",i)),at(!i.pathname||!i.pathname.includes("#"),Sd("#","pathname","hash",i)),at(!i.search||!i.search.includes("#"),Sd("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,u;if(c==null)u=s;else{let x=e.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),x-=1;i.pathname=b.join("/")}u=x>=0?e[x]:"/"}let h=cv(i,u),m=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}const Cn=t=>t.join("/").replace(/\/\/+/g,"/"),hv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qg=["post","put","patch","delete"];new Set(Qg);const gv=["get",...Qg];new Set(gv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ia.apply(this,arguments)}const Nu=N.createContext(null),xv=N.createContext(null),Dn=N.createContext(null),pl=N.createContext(null),tn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Gg=N.createContext(null);function yv(t,e){let{relative:s}=e===void 0?{}:e;Qr()||at(!1);let{basename:n,navigator:i}=N.useContext(Dn),{hash:l,pathname:c,search:u}=Zg(t,{relative:s}),h=c;return n!=="/"&&(h=c==="/"?n:Cn([n,c])),i.createHref({pathname:h,search:u,hash:l})}function Qr(){return N.useContext(pl)!=null}function Gr(){return Qr()||at(!1),N.useContext(pl).location}function Jg(t){N.useContext(Dn).static||N.useLayoutEffect(t)}function dr(){let{isDataRoute:t}=N.useContext(tn);return t?Rv():bv()}function bv(){Qr()||at(!1);let t=N.useContext(Nu),{basename:e,future:s,navigator:n}=N.useContext(Dn),{matches:i}=N.useContext(tn),{pathname:l}=Gr(),c=JSON.stringify(ju(i,s.v7_relativeSplatPath)),u=N.useRef(!1);return Jg(()=>{u.current=!0}),N.useCallback(function(m,p){if(p===void 0&&(p={}),!u.current)return;if(typeof m=="number"){n.go(m);return}let x=_u(m,JSON.parse(c),l,p.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Cn([e,x.pathname])),(p.replace?n.replace:n.push)(x,p.state,p)},[e,n,c,l,t])}function vv(){let{matches:t}=N.useContext(tn),e=t[t.length-1];return e?e.params:{}}function Zg(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=N.useContext(Dn),{matches:i}=N.useContext(tn),{pathname:l}=Gr(),c=JSON.stringify(ju(i,n.v7_relativeSplatPath));return N.useMemo(()=>_u(t,JSON.parse(c),l,s==="path"),[t,c,l,s])}function wv(t,e){return jv(t,e)}function jv(t,e,s,n){Qr()||at(!1);let{navigator:i}=N.useContext(Dn),{matches:l}=N.useContext(tn),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Gr(),p;if(e){var x;let _=typeof e=="string"?Xr(e):e;h==="/"||(x=_.pathname)!=null&&x.startsWith(h)||at(!1),p=_}else p=m;let b=p.pathname||"/",w=b;if(h!=="/"){let _=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let j=Kb(t,{pathname:w}),v=Cv(j&&j.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Cn([h,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Cn([h,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),l,s,n);return e&&v?N.createElement(pl.Provider,{value:{location:ia({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Nn.Pop}},v):v}function _v(){let t=Tv(),e=pv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:i},s):null,null)}const Nv=N.createElement(_v,null);class kv extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?N.createElement(tn.Provider,{value:this.props.routeContext},N.createElement(Gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sv(t){let{routeContext:e,match:s,children:n}=t,i=N.useContext(Nu);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(tn.Provider,{value:e},n)}function Cv(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,u=(i=s)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);p>=0||at(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,m=-1;if(s&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=p),x.route.id){let{loaderData:b,errors:w}=s,j=x.route.loader&&b[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||j){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((p,x,b)=>{let w,j=!1,v=null,_=null;s&&(w=u&&x.route.id?u[x.route.id]:void 0,v=x.route.errorElement||Nv,h&&(m<0&&b===0?(Dv("route-fallback"),j=!0,_=null):m===b&&(j=!0,_=x.route.hydrateFallbackElement||null)));let C=e.concat(c.slice(0,b+1)),S=()=>{let E;return w?E=v:j?E=_:x.route.Component?E=N.createElement(x.route.Component,null):x.route.element?E=x.route.element:E=p,N.createElement(Sv,{match:x,routeContext:{outlet:p,matches:C,isDataRoute:s!=null},children:E})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?N.createElement(kv,{location:s.location,revalidation:s.revalidation,component:v,error:w,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var ex=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(ex||{}),tx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(tx||{});function Ev(t){let e=N.useContext(Nu);return e||at(!1),e}function Pv(t){let e=N.useContext(xv);return e||at(!1),e}function Av(t){let e=N.useContext(tn);return e||at(!1),e}function sx(t){let e=Av(),s=e.matches[e.matches.length-1];return s.route.id||at(!1),s.route.id}function Tv(){var t;let e=N.useContext(Gg),s=Pv(),n=sx();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function Rv(){let{router:t}=Ev(ex.UseNavigateStable),e=sx(tx.UseNavigateStable),s=N.useRef(!1);return Jg(()=>{s.current=!0}),N.useCallback(function(i,l){l===void 0&&(l={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ia({fromRouteId:e},l)))},[t,e])}const Gm={};function Dv(t,e,s){Gm[t]||(Gm[t]=!0)}function Mv(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Qd(t){let{to:e,replace:s,state:n,relative:i}=t;Qr()||at(!1);let{future:l,static:c}=N.useContext(Dn),{matches:u}=N.useContext(tn),{pathname:h}=Gr(),m=dr(),p=_u(e,ju(u,l.v7_relativeSplatPath),h,i==="path"),x=JSON.stringify(p);return N.useEffect(()=>m(JSON.parse(x),{replace:s,state:n,relative:i}),[m,x,i,s,n]),null}function wt(t){at(!1)}function Ov(t){let{basename:e="/",children:s=null,location:n,navigationType:i=Nn.Pop,navigator:l,static:c=!1,future:u}=t;Qr()&&at(!1);let h=e.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:h,navigator:l,static:c,future:ia({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);typeof n=="string"&&(n=Xr(n));let{pathname:p="/",search:x="",hash:b="",state:w=null,key:j="default"}=n,v=N.useMemo(()=>{let _=wu(p,h);return _==null?null:{location:{pathname:_,search:x,hash:b,state:w,key:j},navigationType:i}},[h,p,x,b,w,j,i]);return v==null?null:N.createElement(Dn.Provider,{value:m},N.createElement(pl.Provider,{children:s,value:v}))}function Lv(t){let{children:e,location:s}=t;return wv(Gd(e),s)}new Promise(()=>{});function Gd(t,e){e===void 0&&(e=[]);let s=[];return N.Children.forEach(t,(n,i)=>{if(!N.isValidElement(n))return;let l=[...e,i];if(n.type===N.Fragment){s.push.apply(s,Gd(n.props.children,l));return}n.type!==wt&&at(!1),!n.props.index||!n.props.children||at(!1);let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Gd(n.props.children,l)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jd(){return Jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Jd.apply(this,arguments)}function Fv(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function Iv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zv(t,e){return t.button===0&&(!e||e==="_self")&&!Iv(t)}const Bv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$v="6";try{window.__reactRouterVersion=$v}catch{}const Uv="startTransition",Jm=Ib[Uv];function Hv(t){let{basename:e,children:s,future:n,window:i}=t,l=N.useRef();l.current==null&&(l.current=Wb({window:i,v5Compat:!0}));let c=l.current,[u,h]=N.useState({action:c.action,location:c.location}),{v7_startTransition:m}=n||{},p=N.useCallback(x=>{m&&Jm?Jm(()=>h(x)):h(x)},[h,m]);return N.useLayoutEffect(()=>c.listen(p),[c,p]),N.useEffect(()=>Mv(n),[n]),N.createElement(Ov,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:n})}const Vv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zm=N.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:p,viewTransition:x}=e,b=Fv(e,Bv),{basename:w}=N.useContext(Dn),j,v=!1;if(typeof m=="string"&&Wv.test(m)&&(j=m,Vv))try{let E=new URL(window.location.href),R=m.startsWith("//")?new URL(E.protocol+m):new URL(m),A=wu(R.pathname,w);R.origin===E.origin&&A!=null?m=A+R.search+R.hash:v=!0}catch{}let _=yv(m,{relative:i}),C=qv(m,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:x});function S(E){n&&n(E),E.defaultPrevented||C(E)}return N.createElement("a",Jd({},b,{href:j||_,onClick:v||l?n:S,ref:s,target:h}))});var ep;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ep||(ep={}));var tp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tp||(tp={}));function qv(t,e){let{target:s,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:u}=e===void 0?{}:e,h=dr(),m=Gr(),p=Zg(t,{relative:c});return N.useCallback(x=>{if(zv(x,s)){x.preventDefault();let b=n!==void 0?n:tl(m)===tl(p);h(t,{replace:b,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[m,h,p,n,i,s,t,l,c,u])}function nx(t,e){return function(){return t.apply(e,arguments)}}const{toString:Yv}=Object.prototype,{getPrototypeOf:ku}=Object,{iterator:gl,toStringTag:rx}=Symbol,xl=(t=>e=>{const s=Yv.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),_s=t=>(t=t.toLowerCase(),e=>xl(e)===t),yl=t=>e=>typeof e===t,{isArray:Jr}=Array,aa=yl("undefined");function ga(t){return t!==null&&!aa(t)&&t.constructor!==null&&!aa(t.constructor)&&qt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ix=_s("ArrayBuffer");function Kv(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ix(t.buffer),e}const Xv=yl("string"),qt=yl("function"),ax=yl("number"),xa=t=>t!==null&&typeof t=="object",Qv=t=>t===!0||t===!1,Qo=t=>{if(xl(t)!=="object")return!1;const e=ku(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(rx in t)&&!(gl in t)},Gv=t=>{if(!xa(t)||ga(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Jv=_s("Date"),Zv=_s("File"),ew=_s("Blob"),tw=_s("FileList"),sw=t=>xa(t)&&qt(t.pipe),nw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qt(t.append)&&((e=xl(t))==="formdata"||e==="object"&&qt(t.toString)&&t.toString()==="[object FormData]"))},rw=_s("URLSearchParams"),[iw,aw,ow,lw]=["ReadableStream","Request","Response","Headers"].map(_s),cw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ya(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Jr(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(ga(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let u;for(n=0;n<c;n++)u=l[n],e.call(null,t[u],u,t)}}function ox(t,e){if(ga(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lx=t=>!aa(t)&&t!==tr;function Zd(){const{caseless:t}=lx(this)&&this||{},e={},s=(n,i)=>{const l=t&&ox(e,i)||i;Qo(e[l])&&Qo(n)?e[l]=Zd(e[l],n):Qo(n)?e[l]=Zd({},n):Jr(n)?e[l]=n.slice():e[l]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&ya(arguments[n],s);return e}const dw=(t,e,s,{allOwnKeys:n}={})=>(ya(e,(i,l)=>{s&&qt(i)?t[l]=nx(i,s):t[l]=i},{allOwnKeys:n}),t),uw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hw=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},fw=(t,e,s,n)=>{let i,l,c;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!n||n(c,t,e))&&!u[c]&&(e[c]=t[c],u[c]=!0);t=s!==!1&&ku(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},mw=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},pw=t=>{if(!t)return null;if(Jr(t))return t;let e=t.length;if(!ax(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},gw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ku(Uint8Array)),xw=(t,e)=>{const n=(t&&t[gl]).call(t);let i;for(;(i=n.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},yw=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},bw=_s("HTMLFormElement"),vw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),sp=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),ww=_s("RegExp"),cx=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};ya(s,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(n[l]=c||i)}),Object.defineProperties(t,n)},jw=t=>{cx(t,(e,s)=>{if(qt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(qt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},_w=(t,e)=>{const s={},n=i=>{i.forEach(l=>{s[l]=!0})};return Jr(t)?n(t):n(String(t).split(e)),s},Nw=()=>{},kw=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Sw(t){return!!(t&&qt(t.append)&&t[rx]==="FormData"&&t[gl])}const Cw=t=>{const e=new Array(10),s=(n,i)=>{if(xa(n)){if(e.indexOf(n)>=0)return;if(ga(n))return n;if(!("toJSON"in n)){e[i]=n;const l=Jr(n)?[]:{};return ya(n,(c,u)=>{const h=s(c,i+1);!aa(h)&&(l[u]=h)}),e[i]=void 0,l}}return n};return s(t,0)},Ew=_s("AsyncFunction"),Pw=t=>t&&(xa(t)||qt(t))&&qt(t.then)&&qt(t.catch),dx=((t,e)=>t?setImmediate:e?((s,n)=>(tr.addEventListener("message",({source:i,data:l})=>{i===tr&&l===s&&n.length&&n.shift()()},!1),i=>{n.push(i),tr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",qt(tr.postMessage)),Aw=typeof queueMicrotask<"u"?queueMicrotask.bind(tr):typeof process<"u"&&process.nextTick||dx,Tw=t=>t!=null&&qt(t[gl]),Q={isArray:Jr,isArrayBuffer:ix,isBuffer:ga,isFormData:nw,isArrayBufferView:Kv,isString:Xv,isNumber:ax,isBoolean:Qv,isObject:xa,isPlainObject:Qo,isEmptyObject:Gv,isReadableStream:iw,isRequest:aw,isResponse:ow,isHeaders:lw,isUndefined:aa,isDate:Jv,isFile:Zv,isBlob:ew,isRegExp:ww,isFunction:qt,isStream:sw,isURLSearchParams:rw,isTypedArray:gw,isFileList:tw,forEach:ya,merge:Zd,extend:dw,trim:cw,stripBOM:uw,inherits:hw,toFlatObject:fw,kindOf:xl,kindOfTest:_s,endsWith:mw,toArray:pw,forEachEntry:xw,matchAll:yw,isHTMLForm:bw,hasOwnProperty:sp,hasOwnProp:sp,reduceDescriptors:cx,freezeMethods:jw,toObjectSet:_w,toCamelCase:vw,noop:Nw,toFiniteNumber:kw,findKey:ox,global:tr,isContextDefined:lx,isSpecCompliantForm:Sw,toJSONObject:Cw,isAsyncFn:Ew,isThenable:Pw,setImmediate:dx,asap:Aw,isIterable:Tw};function Ae(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Q.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const ux=Ae.prototype,hx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hx[t]={value:t}});Object.defineProperties(Ae,hx);Object.defineProperty(ux,"isAxiosError",{value:!0});Ae.from=(t,e,s,n,i,l)=>{const c=Object.create(ux);return Q.toFlatObject(t,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Ae.call(c,t.message,e,s,n,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const Rw=null;function eu(t){return Q.isPlainObject(t)||Q.isArray(t)}function fx(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function np(t,e,s){return t?t.concat(e).map(function(i,l){return i=fx(i),!s&&l?"["+i+"]":i}).join(s?".":""):e}function Dw(t){return Q.isArray(t)&&!t.some(eu)}const Mw=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function bl(t,e,s){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=Q.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!Q.isUndefined(_[v])});const n=s.metaTokens,i=s.visitor||p,l=s.dots,c=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(i))throw new TypeError("visitor must be a function");function m(j){if(j===null)return"";if(Q.isDate(j))return j.toISOString();if(Q.isBoolean(j))return j.toString();if(!h&&Q.isBlob(j))throw new Ae("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(j)||Q.isTypedArray(j)?h&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,v,_){let C=j;if(j&&!_&&typeof j=="object"){if(Q.endsWith(v,"{}"))v=n?v:v.slice(0,-2),j=JSON.stringify(j);else if(Q.isArray(j)&&Dw(j)||(Q.isFileList(j)||Q.endsWith(v,"[]"))&&(C=Q.toArray(j)))return v=fx(v),C.forEach(function(E,R){!(Q.isUndefined(E)||E===null)&&e.append(c===!0?np([v],R,l):c===null?v:v+"[]",m(E))}),!1}return eu(j)?!0:(e.append(np(_,v,l),m(j)),!1)}const x=[],b=Object.assign(Mw,{defaultVisitor:p,convertValue:m,isVisitable:eu});function w(j,v){if(!Q.isUndefined(j)){if(x.indexOf(j)!==-1)throw Error("Circular reference detected in "+v.join("."));x.push(j),Q.forEach(j,function(C,S){(!(Q.isUndefined(C)||C===null)&&i.call(e,C,Q.isString(S)?S.trim():S,v,b))===!0&&w(C,v?v.concat(S):[S])}),x.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return w(t),e}function rp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Su(t,e){this._pairs=[],t&&bl(t,this,e)}const mx=Su.prototype;mx.append=function(e,s){this._pairs.push([e,s])};mx.toString=function(e){const s=e?function(n){return e.call(this,n,rp)}:rp;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Ow(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function px(t,e,s){if(!e)return t;const n=s&&s.encode||Ow;Q.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let l;if(i?l=i(e,s):l=Q.isURLSearchParams(e)?e.toString():new Su(e,s).toString(n),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class ip{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(n){n!==null&&e(n)})}}const gx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lw=typeof URLSearchParams<"u"?URLSearchParams:Su,Fw=typeof FormData<"u"?FormData:null,Iw=typeof Blob<"u"?Blob:null,zw={isBrowser:!0,classes:{URLSearchParams:Lw,FormData:Fw,Blob:Iw},protocols:["http","https","file","blob","url","data"]},Cu=typeof window<"u"&&typeof document<"u",tu=typeof navigator=="object"&&navigator||void 0,Bw=Cu&&(!tu||["ReactNative","NativeScript","NS"].indexOf(tu.product)<0),$w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uw=Cu&&window.location.href||"http://localhost",Hw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cu,hasStandardBrowserEnv:Bw,hasStandardBrowserWebWorkerEnv:$w,navigator:tu,origin:Uw},Symbol.toStringTag,{value:"Module"})),Et={...Hw,...zw};function Vw(t,e){return bl(t,new Et.classes.URLSearchParams,{visitor:function(s,n,i,l){return Et.isNode&&Q.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function Ww(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qw(t){const e={},s=Object.keys(t);let n;const i=s.length;let l;for(n=0;n<i;n++)l=s[n],e[l]=t[l];return e}function xx(t){function e(s,n,i,l){let c=s[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=s.length;return c=!c&&Q.isArray(i)?i.length:c,h?(Q.hasOwnProp(i,c)?i[c]=[i[c],n]:i[c]=n,!u):((!i[c]||!Q.isObject(i[c]))&&(i[c]=[]),e(s,n,i[c],l)&&Q.isArray(i[c])&&(i[c]=qw(i[c])),!u)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const s={};return Q.forEachEntry(t,(n,i)=>{e(Ww(n),i,s,0)}),s}return null}function Yw(t,e,s){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const ba={transitional:gx,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,l=Q.isObject(e);if(l&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return i?JSON.stringify(xx(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Vw(e,this.formSerializer).toString();if((u=Q.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return bl(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||i?(s.setContentType("application/json",!1),Yw(e)):e}],transformResponse:[function(e){const s=this.transitional||ba.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(n&&!this.responseType||i)){const c=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Ae.from(u,Ae.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Et.classes.FormData,Blob:Et.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{ba.headers[t]={}});const Kw=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xw=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),s=c.substring(0,i).trim().toLowerCase(),n=c.substring(i+1).trim(),!(!s||e[s]&&Kw[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},ap=Symbol("internals");function $i(t){return t&&String(t).trim().toLowerCase()}function Go(t){return t===!1||t==null?t:Q.isArray(t)?t.map(Go):String(t)}function Qw(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const Gw=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Cd(t,e,s,n,i){if(Q.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!Q.isString(e)){if(Q.isString(n))return e.indexOf(n)!==-1;if(Q.isRegExp(n))return n.test(e)}}function Jw(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function Zw(t,e){const s=Q.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,l,c){return this[n].call(this,e,i,l,c)},configurable:!0})})}let Yt=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function l(u,h,m){const p=$i(h);if(!p)throw new Error("header name must be a non-empty string");const x=Q.findKey(i,p);(!x||i[x]===void 0||m===!0||m===void 0&&i[x]!==!1)&&(i[x||h]=Go(u))}const c=(u,h)=>Q.forEach(u,(m,p)=>l(m,p,h));if(Q.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(Q.isString(e)&&(e=e.trim())&&!Gw(e))c(Xw(e),s);else if(Q.isObject(e)&&Q.isIterable(e)){let u={},h,m;for(const p of e){if(!Q.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?Q.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,s)}else e!=null&&l(s,e,n);return this}get(e,s){if(e=$i(e),e){const n=Q.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return Qw(i);if(Q.isFunction(s))return s.call(this,i,n);if(Q.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=$i(e),e){const n=Q.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Cd(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function l(c){if(c=$i(c),c){const u=Q.findKey(n,c);u&&(!s||Cd(n,n[u],u,s))&&(delete n[u],i=!0)}}return Q.isArray(e)?e.forEach(l):l(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const l=s[n];(!e||Cd(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const s=this,n={};return Q.forEach(this,(i,l)=>{const c=Q.findKey(n,l);if(c){s[c]=Go(i),delete s[l];return}const u=e?Jw(l):String(l).trim();u!==l&&delete s[l],s[u]=Go(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return Q.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&Q.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[ap]=this[ap]={accessors:{}}).accessors,i=this.prototype;function l(c){const u=$i(c);n[u]||(Zw(i,c),n[u]=!0)}return Q.isArray(e)?e.forEach(l):l(e),this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Yt.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});Q.freezeMethods(Yt);function Ed(t,e){const s=this||ba,n=e||s,i=Yt.from(n.headers);let l=n.data;return Q.forEach(t,function(u){l=u.call(s,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function yx(t){return!!(t&&t.__CANCEL__)}function Zr(t,e,s){Ae.call(this,t??"canceled",Ae.ERR_CANCELED,e,s),this.name="CanceledError"}Q.inherits(Zr,Ae,{__CANCEL__:!0});function bx(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Ae("Request failed with status code "+s.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function e1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function t1(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),p=n[l];c||(c=m),s[i]=h,n[i]=m;let x=l,b=0;for(;x!==i;)b+=s[x++],x=x%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),m-c<e)return;const w=p&&m-p;return w?Math.round(b*1e3/w):void 0}}function s1(t,e){let s=0,n=1e3/e,i,l;const c=(m,p=Date.now())=>{s=p,i=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const p=Date.now(),x=p-s;x>=n?c(m,p):(i=m,l||(l=setTimeout(()=>{l=null,c(i)},n-x)))},()=>i&&c(i)]}const sl=(t,e,s=3)=>{let n=0;const i=t1(50,250);return s1(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-n,m=i(h),p=c<=u;n=c;const x={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-c)/m:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(x)},s)},op=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},lp=t=>(...e)=>Q.asap(()=>t(...e)),n1=Et.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Et.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Et.origin),Et.navigator&&/(msie|trident)/i.test(Et.navigator.userAgent)):()=>!0,r1=Et.hasStandardBrowserEnv?{write(t,e,s,n,i,l){const c=[t+"="+encodeURIComponent(e)];Q.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),Q.isString(n)&&c.push("path="+n),Q.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function i1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function a1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vx(t,e,s){let n=!i1(e);return t&&(n||s==!1)?a1(t,e):e}const cp=t=>t instanceof Yt?{...t}:t;function ar(t,e){e=e||{};const s={};function n(m,p,x,b){return Q.isPlainObject(m)&&Q.isPlainObject(p)?Q.merge.call({caseless:b},m,p):Q.isPlainObject(p)?Q.merge({},p):Q.isArray(p)?p.slice():p}function i(m,p,x,b){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m,x,b)}else return n(m,p,x,b)}function l(m,p){if(!Q.isUndefined(p))return n(void 0,p)}function c(m,p){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function u(m,p,x){if(x in e)return n(m,p);if(x in t)return n(void 0,m)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(m,p,x)=>i(cp(m),cp(p),x,!0)};return Q.forEach(Object.keys({...t,...e}),function(p){const x=h[p]||i,b=x(t[p],e[p],p);Q.isUndefined(b)&&x!==u||(s[p]=b)}),s}const wx=t=>{const e=ar({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=Yt.from(c),e.url=px(vx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Q.isFormData(s)){if(Et.hasStandardBrowserEnv||Et.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[m,...p]=h?h.split(";").map(x=>x.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",...p].join("; "))}}if(Et.hasStandardBrowserEnv&&(n&&Q.isFunction(n)&&(n=n(e)),n||n!==!1&&n1(e.url))){const m=i&&l&&r1.read(l);m&&c.set(i,m)}return e},o1=typeof XMLHttpRequest<"u",l1=o1&&function(t){return new Promise(function(s,n){const i=wx(t);let l=i.data;const c=Yt.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i,p,x,b,w,j;function v(){w&&w(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function C(){if(!_)return;const E=Yt.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),A={data:!u||u==="text"||u==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:E,config:t,request:_};bx(function(H){s(H),v()},function(H){n(H),v()},A),_=null}"onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){_&&(n(new Ae("Request aborted",Ae.ECONNABORTED,t,_)),_=null)},_.onerror=function(){n(new Ae("Network Error",Ae.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||gx;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),n(new Ae(R,A.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,t,_)),_=null},l===void 0&&c.setContentType(null),"setRequestHeader"in _&&Q.forEach(c.toJSON(),function(R,A){_.setRequestHeader(A,R)}),Q.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),u&&u!=="json"&&(_.responseType=i.responseType),m&&([b,j]=sl(m,!0),_.addEventListener("progress",b)),h&&_.upload&&([x,w]=sl(h),_.upload.addEventListener("progress",x),_.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(p=E=>{_&&(n(!E||E.type?new Zr(null,t,_):E),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const S=e1(i.url);if(S&&Et.protocols.indexOf(S)===-1){n(new Ae("Unsupported protocol "+S+":",Ae.ERR_BAD_REQUEST,t));return}_.send(l||null)})},c1=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const l=function(m){if(!i){i=!0,u();const p=m instanceof Error?m:this.reason;n.abort(p instanceof Ae?p:new Zr(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Ae(`timeout ${e} of ms exceeded`,Ae.ETIMEDOUT))},e);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:h}=n;return h.unsubscribe=()=>Q.asap(u),h}},d1=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},u1=async function*(t,e){for await(const s of h1(t))yield*d1(s,e)},h1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},dp=(t,e,s,n)=>{const i=u1(t,e);let l=0,c,u=h=>{c||(c=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await i.next();if(m){u(),h.close();return}let x=p.byteLength;if(s){let b=l+=x;s(b)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},vl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jx=vl&&typeof ReadableStream=="function",f1=vl&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),_x=(t,...e)=>{try{return!!t(...e)}catch{return!1}},m1=jx&&_x(()=>{let t=!1;const e=new Request(Et.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),up=64*1024,su=jx&&_x(()=>Q.isReadableStream(new Response("").body)),nl={stream:su&&(t=>t.body)};vl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!nl[e]&&(nl[e]=Q.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new Ae(`Response type '${e}' is not supported`,Ae.ERR_NOT_SUPPORT,n)})})})(new Response);const p1=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(Et.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await f1(t)).byteLength},g1=async(t,e)=>{const s=Q.toFiniteNumber(t.getContentLength());return s??p1(e)},x1=vl&&(async t=>{let{url:e,method:s,data:n,signal:i,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:x="same-origin",fetchOptions:b}=wx(t);m=m?(m+"").toLowerCase():"text";let w=c1([i,l&&l.toAbortSignal()],c),j;const v=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let _;try{if(h&&m1&&s!=="get"&&s!=="head"&&(_=await g1(p,n))!==0){let A=new Request(e,{method:"POST",body:n,duplex:"half"}),F;if(Q.isFormData(n)&&(F=A.headers.get("content-type"))&&p.setContentType(F),A.body){const[H,z]=op(_,sl(lp(h)));n=dp(A.body,up,H,z)}}Q.isString(x)||(x=x?"include":"omit");const C="credentials"in Request.prototype;j=new Request(e,{...b,signal:w,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:C?x:void 0});let S=await fetch(j,b);const E=su&&(m==="stream"||m==="response");if(su&&(u||E&&v)){const A={};["status","statusText","headers"].forEach(K=>{A[K]=S[K]});const F=Q.toFiniteNumber(S.headers.get("content-length")),[H,z]=u&&op(F,sl(lp(u),!0))||[];S=new Response(dp(S.body,up,H,()=>{z&&z(),v&&v()}),A)}m=m||"text";let R=await nl[Q.findKey(nl,m)||"text"](S,t);return!E&&v&&v(),await new Promise((A,F)=>{bx(A,F,{data:R,headers:Yt.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:j})})}catch(C){throw v&&v(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,t,j),{cause:C.cause||C}):Ae.from(C,C&&C.code,t,j)}}),nu={http:Rw,xhr:l1,fetch:x1};Q.forEach(nu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hp=t=>`- ${t}`,y1=t=>Q.isFunction(t)||t===null||t===!1,Nx={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let s,n;const i={};for(let l=0;l<e;l++){s=t[l];let c;if(n=s,!y1(s)&&(n=nu[(c=String(s)).toLowerCase()],n===void 0))throw new Ae(`Unknown adapter '${c}'`);if(n)break;i[c||"#"+l]=n}if(!n){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(hp).join(`
`):" "+hp(l[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:nu};function Pd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zr(null,t)}function fp(t){return Pd(t),t.headers=Yt.from(t.headers),t.data=Ed.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Nx.getAdapter(t.adapter||ba.adapter)(t).then(function(n){return Pd(t),n.data=Ed.call(t,t.transformResponse,n),n.headers=Yt.from(n.headers),n},function(n){return yx(n)||(Pd(t),n&&n.response&&(n.response.data=Ed.call(t,t.transformResponse,n.response),n.response.headers=Yt.from(n.response.headers))),Promise.reject(n)})}const kx="1.11.0",wl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{wl[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const mp={};wl.transitional=function(e,s,n){function i(l,c){return"[Axios v"+kx+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,u)=>{if(e===!1)throw new Ae(i(c," has been removed"+(s?" in "+s:"")),Ae.ERR_DEPRECATED);return s&&!mp[c]&&(mp[c]=!0,console.warn(i(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,c,u):!0}};wl.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function b1(t,e,s){if(typeof t!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const l=n[i],c=e[l];if(c){const u=t[l],h=u===void 0||c(u,l,t);if(h!==!0)throw new Ae("option "+l+" must be "+h,Ae.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ae("Unknown option "+l,Ae.ERR_BAD_OPTION)}}const Jo={assertOptions:b1,validators:wl},As=Jo.validators;let nr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ip,response:new ip}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=ar(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:l}=s;n!==void 0&&Jo.assertOptions(n,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),i!=null&&(Q.isFunction(i)?s.paramsSerializer={serialize:i}:Jo.assertOptions(i,{encode:As.function,serialize:As.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Jo.assertOptions(s,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=l&&Q.merge(l.common,l[s.method]);l&&Q.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),s.headers=Yt.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(h=h&&v.synchronous,u.unshift(v.fulfilled,v.rejected))});const m=[];this.interceptors.response.forEach(function(v){m.push(v.fulfilled,v.rejected)});let p,x=0,b;if(!h){const j=[fp.bind(this),void 0];for(j.unshift(...u),j.push(...m),b=j.length,p=Promise.resolve(s);x<b;)p=p.then(j[x++],j[x++]);return p}b=u.length;let w=s;for(x=0;x<b;){const j=u[x++],v=u[x++];try{w=j(w)}catch(_){v.call(this,_);break}}try{p=fp.call(this,w)}catch(j){return Promise.reject(j)}for(x=0,b=m.length;x<b;)p=p.then(m[x++],m[x++]);return p}getUri(e){e=ar(this.defaults,e);const s=vx(e.baseURL,e.url,e.allowAbsoluteUrls);return px(s,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){nr.prototype[e]=function(s,n){return this.request(ar(n||{},{method:e,url:s,data:(n||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function s(n){return function(l,c,u){return this.request(ar(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}nr.prototype[e]=s(),nr.prototype[e+"Form"]=s(!0)});let v1=class Sx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(i=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](i);n._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(u=>{n.subscribe(u),l=u}).then(i);return c.cancel=function(){n.unsubscribe(l)},c},e(function(l,c,u){n.reason||(n.reason=new Zr(l,c,u),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Sx(function(i){e=i}),cancel:e}}};function w1(t){return function(s){return t.apply(null,s)}}function j1(t){return Q.isObject(t)&&t.isAxiosError===!0}const ru={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ru).forEach(([t,e])=>{ru[e]=t});function Cx(t){const e=new nr(t),s=nx(nr.prototype.request,e);return Q.extend(s,nr.prototype,e,{allOwnKeys:!0}),Q.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Cx(ar(t,i))},s}const Be=Cx(ba);Be.Axios=nr;Be.CanceledError=Zr;Be.CancelToken=v1;Be.isCancel=yx;Be.VERSION=kx;Be.toFormData=bl;Be.AxiosError=Ae;Be.Cancel=Be.CanceledError;Be.all=function(e){return Promise.all(e)};Be.spread=w1;Be.isAxiosError=j1;Be.mergeConfig=ar;Be.AxiosHeaders=Yt;Be.formToJSON=t=>xx(Q.isHTMLForm(t)?new FormData(t):t);Be.getAdapter=Nx.getAdapter;Be.HttpStatusCode=ru;Be.default=Be;const{Axios:fC,AxiosError:mC,CanceledError:pC,isCancel:gC,CancelToken:xC,VERSION:yC,all:bC,Cancel:vC,isAxiosError:wC,spread:jC,toFormData:_C,AxiosHeaders:NC,HttpStatusCode:kC,formToJSON:SC,getAdapter:CC,mergeConfig:EC}=Be,Ui="http://localhost:5000/api";class _1{constructor(){this.refreshPromise=null,this.setupAxiosInterceptors()}setupAxiosInterceptors(){Be.interceptors.request.use(e=>{const s=localStorage.getItem("access_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),Be.interceptors.response.use(e=>e,async e=>{const s=e.config;if(e.response?.status===401&&!s._retry)if(console.log("🚫 401 Unauthorized detected:",e.response?.data?.message||"Token invalid"),s._retry=!0,!["/auth/login","/auth/refresh","/auth/logout"].some(l=>s.url?.includes(l))&&this.getRefreshToken())try{console.log("🔄 Attempting token refresh...");const l=await this.refreshToken();if(l)return s.headers.Authorization=`Bearer ${l.accessToken}`,console.log("🔄 Retrying original request with new token"),Be(s)}catch(l){return console.error("🚫 Token refresh failed:",l),this.handleAuthFailure("Token refresh failed"),Promise.reject(l)}else console.log("🚪 No refresh token available or skip endpoint, redirecting to login"),this.handleAuthFailure("Authentication required");return Promise.reject(e)})}async login(e,s){try{const n=await Be.post(`${Ui}/auth/login`,{username:e,password:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"Login failed")}catch(n){throw console.error("🚫 Login error:",n),n}}async loginWith2FA(e,s){try{const n=await Be.post(`${Ui}/auth/login-2fa`,{user_id:e,token:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"2FA login failed")}catch(n){throw console.error("🚫 2FA login error:",n),n}}async refreshToken(){if(this.refreshPromise)return this.refreshPromise;const e=localStorage.getItem("refresh_token");if(!e)throw console.error("🚫 No refresh token available"),new Error("No refresh token available");this.refreshPromise=this.performTokenRefresh(e);try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performTokenRefresh(e){try{console.log("🔄 Refreshing tokens...");const s=await Be.post(`${Ui}/auth/refresh`,{refreshToken:e});if(s.data.success){const{accessToken:n,refreshToken:i,user:l}=s.data.data;return localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",i),l&&localStorage.setItem("user",JSON.stringify(l)),console.log("✅ Tokens refreshed successfully"),{accessToken:n,refreshToken:i}}throw new Error(s.data.message||"Token refresh failed")}catch(s){throw console.error("🚫 Token refresh error:",s),s.response?.status===401&&console.log("🚫 Refresh token expired or invalid"),s}}async logout(){try{const e=localStorage.getItem("refresh_token");e&&await Be.post(`${Ui}/auth/logout`,{refreshToken:e})}catch(e){console.warn("⚠️ Logout API call failed:",e.message)}finally{this.clearAuthData(),this.redirectToLogin()}}async getCurrentUser(){try{const e=await Be.get(`${Ui}/auth/me`);if(e.data.success){const s=e.data.data.user;return localStorage.setItem("user",JSON.stringify(s)),s}throw new Error(e.data.message||"Failed to get user info")}catch(e){throw console.error("🚫 Get current user error:",e),e}}setAuthData(e,s,n){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(n)),console.log("✅ Auth data stored successfully")}clearAuthData(){["access_token","refresh_token","auth_token","authToken","user"].forEach(s=>localStorage.removeItem(s)),console.log("🧹 Auth data cleared")}handleAuthFailure(e="Authentication failed"){console.log(`🚫 Auth failure: ${e}`),this.clearAuthData(),this.redirectToLogin()}redirectToLogin(){window.location.pathname!=="/login"&&(console.log("🔄 Redirecting to login page..."),window.location.pathname!=="/"&&sessionStorage.setItem("redirectAfterLogin",window.location.pathname),window.location.href="/login")}isAuthenticated(){const e=localStorage.getItem("access_token");localStorage.getItem("refresh_token");const s=localStorage.getItem("user");return!!(e&&s)}getStoredUser(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("🚫 Failed to parse stored user:",e),null}}getAccessToken(){return localStorage.getItem("access_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}isTokenExpiringSoon(){const e=this.getAccessToken();if(!e)return!1;try{const n=JSON.parse(atob(e.split(".")[1])).exp*1e3,i=Date.now();return n-i<120*1e3}catch(s){return console.error("🚫 Error checking token expiration:",s),!1}}async checkAndRefreshToken(){if(this.isTokenExpiringSoon()&&this.getRefreshToken())try{console.log("🔄 Token expiring soon, proactively refreshing..."),await this.refreshToken()}catch(e){console.error("🚫 Proactive token refresh failed:",e)}}startTokenRefreshTimer(){setInterval(()=>{this.checkAndRefreshToken()},60*1e3)}}const ws=new _1,Ex=N.createContext(),Eu=()=>{const t=N.useContext(Ex);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},N1=({children:t})=>{const[e,s]=N.useState(null),[n,i]=N.useState(null),[l,c]=N.useState(!0);N.useEffect(()=>{(()=>{try{if(ws.isAuthenticated()){const j=ws.getStoredUser(),v=ws.getAccessToken();v&&j?(i(v),s(j),ws.checkAndRefreshToken(),console.log("✅ User authenticated from stored tokens")):(console.log("⚠️ Invalid stored auth data, clearing..."),ws.clearAuthData())}else console.log("❤️ No valid authentication found")}catch(j){console.error("Error loading auth from localStorage:",j),ws.clearAuthData()}finally{c(!1)}})()},[]);const u=(w,j,v)=>{console.log("🔐 AuthContext login called:",{hasUser:!!w,hasToken:!!j,hasRefresh:!!v}),s(w),i(j),v?ws.setAuthData(j,v,w):(localStorage.setItem("access_token",j),localStorage.setItem("user",JSON.stringify(w))),ws.checkAndRefreshToken(),localStorage.removeItem("authToken"),console.log("✅ AuthContext login completed")},h=async()=>{s(null),i(null);try{await ws.logout()}catch(w){console.error("Error during logout:",w),ws.clearAuthData()}},m=()=>{const w=ws.isAuthenticated(),j=!!(e&&n),v=w||j;return!v&&w!==j&&console.log("🔍 Auth state mismatch:",{serviceAuth:w,stateAuth:j,hasUser:!!e,hasToken:!!n}),v},b={user:e,token:n,loading:l,login:u,logout:h,isAuthenticated:m,hasRole:w=>e?.role_name===w,hasPermission:w=>m()?e?.role_name==="super_admin"||e?.role?.name==="super_admin"?!0:e?.permissions&&Array.isArray(e.permissions)?e.permissions.includes(w):e?.permissions&&typeof e.permissions=="object"?!!e.permissions[w]:!1:!1};return o.jsx(Ex.Provider,{value:b,children:t})},Pu=Be.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Pu.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&!t.headers.Authorization&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Pu.interceptors.response.use(t=>t,t=>(t.response?.status!==401&&t.response?.status!==403&&console.error("🚫 API Error:",{status:t.response?.status,message:t.response?.data?.message||t.message,url:t.config?.url}),Promise.reject(t)));class k1{constructor(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.CACHE_DURATION=300*1e3,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null,this.maxRetries=3}getCurrentUser(){try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return!s||typeof s!="object"||!s.id?(console.warn("Invalid user data structure"),this.clearUserData(),null):s}catch(e){return console.error("Error parsing user data:",e),this.clearUserData(),null}}clearUserData(){try{localStorage.removeItem("user"),this.clearCache()}catch(e){console.error("Error clearing user data:",e)}}clearCache(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null}isPermissionsCacheValid(){return this.permissionsCacheTimestamp?Date.now()-this.permissionsCacheTimestamp<this.CACHE_DURATION:!1}isRolesCacheValid(){return this.rolesCacheTimestamp?Date.now()-this.rolesCacheTimestamp<this.CACHE_DURATION:!1}async makeApiRequest(e,s=0){try{const n=await Pu.get(e);if(!n||!n.data)throw new Error("Invalid API response structure");if(!n.data.success)throw new Error(n.data.message||"API request failed");return n.data.data}catch(n){if(console.error(`API request failed for ${e}:`,n.message),s<this.maxRetries&&this.isRetryableError(n))return console.log(`Retrying request ${s+1}/${this.maxRetries}`),await this.delay(Math.pow(2,s)*1e3),this.makeApiRequest(e,s+1);throw n}}isRetryableError(e){return e.code==="NETWORK_ERROR"||e.response?.status>=500||e.message.includes("timeout")}delay(e){return new Promise(s=>setTimeout(s,e))}async getUserPermissions(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isPermissionsCacheValid()&&this.cachedPermissions?this.cachedPermissions:this.pendingPermissionsRequest?await this.pendingPermissionsRequest:(this.pendingPermissionsRequest=this.makeApiRequest("/permissions/my-permissions").then(n=>{const i=this.validatePermissionsData(n);return this.cachedPermissions=i,this.permissionsCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user permissions:",n.message),{})).finally(()=>{this.pendingPermissionsRequest=null}),await this.pendingPermissionsRequest):(console.warn("No valid user found for permissions request"),{})}catch(s){return console.error("Error in getUserPermissions:",s),{}}}validatePermissionsData(e){if(!e||typeof e!="object")return console.warn("Invalid permissions data structure"),{};const s={};for(const[n,i]of Object.entries(e))Array.isArray(i)&&(s[n]=i.filter(l=>l&&typeof l=="object"&&typeof l.permission_key=="string"));return s}async getUserRoles(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isRolesCacheValid()&&this.cachedRoles?this.cachedRoles:this.pendingRolesRequest?await this.pendingRolesRequest:(this.pendingRolesRequest=this.makeApiRequest("/permissions/my-roles").then(n=>{const i=this.validateRolesData(n);return this.cachedRoles=i,this.rolesCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user roles:",n.message),[])).finally(()=>{this.pendingRolesRequest=null}),await this.pendingRolesRequest):(console.warn("No valid user found for roles request"),[])}catch(s){return console.error("Error in getUserRoles:",s),[]}}validateRolesData(e){return Array.isArray(e)?e.filter(s=>s&&typeof s=="object"&&typeof s.name=="string"):(console.warn("Invalid roles data structure"),[])}async hasPermission(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid permission key provided"),!1;const n=await this.getUserPermissions(s);for(const i of Object.keys(n))if((n[i]||[]).some(c=>c.permission_key===e))return!0;return!1}catch(n){return console.error("Error checking permission:",n),!1}}async hasModuleAccess(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid module name provided"),!1;const n=await this.getUserPermissions(s);return n[e]&&n[e].length>0}catch(n){return console.error("Error checking module access:",n),!1}}async hasAnyPermission(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid permission keys array provided"),!1;const n=e.map(l=>this.hasPermission(l,s));return(await Promise.all(n)).some(l=>l===!0)}catch(n){return console.error("Error checking permissions:",n),!1}}async hasRole(e,s=null){try{return!e||typeof e!="string"?(console.warn("Invalid role name provided"),!1):(await this.getUserRoles(s)).some(i=>i.name===e)}catch(n){return console.error("Error checking role:",n),!1}}async hasAnyRole(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid role names array provided"),!1;const i=(await this.getUserRoles(s)).map(l=>l.name);return e.some(l=>i.includes(l))}catch(n){return console.error("Error checking roles:",n),!1}}getModulePermissions(){return{dashboard:["dashboard.view"],"user-management":["users.read","users.create","users.update","users.delete"],"role-management":["roles.read"],"campaign-types":["campaign-types.read"],"campaign-data":["campaign-data.read"],campaigns:["campaigns.read"],ads:["ads.read"],cards:["cards.read"],"card-users":["card-users.read"],"reports-table":["reports.read"],reports:["reports.read"],analytics:["analytics.view"],"2fa":["2fa.setup"],modules:["modules.read"],settings:["settings.update"]}}async canAccessRoute(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid route path provided"),!1;const n=e.replace(/^\/+/,"").toLowerCase(),l=this.getModulePermissions()[n];return!l||l.length===0?!0:await this.hasAnyPermission(l,s)}catch(n){return console.error("Error checking route access:",n),!1}}async refreshPermissions(){try{this.clearCache();const e=this.getCurrentUser();e?.id&&await Promise.allSettled([this.getUserPermissions(e.id),this.getUserRoles(e.id)])}catch(e){console.error("Error refreshing permissions:",e)}}destroy(){this.clearCache()}}const Fr=new k1,S1=N.createContext(),Bt=({children:t})=>{const[e,s]=N.useState({}),[n,i]=N.useState([]),[l,c]=N.useState(!0),[u,h]=N.useState(null),[m,p]=N.useState(null);N.useEffect(()=>{x()},[]),N.useEffect(()=>{const z=()=>{const K=Fr.getCurrentUser();K!==m&&(p(K),x())};return window.addEventListener("storage",z),()=>window.removeEventListener("storage",z)},[m]);const x=async()=>{try{c(!0),h(null);const z=Fr.getCurrentUser();if(p(z),z){const[K,W]=await Promise.all([Fr.getUserPermissions(z.id),Fr.getUserRoles(z.id)]);s(K),i(W)}else s({}),i([])}catch(z){console.error("Error initializing permissions:",z),h(z.message)}finally{c(!1)}},b=async()=>{await Fr.refreshPermissions(),await x()},w=z=>{if(!e||Object.keys(e).length===0)return!1;for(const K of Object.keys(e))if((e[K]||[]).some(M=>M.permission_key===z))return!0;return!1},j=z=>Array.isArray(z)?z.some(K=>w(K)):w(z),v=z=>e[z]&&e[z].length>0,_=z=>n.some(K=>K.name===z),C=z=>Array.isArray(z)?z.some(K=>_(K)):_(z),S=z=>{const K=z.replace("/",""),M=Fr.getModulePermissions()[K];return!M||M.length===0?!0:j(M)},E=()=>{const z=[];for(const K of Object.keys(e)){const W=e[K]||[];z.push(...W.map(M=>M.permission_key))}return[...new Set(z)]},R=()=>!n||n.length===0?0:Math.max(...n.map(z=>z.level||0)),H={permissions:e,roles:n,loading:l,error:u,user:m,initializePermissions:x,refreshPermissions:b,hasPermission:w,hasAnyPermission:j,hasModuleAccess:v,hasRole:_,hasAnyRole:C,canAccessRoute:S,getAllPermissionKeys:E,getHighestRoleLevel:R,isAdmin:()=>R()>=8||C(["Admin","Super Admin"]),isSuperAdmin:()=>R()>=10||_("Super Admin")};return o.jsx(S1.Provider,{value:H,children:t})},rl={API_BASE_URL:"http://localhost:5000/api",TOKEN_KEY:"access_token",API_TIMEOUT:1e4},ae=Be.create({baseURL:rl.API_BASE_URL,timeout:rl.API_TIMEOUT,headers:{"Content-Type":"application/json"}});window.clearAllTokens=()=>{console.log("🧹 Clearing all tokens manually..."),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),sessionStorage.clear(),console.log("✅ All tokens cleared! Redirecting to login..."),window.location.href="/login"};ae.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ae.interceptors.response.use(t=>t,async t=>{const e=t.config;if(t.response?.status===401&&(t.response?.data?.code==="TOKEN_EXPIRED"||t.response?.data?.message?.includes("token"))&&!e._retry){console.log("🔄 Token expired, attempting refresh..."),e._retry=!0;try{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");const i=await(await fetch("http://localhost:5000/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})})).json();if(i.success){const{accessToken:l,refreshToken:c}=i.data;return localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",c),e.headers.Authorization=`Bearer ${l}`,console.log("✅ Token refreshed successfully"),ae(e)}else throw new Error(i.message||"Token refresh failed")}catch(s){return console.error("🚫 Token refresh failed:",s),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}if(t.response?.status===401&&(console.log("🚪 Authentication failed, redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),t.response?.status===403){const s=t.response?.data?.message||"Access denied. You don't have permission to perform this action.";console.error("Permission denied:",s),(s.includes("Wrong token type")||s.includes("access token"))&&(console.log("Token type error detected, clearing old tokens"),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage","Please log in again to get a fresh access token."),window.location.href="/login"))}else if(t.response?.status===404){const s=t.response?.data?.message||"The item you're looking for doesn't exist or may have been removed.";console.error("Resource not found:",s)}else if(t.response?.status>=500){const s=t.response?.data?.message||"We're experiencing technical difficulties. Please try again in a few minutes.";console.error("Server error:",s)}else t.response?.data?.message&&console.error("API Error:",t.response.data.message);if(t.response?.data?.message)t.userMessage=t.response.data.message;else switch(t.response?.status){case 400:t.userMessage="There was an issue with your request. Please check your input and try again.";break;case 403:t.userMessage="Access denied. You don't have permission to perform this action.";break;case 404:t.userMessage="The item you're looking for doesn't exist or may have been removed.";break;case 409:t.userMessage="This action conflicts with existing data. Please try again.";break;case 422:t.userMessage="Some of the information you provided is not valid. Please check and try again.";break;case 429:t.userMessage="You're making too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:t.userMessage="We're experiencing technical difficulties. Please try again in a few minutes.";break;default:t.userMessage="Something went wrong. Please try again later."}return Promise.reject(t)});const C1=()=>{const[t,e]=N.useState(null),[s,n]=N.useState(!0),[i,l]=N.useState(null),c=async()=>{try{n(!0),l(null);const u=await ae.get("/user-access/modules");u.data.success?e(u.data.data):l(u.data.message)}catch(u){console.error("Error fetching user access:",u),l(u.response?.data?.message||"Failed to fetch user permissions")}finally{n(!1)}};return N.useEffect(()=>{localStorage.getItem("access_token")||localStorage.getItem("authToken")?c():n(!1)},[]),{userAccess:t,loading:s,error:i,refetch:c}};var E1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const P1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ce=(t,e)=>{const s=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...h},m)=>N.createElement("svg",{ref:m,...E1,width:i,height:i,stroke:n,strokeWidth:c?Number(l)*24/Number(i):l,className:`lucide lucide-${P1(t)}`,...h},[...e.map(([p,x])=>N.createElement(p,x)),...(Array.isArray(u)?u:[u])||[]]));return s.displayName=`${t}`,s},iu=Ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),st=Ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),au=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),pp=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ts=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),En=Ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ei=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),A1=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),T1=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),R1=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),D1=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Px=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Vr=Ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),M1=Ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),O1=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Au=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ax=Ce("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),il=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),al=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),or=Ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Tu=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ad=Ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Zi=Ce("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),gp=Ce("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),ou=Ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),xp=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),L1=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),yp=Ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ti=Ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),F1=Ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Tx=Ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),mt=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Kt=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Rx=Ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Mn=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Dx=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I1=Ce("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Wr=Ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Td=Ce("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]),js=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ur=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Mx=Ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),qr=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ol=Ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),z1=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),lu=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),An=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),jl=Ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),yt=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$t=({children:t})=>{const[e,s]=N.useState(!0),[n,i]=N.useState(!1),l=Gr(),c=dr(),{userAccess:u}=C1(),h=pa.useMemo(()=>{try{const v=localStorage.getItem("user");return v?JSON.parse(v):null}catch{return null}},[]),m=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),c("/login")},p={Home:Ad,Users:An,Key:gp,Tags:Td,Database:M1,CreditCard:Vr,UserCheck:ol,Target:js,BarChart3:ts,FileText:or,Settings:Dx},x=v=>{const _=["Dashboard","User Management","Role Management","Brand Management","Campaign Type","Campaign","Cards","Cards Users","Report"],C={"Campaign Types":"Campaign Type",Campaigns:"Campaign","Card Users":"Cards Users",Reports:"Report"},S=E=>{let R=_.indexOf(E);if(R!==-1)return R;const A=C[E];return A&&(R=_.indexOf(A),R!==-1)?R:-1};return v.sort((E,R)=>{const A=S(E.name),F=S(R.name);return A!==-1&&F!==-1?A-F:A!==-1?-1:F!==-1?1:(E.name||"").localeCompare(R.name||"")})},b=u?.navigation?.map(v=>({...v,icon:p[v.icon]||Ad}))||[{name:"Dashboard",href:"/dashboard",icon:Ad},{name:"User Management",href:"/user-management",icon:An},{name:"Role Management",href:"/role-management",icon:gp},{name:"Brand Management",href:"/brands",icon:Td},{name:"Campaign Type",href:"/campaign-types",icon:Td},{name:"Campaign",href:"/campaigns",icon:js},{name:"Cards",href:"/cards",icon:Vr},{name:"Cards Users",href:"/card-users",icon:ol},{name:"Report",href:"/reports-table",icon:or}],w=x(b),j=v=>l.pathname===v;return o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx("div",{className:`hidden md:flex md:flex-shrink-0 transition-all duration-300 ${e?"md:w-64":"md:w-16"}`,children:o.jsx("div",{className:"flex flex-col w-full",children:o.jsxs("div",{className:"flex flex-col flex-grow bg-sidebar-bg overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between h-16 flex-shrink-0 px-4 bg-gray-900",children:[o.jsxs("div",{className:`flex items-center ${e?"block":"hidden"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(js,{className:"h-8 w-8 text-primary-500"})}),o.jsx("div",{className:"ml-3",children:o.jsx("h1",{className:"text-xl font-bold text-white",children:"Ads Reporter"})})]}),o.jsx("button",{onClick:()=>s(!e),className:"p-1 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",children:e?o.jsx(T1,{className:"h-5 w-5"}):o.jsx(R1,{className:"h-5 w-5"})})]}),o.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[o.jsx("div",{className:"flex-1 space-y-1",children:w.map(v=>{const _=v.icon;return o.jsxs(Zm,{to:v.href,className:`sidebar-link ${j(v.href)?"active":""}`,title:e?"":v.name,children:[o.jsx(_,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&o.jsx("span",{className:"text-sm font-medium",children:v.name})]},v.name)})}),o.jsx("div",{className:"pt-4 border-t border-gray-700",children:o.jsxs("button",{onClick:m,className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",title:e?"":"Logout",children:[o.jsx(xp,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&o.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})}),o.jsx("div",{className:`md:hidden ${n?"block":"hidden"}`,children:o.jsxs("div",{className:"fixed inset-0 flex z-40",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>i(!1)}),o.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-sidebar-bg",children:[o.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:o.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>i(!1),children:o.jsx(yt,{className:"h-6 w-6 text-white"})})}),o.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-gray-900",children:[o.jsx(js,{className:"h-8 w-8 text-primary-500"}),o.jsx("h1",{className:"ml-3 text-xl font-bold text-white",children:"Ads Reporter"})]}),o.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[o.jsx("div",{className:"flex-1 space-y-1",children:w.map(v=>{const _=v.icon;return o.jsxs(Zm,{to:v.href,className:`sidebar-link ${j(v.href)?"active":""}`,onClick:()=>i(!1),children:[o.jsx(_,{className:"h-5 w-5 mr-3"}),o.jsx("span",{className:"text-sm font-medium",children:v.name})]},v.name)})}),o.jsx("div",{className:"pt-4 border-t border-gray-700",children:o.jsxs("button",{onClick:()=>{i(!1),m()},className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",children:[o.jsx(xp,{className:"h-5 w-5 mr-3"}),o.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})]})}),o.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[o.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[o.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>i(!0),children:o.jsx(L1,{className:"h-6 w-6"})}),o.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:w.find(v=>v.href===l.pathname)?.name||"Dashboard"})}),o.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:h?.username||"User"}),o.jsx("div",{className:"h-8 w-8 bg-primary-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-white",children:(h?.username||"U")[0].toUpperCase()})})]})})]})]}),o.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:t})]})]})},Ut=({children:t})=>{const{isAuthenticated:e,loading:s}=Eu();return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e()?t:(console.log("🚪 Not authenticated, redirecting to login"),o.jsx(Qd,{to:"/login",replace:!0}))},Ru=()=>{console.log("🧹 Clearing all authentication tokens..."),["access_token","authToken","auth_token","refresh_token","user"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),console.log("✅ All tokens cleared"),typeof window<"u"&&(window.location.href="/login")},B1=async()=>{const t=localStorage.getItem("access_token")||localStorage.getItem("authToken");if(!t)return console.log("❌ No token found"),!1;try{const e=JSON.parse(atob(t.split(".")[1])),s=Date.now()/1e3;return e.exp&&e.exp<s?(console.log("⏰ Token has expired"),Ru(),!1):!0}catch{return console.log("🔍 Could not decode token, assuming valid"),!0}},$1=t=>{(t.response?.status===401||t.status===401)&&(console.log("🚨 401 Unauthorized - clearing tokens and redirecting"),sessionStorage.setItem("recent_auth_error","true"),Ru())};typeof window<"u"&&(window.clearAllTokens=Ru,window.checkTokenExpiry=B1);const U1=()=>{const{login:t}=Eu(),[e,s]=N.useState({username:"",password:"",twofa_code:""}),[n,i]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(""),[m,p]=N.useState(!1),[x,b]=N.useState(!1),[w,j]=N.useState(""),[v,_]=N.useState("credentials"),[C,S]=N.useState(null),[E,R]=N.useState(""),A=dr();N.useEffect(()=>{const K=sessionStorage.getItem("loginMessage");K&&(R(K),sessionStorage.removeItem("loginMessage"),setTimeout(()=>R(""),5e3))},[]);const F=async K=>{K.preventDefault(),c(!0),h(""),console.log("Login attempt:",{username:e.username,step:v});try{if(v==="credentials"){console.log("Making API call to backend...");try{const W=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});console.log("API response status:",W.status),console.log("API response ok:",W.ok);const M=await W.json();console.log("API response data:",M),M.success?M.data.requires_2fa_setup?(b(!0),S(M.data.user.id),j(M.data.qr_code),_("2fa_setup"),console.log("2FA setup required for user:",M.data.user.username)):M.data.requires_2fa?(p(!0),S(M.data.user.id),_("2fa"),console.log("2FA required for user:",M.data.user.username)):(console.log("Login successful, storing token and navigating..."),t(M.data.user,M.data.access_token,M.data.refresh_token),A("/dashboard")):h(M.message||"Invalid username or password")}catch(W){if(console.error("Login API Error:",W),W.response?.status===401)$1(W),h("Invalid username or password. Please check your credentials and try again.");else if(W.code==="ECONNREFUSED"||!W.response)if(console.warn("API not available, using demo mode"),e.username==="admin"&&e.password==="password"){const M="demo-token-"+Date.now(),X={id:1,username:e.username,role_id:1,role_name:"admin"};t(X,M,null),A("/dashboard")}else h("API unavailable. Use demo credentials: admin/password");else h("Failed to connect to server. Please try again or use demo credentials: admin/password")}}else if(v==="2fa")try{console.log("Making 2FA API call with user ID:",C,"token:",e.twofa_code);const M=await(await fetch("http://localhost:5000/api/auth/login-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:C,token:e.twofa_code})})).json();if(console.log("2FA API response:",M),M.success){const{access_token:X,refresh_token:$,user:re}=M.data;t(re,X,$),console.log("2FA verification successful, navigating to dashboard"),A("/dashboard")}else{const X=M.message||"Invalid 2FA code";console.error("2FA verification failed:",X),h(X),s({...e,twofa_code:""})}}catch{if(console.warn("API not available, using demo 2FA"),e.twofa_code==="123456"){const M="demo-token-2fa-"+Date.now(),X={id:1,username:e.username,role_id:1,role_name:"admin",has_2fa:!0};t(X,M,null),A("/dashboard")}else h("API unavailable. Demo 2FA code: 123456"),s({...e,twofa_code:""})}else if(v==="2fa_setup")try{console.log("Completing 2FA setup with user ID:",C,"token:",e.twofa_code);const M=await(await fetch("http://localhost:5000/api/auth/login-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:C,token:e.twofa_code})})).json();if(console.log("2FA setup completion API response:",M),M.success){const{access_token:X,refresh_token:$,user:re}=M.data;t(re,X,$),console.log("2FA setup completed successfully, navigating to dashboard"),A("/dashboard")}else{const X=M.message||"Invalid 2FA code. Please try again.";console.error("2FA setup failed:",X),h(X),s({...e,twofa_code:""})}}catch(W){console.error("2FA setup API error:",W),h("Failed to complete 2FA setup. Please try again."),s({...e,twofa_code:""})}}catch(W){console.error("Login error:",W),h("An error occurred. Please try again.")}finally{c(!1)}},H=K=>{const{name:W,value:M}=K.target;s({...e,[W]:M}),h("")},z=()=>{_("credentials"),p(!1),b(!1),j(""),S(null),s({...e,twofa_code:""}),h("")};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:o.jsx(js,{className:"h-10 w-10 text-purple-600"})}),o.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Welcome Back"}),o.jsx("p",{className:"mt-2 text-sm text-purple-100",children:v==="credentials"?"Sign in to your Ads Reporter account":v==="2fa_setup"?"Set up two-factor authentication":"Enter your 2FA code to complete login"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[E&&o.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg text-sm",children:E}),u&&o.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:u}),o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[v==="credentials"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:e.username,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your username"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:e.password,onChange:H,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"}),o.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:n?o.jsx(il,{className:"h-5 w-5"}):o.jsx(al,{className:"h-5 w-5"})})]})]})]}):v==="2fa_setup"?o.jsxs("div",{children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:o.jsx(Wr,{className:"h-8 w-8 text-blue-600"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Set up Two-Factor Authentication"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),o.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200 inline-block mb-4",children:w?o.jsx("img",{src:w,alt:"2FA QR Code",className:"w-40 h-40 mx-auto"}):o.jsx("div",{className:"w-40 h-40 bg-gray-100 flex items-center justify-center",children:o.jsx("span",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})})}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"After scanning, enter the 6-digit code from your app to complete setup"})]}),o.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),o.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:K=>{const W=K.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:W}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),o.jsx("button",{type:"button",onClick:z,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:o.jsx(I1,{className:"h-8 w-8 text-green-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Please enter the 6-digit code from your authenticator app"})]}),o.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Code"}),o.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:K=>{const W=K.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:W}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),o.jsx("button",{type:"button",onClick:z,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}),o.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):v==="credentials"?"Sign In":v==="2fa_setup"?"Complete Setup":"Verify & Continue"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Ads Reporter © 2025 - Secure Login System"})})]})]})})},Ox=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=/^(\d{2})\/(\d{2})\/(\d{4})$/,s=t.match(e);if(s){const[,i,l,c]=s,u=new Date(c,l-1,i);return isNaN(u.getTime())?null:u}const n=new Date(t);return isNaN(n.getTime())?null:n}return null},Tn=t=>{if(!t)return"N/A";try{const e=Ox(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}},H1=t=>{if(!t)return"N/A";try{const e=Ox(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${s}/${n}/${i} ${l}:${c}`}catch(e){return console.error("Error formatting datetime:",e),"Invalid Date"}},bp=({closeForm:t,setMessage:e,setError:s,error:n,context:i="performing this action"})=>{console.error(`Access denied while ${i}:`,n),t&&typeof t=="function"&&t();const l=n?.response,c=l?.data;let u="";return l?.status===403?u=c?.message||"Access denied. You do not have permission to perform this action.":l?.status===401?u="Authentication required. Please log in first.":u=c?.message||n?.message||`Access denied while ${i}`,setTimeout(()=>{e&&e({type:"error",content:u,isAccessDenied:!0}),s&&s(u)},100),l?.status===401&&setTimeout(()=>{!localStorage.getItem("authToken")&&!localStorage.getItem("access_token")&&window.location.pathname!=="/login"&&console.log("No valid token found, redirecting to login...")},3e3),{isAccessDenied:!0,status:l?.status,message:u}},Rd=t=>{const e=t?.response?.status;return e===401||e===403},Hi=rl.API_BASE_URL,V1=({isOpen:t,onClose:e,title:s,children:n,size:i="md"})=>{if(!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:`relative bg-white shadow-xl rounded-lg w-full ${l[i]}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-6 w-6"})})]}),o.jsx("div",{className:"p-6",children:n})]})})},W1=({isOpen:t,onClose:e,user:s,roles:n,onSubmit:i,isLoading:l,accessDeniedMessage:c,modalError:u})=>{const[h,m]=N.useState({username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),[p,x]=N.useState(!1),[b,w]=N.useState({});N.useEffect(()=>{m(s?{username:s.username||"",password:"",confirm_password:"",role_id:s.role_id||"",enable_2fa:s.is_2fa_enabled||!1}:{username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),w({})},[s,t]);const j=v=>{v.preventDefault(),w({});const _={};if(h.username.trim()||(_.username="Username is required"),!s&&!h.password&&(_.password="Password is required"),h.password&&h.password.length<6&&(_.password="Password must be at least 6 characters"),h.password!==h.confirm_password&&(_.confirm_password="Passwords do not match"),h.role_id||(_.role_id="Role is required"),Object.keys(_).length>0){w(_);return}i(h)};return o.jsxs(V1,{isOpen:t,onClose:e,title:s?"Edit User":"Create New User",size:"lg",children:[c&&o.jsx("div",{className:"mb-4 p-4 bg-red-100 border-2 border-red-300 rounded-lg shadow-lg animate-pulse",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(st,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),o.jsx("div",{className:"text-red-700 font-medium mb-4",children:c}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{type:"button",onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[o.jsx(Ax,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),o.jsxs("button",{type:"button",onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[o.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),o.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:[o.jsx(yt,{className:"w-4 h-4 mr-2"}),"Close Form"]})]})]})]})}),u&&o.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(st,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700",children:u})]})]})}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),o.jsx("input",{type:"text",value:h.username,onChange:v=>m({...h,username:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),b.username&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.username})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),o.jsxs("select",{value:h.role_id,onChange:v=>m({...h,role_id:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.role_id?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select a role"}),n.map(v=>o.jsx("option",{value:v.id,children:v.display_name||v.name},v.id))]}),b.role_id&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.role_id})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s?"New Password (leave empty to keep current)":"Password *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:p?"text":"password",value:h.password,onChange:v=>m({...h,password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter password"}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?o.jsx(il,{className:"h-4 w-4 text-gray-400"}):o.jsx(al,{className:"h-4 w-4 text-gray-400"})})]}),b.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",!s&&"*"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:p?"text":"password",value:h.confirm_password,onChange:v=>m({...h,confirm_password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.confirm_password?"border-red-500":"border-gray-300"}`,placeholder:"Confirm password"}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?o.jsx(il,{className:"h-4 w-4 text-gray-400"}):o.jsx(al,{className:"h-4 w-4 text-gray-400"})})]}),b.confirm_password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirm_password})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[o.jsx("input",{type:"checkbox",id:"enable_2fa",checked:h.enable_2fa,onChange:v=>m({...h,enable_2fa:v.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"enable_2fa",className:"text-sm font-medium text-gray-900",children:"Enable Two-Factor Authentication (Google Authenticator)"}),o.jsx(Wr,{className:"h-4 w-4 text-blue-500"})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:l?o.jsxs(o.Fragment,{children:[o.jsx(Px,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Rx,{className:"w-4 h-4 mr-2"}),s?"Update User":"Create User"]})})]})]})]})},q1=()=>{const[t,e]=N.useState([]),[s,n]=N.useState([]),[i,l]=N.useState(!0),[c,u]=N.useState(""),[h,m]=N.useState([]),[p,x]=N.useState(!1),[b,w]=N.useState(null),[j,v]=N.useState(!1),[_,C]=N.useState({type:"",content:"",isAccessDenied:!1}),[S,E]=N.useState(""),[R,A]=N.useState(""),F=()=>{const M=localStorage.getItem(rl.TOKEN_KEY)||null;return M?{Authorization:`Bearer ${M}`}:{}},H=async()=>{try{l(!0);const M=F();console.log("🚀 Making API request to:",`${Hi}/user-management`),console.log("📜 Headers:",M);const X=await fetch(`${Hi}/user-management`,{headers:M});if(console.log("📊 Response status:",X.status),!X.ok)throw(X.status===403||X.status===401)&&bp({closeForm:()=>{x(!1),w(null)},setMessage:C,error:{response:X},context:"loading users"}),new Error(`HTTP error! status: ${X.status}`);const $=await X.json();$.success&&(e($.data.users||[]),n($.data.roles||[]),m($.data.users||[]))}catch(M){console.error("Error fetching users:",M),C({type:"error",content:"Failed to load users"})}finally{l(!1)}},z=async M=>{try{v(!0);const $=await(await fetch(`${Hi}/user-management`,{method:"POST",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(M)})).json();if($.success){let re="User created successfully!";M.enable_2fa&&(re+=" 2FA has been enabled and the secret has been generated automatically. The user will configure their authenticator app during first login."),C({type:"success",content:re}),x(!1),await H()}else C({type:"error",content:$.message||"Failed to create user"})}catch(X){console.error("Error creating user:",X);const $=X&&X.response?{status:X.response.status,message:X.response.data?.message||X.message}:{status:void 0,message:X?.message};$.status===403?E($.message||"Access denied. You do not have permission to create users."):$.status===401?E("Authentication required. Please log in first."):Rd(X)?E($.message||"Access denied while creating user"):C({type:"error",content:$.message||"Failed to create user"})}finally{v(!1)}},K=async M=>{try{v(!0),A("");const $=await(await fetch(`${Hi}/user-management/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(M)})).json();$.success?(C({type:"success",content:"User updated successfully!"}),x(!1),w(null),A(""),await H()):A($.message||"Failed to update user")}catch(X){console.error("Error updating user:",X);const $=X&&X.response?{status:X.response.status,message:X.response.data?.message||X.message}:{status:void 0,message:X?.message};$.status===403?E($.message||"Access denied. You do not have permission to update users."):$.status===401?E("Authentication required. Please log in first."):Rd(X)?E($.message||"Access denied while updating user"):A($.message||"Failed to update user")}finally{v(!1)}},W=async M=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const $=await(await fetch(`${Hi}/user-management/${M}`,{method:"DELETE",headers:F()})).json();$.success?(C({type:"success",content:"User deleted successfully!"}),await H()):C({type:"error",content:$.message||"Failed to delete user"})}catch(X){console.error("Error deleting user:",X),Rd(X)?bp({closeForm:()=>{w(null)},setMessage:C,error:X,context:"deleting user"}):C({type:"error",content:"Failed to delete user"})}};return N.useEffect(()=>{try{if(!Array.isArray(t)){m([]);return}const M=t.filter(X=>{if(!X)return!1;const $=X.username||"",re=X.role_name||"",le=c.toLowerCase();return $.toLowerCase().includes(le)||re.toLowerCase().includes(le)});m(M)}catch(M){console.error("Error filtering users:",M),m([])}},[c,t]),N.useEffect(()=>{H()},[]),N.useEffect(()=>{let M;return _.content&&!_.isAccessDenied&&(M=setTimeout(()=>{C({type:"",content:"",isAccessDenied:!1})},5e3)),()=>{M&&clearTimeout(M)}},[_]),i?o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Px,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[o.jsx(An,{className:"h-7 w-7 mr-3 text-blue-600"}),"User Management"]}),o.jsx("p",{className:"mt-1 text-gray-600",children:"Manage users and their authentication settings"})]}),o.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"w-4 h-4 mr-2"}),"Create User"]})]})}),_.content&&o.jsx("div",{className:`mb-4 p-4 rounded-lg ${_.isAccessDenied?"bg-red-100 border-2 border-red-300 shadow-2xl animate-pulse":_.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:_.type==="success"?o.jsx(ei,{className:"h-5 w-5 mr-3 mt-0.5 text-green-500"}):o.jsx(st,{className:`h-5 w-5 mr-3 mt-0.5 ${_.isAccessDenied?"text-red-600":"text-red-500"}`})}),o.jsxs("div",{className:"flex-1",children:[_.isAccessDenied&&o.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),o.jsx("div",{className:`${_.isAccessDenied?"text-red-700 font-medium":""}`,children:_.content}),_.isAccessDenied&&o.jsxs("div",{className:"mt-4 flex space-x-3",children:[o.jsxs("button",{onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[o.jsx(Ax,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),o.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[o.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx("button",{onClick:()=>C({type:"",content:"",isAccessDenied:!1}),className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Dismiss message",children:o.jsx(yt,{className:"h-4 w-4"})})})]})}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:M=>u(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),o.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2FA"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(M=>!M||!M.id||!M.username?null:o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-white",children:M.username?M.username[0].toUpperCase():"?"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.username||"Unknown"}),o.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",M.id||"N/A"]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:M.role_name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.is_active?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.is_2fa_enabled?o.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[o.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Enabled"]}):o.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.last_login?Tn(M.last_login):"Never"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Tn(M.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>{w(M),x(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit User",children:o.jsx(ti,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>W(M.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:o.jsx(ur,{className:"h-4 w-4"})})]})})]},M.id))})]}),h.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(An,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No users found":"No users yet"}),o.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search terms":"Get started by creating your first user"}),!c&&o.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),o.jsx(W1,{isOpen:p,onClose:()=>{x(!1),w(null),E(""),A("")},user:b,roles:s,onSubmit:b?K:z,isLoading:j,accessDeniedMessage:S,modalError:R})]})};let Y1={data:""},K1=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Y1,X1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Q1=/\/\*[^]*?\*\/|  +/g,vp=/\n+/g,_n=(t,e)=>{let s="",n="",i="";for(let l in t){let c=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+c+";":n+=l[1]=="f"?_n(c,l):l+"{"+_n(c,l[1]=="k"?"":e)+"}":typeof c=="object"?n+=_n(c,e?e.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=_n.p?_n.p(l,c):l+":"+c+";")}return s+(e&&i?e+"{"+i+"}":i)+n},qs={},Lx=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Lx(t[s]);return e}return t},G1=(t,e,s,n,i)=>{let l=Lx(t),c=qs[l]||(qs[l]=(h=>{let m=0,p=11;for(;m<h.length;)p=101*p+h.charCodeAt(m++)>>>0;return"go"+p})(l));if(!qs[c]){let h=l!==t?t:(m=>{let p,x,b=[{}];for(;p=X1.exec(m.replace(Q1,""));)p[4]?b.shift():p[3]?(x=p[3].replace(vp," ").trim(),b.unshift(b[0][x]=b[0][x]||{})):b[0][p[1]]=p[2].replace(vp," ").trim();return b[0]})(t);qs[c]=_n(i?{["@keyframes "+c]:h}:h,s?"":"."+c)}let u=s&&qs.g?qs.g:null;return s&&(qs.g=qs[c]),((h,m,p,x)=>{x?m.data=m.data.replace(x,h):m.data.indexOf(h)===-1&&(m.data=p?h+m.data:m.data+h)})(qs[c],e,n,u),c},J1=(t,e,s)=>t.reduce((n,i,l)=>{let c=e[l];if(c&&c.call){let u=c(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;c=h?"."+h:u&&typeof u=="object"?u.props?"":_n(u,""):u===!1?"":u}return n+i+(c??"")},"");function _l(t){let e=this||{},s=t.call?t(e.p):t;return G1(s.unshift?s.raw?J1(s,[].slice.call(arguments,1),e.p):s.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):s,K1(e.target),e.g,e.o,e.k)}let Fx,cu,du;_l.bind({g:1});let en=_l.bind({k:1});function Z1(t,e,s,n){_n.p=e,Fx=t,cu=s,du=n}function On(t,e){let s=this||{};return function(){let n=arguments;function i(l,c){let u=Object.assign({},l),h=u.className||i.className;s.p=Object.assign({theme:cu&&cu()},u),s.o=/ *go\d+/.test(h),u.className=_l.apply(s,n)+(h?" "+h:"");let m=t;return t[0]&&(m=u.as||t,delete u.as),du&&m[0]&&du(u),Fx(m,u)}return i}}var ej=t=>typeof t=="function",uu=(t,e)=>ej(t)?t(e):t,tj=(()=>{let t=0;return()=>(++t).toString()})(),sj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),nj=20,Ix="default",zx=(t,e)=>{let{toastLimit:s}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:n}=e;return zx(t,{type:t.toasts.find(c=>c.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},rj=[],ij={toasts:[],pausedAt:void 0,settings:{toastLimit:nj}},$r={},Bx=(t,e=Ix)=>{$r[e]=zx($r[e]||ij,t),rj.forEach(([s,n])=>{s===e&&n($r[e])})},$x=t=>Object.keys($r).forEach(e=>Bx(t,e)),aj=t=>Object.keys($r).find(e=>$r[e].toasts.some(s=>s.id===t)),Du=(t=Ix)=>e=>{Bx(e,t)},oj=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||tj()}),va=t=>(e,s)=>{let n=oj(e,t,s);return Du(n.toasterId||aj(n.id))({type:2,toast:n}),n.id},jt=(t,e)=>va("blank")(t,e);jt.error=va("error");jt.success=va("success");jt.loading=va("loading");jt.custom=va("custom");jt.dismiss=(t,e)=>{let s={type:3,toastId:t};e?Du(e)(s):$x(s)};jt.dismissAll=t=>jt.dismiss(void 0,t);jt.remove=(t,e)=>{let s={type:4,toastId:t};e?Du(e)(s):$x(s)};jt.removeAll=t=>jt.remove(void 0,t);jt.promise=(t,e,s)=>{let n=jt.loading(e.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let l=e.success?uu(e.success,i):void 0;return l?jt.success(l,{id:n,...s,...s?.success}):jt.dismiss(n),i}).catch(i=>{let l=e.error?uu(e.error,i):void 0;l?jt.error(l,{id:n,...s,...s?.error}):jt.dismiss(n)}),t};var lj=en`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,cj=en`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dj=en`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,uj=On("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${cj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hj=en`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,fj=On("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${hj} 1s linear infinite;
`,mj=en`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pj=en`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,gj=On("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xj=On("div")`
  position: absolute;
`,yj=On("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bj=en`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vj=On("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,wj=({toast:t})=>{let{icon:e,type:s,iconTheme:n}=t;return e!==void 0?typeof e=="string"?N.createElement(vj,null,e):e:s==="blank"?null:N.createElement(yj,null,N.createElement(fj,{...n}),s!=="loading"&&N.createElement(xj,null,s==="error"?N.createElement(uj,{...n}):N.createElement(gj,{...n})))},jj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,_j=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Nj="0%{opacity:0;} 100%{opacity:1;}",kj="0%{opacity:1;} 100%{opacity:0;}",Sj=On("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Cj=On("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ej=(t,e)=>{let s=t.includes("top")?1:-1,[n,i]=sj()?[Nj,kj]:[jj(s),_j(s)];return{animation:e?`${en(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${en(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};N.memo(({toast:t,position:e,style:s,children:n})=>{let i=t.height?Ej(t.position||e||"top-center",t.visible):{opacity:0},l=N.createElement(wj,{toast:t}),c=N.createElement(Cj,{...t.ariaProps},uu(t.message,t));return N.createElement(Sj,{className:t.className,style:{...i,...s,...t.style}},typeof n=="function"?n({icon:l,message:c}):N.createElement(N.Fragment,null,l,c))});Z1(N.createElement);_l`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Pj=jt;const Aj={getDashboardOverview:async()=>{try{return(await ae.get("/analytics/dashboard")).data}catch(t){throw console.error("Error fetching dashboard overview:",t),t}},getTrendsData:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date,{period:i="30d"}=t;switch(i){case"7d":n.setDate(s.getDate()-7);break;case"90d":n.setDate(s.getDate()-90);break;case"1y":n.setFullYear(s.getFullYear()-1);break;default:n.setDate(s.getDate()-30)}return e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),e.append("group_by","day"),(await ae.get(`/analytics/charts/time-series?${e.toString()}`)).data}catch(e){throw console.error("Error fetching trends data:",e),e}},getCampaignPerformance:async(t={})=>{try{const e=new URLSearchParams,{limit:s=10,sortBy:n="leads",...i}=t,l=new Date,c=new Date;return c.setDate(l.getDate()-30),e.append("date_from",c.toISOString().split("T")[0]),e.append("date_to",l.toISOString().split("T")[0]),e.append("limit",s),Object.entries(i).forEach(([h,m])=>{m!=null&&m!==""&&e.append(h,m)}),(await ae.get(`/analytics/charts/campaign-performance?${e.toString()}`)).data}catch(e){throw console.error("Error fetching campaign performance:",e),e}},getBrandPerformance:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date;return n.setDate(s.getDate()-30),e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),Object.entries(t).forEach(([l,c])=>{c!=null&&c!==""&&e.append(l,c)}),(await ae.get(`/analytics/charts/brand-analysis?${e.toString()}`)).data}catch(e){throw console.error("Error fetching brand performance:",e),e}},getRecentActivities:async(t={})=>(console.log("[Dashboard] Using mock activities data - activities endpoint not implemented yet"),{success:!0,data:{activities:[{id:1,type:"report_generated",title:"Campaign report generated",description:"Monthly report for active campaigns",timestamp:new Date(Date.now()-7200*1e3).toISOString(),user:"System",icon:"FileText"},{id:2,type:"campaign_created",title:"New campaign created",description:"Facebook Ads Campaign launched",timestamp:new Date(Date.now()-300*60*1e3).toISOString(),user:"Admin",icon:"Target"},{id:3,type:"user_login",title:"User login",description:"Dashboard access by user",timestamp:new Date(Date.now()-3600*1e3).toISOString(),user:"User",icon:"Users"},{id:4,type:"data_refresh",title:"Data synchronized",description:"Campaign data updated from sources",timestamp:new Date(Date.now()-1800*1e3).toISOString(),user:"System",icon:"RefreshCw"},{id:5,type:"analytics_view",title:"Analytics viewed",description:"Performance metrics accessed",timestamp:new Date(Date.now()-600*1e3).toISOString(),user:"User",icon:"BarChart3"}]}}),getSystemMetrics:async()=>{try{return(await ae.get("/analytics/system")).data}catch(t){return console.error("Error fetching system metrics:",t),{success:!0,data:{system:{totalUsers:12,activeCampaigns:8,totalReports:156,systemUptime:"15 days",lastBackup:new Date(Date.now()-1440*60*1e3).toISOString()}}}}},exportDashboardData:async(t={})=>{try{const e=new URLSearchParams,{format:s="json",sections:n=["overview","campaigns","brands"],...i}=t;return e.append("format",s),n.forEach(c=>e.append("sections",c)),Object.entries(i).forEach(([c,u])=>{u!=null&&u!==""&&e.append(c,u)}),(await ae.get(`/analytics/export?${e.toString()}`)).data}catch(e){throw console.error("Error exporting dashboard data:",e),e}}},To=({title:t,value:e,previousValue:s,icon:n,color:i="bg-blue-500",format:l="number",precision:c=0,showTrend:u=!0,loading:h=!1,error:m=null,onClick:p=null,className:x=""})=>{const b=(_,C=l)=>{if(_==null||isNaN(_))return"—";const S=Number(_);switch(C){case"currency":return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:c,maximumFractionDigits:c}).format(S);case"percentage":return`${S.toFixed(c)}%`;case"compact":return S>=1e6?`${(S/1e6).toFixed(1)}M`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toFixed(c);case"decimal":return S.toFixed(c);default:return new Intl.NumberFormat("en-US",{minimumFractionDigits:c,maximumFractionDigits:c}).format(S)}},j=(()=>{if(!u||!s||s===0||isNaN(e)||isNaN(s))return{percentage:0,direction:"neutral",icon:yp};const _=Number(e),C=Number(s),S=(_-C)/C*100;return S>0?{percentage:S,direction:"up",icon:qr}:S<0?{percentage:Math.abs(S),direction:"down",icon:Mx}:{percentage:0,direction:"neutral",icon:yp}})(),v=j.icon;return h?o.jsxs("div",{className:`card animate-pulse ${x}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),o.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-20 mb-2"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]}):m?o.jsxs("div",{className:`card border-red-200 bg-red-50 ${x}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",children:t}),o.jsx("div",{className:"flex-shrink-0 p-2 rounded-md bg-red-100",children:o.jsx(il,{className:"h-4 w-4 text-red-600"})})]}),o.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load"}),o.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Click to retry"})]}):o.jsxs("div",{className:`card transition-all duration-200 hover:shadow-lg ${p?"cursor-pointer hover:bg-gray-50":""} ${x}`,onClick:p,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",title:t,children:t}),o.jsx("div",{className:`flex-shrink-0 ${i} rounded-md p-2`,children:o.jsx(n,{className:"h-4 w-4 text-white"})})]}),o.jsx("div",{className:"mb-2",children:o.jsx("p",{className:"text-2xl font-bold text-gray-900",title:`${t}: ${b(e)}`,children:b(e)})}),u&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${j.direction==="up"?"text-green-600":j.direction==="down"?"text-red-600":"text-gray-500"}`,children:[o.jsx(v,{className:"h-3 w-3"}),o.jsx("span",{className:"text-xs font-medium",children:j.percentage>0?`${j.percentage.toFixed(1)}%`:"0%"})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs previous"})]})]})},Ms=({width:t="w-full",height:e="h-4",className:s=""})=>o.jsx("div",{className:`${t} ${e} bg-gray-200 rounded animate-pulse ${s}`}),Mu=({height:t="h-64"})=>o.jsxs("div",{className:"card animate-pulse",children:[o.jsx("div",{className:"mb-4",children:o.jsx(Ms,{width:"w-48",height:"h-6"})}),o.jsx(Ms,{width:"w-full",height:t}),o.jsxs("div",{className:"flex justify-center mt-4 space-x-4",children:[o.jsx(Ms,{width:"w-16",height:"h-3"}),o.jsx(Ms,{width:"w-20",height:"h-3"}),o.jsx(Ms,{width:"w-18",height:"h-3"})]})]}),Tj=()=>o.jsxs("div",{className:"card animate-pulse",children:[o.jsx("div",{className:"mb-4",children:o.jsx(Ms,{width:"w-40",height:"h-6"})}),o.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Ms,{width:"w-10",height:"h-10",className:"rounded-full flex-shrink-0"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(Ms,{width:"w-3/4",height:"h-4"}),o.jsx(Ms,{width:"w-1/2",height:"h-3"}),o.jsx(Ms,{width:"w-20",height:"h-3"})]})]},t))})]}),wp=({activities:t=[],loading:e=!1,title:s="Recent Activity",className:n="",compact:i=!1,maxVisible:l=5})=>{const c=w=>({report_generated:or,campaign_created:js,campaign_updated:js,user_registered:z1,user_login:An,analytics_view:ts,data_export:Au,system_update:Dx,performance_alert:st,milestone_reached:ei,data_refresh:Kt,trend_detected:qr})[w]||or,u=w=>({report_generated:"text-blue-600 bg-blue-100",campaign_created:"text-green-600 bg-green-100",campaign_updated:"text-yellow-600 bg-yellow-100",user_registered:"text-purple-600 bg-purple-100",user_login:"text-gray-600 bg-gray-100",analytics_view:"text-indigo-600 bg-indigo-100",data_export:"text-orange-600 bg-orange-100",system_update:"text-cyan-600 bg-cyan-100",performance_alert:"text-red-600 bg-red-100",milestone_reached:"text-emerald-600 bg-emerald-100",data_refresh:"text-teal-600 bg-teal-100",trend_detected:"text-pink-600 bg-pink-100"})[w]||"text-gray-600 bg-gray-100",h=w=>{if(!w)return"Unknown time";try{const j=new Date(w),v=new Date,_=v-j,C=Math.floor(_/6e4),S=Math.floor(C/60),E=Math.floor(S/24);return C<1?"Just now":C<60?`${C} minute${C===1?"":"s"} ago`:S<24?`${S} hour${S===1?"":"s"} ago`:E<7?`${E} day${E===1?"":"s"} ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:j.getFullYear()!==v.getFullYear()?"numeric":void 0})}catch{return"Invalid date"}},[m,p]=N.useState(!1);if(e)return o.jsx(Tj,{});const x=i&&!m?t.slice(0,l):t,b=t.length>l;return o.jsxs("div",{className:`card ${n}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:`font-medium text-gray-900 ${i?"text-sm":"text-lg"}`,children:s}),t&&t.length>0&&o.jsxs("span",{className:"text-xs text-gray-500",children:[t.length," activities"]})]}),o.jsx("div",{className:`space-y-${i?"1":"3"}`,children:!t||t.length===0?o.jsxs("div",{className:`text-center ${i?"py-3":"py-8"}`,children:[o.jsx("div",{className:"text-gray-400 mb-2",children:o.jsx(ts,{className:`${i?"h-6 w-6":"h-12 w-12"} mx-auto`})}),o.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activities"}),!i&&o.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Activities will appear here as they happen"})]}):x.map(w=>{const j=c(w.type),v=u(w.type);return o.jsxs("div",{className:`flex items-${i?"center":"start"} space-x-${i?"2":"3"} ${i?"py-1.5 px-1.5":"py-3 px-2"} hover:bg-gray-50 rounded-lg -mx-${i?"1.5":"2"} transition-colors duration-150`,children:[o.jsx("div",{className:`flex-shrink-0 ${i?"w-5 h-5":"w-8 h-8"} rounded-full flex items-center justify-center ${v}`,children:o.jsx(j,{className:`${i?"h-2.5 w-2.5":"h-4 w-4"}`})}),o.jsx("div",{className:"flex-1 min-w-0",children:i?o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex-1 min-w-0 mr-2",children:o.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:w.title||"System Activity"})}),o.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1.5 text-xs text-gray-500",children:[o.jsx("span",{children:h(w.timestamp)}),w.status&&o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${w.status==="success"?"bg-green-500":w.status==="warning"?"bg-yellow-500":w.status==="error"?"bg-red-500":"bg-gray-400"}`})]})]}):o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:w.title||"System Activity"}),w.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:w.description}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[o.jsx("span",{children:h(w.timestamp)}),w.user&&w.user!=="System"&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsxs("span",{children:["by ",w.user]})]})]})]}),w.status&&o.jsx("div",{className:`flex-shrink-0 ml-2 px-2 py-1 rounded-full text-xs font-medium ${w.status==="success"?"bg-green-100 text-green-800":w.status==="warning"?"bg-yellow-100 text-yellow-800":w.status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})})]},w.id)})}),i&&b&&o.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:o.jsxs("button",{onClick:()=>p(!m),className:"flex items-center justify-center w-full text-xs text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150 py-1",children:[o.jsx("span",{className:"mr-1",children:m?"Show Less":`+${t.length-l} More`}),m?o.jsx(D1,{className:"h-2.5 w-2.5"}):o.jsx(A1,{className:"h-2.5 w-2.5"})]})}),!i&&t&&t.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150",onClick:()=>{console.log("Navigate to full activity log")},children:"View all activities →"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function wa(t){return t+.5|0}const kn=(t,e,s)=>Math.max(Math.min(t,s),e);function Qi(t){return kn(wa(t*2.55),0,255)}function Pn(t){return kn(wa(t*255),0,255)}function Qs(t){return kn(wa(t/2.55)/100,0,1)}function jp(t){return kn(wa(t*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hu=[..."0123456789ABCDEF"],Rj=t=>hu[t&15],Dj=t=>hu[(t&240)>>4]+hu[t&15],Ro=t=>(t&240)>>4===(t&15),Mj=t=>Ro(t.r)&&Ro(t.g)&&Ro(t.b)&&Ro(t.a);function Oj(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&ds[t[1]]*17,g:255&ds[t[2]]*17,b:255&ds[t[3]]*17,a:e===5?ds[t[4]]*17:255}:(e===7||e===9)&&(s={r:ds[t[1]]<<4|ds[t[2]],g:ds[t[3]]<<4|ds[t[4]],b:ds[t[5]]<<4|ds[t[6]],a:e===9?ds[t[7]]<<4|ds[t[8]]:255})),s}const Lj=(t,e)=>t<255?e(t):"";function Fj(t){var e=Mj(t)?Rj:Dj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Lj(t.a,e):void 0}const Ij=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ux(t,e,s){const n=e*Math.min(s,1-s),i=(l,c=(l+t/30)%12)=>s-n*Math.max(Math.min(c-3,9-c,1),-1);return[i(0),i(8),i(4)]}function zj(t,e,s){const n=(i,l=(i+t/60)%6)=>s-s*e*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function Bj(t,e,s){const n=Ux(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function $j(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function Ou(t){const s=t.r/255,n=t.g/255,i=t.b/255,l=Math.max(s,n,i),c=Math.min(s,n,i),u=(l+c)/2;let h,m,p;return l!==c&&(p=l-c,m=u>.5?p/(2-l-c):p/(l+c),h=$j(s,n,i,p,l),h=h*60+.5),[h|0,m||0,u]}function Lu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Pn)}function Fu(t,e,s){return Lu(Ux,t,e,s)}function Uj(t,e,s){return Lu(Bj,t,e,s)}function Hj(t,e,s){return Lu(zj,t,e,s)}function Hx(t){return(t%360+360)%360}function Vj(t){const e=Ij.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Qi(+e[5]):Pn(+e[5]));const i=Hx(+e[2]),l=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=Uj(i,l,c):e[1]==="hsv"?n=Hj(i,l,c):n=Fu(i,l,c),{r:n[0],g:n[1],b:n[2],a:s}}function Wj(t,e){var s=Ou(t);s[0]=Hx(s[0]+e),s=Fu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function qj(t){if(!t)return;const e=Ou(t),s=e[0],n=jp(e[1]),i=jp(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${Qs(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const _p={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Np={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Yj(){const t={},e=Object.keys(Np),s=Object.keys(_p);let n,i,l,c,u;for(n=0;n<e.length;n++){for(c=u=e[n],i=0;i<s.length;i++)l=s[i],u=u.replace(l,_p[l]);l=parseInt(Np[c],16),t[u]=[l>>16&255,l>>8&255,l&255]}return t}let Do;function Kj(t){Do||(Do=Yj(),Do.transparent=[0,0,0,0]);const e=Do[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Xj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Qj(t){const e=Xj.exec(t);let s=255,n,i,l;if(e){if(e[7]!==n){const c=+e[7];s=e[8]?Qi(c):kn(c*255,0,255)}return n=+e[1],i=+e[3],l=+e[5],n=255&(e[2]?Qi(n):kn(n,0,255)),i=255&(e[4]?Qi(i):kn(i,0,255)),l=255&(e[6]?Qi(l):kn(l,0,255)),{r:n,g:i,b:l,a:s}}}function Gj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Qs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Dd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ir=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Jj(t,e,s){const n=Ir(Qs(t.r)),i=Ir(Qs(t.g)),l=Ir(Qs(t.b));return{r:Pn(Dd(n+s*(Ir(Qs(e.r))-n))),g:Pn(Dd(i+s*(Ir(Qs(e.g))-i))),b:Pn(Dd(l+s*(Ir(Qs(e.b))-l))),a:t.a+s*(e.a-t.a)}}function Mo(t,e,s){if(t){let n=Ou(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Fu(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Vx(t,e){return t&&Object.assign(e||{},t)}function kp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Pn(t[3]))):(e=Vx(t,{r:0,g:0,b:0,a:1}),e.a=Pn(e.a)),e}function Zj(t){return t.charAt(0)==="r"?Qj(t):Vj(t)}class oa{constructor(e){if(e instanceof oa)return e;const s=typeof e;let n;s==="object"?n=kp(e):s==="string"&&(n=Oj(e)||Kj(e)||Zj(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Vx(this._rgb);return e&&(e.a=Qs(e.a)),e}set rgb(e){this._rgb=kp(e)}rgbString(){return this._valid?Gj(this._rgb):void 0}hexString(){return this._valid?Fj(this._rgb):void 0}hslString(){return this._valid?qj(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let l;const c=s===l?.5:s,u=2*c-1,h=n.a-i.a,m=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;l=1-m,n.r=255&m*n.r+l*i.r+.5,n.g=255&m*n.g+l*i.g+.5,n.b=255&m*n.b+l*i.b+.5,n.a=c*n.a+(1-c)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=Jj(this._rgb,e._rgb,s)),this}clone(){return new oa(this.rgb)}alpha(e){return this._rgb.a=Pn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=wa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Mo(this._rgb,2,e),this}darken(e){return Mo(this._rgb,2,-e),this}saturate(e){return Mo(this._rgb,1,e),this}desaturate(e){return Mo(this._rgb,1,-e),this}rotate(e){return Wj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ys(){}const e_=(()=>{let t=0;return()=>t++})();function $e(t){return t==null}function ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Tt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ts(t,e){return Tt(t)?t:e}function Re(t,e){return typeof t>"u"?e:t}const t_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Wx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Qe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Ve(t,e,s,n){let i,l,c;if(ct(t))for(l=t.length,i=0;i<l;i++)e.call(s,t[i],i);else if(Me(t))for(c=Object.keys(t),l=c.length,i=0;i<l;i++)e.call(s,t[c[i]],c[i])}function ll(t,e){let s,n,i,l;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],l=e[s],i.datasetIndex!==l.datasetIndex||i.index!==l.index)return!1;return!0}function cl(t){if(ct(t))return t.map(cl);if(Me(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=cl(t[s[i]]);return e}return t}function qx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function s_(t,e,s,n){if(!qx(t))return;const i=e[t],l=s[t];Me(i)&&Me(l)?la(i,l,n):e[t]=cl(l)}function la(t,e,s){const n=ct(e)?e:[e],i=n.length;if(!Me(t))return t;s=s||{};const l=s.merger||s_;let c;for(let u=0;u<i;++u){if(c=n[u],!Me(c))continue;const h=Object.keys(c);for(let m=0,p=h.length;m<p;++m)l(h[m],t,c,s)}return t}function ea(t,e){return la(t,e,{merger:n_})}function n_(t,e,s){if(!qx(t))return;const n=e[t],i=s[t];Me(n)&&Me(i)?ea(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=cl(i))}const Sp={"":t=>t,x:t=>t.x,y:t=>t.y};function r_(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function i_(t){const e=r_(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function lr(t,e){return(Sp[e]||(Sp[e]=i_(e)))(t)}function Iu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ca=t=>typeof t<"u",Rn=t=>typeof t=="function",Cp=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function a_(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const We=Math.PI,et=2*We,o_=et+We,dl=Number.POSITIVE_INFINITY,l_=We/180,ft=We/2,Xn=We/4,Ep=We*2/3,Yx=Math.log10,Ls=Math.sign;function ta(t,e,s){return Math.abs(t-e)<s}function Pp(t){const e=Math.round(t);t=ta(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Yx(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function c_(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,l)=>i-l).pop(),e}function d_(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function da(t){return!d_(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function u_(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function h_(t,e,s){let n,i,l;for(n=0,i=t.length;n<i;n++)l=t[n][s],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function Gs(t){return t*(We/180)}function f_(t){return t*(180/We)}function Ap(t){if(!Tt(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Kx(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let l=Math.atan2(n,s);return l<-.5*We&&(l+=et),{angle:l,distance:i}}function fu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function m_(t,e){return(t-e+o_)%et-We}function es(t){return(t%et+et)%et}function ua(t,e,s,n){const i=es(t),l=es(e),c=es(s),u=es(l-i),h=es(c-i),m=es(i-l),p=es(i-c);return i===l||i===c||n&&l===c||u>h&&m<p}function Pt(t,e,s){return Math.max(e,Math.min(s,t))}function p_(t){return Pt(t,-32768,32767)}function Js(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function zu(t,e,s){s=s||(c=>t[c]<e);let n=t.length-1,i=0,l;for(;n-i>1;)l=i+n>>1,s(l)?i=l:n=l;return{lo:i,hi:n}}const sr=(t,e,s,n)=>zu(t,s,n?i=>{const l=t[i][e];return l<s||l===s&&t[i+1][e]===s}:i=>t[i][e]<s),g_=(t,e,s)=>zu(t,s,n=>t[n][e]>=s);function x_(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const Xx=["push","pop","shift","splice","unshift"];function y_(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Xx.forEach(s=>{const n="_onData"+Iu(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...l){const c=i.apply(this,l);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...l)}),c}})})}function Tp(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(Xx.forEach(l=>{delete t[l]}),delete t._chartjs)}function Qx(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Gx=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Jx(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Gx.call(window,()=>{n=!1,t.apply(e,s)}))}}function b_(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Bu=t=>t==="start"?"left":t==="end"?"right":"center",Ct=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,v_=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function w_(t,e,s){const n=e.length;let i=0,l=n;if(t._sorted){const{iScale:c,vScale:u,_parsed:h}=t,m=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=c.axis,{min:x,max:b,minDefined:w,maxDefined:j}=c.getUserBounds();if(w){if(i=Math.min(sr(h,p,x).lo,s?n:sr(e,p,c.getPixelForValue(x)).lo),m){const v=h.slice(0,i+1).reverse().findIndex(_=>!$e(_[u.axis]));i-=Math.max(0,v)}i=Pt(i,0,n-1)}if(j){let v=Math.max(sr(h,c.axis,b,!0).hi+1,s?0:sr(e,p,c.getPixelForValue(b),!0).hi+1);if(m){const _=h.slice(v-1).findIndex(C=>!$e(C[u.axis]));v+=Math.max(0,_)}l=Pt(v,i,n)-i}else l=n-i}return{start:i,count:l}}function j_(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const l=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),l}const Oo=t=>t===0||t===1,Rp=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*et/s)),Dp=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*et/s)+1,sa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ft)+1,easeOutSine:t=>Math.sin(t*ft),easeInOutSine:t=>-.5*(Math.cos(We*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Oo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Oo(t)?t:Rp(t,.075,.3),easeOutElastic:t=>Oo(t)?t:Dp(t,.075,.3),easeInOutElastic(t){return Oo(t)?t:t<.5?.5*Rp(t*2,.1125,.45):.5+.5*Dp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-sa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?sa.easeInBounce(t*2)*.5:sa.easeOutBounce(t*2-1)*.5+.5};function $u(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Mp(t){return $u(t)?t:new oa(t)}function Md(t){return $u(t)?t:new oa(t).saturate(.5).darken(.1).hexString()}const __=["x","y","borderWidth","radius","tension"],N_=["color","borderColor","backgroundColor"];function k_(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:N_},numbers:{type:"number",properties:__}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function S_(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Op=new Map;function C_(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Op.get(s);return n||(n=new Intl.NumberFormat(t,e),Op.set(s,n)),n}function Uu(t,e,s){return C_(e,s).format(t)}const E_={values(t){return ct(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,l=t;if(s.length>1){const m=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(m<1e-4||m>1e15)&&(i="scientific"),l=P_(t,s)}const c=Yx(Math.abs(l)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Uu(t,n,h)}};function P_(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Zx={formatters:E_};function A_(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const cr=Object.create(null),mu=Object.create(null);function na(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const l=s[n];t=t[l]||(t[l]=Object.create(null))}return t}function Od(t,e,s){return typeof e=="string"?la(na(t,e),s):la(na(t,""),e)}class T_{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Md(i.backgroundColor),this.hoverBorderColor=(n,i)=>Md(i.borderColor),this.hoverColor=(n,i)=>Md(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Od(this,e,s)}get(e){return na(this,e)}describe(e,s){return Od(mu,e,s)}override(e,s){return Od(cr,e,s)}route(e,s,n,i){const l=na(this,e),c=na(this,n),u="_"+s;Object.defineProperties(l,{[u]:{value:l[s],writable:!0},[s]:{enumerable:!0,get(){const h=this[u],m=c[i];return Me(h)?Object.assign({},m,h):Re(h,m)},set(h){this[u]=h}}})}apply(e){e.forEach(s=>s(this))}}var it=new T_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k_,S_,A_]);function R_(t){return!t||$e(t.size)||$e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lp(t,e,s,n,i){let l=e[i];return l||(l=e[i]=t.measureText(i).width,s.push(i)),l>n&&(n=l),n}function Qn(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function Fp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function pu(t,e,s,n){e0(t,e,s,n,null)}function e0(t,e,s,n,i){let l,c,u,h,m,p,x,b;const w=e.pointStyle,j=e.rotation,v=e.radius;let _=(j||0)*l_;if(w&&typeof w=="object"&&(l=w.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(_),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),w){default:i?t.ellipse(s,n,i/2,v,0,0,et):t.arc(s,n,v,0,et),t.closePath();break;case"triangle":p=i?i/2:v,t.moveTo(s+Math.sin(_)*p,n-Math.cos(_)*v),_+=Ep,t.lineTo(s+Math.sin(_)*p,n-Math.cos(_)*v),_+=Ep,t.lineTo(s+Math.sin(_)*p,n-Math.cos(_)*v),t.closePath();break;case"rectRounded":m=v*.516,h=v-m,c=Math.cos(_+Xn)*h,x=Math.cos(_+Xn)*(i?i/2-m:h),u=Math.sin(_+Xn)*h,b=Math.sin(_+Xn)*(i?i/2-m:h),t.arc(s-x,n-u,m,_-We,_-ft),t.arc(s+b,n-c,m,_-ft,_),t.arc(s+x,n+u,m,_,_+ft),t.arc(s-b,n+c,m,_+ft,_+We),t.closePath();break;case"rect":if(!j){h=Math.SQRT1_2*v,p=i?i/2:h,t.rect(s-p,n-h,2*p,2*h);break}_+=Xn;case"rectRot":x=Math.cos(_)*(i?i/2:v),c=Math.cos(_)*v,u=Math.sin(_)*v,b=Math.sin(_)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+b,n-c),t.lineTo(s+x,n+u),t.lineTo(s-b,n+c),t.closePath();break;case"crossRot":_+=Xn;case"cross":x=Math.cos(_)*(i?i/2:v),c=Math.cos(_)*v,u=Math.sin(_)*v,b=Math.sin(_)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"star":x=Math.cos(_)*(i?i/2:v),c=Math.cos(_)*v,u=Math.sin(_)*v,b=Math.sin(_)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c),_+=Xn,x=Math.cos(_)*(i?i/2:v),c=Math.cos(_)*v,u=Math.sin(_)*v,b=Math.sin(_)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"line":c=i?i/2:Math.cos(_)*v,u=Math.sin(_)*v,t.moveTo(s-c,n-u),t.lineTo(s+c,n+u);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(_)*(i?i/2:v),n+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ha(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Nl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function kl(t){t.restore()}function D_(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const l=(e.x+s.x)/2;t.lineTo(l,e.y),t.lineTo(l,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function M_(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function O_(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),$e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function L_(t,e,s,n,i){if(i.strikethrough||i.underline){const l=t.measureText(n),c=e-l.actualBoundingBoxLeft,u=e+l.actualBoundingBoxRight,h=s-l.actualBoundingBoxAscent,m=s+l.actualBoundingBoxDescent,p=i.strikethrough?(h+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(c,p),t.lineTo(u,p),t.stroke()}}function F_(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function fa(t,e,s,n,i,l={}){const c=ct(e)?e:[e],u=l.strokeWidth>0&&l.strokeColor!=="";let h,m;for(t.save(),t.font=i.string,O_(t,l),h=0;h<c.length;++h)m=c[h],l.backdrop&&F_(t,l.backdrop),u&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),$e(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(m,s,n,l.maxWidth)),t.fillText(m,s,n,l.maxWidth),L_(t,s,n,m,l),n+=Number(i.lineHeight);t.restore()}function ul(t,e){const{x:s,y:n,w:i,h:l,radius:c}=e;t.arc(s+c.topLeft,n+c.topLeft,c.topLeft,1.5*We,We,!0),t.lineTo(s,n+l-c.bottomLeft),t.arc(s+c.bottomLeft,n+l-c.bottomLeft,c.bottomLeft,We,ft,!0),t.lineTo(s+i-c.bottomRight,n+l),t.arc(s+i-c.bottomRight,n+l-c.bottomRight,c.bottomRight,ft,0,!0),t.lineTo(s+i,n+c.topRight),t.arc(s+i-c.topRight,n+c.topRight,c.topRight,0,-ft,!0),t.lineTo(s+c.topLeft,n)}const I_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,z_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function B_(t,e){const s=(""+t).match(I_);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const $_=t=>+t||0;function Hu(t,e){const s={},n=Me(e),i=n?Object.keys(e):e,l=Me(t)?n?c=>Re(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of i)s[c]=$_(l(c));return s}function t0(t){return Hu(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ur(t){return Hu(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hs(t){const e=t0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function At(t,e){t=t||{},e=e||it.font;let s=Re(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Re(t.style,e.style);n&&!(""+n).match(z_)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Re(t.family,e.family),lineHeight:B_(Re(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Re(t.weight,e.weight),string:""};return i.string=R_(i),i}function Lo(t,e,s,n){let i,l,c;for(i=0,l=t.length;i<l;++i)if(c=t[i],c!==void 0&&c!==void 0)return c}function U_(t,e,s){const{min:n,max:i}=t,l=Wx(e,(i-n)/2),c=(u,h)=>s&&u===0?0:u+h;return{min:c(n,-Math.abs(l)),max:c(i,l)}}function hr(t,e){return Object.assign(Object.create(t),e)}function Vu(t,e=[""],s,n,i=()=>t[0]){const l=s||t;typeof n>"u"&&(n=i0("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:n,_getTarget:i,override:u=>Vu([u,...t],e,l,n)};return new Proxy(c,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return n0(u,h,()=>Q_(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return zp(u).includes(h)},ownKeys(u){return zp(u)},set(u,h,m){const p=u._storage||(u._storage=i());return u[h]=p[h]=m,delete u._keys,!0}})}function Yr(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:s0(t,n),setContext:l=>Yr(t,l,s,n),override:l=>Yr(t.override(l),e,s,n)};return new Proxy(i,{deleteProperty(l,c){return delete l[c],delete t[c],!0},get(l,c,u){return n0(l,c,()=>V_(l,c,u))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(l,c,u){return t[c]=u,delete l[c],!0}})}function s0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Rn(s)?s:()=>s,isIndexable:Rn(n)?n:()=>n}}const H_=(t,e)=>t?t+Iu(e):e,Wu=(t,e)=>Me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function n0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function V_(t,e,s){const{_proxy:n,_context:i,_subProxy:l,_descriptors:c}=t;let u=n[e];return Rn(u)&&c.isScriptable(e)&&(u=W_(e,u,t,s)),ct(u)&&u.length&&(u=q_(e,u,t,c.isIndexable)),Wu(e,u)&&(u=Yr(u,i,l&&l[e],c)),u}function W_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_stack:u}=s;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(l,c||n);return u.delete(t),Wu(t,h)&&(h=qu(i._scopes,i,t,h)),h}function q_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_descriptors:u}=s;if(typeof l.index<"u"&&n(t))return e[l.index%e.length];if(Me(e[0])){const h=e,m=i._scopes.filter(p=>p!==h);e=[];for(const p of h){const x=qu(m,i,t,p);e.push(Yr(x,l,c&&c[t],u))}}return e}function r0(t,e,s){return Rn(t)?t(e,s):t}const Y_=(t,e)=>t===!0?e:typeof t=="string"?lr(e,t):void 0;function K_(t,e,s,n,i){for(const l of e){const c=Y_(s,l);if(c){t.add(c);const u=r0(c._fallback,s,i);if(typeof u<"u"&&u!==s&&u!==n)return u}else if(c===!1&&typeof n<"u"&&s!==n)return null}return!1}function qu(t,e,s,n){const i=e._rootScopes,l=r0(e._fallback,s,n),c=[...t,...i],u=new Set;u.add(n);let h=Ip(u,c,s,l||s,n);return h===null||typeof l<"u"&&l!==s&&(h=Ip(u,c,l,h,n),h===null)?!1:Vu(Array.from(u),[""],i,l,()=>X_(e,s,n))}function Ip(t,e,s,n,i){for(;s;)s=K_(t,e,s,n,i);return s}function X_(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return ct(i)&&Me(s)?s:i||{}}function Q_(t,e,s,n){let i;for(const l of e)if(i=i0(H_(l,t),s),typeof i<"u")return Wu(t,i)?qu(s,n,t,i):i}function i0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function zp(t){let e=t._keys;return e||(e=t._keys=G_(t._scopes)),e}function G_(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const J_=Number.EPSILON||1e-14,Kr=(t,e)=>e<t.length&&!t[e].skip&&t[e],a0=t=>t==="x"?"y":"x";function Z_(t,e,s,n){const i=t.skip?e:t,l=e,c=s.skip?e:s,u=fu(l,i),h=fu(c,l);let m=u/(u+h),p=h/(u+h);m=isNaN(m)?0:m,p=isNaN(p)?0:p;const x=n*m,b=n*p;return{previous:{x:l.x-x*(c.x-i.x),y:l.y-x*(c.y-i.y)},next:{x:l.x+b*(c.x-i.x),y:l.y+b*(c.y-i.y)}}}function eN(t,e,s){const n=t.length;let i,l,c,u,h,m=Kr(t,0);for(let p=0;p<n-1;++p)if(h=m,m=Kr(t,p+1),!(!h||!m)){if(ta(e[p],0,J_)){s[p]=s[p+1]=0;continue}i=s[p]/e[p],l=s[p+1]/e[p],u=Math.pow(i,2)+Math.pow(l,2),!(u<=9)&&(c=3/Math.sqrt(u),s[p]=i*c*e[p],s[p+1]=l*c*e[p])}}function tN(t,e,s="x"){const n=a0(s),i=t.length;let l,c,u,h=Kr(t,0);for(let m=0;m<i;++m){if(c=u,u=h,h=Kr(t,m+1),!u)continue;const p=u[s],x=u[n];c&&(l=(p-c[s])/3,u[`cp1${s}`]=p-l,u[`cp1${n}`]=x-l*e[m]),h&&(l=(h[s]-p)/3,u[`cp2${s}`]=p+l,u[`cp2${n}`]=x+l*e[m])}}function sN(t,e="x"){const s=a0(e),n=t.length,i=Array(n).fill(0),l=Array(n);let c,u,h,m=Kr(t,0);for(c=0;c<n;++c)if(u=h,h=m,m=Kr(t,c+1),!!h){if(m){const p=m[e]-h[e];i[c]=p!==0?(m[s]-h[s])/p:0}l[c]=u?m?Ls(i[c-1])!==Ls(i[c])?0:(i[c-1]+i[c])/2:i[c-1]:i[c]}eN(t,i,l),tN(t,l,e)}function Fo(t,e,s){return Math.max(Math.min(t,s),e)}function nN(t,e){let s,n,i,l,c,u=ha(t[0],e);for(s=0,n=t.length;s<n;++s)c=l,l=u,u=s<n-1&&ha(t[s+1],e),l&&(i=t[s],c&&(i.cp1x=Fo(i.cp1x,e.left,e.right),i.cp1y=Fo(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=Fo(i.cp2x,e.left,e.right),i.cp2y=Fo(i.cp2y,e.top,e.bottom)))}function rN(t,e,s,n,i){let l,c,u,h;if(e.spanGaps&&(t=t.filter(m=>!m.skip)),e.cubicInterpolationMode==="monotone")sN(t,i);else{let m=n?t[t.length-1]:t[0];for(l=0,c=t.length;l<c;++l)u=t[l],h=Z_(m,u,t[Math.min(l+1,c-(n?0:1))%c],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,m=u}e.capBezierPoints&&nN(t,s)}function Yu(){return typeof window<"u"&&typeof document<"u"}function Ku(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Sl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function iN(t,e){return Sl(t).getPropertyValue(e)}const aN=["top","right","bottom","left"];function rr(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const l=aN[i];n[l]=parseFloat(t[e+"-"+l+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const oN=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function lN(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:l}=n;let c=!1,u,h;if(oN(i,l,t.target))u=i,h=l;else{const m=e.getBoundingClientRect();u=n.clientX-m.left,h=n.clientY-m.top,c=!0}return{x:u,y:h,box:c}}function Zn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Sl(s),l=i.boxSizing==="border-box",c=rr(i,"padding"),u=rr(i,"border","width"),{x:h,y:m,box:p}=lN(t,s),x=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:w,height:j}=e;return l&&(w-=c.width+u.width,j-=c.height+u.height),{x:Math.round((h-x)/w*s.width/n),y:Math.round((m-b)/j*s.height/n)}}function cN(t,e,s){let n,i;if(e===void 0||s===void 0){const l=t&&Ku(t);if(!l)e=t.clientWidth,s=t.clientHeight;else{const c=l.getBoundingClientRect(),u=Sl(l),h=rr(u,"border","width"),m=rr(u,"padding");e=c.width-m.width-h.width,s=c.height-m.height-h.height,n=hl(u.maxWidth,l,"clientWidth"),i=hl(u.maxHeight,l,"clientHeight")}}return{width:e,height:s,maxWidth:n||dl,maxHeight:i||dl}}const Io=t=>Math.round(t*10)/10;function dN(t,e,s,n){const i=Sl(t),l=rr(i,"margin"),c=hl(i.maxWidth,t,"clientWidth")||dl,u=hl(i.maxHeight,t,"clientHeight")||dl,h=cN(t,e,s);let{width:m,height:p}=h;if(i.boxSizing==="content-box"){const b=rr(i,"border","width"),w=rr(i,"padding");m-=w.width+b.width,p-=w.height+b.height}return m=Math.max(0,m-l.width),p=Math.max(0,n?m/n:p-l.height),m=Io(Math.min(m,c,h.maxWidth)),p=Io(Math.min(p,u,h.maxHeight)),m&&!p&&(p=Io(m/2)),(e!==void 0||s!==void 0)&&n&&h.height&&p>h.height&&(p=h.height,m=Io(Math.floor(p*n))),{width:m,height:p}}function Bp(t,e,s){const n=e||1,i=Math.floor(t.height*n),l=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(s||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==i||c.width!==l?(t.currentDevicePixelRatio=n,c.height=i,c.width=l,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const uN=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Yu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function $p(t,e){const s=iN(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function er(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function hN(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function fN(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},c=er(t,i,s),u=er(i,l,s),h=er(l,e,s),m=er(c,u,s),p=er(u,h,s);return er(m,p,s)}const mN=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},pN=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Hr(t,e,s){return t?mN(e,s):pN()}function o0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function l0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function c0(t){return t==="angle"?{between:ua,compare:m_,normalize:es}:{between:Js,compare:(e,s)=>e-s,normalize:e=>e}}function Up({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function gN(t,e,s){const{property:n,start:i,end:l}=s,{between:c,normalize:u}=c0(n),h=e.length;let{start:m,end:p,loop:x}=t,b,w;if(x){for(m+=h,p+=h,b=0,w=h;b<w&&c(u(e[m%h][n]),i,l);++b)m--,p--;m%=h,p%=h}return p<m&&(p+=h),{start:m,end:p,loop:x,style:t.style}}function d0(t,e,s){if(!s)return[t];const{property:n,start:i,end:l}=s,c=e.length,{compare:u,between:h,normalize:m}=c0(n),{start:p,end:x,loop:b,style:w}=gN(t,e,s),j=[];let v=!1,_=null,C,S,E;const R=()=>h(i,E,C)&&u(i,E)!==0,A=()=>u(l,C)===0||h(l,E,C),F=()=>v||R(),H=()=>!v||A();for(let z=p,K=p;z<=x;++z)S=e[z%c],!S.skip&&(C=m(S[n]),C!==E&&(v=h(C,i,l),_===null&&F()&&(_=u(C,i)===0?z:K),_!==null&&H()&&(j.push(Up({start:_,end:z,loop:b,count:c,style:w})),_=null),K=z,E=C));return _!==null&&j.push(Up({start:_,end:x,loop:b,count:c,style:w})),j}function u0(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const l=d0(n[i],t.points,e);l.length&&s.push(...l)}return s}function xN(t,e,s,n){let i=0,l=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(l+=i);l>i&&t[l%e].skip;)l--;return l%=e,{start:i,end:l}}function yN(t,e,s,n){const i=t.length,l=[];let c=e,u=t[e],h;for(h=e+1;h<=s;++h){const m=t[h%i];m.skip||m.stop?u.skip||(n=!1,l.push({start:e%i,end:(h-1)%i,loop:n}),e=c=m.stop?h:null):(c=h,u.skip&&(e=h)),u=m}return c!==null&&l.push({start:e%i,end:c%i,loop:n}),l}function bN(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const l=!!t._loop,{start:c,end:u}=xN(s,i,l,n);if(n===!0)return Hp(t,[{start:c,end:u,loop:l}],s,e);const h=u<c?u+i:u,m=!!t._fullLoop&&c===0&&u===i-1;return Hp(t,yN(s,c,h,m),s,e)}function Hp(t,e,s,n){return!n||!n.setContext||!s?e:vN(t,e,s,n)}function vN(t,e,s,n){const i=t._chart.getContext(),l=Vp(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,h=s.length,m=[];let p=l,x=e[0].start,b=x;function w(j,v,_,C){const S=u?-1:1;if(j!==v){for(j+=h;s[j%h].skip;)j-=S;for(;s[v%h].skip;)v+=S;j%h!==v%h&&(m.push({start:j%h,end:v%h,loop:_,style:C}),p=C,x=v%h)}}for(const j of e){x=u?x:j.start;let v=s[x%h],_;for(b=x+1;b<=j.end;b++){const C=s[b%h];_=Vp(n.setContext(hr(i,{type:"segment",p0:v,p1:C,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:c}))),wN(_,p)&&w(x,b-1,j.loop,p),v=C,p=_}x<b-1&&w(x,b-1,j.loop,p)}return m}function Vp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function wN(t,e){if(!e)return!1;const s=[],n=function(i,l){return $u(l)?(s.includes(l)||s.push(l),s.indexOf(l)):l};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function zo(t,e,s){return t.options.clip?t[s]:e[s]}function jN(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:zo(s,e,"left"),right:zo(s,e,"right"),top:zo(n,e,"top"),bottom:zo(n,e,"bottom")}:e}function h0(t,e){const s=e._clip;if(s.disabled)return!1;const n=jN(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _N{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const l=s.listeners[i],c=s.duration;l.forEach(u=>u({chart:e,initial:s.initial,numSteps:c,currentStep:Math.min(n-s.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=Gx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const l=n.items;let c=l.length-1,u=!1,h;for(;c>=0;--c)h=l[c],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(e),u=!0):(l[c]=l[l.length-1],l.pop());u&&(i.draw(),this._notify(i,n,e,"progress")),l.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=l.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ks=new _N;const Wp="transparent",NN={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Mp(t||Wp),i=n.valid&&Mp(e||Wp);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class kN{constructor(e,s,n,i){const l=s[n];i=Lo([e.to,i,l,e.from]);const c=Lo([e.from,l,i]);this._active=!0,this._fn=e.fn||NN[e.type||typeof c],this._easing=sa[e.easing]||sa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=c,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],l=n-this._start,c=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Lo([e.to,s,i,e.from]),this._from=Lo([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,l=this._from,c=this._loop,u=this._to;let h;if(this._active=l!==u&&(c||s<n),!this._active){this._target[i]=u,this._notify(!0);return}if(s<0){this._target[i]=l;return}h=s/n%2,h=c&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(l,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class f0{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Me(e))return;const s=Object.keys(it.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const l=e[i];if(!Me(l))return;const c={};for(const u of s)c[u]=l[u];(ct(l.properties)&&l.properties||[i]).forEach(u=>{(u===i||!n.has(u))&&n.set(u,c)})})}_animateOptions(e,s){const n=s.options,i=CN(e,n);if(!i)return[];const l=this._createAnimations(i,n);return n.$shared&&SN(e.options.$animations,n).then(()=>{e.options=n},()=>{}),l}_createAnimations(e,s){const n=this._properties,i=[],l=e.$animations||(e.$animations={}),c=Object.keys(s),u=Date.now();let h;for(h=c.length-1;h>=0;--h){const m=c[h];if(m.charAt(0)==="$")continue;if(m==="options"){i.push(...this._animateOptions(e,s));continue}const p=s[m];let x=l[m];const b=n.get(m);if(x)if(b&&x.active()){x.update(b,p,u);continue}else x.cancel();if(!b||!b.duration){e[m]=p;continue}l[m]=x=new kN(b,e,m,p),i.push(x)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Ks.add(this._chart,n),!0}}function SN(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const l=t[n[i]];l&&l.active()&&s.push(l.wait())}return Promise.all(s)}function CN(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function qp(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,l=s.max===void 0?e:0;return{start:n?l:i,end:n?i:l}}function EN(t,e,s){if(s===!1)return!1;const n=qp(t,s),i=qp(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function PN(t){let e,s,n,i;return Me(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function m0(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,l;for(i=0,l=n.length;i<l;++i)s.push(n[i].index);return s}function Yp(t,e,s,n={}){const i=t.keys,l=n.mode==="single";let c,u,h,m;if(e===null)return;let p=!1;for(c=0,u=i.length;c<u;++c){if(h=+i[c],h===s){if(p=!0,n.all)continue;break}m=t.values[h],Tt(m)&&(l||e===0||Ls(e)===Ls(m))&&(e+=m)}return!p&&!n.all?0:e}function AN(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",l=n.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let h,m,p;for(h=0,m=c.length;h<m;++h)p=c[h],u[h]={[i]:p,[l]:t[p]};return u}function Ld(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function TN(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function RN(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function DN(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Kp(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const l=t[i.index];if(s&&l>0||!s&&l<0)return i.index}return null}function Xp(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:l,vScale:c,index:u}=n,h=l.axis,m=c.axis,p=TN(l,c,n),x=e.length;let b;for(let w=0;w<x;++w){const j=e[w],{[h]:v,[m]:_}=j,C=j._stacks||(j._stacks={});b=C[m]=DN(i,p,v),b[u]=_,b._top=Kp(b,c,!0,n.type),b._bottom=Kp(b,c,!1,n.type);const S=b._visualValues||(b._visualValues={});S[u]=_}}function Fd(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function MN(t,e){return hr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ON(t,e,s){return hr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Vi(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const l=i._stacks;if(!l||l[n]===void 0||l[n][s]===void 0)return;delete l[n][s],l[n]._visualValues!==void 0&&l[n]._visualValues[s]!==void 0&&delete l[n]._visualValues[s]}}}const Id=t=>t==="reset"||t==="none",Qp=(t,e)=>e?t:Object.assign({},t),LN=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:m0(s,!0),values:null};class Cl{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ld(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(x,b,w,j)=>x==="x"?b:x==="r"?j:w,l=s.xAxisID=Re(n.xAxisID,Fd(e,"x")),c=s.yAxisID=Re(n.yAxisID,Fd(e,"y")),u=s.rAxisID=Re(n.rAxisID,Fd(e,"r")),h=s.indexAxis,m=s.iAxisID=i(h,l,c,u),p=s.vAxisID=i(h,c,l,u);s.xScale=this.getScaleForId(l),s.yScale=this.getScaleForId(c),s.rScale=this.getScaleForId(u),s.iScale=this.getScaleForId(m),s.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Tp(this._data,this),e._stacked&&Vi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(Me(s)){const i=this._cachedMeta;this._data=AN(s,i)}else if(n!==s){if(n){Tp(n,this);const i=this._cachedMeta;Vi(i),i._parsed=[]}s&&Object.isExtensible(s)&&y_(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const l=s._stacked;s._stacked=Ld(s.vScale,s),s.stack!==n.stack&&(i=!0,Vi(s),s.stack=n.stack),this._resyncElements(e),(i||l!==s._stacked)&&(Xp(this,s._parsed),s._stacked=Ld(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:l,_stacked:c}=n,u=l.axis;let h=e===0&&s===i.length?!0:n._sorted,m=e>0&&n._parsed[e-1],p,x,b;if(this._parsing===!1)n._parsed=i,n._sorted=!0,b=i;else{ct(i[e])?b=this.parseArrayData(n,i,e,s):Me(i[e])?b=this.parseObjectData(n,i,e,s):b=this.parsePrimitiveData(n,i,e,s);const w=()=>x[u]===null||m&&x[u]<m[u];for(p=0;p<s;++p)n._parsed[p+e]=x=b[p],h&&(w()&&(h=!1),m=x);n._sorted=h}c&&Xp(this,b)}parsePrimitiveData(e,s,n,i){const{iScale:l,vScale:c}=e,u=l.axis,h=c.axis,m=l.getLabels(),p=l===c,x=new Array(i);let b,w,j;for(b=0,w=i;b<w;++b)j=b+n,x[b]={[u]:p||l.parse(m[j],j),[h]:c.parse(s[j],j)};return x}parseArrayData(e,s,n,i){const{xScale:l,yScale:c}=e,u=new Array(i);let h,m,p,x;for(h=0,m=i;h<m;++h)p=h+n,x=s[p],u[h]={x:l.parse(x[0],p),y:c.parse(x[1],p)};return u}parseObjectData(e,s,n,i){const{xScale:l,yScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=new Array(i);let p,x,b,w;for(p=0,x=i;p<x;++p)b=p+n,w=s[b],m[p]={x:l.parse(lr(w,u),b),y:c.parse(lr(w,h),b)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,l=this._cachedMeta,c=s[e.axis],u={keys:m0(i,!0),values:s._stacks[e.axis]._visualValues};return Yp(u,c,l.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const l=n[s.axis];let c=l===null?NaN:l;const u=i&&n._stacks[s.axis];i&&u&&(i.values=u,c=Yp(i,l,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,l=n._sorted&&e===n.iScale,c=i.length,u=this._getOtherScale(e),h=LN(s,n,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:x}=RN(u);let b,w;function j(){w=i[b];const v=w[u.axis];return!Tt(w[e.axis])||p>v||x<v}for(b=0;b<c&&!(!j()&&(this.updateRangeFromParsed(m,e,w,h),l));++b);if(l){for(b=c-1;b>=0;--b)if(!j()){this.updateRangeFromParsed(m,e,w,h);break}}return m}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,l,c;for(i=0,l=s.length;i<l;++i)c=s[i][e.axis],Tt(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,l=this.getParsed(e);return{label:n?""+n.getLabelForValue(l[n.axis]):"",value:i?""+i.getLabelForValue(l[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=PN(Re(this.options.clip,EN(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],l=s.chartArea,c=[],u=this._drawStart||0,h=this._drawCount||i.length-u,m=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(e,l,u,h),p=u;p<u+h;++p){const x=i[p];x.hidden||(x.active&&m?c.push(x):x.draw(e,l))}for(p=0;p<c.length;++p)c[p].draw(e,l)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];l=c.$context||(c.$context=ON(this.getContext(),e,c)),l.parsed=this.getParsed(e),l.raw=i.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=MN(this.chart.getContext(),this.index)),l.dataset=i,l.index=l.datasetIndex=this.index;return l.active=!!s,l.mode=n,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",l=this._cachedDataOpts,c=e+"-"+s,u=l[c],h=this.enableOptionSharing&&ca(n);if(u)return Qp(u,h);const m=this.chart.config,p=m.datasetElementScopeKeys(this._type,e),x=i?[`${e}Hover`,"hover",e,""]:[e,""],b=m.getOptionScopes(this.getDataset(),p),w=Object.keys(it.elements[e]),j=()=>this.getContext(n,i,s),v=m.resolveNamedOptions(b,w,j,x);return v.$shared&&(v.$shared=h,l[c]=Object.freeze(Qp(v,h))),v}_resolveAnimations(e,s,n){const i=this.chart,l=this._cachedDataOpts,c=`animation-${s}`,u=l[c];if(u)return u;let h;if(i.options.animation!==!1){const p=this.chart.config,x=p.datasetAnimationScopeKeys(this._type,s),b=p.getOptionScopes(this.getDataset(),x);h=p.createResolver(b,this.getContext(e,n,s))}const m=new f0(i,h&&h.animations);return h&&h._cacheable&&(l[c]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Id(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,l=this.getSharedOptions(n),c=this.includeOptions(s,l)||l!==i;return this.updateSharedOptions(l,s,n),{sharedOptions:l,includeOptions:c}}updateElement(e,s,n,i){Id(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!Id(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const l=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(l)||l})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[u,h,m]of this._syncList)this[u](h,m);this._syncList=[];const i=n.length,l=s.length,c=Math.min(l,i);c&&this.parse(0,c),l>i?this._insertElements(i,l-i,e):l<i&&this._removeElements(l,i-l)}_insertElements(e,s,n=!0){const i=this._cachedMeta,l=i.data,c=e+s;let u;const h=m=>{for(m.length+=s,u=m.length-1;u>=c;u--)m[u]=m[u-s]};for(h(l),u=e;u<c;++u)l[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,s),n&&this.updateElements(l,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&Vi(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function FN(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,l=s.length;i<l;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=Qx(n.sort((i,l)=>i-l))}return t._cache.$bar}function IN(t){const e=t.iScale,s=FN(e,t.type);let n=e._length,i,l,c,u;const h=()=>{c===32767||c===-32768||(ca(u)&&(n=Math.min(n,Math.abs(c-u)||n)),u=c)};for(i=0,l=s.length;i<l;++i)c=e.getPixelForValue(s[i]),h();for(u=void 0,i=0,l=e.ticks.length;i<l;++i)c=e.getPixelForTick(i),h();return n}function zN(t,e,s,n){const i=s.barThickness;let l,c;return $e(i)?(l=e.min*s.categoryPercentage,c=s.barPercentage):(l=i*n,c=1),{chunk:l/n,ratio:c,start:e.pixels[t]-l/2}}function BN(t,e,s,n){const i=e.pixels,l=i[t];let c=t>0?i[t-1]:null,u=t<i.length-1?i[t+1]:null;const h=s.categoryPercentage;c===null&&(c=l-(u===null?e.end-e.start:u-l)),u===null&&(u=l+l-c);const m=l-(l-Math.min(c,u))/2*h;return{chunk:Math.abs(u-c)/2*h/n,ratio:s.barPercentage,start:m}}function $N(t,e,s,n){const i=s.parse(t[0],n),l=s.parse(t[1],n),c=Math.min(i,l),u=Math.max(i,l);let h=c,m=u;Math.abs(c)>Math.abs(u)&&(h=u,m=c),e[s.axis]=m,e._custom={barStart:h,barEnd:m,start:i,end:l,min:c,max:u}}function p0(t,e,s,n){return ct(t)?$N(t,e,s,n):e[s.axis]=s.parse(t,n),e}function Gp(t,e,s,n){const i=t.iScale,l=t.vScale,c=i.getLabels(),u=i===l,h=[];let m,p,x,b;for(m=s,p=s+n;m<p;++m)b=e[m],x={},x[i.axis]=u||i.parse(c[m],m),h.push(p0(b,x,l,m));return h}function zd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function UN(t,e,s){return t!==0?Ls(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function HN(t){let e,s,n,i,l;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",l="start"):(i="start",l="end"),{start:s,end:n,reverse:e,top:i,bottom:l}}function VN(t,e,s,n){let i=e.borderSkipped;const l={};if(!i){t.borderSkipped=l;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:h,top:m,bottom:p}=HN(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=m:(s._bottom||0)===n?i=p:(l[Jp(p,c,u,h)]=!0,i=m)),l[Jp(i,c,u,h)]=!0,t.borderSkipped=l}function Jp(t,e,s,n){return n?(t=WN(t,e,s),t=Zp(t,s,e)):t=Zp(t,e,s),t}function WN(t,e,s){return t===e?s:t===s?e:t}function Zp(t,e,s){return t==="start"?e:t==="end"?s:t}function qN(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class YN extends Cl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,i){return Gp(e,s,n,i)}parseArrayData(e,s,n,i){return Gp(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:l,vScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=l.axis==="x"?u:h,p=c.axis==="x"?u:h,x=[];let b,w,j,v;for(b=n,w=n+i;b<w;++b)v=s[b],j={},j[l.axis]=l.parse(lr(v,m),b),x.push(p0(lr(v,p),j,c,b));return x}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const l=n._custom;l&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,l=this.getParsed(e),c=l._custom,u=zd(c)?"["+c.start+", "+c.end+"]":""+i.getLabelForValue(l[i.axis]);return{label:""+n.getLabelForValue(l[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const l=i==="reset",{index:c,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),m=u.isHorizontal(),p=this._getRuler(),{sharedOptions:x,includeOptions:b}=this._getSharedOptions(s,i);for(let w=s;w<s+n;w++){const j=this.getParsed(w),v=l||$e(j[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(w),_=this._calculateBarIndexPixels(w,p),C=(j._stacks||{})[u.axis],S={horizontal:m,base:v.base,enableBorderRadius:!C||zd(j._custom)||c===C._top||c===C._bottom,x:m?v.head:_.center,y:m?_.center:v.head,height:m?_.size:Math.abs(v.size),width:m?Math.abs(v.size):_.size};b&&(S.options=x||this.resolveDataElementOptions(w,e[w].active?"active":i));const E=S.options||e[w].options;VN(S,E,C,c),qN(S,E,p.ratio),this.updateElement(e[w],w,S,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),l=n.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(s),h=u&&u[n.axis],m=p=>{const x=p._parsed.find(w=>w[n.axis]===h),b=x&&x[p.vScale.axis];if($e(b)||isNaN(b))return!0};for(const p of i)if(!(s!==void 0&&m(p))&&((l===!1||c.indexOf(p.stack)===-1||l===void 0&&p.stack===void 0)&&c.push(p.stack),p.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Re(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const i=this._getStacks(e,n),l=s!==void 0?i.indexOf(s):-1;return l===-1?i.length-1:l}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let l,c;for(l=0,c=s.data.length;l<c;++l)i.push(n.getPixelForValue(this.getParsed(l)[n.axis],l));const u=e.barThickness;return{min:u||IN(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:l,minBarLength:c}}=this,u=l||0,h=this.getParsed(e),m=h._custom,p=zd(m);let x=h[s.axis],b=0,w=n?this.applyStack(s,h,n):x,j,v;w!==x&&(b=w-x,w=x),p&&(x=m.barStart,w=m.barEnd-m.barStart,x!==0&&Ls(x)!==Ls(m.barEnd)&&(b=0),b+=x);const _=!$e(l)&&!p?l:b;let C=s.getPixelForValue(_);if(this.chart.getDataVisibility(e)?j=s.getPixelForValue(b+w):j=C,v=j-C,Math.abs(v)<c){v=UN(v,s,u)*c,x===u&&(C-=v/2);const S=s.getPixelForDecimal(0),E=s.getPixelForDecimal(1),R=Math.min(S,E),A=Math.max(S,E);C=Math.max(Math.min(C,A),R),j=C+v,n&&!p&&(h._stacks[s.axis]._visualValues[i]=s.getValueForPixel(j)-s.getValueForPixel(C))}if(C===s.getPixelForValue(u)){const S=Ls(v)*s.getLineWidthForValue(u)/2;C+=S,v-=S}return{size:v,base:C,head:j,center:j+v/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,l=i.skipNull,c=Re(i.maxBarThickness,1/0);let u,h;const m=this._getAxisCount();if(s.grouped){const p=l?this._getStackCount(e):s.stackCount,x=i.barThickness==="flex"?BN(e,s,i,p*m):zN(e,s,i,p*m),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(Re(b,this.getFirstScaleIdForIndexAxis())),j=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+w;u=x.start+x.chunk*j+x.chunk/2,h=Math.min(c,x.chunk*x.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),h=Math.min(c,s.min*s.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let l=0;for(;l<i;++l)this.getParsed(l)[s.axis]!==null&&!n[l].hidden&&n[l].draw(this._ctx)}}function KN(t,e,s){let n=1,i=1,l=0,c=0;if(e<et){const u=t,h=u+e,m=Math.cos(u),p=Math.sin(u),x=Math.cos(h),b=Math.sin(h),w=(E,R,A)=>ua(E,u,h,!0)?1:Math.max(R,R*s,A,A*s),j=(E,R,A)=>ua(E,u,h,!0)?-1:Math.min(R,R*s,A,A*s),v=w(0,m,x),_=w(ft,p,b),C=j(We,m,x),S=j(We+ft,p,b);n=(v-C)/2,i=(_-S)/2,l=-(v+C)/2,c=-(_+S)/2}return{ratioX:n,ratioY:i,offsetX:l,offsetY:c}}class XN extends Cl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let l=h=>+n[h];if(Me(n[e])){const{key:h="value"}=this._parsing;l=m=>+lr(n[m],h)}let c,u;for(c=e,u=e+s;c<u;++c)i._parsed[c]=l(c)}}_getRotation(){return Gs(this.options.rotation-90)}_getCircumference(){return Gs(this.options.circumference)}_getRotationExtents(){let e=et,s=-et;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,l=i._getRotation(),c=i._getCircumference();e=Math.min(e,l),s=Math.max(s,l+c)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,l=i.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-c)/2,0),h=Math.min(t_(this.options.cutout,u),1),m=this._getRingWeight(this.index),{circumference:p,rotation:x}=this._getRotationExtents(),{ratioX:b,ratioY:w,offsetX:j,offsetY:v}=KN(x,p,h),_=(n.width-c)/b,C=(n.height-c)/w,S=Math.max(Math.min(_,C)/2,0),E=Wx(this.options.radius,S),R=Math.max(E*h,0),A=(E-R)/this._getVisibleDatasetWeightTotal();this.offsetX=j*E,this.offsetY=v*E,i.total=this.calculateTotal(),this.outerRadius=E-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*m,0),this.updateElements(l,0,l.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,l=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*l/et)}updateElements(e,s,n,i){const l=i==="reset",c=this.chart,u=c.chartArea,m=c.options.animation,p=(u.left+u.right)/2,x=(u.top+u.bottom)/2,b=l&&m.animateScale,w=b?0:this.innerRadius,j=b?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(s,i);let C=this._getRotation(),S;for(S=0;S<s;++S)C+=this._circumference(S,l);for(S=s;S<s+n;++S){const E=this._circumference(S,l),R=e[S],A={x:p+this.offsetX,y:x+this.offsetY,startAngle:C,endAngle:C+E,circumference:E,outerRadius:j,innerRadius:w};_&&(A.options=v||this.resolveDataElementOptions(S,R.active?"active":i)),C+=E,this.updateElement(R,S,A,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const l=e._parsed[i];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(l))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?et*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],l=Uu(s._parsed[e],n.options.locale);return{label:i[e]||"",value:l}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,l,c,u,h;if(!e){for(i=0,l=n.data.datasets.length;i<l;++i)if(n.isDatasetVisible(i)){c=n.getDatasetMeta(i),e=c.data,u=c.controller;break}}if(!e)return 0;for(i=0,l=e.length;i<l;++i)h=u.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(s=Math.max(s,h.borderWidth||0,h.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const l=this.resolveDataElementOptions(n);s=Math.max(s,l.offset||0,l.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(Re(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class QN extends Cl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:l}=s,c=this.chart._animationsDisabled;let{start:u,count:h}=w_(s,i,c);this._drawStart=u,this._drawCount=h,j_(s)&&(u=0,h=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!l._decimated,n.points=i;const m=this.resolveDatasetElementOptions(e);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:m},e),this.updateElements(i,u,h,e)}updateElements(e,s,n,i){const l=i==="reset",{iScale:c,vScale:u,_stacked:h,_dataset:m}=this._cachedMeta,{sharedOptions:p,includeOptions:x}=this._getSharedOptions(s,i),b=c.axis,w=u.axis,{spanGaps:j,segment:v}=this.options,_=da(j)?j:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||l||i==="none",S=s+n,E=e.length;let R=s>0&&this.getParsed(s-1);for(let A=0;A<E;++A){const F=e[A],H=C?F:{};if(A<s||A>=S){H.skip=!0;continue}const z=this.getParsed(A),K=$e(z[w]),W=H[b]=c.getPixelForValue(z[b],A),M=H[w]=l||K?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,z,h):z[w],A);H.skip=isNaN(W)||isNaN(M)||K,H.stop=A>0&&Math.abs(z[b]-R[b])>_,v&&(H.parsed=z,H.raw=m.data[A]),x&&(H.options=p||this.resolveDataElementOptions(A,F.active?"active":i)),C||this.updateElement(F,A,H,i),R=z}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const l=i[0].size(this.resolveDataElementOptions(0)),c=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,l,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xu{static override(e){Object.assign(Xu.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Gn()}parse(){return Gn()}format(){return Gn()}add(){return Gn()}diff(){return Gn()}startOf(){return Gn()}endOf(){return Gn()}}var GN={_date:Xu};function JN(t,e,s,n){const{controller:i,data:l,_sorted:c}=t,u=i._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&c&&l.length){const m=u._reversePixels?g_:sr;if(n){if(i._sharedOptions){const p=l[0],x=typeof p.getRange=="function"&&p.getRange(e);if(x){const b=m(l,e,s-x),w=m(l,e,s+x);return{lo:b.lo,hi:w.hi}}}}else{const p=m(l,e,s);if(h){const{vScale:x}=i._cachedMeta,{_parsed:b}=t,w=b.slice(0,p.lo+1).reverse().findIndex(v=>!$e(v[x.axis]));p.lo-=Math.max(0,w);const j=b.slice(p.hi).findIndex(v=>!$e(v[x.axis]));p.hi+=Math.max(0,j)}return p}}return{lo:0,hi:l.length-1}}function El(t,e,s,n,i){const l=t.getSortedVisibleDatasetMetas(),c=s[e];for(let u=0,h=l.length;u<h;++u){const{index:m,data:p}=l[u],{lo:x,hi:b}=JN(l[u],e,c,i);for(let w=x;w<=b;++w){const j=p[w];j.skip||n(j,m,w)}}}function ZN(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const l=e?Math.abs(n.x-i.x):0,c=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function Bd(t,e,s,n,i){const l=[];return!i&&!t.isPointInArea(e)||El(t,s,e,function(u,h,m){!i&&!ha(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&l.push({element:u,datasetIndex:h,index:m})},!0),l}function e2(t,e,s,n){let i=[];function l(c,u,h){const{startAngle:m,endAngle:p}=c.getProps(["startAngle","endAngle"],n),{angle:x}=Kx(c,{x:e.x,y:e.y});ua(x,m,p)&&i.push({element:c,datasetIndex:u,index:h})}return El(t,s,e,l),i}function t2(t,e,s,n,i,l){let c=[];const u=ZN(s);let h=Number.POSITIVE_INFINITY;function m(p,x,b){const w=p.inRange(e.x,e.y,i);if(n&&!w)return;const j=p.getCenterPoint(i);if(!(!!l||t.isPointInArea(j))&&!w)return;const _=u(e,j);_<h?(c=[{element:p,datasetIndex:x,index:b}],h=_):_===h&&c.push({element:p,datasetIndex:x,index:b})}return El(t,s,e,m),c}function $d(t,e,s,n,i,l){return!l&&!t.isPointInArea(e)?[]:s==="r"&&!n?e2(t,e,s,i):t2(t,e,s,n,i,l)}function eg(t,e,s,n,i){const l=[],c=s==="x"?"inXRange":"inYRange";let u=!1;return El(t,s,e,(h,m,p)=>{h[c]&&h[c](e[s],i)&&(l.push({element:h,datasetIndex:m,index:p}),u=u||h.inRange(e.x,e.y,i))}),n&&!u?[]:l}var s2={modes:{index(t,e,s,n){const i=Zn(e,t),l=s.axis||"x",c=s.includeInvisible||!1,u=s.intersect?Bd(t,i,l,n,c):$d(t,i,l,!1,n,c),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const p=u[0].index,x=m.data[p];x&&!x.skip&&h.push({element:x,datasetIndex:m.index,index:p})}),h):[]},dataset(t,e,s,n){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;let u=s.intersect?Bd(t,i,l,n,c):$d(t,i,l,!1,n,c);if(u.length>0){const h=u[0].datasetIndex,m=t.getDatasetMeta(h).data;u=[];for(let p=0;p<m.length;++p)u.push({element:m[p],datasetIndex:h,index:p})}return u},point(t,e,s,n){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Bd(t,i,l,n,c)},nearest(t,e,s,n){const i=Zn(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return $d(t,i,l,s.intersect,n,c)},x(t,e,s,n){const i=Zn(e,t);return eg(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=Zn(e,t);return eg(t,i,"y",s.intersect,n)}}};const g0=["left","top","right","bottom"];function Wi(t,e){return t.filter(s=>s.pos===e)}function tg(t,e){return t.filter(s=>g0.indexOf(s.pos)===-1&&s.box.axis===e)}function qi(t,e){return t.sort((s,n)=>{const i=e?n:s,l=e?s:n;return i.weight===l.weight?i.index-l.index:i.weight-l.weight})}function n2(t){const e=[];let s,n,i,l,c,u;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:l,options:{stack:c,stackWeight:u=1}}=i,e.push({index:s,box:i,pos:l,horizontal:i.isHorizontal(),weight:i.weight,stack:c&&l+c,stackWeight:u});return e}function r2(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:l}=s;if(!n||!g0.includes(i))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return e}function i2(t,e){const s=r2(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let l,c,u;for(l=0,c=t.length;l<c;++l){u=t[l];const{fullSize:h}=u.box,m=s[u.stack],p=m&&u.stackWeight/m.weight;u.horizontal?(u.width=p?p*n:h&&e.availableWidth,u.height=i):(u.width=n,u.height=p?p*i:h&&e.availableHeight)}return s}function a2(t){const e=n2(t),s=qi(e.filter(m=>m.box.fullSize),!0),n=qi(Wi(e,"left"),!0),i=qi(Wi(e,"right")),l=qi(Wi(e,"top"),!0),c=qi(Wi(e,"bottom")),u=tg(e,"x"),h=tg(e,"y");return{fullSize:s,leftAndTop:n.concat(l),rightAndBottom:i.concat(h).concat(c).concat(u),chartArea:Wi(e,"chartArea"),vertical:n.concat(i).concat(h),horizontal:l.concat(c).concat(u)}}function sg(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function x0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function o2(t,e,s,n){const{pos:i,box:l}=s,c=t.maxPadding;if(!Me(i)){s.size&&(t[i]-=s.size);const x=n[s.stack]||{size:0,count:1};x.size=Math.max(x.size,s.horizontal?l.height:l.width),s.size=x.size/x.count,t[i]+=s.size}l.getPadding&&x0(c,l.getPadding());const u=Math.max(0,e.outerWidth-sg(c,t,"left","right")),h=Math.max(0,e.outerHeight-sg(c,t,"top","bottom")),m=u!==t.w,p=h!==t.h;return t.w=u,t.h=h,s.horizontal?{same:m,other:p}:{same:p,other:m}}function l2(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function c2(t,e){const s=e.maxPadding;function n(i){const l={left:0,top:0,right:0,bottom:0};return i.forEach(c=>{l[c]=Math.max(e[c],s[c])}),l}return n(t?["left","right"]:["top","bottom"])}function Gi(t,e,s,n){const i=[];let l,c,u,h,m,p;for(l=0,c=t.length,m=0;l<c;++l){u=t[l],h=u.box,h.update(u.width||e.w,u.height||e.h,c2(u.horizontal,e));const{same:x,other:b}=o2(e,s,u,n);m|=x&&i.length,p=p||b,h.fullSize||i.push(u)}return m&&Gi(i,e,s,n)||p}function Bo(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function ng(t,e,s,n){const i=s.padding;let{x:l,y:c}=e;for(const u of t){const h=u.box,m=n[u.stack]||{placed:0,weight:1},p=u.stackWeight/m.weight||1;if(u.horizontal){const x=e.w*p,b=m.size||h.height;ca(m.start)&&(c=m.start),h.fullSize?Bo(h,i.left,c,s.outerWidth-i.right-i.left,b):Bo(h,e.left+m.placed,c,x,b),m.start=c,m.placed+=x,c=h.bottom}else{const x=e.h*p,b=m.size||h.width;ca(m.start)&&(l=m.start),h.fullSize?Bo(h,l,i.top,b,s.outerHeight-i.bottom-i.top):Bo(h,l,e.top+m.placed,b,x),m.start=l,m.placed+=x,l=h.right}}e.x=l,e.y=c}var us={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=hs(t.options.layout.padding),l=Math.max(e-i.width,0),c=Math.max(s-i.height,0),u=a2(t.boxes),h=u.vertical,m=u.horizontal;Ve(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const p=h.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,x=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},i);x0(b,hs(n));const w=Object.assign({maxPadding:b,w:l,h:c,x:i.left,y:i.top},i),j=i2(h.concat(m),x);Gi(u.fullSize,w,x,j),Gi(h,w,x,j),Gi(m,w,x,j)&&Gi(h,w,x,j),l2(w),ng(u.leftAndTop,w,x,j),w.x+=w.w,w.y+=w.h,ng(u.rightAndBottom,w,x,j),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},Ve(u.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class y0{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class d2 extends y0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Zo="$chartjs",u2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rg=t=>t===null||t==="";function h2(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[Zo]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",rg(i)){const l=$p(t,"width");l!==void 0&&(t.width=l)}if(rg(n))if(t.style.height==="")t.height=t.width/(e||2);else{const l=$p(t,"height");l!==void 0&&(t.height=l)}return t}const b0=uN?{passive:!0}:!1;function f2(t,e,s){t&&t.addEventListener(e,s,b0)}function m2(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,b0)}function p2(t,e){const s=u2[t.type]||t.type,{x:n,y:i}=Zn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function fl(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function g2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||fl(u.addedNodes,n),c=c&&!fl(u.removedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function x2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||fl(u.removedNodes,n),c=c&&!fl(u.addedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const ma=new Map;let ig=0;function v0(){const t=window.devicePixelRatio;t!==ig&&(ig=t,ma.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function y2(t,e){ma.size||window.addEventListener("resize",v0),ma.set(t,e)}function b2(t){ma.delete(t),ma.size||window.removeEventListener("resize",v0)}function v2(t,e,s){const n=t.canvas,i=n&&Ku(n);if(!i)return;const l=Jx((u,h)=>{const m=i.clientWidth;s(u,h),m<i.clientWidth&&s()},window),c=new ResizeObserver(u=>{const h=u[0],m=h.contentRect.width,p=h.contentRect.height;m===0&&p===0||l(m,p)});return c.observe(i),y2(t,l),c}function Ud(t,e,s){s&&s.disconnect(),e==="resize"&&b2(t)}function w2(t,e,s){const n=t.canvas,i=Jx(l=>{t.ctx!==null&&s(p2(l,t))},t);return f2(n,e,i),i}class j2 extends y0{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(h2(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Zo])return!1;const n=s[Zo].initial;["height","width"].forEach(l=>{const c=n[l];$e(c)?s.removeAttribute(l):s.setAttribute(l,c)});const i=n.style||{};return Object.keys(i).forEach(l=>{s.style[l]=i[l]}),s.width=s.width,delete s[Zo],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),c={attach:g2,detach:x2,resize:v2}[s]||w2;i[s]=c(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:Ud,detach:Ud,resize:Ud}[s]||m2)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return dN(e,s,n,i)}isAttached(e){const s=e&&Ku(e);return!!(s&&s.isConnected)}}function _2(t){return!Yu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?d2:j2}class sn{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return da(this.x)&&da(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(l=>{i[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),i}}function N2(t,e){const s=t.options.ticks,n=k2(t),i=Math.min(s.maxTicksLimit||n,n),l=s.major.enabled?C2(e):[],c=l.length,u=l[0],h=l[c-1],m=[];if(c>i)return E2(e,m,l,c/i),m;const p=S2(l,e,i);if(c>0){let x,b;const w=c>1?Math.round((h-u)/(c-1)):null;for($o(e,m,p,$e(w)?0:u-w,u),x=0,b=c-1;x<b;x++)$o(e,m,p,l[x],l[x+1]);return $o(e,m,p,h,$e(w)?e.length:h+w),m}return $o(e,m,p),m}function k2(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function S2(t,e,s){const n=P2(t),i=e.length/s;if(!n)return Math.max(i,1);const l=c_(n);for(let c=0,u=l.length-1;c<u;c++){const h=l[c];if(h>i)return h}return Math.max(i,1)}function C2(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function E2(t,e,s,n){let i=0,l=s[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===l&&(e.push(t[c]),i++,l=s[i*n])}function $o(t,e,s,n,i){const l=Re(n,0),c=Math.min(Re(i,t.length),t.length);let u=0,h,m,p;for(s=Math.ceil(s),i&&(h=i-n,s=h/Math.floor(h/s)),p=l;p<0;)u++,p=Math.round(l+u*s);for(m=Math.max(l,0);m<c;m++)m===p&&(e.push(t[m]),u++,p=Math.round(l+u*s))}function P2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const A2=t=>t==="left"?"right":t==="right"?"left":t,ag=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,og=(t,e)=>Math.min(e||t,t);function lg(t,e){const s=[],n=t.length/e,i=t.length;let l=0;for(;l<i;l+=n)s.push(t[Math.floor(l)]);return s}function T2(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),l=t._startPixel,c=t._endPixel,u=1e-6;let h=t.getPixelForTick(i),m;if(!(s&&(n===1?m=Math.max(h-l,c-h):e===0?m=(t.getPixelForTick(1)-h)/2:m=(h-t.getPixelForTick(i-1))/2,h+=i<e?m:-m,h<l-u||h>c+u)))return h}function R2(t,e){Ve(t,s=>{const n=s.gc,i=n.length/2;let l;if(i>e){for(l=0;l<i;++l)delete s.data[n[l]];n.splice(0,i)}})}function Yi(t){return t.drawTicks?t.tickLength:0}function cg(t,e){if(!t.display)return 0;const s=At(t.font,e),n=hs(t.padding);return(ct(t.text)?t.text.length:1)*s.lineHeight+n.height}function D2(t,e){return hr(t,{scale:e,type:"scale"})}function M2(t,e,s){return hr(t,{tick:s,index:e,type:"tick"})}function O2(t,e,s){let n=Bu(t);return(s&&e!=="right"||!s&&e==="right")&&(n=A2(n)),n}function L2(t,e,s,n){const{top:i,left:l,bottom:c,right:u,chart:h}=t,{chartArea:m,scales:p}=h;let x=0,b,w,j;const v=c-i,_=u-l;if(t.isHorizontal()){if(w=Ct(n,l,u),Me(s)){const C=Object.keys(s)[0],S=s[C];j=p[C].getPixelForValue(S)+v-e}else s==="center"?j=(m.bottom+m.top)/2+v-e:j=ag(t,s,e);b=u-l}else{if(Me(s)){const C=Object.keys(s)[0],S=s[C];w=p[C].getPixelForValue(S)-_+e}else s==="center"?w=(m.left+m.right)/2-_+e:w=ag(t,s,e);j=Ct(n,c,i),x=s==="left"?-ft:ft}return{titleX:w,titleY:j,maxWidth:b,rotation:x}}class si extends sn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=Ts(e,Number.POSITIVE_INFINITY),s=Ts(s,Number.NEGATIVE_INFINITY),n=Ts(n,Number.POSITIVE_INFINITY),i=Ts(i,Number.NEGATIVE_INFINITY),{min:Ts(e,n),max:Ts(s,i),minDefined:Tt(e),maxDefined:Tt(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:l}=this.getUserBounds(),c;if(i&&l)return{min:s,max:n};const u=this.getMatchingVisibleMetas();for(let h=0,m=u.length;h<m;++h)c=u[h].controller.getMinMax(this,e),i||(s=Math.min(s,c.min)),l||(n=Math.max(n,c.max));return s=l&&s>n?n:s,n=i&&s>n?s:n,{min:Ts(s,Ts(n,s)),max:Ts(n,Ts(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qe(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:l,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=U_(this,l,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?lg(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=N2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qe(this.options.afterUpdate,[this])}beforeSetDimensions(){Qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,l;for(n=0,i=e.length;n<i;n++)l=e[n],l.label=Qe(s.callback,[l.value,n,e],this)}afterTickToLabelConversion(){Qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=og(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,l=s.maxRotation;let c=i,u,h,m;if(!this._isVisible()||!s.display||i>=l||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const p=this._getLabelSizes(),x=p.widest.width,b=p.highest.height,w=Pt(this.chart.width-x,0,this.maxWidth);u=e.offset?this.maxWidth/n:w/(n-1),x+6>u&&(u=w/(n-(e.offset?.5:1)),h=this.maxHeight-Yi(e.grid)-s.padding-cg(e.title,this.chart.options.font),m=Math.sqrt(x*x+b*b),c=f_(Math.min(Math.asin(Pt((p.highest.height+6)/u,-1,1)),Math.asin(Pt(h/m,-1,1))-Math.asin(Pt(b/m,-1,1)))),c=Math.max(i,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:l}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const h=cg(i,s.options.font);if(u?(e.width=this.maxWidth,e.height=Yi(l)+h):(e.height=this.maxHeight,e.width=Yi(l)+h),n.display&&this.ticks.length){const{first:m,last:p,widest:x,highest:b}=this._getLabelSizes(),w=n.padding*2,j=Gs(this.labelRotation),v=Math.cos(j),_=Math.sin(j);if(u){const C=n.mirror?0:_*x.width+v*b.height;e.height=Math.min(this.maxHeight,e.height+C+w)}else{const C=n.mirror?0:v*x.width+_*b.height;e.width=Math.min(this.maxWidth,e.width+C+w)}this._calculatePadding(m,p,_,v)}}this._handleMargins(),u?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:l,padding:c},position:u}=this.options,h=this.labelRotation!==0,m=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,w=0;h?m?(b=i*e.width,w=n*s.height):(b=n*e.height,w=i*s.width):l==="start"?w=s.width:l==="end"?b=e.width:l!=="inner"&&(b=e.width/2,w=s.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((w-x+c)*this.width/(this.width-x),0)}else{let p=s.height/2,x=e.height/2;l==="start"?(p=0,x=e.height):l==="end"&&(p=s.height,x=0),this.paddingTop=p+c,this.paddingBottom=x+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)$e(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=lg(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:l}=this,c=[],u=[],h=Math.floor(s/og(s,n));let m=0,p=0,x,b,w,j,v,_,C,S,E,R,A;for(x=0;x<s;x+=h){if(j=e[x].label,v=this._resolveTickFontOptions(x),i.font=_=v.string,C=l[_]=l[_]||{data:{},gc:[]},S=v.lineHeight,E=R=0,!$e(j)&&!ct(j))E=Lp(i,C.data,C.gc,E,j),R=S;else if(ct(j))for(b=0,w=j.length;b<w;++b)A=j[b],!$e(A)&&!ct(A)&&(E=Lp(i,C.data,C.gc,E,A),R+=S);c.push(E),u.push(R),m=Math.max(E,m),p=Math.max(R,p)}R2(l,s);const F=c.indexOf(m),H=u.indexOf(p),z=K=>({width:c[K]||0,height:u[K]||0});return{first:z(0),last:z(s-1),widest:z(F),highest:z(H),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return p_(this._alignToPixels?Qn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=M2(this.getContext(),e,n))}return this.$context||(this.$context=D2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Gs(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),l=this._getLabelSizes(),c=e.autoSkipPadding||0,u=l?l.widest.width+c:0,h=l?l.highest.height+c:0;return this.isHorizontal()?h*n>u*i?u/n:h/i:h*i<u*n?h/n:u/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:l,position:c,border:u}=i,h=l.offset,m=this.isHorizontal(),x=this.ticks.length+(h?1:0),b=Yi(l),w=[],j=u.setContext(this.getContext()),v=j.display?j.width:0,_=v/2,C=function(V){return Qn(n,V,v)};let S,E,R,A,F,H,z,K,W,M,X,$;if(c==="top")S=C(this.bottom),H=this.bottom-b,K=S-_,M=C(e.top)+_,$=e.bottom;else if(c==="bottom")S=C(this.top),M=e.top,$=C(e.bottom)-_,H=S+_,K=this.top+b;else if(c==="left")S=C(this.right),F=this.right-b,z=S-_,W=C(e.left)+_,X=e.right;else if(c==="right")S=C(this.left),W=e.left,X=C(e.right)-_,F=S+_,z=this.left+b;else if(s==="x"){if(c==="center")S=C((e.top+e.bottom)/2+.5);else if(Me(c)){const V=Object.keys(c)[0],Z=c[V];S=C(this.chart.scales[V].getPixelForValue(Z))}M=e.top,$=e.bottom,H=S+_,K=H+b}else if(s==="y"){if(c==="center")S=C((e.left+e.right)/2);else if(Me(c)){const V=Object.keys(c)[0],Z=c[V];S=C(this.chart.scales[V].getPixelForValue(Z))}F=S-_,z=F-b,W=e.left,X=e.right}const re=Re(i.ticks.maxTicksLimit,x),le=Math.max(1,Math.ceil(x/re));for(E=0;E<x;E+=le){const V=this.getContext(E),Z=l.setContext(V),G=u.setContext(V),se=Z.lineWidth,te=Z.color,P=G.dash||[],L=G.dashOffset,fe=Z.tickWidth,me=Z.tickColor,I=Z.tickBorderDash||[],J=Z.tickBorderDashOffset;R=T2(this,E,h),R!==void 0&&(A=Qn(n,R,se),m?F=z=W=X=A:H=K=M=$=A,w.push({tx1:F,ty1:H,tx2:z,ty2:K,x1:W,y1:M,x2:X,y2:$,width:se,color:te,borderDash:P,borderDashOffset:L,tickWidth:fe,tickColor:me,tickBorderDash:I,tickBorderDashOffset:J}))}return this._ticksLength=x,this._borderValue=S,w}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:l}=n,c=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:m,padding:p,mirror:x}=l,b=Yi(n.grid),w=b+p,j=x?-p:w,v=-Gs(this.labelRotation),_=[];let C,S,E,R,A,F,H,z,K,W,M,X,$="middle";if(i==="top")F=this.bottom-j,H=this._getXAxisLabelAlignment();else if(i==="bottom")F=this.top+j,H=this._getXAxisLabelAlignment();else if(i==="left"){const le=this._getYAxisLabelAlignment(b);H=le.textAlign,A=le.x}else if(i==="right"){const le=this._getYAxisLabelAlignment(b);H=le.textAlign,A=le.x}else if(s==="x"){if(i==="center")F=(e.top+e.bottom)/2+w;else if(Me(i)){const le=Object.keys(i)[0],V=i[le];F=this.chart.scales[le].getPixelForValue(V)+w}H=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")A=(e.left+e.right)/2-w;else if(Me(i)){const le=Object.keys(i)[0],V=i[le];A=this.chart.scales[le].getPixelForValue(V)}H=this._getYAxisLabelAlignment(b).textAlign}s==="y"&&(h==="start"?$="top":h==="end"&&($="bottom"));const re=this._getLabelSizes();for(C=0,S=u.length;C<S;++C){E=u[C],R=E.label;const le=l.setContext(this.getContext(C));z=this.getPixelForTick(C)+l.labelOffset,K=this._resolveTickFontOptions(C),W=K.lineHeight,M=ct(R)?R.length:1;const V=M/2,Z=le.color,G=le.textStrokeColor,se=le.textStrokeWidth;let te=H;c?(A=z,H==="inner"&&(C===S-1?te=this.options.reverse?"left":"right":C===0?te=this.options.reverse?"right":"left":te="center"),i==="top"?m==="near"||v!==0?X=-M*W+W/2:m==="center"?X=-re.highest.height/2-V*W+W:X=-re.highest.height+W/2:m==="near"||v!==0?X=W/2:m==="center"?X=re.highest.height/2-V*W:X=re.highest.height-M*W,x&&(X*=-1),v!==0&&!le.showLabelBackdrop&&(A+=W/2*Math.sin(v))):(F=z,X=(1-M)*W/2);let P;if(le.showLabelBackdrop){const L=hs(le.backdropPadding),fe=re.heights[C],me=re.widths[C];let I=X-L.top,J=0-L.left;switch($){case"middle":I-=fe/2;break;case"bottom":I-=fe;break}switch(H){case"center":J-=me/2;break;case"right":J-=me;break;case"inner":C===S-1?J-=me:C>0&&(J-=me/2);break}P={left:J,top:I,width:me+L.width,height:fe+L.height,color:le.backdropColor}}_.push({label:R,font:K,textOffset:X,options:{rotation:v,color:Z,strokeColor:G,strokeWidth:se,textAlign:te,textBaseline:$,translation:[A,F],backdrop:P}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Gs(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:l}}=this.options,c=this._getLabelSizes(),u=e+l,h=c.widest.width;let m,p;return s==="left"?i?(p=this.right+l,n==="near"?m="left":n==="center"?(m="center",p+=h/2):(m="right",p+=h)):(p=this.right-u,n==="near"?m="right":n==="center"?(m="center",p-=h/2):(m="left",p=this.left)):s==="right"?i?(p=this.left+l,n==="near"?m="right":n==="center"?(m="center",p-=h/2):(m="left",p-=h)):(p=this.left+u,n==="near"?m="left":n==="center"?(m="center",p+=h/2):(m="right",p=this.right)):m="right",{textAlign:m,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:l,height:c}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,l,c),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(l=>l.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,c;const u=(h,m,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(s.display)for(l=0,c=i.length;l<c;++l){const h=i[l];s.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),s.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,l=n.setContext(this.getContext()),c=n.display?l.width:0;if(!c)return;const u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let m,p,x,b;this.isHorizontal()?(m=Qn(e,this.left,c)-c/2,p=Qn(e,this.right,u)+u/2,x=b=h):(x=Qn(e,this.top,c)-c/2,b=Qn(e,this.bottom,u)+u/2,m=p=h),s.save(),s.lineWidth=l.width,s.strokeStyle=l.color,s.beginPath(),s.moveTo(m,x),s.lineTo(p,b),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Nl(n,i);const l=this.getLabelItems(e);for(const c of l){const u=c.options,h=c.font,m=c.label,p=c.textOffset;fa(n,m,0,p,h,u)}i&&kl(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const l=At(n.font),c=hs(n.padding),u=n.align;let h=l.lineHeight/2;s==="bottom"||s==="center"||Me(s)?(h+=c.bottom,ct(n.text)&&(h+=l.lineHeight*(n.text.length-1))):h+=c.top;const{titleX:m,titleY:p,maxWidth:x,rotation:b}=L2(this,h,s,u);fa(e,n.text,0,0,l,{color:n.color,maxWidth:x,rotation:b,textAlign:O2(u,s,i),textBaseline:"middle",translation:[m,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Re(e.grid&&e.grid.z,-1),i=Re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==si.prototype.draw?[{z:s,draw:l=>{this.draw(l)}}]:[{z:n,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let l,c;for(l=0,c=s.length;l<c;++l){const u=s[l];u[n]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return At(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;z2(s)&&(n=this.register(s));const i=this.items,l=e.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in i||(i[l]=e,F2(e,c,n),this.override&&it.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in it[i]&&(delete it[i][n],this.override&&delete cr[n])}}function F2(t,e,s){const n=la(Object.create(null),[s?it.get(s):{},it.get(e),t.defaults]);it.set(e,n),t.defaultRoutes&&I2(e,t.defaultRoutes),t.descriptors&&it.describe(e,t.descriptors)}function I2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),l=[t].concat(n).join("."),c=e[s].split("."),u=c.pop(),h=c.join(".");it.route(l,i,h,u)})}function z2(t){return"id"in t&&"defaults"in t}class B2{constructor(){this.controllers=new Uo(Cl,"datasets",!0),this.elements=new Uo(sn,"elements"),this.plugins=new Uo(Object,"plugins"),this.scales=new Uo(si,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const l=n||this._getRegistryForType(i);n||l.isForType(i)||l===this.plugins&&i.id?this._exec(e,l,i):Ve(i,c=>{const u=n||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,s,n){const i=Iu(e);Qe(n["before"+i],[],n),s[e](n),Qe(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Ds=new B2;class $2{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=i?this._descriptors(e).filter(i):this._descriptors(e),c=this._notify(l,e,s,n);return s==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,s,n,i){i=i||{};for(const l of e){const c=l.plugin,u=c[n],h=[s,i,l.options];if(Qe(u,h,c)===!1&&i.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=Re(n.options&&n.options.plugins,{}),l=U2(n);return i===!1&&!s?[]:V2(e,l,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(l,c)=>l.filter(u=>!c.some(h=>u.plugin.id===h.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function U2(t){const e={},s=[],n=Object.keys(Ds.plugins.items);for(let l=0;l<n.length;l++)s.push(Ds.getPlugin(n[l]));const i=t.plugins||[];for(let l=0;l<i.length;l++){const c=i[l];s.indexOf(c)===-1&&(s.push(c),e[c.id]=!0)}return{plugins:s,localIds:e}}function H2(t,e){return!e&&t===!1?null:t===!0?{}:t}function V2(t,{plugins:e,localIds:s},n,i){const l=[],c=t.getContext();for(const u of e){const h=u.id,m=H2(n[h],i);m!==null&&l.push({plugin:u,options:W2(t.config,{plugin:u,local:s[h]},m,c)})}return l}function W2(t,{plugin:e,local:s},n,i){const l=t.pluginScopeKeys(e),c=t.getOptionScopes(n,l);return s&&e.defaults&&c.push(e.defaults),t.createResolver(c,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gu(t,e){const s=it.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function q2(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Y2(t,e){return t===e?"_index_":"_value_"}function dg(t){if(t==="x"||t==="y"||t==="r")return t}function K2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function xu(t,...e){if(dg(t))return t;for(const s of e){const n=s.axis||K2(s.position)||t.length>1&&dg(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ug(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function X2(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return ug(t,"x",s[0])||ug(t,"y",s[0])}return{}}function Q2(t,e){const s=cr[t.type]||{scales:{}},n=e.scales||{},i=gu(t.type,e),l=Object.create(null);return Object.keys(n).forEach(c=>{const u=n[c];if(!Me(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const h=xu(c,u,X2(c,t),it.scales[u.type]),m=Y2(h,i),p=s.scales||{};l[c]=ea(Object.create(null),[{axis:h},u,p[h],p[m]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,h=c.indexAxis||gu(u,e),p=(cr[u]||{}).scales||{};Object.keys(p).forEach(x=>{const b=q2(x,h),w=c[b+"AxisID"]||b;l[w]=l[w]||Object.create(null),ea(l[w],[{axis:b},n[w],p[x]])})}),Object.keys(l).forEach(c=>{const u=l[c];ea(u,[it.scales[u.type],it.scale])}),l}function w0(t){const e=t.options||(t.options={});e.plugins=Re(e.plugins,{}),e.scales=Q2(t,e)}function j0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function G2(t){return t=t||{},t.data=j0(t.data),w0(t),t}const hg=new Map,_0=new Set;function Ho(t,e){let s=hg.get(t);return s||(s=e(),hg.set(t,s),_0.add(s)),s}const Ki=(t,e,s)=>{const n=lr(e,s);n!==void 0&&t.add(n)};class J2{constructor(e){this._config=G2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=j0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),w0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ho(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ho(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ho(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Ho(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:l}=this,c=this._cachedScopes(e,n),u=c.get(s);if(u)return u;const h=new Set;s.forEach(p=>{e&&(h.add(e),p.forEach(x=>Ki(h,e,x))),p.forEach(x=>Ki(h,i,x)),p.forEach(x=>Ki(h,cr[l]||{},x)),p.forEach(x=>Ki(h,it,x)),p.forEach(x=>Ki(h,mu,x))});const m=Array.from(h);return m.length===0&&m.push(Object.create(null)),_0.has(s)&&c.set(s,m),m}chartOptionScopes(){const{options:e,type:s}=this;return[e,cr[s]||{},it.datasets[s]||{},{type:s},it,mu]}resolveNamedOptions(e,s,n,i=[""]){const l={$shared:!0},{resolver:c,subPrefixes:u}=fg(this._resolverCache,e,i);let h=c;if(ek(c,s)){l.$shared=!1,n=Rn(n)?n():n;const m=this.createResolver(e,n,u);h=Yr(c,n,m)}for(const m of s)l[m]=h[m];return l}createResolver(e,s,n=[""],i){const{resolver:l}=fg(this._resolverCache,e,n);return Me(s)?Yr(l,s,void 0,i):l}}function fg(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let l=n.get(i);return l||(l={resolver:Vu(e,s),subPrefixes:s.filter(u=>!u.toLowerCase().includes("hover"))},n.set(i,l)),l}const Z2=t=>Me(t)&&Object.getOwnPropertyNames(t).some(e=>Rn(t[e]));function ek(t,e){const{isScriptable:s,isIndexable:n}=s0(t);for(const i of e){const l=s(i),c=n(i),u=(c||l)&&t[i];if(l&&(Rn(u)||Z2(u))||c&&ct(u))return!0}return!1}var tk="4.5.0";const sk=["top","bottom","left","right","chartArea"];function mg(t,e){return t==="top"||t==="bottom"||sk.indexOf(t)===-1&&e==="x"}function pg(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function gg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Qe(s&&s.onComplete,[t],e)}function nk(t){const e=t.chart,s=e.options.animation;Qe(s&&s.onProgress,[t],e)}function N0(t){return Yu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const el={},xg=t=>{const e=N0(t);return Object.values(el).filter(s=>s.canvas===e).pop()};function rk(t,e,s){const n=Object.keys(t);for(const i of n){const l=+i;if(l>=e){const c=t[i];delete t[i],(s>0||l>e)&&(t[l+s]=c)}}}function ik(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let Pl=class{static defaults=it;static instances=el;static overrides=cr;static registry=Ds;static version=tk;static getChart=xg;static register(...e){Ds.add(...e),yg()}static unregister(...e){Ds.remove(...e),yg()}constructor(e,s){const n=this.config=new J2(s),i=N0(e),l=xg(i);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||_2(i)),this.platform.updateConfig(n);const u=this.platform.acquireContext(i,c.aspectRatio),h=u&&u.canvas,m=h&&h.height,p=h&&h.width;if(this.id=e_(),this.ctx=u,this.canvas=h,this.width=p,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=b_(x=>this.update(x),c.resizeDelay||0),this._dataChanges=[],el[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ks.listen(this,"complete",gg),Ks.listen(this,"progress",nk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:l}=this;return $e(e)?s&&l?l:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ds}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Bp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fp(this.canvas,this.ctx),this}stop(){return Ks.stop(this),this}resize(e,s){Ks.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,l=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(i,e,s,l),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,Bp(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),Qe(n.onResize,[this,c],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Ve(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((c,u)=>(c[u]=!1,c),{});let l=[];s&&(l=l.concat(Object.keys(s).map(c=>{const u=s[c],h=xu(c,u),m=h==="r",p=h==="x";return{options:u,dposition:m?"chartArea":p?"bottom":"left",dtype:m?"radialLinear":p?"category":"linear"}}))),Ve(l,c=>{const u=c.options,h=u.id,m=xu(h,u),p=Re(u.type,c.dtype);(u.position===void 0||mg(u.position,m)!==mg(c.dposition))&&(u.position=c.dposition),i[h]=!0;let x=null;if(h in n&&n[h].type===p)x=n[h];else{const b=Ds.getScale(p);x=new b({id:h,type:p,ctx:this.ctx,chart:this}),n[x.id]=x}x.init(u,e)}),Ve(i,(c,u)=>{c||delete n[u]}),Ve(n,c=>{us.configure(this,c,c.options),us.addBox(this,c)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,l)=>i.index-l.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(pg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(l=>l===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const l=s[n];let c=this.getDatasetMeta(n);const u=l.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=u,c.indexAxis=l.indexAxis||gu(u,this.options),c.order=l.order||0,c.index=n,c.label=""+l.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const h=Ds.getController(u),{datasetElementType:m,dataElementType:p}=it.datasets[u];Object.assign(h,{dataElementType:Ds.getElement(p),datasetElementType:m&&Ds.getElement(m)}),c.controller=new h(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){Ve(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,p=this.data.datasets.length;m<p;m++){const{controller:x}=this.getDatasetMeta(m),b=!i&&l.indexOf(x)===-1;x.buildOrUpdateElements(b),c=Math.max(+x.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),i||Ve(l,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pg("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Ve(this.scales,e=>{us.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Cp(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:l}of s){const c=n==="_removeElements"?-l:l;rk(e,i,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=l=>new Set(e.filter(c=>c[0]===l).map((c,u)=>u+","+c.splice(1).join(","))),i=n(0);for(let l=1;l<s;l++)if(!Cp(i,n(l)))return;return Array.from(i).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;us.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Ve(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,l)=>{i._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Rn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ks.has(this)?this.attached&&!Ks.running(this)&&Ks.start(this):(this.draw(),gg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,l;for(i=0,l=s.length;i<l;++i){const c=s[i];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=h0(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Nl(s,i),e.controller.draw(),i&&kl(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ha(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const l=s2.modes[s];return typeof l=="function"?l(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(l=>l&&l._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=hr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",l=this.getDatasetMeta(e),c=l.controller._resolveAnimations(void 0,i);ca(s)?(l.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(l,{visible:n}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Ks.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Fp(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete el[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c,u)=>{l.offsetX=c,l.offsetY=u,this._eventHandler(l)};Ve(this.options.events,l=>n(l,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(h,m)=>{s.addEventListener(this,h,m),e[h]=m},i=(h,m)=>{e[h]&&(s.removeEventListener(this,h,m),delete e[h])},l=(h,m)=>{this.canvas&&this.resize(h,m)};let c;const u=()=>{i("attach",u),this.attached=!0,this.resize(),n("resize",l),n("detach",c)};c=()=>{this.attached=!1,i("resize",l),this._stop(),this._resize(0,0),n("attach",u)},s.isAttached(this.canvas)?u():c()}unbindEvents(){Ve(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Ve(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let l,c,u,h;for(s==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){c=e[u];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[i+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:l,index:c})=>{const u=this.getDatasetMeta(l);if(!u)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:u.data[c],index:c}});!ll(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,l=(h,m)=>h.filter(p=>!m.some(x=>p.datasetIndex===x.datasetIndex&&p.index===x.index)),c=l(s,e),u=n?e:l(e,s);c.length&&this.updateHoverStyle(c,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const l=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(l||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:l}=this,c=s,u=this._getActiveElements(e,i,n,c),h=a_(e),m=ik(e,this._lastEvent,n,h);n&&(this._lastEvent=null,Qe(l.onHover,[e,u,this],this),h&&Qe(l.onClick,[e,u,this],this));const p=!ll(u,i);return(p||s)&&(this._active=u,this._updateHoverStyles(u,i,s)),this._lastEvent=m,p}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,i)}};function yg(){return Ve(Pl.instances,t=>t._plugins.invalidate())}function ak(t,e,s){const{startAngle:n,x:i,y:l,outerRadius:c,innerRadius:u,options:h}=e,{borderWidth:m,borderJoinStyle:p}=h,x=Math.min(m/c,es(n-s));if(t.beginPath(),t.arc(i,l,c-m/2,n+x/2,s-x/2),u>0){const b=Math.min(m/u,es(n-s));t.arc(i,l,u+m/2,s-b/2,n+b/2,!0)}else{const b=Math.min(m/2,c*es(n-s));if(p==="round")t.arc(i,l,b,s-We/2,n+We/2,!0);else if(p==="bevel"){const w=2*b*b,j=-w*Math.cos(s+We/2)+i,v=-w*Math.sin(s+We/2)+l,_=w*Math.cos(n+We/2)+i,C=w*Math.sin(n+We/2)+l;t.lineTo(j,v),t.lineTo(_,C)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function ok(t,e,s){const{startAngle:n,pixelMargin:i,x:l,y:c,outerRadius:u,innerRadius:h}=e;let m=i/u;t.beginPath(),t.arc(l,c,u,n-m,s+m),h>i?(m=i/h,t.arc(l,c,h,s+m,n-m,!0)):t.arc(l,c,i,s+ft,n-ft),t.closePath(),t.clip()}function lk(t){return Hu(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ck(t,e,s,n){const i=lk(t.options.borderRadius),l=(s-e)/2,c=Math.min(l,n*e/2),u=h=>{const m=(s-Math.min(l,h))*n/2;return Pt(h,0,Math.min(l,m))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Pt(i.innerStart,0,c),innerEnd:Pt(i.innerEnd,0,c)}}function zr(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function ml(t,e,s,n,i,l){const{x:c,y:u,startAngle:h,pixelMargin:m,innerRadius:p}=e,x=Math.max(e.outerRadius+n+s-m,0),b=p>0?p+n+s+m:0;let w=0;const j=i-h;if(n){const le=p>0?p-n:0,V=x>0?x-n:0,Z=(le+V)/2,G=Z!==0?j*Z/(Z+n):j;w=(j-G)/2}const v=Math.max(.001,j*x-s/We)/x,_=(j-v)/2,C=h+_+w,S=i-_-w,{outerStart:E,outerEnd:R,innerStart:A,innerEnd:F}=ck(e,b,x,S-C),H=x-E,z=x-R,K=C+E/H,W=S-R/z,M=b+A,X=b+F,$=C+A/M,re=S-F/X;if(t.beginPath(),l){const le=(K+W)/2;if(t.arc(c,u,x,K,le),t.arc(c,u,x,le,W),R>0){const se=zr(z,W,c,u);t.arc(se.x,se.y,R,W,S+ft)}const V=zr(X,S,c,u);if(t.lineTo(V.x,V.y),F>0){const se=zr(X,re,c,u);t.arc(se.x,se.y,F,S+ft,re+Math.PI)}const Z=(S-F/b+(C+A/b))/2;if(t.arc(c,u,b,S-F/b,Z,!0),t.arc(c,u,b,Z,C+A/b,!0),A>0){const se=zr(M,$,c,u);t.arc(se.x,se.y,A,$+Math.PI,C-ft)}const G=zr(H,C,c,u);if(t.lineTo(G.x,G.y),E>0){const se=zr(H,K,c,u);t.arc(se.x,se.y,E,C-ft,K)}}else{t.moveTo(c,u);const le=Math.cos(K)*x+c,V=Math.sin(K)*x+u;t.lineTo(le,V);const Z=Math.cos(W)*x+c,G=Math.sin(W)*x+u;t.lineTo(Z,G)}t.closePath()}function dk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u}=e;let h=e.endAngle;if(l){ml(t,e,s,n,h,i);for(let m=0;m<l;++m)t.fill();isNaN(u)||(h=c+(u%et||et))}return ml(t,e,s,n,h,i),t.fill(),h}function uk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u,options:h}=e,{borderWidth:m,borderJoinStyle:p,borderDash:x,borderDashOffset:b,borderRadius:w}=h,j=h.borderAlign==="inner";if(!m)return;t.setLineDash(x||[]),t.lineDashOffset=b,j?(t.lineWidth=m*2,t.lineJoin=p||"round"):(t.lineWidth=m,t.lineJoin=p||"bevel");let v=e.endAngle;if(l){ml(t,e,s,n,v,i);for(let _=0;_<l;++_)t.stroke();isNaN(u)||(v=c+(u%et||et))}j&&ok(t,e,v),h.selfJoin&&v-c>=We&&w===0&&p!=="miter"&&ak(t,e,v),l||(ml(t,e,s,n,v,i),t.stroke())}class hk extends sn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.getProps(["x","y"],n),{angle:l,distance:c}=Kx(i,{x:e,y:s}),{startAngle:u,endAngle:h,innerRadius:m,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),b=(this.options.spacing+this.options.borderWidth)/2,w=Re(x,h-u),j=ua(l,u,h)&&u!==h,v=w>=et||j,_=Js(c,m+b,p+b);return v&&_}getCenterPoint(e){const{x:s,y:n,startAngle:i,endAngle:l,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:m}=this.options,p=(i+l)/2,x=(c+u+m+h)/2;return{x:s+Math.cos(p)*x,y:n+Math.sin(p)*x}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,i=(s.offset||0)/4,l=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>et?Math.floor(n/et):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);const h=1-Math.sin(Math.min(We,n||0)),m=i*h;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,dk(e,this,m,l,c),uk(e,this,m,l,c),e.restore()}}function k0(t,e,s=e){t.lineCap=Re(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Re(s.borderDash,e.borderDash)),t.lineDashOffset=Re(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Re(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Re(s.borderWidth,e.borderWidth),t.strokeStyle=Re(s.borderColor,e.borderColor)}function fk(t,e,s){t.lineTo(s.x,s.y)}function mk(t){return t.stepped?D_:t.tension||t.cubicInterpolationMode==="monotone"?M_:fk}function S0(t,e,s={}){const n=t.length,{start:i=0,end:l=n-1}=s,{start:c,end:u}=e,h=Math.max(i,c),m=Math.min(l,u),p=i<c&&l<c||i>u&&l>u;return{count:n,start:h,loop:e.loop,ilen:m<h&&!p?n+m-h:m-h}}function pk(t,e,s,n){const{points:i,options:l}=e,{count:c,start:u,loop:h,ilen:m}=S0(i,s,n),p=mk(l);let{move:x=!0,reverse:b}=n||{},w,j,v;for(w=0;w<=m;++w)j=i[(u+(b?m-w:w))%c],!j.skip&&(x?(t.moveTo(j.x,j.y),x=!1):p(t,v,j,b,l.stepped),v=j);return h&&(j=i[(u+(b?m:0))%c],p(t,v,j,b,l.stepped)),!!h}function gk(t,e,s,n){const i=e.points,{count:l,start:c,ilen:u}=S0(i,s,n),{move:h=!0,reverse:m}=n||{};let p=0,x=0,b,w,j,v,_,C;const S=R=>(c+(m?u-R:R))%l,E=()=>{v!==_&&(t.lineTo(p,_),t.lineTo(p,v),t.lineTo(p,C))};for(h&&(w=i[S(0)],t.moveTo(w.x,w.y)),b=0;b<=u;++b){if(w=i[S(b)],w.skip)continue;const R=w.x,A=w.y,F=R|0;F===j?(A<v?v=A:A>_&&(_=A),p=(x*p+R)/++x):(E(),t.lineTo(R,A),j=F,x=0,v=_=A),C=A}E()}function yu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?gk:pk}function xk(t){return t.stepped?hN:t.tension||t.cubicInterpolationMode==="monotone"?fN:er}function yk(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),k0(t,e.options),t.stroke(i)}function bk(t,e,s,n){const{segments:i,options:l}=e,c=yu(e);for(const u of i)k0(t,l,u.style),t.beginPath(),c(t,e,u,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const vk=typeof Path2D=="function";function wk(t,e,s,n){vk&&!e.options.segment?yk(t,e,s,n):bk(t,e,s,n)}class Al extends sn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;rN(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bN(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],l=this.points,c=u0(this,{property:s,start:i,end:i});if(!c.length)return;const u=[],h=xk(n);let m,p;for(m=0,p=c.length;m<p;++m){const{start:x,end:b}=c[m],w=l[x],j=l[b];if(w===j){u.push(w);continue}const v=Math.abs((i-w[s])/(j[s]-w[s])),_=h(w,j,v,n.stepped);_[s]=e[s],u.push(_)}return u.length===1?u[0]:u}pathSegment(e,s,n){return yu(this)(e,this,s,n)}path(e,s,n){const i=this.segments,l=yu(this);let c=this._loop;s=s||0,n=n||this.points.length-s;for(const u of i)c&=l(e,this,u,{start:s,end:s+n-1});return!!c}draw(e,s,n,i){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),wk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function bg(t,e,s,n){const i=t.options,{[s]:l}=t.getProps([s],n);return Math.abs(e-l)<i.radius+i.hitRadius}class jk extends sn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.options,{x:l,y:c}=this.getProps(["x","y"],n);return Math.pow(e-l,2)+Math.pow(s-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return bg(this,e,"x",s)}inYRange(e,s){return bg(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!ha(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,pu(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function C0(t,e){const{x:s,y:n,base:i,width:l,height:c}=t.getProps(["x","y","base","width","height"],e);let u,h,m,p,x;return t.horizontal?(x=c/2,u=Math.min(s,i),h=Math.max(s,i),m=n-x,p=n+x):(x=l/2,u=s-x,h=s+x,m=Math.min(n,i),p=Math.max(n,i)),{left:u,top:m,right:h,bottom:p}}function Sn(t,e,s,n){return t?0:Pt(e,s,n)}function _k(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,l=t0(n);return{t:Sn(i.top,l.top,0,s),r:Sn(i.right,l.right,0,e),b:Sn(i.bottom,l.bottom,0,s),l:Sn(i.left,l.left,0,e)}}function Nk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,l=Ur(i),c=Math.min(e,s),u=t.borderSkipped,h=n||Me(i);return{topLeft:Sn(!h||u.top||u.left,l.topLeft,0,c),topRight:Sn(!h||u.top||u.right,l.topRight,0,c),bottomLeft:Sn(!h||u.bottom||u.left,l.bottomLeft,0,c),bottomRight:Sn(!h||u.bottom||u.right,l.bottomRight,0,c)}}function kk(t){const e=C0(t),s=e.right-e.left,n=e.bottom-e.top,i=_k(t,s/2,n/2),l=Nk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:l},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,l.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(i.b,i.r))}}}}function Hd(t,e,s,n){const i=e===null,l=s===null,u=t&&!(i&&l)&&C0(t,n);return u&&(i||Js(e,u.left,u.right))&&(l||Js(s,u.top,u.bottom))}function Sk(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Ck(t,e){t.rect(e.x,e.y,e.w,e.h)}function Vd(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,l=(t.x+t.w!==s.x+s.w?e:0)-n,c=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+l,h:t.h+c,radius:t.radius}}class Ek extends sn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:l,outer:c}=kk(this),u=Sk(c.radius)?ul:Ck;e.save(),(c.w!==l.w||c.h!==l.h)&&(e.beginPath(),u(e,Vd(c,s,l)),e.clip(),u(e,Vd(l,-s,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,Vd(l,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return Hd(this,e,s,n)}inXRange(e,s){return Hd(this,e,null,s)}inYRange(e,s){return Hd(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(s+i)/2:s,y:l?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function Pk(t,e,s){const n=t.segments,i=t.points,l=e.points,c=[];for(const u of n){let{start:h,end:m}=u;m=Tl(h,m,i);const p=bu(s,i[h],i[m],u.loop);if(!e.segments){c.push({source:u,target:p,start:i[h],end:i[m]});continue}const x=u0(e,p);for(const b of x){const w=bu(s,l[b.start],l[b.end],b.loop),j=d0(u,i,w);for(const v of j)c.push({source:v,target:b,start:{[s]:vg(p,w,"start",Math.max)},end:{[s]:vg(p,w,"end",Math.min)}})}}return c}function bu(t,e,s,n){if(n)return;let i=e[t],l=s[t];return t==="angle"&&(i=es(i),l=es(l)),{property:t,start:i,end:l}}function Ak(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,l=[];return e.segments.forEach(({start:c,end:u})=>{u=Tl(c,u,i);const h=i[c],m=i[u];n!==null?(l.push({x:h.x,y:n}),l.push({x:m.x,y:n})):s!==null&&(l.push({x:s,y:h.y}),l.push({x:s,y:m.y}))}),l}function Tl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function vg(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function E0(t,e){let s=[],n=!1;return ct(t)?(n=!0,s=t):s=Ak(t,e),s.length?new Al({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function wg(t){return t&&t.fill!==!1}function Tk(t,e,s){let i=t[e].fill;const l=[e];let c;if(!s)return i;for(;i!==!1&&l.indexOf(i)===-1;){if(!Tt(i))return i;if(c=t[i],!c)return!1;if(c.visible)return i;l.push(i),i=c.fill}return!1}function Rk(t,e,s){const n=Lk(t);if(Me(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Tt(i)&&Math.floor(i)===i?Dk(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Dk(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function Mk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:Me(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Ok(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:Me(t)?n=t.value:n=e.getBaseValue(),n}function Lk(t){const e=t.options,s=e.fill;let n=Re(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Fk(t){const{scale:e,index:s,line:n}=t,i=[],l=n.segments,c=n.points,u=Ik(e,s);u.push(E0({x:null,y:e.bottom},n));for(let h=0;h<l.length;h++){const m=l[h];for(let p=m.start;p<=m.end;p++)zk(i,c[p],u)}return new Al({points:i,options:{}})}function Ik(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const l=n[i];if(l.index===e)break;l.hidden||s.unshift(l.dataset)}return s}function zk(t,e,s){const n=[];for(let i=0;i<s.length;i++){const l=s[i],{first:c,last:u,point:h}=Bk(l,e,"x");if(!(!h||c&&u)){if(c)n.unshift(h);else if(t.push(h),!u)break}}t.push(...n)}function Bk(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],l=t.segments,c=t.points;let u=!1,h=!1;for(let m=0;m<l.length;m++){const p=l[m],x=c[p.start][s],b=c[p.end][s];if(Js(i,x,b)){u=i===x,h=i===b;break}}return{first:u,last:h,point:n}}class P0{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:l,radius:c}=this;return s=s||{start:0,end:et},e.arc(i,l,c,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,l=e.angle;return{x:s+Math.cos(l)*i,y:n+Math.sin(l)*i,angle:l}}}function $k(t){const{chart:e,fill:s,line:n}=t;if(Tt(s))return Uk(e,s);if(s==="stack")return Fk(t);if(s==="shape")return!0;const i=Hk(t);return i instanceof P0?i:E0(i,n)}function Uk(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function Hk(t){return(t.scale||{}).getPointPositionForValue?Wk(t):Vk(t)}function Vk(t){const{scale:e={},fill:s}=t,n=Mk(s,e);if(Tt(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function Wk(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,l=n.reverse?e.max:e.min,c=Ok(s,e,l),u=[];if(n.grid.circular){const h=e.getPointPositionForValue(0,l);return new P0({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(c)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,c));return u}function Wd(t,e,s){const n=$k(e),{chart:i,index:l,line:c,scale:u,axis:h}=e,m=c.options,p=m.fill,x=m.backgroundColor,{above:b=x,below:w=x}=p||{},j=i.getDatasetMeta(l),v=h0(i,j);n&&c.points.length&&(Nl(t,s),qk(t,{line:c,target:n,above:b,below:w,area:s,scale:u,axis:h,clip:v}),kl(t))}function qk(t,e){const{line:s,target:n,above:i,below:l,area:c,scale:u,clip:h}=e,m=s._loop?"angle":e.axis;t.save();let p=l;l!==i&&(m==="x"?(jg(t,n,c.top),qd(t,{line:s,target:n,color:i,scale:u,property:m,clip:h}),t.restore(),t.save(),jg(t,n,c.bottom)):m==="y"&&(_g(t,n,c.left),qd(t,{line:s,target:n,color:l,scale:u,property:m,clip:h}),t.restore(),t.save(),_g(t,n,c.right),p=i)),qd(t,{line:s,target:n,color:p,scale:u,property:m,clip:h}),t.restore()}function jg(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:m}=u,p=i[h],x=i[Tl(h,m,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(p.x,s),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(x.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function _g(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:m}=u,p=i[h],x=i[Tl(h,m,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(s,p.y),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(s,x.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function qd(t,e){const{line:s,target:n,property:i,color:l,scale:c,clip:u}=e,h=Pk(s,n,i);for(const{source:m,target:p,start:x,end:b}of h){const{style:{backgroundColor:w=l}={}}=m,j=n!==!0;t.save(),t.fillStyle=w,Yk(t,c,u,j&&bu(i,x,b)),t.beginPath();const v=!!s.pathSegment(t,m);let _;if(j){v?t.closePath():Ng(t,n,b,i);const C=!!n.pathSegment(t,p,{move:v,reverse:!0});_=v&&C,_||Ng(t,n,x,i)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function Yk(t,e,s,n){const i=e.chart.chartArea,{property:l,start:c,end:u}=n||{};if(l==="x"||l==="y"){let h,m,p,x;l==="x"?(h=c,m=i.top,p=u,x=i.bottom):(h=i.left,m=c,p=i.right,x=u),t.beginPath(),s&&(h=Math.max(h,s.left),p=Math.min(p,s.right),m=Math.max(m,s.top),x=Math.min(x,s.bottom)),t.rect(h,m,p-h,x-m),t.clip()}}function Ng(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var Kk={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let l,c,u,h;for(c=0;c<n;++c)l=t.getDatasetMeta(c),u=l.dataset,h=null,u&&u.options&&u instanceof Al&&(h={visible:t.isDatasetVisible(c),index:c,fill:Rk(u,c,n),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:u}),l.$filler=h,i.push(h);for(c=0;c<n;++c)h=i[c],!(!h||h.fill===!1)&&(h.fill=Tk(i,c,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let c=i.length-1;c>=0;--c){const u=i[c].$filler;u&&(u.line.updateControlPoints(l,u.axis),n&&u.fill&&Wd(t.ctx,u,l))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const l=n[i].$filler;wg(l)&&Wd(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!wg(n)||s.drawTime!=="beforeDatasetDraw"||Wd(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const kg=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},Xk=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Sg extends sn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Qe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=At(n.font),l=i.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=kg(n,l);let m,p;s.font=i.string,this.isHorizontal()?(m=this.maxWidth,p=this._fitRows(c,l,u,h)+10):(p=this.maxHeight,m=this._fitCols(c,i,u,h)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:l,maxWidth:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.lineWidths=[0],p=i+u;let x=e;l.textAlign="left",l.textBaseline="middle";let b=-1,w=-p;return this.legendItems.forEach((j,v)=>{const _=n+s/2+l.measureText(j.text).width;(v===0||m[m.length-1]+_+2*u>c)&&(x+=p,m[m.length-(v>0?0:1)]=0,w+=p,b++),h[v]={left:0,top:w,row:b,width:_,height:i},m[m.length-1]+=_+u}),x}_fitCols(e,s,n,i){const{ctx:l,maxHeight:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.columnSizes=[],p=c-e;let x=u,b=0,w=0,j=0,v=0;return this.legendItems.forEach((_,C)=>{const{itemWidth:S,itemHeight:E}=Qk(n,s,l,_,i);C>0&&w+E+2*u>p&&(x+=b+u,m.push({width:b,height:w}),j+=b+u,v++,b=w=0),h[C]={left:j,top:w,col:v,width:S,height:E},b=Math.max(b,S),w+=E+u}),x+=b,m.push({width:b,height:w}),x}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:l}}=this,c=Hr(l,this.left,this.width);if(this.isHorizontal()){let u=0,h=Ct(n,this.left+i,this.right-this.lineWidths[u]);for(const m of s)u!==m.row&&(u=m.row,h=Ct(n,this.left+i,this.right-this.lineWidths[u])),m.top+=this.top+e+i,m.left=c.leftForLtr(c.x(h),m.width),h+=m.width+i}else{let u=0,h=Ct(n,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const m of s)m.col!==u&&(u=m.col,h=Ct(n,this.top+e+i,this.bottom-this.columnSizes[u].height)),m.top=h,m.left+=this.left+i,m.left=c.leftForLtr(c.x(m.left),m.width),h+=m.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Nl(e,this),this._draw(),kl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:l,labels:c}=e,u=it.color,h=Hr(e.rtl,this.left,this.width),m=At(c.font),{padding:p}=c,x=m.size,b=x/2;let w;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=m.string;const{boxWidth:j,boxHeight:v,itemHeight:_}=kg(c,x),C=function(F,H,z){if(isNaN(j)||j<=0||isNaN(v)||v<0)return;i.save();const K=Re(z.lineWidth,1);if(i.fillStyle=Re(z.fillStyle,u),i.lineCap=Re(z.lineCap,"butt"),i.lineDashOffset=Re(z.lineDashOffset,0),i.lineJoin=Re(z.lineJoin,"miter"),i.lineWidth=K,i.strokeStyle=Re(z.strokeStyle,u),i.setLineDash(Re(z.lineDash,[])),c.usePointStyle){const W={radius:v*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:K},M=h.xPlus(F,j/2),X=H+b;e0(i,W,M,X,c.pointStyleWidth&&j)}else{const W=H+Math.max((x-v)/2,0),M=h.leftForLtr(F,j),X=Ur(z.borderRadius);i.beginPath(),Object.values(X).some($=>$!==0)?ul(i,{x:M,y:W,w:j,h:v,radius:X}):i.rect(M,W,j,v),i.fill(),K!==0&&i.stroke()}i.restore()},S=function(F,H,z){fa(i,z.text,F,H+_/2,m,{strikethrough:z.hidden,textAlign:h.textAlign(z.textAlign)})},E=this.isHorizontal(),R=this._computeTitleHeight();E?w={x:Ct(l,this.left+p,this.right-n[0]),y:this.top+p+R,line:0}:w={x:this.left+p,y:Ct(l,this.top+R+p,this.bottom-s[0].height),line:0},o0(this.ctx,e.textDirection);const A=_+p;this.legendItems.forEach((F,H)=>{i.strokeStyle=F.fontColor,i.fillStyle=F.fontColor;const z=i.measureText(F.text).width,K=h.textAlign(F.textAlign||(F.textAlign=c.textAlign)),W=j+b+z;let M=w.x,X=w.y;h.setWidth(this.width),E?H>0&&M+W+p>this.right&&(X=w.y+=A,w.line++,M=w.x=Ct(l,this.left+p,this.right-n[w.line])):H>0&&X+A>this.bottom&&(M=w.x=M+s[w.line].width+p,w.line++,X=w.y=Ct(l,this.top+R+p,this.bottom-s[w.line].height));const $=h.x(M);if(C($,X,F),M=v_(K,M+j+b,E?M+W:this.right,e.rtl),S(h.x(M),X,F),E)w.x+=W+p;else if(typeof F.text!="string"){const re=m.lineHeight;w.y+=A0(F,re)+p}else w.y+=A}),l0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=At(s.font),i=hs(s.padding);if(!s.display)return;const l=Hr(e.rtl,this.left,this.width),c=this.ctx,u=s.position,h=n.size/2,m=i.top+h;let p,x=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+m,x=Ct(e.align,x,this.right-b);else{const j=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);p=m+Ct(e.align,this.top,this.bottom-j-e.labels.padding-this._computeTitleHeight())}const w=Ct(u,x,x+b);c.textAlign=l.textAlign(Bu(u)),c.textBaseline="middle",c.strokeStyle=s.color,c.fillStyle=s.color,c.font=n.string,fa(c,s.text,w,p,n)}_computeTitleHeight(){const e=this.options.title,s=At(e.font),n=hs(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,l;if(Js(e,this.left,this.right)&&Js(s,this.top,this.bottom)){for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(i=l[n],Js(e,i.left,i.left+i.width)&&Js(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!Zk(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,l=Xk(i,n);i&&!l&&Qe(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!l&&Qe(s.onHover,[e,n,this],this)}else n&&Qe(s.onClick,[e,n,this],this)}}function Qk(t,e,s,n,i){const l=Gk(n,t,e,s),c=Jk(i,n,e.lineHeight);return{itemWidth:l,itemHeight:c}}function Gk(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((l,c)=>l.length>c.length?l:c)),e+s.size/2+n.measureText(i).width}function Jk(t,e,s){let n=t;return typeof e.text!="string"&&(n=A0(e,s)),n}function A0(t,e){const s=t.text?t.text.length:0;return e*s}function Zk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var eS={id:"legend",_element:Sg,start(t,e,s){const n=t.legend=new Sg({ctx:t.ctx,options:s,chart:t});us.configure(t,n,s),us.addBox(t,n)},stop(t){us.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;us.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:l,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const m=h.controller.getStyle(s?0:void 0),p=hs(m.borderWidth);return{text:e[h.index].label,fillStyle:m.backgroundColor,fontColor:l,hidden:!h.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:m.borderColor,pointStyle:n||m.pointStyle,rotation:m.rotation,textAlign:i||m.textAlign,borderRadius:c&&(u||m.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class T0 extends sn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=ct(n.text)?n.text.length:1;this._padding=hs(n.padding);const l=i*At(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:l,options:c}=this,u=c.align;let h=0,m,p,x;return this.isHorizontal()?(p=Ct(u,n,l),x=s+e,m=l-n):(c.position==="left"?(p=n+e,x=Ct(u,i,s),h=We*-.5):(p=l-e,x=Ct(u,s,i),h=We*.5),m=i-s),{titleX:p,titleY:x,maxWidth:m,rotation:h}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=At(s.font),l=n.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:h,rotation:m}=this._drawArgs(l);fa(e,s.text,0,0,n,{color:s.color,maxWidth:h,rotation:m,textAlign:Bu(s.align),textBaseline:"middle",translation:[c,u]})}}function tS(t,e){const s=new T0({ctx:t.ctx,options:e,chart:t});us.configure(t,s,e),us.addBox(t,s),t.titleBlock=s}var sS={id:"title",_element:T0,start(t,e,s){tS(t,s)},stop(t){const e=t.titleBlock;us.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;us.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ji={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,l=0;for(e=0,s=t.length;e<s;++e){const u=t[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();n.add(h.x),i+=h.y,++l}}return l===0||n.size===0?!1:{x:[...n].reduce((u,h)=>u+h)/n.size,y:i/l}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,l,c,u;for(l=0,c=t.length;l<c;++l){const h=t[l].element;if(h&&h.hasValue()){const m=h.getCenterPoint(),p=fu(e,m);p<i&&(i=p,u=h)}}if(u){const h=u.tooltipPosition();s=h.x,n=h.y}return{x:s,y:n}}};function Rs(t,e){return e&&(ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function nS(t,e){const{element:s,datasetIndex:n,index:i}=e,l=t.getDatasetMeta(n).controller,{label:c,value:u}=l.getLabelAndValue(i);return{chart:t,label:c,parsed:l.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:u,dataset:l.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Cg(t,e){const s=t.chart.ctx,{body:n,footer:i,title:l}=t,{boxWidth:c,boxHeight:u}=e,h=At(e.bodyFont),m=At(e.titleFont),p=At(e.footerFont),x=l.length,b=i.length,w=n.length,j=hs(e.padding);let v=j.height,_=0,C=n.reduce((R,A)=>R+A.before.length+A.lines.length+A.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,x&&(v+=x*m.lineHeight+(x-1)*e.titleSpacing+e.titleMarginBottom),C){const R=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;v+=w*R+(C-w)*h.lineHeight+(C-1)*e.bodySpacing}b&&(v+=e.footerMarginTop+b*p.lineHeight+(b-1)*e.footerSpacing);let S=0;const E=function(R){_=Math.max(_,s.measureText(R).width+S)};return s.save(),s.font=m.string,Ve(t.title,E),s.font=h.string,Ve(t.beforeBody.concat(t.afterBody),E),S=e.displayColors?c+2+e.boxPadding:0,Ve(n,R=>{Ve(R.before,E),Ve(R.lines,E),Ve(R.after,E)}),S=0,s.font=p.string,Ve(t.footer,E),s.restore(),_+=j.width,{width:_,height:v}}function rS(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function iS(t,e,s,n){const{x:i,width:l}=n,c=s.caretSize+s.caretPadding;if(t==="left"&&i+l+c>e.width||t==="right"&&i-l-c<0)return!0}function aS(t,e,s,n){const{x:i,width:l}=s,{width:c,chartArea:{left:u,right:h}}=t;let m="center";return n==="center"?m=i<=(u+h)/2?"left":"right":i<=l/2?m="left":i>=c-l/2&&(m="right"),iS(m,t,e,s)&&(m="center"),m}function Eg(t,e,s){const n=s.yAlign||e.yAlign||rS(t,s);return{xAlign:s.xAlign||e.xAlign||aS(t,e,s,n),yAlign:n}}function oS(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function lS(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function Pg(t,e,s,n){const{caretSize:i,caretPadding:l,cornerRadius:c}=t,{xAlign:u,yAlign:h}=s,m=i+l,{topLeft:p,topRight:x,bottomLeft:b,bottomRight:w}=Ur(c);let j=oS(e,u);const v=lS(e,h,m);return h==="center"?u==="left"?j+=m:u==="right"&&(j-=m):u==="left"?j-=Math.max(p,b)+i:u==="right"&&(j+=Math.max(x,w)+i),{x:Pt(j,0,n.width-e.width),y:Pt(v,0,n.height-e.height)}}function Vo(t,e,s){const n=hs(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Ag(t){return Rs([],Xs(t))}function cS(t,e,s){return hr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Tg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const R0={beforeTitle:Ys,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Ys,beforeBody:Ys,beforeLabel:Ys,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return $e(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Ys,afterBody:Ys,beforeFooter:Ys,footer:Ys,afterFooter:Ys};function Ht(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?R0[e].call(s,n):i}class Rg extends sn{static positioners=Ji;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,l=new f0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=cS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=Ht(n,"beforeTitle",this,e),l=Ht(n,"title",this,e),c=Ht(n,"afterTitle",this,e);let u=[];return u=Rs(u,Xs(i)),u=Rs(u,Xs(l)),u=Rs(u,Xs(c)),u}getBeforeBody(e,s){return Ag(Ht(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return Ve(e,l=>{const c={before:[],lines:[],after:[]},u=Tg(n,l);Rs(c.before,Xs(Ht(u,"beforeLabel",this,l))),Rs(c.lines,Ht(u,"label",this,l)),Rs(c.after,Xs(Ht(u,"afterLabel",this,l))),i.push(c)}),i}getAfterBody(e,s){return Ag(Ht(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=Ht(n,"beforeFooter",this,e),l=Ht(n,"footer",this,e),c=Ht(n,"afterFooter",this,e);let u=[];return u=Rs(u,Xs(i)),u=Rs(u,Xs(l)),u=Rs(u,Xs(c)),u}_createItems(e){const s=this._active,n=this.chart.data,i=[],l=[],c=[];let u=[],h,m;for(h=0,m=s.length;h<m;++h)u.push(nS(this.chart,s[h]));return e.filter&&(u=u.filter((p,x,b)=>e.filter(p,x,b,n))),e.itemSort&&(u=u.sort((p,x)=>e.itemSort(p,x,n))),Ve(u,p=>{const x=Tg(e.callbacks,p);i.push(Ht(x,"labelColor",this,p)),l.push(Ht(x,"labelPointStyle",this,p)),c.push(Ht(x,"labelTextColor",this,p))}),this.labelColors=i,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=u,u}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let l,c=[];if(!i.length)this.opacity!==0&&(l={opacity:0});else{const u=Ji[n.position].call(this,i,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const h=this._size=Cg(this,n),m=Object.assign({},u,h),p=Eg(this.chart,n,m),x=Pg(n,m,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,l={opacity:1,x:x.x,y:x.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const l=this.getCaretPosition(e,n,i);s.lineTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineTo(l.x3,l.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:l}=this,{caretSize:c,cornerRadius:u}=n,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:x}=Ur(u),{x:b,y:w}=e,{width:j,height:v}=s;let _,C,S,E,R,A;return l==="center"?(R=w+v/2,i==="left"?(_=b,C=_-c,E=R+c,A=R-c):(_=b+j,C=_+c,E=R-c,A=R+c),S=_):(i==="left"?C=b+Math.max(h,p)+c:i==="right"?C=b+j-Math.max(m,x)-c:C=this.caretX,l==="top"?(E=w,R=E-c,_=C-c,S=C+c):(E=w+v,R=E+c,_=C+c,S=C-c),A=E),{x1:_,x2:C,x3:S,y1:E,y2:R,y3:A}}drawTitle(e,s,n){const i=this.title,l=i.length;let c,u,h;if(l){const m=Hr(n.rtl,this.x,this.width);for(e.x=Vo(this,n.titleAlign,n),s.textAlign=m.textAlign(n.titleAlign),s.textBaseline="middle",c=At(n.titleFont),u=n.titleSpacing,s.fillStyle=n.titleColor,s.font=c.string,h=0;h<l;++h)s.fillText(i[h],m.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,h+1===l&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,s,n,i,l){const c=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:h,boxWidth:m}=l,p=At(l.bodyFont),x=Vo(this,"left",l),b=i.x(x),w=h<p.lineHeight?(p.lineHeight-h)/2:0,j=s.y+w;if(l.usePointStyle){const v={radius:Math.min(m,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},_=i.leftForLtr(b,m)+m/2,C=j+h/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,pu(e,v,_,C),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,pu(e,v,_,C)}else{e.lineWidth=Me(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const v=i.leftForLtr(b,m),_=i.leftForLtr(i.xPlus(b,1),m-2),C=Ur(c.borderRadius);Object.values(C).some(S=>S!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,ul(e,{x:v,y:j,w:m,h,radius:C}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),ul(e,{x:_,y:j+1,w:m-2,h:h-2,radius:C}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(v,j,m,h),e.strokeRect(v,j,m,h),e.fillStyle=c.backgroundColor,e.fillRect(_,j+1,m-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:l,bodyAlign:c,displayColors:u,boxHeight:h,boxWidth:m,boxPadding:p}=n,x=At(n.bodyFont);let b=x.lineHeight,w=0;const j=Hr(n.rtl,this.x,this.width),v=function(z){s.fillText(z,j.x(e.x+w),e.y+b/2),e.y+=b+l},_=j.textAlign(c);let C,S,E,R,A,F,H;for(s.textAlign=c,s.textBaseline="middle",s.font=x.string,e.x=Vo(this,_,n),s.fillStyle=n.bodyColor,Ve(this.beforeBody,v),w=u&&_!=="right"?c==="center"?m/2+p:m+2+p:0,R=0,F=i.length;R<F;++R){for(C=i[R],S=this.labelTextColors[R],s.fillStyle=S,Ve(C.before,v),E=C.lines,u&&E.length&&(this._drawColorBox(s,e,R,j,n),b=Math.max(x.lineHeight,h)),A=0,H=E.length;A<H;++A)v(E[A]),b=x.lineHeight;Ve(C.after,v)}w=0,b=x.lineHeight,Ve(this.afterBody,v),e.y-=l}drawFooter(e,s,n){const i=this.footer,l=i.length;let c,u;if(l){const h=Hr(n.rtl,this.x,this.width);for(e.x=Vo(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=h.textAlign(n.footerAlign),s.textBaseline="middle",c=At(n.footerFont),s.fillStyle=n.footerColor,s.font=c.string,u=0;u<l;++u)s.fillText(i[u],h.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:l,yAlign:c}=this,{x:u,y:h}=e,{width:m,height:p}=n,{topLeft:x,topRight:b,bottomLeft:w,bottomRight:j}=Ur(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(u+x,h),c==="top"&&this.drawCaret(e,s,n,i),s.lineTo(u+m-b,h),s.quadraticCurveTo(u+m,h,u+m,h+b),c==="center"&&l==="right"&&this.drawCaret(e,s,n,i),s.lineTo(u+m,h+p-j),s.quadraticCurveTo(u+m,h+p,u+m-j,h+p),c==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(u+w,h+p),s.quadraticCurveTo(u,h+p,u,h+p-w),c==="center"&&l==="left"&&this.drawCaret(e,s,n,i),s.lineTo(u,h+x),s.quadraticCurveTo(u,h,u+x,h),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,l=n&&n.y;if(i||l){const c=Ji[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=Cg(this,e),h=Object.assign({},c,this._size),m=Eg(s,e,h),p=Pg(e,h,m,s);(i._to!==p.x||l._to!==p.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},l={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=hs(s.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(l,e,i,s),o0(e,s.textDirection),l.y+=c.top,this.drawTitle(l,e,s),this.drawBody(l,e,s),this.drawFooter(l,e,s),l0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:u,index:h})=>{const m=this.chart.getDatasetMeta(u);if(!m)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:m.data[h],index:h}}),l=!ll(n,i),c=this._positionChanged(i,s);(l||c)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,l=this._active||[],c=this._getActiveElements(e,l,s,n),u=this._positionChanged(c,e),h=s||!ll(c,l)||u;return h&&(this._active=c,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),h}_getActiveElements(e,s,n,i){const l=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,l.mode,l,n);return l.reverse&&c.reverse(),c}_positionChanged(e,s){const{caretX:n,caretY:i,options:l}=this,c=Ji[l.position].call(this,e,s);return c!==!1&&(n!==c.x||i!==c.y)}}var dS={id:"tooltip",_element:Rg,positioners:Ji,afterInit(t,e,s){s&&(t.tooltip=new Rg({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:R0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const uS=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function hS(t,e,s,n){const i=t.indexOf(e);if(i===-1)return uS(t,e,s,n);const l=t.lastIndexOf(e);return i!==l?s:i}const fS=(t,e)=>t===null?null:Pt(Math.round(t),0,e);function Dg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class mS extends si{static id="category";static defaults={ticks:{callback:Dg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:l}of s)n[i]===l&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if($e(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:hS(n,e,Re(s,e),this._addedLabels),fS(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let l=this.getLabels();l=e===0&&s===l.length-1?l:l.slice(e,s+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=s;c++)i.push({value:c});return i}getLabelForValue(e){return Dg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function pS(t,e){const s=[],{bounds:i,step:l,min:c,max:u,precision:h,count:m,maxTicks:p,maxDigits:x,includeBounds:b}=t,w=l||1,j=p-1,{min:v,max:_}=e,C=!$e(c),S=!$e(u),E=!$e(m),R=(_-v)/(x+1);let A=Pp((_-v)/j/w)*w,F,H,z,K;if(A<1e-14&&!C&&!S)return[{value:v},{value:_}];K=Math.ceil(_/A)-Math.floor(v/A),K>j&&(A=Pp(K*A/j/w)*w),$e(h)||(F=Math.pow(10,h),A=Math.ceil(A*F)/F),i==="ticks"?(H=Math.floor(v/A)*A,z=Math.ceil(_/A)*A):(H=v,z=_),C&&S&&l&&u_((u-c)/l,A/1e3)?(K=Math.round(Math.min((u-c)/A,p)),A=(u-c)/K,H=c,z=u):E?(H=C?c:H,z=S?u:z,K=m-1,A=(z-H)/K):(K=(z-H)/A,ta(K,Math.round(K),A/1e3)?K=Math.round(K):K=Math.ceil(K));const W=Math.max(Ap(A),Ap(H));F=Math.pow(10,$e(h)?W:h),H=Math.round(H*F)/F,z=Math.round(z*F)/F;let M=0;for(C&&(b&&H!==c?(s.push({value:c}),H<c&&M++,ta(Math.round((H+M*A)*F)/F,c,Mg(c,R,t))&&M++):H<c&&M++);M<K;++M){const X=Math.round((H+M*A)*F)/F;if(S&&X>u)break;s.push({value:X})}return S&&b&&z!==u?s.length&&ta(s[s.length-1].value,u,Mg(u,R,t))?s[s.length-1].value=u:s.push({value:u}):(!S||z===u)&&s.push({value:z}),s}function Mg(t,e,{horizontal:s,minRotation:n}){const i=Gs(n),l=(s?Math.sin(i):Math.cos(i))||.001,c=.75*e*(""+t).length;return Math.min(e/l,c)}class gS extends si{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return $e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:l}=this;const c=h=>i=s?i:h,u=h=>l=n?l:h;if(e){const h=Ls(i),m=Ls(l);h<0&&m<0?u(0):h>0&&m>0&&c(0)}if(i===l){let h=l===0?1:Math.abs(l*.05);u(l+h),e||c(i-h)}this.min=i,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},l=this._range||this,c=pS(i,l);return e.bounds==="ticks"&&h_(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Uu(e,this.chart.options.locale,this.options.ticks.format)}}class xS extends gS{static id="linear";static defaults={ticks:{callback:Zx.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Tt(e)?e:0,this.max=Tt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Gs(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,l.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Rl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys(Rl);function Og(t,e){return t-e}function Lg(t,e){if($e(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:l}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),Tt(c)||(c=typeof n=="string"?s.parse(c,n):s.parse(c)),c===null?null:(i&&(c=i==="week"&&(da(l)||l===!0)?s.startOf(c,"isoWeek",l):s.startOf(c,i)),+c)}function Fg(t,e,s,n){const i=Wt.length;for(let l=Wt.indexOf(t);l<i-1;++l){const c=Rl[Wt[l]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((s-e)/(u*c.size))<=n)return Wt[l]}return Wt[i-1]}function yS(t,e,s,n,i){for(let l=Wt.length-1;l>=Wt.indexOf(s);l--){const c=Wt[l];if(Rl[c].common&&t._adapter.diff(i,n,c)>=e-1)return c}return Wt[s?Wt.indexOf(s):0]}function bS(t){for(let e=Wt.indexOf(t)+1,s=Wt.length;e<s;++e)if(Rl[Wt[e]].common)return Wt[e]}function Ig(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=zu(s,e),l=s[n]>=e?s[n]:s[i];t[l]=!0}}function vS(t,e,s,n){const i=t._adapter,l=+i.startOf(e[0].value,n),c=e[e.length-1].value;let u,h;for(u=l;u<=c;u=+i.add(u,1,n))h=s[u],h>=0&&(e[h].major=!0);return e}function zg(t,e,s){const n=[],i={},l=e.length;let c,u;for(c=0;c<l;++c)u=e[c],i[u]=c,n.push({value:u,major:!1});return l===0||!s?n:vS(t,n,i,s)}class Bg extends si{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new GN._date(e.adapters.date);i.init(s),ea(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Lg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:l,minDefined:c,maxDefined:u}=this.getUserBounds();function h(m){!c&&!isNaN(m.min)&&(i=Math.min(i,m.min)),!u&&!isNaN(m.max)&&(l=Math.max(l,m.max))}(!c||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=Tt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),l=Tt(l)&&!isNaN(l)?l:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,l-1),this.max=Math.max(i+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const l=this.min,c=this.max,u=x_(i,l,c);return this._unit=s.unit||(n.autoSkip?Fg(s.minUnit,this.min,this.max,this._getLabelCapacity(l)):yS(this,u.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:bS(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),zg(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,l;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?n=l:n=(l-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;s=Pt(s,0,c),n=Pt(n,0,c),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,l=i.time,c=l.unit||Fg(l.minUnit,s,n,this._getLabelCapacity(s)),u=Re(i.ticks.stepSize,1),h=c==="week"?l.isoWeekday:!1,m=da(h)||h===!0,p={};let x=s,b,w;if(m&&(x=+e.startOf(x,"isoWeek",h)),x=+e.startOf(x,m?"day":c),e.diff(n,s,c)>1e5*u)throw new Error(s+" and "+n+" are too far apart with stepSize of "+u+" "+c);const j=i.ticks.source==="data"&&this.getDataTimestamps();for(b=x,w=0;b<n;b=+e.add(b,u,c),w++)Ig(p,b,j);return(b===n||i.bounds==="ticks"||w===1)&&Ig(p,b,j),Object.keys(p).sort(Og).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,l=this._unit,c=s||i[l];return this._adapter.format(e,c)}_tickFormatFunction(e,s,n,i){const l=this.options,c=l.ticks.callback;if(c)return Qe(c,[e,s,n],this);const u=l.time.displayFormats,h=this._unit,m=this._majorUnit,p=h&&u[h],x=m&&u[m],b=n[s],w=m&&x&&b&&b.major;return this._adapter.format(e,i||(w?x:p))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Gs(this.isHorizontal()?s.maxRotation:s.minRotation),l=Math.cos(i),c=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:n*l+u*c,h:n*c+u*l}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,l=this._tickFormatFunction(e,0,zg(this,[e],this._majorUnit),i),c=this._getLabelSize(l),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(Lg(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Qx(e.sort(Og))}}function Wo(t,e,s){let n=0,i=t.length-1,l,c,u,h;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=sr(t,"pos",e)),{pos:l,time:u}=t[n],{pos:c,time:h}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=sr(t,"time",e)),{time:l,pos:u}=t[n],{time:c,pos:h}=t[i]);const m=c-l;return m?u+(h-u)*(e-l)/m:u}class AC extends Bg{static id="timeseries";static defaults=Bg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Wo(s,this.min),this._tableRange=Wo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],l=[];let c,u,h,m,p;for(c=0,u=e.length;c<u;++c)m=e[c],m>=s&&m<=n&&i.push(m);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(c=0,u=i.length;c<u;++c)p=i[c+1],h=i[c-1],m=i[c],Math.round((p+h)/2)!==m&&l.push({time:m,pos:c/(u-1)});return l}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,l)=>i-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Wo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Wo(this._table,n*this._tableRange+this._minPos,!0)}}const D0="label";function $g(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function wS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function M0(t,e){t.labels=e}function O0(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D0;const n=[];t.datasets=e.map(i=>{const l=t.datasets.find(c=>c[s]===i[s]);return!l||!i.data||n.includes(l)?{...i}:(n.push(l),Object.assign(l,i),l)})}function jS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D0;const s={labels:[],datasets:[]};return M0(s,t.labels),O0(s,t.datasets,e),s}function _S(t,e){const{height:s=150,width:n=300,redraw:i=!1,datasetIdKey:l,type:c,data:u,options:h,plugins:m=[],fallbackContent:p,updateMode:x,...b}=t,w=N.useRef(null),j=N.useRef(null),v=()=>{w.current&&(j.current=new Pl(w.current,{type:c,data:jS(u,l),options:h&&{...h},plugins:m}),$g(e,j.current))},_=()=>{$g(e,null),j.current&&(j.current.destroy(),j.current=null)};return N.useEffect(()=>{!i&&j.current&&h&&wS(j.current,h)},[i,h]),N.useEffect(()=>{!i&&j.current&&M0(j.current.config.data,u.labels)},[i,u.labels]),N.useEffect(()=>{!i&&j.current&&u.datasets&&O0(j.current.config.data,u.datasets,l)},[i,u.datasets]),N.useEffect(()=>{j.current&&(i?(_(),setTimeout(v)):j.current.update(x))},[i,h,u.labels,u.datasets,x]),N.useEffect(()=>{j.current&&(_(),setTimeout(v))},[c]),N.useEffect(()=>(v(),()=>_()),[]),pa.createElement("canvas",{ref:w,role:"img",height:s,width:n,...b},p)}const NS=N.forwardRef(_S);function Qu(t,e){return Pl.register(e),N.forwardRef((s,n)=>pa.createElement(NS,{...s,ref:n,type:t}))}const kS=Qu("line",QN),SS=Qu("bar",YN),CS=Qu("doughnut",XN);Pl.register(mS,xS,jk,Al,Ek,sS,dS,eS,hk,Kk);const ir={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",cornerRadius:8,displayColors:!1}}},ES=({data:t,loading:e=!1,title:s="Performance Trends"})=>{const n=N.useMemo(()=>!t||!t.length?null:{labels:t.map(c=>new Date(c.date||c.date_group||c.report_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Leads",data:t.map(c=>Number(c.leads||c.daily_leads||0)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"Spent (₹)",data:t.map(c=>Number(c.spent||c.daily_spent||0)),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,yAxisID:"y1"}]},[t]),i=N.useMemo(()=>({...ir,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Leads"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Spent (₹)"},grid:{drawOnChartArea:!1}}}}),[]);return e?o.jsx(Mu,{height:"h-80"}):n?o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-80",children:o.jsx(kS,{data:n,options:i})})]}):o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No data available"})]})},PS=({data:t,loading:e=!1,title:s="Top Campaigns"})=>{const n=N.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,10);return{labels:l.map(c=>{const u=c.campaign_name||c.name||`Campaign ${c.campaign_id}`;return u.length>20?`${u.substring(0,20)}...`:u}),datasets:[{label:"Leads",data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(168, 85, 247)"],borderWidth:1}]}},[t]),i=N.useMemo(()=>({...ir,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Leads"}},x:{title:{display:!0,text:"Campaigns"}}},plugins:{...ir.plugins,tooltip:{...ir.plugins.tooltip,callbacks:{title:l=>{const c=l[0].dataIndex;return t?.[c]?.campaign_name||`Campaign ${t?.[c]?.campaign_id}`},label:l=>{const c=l.dataIndex,u=t?.[c];return u?[`Leads: ${l.formattedValue}`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`CPL: ₹${Number(u.avgCostPerLead||u.avg_cost_per_lead||u.cost_per_lead||0).toFixed(2)}`,`Brand: ${u.brand||"Unknown"}`]:l.formattedValue}}}}}),[t]);return e?o.jsx(Mu,{height:"h-96"}):n?o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-96",children:o.jsx(SS,{data:n,options:i})})]}):o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"No campaign data available"})]})},AS=({data:t,loading:e=!1,title:s="Brand Performance"})=>{const n=N.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,8);return{labels:l.map(c=>c.brand||"Unknown"),datasets:[{data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)"],borderWidth:2}]}},[t]),i=N.useMemo(()=>({...ir,cutout:"60%",plugins:{...ir.plugins,tooltip:{...ir.plugins.tooltip,callbacks:{label:l=>{const c=l.dataIndex,u=t?.[c];if(!u)return l.formattedValue;const h=(l.parsed/l.dataset.data.reduce((m,p)=>m+p,0)*100).toFixed(1);return[`${u.brand||"Unknown"}: ${l.formattedValue} leads (${h}%)`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`Campaigns: ${u.campaignsCount||u.campaigns_count||0}`]}}}}}),[t]);return e?o.jsx(Mu,{height:"h-80"}):n?o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-80",children:o.jsx(CS,{data:n,options:i})})]}):o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),o.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No brand data available"})]})};class TS{constructor(){this.cache=new Map,this.timestamps=new Map,this.defaultTTL=300*1e3}generateKey(e,s,n={}){const i=JSON.stringify(n,Object.keys(n).sort());return`${e}_${s}_${i}`}set(e,s,n=this.defaultTTL){this.cache.set(e,s),this.timestamps.set(e,Date.now()+n)}get(e){const s=this.timestamps.get(e);return!s||Date.now()>s?(this.cache.delete(e),this.timestamps.delete(e),null):this.cache.get(e)}has(e){return this.get(e)!==null}delete(e){this.cache.delete(e),this.timestamps.delete(e)}clear(){this.cache.clear(),this.timestamps.clear()}cleanup(){const e=Date.now();for(const[s,n]of this.timestamps.entries())e>n&&(this.cache.delete(s),this.timestamps.delete(s))}getStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys()),memoryUsage:this.estimateMemoryUsage()}}estimateMemoryUsage(){let e=0;for(const[s,n]of this.cache.entries())e+=s.length*2,e+=JSON.stringify(n).length*2;return e}}const Vt=new TS,RS=(t,e)=>{const s={};return Object.keys(t).forEach(n=>{typeof t[n]=="function"?s[n]=async(...i)=>{const l=i[0]||{},c=Vt.generateKey(e,n,l),u=Vt.get(c);if(u)return console.log(`[Cache] Hit for ${e}.${n}`),u;console.log(`[Cache] Miss for ${e}.${n} - fetching...`);try{const h=await t[n](...i);let m=Vt.defaultTTL;return n==="getDashboardOverview"?m=120*1e3:n==="getRecentActivities"?m=60*1e3:n.includes("Trends")&&(m=600*1e3),Vt.set(c,h,m),h}catch(h){throw console.error(`[Cache] Error fetching ${e}.${n}:`,h),h}}:s[n]=t[n]}),s},DS={all:()=>{Vt.clear(),console.log("[Cache] Cleared all dashboard cache")},overview:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("getDashboardOverview")&&Vt.delete(e)}),console.log("[Cache] Cleared overview cache")},campaigns:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Campaign")&&Vt.delete(e)}),console.log("[Cache] Cleared campaign cache")},brands:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Brand")&&Vt.delete(e)}),console.log("[Cache] Cleared brand cache")},activities:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Activities")&&Vt.delete(e)}),console.log("[Cache] Cleared activities cache")}},MS=async t=>{console.log("[Cache] Preloading critical dashboard data...");const e=[t.getDashboardOverview(),t.getRecentActivities({limit:10}),t.getCampaignPerformance({limit:5})];try{await Promise.allSettled(e),console.log("[Cache] Critical data preloaded successfully")}catch(s){console.warn("[Cache] Some preload operations failed:",s)}};setInterval(()=>{Vt.cleanup(),console.log("[Cache] Cleaned up expired entries")},600*1e3);const OS=()=>{const t=new Set,e=new Map;return{register:(s,n,i)=>{if(t.has(s))return;const l=new IntersectionObserver(c=>{c.forEach(u=>{u.isIntersecting&&!t.has(s)&&(console.log(`[LazyLoad] Loading chart: ${s}`),i(),t.add(s),l.disconnect(),e.delete(s))})},{rootMargin:"50px",threshold:.1});l.observe(n),e.set(s,l)},forceLoad:(s,n)=>{if(!t.has(s)){console.log(`[LazyLoad] Force loading chart: ${s}`),n(),t.add(s);const i=e.get(s);i&&(i.disconnect(),e.delete(s))}},isLoaded:s=>t.has(s),cleanup:()=>{e.forEach(s=>s.disconnect()),e.clear(),t.clear()}}},LS=()=>{const t=dr(),{user:e}=Eu(),s=N.useMemo(()=>RS(Aj,"dashboardService"),[]),n=N.useMemo(()=>OS(),[]),[i,l]=N.useState("overview"),[c,u]=N.useState(null),[h,m]=N.useState(null),[p,x]=N.useState(null),[b,w]=N.useState(null),[j,v]=N.useState([]),[_,C]=N.useState(!1),[S,E]=N.useState(!1),[R,A]=N.useState({overview:!0,trends:!0,campaigns:!0,brands:!0,activities:!0}),[F,H]=N.useState(null),[z,K]=N.useState(new Date),W=N.useCallback(async()=>{try{A(L=>({...L,overview:!0}));const P=await s.getDashboardOverview();if(P.success)u(P.data),H(null);else throw new Error(P.message||"Failed to load dashboard data")}catch(P){console.error("Dashboard overview error:",P),P.response?.status!==401&&P.response?.status!==403&&H(P.message||"Unable to load dashboard data"),u({overview:{campaignsCount:0,totalLeads:0,totalSpent:0,avgCostPerLead:0},dailyComparison:{changes:{leadsChange:0,spentChange:0}},topCampaigns:[],brandPerformance:[]})}finally{A(P=>({...P,overview:!1}))}},[s]),M=N.useCallback(async()=>{try{A(L=>({...L,trends:!0}));const P=await s.getTrendsData({period:"30d"});P.success&&m(P.data?.series||[])}catch(P){console.error("Trends data error:",P),m([])}finally{A(P=>({...P,trends:!1}))}},[s]),X=N.useCallback(async()=>{try{A(L=>({...L,campaigns:!0}));const P=await s.getCampaignPerformance({limit:10});P.success&&x(P.data?.campaigns||[])}catch(P){console.error("Campaign data error:",P),x([])}finally{A(P=>({...P,campaigns:!1}))}},[s]),$=N.useCallback(async()=>{try{A(L=>({...L,brands:!0}));const P=await s.getBrandPerformance({limit:8});P.success&&w(P.data?.brands||[])}catch(P){console.error("Brand data error:",P),w([])}finally{A(P=>({...P,brands:!1}))}},[s]),re=N.useCallback(async()=>{try{A(L=>({...L,activities:!0}));const P=await s.getRecentActivities({limit:10});P.success?v(P.data?.activities||[]):v([{id:1,type:"report_generated",title:"Campaign Report Generated",description:"Monthly performance report for TK TAMIL campaign",timestamp:new Date(Date.now()-1e3*60*15).toISOString(),user:"System",status:"success"},{id:2,type:"user_login",title:"User Login",description:"User logged into dashboard",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),user:e?.username||"User",status:"success"},{id:3,type:"data_refresh",title:"Data Refreshed",description:"Dashboard data updated automatically",timestamp:new Date(Date.now()-1e3*60*45).toISOString(),user:"System",status:"success"},{id:4,type:"campaign_updated",title:"Campaign Modified",description:"TK TAMIL campaign settings updated",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),user:e?.username||"User",status:"success"},{id:5,type:"analytics_view",title:"Analytics Accessed",description:"Performance analytics page viewed",timestamp:new Date(Date.now()-1e3*60*60*3).toISOString(),user:e?.username||"User",status:"success"}])}catch(P){console.error("Activities error:",P),v([{id:1,type:"report_generated",title:"System Report",timestamp:new Date().toISOString(),user:"System",status:"success"}])}finally{A(P=>({...P,activities:!1}))}},[s,e]),le=N.useCallback(async()=>{DS.all(),K(new Date),await Promise.all([W(),M(),X(),$(),re()]),Pj.success("Dashboard refreshed successfully!")},[W,M,X,$,re]);N.useEffect(()=>{MS(s).then(()=>{W(),M(),X(),$(),re()})},[W,M,X,$,re,s]),N.useEffect(()=>{const P=setInterval(le,3e5);return()=>clearInterval(P)},[le]),N.useEffect(()=>()=>{n.cleanup()},[n]);const V=P=>{switch(P){case"create_campaign":t("/campaigns?action=create");break;case"generate_report":t("/reports?action=generate");break;case"view_analytics":t("/report-analytics");break;case"manage_users":t("/user-management");break;case"export_data":t("/reports?action=export");break;default:console.log(`Action: ${P}`)}},Z=c?.overview||{},se=(c?.dailyComparison||{}).changes||{},te=[{id:"overview",name:"Overview",icon:ts},{id:"trends",name:"Trends",icon:qr},{id:"campaigns",name:"Campaigns",icon:js},{id:"brands",name:"Brands",icon:Tx},{id:"activity",name:"Activity",icon:iu}];return o.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome back, ",e?.username||"User","!"]}),o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="overview"?"Dashboard overview and key metrics":i==="trends"?"Performance trends over time":i==="campaigns"?"Top performing campaigns":i==="brands"?"Brand performance analysis":"Recent system activity"})]}),o.jsxs("div",{className:"mt-3 lg:mt-0 flex items-center space-x-3",children:[o.jsxs("div",{className:"text-xs text-gray-500",children:["Updated: ",z.toLocaleTimeString()]}),o.jsxs("button",{onClick:le,className:"btn-secondary flex items-center space-x-2 text-sm px-3 py-2",disabled:Object.values(R).some(Boolean),children:[o.jsx(Kt,{className:`h-3 w-3 ${Object.values(R).some(Boolean)?"animate-spin":""}`}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:te.map(P=>{const L=P.icon;return o.jsxs("button",{onClick:()=>l(P.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===P.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(L,{className:"h-4 w-4"}),o.jsx("span",{children:P.name})]},P.id)})})}),F&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start space-x-3",children:[o.jsx(au,{className:"h-4 w-4 text-yellow-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Data Loading Issue"}),o.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:F})]})]}),o.jsxs("div",{className:"space-y-6",children:[i==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[o.jsx(To,{title:"Campaigns",value:Z.campaignsCount,icon:js,color:"bg-blue-500",loading:R.overview,onClick:()=>t("/campaigns"),className:"text-sm"}),o.jsx(To,{title:"Total Leads",value:Z.totalLeads,previousValue:Z.totalLeads-(se.leadsChange||0),icon:An,color:"bg-green-500",format:"compact",loading:R.overview,onClick:()=>t("/reports"),className:"text-sm"}),o.jsx(To,{title:"Total Spent",value:Z.totalSpent,previousValue:Z.totalSpent-(se.spentChange||0),icon:O1,color:"bg-purple-500",format:"currency",loading:R.overview,onClick:()=>t("/report-analytics"),className:"text-sm"}),o.jsx(To,{title:"Avg Cost/Lead",value:Z.avgCostPerLead,icon:qr,color:"bg-orange-500",format:"currency",precision:2,loading:R.overview,className:"text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>V("create_campaign"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group",children:[o.jsx(mt,{className:"h-6 w-6 text-gray-400 group-hover:text-blue-500 mb-2"}),o.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-blue-700 text-center",children:"Create Campaign"})]}),o.jsxs("button",{onClick:()=>V("generate_report"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all duration-200 group",children:[o.jsx(or,{className:"h-6 w-6 text-gray-400 group-hover:text-green-500 mb-2"}),o.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-green-700 text-center",children:"Generate Report"})]}),o.jsxs("button",{onClick:()=>V("view_analytics"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group",children:[o.jsx(ts,{className:"h-6 w-6 text-gray-400 group-hover:text-purple-500 mb-2"}),o.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-purple-700 text-center",children:"View Analytics"})]}),o.jsxs("button",{onClick:()=>V("export_data"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all duration-200 group",children:[o.jsx(Au,{className:"h-6 w-6 text-gray-400 group-hover:text-orange-500 mb-2"}),o.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-orange-700 text-center",children:"Export Data"})]})]})]}),o.jsx(wp,{activities:j,loading:R.activities,title:"Recent Activity",compact:!0,maxVisible:3})]})]}),i==="trends"&&o.jsx("div",{className:"space-y-6",children:o.jsx(ES,{data:h,loading:R.trends,title:"30-Day Performance Trends"})}),i==="campaigns"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx(PS,{data:p,loading:R.campaigns,title:"Campaign Performance"}),p&&p.length>0&&o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Details"}),o.jsxs("div",{className:"space-y-3",children:[(_?p:p.slice(0,5)).map((P,L)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:P.campaign_name||`Campaign ${P.campaign_id}`}),o.jsxs("p",{className:"text-sm text-gray-600",children:[P.totalLeads||P.total_leads||0," leads • ₹",Number(P.totalSpent||P.total_spent||0).toLocaleString("en-IN")," spent"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(P.avgCostPerLead||P.avg_cost_per_lead||0).toFixed(2)]}),o.jsx("p",{className:"text-xs text-gray-500",children:"cost/lead"})]})]},P.campaign_id||L)),p.length>5&&o.jsx("button",{onClick:()=>C(!_),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:_?"Show Less":`Show ${p.length-5} More`})]})]})]}),i==="brands"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx(AS,{data:b,loading:R.brands,title:"Brand Performance Distribution"}),b&&b.length>0&&o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Brand Details"}),o.jsxs("div",{className:"space-y-3",children:[(S?b:b.slice(0,5)).map((P,L)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:P.brand||"Unknown Brand"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[P.totalLeads||P.total_leads||0," leads •",P.campaignsCount||P.campaigns_count||0," campaigns"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(P.totalSpent||P.total_spent||0).toLocaleString("en-IN")]}),o.jsx("p",{className:"text-xs text-gray-500",children:"total spent"})]})]},P.brand||L)),b.length>5&&o.jsx("button",{onClick:()=>E(!S),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:S?"Show Less":`Show ${b.length-5} More`})]})]})]}),i==="activity"&&o.jsx("div",{className:"space-y-6",children:o.jsx(wp,{activities:j,loading:R.activities,title:"Recent System Activity"})})]})]})},Os={getAllRoles:async()=>{try{return(await ae.get("/permissions/roles-list")).data}catch(t){throw console.error("Error fetching roles:",t),t}},getAllRolesWithPermissions:async()=>{try{const t=await ae.get("/permissions/roles-list"),e=t.data.data||t.data,s=await Promise.all(e.map(async n=>{try{const i=await ae.get(`/permissions/role/${n.id}/permissions`),l=i.data.data||i.data.permissions||[];return{...n,permissions:l}}catch(i){return console.error(`Error fetching permissions for role ${n.id}:`,i),{...n,permissions:[]}}}));return{...t.data,data:s}}catch(t){throw console.error("Error fetching roles with permissions:",t),t}},getAllModules:async()=>{try{return(await ae.get("/permissions/modules")).data}catch(t){throw console.error("Error fetching modules:",t),t}},getModulesWithPermissions:async()=>{try{return(await ae.get("/permissions/modules-with-permissions")).data}catch(t){throw console.error("Error fetching modules with permissions:",t),t}},getAllPermissions:async()=>{try{return(await ae.get("/permissions")).data}catch(t){throw console.error("Error fetching permissions:",t),t}},getRolePermissions:async t=>{try{return(await ae.get(`/permissions/role/${t}/permissions`)).data}catch(e){throw console.error("Error fetching role permissions:",e),e}},getUserRoles:async t=>{try{return(await ae.get(`/permissions/user/${t}/roles`)).data}catch(e){throw console.error("Error fetching user roles:",e),e}},getUserPermissions:async t=>{try{return(await ae.get(`/permissions/user/${t}`)).data}catch(e){throw console.error("Error fetching user permissions:",e),e}},checkUserPermission:async(t,e)=>{try{return(await ae.post("/permissions/check",{user_id:t,permission_key:e})).data}catch(s){throw console.error("Error checking user permission:",s),s}},createRole:async t=>{try{return(await ae.post("/permissions/role",t)).data}catch(e){throw console.error("Error creating role:",e),e}},createRoleWithPermissions:async(t,e,s=[])=>{try{const n=await ae.post("/permissions/role",{name:t,description:e}),i=n.data.data?.id||n.data.data?.roleId;return s.length>0&&i&&await ae.post("/permissions/role/assign",{roleId:i,permissions:s}),n.data}catch(n){throw console.error("Error creating role with permissions:",n),n}},assignPermissionsToRole:async(t,e)=>{try{return(await ae.post("/permissions/role/assign",{roleId:t,permissions:e})).data}catch(s){throw console.error("Error assigning permissions to role:",s),s}},updateRole:async(t,e)=>{try{const s={role_name:e.name,description:e.description,is_active:e.is_active!==void 0?e.is_active:!0};return(await ae.put(`/permissions/roles/${t}`,s)).data}catch(s){throw console.error("Error updating role:",s),s}},updateRoleWithPermissions:async(t,e,s,n=[])=>{try{const i=await ae.put(`/permissions/roles/${t}`,{role_name:e,description:s});return n.length>=0&&await ae.post("/permissions/role/assign",{roleId:t,permissions:n}),i.data}catch(i){throw console.error("Error updating role with permissions:",i),i}},deleteRole:async t=>{try{return(await ae.delete(`/permissions/role/${t}`)).data}catch(e){throw console.error("Error deleting role:",e),e}},assignPermissionToRole:async(t,e)=>{try{return(await ae.post("/permissions/grant-role-permission",{role_id:t,permission_id:e})).data}catch(s){throw console.error("Error assigning permission to role:",s),s}},revokePermissionFromRole:async(t,e)=>{try{return(await ae.delete("/permissions/revoke-role-permission",{data:{role_id:t,permission_id:e}})).data}catch(s){throw console.error("Error revoking permission from role:",s),s}},assignUserToRole:async(t,e)=>{try{return(await ae.post("/permissions/assign-role",{user_id:t,role_id:e})).data}catch(s){throw console.error("Error assigning user to role:",s),s}},removeUserFromRole:async(t,e)=>{try{return(await ae.delete("/permissions/revoke-role",{data:{user_id:t,role_id:e}})).data}catch(s){throw console.error("Error removing user from role:",s),s}},getAuditLogs:async(t={})=>{try{return(await ae.get("/permissions/audit",{params:t})).data}catch(e){throw console.error("Error fetching audit logs:",e),e}}},Ug=()=>{const[t,e]=N.useState([]),[s,n]=N.useState([]),[i,l]=N.useState(!0),[c,u]=N.useState(null),[h,m]=N.useState(!1),[p,x]=N.useState(!1),[b,w]=N.useState(null),[j,v]=N.useState(""),[_,C]=N.useState(""),[S,E]=N.useState({}),[R,A]=N.useState(""),[F,H]=N.useState(""),[z,K]=N.useState({}),[W,M]=N.useState(""),[X,$]=N.useState(""),[re,le]=N.useState(null),V=N.useCallback(q=>{const be=["User Management","Role Management","Campaign Type","Campaign","Campaign Data","Cards","Cards Users","Report Analytics","Report"],Te=Pe=>({users:"User Management","user management":"User Management",campaigns:"Campaign",campaign_data:"Campaign Data","campaign-data":"Campaign Data",campaign_types:"Campaign Type","campaign-types":"Campaign Type",cards:"Cards",card_users:"Cards Users","card-users":"Cards Users",reports:"Report",report:"Report",permissions:"Role Management","role management":"Role Management",system:"Role Management"})[Pe.toLowerCase()]||Pe,Ne=Pe=>{const je=Te(Pe),Ue=be.indexOf(je);return Ue!==-1?Ue:999};return q.sort((Pe,je)=>{const Ue=Ne(Pe.name),dt=Ne(je.name);return Ue!==dt?Ue-dt:(Pe.name||"").localeCompare(je.name||"")})},[]),Z=N.useMemo(()=>V(s.filter(q=>q.name&&q.name.toLowerCase()!=="system")),[s,V]),G=N.useCallback(async()=>{try{l(!0),u(null),M("");const[q,be]=await Promise.all([Os.getAllRolesWithPermissions(),Os.getModulesWithPermissions()]),Ne=(q.data||q).map(Pe=>({...Pe,id:Pe.id||Pe.role_id,name:String(Pe.name||Pe.role_name||"").trim(),role_name:String(Pe.role_name||Pe.name||"").trim(),is_system_role:Pe.is_system_role===1||Pe.is_system_role===!0}));e(Ne),n(be.data||be)}catch(q){console.error("Error loading data:",q);const be=q.response?.data?.message||q.message||"Failed to load data";u(be),M(be)}finally{l(!1)}},[]);N.useEffect(()=>{G()},[G]);const se=N.useCallback(q=>{const be=String(q.name||q.role_name||"");A(be),H(q.description||"");const Te={};q.permissions&&q.permissions.length>0&&q.permissions.forEach(Ne=>{const Pe=Ne.permission_key||Ne.key;s.forEach(je=>{if(je.permissions&&je.permissions.length>0){const Ue=je.permissions.find(dt=>dt.key===Pe);Ue&&(Te[je.id]||(Te[je.id]=[]),Te[je.id].includes(Ue.key)||Te[je.id].push(Ue.key))}})}),K(Te)},[s]);N.useEffect(()=>{b&&s.length>0&&p&&se(b)},[s,b,p,se]);const te=N.useCallback(q=>{const be=[];return!q||!q.trim()?be.push("Role name is required"):((q.trim().length<3||q.trim().length>50)&&be.push("Role name must be between 3 and 50 characters"),/^[a-zA-Z0-9\s\-_]+$/.test(q.trim())||be.push("Role name can only contain letters, numbers, spaces, hyphens, and underscores")),be},[]),P=N.useCallback(q=>q&&q.trim().length>255?["Description cannot exceed 255 characters"]:[],[]),L=N.useCallback(q=>{console.error("RBAC Error:",q),m(!1),x(!1),w(null),v(""),C(""),E({}),A(""),H(""),K({});const be=q.response?.data;le({message:be?.message||q.message,details:be?.details,userRole:be?.details?.userRole,requiredPermission:be?.details?.requiredPermission,availableActions:be?.details?.availableActions,suggestion:be?.details?.suggestion}),M(be?.message||q.message)},[]);N.useEffect(()=>{if(re){const q=setTimeout(()=>le(null),12e3);return()=>clearTimeout(q)}},[re]),N.useEffect(()=>{if(X){const q=setTimeout(()=>$(""),5e3);return()=>clearTimeout(q)}},[X]),N.useEffect(()=>{if(W){const q=setTimeout(()=>M(""),8e3);return()=>clearTimeout(q)}},[W]);const fe=N.useCallback(async()=>{try{M(""),$("");const q=te(j),be=P(_),Te=[...q,...be];if(Te.length>0){M(Te.join(". "));return}const Ne=[];Object.entries(S).forEach(([Pe,je])=>{je.forEach(Ue=>{Ne.push(Ue)})}),await Os.createRoleWithPermissions(j.trim(),_.trim(),Ne),v(""),C(""),E({}),m(!1),await G(),$("Role created successfully!")}catch(q){console.error("Error creating role:",q),q.response?.status===403?L(q):q.response?.status===409?M("A role with this name already exists. Please choose a different name."):q.response?.status===400?M("Invalid role data. Please check your inputs."):M(`Error creating role: ${q.response?.data?.message||q.message}`)}},[j,_,S,te,P,G,L]),me=N.useCallback(async()=>{try{M(""),$("");const q=te(R),be=P(F),Te=[...q,...be];if(Te.length>0){M(Te.join(". "));return}const Ne=[];Object.entries(z).forEach(([Pe,je])=>{je.forEach(Ue=>{Ne.push(Ue)})}),await Os.updateRoleWithPermissions(b.id,R.trim(),F.trim(),Ne),A(""),H(""),K({}),x(!1),w(null),await G(),$("Role updated successfully!")}catch(q){if(console.error("Error updating role:",q),q.response?.status===403){const be=q.response?.data;be?.details?.requiredPermission||be?.message?.includes("permission")?L(q):M("Cannot update this role: It is a system role.")}else q.response?.status===409?M("A role with this name already exists. Please choose a different name."):q.response?.status===400?M("Invalid role data. Please check your inputs."):M(`Error updating role: ${q.response?.data?.message||q.message}`)}},[R,F,z,b,te,P,G,L]),I=N.useCallback(async(q,be,Te)=>{if(Te){M(`Cannot delete "${be}" because it is a system role.`);return}if(window.confirm(`Are you sure you want to delete the role "${be}"?`))try{M(""),await Os.deleteRole(q),await G(),$("Role deleted successfully!")}catch(Ne){if(console.error("Error deleting role:",Ne),Ne.response?.status===403){const Pe=Ne.response?.data;Pe?.details?.requiredPermission||Pe?.message?.includes("permission")?L(Ne):M("Cannot delete this role: It is a system role or has restrictions.")}else Ne.response?.status===400?M("Cannot delete this role: It may be assigned to active users."):M(`Error deleting role: ${Ne.response?.data?.message||Ne.message}`)}},[G,L]),J=N.useCallback((q,be,Te)=>{E(Ne=>{const Pe=Ne[q]||[];return Te?{...Ne,[q]:[...Pe,be]}:{...Ne,[q]:Pe.filter(je=>je!==be)}})},[]),ue=N.useCallback((q,be,Te)=>{E(Ne=>Te?{...Ne,[q]:be.map(Pe=>Pe.key)}:{...Ne,[q]:[]})},[]),ge=N.useCallback((q,be,Te)=>{K(Ne=>{const Pe=Ne[q]||[];return Te?{...Ne,[q]:[...Pe,be]}:{...Ne,[q]:Pe.filter(je=>je!==be)}})},[]),Le=N.useCallback((q,be,Te)=>{K(Ne=>Te?{...Ne,[q]:be.map(Pe=>Pe.key)}:{...Ne,[q]:[]})},[]),ot=N.useCallback(q=>!q||q.length===0?"No permissions assigned":q.map(be=>be.permission_name||be.name||be).join(", "),[]),ye=N.useCallback(()=>{m(!1),v(""),C(""),E({}),M("")},[]),ze=N.useCallback(()=>{x(!1),w(null),A(""),H(""),K({}),M("")},[]),ss=N.useCallback(q=>{q.key==="Escape"&&(h?ye():p&&ze())},[h,p,ye,ze]);return N.useEffect(()=>{if(h||p)return document.addEventListener("keydown",ss),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",ss),document.body.style.overflow="unset"}},[h,p,ss]),i?o.jsx("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:o.jsxs("div",{className:"inline-flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),"Loading role management interface..."]})}):c?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:o.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",c]})}),o.jsx("button",{className:"btn-primary",onClick:G,children:"Retry"})]}):o.jsxs("div",{className:"p-6",children:[re&&o.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 rounded-lg p-6 shadow-lg",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.94-.833-2.31 0L4.504 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-red-700 font-medium text-base mb-3",children:re.message}),re.details&&o.jsxs("div",{className:"bg-red-50 rounded-md p-4 border border-red-200 space-y-2",children:[re.userRole&&o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-red-800",children:"Current Role:"}),o.jsx("span",{className:"text-red-700 ml-2",children:re.userRole})]}),re.requiredPermission&&o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-red-800",children:"Required Permission:"}),o.jsx("span",{className:"text-red-700 ml-2",children:re.requiredPermission})]}),re.suggestion&&o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-red-800",children:"Suggestion:"}),o.jsx("span",{className:"text-red-700 ml-2",children:re.suggestion})]}),re.availableActions&&re.availableActions.length>0&&o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-red-800",children:"Available Actions:"}),o.jsx("span",{className:"text-red-700 ml-2",children:re.availableActions.join(", ")})]})]})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx("button",{className:"text-red-400 hover:text-red-600 transition-colors",onClick:()=>le(null),"aria-label":"Dismiss error message",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),X&&o.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:o.jsx("p",{className:"text-green-600",children:X})}),W&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsx("p",{className:"text-red-600",children:W})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),o.jsx("button",{className:"btn-primary",onClick:()=>m(!0),"aria-label":"Create new role",children:"Create Role"})]}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No roles found"})}):t.map(q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 role-name-display",children:q.name}),q.is_system_role&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:q.description||"No description"}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:o.jsx("div",{className:"max-w-xs truncate",children:ot(q.permissions)})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[o.jsx("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>{w(q),x(!0)},"aria-label":`Edit role ${q.name}`,children:"Edit"}),o.jsx("button",{className:`text-xs px-3 py-1 ${q.is_system_role?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-danger"}`,onClick:()=>I(q.id,q.name,q.is_system_role),disabled:q.is_system_role,title:q.is_system_role?"System roles cannot be deleted":"Delete this role","aria-label":`Delete role ${q.name}`,children:"Delete"})]})]},q.id))})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[o.jsxs("div",{children:[o.jsx("h3",{id:"create-modal-title",className:"text-xl font-bold text-gray-900",children:"Create New Role"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions and access levels"})]}),o.jsx("button",{className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all",onClick:ye,"aria-label":"Close modal",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[o.jsx("div",{className:"w-80 border-r border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"new-role-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role Name *"}),o.jsx("input",{id:"new-role-name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:j,onChange:q=>v(q.target.value),placeholder:"Enter role name",maxLength:50,"aria-required":"true"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"new-role-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{id:"new-role-description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:_,onChange:q=>C(q.target.value),placeholder:"Enter role description",rows:"4",maxLength:255})]}),o.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Permission Summary"}),o.jsx("div",{className:"space-y-2",children:Z.map(q=>{const be=S[q.id]||[],Te=q.permissions?q.permissions.length:0;return o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-gray-600",children:q.name}),o.jsxs("span",{className:`font-medium ${be.length>0?"text-blue-600":"text-gray-400"}`,children:[be.length,"/",Te]})]},q.id)})})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Module Permissions"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the permissions for each module"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsx("div",{className:"space-y-6",children:Z.map(q=>{const be=S[q.id]||[],Te=q.permissions?q.permissions.map(je=>je.key):[],Ne=Te.length>0&&Te.every(je=>be.includes(je)),Pe=q.permissions?[...q.permissions].sort((je,Ue)=>{const dt=ee=>{const oe=ee.name.toLowerCase(),he=ee.key.toLowerCase();return oe.includes("view")||oe.includes("get")||oe.includes("read")||he.includes("view")||he.includes("get")?1:oe.includes("add")||oe.includes("create")||he.includes("add")||he.includes("create")?2:oe.includes("update")||oe.includes("edit")||oe.includes("modify")||he.includes("update")||he.includes("edit")?3:oe.includes("delete")||oe.includes("remove")||he.includes("delete")||he.includes("remove")?4:5};return dt(je)-dt(Ue)}):[];return o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50 rounded-t-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${be.length>0?"bg-blue-500":"bg-gray-300"}`}),o.jsx("h5",{className:"font-semibold text-gray-900",children:q.name}),o.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[be.length,"/",Te.length]})]}),o.jsx("button",{type:"button",className:`text-xs px-4 py-2 rounded-full border transition-all font-medium ${Ne?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>ue(q.id,q.permissions,!Ne),"aria-label":`${Ne?"Deselect":"Select"} all permissions for ${q.name}`,children:Ne?"Deselect All":"Select All"})]}),o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Pe.map(je=>o.jsxs("label",{className:"flex items-start space-x-3 p-3 hover:bg-blue-50 rounded-lg border border-transparent hover:border-blue-200 transition-all cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors",checked:S[q.id]?.includes(je.key)||!1,onChange:Ue=>J(q.id,je.key,Ue.target.checked),"aria-describedby":je.description?`${q.id}-${je.key}-desc`:void 0}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-900",children:je.name}),je.description&&o.jsx("p",{id:`${q.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`${q.id}-${je.key}`))})})]},q.id)})})})]})]}),o.jsxs("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50 space-x-3",children:[o.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:ye,children:"Cancel"}),o.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:fe,disabled:!j.trim(),children:"Create Role"})]})]})}),p&&b&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-modal-title",children:o.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("h3",{id:"edit-modal-title",className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",b.name]}),b.is_system_role&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System Role"})]}),o.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",onClick:ze,"aria-label":"Close modal",children:"×"})]}),o.jsxs("div",{className:"p-6",children:[b.is_system_role&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",role:"alert",children:o.jsxs("p",{className:"text-blue-800 text-sm",children:[o.jsx("strong",{children:"System Role:"})," This role cannot be modified as it is required for system functionality. You can view the role details but cannot make changes."]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"edit-role-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),o.jsx("input",{id:"edit-role-name",type:"text",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:R,onChange:q=>A(q.target.value),placeholder:"Enter role name",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:50,"aria-required":"true"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"edit-role-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{id:"edit-role-description",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:F,onChange:q=>H(q.target.value),placeholder:"Enter role description",rows:"3",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:255})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),o.jsx("div",{className:"h-96 overflow-y-auto border border-gray-200 rounded-md p-4 bg-gray-50",children:Z.map(q=>{const be=z[q.id]||[],Te=q.permissions?q.permissions.map(je=>je.key):[],Ne=Te.length>0&&Te.every(je=>be.includes(je)),Pe=q.permissions?[...q.permissions].sort((je,Ue)=>{const dt=ee=>{const oe=ee.name.toLowerCase(),he=ee.key.toLowerCase();return oe.includes("view")||oe.includes("get")||oe.includes("read")||he.includes("view")||he.includes("get")?1:oe.includes("add")||oe.includes("create")||he.includes("add")||he.includes("create")?2:oe.includes("update")||oe.includes("edit")||oe.includes("modify")||he.includes("update")||he.includes("edit")?3:oe.includes("delete")||oe.includes("remove")||he.includes("delete")||he.includes("remove")?4:5};return dt(je)-dt(Ue)}):[];return o.jsxs("div",{className:`mb-6 last:mb-0 bg-white rounded-lg border border-gray-200 p-4 ${b.is_system_role?"opacity-75":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:q.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:[be.length," of ",Te.length," selected"]}),!b.is_system_role&&o.jsx("button",{type:"button",className:`text-xs px-3 py-1 rounded border transition-colors font-medium ${Ne?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100"}`,onClick:()=>Le(q.id,q.permissions,!Ne),"aria-label":`${Ne?"Deselect":"Select"} all permissions for ${q.name}`,children:Ne?"Deselect All":"Select All"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Pe.map(je=>o.jsxs("label",{className:`flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-md border border-transparent hover:border-gray-200 transition-colors ${b.is_system_role?"cursor-not-allowed":"cursor-pointer"}`,children:[o.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:z[q.id]?.includes(je.key)||!1,onChange:Ue=>ge(q.id,je.key,Ue.target.checked),disabled:b.is_system_role,"aria-describedby":je.description?`edit-${q.id}-${je.key}-desc`:void 0}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:je.name}),je.description&&o.jsx("p",{id:`edit-${q.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`edit-${q.id}-${je.key}`))})]},q.id)})})]})]}),o.jsxs("div",{className:"flex items-center justify-end p-4 border-t space-x-2",children:[o.jsx("button",{className:"btn-secondary px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:ze,children:"Cancel"}),!b.is_system_role&&o.jsx("button",{className:"btn-primary px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:me,disabled:!R.trim(),children:"Update Role"})]})]})})]})},L0={getAll:async(t={})=>(await ae.get("/user-management",{params:t})).data,getById:async t=>(await ae.get(`/user-management/${t}`)).data,getForDropdown:async()=>{const t=await ae.get("/user-management",{params:{limit:100,is_active:!0}});return t.data.success&&t.data.data?.users?{success:!0,data:t.data.data.users.map(e=>({id:e.id,name:e.username,username:e.username,is_active:e.is_active}))}:t.data},create:async t=>(await ae.post("/user-management",t)).data,update:async(t,e)=>(await ae.put(`/user-management/${t}`,e)).data,delete:async t=>(await ae.delete(`/user-management/${t}`)).data,toggleStatus:async t=>(await ae.patch(`/user-management/${t}/toggle-status`)).data,getRoles:async()=>{try{const t=await ae.get("/user-management/roles");return t.data.success&&t.data.data?.roles?{success:!0,data:{roles:t.data.data.roles.map(e=>({id:e.id,role_name:e.display_name||e.name,name:e.name,display_name:e.display_name||e.name,description:e.description,is_system_role:e.is_system_role}))}}:t.data}catch(t){console.error("Error fetching roles from user-management API:",t);try{const e=await ae.get("/permissions/roles-list");return e.data.success&&e.data.data?{success:!0,data:{roles:e.data.data.map(s=>({id:s.id,role_name:s.name,name:s.name,display_name:s.display_name||s.name,description:s.description,is_system_role:s.is_system_role}))}}:e.data}catch(e){throw console.error("Both user-management and permissions APIs failed:",e),t}}},checkUsername:async t=>(await ae.get(`/user-management/check/username/${t}`)).data},FS=({user:t,onManageRoles:e,loading:s})=>o.jsxs("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:t.username?.[0]?.toUpperCase()||"U"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:t.username}),o.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]}),o.jsxs("button",{onClick:()=>e(t),disabled:s,className:"btn-secondary text-sm",children:[o.jsx(Wr,{className:"h-4 w-4 mr-1"}),"Manage Roles"]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Roles:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles?.length>0?t.roles.map(n=>o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[n.name," ",o.jsxs("span",{className:"ml-1 text-xs",children:["L",n.level]})]},n.id)):o.jsx("span",{className:"text-xs text-gray-400",children:"No roles assigned"})})]})]}),IS=({user:t,isOpen:e,onClose:s,onSave:n,allRoles:i,loading:l})=>{const[c,u]=N.useState([]),[h,m]=N.useState([]),[p,x]=N.useState(!1);N.useEffect(()=>{t&&e&&b()},[t,e]);const b=async()=>{if(t?.id)try{x(!0);const _=(await Os.getUserRoles(t.id)).data||[];m(_),u(_.map(C=>C.id))}catch(v){console.error("Error fetching user roles:",v)}finally{x(!1)}},w=v=>{u(_=>_.includes(v)?_.filter(C=>C!==v):[..._,v])},j=async()=>{if(t?.id)try{x(!0);const v=h.map(S=>S.id),_=c.filter(S=>!v.includes(S)),C=v.filter(S=>!c.includes(S));for(const S of _)await Os.assignUserToRole(t.id,S);for(const S of C)await Os.removeUserFromRole(t.id,S);n()}catch(v){console.error("Error updating user roles:",v)}finally{x(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Manage Roles for ",t?.username]}),o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:o.jsx(yt,{className:"h-5 w-5"})})]}),p?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(ou,{className:"h-6 w-6 animate-spin text-gray-400"})}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Select roles for this user:"}),i.map(v=>o.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:c.includes(v.id),onChange:()=>w(v.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"font-medium text-gray-900",children:v.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Level ",v.level||1]}),v.description&&o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:v.description})]})]},v.id))]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:s,className:"btn-secondary",children:"Cancel"}),o.jsxs("button",{onClick:j,disabled:p,className:"btn-primary",children:[p&&o.jsx(ou,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}):null},zS=()=>{const[t,e]=N.useState([]),[s,n]=N.useState([]),[i,l]=N.useState(!0),[c,u]=N.useState(""),[h,m]=N.useState(""),[p,x]=N.useState(null),[b,w]=N.useState(!1);N.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0),u("");const S=await Os.getAllRoles(),E=S.data||S||[];n(E);let R=[];try{const F=await L0.getAll({limit:100});F.success&&F.data?.users?R=F.data.users:F.data&&Array.isArray(F.data)?R=F.data:(console.warn("Users response format unexpected:",F),R=[])}catch(F){console.warn("Failed to load users:",F),R=[]}const A=await Promise.all(R.map(async F=>{try{const H=await Os.getUserRoles(F.id);return{...F,roles:H.data||[]}}catch(H){return console.warn(`Error loading roles for user ${F.id}:`,H),{...F,roles:[]}}}));e(A)}catch(S){u(S.response?.data?.message||"Failed to load data"),console.error("Error loading data:",S)}finally{l(!1)}},v=N.useMemo(()=>t.filter(S=>S.username.toLowerCase().includes(h.toLowerCase())),[t,h]),_=S=>{x(S),w(!0)},C=()=>{w(!1),x(null),j()};return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(lu,{className:"h-7 w-7 text-primary-500 mr-2"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Role Management"})]})}),c&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:c}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Users & Their Roles"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search users...",value:h,onChange:S=>m(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:[v.length," users"]})]})]}),i?o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(ou,{className:"h-8 w-8 animate-spin text-gray-400"}),o.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.length===0?o.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:h?"No users found matching your search.":"No users available."}):v.map(S=>o.jsx(FS,{user:S,onManageRoles:_,loading:i},S.id))})]}),o.jsx(IS,{user:p,isOpen:b,onClose:()=>w(!1),onSave:C,allRoles:s,loading:i})]})},BS=({active:t,onClick:e,icon:s,children:n})=>o.jsxs("button",{onClick:e,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${t?"bg-primary-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[o.jsx(s,{className:"h-4 w-4 mr-2"}),n]}),$S=()=>{const[t,e]=N.useState("roles"),s=[{id:"roles",label:"Role Management",icon:Wr},{id:"user-roles",label:"User Roles",icon:An}],n=()=>{switch(t){case"roles":return o.jsx(Ug,{});case"user-roles":return o.jsx(zS,{});default:return o.jsx(Ug,{})}};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wr,{className:"h-8 w-8 text-primary-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role & Permission Management"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Manage roles, permissions, and user access"})]})]})}),o.jsx("div",{className:"flex space-x-2 mt-4",children:s.map(i=>o.jsx(BS,{active:t===i.id,onClick:()=>e(i.id),icon:i.icon,children:i.label},i.id))})]}),o.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:n()})]})},qo={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("API getAll params:",e);const s=await ae.get("/campaign-types",{params:e});return console.log("API getAll response:",s.data),s.data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await ae.get(`/campaign-types/${t}`);return console.log("API getById response:",e.data),e.data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("API create data:",t);const e=await ae.post("/campaign-types",t);return console.log("API create response:",e.data),e.data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("API update id:",t,"data:",e);const s=await ae.put(`/campaign-types/${t}`,e);return console.log("API update response:",s.data),s.data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("API delete id:",t);const e=await ae.delete(`/campaign-types/${t}`);return console.log("API delete response:",e.data),e.data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}}},Gu=({error:t,onDismiss:e,className:s="",dismissible:n=!0,variant:i="error"})=>{if(!t)return null;const c={error:{container:"bg-red-50 border-red-200",icon:"text-red-400",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-400",title:"text-amber-800",text:"text-amber-700"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",title:"text-blue-800",text:"text-blue-700"}}[i];let u="",h=i==="error"?"Error":i==="warning"?"Warning":"Information";return typeof t=="string"?u=t:t?.message?u=t.message:t?.response?.data?.message?u=t.response.data.message:u="An unexpected error occurred",(u.toLowerCase().includes("permission denied")||u.toLowerCase().includes("access denied")||u.toLowerCase().includes("unauthorized")||u.toLowerCase().includes("forbidden"))&&(h="Access Denied"),o.jsx("div",{className:`rounded-md border p-4 ${c.container} ${s}`,role:"alert",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(st,{className:`h-5 w-5 ${c.icon}`,"aria-hidden":"true"})}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("h3",{className:`text-sm font-medium ${c.title}`,children:h}),o.jsx("div",{className:`mt-1 text-sm ${c.text}`,children:u})]}),n&&e&&o.jsx("div",{className:"ml-auto pl-3",children:o.jsx("div",{className:"-mx-1.5 -my-1.5",children:o.jsx("button",{onClick:e,className:`inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600 ${c.icon} hover:bg-red-100`,"aria-label":"Dismiss error",children:o.jsx(yt,{className:"h-4 w-4"})})})})]})})},US=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=N.useState({type_name:"",description:"",is_active:!0}),[u,h]=N.useState({}),[m,p]=N.useState("");N.useEffect(()=>{c(n?{type_name:n.type_name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active===1||n.is_active===!0:!0}:{type_name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const j={};return l.type_name.trim()?l.type_name.length>100&&(j.type_name="Campaign type name must be less than 100 characters"):j.type_name="Campaign type name is required",l.description&&l.description.length>1e3&&(j.description="Description must be less than 1000 characters"),h(j),Object.keys(j).length===0},b=j=>{const{name:v,value:_,type:C,checked:S}=j.target;c(E=>({...E,[v]:C==="checkbox"?S:_})),u[v]&&h(E=>({...E,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Campaign Type":"Create Campaign Type"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-6 w-6"})})]}),m&&o.jsx(Gu,{error:m,onDismiss:()=>p(""),className:"mb-4"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Campaign Type Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"type_name",name:"type_name",value:l.type_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.type_name?"border-red-500":""}`,placeholder:"Enter campaign type name",maxLength:100,disabled:i}),u.type_name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.type_name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),o.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},HS=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,m]=N.useState("all"),[p,x]=N.useState("created_at"),[b,w]=N.useState("desc"),[j,v]=N.useState(1),[_]=N.useState(10),[C,S]=N.useState(null),[E,R]=N.useState(!1),[A,F]=N.useState(null),[H,z]=N.useState(!1),[K,W]=N.useState(!1),[M,X]=N.useState(null),[$,re]=N.useState(!1),[le,V]=N.useState(null),Z=async()=>{try{n(!0),l(null);const ue={search:c||void 0,status:h==="all"?void 0:h,page:j,limit:_},ge=await qo.getAll(ue);ge.success?(e(ge.data||[]),S(ge.meta||null)):l(ge.message||"Failed to fetch campaign types")}catch(ue){l(ue.response?.data?.message||"Failed to fetch campaign types"),console.error("Error fetching campaign types:",ue)}finally{n(!1)}};N.useEffect(()=>{Z()},[c,h,p,b,j]),N.useEffect(()=>{if(i){const ue=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(ue)}},[i]);const G=async ue=>{try{z(!0),l(null),console.log("Submitting form data:",ue),console.log("Editing item:",A);let ge;if(A?(console.log("Updating campaign type with ID:",A.id),ge=await qo.update(A.id,ue)):(console.log("Creating new campaign type"),ge=await qo.create(ue)),console.log("API Response:",ge),ge.success||ge.data)return R(!1),F(null),Z(),console.log(A?"Campaign type updated successfully":"Campaign type created successfully"),{success:!0};throw new Error(ge.message||"Operation failed")}catch(ge){throw console.error("Form submission error:",ge),console.error("Error response data:",ge.response?.data),console.error("Error status:",ge.response?.status),ge}finally{z(!1)}},se=async ue=>{try{re(!0),V(null);const ge=await qo.delete(ue);if(ge.success)W(!1),X(null),V(null),Z(),console.log("Campaign type deleted successfully");else throw new Error(ge.message||"Delete failed")}catch(ge){console.error("Delete error:",ge),V(ge.response?.data?.message||ge.message||"Delete failed")}finally{re(!1)}},te=ue=>{u(ue.target.value),v(1)},P=ue=>{m(ue),v(1)},L=ue=>{p===ue?w(b==="asc"?"desc":"asc"):(x(ue),w("asc")),v(1)},fe=ue=>{F(ue),R(!0)},me=()=>{F(null),R(!0)},I=ue=>{X(ue),W(!0)},J=ue=>ue?Tn(ue):"-";return o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Types"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campaign types"})]}),o.jsxs("button",{onClick:me,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx("input",{type:"text",placeholder:"Search campaign types...",value:c,onChange:te,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:ue=>P(ue.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:Z,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),C&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-6",children:o.jsxs("div",{className:"flex items-center justify-between text-sm text-blue-700",children:[o.jsxs("span",{children:["Showing ",t.length," of ",C.pagination.totalCount," campaign types"]}),o.jsxs("span",{children:["Page ",C.pagination.currentPage," of ",C.pagination.totalPages]})]})}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),o.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:o.jsx(yt,{className:"h-4 w-4"})})]})}),o.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Kt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Loading campaign types..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(mt,{className:"h-12 w-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaign types found"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first campaign type."}),o.jsxs("button",{onClick:me,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]}):o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("type_name"),children:["Name",p==="type_name"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("is_active"),children:["Status",p==="is_active"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("created_at"),children:["Created",p==="created_at"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(ue=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:ue.type_name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:ue.description||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ue.is_active===1||ue.is_active===!0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ue.is_active===1||ue.is_active===!0?o.jsxs(o.Fragment,{children:[o.jsx(ei,{className:"h-3 w-3 mr-1"}),"Active"]}):o.jsxs(o.Fragment,{children:[o.jsx(jl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:J(ue.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>fe(ue),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:o.jsx(ti,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>I(ue),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:o.jsx(ur,{className:"h-4 w-4"})})]})})]},ue.id))})]})}),C&&C.pagination.totalPages>1&&o.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4 rounded-b-lg",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:!C.pagination.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("button",{onClick:()=>v(Math.min(C.pagination.totalPages,j+1)),disabled:!C.pagination.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",o.jsx("span",{className:"font-medium",children:j})," of"," ",o.jsx("span",{className:"font-medium",children:C.pagination.totalPages})]})}),o.jsx("div",{children:o.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[o.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:!C.pagination.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("button",{onClick:()=>v(Math.min(C.pagination.totalPages,j+1)),disabled:!C.pagination.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]}),o.jsx(US,{isOpen:E,onClose:()=>{R(!1),F(null),l(null)},onSubmit:G,editData:A,isLoading:H}),K&&M&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:o.jsxs("div",{className:"mt-3 text-center",children:[o.jsx(st,{className:"mx-auto h-12 w-12 text-red-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Campaign Type"}),o.jsxs("div",{className:"mt-2 px-7 py-3",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',M.type_name,'"? This action cannot be undone.']}),le&&o.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:o.jsx("p",{className:"text-sm text-red-600",children:le})})]}),o.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[o.jsx("button",{onClick:()=>{W(!1),X(null),V(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:$,children:"Cancel"}),o.jsx("button",{onClick:()=>se(M.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:$,children:$?"Deleting...":"Delete"})]})]})})})]})},Zs={getCampaigns:async(t={})=>(await ae.get("/campaigns",{params:t})).data,getCampaign:async t=>(await ae.get(`/campaigns/${t}`)).data,createCampaign:async t=>(await ae.post("/campaigns",t)).data,updateCampaign:async(t,e)=>(await ae.put(`/campaigns/${t}`,e)).data,deleteCampaign:async t=>(await ae.delete(`/campaigns/${t}`)).data,toggleCampaignStatus:async t=>(await ae.put(`/campaigns/${t}/toggle-status`)).data,toggleCampaignEnabled:async t=>(await ae.put(`/campaigns/${t}/toggle-enabled`)).data,activateCampaign:async t=>(await ae.put(`/campaigns/${t}/activate`)).data,deactivateCampaign:async t=>(await ae.put(`/campaigns/${t}/deactivate`)).data,getCampaignStats:async()=>(await ae.get("/campaigns/stats")).data,getCampaignsByBrand:async(t,e={})=>(await ae.get(`/campaigns/by-brand/${t}`,{params:e})).data,getCampaignTypes:async()=>(await ae.get("/campaign-types")).data,getBrands:async()=>(await ae.get("/brands/active")).data},VS=({campaign:t=null,isOpen:e,onClose:s,onSave:n})=>{const[i,l]=N.useState({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""}),[c,u]=N.useState(""),[h,m]=N.useState(""),[p,x]=N.useState([]),[b,w]=N.useState([]),[j,v]=N.useState(!1),[_,C]=N.useState(""),[S,E]=N.useState({}),R=[{value:"video",label:"Video"},{value:"image",label:"Image"},{value:"carousel",label:"Carousel"},{value:"collection",label:"Collection"}],A=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}];N.useEffect(()=>{if(e){if(z(),t){console.log("🔧 Initializing form with campaign data:",t);const V=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Extracted brand ID:",V,"from brand:",t.brand),l({name:t.name||"",persona:F(t.persona),gender:F(t.gender),min_age:t.min_age?t.min_age.toString():"",max_age:t.max_age?t.max_age.toString():"",location:F(t.location),creatives:t.creatives||"image",is_enabled:t.is_enabled!==void 0?!!t.is_enabled:!0,campaign_type_id:t.campaign_type_id||"",brand:V})}else l({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""});H(),C(""),E({})}},[e,t]),N.useEffect(()=>{if(t&&b.length>0){const V=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Re-setting brand after brands loaded. Brand ID:",V,"Available brands:",b.length),l(Z=>({...Z,brand:V}))}},[t,b]);const F=V=>{if(!V)return[];if(Array.isArray(V))return V;try{const Z=JSON.parse(V);return Array.isArray(Z)?Z:[]}catch{return[]}},H=()=>{u(""),m("")},z=async()=>{try{const V=await Zs.getCampaignTypes();V.success&&x(V.data||[]);const Z=await Zs.getBrands();Z.success&&(console.log("🏢 Loaded brands:",Z.data),w(Z.data||[]))}catch(V){console.error("Error loading dropdown data:",V)}},K=V=>{const{name:Z,value:G,type:se,checked:te}=V.target;l(P=>({...P,[Z]:se==="checkbox"?te:G})),S[Z]&&E(P=>({...P,[Z]:null}))},W=(V,Z,G)=>{const se=Z.trim();se&&!i[V].includes(se)&&(l(te=>({...te,[V]:[...te[V],se]})),G(""))},M=(V,Z)=>{l(G=>({...G,[V]:G[V].filter((se,te)=>te!==Z)}))},X=(V,Z,G,se)=>{V.key==="Enter"&&G.trim()&&(V.preventDefault(),W(Z,G,se))},$=(V,Z)=>{l(G=>({...G,gender:Z?[...G.gender,V]:G.gender.filter(se=>se!==V)}))},re=()=>{const V={};return i.name.trim()||(V.name="Campaign name is required"),i.campaign_type_id||(V.campaign_type_id="Campaign type is required"),i.brand||(V.brand="Brand is required"),i.min_age&&(isNaN(i.min_age)||i.min_age<0||i.min_age>100)&&(V.min_age="Minimum age must be a number between 0 and 100"),i.max_age&&(isNaN(i.max_age)||i.max_age<0||i.max_age>100)&&(V.max_age="Maximum age must be a number between 0 and 100"),i.min_age&&i.max_age&&parseInt(i.min_age)>parseInt(i.max_age)&&(V.min_age="Minimum age cannot be greater than maximum age"),E(V),Object.keys(V).length===0},le=async V=>{if(V.preventDefault(),!!re()){v(!0),C("");try{const Z={name:i.name.trim(),persona:i.persona,gender:i.gender,min_age:i.min_age?parseInt(i.min_age):null,max_age:i.max_age?parseInt(i.max_age):null,location:i.location,creatives:i.creatives,is_enabled:i.is_enabled,campaign_type_id:parseInt(i.campaign_type_id),brand:parseInt(i.brand)};let G;t?G=await Zs.updateCampaign(t.id,Z):G=await Zs.createCampaign(Z),G.success?(n(G.data),s()):C(G.message||"Failed to save campaign")}catch(Z){console.error("Error saving campaign:",Z),C(Z.response?.data?.message||"Failed to save campaign. Please try again.")}finally{v(!1)}}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Campaign":"Create New Campaign"}),o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-6 w-6"})})]}),o.jsxs("form",{onSubmit:le,className:"p-6 space-y-6",children:[_&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400"}),o.jsx("div",{className:"ml-3",children:o.jsx("p",{className:"text-sm text-red-800",children:_})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),o.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:K,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter campaign name"}),S.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"campaign_type_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),o.jsxs("select",{id:"campaign_type_id",name:"campaign_type_id",value:i.campaign_type_id,onChange:K,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.campaign_type_id?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[o.jsx("option",{value:"",children:"Select Campaign Type"}),p.filter(V=>V.is_active).map(V=>o.jsx("option",{value:V.id,children:V.type_name},V.id))]}),S.campaign_type_id&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.campaign_type_id})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),o.jsxs("select",{id:"brand",name:"brand",value:i.brand,onChange:K,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.brand?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[o.jsx("option",{value:"",children:"Select Brand"}),b.map(V=>o.jsx("option",{value:V.id,children:V.name},V.id))]}),S.brand&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.brand})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"min_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Age"}),o.jsx("input",{type:"number",id:"min_age",name:"min_age",min:"0",max:"100",value:i.min_age,onChange:K,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.min_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter minimum age"}),S.min_age&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.min_age})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"max_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Age"}),o.jsx("input",{type:"number",id:"max_age",name:"max_age",min:"0",max:"100",value:i.max_age,onChange:K,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.max_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter maximum age"}),S.max_age&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.max_age})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"creatives",className:"block text-sm font-medium text-gray-700 mb-1",children:"Creative Type"}),o.jsx("select",{id:"creatives",name:"creatives",value:i.creatives,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:R.map(V=>o.jsx("option",{value:V.value,children:V.label},V.value))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona (Multiple Values)"}),o.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.persona.map((V,Z)=>o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 border border-purple-200",children:[o.jsx("span",{children:V}),o.jsx("button",{type:"button",onClick:()=>M("persona",Z),className:"ml-2 text-purple-600 hover:text-purple-800",children:o.jsx(yt,{className:"h-3 w-3"})})]},Z))}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"text",value:c,onChange:V=>u(V.target.value),onKeyDown:V=>X(V,"persona",c,u),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type persona and press Enter"}),o.jsx("button",{type:"button",onClick:()=>W("persona",c,u),disabled:!c.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx(mt,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gender (Multiple Selection)"}),i.gender.length>0&&o.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:i.gender.map((V,Z)=>o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:[o.jsx("span",{children:V}),o.jsx("button",{type:"button",onClick:()=>M("gender",Z),className:"ml-2 text-blue-600 hover:text-blue-800",children:o.jsx(yt,{className:"h-3 w-3"})})]},Z))}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:A.map(V=>o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i.gender.includes(V.value),onChange:Z=>$(V.value,Z.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:V.label})]},V.value))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (Multiple Values)"}),o.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.location.map((V,Z)=>o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 border border-green-200",children:[o.jsx("span",{children:V}),o.jsx("button",{type:"button",onClick:()=>M("location",Z),className:"ml-2 text-green-600 hover:text-green-800",children:o.jsx(yt,{className:"h-3 w-3"})})]},Z))}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"text",value:h,onChange:V=>m(V.target.value),onKeyDown:V=>X(V,"location",h,m),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type location and press Enter"}),o.jsx("button",{type:"button",onClick:()=>W("location",h,m),disabled:!h.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx(mt,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{htmlFor:"is_enabled",className:"block text-sm font-medium text-gray-700",children:"Campaign Status"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`text-sm ${i.is_enabled?"text-gray-500":"text-gray-900 font-medium"}`,children:"Disabled"}),o.jsx("button",{type:"button",onClick:()=>l(V=>({...V,is_enabled:!V.is_enabled})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${i.is_enabled?"bg-purple-600":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.is_enabled?"translate-x-6":"translate-x-1"}`})}),o.jsx("span",{className:`text-sm ${i.is_enabled?"text-purple-600 font-medium":"text-gray-500"}`,children:"Enabled"})]})]})})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:j,children:"Cancel"}),o.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:j?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Saving..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Rx,{className:"h-4 w-4"}),o.jsx("span",{children:t?"Update Campaign":"Create Campaign"})]})})]})]})]})}):null},WS=()=>{const t=dr(),[e,s]=N.useState([]),[n,i]=N.useState([]),[l,c]=N.useState(!0),[u,h]=N.useState(""),[m,p]=N.useState(""),[x,b]=N.useState(""),[w,j]=N.useState(""),[v,_]=N.useState({delete:null,toggle:null}),[C,S]=N.useState(!1),[E,R]=N.useState(null),[A,F]=N.useState(null),[H,z]=N.useState(null),[K,W]=N.useState(null);N.useEffect(()=>{M(),X()},[]);const M=async()=>{try{c(!0),h("");const I=await Zs.getCampaigns();if(I.success){const J=I.data?.campaigns||I.data||[];s(J)}else h(I.message||"Failed to load campaigns")}catch(I){console.error("Error loading campaigns:",I),h("Failed to load campaigns. Please try again.")}finally{c(!1)}},X=async()=>{try{const I=await Zs.getCampaignTypes();I.success&&i(I.data||[])}catch(I){console.error("Error loading campaign types:",I)}},$=()=>{R(null),S(!0)},re=I=>{R(I),S(!0),W(null)},le=I=>{F(I),W(null)},V=async()=>{try{const I=await Zs.deleteCampaign(A.id);I.success?(s(J=>(Array.isArray(J)?J:[]).filter(ue=>ue.id!==A.id)),F(null)):h(I.message||"Failed to delete campaign")}catch(I){console.error("Error deleting campaign:",I),h("Failed to delete campaign. Please try again.")}},Z=async I=>{try{const J=await Zs.toggleCampaignEnabled(I.id);J.success?s(ue=>(Array.isArray(ue)?ue:[]).map(ge=>ge.id===I.id?{...ge,is_enabled:!ge.is_enabled}:ge)):h(J.message||"Failed to update campaign status")}catch(J){console.error("Error toggling campaign status:",J),h("Failed to update campaign status. Please try again.")}W(null)},G=I=>{s(E?J=>(Array.isArray(J)?J:[]).map(ue=>ue.id===I.id?I:ue):J=>[I,...Array.isArray(J)?J:[]])},se=I=>{t(`/campaigns/${I.id}`)},te=(Array.isArray(e)?e:[]).filter(I=>{const J=I.brand?.name||"",ue=I.name.toLowerCase().includes(m.toLowerCase())||J.toLowerCase().includes(m.toLowerCase()),ge=!x||I.campaign_type_id===parseInt(x),Le=!w||w==="enabled"&&I.is_enabled||w==="disabled"&&!I.is_enabled;return ue&&ge&&Le}),P=I=>{if(I.campaignType?.name)return I.campaignType.name;const J=(Array.isArray(n)?n:[]).find(ue=>ue.id===I.campaign_type_id);return J?J.type_name:"Unknown"},L=I=>{if(!I)return[];if(Array.isArray(I))return I;try{return JSON.parse(I)}catch{return[]}},fe=I=>{if(!I)return[];if(Array.isArray(I))return I;try{const J=JSON.parse(I);return Array.isArray(J)?J:[]}catch{return I.split(",").map(J=>J.trim()).filter(J=>J)}},me=I=>{if(!I)return[];if(Array.isArray(I))return I;try{const J=JSON.parse(I);return Array.isArray(J)?J:[]}catch{return I.split(",").map(J=>J.trim()).filter(J=>J)}};return l?o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),o.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>o.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},I))})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[o.jsxs("div",{className:"max-w-7xl mx-auto",children:[K&&o.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>W(null)}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your advertising campaigns"})]}),o.jsxs("button",{onClick:$,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[o.jsx(mt,{className:"h-5 w-5"}),o.jsx("span",{children:"New Campaign"})]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search campaigns...",value:m,onChange:I=>p(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),o.jsx("div",{children:o.jsxs("select",{value:x,onChange:I=>b(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[o.jsx("option",{value:"",children:"All Campaign Types"}),(Array.isArray(n)?n:[]).map(I=>o.jsx("option",{value:I.id,children:I.type_name},I.id))]})}),o.jsx("div",{children:o.jsxs("select",{value:w,onChange:I=>j(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[o.jsx("option",{value:"",children:"All Statuses"}),o.jsx("option",{value:"enabled",children:"Enabled"}),o.jsx("option",{value:"disabled",children:"Disabled"})]})}),o.jsx("div",{children:o.jsx("button",{onClick:()=>{p(""),b(""),j("")},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]})}),u&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(au,{className:"h-5 w-5 text-red-400"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm text-red-800",children:u}),o.jsx("button",{onClick:()=>h(""),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:te.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(Tu,{className:"h-12 w-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns found"}),o.jsx("p",{className:"text-gray-600 mb-4",children:(Array.isArray(e)?e:[]).length===0?"Get started by creating your first campaign.":"Try adjusting your search or filter criteria."}),(Array.isArray(e)?e:[]).length===0&&o.jsx("button",{onClick:$,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Campaign"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creative"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(I=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`/campaigns/${I.id}`),children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),I.brand?.name&&o.jsx("div",{className:"text-sm text-gray-500",children:I.brand.name})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900",children:P(I)})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:I.creatives})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_enabled?"Enabled":"Disabled"})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Tn(I.created_at)}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),se(I)},className:"text-blue-500 hover:text-blue-700 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:o.jsx(al,{className:"h-4 w-4"})}),o.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),re(I)},className:"text-yellow-500 hover:text-yellow-700 p-1 rounded-md hover:bg-yellow-50 transition-colors",title:"Edit Campaign",children:o.jsx(F1,{className:"h-4 w-4"})}),o.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),Z(I)},className:`p-1 rounded-md transition-colors ${I.is_enabled?"text-red-500 hover:text-red-700 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:I.is_enabled?"Disable Campaign":"Enable Campaign",children:o.jsx("div",{className:`h-4 w-4 rounded-full ${I.is_enabled?"bg-red-500":"bg-green-500"}`})}),o.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),le(I)},className:"text-red-500 hover:text-red-700 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Campaign",children:o.jsx(ur,{className:"h-4 w-4"})})]})})]},I.id))})]})})}),te.length>0&&o.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",te.length," of ",(Array.isArray(e)?e:[]).length," campaigns"]})]}),o.jsx(VS,{campaign:E,isOpen:C,onClose:()=>{S(!1),R(null)},onSave:G}),H&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Campaign Details"}),o.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600",children:o.jsx(yt,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Name"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:H.name})]}),H.brand?.name&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Brand"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:H.brand.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Type"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:P(H)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Persona"}),o.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:fe(H.persona).length>0?fe(H.persona).map((I,J)=>o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-purple-100 text-purple-800",children:I},J)):o.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:L(H.gender).join(", ")||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Locations"}),o.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:me(H.location).length>0?me(H.location).map((I,J)=>o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:I},J)):o.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Creatives"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:H.creatives})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),o.jsx("p",{className:`mt-1 text-sm font-medium ${H.is_enabled?"text-green-600":"text-red-600"}`,children:H.is_enabled?"Enabled":"Disabled"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:H1(H.created_at)})]})]})]})}),A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(au,{className:"h-6 w-6 text-red-600 mr-3"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Campaign"})]}),o.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:['Are you sure you want to delete "',A.name,'"? This action cannot be undone.']}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>F(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:V,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})},Yo={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("Brand API getAll params:",e);const s=await ae.get("/brands",{params:e});return console.log("Brand API getAll response:",s.data),s.data}catch(e){throw console.error("Brand API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await ae.get(`/brands/${t}`);return console.log("Brand API getById response:",e.data),e.data}catch(e){throw console.error("Brand API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("Brand API create data:",t);const e=await ae.post("/brands",t);return console.log("Brand API create response:",e.data),e.data}catch(e){throw console.error("Brand API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("Brand API update id:",t,"data:",e);const s=await ae.put(`/brands/${t}`,e);return console.log("Brand API update response:",s.data),s.data}catch(s){throw console.error("Brand API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("Brand API delete id:",t);const e=await ae.delete(`/brands/${t}`);return console.log("Brand API delete response:",e.data),e.data}catch(e){throw console.error("Brand API delete error:",e.response?.data||e.message),e}}},qS=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=N.useState({name:"",description:"",is_active:!0}),[u,h]=N.useState({}),[m,p]=N.useState("");N.useEffect(()=>{c(n?{name:n.name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active:!0}:{name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const j={};return l.name.trim()?l.name.length>255&&(j.name="Brand name must be less than 255 characters"):j.name="Brand name is required",l.description&&l.description.length>1e3&&(j.description="Description must be less than 1000 characters"),h(j),Object.keys(j).length===0},b=j=>{const{name:v,value:_,type:C,checked:S}=j.target;c(E=>({...E,[v]:C==="checkbox"?S:_})),u[v]&&h(E=>({...E,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Brand":"Create Brand"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-6 w-6"})})]}),m&&o.jsx(Gu,{error:m,onDismiss:()=>p(""),className:"mb-4"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.name?"border-red-500":""}`,placeholder:"Enter brand name",maxLength:255,disabled:i}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),o.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},YS=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,m]=N.useState("all"),[p,x]=N.useState("created_at"),[b,w]=N.useState("desc"),[j,v]=N.useState(1),[_]=N.useState(10),[C,S]=N.useState(!1),[E,R]=N.useState(null),[A,F]=N.useState(!1),[H,z]=N.useState(!1),[K,W]=N.useState(null),[M,X]=N.useState(!1),[$,re]=N.useState(null),le=async()=>{try{n(!0),l(null);const I={search:c,status:h==="all"?void 0:h,sort:p,order:b,page:j,limit:_},J=await Yo.getAll(I);J.success?e(J.data||[]):l(J.message||"Failed to fetch brands")}catch(I){l(I.response?.data?.message||"Failed to fetch brands"),console.error("Error fetching brands:",I)}finally{n(!1)}};N.useEffect(()=>{le()},[c,h,p,b,j]),N.useEffect(()=>{if(i){const I=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(I)}},[i]);const V=async I=>{try{F(!0),l(null),console.log("Submitting form data:",I),console.log("Editing item:",E);let J;if(E?(console.log("Updating brand with ID:",E.id),J=await Yo.update(E.id,I)):(console.log("Creating new brand"),J=await Yo.create(I)),console.log("API Response:",J),J.success||J.data)return S(!1),R(null),le(),console.log(E?"Brand updated successfully":"Brand created successfully"),{success:!0};throw new Error(J.message||"Operation failed")}catch(J){throw console.error("Form submission error:",J),console.error("Error response data:",J.response?.data),console.error("Error status:",J.response?.status),J}finally{F(!1)}},Z=async I=>{try{X(!0),re(null);const J=await Yo.delete(I);if(J.success)z(!1),W(null),re(null),le(),console.log("Brand deleted successfully");else throw new Error(J.message||"Delete failed")}catch(J){console.error("Delete error:",J),re(J.response?.data?.message||J.message||"Delete failed")}finally{X(!1)}},G=I=>{u(I.target.value),v(1)},se=I=>{m(I),v(1)},te=I=>{p===I?w(b==="asc"?"desc":"asc"):(x(I),w("asc")),v(1)},P=I=>{R(I),S(!0)},L=()=>{R(null),S(!0)},fe=I=>{W(I),z(!0)},me=I=>I?Tn(I):"-";return o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Management"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your brand portfolio"})]}),o.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx("input",{type:"text",placeholder:"Search brands...",value:c,onChange:G,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:I=>se(I.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:le,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),o.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:o.jsx(yt,{className:"h-4 w-4"})})]})}),o.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Kt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Loading brands..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(mt,{className:"h-12 w-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No brands found"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first brand."}),o.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]}):o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("name"),children:["Name",p==="name"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("is_active"),children:["Status",p==="is_active"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("created_at"),children:["Created",p==="created_at"&&o.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(I=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:I.description||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?o.jsxs(o.Fragment,{children:[o.jsx(ei,{className:"h-3 w-3 mr-1"}),"Active"]}):o.jsxs(o.Fragment,{children:[o.jsx(jl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:me(I.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>P(I),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:o.jsx(ti,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>fe(I),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:o.jsx(ur,{className:"h-4 w-4"})})]})})]},I.id))})]})}),o.jsx(qS,{isOpen:C,onClose:()=>{S(!1),R(null),l(null)},onSubmit:V,editData:E,isLoading:A}),H&&K&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:o.jsxs("div",{className:"mt-3 text-center",children:[o.jsx(st,{className:"mx-auto h-12 w-12 text-red-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Brand"}),o.jsxs("div",{className:"mt-2 px-7 py-3",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',K.name,'"? This action cannot be undone.']}),$&&o.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:o.jsx("p",{className:"text-sm text-red-600",children:$})})]}),o.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[o.jsx("button",{onClick:()=>{z(!1),W(null),re(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:M,children:"Cancel"}),o.jsx("button",{onClick:()=>Z(K.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:M,children:M?"Deleting...":"Delete"})]})]})})})]})},Xi={getAll:async(t={})=>{try{return(await ae.get("/campaign-data",{params:t})).data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{return(await ae.get(`/campaign-data/${t}`)).data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{return(await ae.post("/campaign-data",t)).data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{return(await ae.put(`/campaign-data/${t}`,e)).data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{return(await ae.delete(`/campaign-data/${t}`)).data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}},getCampaignsForDropdown:async()=>{try{const t=await ae.get("/campaigns",{params:{is_enabled:!0,limit:1e3}});return{success:t.data.success,data:t.data.data?.campaigns||t.data.data||[],message:t.data.message}}catch(t){throw console.error("API getCampaignsForDropdown error:",t.response?.data||t.message),t}},getCardsForDropdown:async()=>{try{return(await ae.get("/campaign-data/cards")).data}catch(t){throw console.error("API getCardsForDropdown error:",t.response?.data||t.message),t}},getByCampaignId:async(t,e={})=>{try{return(await ae.get("/campaign-data",{params:{campaign_id:t,...e}})).data}catch(s){throw console.error("API getByCampaignId error:",s.response?.data||s.message),s}}},KS=()=>{const{id:t}=vv(),e=dr(),[s,n]=N.useState(null),[i,l]=N.useState(!0),[c,u]=N.useState([]),[h,m]=N.useState(!0),[p,x]=N.useState(null),[b,w]=N.useState(""),[j,v]=N.useState(1),[_]=N.useState(10),[C,S]=N.useState(!1),[E,R]=N.useState(null),[A,F]=N.useState(!1),[H,z]=N.useState(!1),[K,W]=N.useState(null),[M,X]=N.useState(!1),[$,re]=N.useState([]),[le,V]=N.useState(!1),[Z,G]=N.useState({from:"",to:""}),[se,te]=N.useState({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""});function P(){const ee=new Date;ee.setDate(ee.getDate()-1);const oe=ee.getFullYear(),he=String(ee.getMonth()+1).padStart(2,"0"),qe=String(ee.getDate()).padStart(2,"0");return`${oe}-${he}-${qe}`}const L=()=>{const ee=new Date,oe=new Date(ee.getFullYear(),ee.getMonth(),1),he=new Date(ee.getFullYear(),ee.getMonth()+1,0),qe=Xt=>{const ns=Xt.getFullYear(),Ns=String(Xt.getMonth()+1).padStart(2,"0"),fs=String(Xt.getDate()).padStart(2,"0");return`${ns}-${Ns}-${fs}`},Fs={from:qe(oe),to:qe(he)};return console.log("Current month range:",Fs),Fs},fe=async()=>{try{l(!0);const ee=await Zs.getCampaign(t);ee.success&&ee.data?n(ee.data):x("Campaign not found")}catch(ee){console.error("Error fetching campaign:",ee),x("Failed to load campaign details")}finally{l(!1)}},me=async()=>{try{m(!0),x(null);const ee={search:b,page:j,limit:_,date_from:Te(Z.from),date_to:Te(Z.to)},oe=await Xi.getByCampaignId(t,ee);oe.success?u(oe.data||[]):x(oe.message||"Failed to fetch campaign data")}catch(ee){x(ee.response?.data?.message||"Failed to fetch campaign data"),console.error("Error fetching campaign data:",ee)}finally{m(!1)}},I=async()=>{try{V(!0);const ee=await Xi.getCardsForDropdown();ee.success&&re(ee.data||[])}catch(ee){console.error("Error fetching cards:",ee)}finally{V(!1)}};N.useEffect(()=>{t&&(fe(),I())},[t]),N.useEffect(()=>{t&&Ne(Z.from)&&Ne(Z.to)&&me()},[t,b,j,Z]);const J=ee=>{const{name:oe,value:he}=ee.target;te(qe=>({...qe,[oe]:he}))},ue=async ee=>{ee.preventDefault();try{if(F(!0),x(null),!se.card_id||!se.data_date){x("Card and Date are required fields");return}const oe={campaign_id:parseInt(t),facebook_result:parseInt(se.facebook_result)||0,zoho_result:parseInt(se.zoho_result)||0,spent:parseFloat(se.spent)||0,data_date:se.data_date,card_id:parseInt(se.card_id)};let he;if(E?he=await Xi.update(E.id,oe):he=await Xi.create(oe),he.success||he.data)S(!1),R(null),te({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""}),me();else throw new Error(he.message||"Operation failed")}catch(oe){console.error("Form submission error:",oe);const he=oe.response?.data?.message||oe.response?.data?.error||oe.message||"Operation failed";x(he)}finally{F(!1)}},ge=async ee=>{try{X(!0);const oe=await Xi.delete(ee);if(oe.success)z(!1),W(null),me();else throw new Error(oe.message||"Delete failed")}catch(oe){console.error("Delete error:",oe),x(oe.response?.data?.message||"Delete failed")}finally{X(!1)}},Le=ee=>{w(ee.target.value),v(1)},ot=ee=>{x(null),R(ee),te({facebook_result:ee.facebook_result?.toString()||"",zoho_result:ee.zoho_result?.toString()||"",spent:ee.spent?.toString()||"",data_date:ee.data_date||"",card_id:ee.card_id?.toString()||""}),S(!0)},ye=()=>{x(null),R(null),te({facebook_result:"",zoho_result:"",spent:"",data_date:P(),card_id:""}),S(!0)},ze=ee=>{W(ee),z(!0)},ss=ee=>ee?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(ee)):"₹0.00",q=ee=>{const oe=$.find(he=>he.id===ee);return oe?oe.card_name:"-"},be=ee=>{if(!ee)return"";if(ee.includes("T")||ee.includes("-"))try{const oe=new Date(ee);if(!isNaN(oe.getTime())){const he=String(oe.getDate()).padStart(2,"0"),qe=String(oe.getMonth()+1).padStart(2,"0"),Fs=oe.getFullYear();return`${he}/${qe}/${Fs}`}}catch(oe){console.error("Error parsing date:",ee,oe)}if(ee.match(/^\d{4}-\d{2}-\d{2}$/)){const[oe,he,qe]=ee.split("-");return`${qe}/${he}/${oe}`}return ee},Te=ee=>{if(!ee)return"";const[oe,he,qe]=ee.split("/");return`${qe}-${he.padStart(2,"0")}-${oe.padStart(2,"0")}`},Ne=ee=>{if(!ee)return!1;const oe=ee.split("/");if(oe.length!==3)return!1;const[he,qe,Fs]=oe,Xt=parseInt(he,10),ns=parseInt(qe,10),Ns=parseInt(Fs,10);if(isNaN(Xt)||isNaN(ns)||isNaN(Ns)||Xt<1||Xt>31||ns<1||ns>12||Ns<1900||Ns>2100)return!1;const fs=new Date(Ns,ns-1,Xt);return fs.getFullYear()===Ns&&fs.getMonth()===ns-1&&fs.getDate()===Xt};N.useEffect(()=>{const ee=L();G({from:be(ee.from),to:be(ee.to)})},[]);const Pe=(ee,oe)=>{let he=oe.replace(/[^0-9/]/g,"");if(he.length>=2&&he.charAt(2)!=="/"&&(he.length===2?he=he+"/":he.length>2&&he.length<=4&&(he=he.substring(0,2)+"/"+he.substring(2))),he.length>=5&&he.charAt(5)!=="/"){if(he.length===5)he=he+"/";else if(he.length>5){const qe=he.split("/");qe.length===2&&(he=qe[0]+"/"+qe[1].substring(0,2)+"/"+qe[1].substring(2))}}he.length<=10&&G(qe=>({...qe,[ee]:he}))},je=(ee,oe)=>{oe&&G(he=>({...he,[ee]:be(oe)}))},Ue=ee=>{let oe=ee.replace(/[^0-9/]/g,"");if(oe.length>=2&&oe.charAt(2)!=="/"&&(oe.length===2?oe=oe+"/":oe.length>2&&oe.length<=4&&(oe=oe.substring(0,2)+"/"+oe.substring(2))),oe.length>=5&&oe.charAt(5)!=="/"){if(oe.length===5)oe=oe+"/";else if(oe.length>5){const he=oe.split("/");he.length===2&&(oe=he[0]+"/"+he[1].substring(0,2)+"/"+he[1].substring(2))}}if(oe.length<=10)if(Ne(oe)){const he=Te(oe);te(qe=>({...qe,data_date:he}))}else te(he=>({...he,data_date:oe}))},dt=ee=>{ee&&te(oe=>({...oe,data_date:ee}))};return i?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),o.jsx("div",{className:"space-y-4",children:[1,2,3].map(ee=>o.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},ee))})]})}):s?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[o.jsx(pp,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),o.jsx("div",{children:o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Data"}),o.jsxs("button",{onClick:ye,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Data Entry"]})]})}),o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"date_from",className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date (DD/MM/YYYY)"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_from_picker").showPicker&&document.getElementById("date_from_picker").showPicker()}),o.jsx("input",{type:"text",id:"date_from",value:Z.from,onChange:ee=>Pe("from",ee.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),o.jsx("input",{type:"date",id:"date_from_picker",className:"absolute opacity-0 pointer-events-none",onChange:ee=>je("from",ee.target.value),tabIndex:-1})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"date_to",className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date (DD/MM/YYYY)"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_to_picker").showPicker&&document.getElementById("date_to_picker").showPicker()}),o.jsx("input",{type:"text",id:"date_to",value:Z.to,onChange:ee=>Pe("to",ee.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),o.jsx("input",{type:"date",id:"date_to_picker",className:"absolute opacity-0 pointer-events-none",onChange:ee=>je("to",ee.target.value),tabIndex:-1})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"search",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx("input",{type:"text",id:"search",placeholder:"Search data...",value:b,onChange:Le,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{onClick:me,disabled:h,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})})]})}),p&&o.jsx("div",{className:"mx-6 mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm text-red-800",children:p}),o.jsx("button",{onClick:()=>x(null),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),o.jsx("div",{className:"overflow-hidden",children:h?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Kt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Loading performance data..."})]}):c.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(ts,{className:"h-12 w-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No performance data yet"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your campaign performance by adding data entries."}),o.jsxs("button",{onClick:ye,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add First Entry"]})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Result"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Result"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Card"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(ee=>{const oe=parseInt(ee.facebook_result)||0,he=parseInt(ee.zoho_result)||0;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Tn(ee.data_date)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-700",children:oe})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-700",children:he})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-green-600",children:ss(ee.spent)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-blue-600 font-medium",children:oe>0?ss(parseFloat(ee.spent)/oe):"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-purple-600 font-medium",children:he>0?ss(parseFloat(ee.spent)/he):"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-700",children:ee.card_display_name||ee.card_name||q(ee.card_id)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>ot(ee),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:o.jsx(ti,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>ze(ee),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:o.jsx(ur,{className:"h-4 w-4"})})]})})]},ee.id)})})]})})})]}),C&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-md shadow-lg rounded-md bg-white",children:o.jsxs("div",{className:"mt-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:E?"Edit Performance Data":"Add Performance Data"}),p&&C&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-4 w-4 text-red-400"}),o.jsx("div",{className:"ml-2",children:o.jsx("p",{className:"text-sm text-red-700",children:p})})]})}),o.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"facebook_result",className:"block text-sm font-medium text-gray-700",children:"Facebook Result"}),o.jsx("input",{type:"number",id:"facebook_result",name:"facebook_result",value:se.facebook_result,onChange:J,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"zoho_result",className:"block text-sm font-medium text-gray-700",children:"Zoho Result"}),o.jsx("input",{type:"number",id:"zoho_result",name:"zoho_result",value:se.zoho_result,onChange:J,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"spent",className:"block text-sm font-medium text-gray-700",children:"Spent (₹)"}),o.jsx("input",{type:"number",step:"0.01",id:"spent",name:"spent",value:se.spent,onChange:J,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"data_date",className:"block text-sm font-medium text-gray-700",children:"Date * (DD/MM/YYYY)"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("form_date_picker").showPicker&&document.getElementById("form_date_picker").showPicker()}),o.jsx("input",{type:"text",id:"data_date",name:"data_date",value:se.data_date?be(se.data_date):"",onChange:ee=>Ue(ee.target.value),placeholder:"DD/MM/YYYY",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3 pl-10"}),o.jsx("input",{type:"date",id:"form_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:ee=>dt(ee.target.value),tabIndex:-1})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),o.jsxs("select",{id:"card_id",name:"card_id",value:se.card_id,onChange:J,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3",children:[o.jsx("option",{value:"",children:"Select Card"}),$.map(ee=>o.jsx("option",{value:ee.id,children:ee.card_name},ee.id))]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{type:"button",onClick:()=>{S(!1),R(null),x(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:A,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:A||le,children:A?"Saving...":E?"Update":"Create"})]})]})]})})}),H&&K&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:o.jsxs("div",{className:"mt-3 text-center",children:[o.jsx(st,{className:"mx-auto h-12 w-12 text-red-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Performance Data"}),o.jsx("div",{className:"mt-2 px-7 py-3",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this performance data entry? This action cannot be undone."})}),o.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[o.jsx("button",{onClick:()=>{z(!1),W(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:M,children:"Cancel"}),o.jsx("button",{onClick:()=>ge(K.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:M,children:M?"Deleting...":"Delete"})]})]})})})]}):o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),o.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[o.jsx(pp,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})]})})},Jn="/cards",Br={getAll:async(t={})=>{try{return(await ae.get(Jn,{params:t})).data}catch(e){throw console.error("API get all cards error:",e.response?.data||e),e}},getActive:async(t={})=>{try{return(await ae.get(`${Jn}/active`,{params:t})).data}catch(e){throw console.error("API get active cards error:",e.response?.data||e),e}},getById:async t=>{try{return(await ae.get(`${Jn}/${t}`)).data}catch(e){throw console.error("API get card error:",e.response?.data||e),e}},create:async t=>{try{return(await ae.post(Jn,t)).data}catch(e){throw console.error("API create card error:",e.response?.data||e),e}},update:async(t,e)=>{try{return(await ae.put(`${Jn}/${t}`,e)).data}catch(s){throw console.error("API update card error:",s.response?.data||s),s}},addBalance:async(t,e,s="")=>{try{return(await ae.post(`${Jn}/${t}/add-balance`,{amount:Number(e),description:s||""})).data}catch(n){throw console.error("API add balance error:",n.response?.data||n),n}},delete:async t=>{try{return(await ae.delete(`${Jn}/${t}`)).data}catch(e){throw console.error("API delete card error:",e.response?.data||e),e}}},XS=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=N.useState(""),[u,h]=N.useState({card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),[m,p]=N.useState({});N.useEffect(()=>{h(n?{card_name:n.card_name||"",card_number_last4:n.card_number_last4||"",card_type:n.card_type||"",current_balance:n.current_balance||"",is_active:n.is_active!==void 0?n.is_active:!0}:{card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),p({})},[n,t]),N.useEffect(()=>{t&&c("")},[t]);const x=()=>{const j={};return u.card_name.trim()?u.card_name.length>100&&(j.card_name="Card name must be less than 100 characters"):j.card_name="Card name is required",u.card_number_last4.trim()?/^\d{4}$/.test(u.card_number_last4)||(j.card_number_last4="Must be exactly 4 digits"):j.card_number_last4="Last 4 digits are required",u.card_type||(j.card_type="Card type is required"),u.current_balance.toString().trim()?(isNaN(parseFloat(u.current_balance))||parseFloat(u.current_balance)<0)&&(j.current_balance="Current balance must be a valid positive number"):j.current_balance="Current balance is required",p(j),Object.keys(j).length===0},b=j=>{const{name:v,value:_,type:C,checked:S}=j.target;let E=C==="checkbox"?S:_;if(v==="card_number_last4"&&(E=_.replace(/\D/g,"").slice(0,4)),v==="current_balance")if(_===""||/^\d*\.?\d*$/.test(_))E=_;else return;h(R=>({...R,[v]:E})),m[v]&&p(R=>({...R,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{c("");const v={...u,current_balance:parseFloat(u.current_balance)};await s(v)}catch(v){console.error("Form submission error:",v),c(v?.response?.data?.message||v.message||"An error occurred")}};return t?o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Card":"Add New Card"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-6 w-6"})})]}),l&&o.jsx(Gu,{error:l,onDismiss:()=>c(""),className:"mb-4"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"card_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"card_name",name:"card_name",value:u.card_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_name?"border-red-500":""}`,placeholder:"Enter card name",maxLength:100,disabled:i}),m.card_name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_name})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"card_number_last4",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last 4 Digits ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"card_number_last4",name:"card_number_last4",value:u.card_number_last4,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_number_last4?"border-red-500":""}`,placeholder:"1234",maxLength:4,disabled:i}),m.card_number_last4&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_number_last4})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"card_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Type ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"card_type",name:"card_type",value:u.card_type,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_type?"border-red-500":""}`,placeholder:"e.g., Visa, MasterCard, American Express",maxLength:50,disabled:i}),m.card_type&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_type})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"current_balance",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Balance ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"₹"}),o.jsx("input",{type:"text",id:"current_balance",name:"current_balance",value:u.current_balance,onChange:b,className:`mt-1 block w-full pl-7 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.current_balance?"border-red-500":""}`,placeholder:"0.00",disabled:i})]}),m.current_balance&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.current_balance})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:u.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),o.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},QS=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,m]=N.useState(1),[p]=N.useState(10),[x,b]=N.useState(!1),[w,j]=N.useState(null),[v,_]=N.useState(!1),[C,S]=N.useState(!1),[E,R]=N.useState(null),[A,F]=N.useState(!1),[H,z]=N.useState(!1),[K,W]=N.useState(null),[M,X]=N.useState(""),[$,re]=N.useState(!1),le=async()=>{try{n(!0),l(null);const ye={search:c,page:h,limit:p},ze=await Br.getAll(ye);ze.success?e(ze.data?.cards||[]):l(ze.message||"Failed to fetch cards")}catch(ye){l(ye.response?.data?.message||"Failed to fetch cards"),console.error("Error fetching cards:",ye)}finally{n(!1)}};N.useEffect(()=>{const ye=setTimeout(()=>{m(1),le()},300);return()=>clearTimeout(ye)},[c]),N.useEffect(()=>{le()},[h]),N.useEffect(()=>{le()},[]);const V=(ye=null)=>{j(ye),b(!0)},Z=()=>{b(!1),j(null)},G=async ye=>{try{if(_(!0),w){const ze=await Br.update(w.id||w._id,ye);if(!ze.success)throw new Error(ze.message||"Update failed")}else{const ze=await Br.create(ye);if(!ze.success)throw new Error(ze.message||"Creation failed")}Z(),await le()}catch(ze){throw console.error("Form submission error:",ze),ze}finally{_(!1)}},se=ye=>{R(ye),S(!0)},te=async()=>{if(E)try{F(!0);const ye=await Br.delete(E.id||E._id);if(!ye.success)throw new Error(ye.message||"Delete failed");S(!1),R(null),await le()}catch(ye){console.error("Delete error:",ye),alert(ye.response?.data?.message||"Failed to delete card")}finally{F(!1)}},P=()=>{S(!1),R(null)},L=ye=>{W(ye),X(""),z(!0)},fe=()=>{z(!1),W(null),X("")},me=async()=>{if(!K||!M)return;const ye=parseFloat(M);if(isNaN(ye)||ye<=0){alert("Please enter a valid positive amount");return}try{re(!0);const ze=await Br.addBalance(K.id||K._id,ye);if(!ze.success)throw new Error(ze.message||"Failed to add balance");z(!1),W(null),X(""),await le()}catch(ze){console.error("Add balance error:",ze),alert(ze.response?.data?.message||"Failed to add balance")}finally{re(!1)}},I=N.useMemo(()=>c.trim()?t.filter(ye=>ye.card_name?.toLowerCase().includes(c.toLowerCase())||ye.card_number_last4?.includes(c)||ye.card_type?.toLowerCase().includes(c.toLowerCase())):t,[t,c]),J=I.length,ue=Math.ceil(J/p),ge=(h-1)*p,Le=ge+p,ot=I.slice(ge,Le);return o.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Vr,{className:"h-7 w-7 text-blue-600"}),"Cards Management"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>le(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),o.jsxs("button",{onClick:()=>V(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Card"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Mn,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",value:c,onChange:ye=>u(ye.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cards..."})]})}),i&&o.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((ye,ze)=>o.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},ze))}):ot.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards found"}),o.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by adding your first card."}),!c&&o.jsxs("button",{onClick:()=>V(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Add Card"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ot.map(ye=>o.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:ye.card_name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["•••• •••• •••• ",ye.card_number_last4]})]}),o.jsx("div",{className:"flex items-center gap-1",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ye.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ye.is_active?o.jsxs(o.Fragment,{children:[o.jsx(ei,{className:"w-3 h-3 mr-1"})," Active"]}):o.jsxs(o.Fragment,{children:[o.jsx(jl,{className:"w-3 h-3 mr-1"})," Inactive"]})})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Card Type"}),o.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:ye.card_type||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Balance"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zi,{className:"h-4 w-4 text-green-600 mr-1"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Number(ye.current_balance||0).toFixed(2)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[o.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[o.jsx(En,{className:"h-3 w-3 mr-1"}),Tn(ye.created_at)]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>L(ye),className:"inline-flex items-center px-3 py-1.5 border border-green-300 shadow-sm text-xs font-medium rounded text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[o.jsx(mt,{className:"h-3 w-3 mr-1"}),"Add Balance"]}),o.jsxs("button",{onClick:()=>V(ye),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[o.jsx(ti,{className:"h-3 w-3 mr-1"}),"Edit"]}),o.jsxs("button",{onClick:()=>se(ye),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[o.jsx(ur,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]})},ye.id||ye._id))}),ue>1&&o.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",ge+1," to ",Math.min(Le,J)," of ",J," results"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>m(ye=>Math.max(1,ye-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),o.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",ue]}),o.jsx("button",{onClick:()=>m(ye=>Math.min(ue,ye+1)),disabled:h>=ue,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),o.jsx(XS,{isOpen:x,onClose:Z,onSubmit:G,editData:w,isLoading:v}),C&&E&&o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),o.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[o.jsxs("div",{className:"sm:flex sm:items-start",children:[o.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:o.jsx(st,{className:"h-6 w-6 text-red-600"})}),o.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Card"}),o.jsx("div",{className:"mt-2",children:o.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',E.card_name,'"? This action cannot be undone.']})})]})]}),o.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[o.jsx("button",{onClick:te,disabled:A,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:A?"Deleting...":"Delete"}),o.jsx("button",{onClick:P,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),H&&K&&o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),o.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[o.jsxs("div",{className:"sm:flex sm:items-start",children:[o.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:o.jsx(Zi,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Balance"}),o.jsxs("div",{className:"mt-2",children:[o.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['Add balance to "',K.card_name,'"']}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{htmlFor:"balance-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (₹)"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Zi,{className:"h-4 w-4 text-gray-400"})}),o.jsx("input",{type:"number",id:"balance-amount",value:M,onChange:ye=>X(ye.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]})]})]})]})]}),o.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[o.jsx("button",{onClick:me,disabled:$||!M,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:$?"Adding...":"Add Balance"}),o.jsx("button",{onClick:fe,disabled:$,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Ko={getAll:async(t={})=>(await ae.get("/card-users",{params:t})).data,getById:async t=>(await ae.get(`/card-users/${t}`)).data,create:async t=>(await ae.post("/card-users",t)).data,update:async(t,e)=>(await ae.put(`/card-users/${t}`,e)).data,delete:async t=>(await ae.delete(`/card-users/${t}`)).data,getCardsByUser:async t=>(await ae.get(`/card-users/user/${t}/cards`)).data,getUsersByCard:async t=>(await ae.get(`/card-users/card/${t}/users`)).data},Xo=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}/${s}/${e}`},Hg=t=>{if(!t)return"";if(t.includes("T")){const i=new Date(t);if(!isNaN(i.getTime())){const l=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0");return`${String(i.getDate()).padStart(2,"0")}/${c}/${l}`}}const[e,s,n]=t.split("-");return e&&s&&n?`${n}/${s}/${e}`:""},GS=t=>{if(!t)return"";const[e,s,n]=t.split("/");return`${n}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`},JS=({isOpen:t,onClose:e,onSubmit:s,editData:n,isLoading:i})=>{const[l,c]=N.useState({card_id:"",user_id:"",assigned_date:Xo(),is_primary:!1}),[u,h]=N.useState({}),[m,p]=N.useState([]),[x,b]=N.useState([]),[w,j]=N.useState(!1);N.useEffect(()=>{t&&(c(n?{card_id:n.card_id?.toString()||"",user_id:n.user_id?.toString()||"",assigned_date:n.assigned_date?Hg(n.assigned_date):Xo(),is_primary:!!n.is_primary}:{card_id:"",user_id:"",assigned_date:Xo(),is_primary:!1}),h({}))},[t,n]),N.useEffect(()=>{t&&v()},[t]);const v=async()=>{j(!0);try{console.log("🔄 CardUsersForm: Loading options..."),console.log("📡 CardUsersForm: Calling cardsService.getActive...");const A=await Br.getActive({limit:100});console.log("📨 CardUsersForm: Cards response:",A);const F=A?.data?.cards||A?.data||[];console.log("📋 CardUsersForm: Extracted cards list:",F),console.log("📊 CardUsersForm: Cards list length:",F.length),Array.isArray(F)&&F.length>0&&F.forEach((K,W)=>{console.log(`   Card ${W+1}: ID=${K.id}, Name="${K.card_name}", Balance=${K.current_balance}`)}),p(Array.isArray(F)?F:[]),console.log("👥 CardUsersForm: Loading users...");const z=(await L0.getForDropdown())?.data||[];console.log("👥 CardUsersForm: Users loaded:",z.length),b(Array.isArray(z)?z:[])}catch(A){console.error("❌ CardUsersForm: Error loading options:",A),p([]),b([])}finally{j(!1)}},_=A=>{const{name:F,value:H,type:z,checked:K}=A.target;if(F==="assigned_date"){let W=H.replace(/[^0-9/]/g,"");if(W.length>=2&&W.charAt(2)!=="/"&&(W.length===2?W=W+"/":W.length>2&&W.length<=4&&(W=W.substring(0,2)+"/"+W.substring(2))),W.length>=5&&W.charAt(5)!=="/"){if(W.length===5)W=W+"/";else if(W.length>5){const M=W.split("/");M.length===2&&(W=M[0]+"/"+M[1].substring(0,2)+"/"+M[1].substring(2))}}W.length<=10&&c(M=>({...M,[F]:W}))}else c(W=>({...W,[F]:z==="checkbox"?K:H}));u[F]&&h(W=>({...W,[F]:""}))},C=()=>{const A={};return l.card_id||(A.card_id="Card is required"),l.user_id||(A.user_id="User is required"),l.assigned_date||(A.assigned_date="Assigned date is required"),h(A),Object.keys(A).length===0},S=async A=>{if(A.preventDefault(),!!C())try{const F={...l,card_id:parseInt(l.card_id),user_id:parseInt(l.user_id),assigned_date:GS(l.assigned_date)};await s(F)}catch(F){console.error("Form submission error:",F),h({submit:F.response?.data?.message||F.message||"An error occurred while saving"})}},E=A=>{A&&c(F=>({...F,assigned_date:Hg(A)}))},R=()=>{c({card_id:"",user_id:"",assigned_date:Xo(),is_primary:!1}),h({}),e()};return t?o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:R}),o.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[o.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:o.jsx("button",{onClick:R,className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.jsx(yt,{className:"h-6 w-6"})})}),o.jsx("div",{className:"sm:flex sm:items-start",children:o.jsxs("div",{className:"w-full mt-3 text-center sm:mt-0 sm:text-left",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:n?"Edit Card Assignment":"Assign Card to User"}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.submit&&o.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsx("p",{className:"text-sm text-red-700",children:u.submit})]})}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),o.jsxs("select",{id:"card_id",name:"card_id",value:l.card_id,onChange:_,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.card_id?"border-red-300":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select a card..."}),m.map(A=>o.jsxs("option",{value:A.id,children:[A.card_name," (••••",A.card_number_last4,")"]},A.id))]}),u.card_id&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.card_id})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"User *"}),o.jsxs("select",{id:"user_id",name:"user_id",value:l.user_id,onChange:_,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.user_id?"border-red-300":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select a user..."}),x.map(A=>o.jsx("option",{value:A.id,children:A.username},A.id))]}),u.user_id&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.user_id})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"assigned_date",className:"block text-sm font-medium text-gray-700",children:"Assigned Date * (DD/MM/YYYY)"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("assigned_date_picker").showPicker&&document.getElementById("assigned_date_picker").showPicker()}),o.jsx("input",{type:"text",id:"assigned_date",name:"assigned_date",value:l.assigned_date,onChange:_,placeholder:"DD/MM/YYYY",disabled:i,required:!0,className:`pl-10 mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.assigned_date?"border-red-300":"border-gray-300"}`}),o.jsx("input",{type:"date",id:"assigned_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:A=>E(A.target.value),tabIndex:-1})]}),u.assigned_date&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.assigned_date})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_primary",name:"is_primary",checked:l.is_primary,onChange:_,disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-700",children:"Set as primary card for this user"})]}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:R,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:i||w,className:"px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Saving...":n?"Update Assignment":"Create Assignment"})]})]})]})})]})]})}):null},ZS=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[c,u]=N.useState(""),[h,m]=N.useState(1),[p]=N.useState(10),[x,b]=N.useState(!1),[w,j]=N.useState(null),[v,_]=N.useState(!1),[C,S]=N.useState(!1),[E,R]=N.useState(null),[A,F]=N.useState(!1),[H,z]=N.useState(null),K=async()=>{try{n(!0),l(null);const L={search:c,page:h,limit:p},fe=await Ko.getAll(L);if(fe.success){console.log("📊 Card Users API Response:",fe),console.log("📊 Response data structure:",Object.keys(fe.data||{}));const me=fe.data?.assignments||fe.data?.cardUsers||fe.data||[];console.log("📊 Extracted assignments:",me.length),me.length>0&&console.log("📊 First assignment sample:",{id:me[0].id,card_name:me[0].card_name,username:me[0].username,card_id:me[0].card_id,user_id:me[0].user_id}),e(me)}else l(fe.message||"Failed to fetch card assignments")}catch(L){l(L.response?.data?.message||"Failed to fetch card assignments"),console.error("Error fetching assignments:",L)}finally{n(!1)}};N.useEffect(()=>{const L=setTimeout(()=>{m(1),K()},300);return()=>clearTimeout(L)},[c]),N.useEffect(()=>{K()},[h]),N.useEffect(()=>{K()},[]);const W=(L=null)=>{j(L),b(!0)},M=()=>{b(!1),j(null)},X=async L=>{try{if(_(!0),w){const fe=await Ko.update(w.id||w._id,L);if(!fe.success)throw new Error(fe.message||"Update failed")}else{const fe=await Ko.create(L);if(!fe.success)throw new Error(fe.message||"Creation failed")}M(),await K()}catch(fe){throw console.error("Form submission error:",fe),fe}finally{_(!1)}},$=L=>{R(L),S(!0)},re=async()=>{if(E)try{F(!0),z(null);const L=await Ko.delete(E.id||E._id);if(!L.success)throw new Error(L.message||"Delete failed");S(!1),R(null),z(null),await K()}catch(L){console.error("Delete error:",L);const fe=L.response?.data?.message||L.message||"Failed to delete assignment";z(fe)}finally{F(!1)}},le=()=>{S(!1),R(null),z(null)},V=N.useMemo(()=>c.trim()?t.filter(L=>L.card_name?.toLowerCase().includes(c.toLowerCase())||L.username?.toLowerCase().includes(c.toLowerCase())||L.card_number_last4?.includes(c)):t,[t,c]),Z=V.length,G=Math.ceil(Z/p),se=(h-1)*p,te=se+p,P=V.slice(se,te);return o.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(ol,{className:"h-7 w-7 text-blue-600"}),"Card User Assignments"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>K(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),o.jsxs("button",{onClick:()=>W(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Mn,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search assignments..."})]})}),i&&o.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?o.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:o.jsx("div",{className:"px-4 py-5 sm:p-6",children:o.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((L,fe)=>o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},fe))})})}):P.length===0?o.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx(ol,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),o.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by assigning a card to a user."}),!c&&o.jsxs("button",{onClick:()=>W(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[o.jsx(mt,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Vr,{className:"h-4 w-4 mr-1"}),"Card"]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(lu,{className:"h-4 w-4 mr-1"}),"User"]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(En,{className:"h-4 w-4 mr-1"}),"Assigned Date"]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(L=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Vr,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.card_name||"Unknown Card"}),o.jsxs("div",{className:"text-sm text-gray-500",children:["••••",L.card_number_last4||"****"]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(lu,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.username||"Unknown User"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.assigned_date?Tn(L.assigned_date):"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.is_primary?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.is_primary?o.jsxs(o.Fragment,{children:[o.jsx(ei,{className:"w-3 h-3 mr-1"})," Primary"]}):o.jsxs(o.Fragment,{children:[o.jsx(jl,{className:"w-3 h-3 mr-1"})," Secondary"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>W(L),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[o.jsx(ti,{className:"h-3 w-3 mr-1"}),"Edit"]}),o.jsxs("button",{onClick:()=>$(L),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[o.jsx(ur,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},L.id||L._id))})]})}),G>1&&o.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",se+1," to ",Math.min(te,Z)," of ",Z," results"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>m(L=>Math.max(1,L-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),o.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",G]}),o.jsx("button",{onClick:()=>m(L=>Math.min(G,L+1)),disabled:h>=G,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),o.jsx(JS,{isOpen:x,onClose:M,onSubmit:X,editData:w,isLoading:v}),C&&E&&o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),o.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[o.jsxs("div",{className:"sm:flex sm:items-start",children:[o.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:o.jsx(st,{className:"h-6 w-6 text-red-600"})}),o.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Assignment"}),o.jsxs("div",{className:"mt-2",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the assignment of "',E.card_name,'" to "',E.username,'"? This action cannot be undone.']}),H&&o.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:o.jsx("p",{className:"text-sm text-red-600",children:H})})]})]})]}),o.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[o.jsx("button",{onClick:re,disabled:A,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:A?"Deleting...":"Delete"}),o.jsx("button",{onClick:le,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Oe={buildDaily:async t=>{try{return(await ae.post(`/reports/build?date=${t}`)).data}catch(e){throw console.error("Error building daily reports:",e),e}},buildRange:async(t,e)=>{try{return(await ae.post(`/reports/build-range?from=${t}&to=${e}`)).data}catch(s){throw console.error("Error building range reports:",s),s}},rebuildCampaignRange:async(t,e,s)=>{try{return(await ae.post(`/reports/rebuild-campaign?campaign_id=${t}&from=${e}&to=${s}`)).data}catch(n){throw console.error("Error rebuilding campaign reports:",n),n}},generateReport:async(t={})=>{try{const e=new URLSearchParams,s={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};Object.entries(t).forEach(([i,l])=>{if(l!=null&&l!==""){const c=s[i]||i;e.append(c,l)}});const n=await ae.get(`/reports?${e.toString()}`);if(n.data.success&&n.data.data){const i=Array.isArray(n.data.data)?n.data.data:[],l=n.data.meta||{},c={53:"Tradekaro",54:"BazaarFX"},u=i.map(m=>{const p=parseFloat(m.spent)||0,x=parseInt(m.leads)||0,b=Math.round(x*.526),w=x-b;let j="Unknown Brand";return m.brand_name?j=m.brand_name:m.brand&&c[m.brand]&&(j=c[m.brand]),{id:m.id,campaign_id:m.campaign_id,campaign_name:m.campaign_name,brand:j,report_date:m.report_date,facebook_result:b,zoho_result:w,leads:x,spent:p,cost_per_lead:parseFloat(m.cost_per_lead)||0,facebook_cost_per_lead:b>0?p/b:0,zoho_cost_per_lead:w>0?p/w:0}}),h={totalCampaigns:i.length>0?[...new Set(i.map(m=>m.campaign_id))].length:0,totalRecords:i.length,totalFacebookResults:i.reduce((m,p)=>m+(p.facebook_result||0),0),totalZohoResults:i.reduce((m,p)=>m+(p.zoho_result||0),0),totalResults:i.reduce((m,p)=>m+(p.leads||0),0),totalSpent:i.reduce((m,p)=>m+(p.spent||0),0),avgCostPerResult:0,dateRange:{from:t.dateFrom||"",to:t.dateTo||""}};return h.totalResults>0&&(h.avgCostPerResult=h.totalSpent/h.totalResults),{success:!0,message:`Found ${u.length} reports from reports table`,data:{reports:u,summary:h,filters:t},meta:l}}return n.data}catch(e){throw console.error("Error generating report:",e),e}},getAll:async(t={})=>{try{const e=new URLSearchParams,{page:s=1,limit:n=10,...i}=t;return e.append("page",s),e.append("limit",n),Object.entries(i).forEach(([c,u])=>{u!=null&&u!==""&&e.append(c,u)}),(await ae.get(`/reports?${e.toString()}`)).data}catch(e){throw console.error("Error fetching reports:",e),e}},getById:async t=>{try{return(await ae.get(`/reports/${t}`)).data}catch(e){throw console.error("Error fetching report by ID:",e),e}},create:async t=>{try{return(await ae.post("/reports",t)).data}catch(e){throw console.error("Error creating report:",e),e}},update:async(t,e)=>{try{return(await ae.put(`/reports/${t}`,e)).data}catch(s){throw console.error("Error updating report:",s),s}},delete:async t=>{try{return(await ae.delete(`/reports/${t}`)).data}catch(e){throw console.error("Error deleting report:",e),e}},getFilterOptions:async()=>{try{return(await ae.get("/reports/filters")).data}catch(t){throw console.error("Error fetching filter options:",t),t}},getDashboardStats:async()=>{try{return(await ae.get("/reports/dashboard")).data}catch(t){throw console.error("Error fetching dashboard stats:",t),t}},formatCurrency:t=>t==null?"₹0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(t),formatNumber:t=>t==null?"0":new Intl.NumberFormat("en-IN").format(t),calculateROI:(t,e)=>!e||e===0?0:(t-e)/e*100,calculateCostPerResult:(t,e)=>!e||e===0?0:t/e,getDateRangePresets:()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()-1);const s=new Date(t);s.setDate(s.getDate()-7);const n=new Date(t);n.setMonth(n.getMonth()-1);const i=new Date(t);i.setMonth(i.getMonth()-3);const l=c=>c.toISOString().split("T")[0];return{today:{label:"Today",from:l(t),to:l(t)},yesterday:{label:"Yesterday",from:l(e),to:l(e)},lastWeek:{label:"Last 7 Days",from:l(s),to:l(t)},lastMonth:{label:"Last 30 Days",from:l(n),to:l(t)},lastThreeMonths:{label:"Last 3 Months",from:l(i),to:l(t)}}}},Vg=t=>{if(!t)return"";const e=new Date(t),s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`},eC=({isOpen:t,onClose:e,onReportGenerated:s})=>{const[n,i]=N.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[l,c]=N.useState(!1),[u,h]=N.useState({campaigns:[],brands:[],dateRange:{}}),[m,p]=N.useState("");N.useEffect(()=>{if(t){x();const E=new Date,R=new Date;R.setDate(E.getDate()-7),i({dateFrom:R.toISOString().split("T")[0],dateTo:E.toISOString().split("T")[0],campaignId:"",brand:""}),p("")}},[t]);const x=async()=>{try{const E=await Oe.getFilterOptions();E.success&&h(E.data)}catch(E){console.error("Error loading filter options:",E)}},b=(E,R)=>{i(A=>({...A,[E]:R})),p("")},w=()=>{if(!n.dateFrom||!n.dateTo)return p("Please select both start and end dates"),!1;const E=new Date(n.dateFrom),R=new Date(n.dateTo);if(E>R)return p("Start date cannot be after end date"),!1;const A=Math.abs(R-E);return Math.ceil(A/(1e3*60*60*24))>365?(p("Date range cannot exceed 1 year"),!1):!0},j=async E=>{try{const R=new URLSearchParams,A={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};Object.entries(E).forEach(([X,$])=>{if($!=null&&$!==""){const re=A[X]||X;R.append(re,$)}});const F=await ae.get(`/reports/export?${R.toString()}`,{responseType:"blob"}),H=new Blob([F.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=window.URL.createObjectURL(H),K=document.createElement("a");K.href=z;const W=F.headers["content-disposition"];let M=`Campaign_Reports_${E.dateFrom}_to_${E.dateTo}.xlsx`;if(W){const X=W.match(/filename="(.+)"/);X&&(M=X[1])}K.download=M,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(z),s&&s("Excel report downloaded successfully"),e()}catch(R){console.error("Error downloading Excel report:",R),R.response?.status===404?p("No data found for the selected criteria. Please try different filters."):p("Failed to download Excel report. Please try again.")}},v=async()=>{if(w()){c(!0),p("");try{const E=await Oe.generateReport(n);E.success&&E.data?(s(E.data),e()):p("No data found for the selected criteria. Please try different filters.")}catch(E){console.error("Error generating report:",E),E.response?.status===404?p("No data found for the selected criteria. Please try different filters."):E.response?.status===401?p("Authentication failed. Please log in again."):p("Failed to generate report. Please try again.")}finally{c(!1)}}},_=async()=>{if(w()){c(!0),p("");try{await j(n)}catch(E){console.error("Error downloading Excel report:",E),E.response?.status===404?p("No data found for the selected criteria. Please try different filters."):E.response?.status===401?p("Authentication failed. Please log in again."):p("Failed to download Excel report. Please try again.")}finally{c(!1)}}},C=()=>{l||e()},S=E=>{const A=Oe.getDateRangePresets()[E];A&&i(F=>({...F,dateFrom:A.from,dateTo:A.to}))};return t?o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:C}),o.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[o.jsxs("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(ts,{className:"h-6 w-6 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Report"})]}),o.jsx("button",{onClick:C,disabled:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(yt,{className:"h-5 w-5"})})]}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View report data on screen or download an Excel file based on your selected filters"})]}),o.jsxs("div",{className:"bg-white px-6 py-4 space-y-6",children:[m&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsx("p",{className:"text-sm text-red-600",children:m})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[o.jsx(En,{className:"h-4 w-4 mr-2 text-blue-600"}),"Date Range *"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Oe.getDateRangePresets()).map(([E,R])=>o.jsx("button",{onClick:()=>S(E),disabled:l,className:"px-3 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:R.label},E))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),o.jsx("input",{type:"date",value:n.dateFrom,onChange:E=>b("dateFrom",E.target.value),disabled:l,max:u.dateRange?.latest,min:u.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),o.jsx("input",{type:"date",value:n.dateTo,onChange:E=>b("dateTo",E.target.value),disabled:l,max:u.dateRange?.latest,min:n.dateFrom||u.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[o.jsx(Tu,{className:"h-4 w-4 mr-2 text-blue-600"}),"Filters (Optional)"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Campaign"}),o.jsxs("select",{value:n.campaignId,onChange:E=>b("campaignId",E.target.value),disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"All Campaigns"}),u.campaigns?.map(E=>o.jsxs("option",{value:E.id,children:[E.name," ",E.brand&&`(${E.brand})`]},E.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Brand"}),o.jsxs("select",{value:n.brand,onChange:E=>b("brand",E.target.value),disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"All Brands"}),u.brands?.map(E=>o.jsx("option",{value:E,children:E},E))]})]})]})]}),u.dateRange?.earliest&&u.dateRange?.latest&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[o.jsxs("p",{className:"text-sm text-blue-700",children:[o.jsx("strong",{children:"Available Data:"})," ",Vg(u.dateRange.earliest)," to ",Vg(u.dateRange.latest)]}),o.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[o.jsx("strong",{children:"Campaigns:"})," ",u.campaigns?.length||0," campaigns available"]}),o.jsxs("p",{className:"text-sm text-blue-600",children:[o.jsx("strong",{children:"Brands:"})," ",u.brands?.length||0," brands available"]})]})]}),o.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse",children:[o.jsx("button",{type:"button",onClick:v,disabled:l||!n.dateFrom||!n.dateTo,className:"w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ts,{className:"h-4 w-4 mr-2"}),"View Report"]})}),o.jsx("button",{type:"button",onClick:_,disabled:l||!n.dateFrom||!n.dateTo,className:"w-full inline-flex justify-center items-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Downloading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Au,{className:"h-4 w-4 mr-2"}),"Download Excel"]})}),o.jsx("button",{type:"button",onClick:C,disabled:l,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}):null},Yd=t=>{if(!t)return"";const e=new Date(t),s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`},tC=()=>{const[t,e]=N.useState(null),[s,n]=N.useState(!1),[i,l]=N.useState(null),[c,u]=N.useState(null),[h,m]=N.useState(!1),[p,x]=N.useState("summary");N.useEffect(()=>{b()},[]);const b=async()=>{try{n(!0);const S=await Oe.getDashboardStats();S.success&&u(S.data)}catch(S){console.error("Error loading dashboard stats:",S),l("Failed to load dashboard statistics")}finally{n(!1)}},w=S=>{e(S),l(null)},j=()=>{e(null),l(null)},v=({title:S,value:E,icon:R,change:A,changeType:F,description:H})=>o.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:S}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E}),H&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H}),A&&o.jsxs("p",{className:`text-sm flex items-center mt-2 ${F==="positive"?"text-green-600":"text-red-600"}`,children:[F==="positive"?o.jsx(qr,{className:"h-4 w-4 mr-1"}):o.jsx(Mx,{className:"h-4 w-4 mr-1"}),A]})]}),o.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:o.jsx(R,{className:"h-6 w-6 text-blue-600"})})]})}),_=({title:S,data:E})=>o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:S}),o.jsx("div",{className:"space-y-4",children:Object.entries(E).map(([R,A])=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600 capitalize",children:R.replace(/([A-Z])/g," $1").toLowerCase()}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:typeof A=="number"&&R.includes("spent")?Oe.formatCurrency(A):typeof A=="number"?Oe.formatNumber(A):A})]},R))})]}),C=({reports:S})=>o.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Detailed Report Data"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((E,R)=>{const A=E.facebook_cost_per_lead?parseFloat(E.facebook_cost_per_lead):0,F=E.zoho_cost_per_lead?parseFloat(E.zoho_cost_per_lead):0,H=z=>!z||z===0?"bg-gray-100 text-gray-800":z<5?"bg-green-100 text-green-800":z<10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.campaign_name||`Campaign ${E.campaign_id}`}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Yd(E.report_date)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Oe.formatCurrency(E.spent)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Oe.formatNumber(E.facebook_result||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Oe.formatNumber(E.zoho_result||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${H(A)}`,children:A>0?Oe.formatCurrency(A):"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${H(F)}`,children:F>0?Oe.formatCurrency(F):"N/A"})})]},R)})})]})})]})});return s&&!t&&!c?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),o.jsx("p",{className:"text-gray-600",children:"Generate and analyze comprehensive advertising reports"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(ts,{className:"h-4 w-4 mr-2"}),"Generate Report"]}),t&&o.jsx("button",{onClick:j,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Report"})]})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsx("p",{className:"text-sm text-red-600",children:i})]})}),t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(v,{title:"Total Spent",value:Oe.formatCurrency(t.summary?.totalSpent||0),icon:Zi,description:`From ${Yd(t.filters?.dateFrom)} to ${Yd(t.filters?.dateTo)}`}),o.jsx(v,{title:"Total Results",value:Oe.formatNumber(t.summary?.totalResults||0),icon:js,description:`Facebook: ${Oe.formatNumber(t.summary?.totalFacebookResults||0)} | Zoho: ${Oe.formatNumber(t.summary?.totalZohoResults||0)}`}),o.jsx(v,{title:"Campaigns",value:Oe.formatNumber(t.summary?.totalCampaigns||0),icon:An,description:`${t.summary?.totalRecords||0} total records`}),o.jsx(v,{title:"Avg Cost/Result",value:Oe.formatCurrency(t.summary?.avgCostPerResult||0),icon:iu})]}),o.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("button",{onClick:()=>x("summary"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="summary"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Summary"}),o.jsx("button",{onClick:()=>x("detailed"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="detailed"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Detailed Data"}),o.jsx("button",{onClick:()=>x("breakdown"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="breakdown"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Breakdown"})]})}),p==="summary"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx(_,{title:"Summary Statistics",data:t.summary||{}}),t.filters&&o.jsx(_,{title:"Applied Filters",data:t.filters})]}),p==="detailed"&&t.reports&&o.jsx(C,{reports:t.reports}),p==="breakdown"&&o.jsxs("div",{className:"space-y-6",children:[t.brandBreakdown&&t.brandBreakdown.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[o.jsx(Tx,{className:"h-5 w-5 mr-2 text-blue-600"}),"Brand Breakdown"]}),o.jsx("div",{className:"space-y-3",children:t.brandBreakdown.map((S,E)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[o.jsx("span",{className:"font-medium text-gray-900",children:S.brand||"Unknown Brand"}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Oe.formatCurrency(S.total_spent)," spent"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[Oe.formatNumber(S.total_results)," results | ",S.campaigns_count," campaigns"]})]})]},E))})]}),t.campaignBreakdown&&t.campaignBreakdown.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[o.jsx(ts,{className:"h-5 w-5 mr-2 text-blue-600"}),"Campaign Breakdown"]}),o.jsx("div",{className:"space-y-3",children:t.campaignBreakdown.map((S,E)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:S.campaign_name}),o.jsx("div",{className:"text-xs text-gray-500",children:S.brand})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Oe.formatCurrency(S.total_spent)}),o.jsxs("div",{className:"text-xs text-gray-500",children:[Oe.formatNumber(S.total_results)," results"]})]})]},E))})]})]})]}):o.jsxs("div",{className:"space-y-6",children:[c&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(v,{title:"Current Month",value:Oe.formatCurrency(c.currentMonth?.totalSpent||0),icon:Zi,description:`${c.currentMonth?.month} overview`}),o.jsx(v,{title:"Monthly Campaigns",value:Oe.formatNumber(c.currentMonth?.campaignsCount||0),icon:js,description:"Active this month"}),o.jsx(v,{title:"Monthly Results",value:Oe.formatNumber(c.currentMonth?.totalLeads||0),icon:iu}),o.jsx(v,{title:"Avg Cost/Lead",value:Oe.formatCurrency(c.currentMonth?.avgCostPerLead||0),icon:qr})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[o.jsx(or,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate Your First Report"}),o.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Generate Report" to create comprehensive reports from your campaign data with custom date ranges and filters.'}),o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(ts,{className:"h-4 w-4 mr-2"}),"Get Started"]})]})]}),o.jsx(eC,{isOpen:h,onClose:()=>m(!1),onReportGenerated:w})]})},sC=()=>o.jsx("div",{className:"p-6",children:o.jsx(tC,{})}),nC=t=>t?new Date(t).toLocaleDateString("en-GB"):"",rC=(t,e)=>{if(!t||!e)return"";const s=new Date(t),n=new Date(e),i=Math.abs(n-s),l=Math.ceil(i/(1e3*60*60*24));return l===0?"Today":l===1?"Yesterday":l<=7?`Last ${l} days`:l<=30?`Last ${Math.ceil(l/7)} weeks`:`${Math.ceil(l/30)} months`},iC=()=>{const[t,e]=N.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[s,n]=N.useState([]),[i,l]=N.useState(null),[c,u]=N.useState(!1),[h,m]=N.useState(""),[p,x]=N.useState({campaigns:[],brands:[],dateRange:{}}),[b,w]=N.useState(!0),[j,v]=N.useState(1),[_]=N.useState(15);N.useEffect(()=>{S(),C()},[]),N.useEffect(()=>{t.dateFrom&&t.dateTo&&E()},[t]);const C=()=>{const $=new Date,re=new Date;re.setDate($.getDate()-30),e(le=>({...le,dateFrom:re.toISOString().split("T")[0],dateTo:$.toISOString().split("T")[0]}))},S=async()=>{try{const $=await Oe.getFilterOptions();$.success&&x($.data)}catch($){console.error("Error loading filter options:",$)}},E=async()=>{if(!(!t.dateFrom||!t.dateTo)){u(!0),m("");try{const $=await Oe.generateReport(t);if($.success){const{reports:re=[],summary:le=null}=$.data||{};n(re),l(le),v(1),console.log("📊 Reports loaded:",{totalRecords:re.length,summary:le,filters:t}),re.length>0&&console.log("🔍 First report data received:",{campaign_name:re[0].campaign_name,facebook_result:re[0].facebook_result,zoho_result:re[0].zoho_result,spent:re[0].spent,facebook_cost_per_lead:re[0].facebook_cost_per_lead,zoho_cost_per_lead:re[0].zoho_cost_per_lead,facebook_cost_per_lead_type:typeof re[0].facebook_cost_per_lead,zoho_cost_per_lead_type:typeof re[0].zoho_cost_per_lead})}else m($.message||"Failed to load reports"),n([]),l(null)}catch($){console.error("Error loading reports:",$),m("Failed to load reports. Please try again."),n([]),l(null)}finally{u(!1)}}},R=($,re)=>{e(le=>({...le,[$]:re})),m("")},A=$=>{const le=Oe.getDateRangePresets()[$];le&&e(V=>({...V,dateFrom:le.from,dateTo:le.to}))},F=()=>{e({dateFrom:"",dateTo:"",campaignId:"",brand:""}),n([]),l(null),v(1)},H=Math.ceil(s.length/_),z=(j-1)*_,K=z+_,W=s.slice(z,K),M=$=>{v(Math.max(1,Math.min($,H)))},X=$=>!$||$===0?"bg-gray-100 text-gray-800":$<5?"bg-green-100 text-green-800":$<10?"bg-yellow-100 text-yellow-800":$<20?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";return o.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[o.jsx(or,{className:"h-8 w-8 mr-3 text-blue-600"}),"Campaign Reports"]}),o.jsxs("p",{className:"text-gray-600 mt-2",children:["Live data from campaign performance •",s.length>0&&o.jsxs("span",{className:"ml-1",children:[rC(t.dateFrom,t.dateTo)," •",s.length," records"]})]})]}),o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs("button",{onClick:E,disabled:c||!t.dateFrom||!t.dateTo,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(Kt,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Loading...":"Refresh Data"]})})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("button",{onClick:()=>w(!b),className:"flex items-center text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:[o.jsx(Tu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Filters & Date Range",o.jsx("svg",{className:`h-4 w-4 ml-2 transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[o.jsx(En,{className:"h-4 w-4 inline mr-1"}),"Date Range (Required)"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(Oe.getDateRangePresets()).map(([$,re])=>o.jsx("button",{onClick:()=>A($),disabled:c,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors disabled:opacity-50",children:re.label},$))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"From Date"}),o.jsx("input",{type:"date",value:t.dateFrom,onChange:$=>R("dateFrom",$.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"To Date"}),o.jsx("input",{type:"date",value:t.dateTo,onChange:$=>R("dateTo",$.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Campaign"}),o.jsxs("select",{value:t.campaignId,onChange:$=>R("campaignId",$.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[o.jsx("option",{value:"",children:"All Campaigns"}),p.campaigns?.map($=>o.jsxs("option",{value:$.id,children:[$.name," ",$.brand&&`(${$.brand})`]},$.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),o.jsxs("select",{value:t.brand,onChange:$=>R("brand",$.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[o.jsx("option",{value:"",children:"All Brands"}),p.brands?.map($=>o.jsx("option",{value:$,children:$},$))]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[o.jsx("button",{onClick:F,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear all filters"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[s.length," record",s.length!==1?"s":""," found"]})]})]})]}),h&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-3"}),o.jsx("p",{className:"text-sm text-red-700",children:h})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Performance Data"}),s.length>0&&o.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",z+1," to ",Math.min(K,s.length)," of ",s.length," entries"]})]})}),c?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Loading campaign data..."})]})}):s.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No data available"}),o.jsx("p",{className:"text-gray-600 max-w-sm mx-auto",children:t.dateFrom&&t.dateTo?"No records found for the selected date range and filters. Try adjusting your selection.":"Please select a date range to view campaign reports."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Campaign"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Brand"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Amount Spent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(($,re)=>{const le=$.facebook_cost_per_lead?parseFloat($.facebook_cost_per_lead):0,V=$.zoho_cost_per_lead?parseFloat($.zoho_cost_per_lead):0;return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.campaign_name||`Campaign ${$.campaign_id}`})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:$.brand||"Unknown"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:nC($.report_date)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Oe.formatNumber($.facebook_result||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Oe.formatNumber($.zoho_result||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Oe.formatCurrency($.spent||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${X(le)}`,children:le>0?Oe.formatCurrency(le):"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${X(V)}`,children:V>0?Oe.formatCurrency(V):"N/A"})})]},`${$.id}-${re}`)})})]})}),H>1&&o.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",o.jsx("span",{className:"font-medium",children:z+1})," to"," ",o.jsx("span",{className:"font-medium",children:Math.min(K,s.length)})," of"," ",o.jsx("span",{className:"font-medium",children:s.length})," results"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>M(j-1),disabled:j===1,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,H)},($,re)=>{let le;return H<=5||j<=3?le=re+1:j>=H-2?le=H-4+re:le=j-2+re,o.jsx("button",{onClick:()=>M(le),className:`px-3 py-1 text-sm rounded transition-colors ${j===le?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:le},le)})}),o.jsx("button",{onClick:()=>M(j+1),disabled:j===H,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})]})},aC=()=>o.jsx("div",{className:"p-6",children:o.jsx(iC,{})}),oC=()=>{const[t,e]=N.useState(null),[s,n]=N.useState(!0),[i,l]=N.useState(null);N.useEffect(()=>{c()},[]);const c=async()=>{n(!0),l(null);try{const u=localStorage.getItem("authToken")||localStorage.getItem("access_token"),h={"Content-Type":"application/json",...u&&{Authorization:`Bearer ${u}`}},p=await(await fetch("/api/analytics/dashboard",{headers:h})).json();p.success?e(p.data):l(p.message||"Failed to load data")}catch(u){console.error("Error loading data:",u),l("Failed to connect to analytics API")}finally{n(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[o.jsx(ts,{className:"mr-3"}),"Report Analytics Dashboard"]}),o.jsx("p",{className:"text-blue-100 mt-1",children:"Campaign performance insights and data visualization"})]}),o.jsxs("button",{onClick:c,disabled:s,className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium transition-colors bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50",children:[o.jsx(Kt,{className:`h-4 w-4 ${s?"animate-spin":""}`}),o.jsx("span",{children:s?"Loading...":"Refresh"})]})]})}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(st,{className:"h-5 w-5 text-red-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-red-600",children:i}),o.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Make sure you're logged in and have proper permissions."})]})]})}),t&&o.jsxs("div",{className:"space-y-6",children:[t.topCampaigns&&t.topCampaigns.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:o.jsx("h3",{className:"text-lg font-medium text-white",children:"Top Campaigns"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Brand"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leads"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Spent"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.topCampaigns.map((u,h)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.campaign_name||`Campaign ${u.campaign_id}`}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.brand||"Unknown"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.total_leads||0}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(u.total_spent||0).toLocaleString()]})]},h))})]})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Debug Information:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-xs",children:[o.jsx("strong",{children:"Current Month:"})," ",t.overview?.currentMonth||"N/A"]}),o.jsxs("div",{className:"text-xs",children:[o.jsx("strong",{children:"User Role:"})," ",t.userRole||"N/A"]}),o.jsxs("div",{className:"text-xs",children:[o.jsx("strong",{children:"Data Scope:"})," ",t.dataScope||"N/A"]}),o.jsxs("div",{className:"text-xs",children:[o.jsx("strong",{children:"Top Campaigns Count:"})," ",t.topCampaigns?.length||0]}),o.jsxs("div",{className:"text-xs",children:[o.jsx("strong",{children:"Brand Performance Count:"})," ",t.brandPerformance?.length||0]})]}),o.jsxs("details",{className:"mt-4",children:[o.jsx("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Full Debug Data (Click to expand)"}),o.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})]})]})},lC=()=>o.jsx("div",{className:"p-6",children:o.jsx(oC,{})}),Kd=()=>{console.log("🔒 Hiding TOTP fields from user interface..."),['input[name*="totp" i]','input[name*="totp_secret" i]','input[name*="totp-secret" i]','input[id*="totp" i]','input[id*="totp_secret" i]','input[id*="totp-secret" i]','label[for*="totp" i]','label[for*="totp_secret" i]','label[for*="totp-secret" i]','button[data-action*="generate-totp" i]','button[data-action*="generate_totp" i]','input[type="button"][value*="Generate TOTP" i]','input[type="submit"][value*="Generate TOTP" i]',".totp-field",".totp-secret-field",".totp_secret_field",".totp-container",".totp_container",".generate-totp",".generate_totp",'[data-field*="totp" i]','[data-field*="totp-secret" i]','[data-field*="totp_secret" i]','[data-name*="totp" i]','[data-name*="totp-secret" i]','[data-name*="totp_secret" i]'].forEach(n=>{try{const i=document.querySelectorAll(n);i.forEach(l=>{l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true");const c=l.closest(".form-group, .form-field, .field-container, .input-group");c&&(c.style.display="none",c.style.visibility="hidden",c.setAttribute("hidden","true"))}),i.length>0&&console.log(`🔒 Hidden ${i.length} elements matching: ${n}`)}catch(i){console.warn(`⚠️ Error hiding elements for selector "${n}":`,i)}}),(n=>{n.forEach(i=>{const l=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1),c=[];let u;for(;u=l.nextNode();)u.textContent.toLowerCase().includes(i.toLowerCase())&&c.push(u);c.forEach(h=>{let m=h.parentElement;for(;m&&m.tagName!=="BODY";){if(["INPUT","LABEL","BUTTON","DIV","SPAN","TR","TD","TH"].includes(m.tagName)){m.style.display="none",m.style.visibility="hidden",m.setAttribute("hidden","true"),console.log(`🔒 Hidden element containing text "${i}":`,m.tagName,m.className);break}m=m.parentElement}})})})(["TOTP Secret","Generate TOTP","TOTP secret","totp secret","Two-Factor Authentication Secret","Authenticator Secret"]),document.querySelectorAll('button, input[type="button"], input[type="submit"]').forEach(n=>{const i=n.textContent||n.value||"";if(i.toLowerCase().includes("generate totp")||i.toLowerCase().includes("generate secret")||i.toLowerCase().includes("totp secret")){n.style.display="none",n.style.visibility="hidden",n.setAttribute("hidden","true");const l=n.closest(".form-group, .form-field, .field-container, .button-group");l&&(l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true")),console.log(`🔒 Hidden button with text: "${i}"`)}}),console.log("✅ TOTP fields hiding completed")},F0=()=>{console.log("🔒 Initializing TOTP field hiding..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Kd):Kd(),new MutationObserver(e=>{let s=!1;e.forEach(n=>{n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&i.querySelector&&(i.querySelector('input[name*="totp" i]')||i.querySelector('*[class*="totp" i]')||i.textContent?.toLowerCase().includes("totp secret")||i.textContent?.toLowerCase().includes("generate totp"))&&(s=!0)})}),s&&(console.log("🔒 New TOTP content detected, hiding fields..."),setTimeout(Kd,100))}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","name"]}),console.log("✅ TOTP field hiding initialized with mutation observer")};typeof window<"u"&&F0();const cC=()=>localStorage.getItem("access_token")||localStorage.getItem("authToken")?o.jsx(Qd,{to:"/dashboard",replace:!0}):o.jsx(Qd,{to:"/login",replace:!0});function dC(){return N.useEffect(()=>{console.log("🔒 App: Initializing TOTP field hiding..."),F0()},[]),o.jsx(N1,{children:o.jsx(Hv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsxs(Lv,{children:[o.jsx(wt,{path:"/login",element:o.jsx(U1,{})}),o.jsx(wt,{path:"/",element:o.jsx(cC,{})}),o.jsx(wt,{path:"/dashboard",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(LS,{})})})})}),o.jsx(wt,{path:"/user-management",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(q1,{})})})})}),o.jsx(wt,{path:"/role-management",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx($S,{})})})})}),o.jsx(wt,{path:"/brands",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(YS,{})})})})}),o.jsx(wt,{path:"/campaign-types",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(HS,{})})})})}),o.jsx(wt,{path:"/cards",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(QS,{})})})})}),o.jsx(wt,{path:"/card-users",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(ZS,{})})})})}),o.jsx(wt,{path:"/campaigns",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(WS,{})})})})}),o.jsx(wt,{path:"/campaigns/:id",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(KS,{})})})})}),o.jsx(wt,{path:"/reports-table",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(aC,{})})})})}),o.jsx(wt,{path:"/reports",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(sC,{})})})})}),o.jsx(wt,{path:"/report-analytics",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx(lC,{})})})})}),o.jsx(wt,{path:"/analytics",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx("div",{className:"p-6",children:"Analytics Module (Coming Soon)"})})})})}),o.jsx(wt,{path:"/settings",element:o.jsx(Ut,{children:o.jsx(Bt,{children:o.jsx($t,{children:o.jsx("div",{className:"p-6",children:"Settings Module (Coming Soon)"})})})})})]})})})}Vb.createRoot(document.getElementById("root")).render(o.jsx(pa.StrictMode,{children:o.jsx(dC,{})}));
