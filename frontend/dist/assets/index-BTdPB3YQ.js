function Vb(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function Jg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _d={exports:{}},Ba={},kd={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function Wb(){if(Hm)return Me;Hm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,v={};function N(P,R,de){this.props=P,this.context=R,this.refs=v,this.updater=de||w}N.prototype.isReactComponent={},N.prototype.setState=function(P,R){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,R,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function E(){}E.prototype=N.prototype;function S(P,R,de){this.props=P,this.context=R,this.refs=v,this.updater=de||w}var C=S.prototype=new E;C.constructor=S,j(C,N.prototype),C.isPureReactComponent=!0;var D=Array.isArray,A=Object.prototype.hasOwnProperty,F={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function M(P,R,de){var he,B={},Z=null,ue=null;if(R!=null)for(he in R.ref!==void 0&&(ue=R.ref),R.key!==void 0&&(Z=""+R.key),R)A.call(R,he)&&!I.hasOwnProperty(he)&&(B[he]=R[he]);var ge=arguments.length-2;if(ge===1)B.children=de;else if(1<ge){for(var Ie=Array(ge),dt=0;dt<ge;dt++)Ie[dt]=arguments[dt+2];B.children=Ie}if(P&&P.defaultProps)for(he in ge=P.defaultProps,ge)B[he]===void 0&&(B[he]=ge[he]);return{$$typeof:t,type:P,key:Z,ref:ue,props:B,_owner:F.current}}function V(P,R){return{$$typeof:t,type:P.type,key:R,ref:P.ref,props:P.props,_owner:P._owner}}function H(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function O(P){var R={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return R[de]})}var K=/\/+/g;function U(P,R){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):R.toString(36)}function ne(P,R,de,he,B){var Z=typeof P;(Z==="undefined"||Z==="boolean")&&(P=null);var ue=!1;if(P===null)ue=!0;else switch(Z){case"string":case"number":ue=!0;break;case"object":switch(P.$$typeof){case t:case e:ue=!0}}if(ue)return ue=P,B=B(ue),P=he===""?"."+U(ue,0):he,D(B)?(de="",P!=null&&(de=P.replace(K,"$&/")+"/"),ne(B,R,de,"",function(dt){return dt})):B!=null&&(H(B)&&(B=V(B,de+(!B.key||ue&&ue.key===B.key?"":(""+B.key).replace(K,"$&/")+"/")+P)),R.push(B)),1;if(ue=0,he=he===""?".":he+":",D(P))for(var ge=0;ge<P.length;ge++){Z=P[ge];var Ie=he+U(Z,ge);ue+=ne(Z,R,de,Ie,B)}else if(Ie=b(P),typeof Ie=="function")for(P=Ie.call(P),ge=0;!(Z=P.next()).done;)Z=Z.value,Ie=he+U(Z,ge++),ue+=ne(Z,R,de,Ie,B);else if(Z==="object")throw R=String(P),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return ue}function re(P,R,de){if(P==null)return P;var he=[],B=0;return ne(P,he,"","",function(Z){return R.call(de,Z,B++)}),he}function $(P){if(P._status===-1){var R=P._result;R=R(),R.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=R)}if(P._status===1)return P._result.default;throw P._result}var J={current:null},Y={transition:null},ee={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:F};function te(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:re,forEach:function(P,R,de){re(P,function(){R.apply(this,arguments)},de)},count:function(P){var R=0;return re(P,function(){R++}),R},toArray:function(P){return re(P,function(R){return R})||[]},only:function(P){if(!H(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Me.Component=N,Me.Fragment=s,Me.Profiler=i,Me.PureComponent=S,Me.StrictMode=n,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Me.act=te,Me.cloneElement=function(P,R,de){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var he=j({},P.props),B=P.key,Z=P.ref,ue=P._owner;if(R!=null){if(R.ref!==void 0&&(Z=R.ref,ue=F.current),R.key!==void 0&&(B=""+R.key),P.type&&P.type.defaultProps)var ge=P.type.defaultProps;for(Ie in R)A.call(R,Ie)&&!I.hasOwnProperty(Ie)&&(he[Ie]=R[Ie]===void 0&&ge!==void 0?ge[Ie]:R[Ie])}var Ie=arguments.length-2;if(Ie===1)he.children=de;else if(1<Ie){ge=Array(Ie);for(var dt=0;dt<Ie;dt++)ge[dt]=arguments[dt+2];he.children=ge}return{$$typeof:t,type:P.type,key:B,ref:Z,props:he,_owner:ue}},Me.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},Me.createElement=M,Me.createFactory=function(P){var R=M.bind(null,P);return R.type=P,R},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:u,render:P}},Me.isValidElement=H,Me.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:$}},Me.memo=function(P,R){return{$$typeof:m,type:P,compare:R===void 0?null:R}},Me.startTransition=function(P){var R=Y.transition;Y.transition={};try{P()}finally{Y.transition=R}},Me.unstable_act=te,Me.useCallback=function(P,R){return J.current.useCallback(P,R)},Me.useContext=function(P){return J.current.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P){return J.current.useDeferredValue(P)},Me.useEffect=function(P,R){return J.current.useEffect(P,R)},Me.useId=function(){return J.current.useId()},Me.useImperativeHandle=function(P,R,de){return J.current.useImperativeHandle(P,R,de)},Me.useInsertionEffect=function(P,R){return J.current.useInsertionEffect(P,R)},Me.useLayoutEffect=function(P,R){return J.current.useLayoutEffect(P,R)},Me.useMemo=function(P,R){return J.current.useMemo(P,R)},Me.useReducer=function(P,R,de){return J.current.useReducer(P,R,de)},Me.useRef=function(P){return J.current.useRef(P)},Me.useState=function(P){return J.current.useState(P)},Me.useSyncExternalStore=function(P,R,de){return J.current.useSyncExternalStore(P,R,de)},Me.useTransition=function(){return J.current.useTransition()},Me.version="18.3.1",Me}var Vm;function _u(){return Vm||(Vm=1,kd.exports=Wb()),kd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function qb(){if(Wm)return Ba;Wm=1;var t=_u(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var p,x={},b=null,w=null;m!==void 0&&(b=""+m),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!l.hasOwnProperty(p)&&(x[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)x[p]===void 0&&(x[p]=h[p]);return{$$typeof:e,type:u,key:b,ref:w,props:x,_owner:i.current}}return Ba.Fragment=s,Ba.jsx=c,Ba.jsxs=c,Ba}var qm;function Yb(){return qm||(qm=1,_d.exports=qb()),_d.exports}var a=Yb(),_=_u();const vi=Jg(_),Kb=Vb({__proto__:null,default:vi},[_]);var Fo={},Sd={exports:{}},Ht={},Cd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function Xb(){return Ym||(Ym=1,(function(t){function e(Y,ee){var te=Y.length;Y.push(ee);e:for(;0<te;){var P=te-1>>>1,R=Y[P];if(0<i(R,ee))Y[P]=ee,Y[te]=R,te=P;else break e}}function s(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ee=Y[0],te=Y.pop();if(te!==ee){Y[0]=te;e:for(var P=0,R=Y.length,de=R>>>1;P<de;){var he=2*(P+1)-1,B=Y[he],Z=he+1,ue=Y[Z];if(0>i(B,te))Z<R&&0>i(ue,B)?(Y[P]=ue,Y[Z]=te,P=Z):(Y[P]=B,Y[he]=te,P=he);else if(Z<R&&0>i(ue,te))Y[P]=ue,Y[Z]=te,P=Z;else break e}}return ee}function i(Y,ee){var te=Y.sortIndex-ee.sortIndex;return te!==0?te:Y.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],m=[],p=1,x=null,b=3,w=!1,j=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Y){for(var ee=s(m);ee!==null;){if(ee.callback===null)n(m);else if(ee.startTime<=Y)n(m),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=s(m)}}function D(Y){if(v=!1,C(Y),!j)if(s(h)!==null)j=!0,$(A);else{var ee=s(m);ee!==null&&J(D,ee.startTime-Y)}}function A(Y,ee){j=!1,v&&(v=!1,E(M),M=-1),w=!0;var te=b;try{for(C(ee),x=s(h);x!==null&&(!(x.expirationTime>ee)||Y&&!O());){var P=x.callback;if(typeof P=="function"){x.callback=null,b=x.priorityLevel;var R=P(x.expirationTime<=ee);ee=t.unstable_now(),typeof R=="function"?x.callback=R:x===s(h)&&n(h),C(ee)}else n(h);x=s(h)}if(x!==null)var de=!0;else{var he=s(m);he!==null&&J(D,he.startTime-ee),de=!1}return de}finally{x=null,b=te,w=!1}}var F=!1,I=null,M=-1,V=5,H=-1;function O(){return!(t.unstable_now()-H<V)}function K(){if(I!==null){var Y=t.unstable_now();H=Y;var ee=!0;try{ee=I(!0,Y)}finally{ee?U():(F=!1,I=null)}}else F=!1}var U;if(typeof S=="function")U=function(){S(K)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,re=ne.port2;ne.port1.onmessage=K,U=function(){re.postMessage(null)}}else U=function(){N(K,0)};function $(Y){I=Y,F||(F=!0,U())}function J(Y,ee){M=N(function(){Y(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){j||w||(j=!0,$(A))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var ee=3;break;default:ee=b}var te=b;b=ee;try{return Y()}finally{b=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=b;b=Y;try{return ee()}finally{b=te}},t.unstable_scheduleCallback=function(Y,ee,te){var P=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?P+te:P):te=P,Y){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=te+R,Y={id:p++,callback:ee,priorityLevel:Y,startTime:te,expirationTime:R,sortIndex:-1},te>P?(Y.sortIndex=te,e(m,Y),s(h)===null&&Y===s(m)&&(v?(E(M),M=-1):v=!0,J(D,te-P))):(Y.sortIndex=R,e(h,Y),j||w||(j=!0,$(A))),Y},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Y){var ee=b;return function(){var te=b;b=ee;try{return Y.apply(this,arguments)}finally{b=te}}}})(Ed)),Ed}var Km;function Gb(){return Km||(Km=1,Cd.exports=Xb()),Cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function Qb(){if(Xm)return Ht;Xm=1;var t=_u(),e=Gb();function s(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(r,o){c(r,o),c(r+"Capture",o)}function c(r,o){for(i[r]=o,r=0;r<o.length;r++)n.add(o[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},x={};function b(r){return h.call(x,r)?!0:h.call(p,r)?!1:m.test(r)?x[r]=!0:(p[r]=!0,!1)}function w(r,o,d,f){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,o,d,f){if(o===null||typeof o>"u"||w(r,o,d,f))return!0;if(f)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v(r,o,d,f,g,y,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=d,this.propertyName=r,this.type=o,this.sanitizeURL=y,this.removeEmptyString=k}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){N[r]=new v(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];N[o]=new v(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){N[r]=new v(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){N[r]=new v(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){N[r]=new v(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){N[r]=new v(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){N[r]=new v(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){N[r]=new v(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){N[r]=new v(r,5,!1,r.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function S(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(E,S);N[o]=new v(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(E,S);N[o]=new v(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(E,S);N[o]=new v(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){N[r]=new v(r,1,!1,r.toLowerCase(),null,!1,!1)}),N.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){N[r]=new v(r,1,!1,r.toLowerCase(),null,!0,!0)});function C(r,o,d,f){var g=N.hasOwnProperty(o)?N[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(j(o,d,g,f)&&(d=null),f||g===null?b(o)&&(d===null?r.removeAttribute(o):r.setAttribute(o,""+d)):g.mustUseProperty?r[g.propertyName]=d===null?g.type===3?!1:"":d:(o=g.attributeName,f=g.attributeNamespace,d===null?r.removeAttribute(o):(g=g.type,d=g===3||g===4&&d===!0?"":""+d,f?r.setAttributeNS(f,o,d):r.setAttribute(o,d))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),F=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),O=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ee(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,P;function R(r){if(P===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);P=o&&o[1]||""}return`
`+P+r}var de=!1;function he(r,o){if(!r||de)return"";de=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var f=G}Reflect.construct(r,[],o)}else{try{o.call()}catch(G){f=G}r.call(o.prototype)}else{try{throw Error()}catch(G){f=G}r()}}catch(G){if(G&&f&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),y=f.stack.split(`
`),k=g.length-1,T=y.length-1;1<=k&&0<=T&&g[k]!==y[T];)T--;for(;1<=k&&0<=T;k--,T--)if(g[k]!==y[T]){if(k!==1||T!==1)do if(k--,T--,0>T||g[k]!==y[T]){var L=`
`+g[k].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=k&&0<=T);break}}}finally{de=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?R(r):""}function B(r){switch(r.tag){case 5:return R(r.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return r=he(r.type,!1),r;case 11:return r=he(r.type.render,!1),r;case 1:return r=he(r.type,!0),r;default:return""}}function Z(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case F:return"Portal";case V:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case ne:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case H:return(r._context.displayName||"Context")+".Provider";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case re:return o=r.displayName||null,o!==null?o:Z(r.type)||"Memo";case $:o=r._payload,r=r._init;try{return Z(r(o))}catch{}}return null}function ue(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(o);case 8:return o===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ge(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ie(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function dt(r){var o=Ie(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ye(r){r._valueTracker||(r._valueTracker=dt(r))}function Be(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var d=o.getValue(),f="";return r&&(f=Ie(r)?r.checked?"true":"false":r.value),r=f,r!==d?(o.setValue(r),!0):!1}function ss(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function X(r,o){var d=o.checked;return te({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function be(r,o){var d=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;d=ge(o.value!=null?o.value:d),r._wrapperState={initialChecked:f,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function De(r,o){o=o.checked,o!=null&&C(r,"checked",o,!1)}function ke(r,o){De(r,o);var d=ge(o.value),f=o.type;if(d!=null)f==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?je(r,o.type,d):o.hasOwnProperty("defaultValue")&&je(r,o.type,ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function Ae(r,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,d||o===r.value||(r.value=o),r.defaultValue=o}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function je(r,o,d){(o!=="number"||ss(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var Ve=Array.isArray;function ft(r,o,d,f){if(r=r.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<r.length;d++)g=o.hasOwnProperty("$"+r[d].value),r[d].selected!==g&&(r[d].selected=g),g&&f&&(r[d].defaultSelected=!0)}else{for(d=""+ge(d),o=null,g=0;g<r.length;g++){if(r[g].value===d){r[g].selected=!0,f&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function se(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(s(91));return te({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function le(r,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(s(92));if(Ve(d)){if(1<d.length)throw Error(s(93));d=d[0]}o=d}o==null&&(o=""),d=o}r._wrapperState={initialValue:ge(d)}}function me(r,o){var d=ge(o.value),f=ge(o.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),o.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),f!=null&&(r.defaultValue=""+f)}function Ke(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function $s(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?$s(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ns,Ss=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,f,g){MSApp.execUnsafeLocalFunction(function(){return r(o,d,f,g)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(ns=ns||document.createElement("div"),ns.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ns.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function ms(r,o){if(o){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=o;return}}r.textContent=o}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K0=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(r){K0.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),ra[o]=ra[r]})});function nh(r,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||ra.hasOwnProperty(r)&&ra[r]?(""+o).trim():o+"px"}function rh(r,o){r=r.style;for(var d in o)if(o.hasOwnProperty(d)){var f=d.indexOf("--")===0,g=nh(d,o[d],f);d==="float"&&(d="cssFloat"),f?r.setProperty(d,g):r[d]=g}}var X0=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(r,o){if(o){if(X0[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(s(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(s(61))}if(o.style!=null&&typeof o.style!="object")throw Error(s(62))}}function Ol(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function zl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var $l=null,gr=null,xr=null;function ah(r){if(r=Sa(r)){if(typeof $l!="function")throw Error(s(280));var o=r.stateNode;o&&(o=Xi(o),$l(r.stateNode,r.type,o))}}function ih(r){gr?xr?xr.push(r):xr=[r]:gr=r}function oh(){if(gr){var r=gr,o=xr;if(xr=gr=null,ah(r),o)for(r=0;r<o.length;r++)ah(o[r])}}function lh(r,o){return r(o)}function ch(){}var Bl=!1;function dh(r,o,d){if(Bl)return r(o,d);Bl=!0;try{return lh(r,o,d)}finally{Bl=!1,(gr!==null||xr!==null)&&(ch(),oh())}}function aa(r,o){var d=r.stateNode;if(d===null)return null;var f=Xi(d);if(f===null)return null;d=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(s(231,o,typeof d));return d}var Ul=!1;if(u)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{Ul=!1}function G0(r,o,d,f,g,y,k,T,L){var G=Array.prototype.slice.call(arguments,3);try{o.apply(d,G)}catch(ie){this.onError(ie)}}var oa=!1,Ci=null,Ei=!1,Hl=null,Q0={onError:function(r){oa=!0,Ci=r}};function J0(r,o,d,f,g,y,k,T,L){oa=!1,Ci=null,G0.apply(Q0,arguments)}function Z0(r,o,d,f,g,y,k,T,L){if(J0.apply(this,arguments),oa){if(oa){var G=Ci;oa=!1,Ci=null}else throw Error(s(198));Ei||(Ei=!0,Hl=G)}}function $n(r){var o=r,d=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(d=o.return),r=o.return;while(r)}return o.tag===3?d:null}function uh(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function hh(r){if($n(r)!==r)throw Error(s(188))}function ey(r){var o=r.alternate;if(!o){if(o=$n(r),o===null)throw Error(s(188));return o!==r?null:r}for(var d=r,f=o;;){var g=d.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===d)return hh(g),r;if(y===f)return hh(g),o;y=y.sibling}throw Error(s(188))}if(d.return!==f.return)d=g,f=y;else{for(var k=!1,T=g.child;T;){if(T===d){k=!0,d=g,f=y;break}if(T===f){k=!0,f=g,d=y;break}T=T.sibling}if(!k){for(T=y.child;T;){if(T===d){k=!0,d=y,f=g;break}if(T===f){k=!0,f=y,d=g;break}T=T.sibling}if(!k)throw Error(s(189))}}if(d.alternate!==f)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?r:o}function fh(r){return r=ey(r),r!==null?mh(r):null}function mh(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=mh(r);if(o!==null)return o;r=r.sibling}return null}var ph=e.unstable_scheduleCallback,gh=e.unstable_cancelCallback,ty=e.unstable_shouldYield,sy=e.unstable_requestPaint,rt=e.unstable_now,ny=e.unstable_getCurrentPriorityLevel,Vl=e.unstable_ImmediatePriority,xh=e.unstable_UserBlockingPriority,Pi=e.unstable_NormalPriority,ry=e.unstable_LowPriority,yh=e.unstable_IdlePriority,Ai=null,Cs=null;function ay(r){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(Ai,r,void 0,(r.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:ly,iy=Math.log,oy=Math.LN2;function ly(r){return r>>>=0,r===0?32:31-(iy(r)/oy|0)|0}var Ti=64,Di=4194304;function la(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ri(r,o){var d=r.pendingLanes;if(d===0)return 0;var f=0,g=r.suspendedLanes,y=r.pingedLanes,k=d&268435455;if(k!==0){var T=k&~g;T!==0?f=la(T):(y&=k,y!==0&&(f=la(y)))}else k=d&~g,k!==0?f=la(k):y!==0&&(f=la(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=d&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=f;0<o;)d=31-ps(o),g=1<<d,f|=r[d],o&=~g;return f}function cy(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(r,o){for(var d=r.suspendedLanes,f=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes;0<y;){var k=31-ps(y),T=1<<k,L=g[k];L===-1?((T&d)===0||(T&f)!==0)&&(g[k]=cy(T,o)):L<=o&&(r.expiredLanes|=T),y&=~T}}function Wl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function bh(){var r=Ti;return Ti<<=1,(Ti&4194240)===0&&(Ti=64),r}function ql(r){for(var o=[],d=0;31>d;d++)o.push(r);return o}function ca(r,o,d){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-ps(o),r[o]=d}function uy(r,o){var d=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<d;){var g=31-ps(d),y=1<<g;o[g]=0,f[g]=-1,r[g]=-1,d&=~y}}function Yl(r,o){var d=r.entangledLanes|=o;for(r=r.entanglements;d;){var f=31-ps(d),g=1<<f;g&o|r[f]&o&&(r[f]|=o),d&=~g}}var We=0;function vh(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var wh,Kl,jh,Nh,_h,Xl=!1,Mi=[],on=null,ln=null,cn=null,da=new Map,ua=new Map,dn=[],hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kh(r,o){switch(r){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":da.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(o.pointerId)}}function ha(r,o,d,f,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:d,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Sa(o),o!==null&&Kl(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function fy(r,o,d,f,g){switch(o){case"focusin":return on=ha(on,r,o,d,f,g),!0;case"dragenter":return ln=ha(ln,r,o,d,f,g),!0;case"mouseover":return cn=ha(cn,r,o,d,f,g),!0;case"pointerover":var y=g.pointerId;return da.set(y,ha(da.get(y)||null,r,o,d,f,g)),!0;case"gotpointercapture":return y=g.pointerId,ua.set(y,ha(ua.get(y)||null,r,o,d,f,g)),!0}return!1}function Sh(r){var o=Bn(r.target);if(o!==null){var d=$n(o);if(d!==null){if(o=d.tag,o===13){if(o=uh(d),o!==null){r.blockedOn=o,_h(r.priority,function(){jh(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Fi(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var d=Ql(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var f=new d.constructor(d.type,d);Il=f,d.target.dispatchEvent(f),Il=null}else return o=Sa(d),o!==null&&Kl(o),r.blockedOn=d,!1;o.shift()}return!0}function Ch(r,o,d){Fi(r)&&d.delete(o)}function my(){Xl=!1,on!==null&&Fi(on)&&(on=null),ln!==null&&Fi(ln)&&(ln=null),cn!==null&&Fi(cn)&&(cn=null),da.forEach(Ch),ua.forEach(Ch)}function fa(r,o){r.blockedOn===o&&(r.blockedOn=null,Xl||(Xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,my)))}function ma(r){function o(g){return fa(g,r)}if(0<Mi.length){fa(Mi[0],r);for(var d=1;d<Mi.length;d++){var f=Mi[d];f.blockedOn===r&&(f.blockedOn=null)}}for(on!==null&&fa(on,r),ln!==null&&fa(ln,r),cn!==null&&fa(cn,r),da.forEach(o),ua.forEach(o),d=0;d<dn.length;d++)f=dn[d],f.blockedOn===r&&(f.blockedOn=null);for(;0<dn.length&&(d=dn[0],d.blockedOn===null);)Sh(d),d.blockedOn===null&&dn.shift()}var yr=D.ReactCurrentBatchConfig,Li=!0;function py(r,o,d,f){var g=We,y=yr.transition;yr.transition=null;try{We=1,Gl(r,o,d,f)}finally{We=g,yr.transition=y}}function gy(r,o,d,f){var g=We,y=yr.transition;yr.transition=null;try{We=4,Gl(r,o,d,f)}finally{We=g,yr.transition=y}}function Gl(r,o,d,f){if(Li){var g=Ql(r,o,d,f);if(g===null)mc(r,o,f,Oi,d),kh(r,f);else if(fy(g,r,o,d,f))f.stopPropagation();else if(kh(r,f),o&4&&-1<hy.indexOf(r)){for(;g!==null;){var y=Sa(g);if(y!==null&&wh(y),y=Ql(r,o,d,f),y===null&&mc(r,o,f,Oi,d),y===g)break;g=y}g!==null&&f.stopPropagation()}else mc(r,o,f,null,d)}}var Oi=null;function Ql(r,o,d,f){if(Oi=null,r=zl(f),r=Bn(r),r!==null)if(o=$n(r),o===null)r=null;else if(d=o.tag,d===13){if(r=uh(o),r!==null)return r;r=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Oi=r,null}function Eh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ny()){case Vl:return 1;case xh:return 4;case Pi:case ry:return 16;case yh:return 536870912;default:return 16}default:return 16}}var un=null,Jl=null,Ii=null;function Ph(){if(Ii)return Ii;var r,o=Jl,d=o.length,f,g="value"in un?un.value:un.textContent,y=g.length;for(r=0;r<d&&o[r]===g[r];r++);var k=d-r;for(f=1;f<=k&&o[d-f]===g[y-f];f++);return Ii=g.slice(r,1<f?1-f:void 0)}function zi(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function $i(){return!0}function Ah(){return!1}function Gt(r){function o(d,f,g,y,k){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(d=r[T],this[T]=d?d(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?$i:Ah,this.isPropagationStopped=Ah,this}return te(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),o}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=Gt(br),pa=te({},br,{view:0,detail:0}),xy=Gt(pa),ec,tc,ga,Bi=te({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ga&&(ga&&r.type==="mousemove"?(ec=r.screenX-ga.screenX,tc=r.screenY-ga.screenY):tc=ec=0,ga=r),ec)},movementY:function(r){return"movementY"in r?r.movementY:tc}}),Th=Gt(Bi),yy=te({},Bi,{dataTransfer:0}),by=Gt(yy),vy=te({},pa,{relatedTarget:0}),sc=Gt(vy),wy=te({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),jy=Gt(wy),Ny=te({},br,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_y=Gt(Ny),ky=te({},br,{data:0}),Dh=Gt(ky),Sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Py(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ey[r])?!!o[r]:!1}function nc(){return Py}var Ay=te({},pa,{key:function(r){if(r.key){var o=Sy[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=zi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(r){return r.type==="keypress"?zi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?zi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ty=Gt(Ay),Dy=te({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=Gt(Dy),Ry=te({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),My=Gt(Ry),Fy=te({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ly=Gt(Fy),Oy=te({},Bi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=Gt(Oy),zy=[9,13,27,32],rc=u&&"CompositionEvent"in window,xa=null;u&&"documentMode"in document&&(xa=document.documentMode);var $y=u&&"TextEvent"in window&&!xa,Mh=u&&(!rc||xa&&8<xa&&11>=xa),Fh=" ",Lh=!1;function Oh(r,o){switch(r){case"keyup":return zy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var vr=!1;function By(r,o){switch(r){case"compositionend":return Ih(o);case"keypress":return o.which!==32?null:(Lh=!0,Fh);case"textInput":return r=o.data,r===Fh&&Lh?null:r;default:return null}}function Uy(r,o){if(vr)return r==="compositionend"||!rc&&Oh(r,o)?(r=Ph(),Ii=Jl=un=null,vr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Mh&&o.locale!=="ko"?null:o.data;default:return null}}var Hy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Hy[r.type]:o==="textarea"}function $h(r,o,d,f){ih(f),o=qi(o,"onChange"),0<o.length&&(d=new Zl("onChange","change",null,d,f),r.push({event:d,listeners:o}))}var ya=null,ba=null;function Vy(r){rf(r,0)}function Ui(r){var o=kr(r);if(Be(o))return r}function Wy(r,o){if(r==="change")return o}var Bh=!1;if(u){var ac;if(u){var ic="oninput"in document;if(!ic){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),ic=typeof Uh.oninput=="function"}ac=ic}else ac=!1;Bh=ac&&(!document.documentMode||9<document.documentMode)}function Hh(){ya&&(ya.detachEvent("onpropertychange",Vh),ba=ya=null)}function Vh(r){if(r.propertyName==="value"&&Ui(ba)){var o=[];$h(o,ba,r,zl(r)),dh(Vy,o)}}function qy(r,o,d){r==="focusin"?(Hh(),ya=o,ba=d,ya.attachEvent("onpropertychange",Vh)):r==="focusout"&&Hh()}function Yy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ui(ba)}function Ky(r,o){if(r==="click")return Ui(o)}function Xy(r,o){if(r==="input"||r==="change")return Ui(o)}function Gy(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gs=typeof Object.is=="function"?Object.is:Gy;function va(r,o){if(gs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var d=Object.keys(r),f=Object.keys(o);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!h.call(o,g)||!gs(r[g],o[g]))return!1}return!0}function Wh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qh(r,o){var d=Wh(r);r=0;for(var f;d;){if(d.nodeType===3){if(f=r+d.textContent.length,r<=o&&f>=o)return{node:d,offset:o-r};r=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Wh(d)}}function Yh(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Yh(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Kh(){for(var r=window,o=ss();o instanceof r.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)r=o.contentWindow;else break;o=ss(r.document)}return o}function oc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function Qy(r){var o=Kh(),d=r.focusedElem,f=r.selectionRange;if(o!==d&&d&&d.ownerDocument&&Yh(d.ownerDocument.documentElement,d)){if(f!==null&&oc(d)){if(o=f.start,r=f.end,r===void 0&&(r=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(r,d.value.length);else if(r=(o=d.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var g=d.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!r.extend&&y>f&&(g=f,f=y,y=g),g=qh(d,y);var k=qh(d,f);g&&k&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),r.removeAllRanges(),y>f?(r.addRange(o),r.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),r.addRange(o)))}}for(o=[],r=d;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)r=o[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Jy=u&&"documentMode"in document&&11>=document.documentMode,wr=null,lc=null,wa=null,cc=!1;function Xh(r,o,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;cc||wr==null||wr!==ss(f)||(f=wr,"selectionStart"in f&&oc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),wa&&va(wa,f)||(wa=f,f=qi(lc,"onSelect"),0<f.length&&(o=new Zl("onSelect","select",null,o,d),r.push({event:o,listeners:f}),o.target=wr)))}function Hi(r,o){var d={};return d[r.toLowerCase()]=o.toLowerCase(),d["Webkit"+r]="webkit"+o,d["Moz"+r]="moz"+o,d}var jr={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},dc={},Gh={};u&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function Vi(r){if(dc[r])return dc[r];if(!jr[r])return r;var o=jr[r],d;for(d in o)if(o.hasOwnProperty(d)&&d in Gh)return dc[r]=o[d];return r}var Qh=Vi("animationend"),Jh=Vi("animationiteration"),Zh=Vi("animationstart"),ef=Vi("transitionend"),tf=new Map,sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(r,o){tf.set(r,o),l(o,[r])}for(var uc=0;uc<sf.length;uc++){var hc=sf[uc],Zy=hc.toLowerCase(),eb=hc[0].toUpperCase()+hc.slice(1);hn(Zy,"on"+eb)}hn(Qh,"onAnimationEnd"),hn(Jh,"onAnimationIteration"),hn(Zh,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(ef,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function nf(r,o,d){var f=r.type||"unknown-event";r.currentTarget=d,Z0(f,o,void 0,r),r.currentTarget=null}function rf(r,o){o=(o&4)!==0;for(var d=0;d<r.length;d++){var f=r[d],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var k=f.length-1;0<=k;k--){var T=f[k],L=T.instance,G=T.currentTarget;if(T=T.listener,L!==y&&g.isPropagationStopped())break e;nf(g,T,G),y=L}else for(k=0;k<f.length;k++){if(T=f[k],L=T.instance,G=T.currentTarget,T=T.listener,L!==y&&g.isPropagationStopped())break e;nf(g,T,G),y=L}}}if(Ei)throw r=Hl,Ei=!1,Hl=null,r}function Ge(r,o){var d=o[vc];d===void 0&&(d=o[vc]=new Set);var f=r+"__bubble";d.has(f)||(af(o,r,2,!1),d.add(f))}function fc(r,o,d){var f=0;o&&(f|=4),af(d,r,f,o)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function Na(r){if(!r[Wi]){r[Wi]=!0,n.forEach(function(d){d!=="selectionchange"&&(tb.has(d)||fc(d,!1,r),fc(d,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Wi]||(o[Wi]=!0,fc("selectionchange",!1,o))}}function af(r,o,d,f){switch(Eh(o)){case 1:var g=py;break;case 4:g=gy;break;default:g=Gl}d=g.bind(null,o,d,r),g=void 0,!Ul||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?r.addEventListener(o,d,{capture:!0,passive:g}):r.addEventListener(o,d,!0):g!==void 0?r.addEventListener(o,d,{passive:g}):r.addEventListener(o,d,!1)}function mc(r,o,d,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var T=f.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(k===4)for(k=f.return;k!==null;){var L=k.tag;if((L===3||L===4)&&(L=k.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;k=k.return}for(;T!==null;){if(k=Bn(T),k===null)return;if(L=k.tag,L===5||L===6){f=y=k;continue e}T=T.parentNode}}f=f.return}dh(function(){var G=y,ie=zl(d),ce=[];e:{var ae=tf.get(r);if(ae!==void 0){var pe=Zl,ve=r;switch(r){case"keypress":if(zi(d)===0)break e;case"keydown":case"keyup":pe=Ty;break;case"focusin":ve="focus",pe=sc;break;case"focusout":ve="blur",pe=sc;break;case"beforeblur":case"afterblur":pe=sc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=My;break;case Qh:case Jh:case Zh:pe=jy;break;case ef:pe=Ly;break;case"scroll":pe=xy;break;case"wheel":pe=Iy;break;case"copy":case"cut":case"paste":pe=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Rh}var we=(o&4)!==0,at=!we&&r==="scroll",W=we?ae!==null?ae+"Capture":null:ae;we=[];for(var z=G,q;z!==null;){q=z;var fe=q.stateNode;if(q.tag===5&&fe!==null&&(q=fe,W!==null&&(fe=aa(z,W),fe!=null&&we.push(_a(z,fe,q)))),at)break;z=z.return}0<we.length&&(ae=new pe(ae,ve,null,d,ie),ce.push({event:ae,listeners:we}))}}if((o&7)===0){e:{if(ae=r==="mouseover"||r==="pointerover",pe=r==="mouseout"||r==="pointerout",ae&&d!==Il&&(ve=d.relatedTarget||d.fromElement)&&(Bn(ve)||ve[Bs]))break e;if((pe||ae)&&(ae=ie.window===ie?ie:(ae=ie.ownerDocument)?ae.defaultView||ae.parentWindow:window,pe?(ve=d.relatedTarget||d.toElement,pe=G,ve=ve?Bn(ve):null,ve!==null&&(at=$n(ve),ve!==at||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=G),pe!==ve)){if(we=Th,fe="onMouseLeave",W="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(we=Rh,fe="onPointerLeave",W="onPointerEnter",z="pointer"),at=pe==null?ae:kr(pe),q=ve==null?ae:kr(ve),ae=new we(fe,z+"leave",pe,d,ie),ae.target=at,ae.relatedTarget=q,fe=null,Bn(ie)===G&&(we=new we(W,z+"enter",ve,d,ie),we.target=q,we.relatedTarget=at,fe=we),at=fe,pe&&ve)t:{for(we=pe,W=ve,z=0,q=we;q;q=Nr(q))z++;for(q=0,fe=W;fe;fe=Nr(fe))q++;for(;0<z-q;)we=Nr(we),z--;for(;0<q-z;)W=Nr(W),q--;for(;z--;){if(we===W||W!==null&&we===W.alternate)break t;we=Nr(we),W=Nr(W)}we=null}else we=null;pe!==null&&of(ce,ae,pe,we,!1),ve!==null&&at!==null&&of(ce,at,ve,we,!0)}}e:{if(ae=G?kr(G):window,pe=ae.nodeName&&ae.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ae.type==="file")var Ne=Wy;else if(zh(ae))if(Bh)Ne=Xy;else{Ne=Yy;var Se=qy}else(pe=ae.nodeName)&&pe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ne=Ky);if(Ne&&(Ne=Ne(r,G))){$h(ce,Ne,d,ie);break e}Se&&Se(r,ae,G),r==="focusout"&&(Se=ae._wrapperState)&&Se.controlled&&ae.type==="number"&&je(ae,"number",ae.value)}switch(Se=G?kr(G):window,r){case"focusin":(zh(Se)||Se.contentEditable==="true")&&(wr=Se,lc=G,wa=null);break;case"focusout":wa=lc=wr=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,Xh(ce,d,ie);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":Xh(ce,d,ie)}var Ce;if(rc)e:{switch(r){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else vr?Oh(r,d)&&(Pe="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Pe="onCompositionStart");Pe&&(Mh&&d.locale!=="ko"&&(vr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&vr&&(Ce=Ph()):(un=ie,Jl="value"in un?un.value:un.textContent,vr=!0)),Se=qi(G,Pe),0<Se.length&&(Pe=new Dh(Pe,r,null,d,ie),ce.push({event:Pe,listeners:Se}),Ce?Pe.data=Ce:(Ce=Ih(d),Ce!==null&&(Pe.data=Ce)))),(Ce=$y?By(r,d):Uy(r,d))&&(G=qi(G,"onBeforeInput"),0<G.length&&(ie=new Dh("onBeforeInput","beforeinput",null,d,ie),ce.push({event:ie,listeners:G}),ie.data=Ce))}rf(ce,o)})}function _a(r,o,d){return{instance:r,listener:o,currentTarget:d}}function qi(r,o){for(var d=o+"Capture",f=[];r!==null;){var g=r,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=aa(r,d),y!=null&&f.unshift(_a(r,y,g)),y=aa(r,o),y!=null&&f.push(_a(r,y,g))),r=r.return}return f}function Nr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function of(r,o,d,f,g){for(var y=o._reactName,k=[];d!==null&&d!==f;){var T=d,L=T.alternate,G=T.stateNode;if(L!==null&&L===f)break;T.tag===5&&G!==null&&(T=G,g?(L=aa(d,y),L!=null&&k.unshift(_a(d,L,T))):g||(L=aa(d,y),L!=null&&k.push(_a(d,L,T)))),d=d.return}k.length!==0&&r.push({event:o,listeners:k})}var sb=/\r\n?/g,nb=/\u0000|\uFFFD/g;function lf(r){return(typeof r=="string"?r:""+r).replace(sb,`
`).replace(nb,"")}function Yi(r,o,d){if(o=lf(o),lf(r)!==o&&d)throw Error(s(425))}function Ki(){}var pc=null,gc=null;function xc(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,rb=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,ab=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(r){return cf.resolve(null).then(r).catch(ib)}:yc;function ib(r){setTimeout(function(){throw r})}function bc(r,o){var d=o,f=0;do{var g=d.nextSibling;if(r.removeChild(d),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(f===0){r.removeChild(g),ma(o);return}f--}else d!=="$"&&d!=="$?"&&d!=="$!"||f++;d=g}while(d);ma(o)}function fn(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function df(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return r;o--}else d==="/$"&&o++}r=r.previousSibling}return null}var _r=Math.random().toString(36).slice(2),Es="__reactFiber$"+_r,ka="__reactProps$"+_r,Bs="__reactContainer$"+_r,vc="__reactEvents$"+_r,ob="__reactListeners$"+_r,lb="__reactHandles$"+_r;function Bn(r){var o=r[Es];if(o)return o;for(var d=r.parentNode;d;){if(o=d[Bs]||d[Es]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(r=df(r);r!==null;){if(d=r[Es])return d;r=df(r)}return o}r=d,d=r.parentNode}return null}function Sa(r){return r=r[Es]||r[Bs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function kr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function Xi(r){return r[ka]||null}var wc=[],Sr=-1;function mn(r){return{current:r}}function Qe(r){0>Sr||(r.current=wc[Sr],wc[Sr]=null,Sr--)}function Xe(r,o){Sr++,wc[Sr]=r.current,r.current=o}var pn={},_t=mn(pn),It=mn(!1),Un=pn;function Cr(r,o){var d=r.type.contextTypes;if(!d)return pn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in d)g[y]=o[y];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=g),g}function zt(r){return r=r.childContextTypes,r!=null}function Gi(){Qe(It),Qe(_t)}function uf(r,o,d){if(_t.current!==pn)throw Error(s(168));Xe(_t,o),Xe(It,d)}function hf(r,o,d){var f=r.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(s(108,ue(r)||"Unknown",g));return te({},d,f)}function Qi(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pn,Un=_t.current,Xe(_t,r),Xe(It,It.current),!0}function ff(r,o,d){var f=r.stateNode;if(!f)throw Error(s(169));d?(r=hf(r,o,Un),f.__reactInternalMemoizedMergedChildContext=r,Qe(It),Qe(_t),Xe(_t,r)):Qe(It),Xe(It,d)}var Us=null,Ji=!1,jc=!1;function mf(r){Us===null?Us=[r]:Us.push(r)}function cb(r){Ji=!0,mf(r)}function gn(){if(!jc&&Us!==null){jc=!0;var r=0,o=We;try{var d=Us;for(We=1;r<d.length;r++){var f=d[r];do f=f(!0);while(f!==null)}Us=null,Ji=!1}catch(g){throw Us!==null&&(Us=Us.slice(r+1)),ph(Vl,gn),g}finally{We=o,jc=!1}}return null}var Er=[],Pr=0,Zi=null,eo=0,rs=[],as=0,Hn=null,Hs=1,Vs="";function Vn(r,o){Er[Pr++]=eo,Er[Pr++]=Zi,Zi=r,eo=o}function pf(r,o,d){rs[as++]=Hs,rs[as++]=Vs,rs[as++]=Hn,Hn=r;var f=Hs;r=Vs;var g=32-ps(f)-1;f&=~(1<<g),d+=1;var y=32-ps(o)+g;if(30<y){var k=g-g%5;y=(f&(1<<k)-1).toString(32),f>>=k,g-=k,Hs=1<<32-ps(o)+g|d<<g|f,Vs=y+r}else Hs=1<<y|d<<g|f,Vs=r}function Nc(r){r.return!==null&&(Vn(r,1),pf(r,1,0))}function _c(r){for(;r===Zi;)Zi=Er[--Pr],Er[Pr]=null,eo=Er[--Pr],Er[Pr]=null;for(;r===Hn;)Hn=rs[--as],rs[as]=null,Vs=rs[--as],rs[as]=null,Hs=rs[--as],rs[as]=null}var Qt=null,Jt=null,Ze=!1,xs=null;function gf(r,o){var d=cs(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=r,o=r.deletions,o===null?(r.deletions=[d],r.flags|=16):o.push(d)}function xf(r,o){switch(r.tag){case 5:var d=r.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Qt=r,Jt=fn(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Qt=r,Jt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=Hn!==null?{id:Hs,overflow:Vs}:null,r.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=cs(18,null,null,0),d.stateNode=o,d.return=r,r.child=d,Qt=r,Jt=null,!0):!1;default:return!1}}function kc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Sc(r){if(Ze){var o=Jt;if(o){var d=o;if(!xf(r,o)){if(kc(r))throw Error(s(418));o=fn(d.nextSibling);var f=Qt;o&&xf(r,o)?gf(f,d):(r.flags=r.flags&-4097|2,Ze=!1,Qt=r)}}else{if(kc(r))throw Error(s(418));r.flags=r.flags&-4097|2,Ze=!1,Qt=r}}}function yf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Qt=r}function to(r){if(r!==Qt)return!1;if(!Ze)return yf(r),Ze=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!xc(r.type,r.memoizedProps)),o&&(o=Jt)){if(kc(r))throw bf(),Error(s(418));for(;o;)gf(r,o),o=fn(o.nextSibling)}if(yf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(o===0){Jt=fn(r.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}r=r.nextSibling}Jt=null}}else Jt=Qt?fn(r.stateNode.nextSibling):null;return!0}function bf(){for(var r=Jt;r;)r=fn(r.nextSibling)}function Ar(){Jt=Qt=null,Ze=!1}function Cc(r){xs===null?xs=[r]:xs.push(r)}var db=D.ReactCurrentBatchConfig;function Ca(r,o,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var f=d.stateNode}if(!f)throw Error(s(147,r));var g=f,y=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(k){var T=g.refs;k===null?delete T[y]:T[y]=k},o._stringRef=y,o)}if(typeof r!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,r))}return r}function so(r,o){throw r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function vf(r){var o=r._init;return o(r._payload)}function wf(r){function o(W,z){if(r){var q=W.deletions;q===null?(W.deletions=[z],W.flags|=16):q.push(z)}}function d(W,z){if(!r)return null;for(;z!==null;)o(W,z),z=z.sibling;return null}function f(W,z){for(W=new Map;z!==null;)z.key!==null?W.set(z.key,z):W.set(z.index,z),z=z.sibling;return W}function g(W,z){return W=_n(W,z),W.index=0,W.sibling=null,W}function y(W,z,q){return W.index=q,r?(q=W.alternate,q!==null?(q=q.index,q<z?(W.flags|=2,z):q):(W.flags|=2,z)):(W.flags|=1048576,z)}function k(W){return r&&W.alternate===null&&(W.flags|=2),W}function T(W,z,q,fe){return z===null||z.tag!==6?(z=yd(q,W.mode,fe),z.return=W,z):(z=g(z,q),z.return=W,z)}function L(W,z,q,fe){var Ne=q.type;return Ne===I?ie(W,z,q.props.children,fe,q.key):z!==null&&(z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===$&&vf(Ne)===z.type)?(fe=g(z,q.props),fe.ref=Ca(W,z,q),fe.return=W,fe):(fe=Co(q.type,q.key,q.props,null,W.mode,fe),fe.ref=Ca(W,z,q),fe.return=W,fe)}function G(W,z,q,fe){return z===null||z.tag!==4||z.stateNode.containerInfo!==q.containerInfo||z.stateNode.implementation!==q.implementation?(z=bd(q,W.mode,fe),z.return=W,z):(z=g(z,q.children||[]),z.return=W,z)}function ie(W,z,q,fe,Ne){return z===null||z.tag!==7?(z=Jn(q,W.mode,fe,Ne),z.return=W,z):(z=g(z,q),z.return=W,z)}function ce(W,z,q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=yd(""+z,W.mode,q),z.return=W,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return q=Co(z.type,z.key,z.props,null,W.mode,q),q.ref=Ca(W,null,z),q.return=W,q;case F:return z=bd(z,W.mode,q),z.return=W,z;case $:var fe=z._init;return ce(W,fe(z._payload),q)}if(Ve(z)||ee(z))return z=Jn(z,W.mode,q,null),z.return=W,z;so(W,z)}return null}function ae(W,z,q,fe){var Ne=z!==null?z.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ne!==null?null:T(W,z,""+q,fe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===Ne?L(W,z,q,fe):null;case F:return q.key===Ne?G(W,z,q,fe):null;case $:return Ne=q._init,ae(W,z,Ne(q._payload),fe)}if(Ve(q)||ee(q))return Ne!==null?null:ie(W,z,q,fe,null);so(W,q)}return null}function pe(W,z,q,fe,Ne){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return W=W.get(q)||null,T(z,W,""+fe,Ne);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return W=W.get(fe.key===null?q:fe.key)||null,L(z,W,fe,Ne);case F:return W=W.get(fe.key===null?q:fe.key)||null,G(z,W,fe,Ne);case $:var Se=fe._init;return pe(W,z,q,Se(fe._payload),Ne)}if(Ve(fe)||ee(fe))return W=W.get(q)||null,ie(z,W,fe,Ne,null);so(z,fe)}return null}function ve(W,z,q,fe){for(var Ne=null,Se=null,Ce=z,Pe=z=0,vt=null;Ce!==null&&Pe<q.length;Pe++){Ce.index>Pe?(vt=Ce,Ce=null):vt=Ce.sibling;var $e=ae(W,Ce,q[Pe],fe);if($e===null){Ce===null&&(Ce=vt);break}r&&Ce&&$e.alternate===null&&o(W,Ce),z=y($e,z,Pe),Se===null?Ne=$e:Se.sibling=$e,Se=$e,Ce=vt}if(Pe===q.length)return d(W,Ce),Ze&&Vn(W,Pe),Ne;if(Ce===null){for(;Pe<q.length;Pe++)Ce=ce(W,q[Pe],fe),Ce!==null&&(z=y(Ce,z,Pe),Se===null?Ne=Ce:Se.sibling=Ce,Se=Ce);return Ze&&Vn(W,Pe),Ne}for(Ce=f(W,Ce);Pe<q.length;Pe++)vt=pe(Ce,W,Pe,q[Pe],fe),vt!==null&&(r&&vt.alternate!==null&&Ce.delete(vt.key===null?Pe:vt.key),z=y(vt,z,Pe),Se===null?Ne=vt:Se.sibling=vt,Se=vt);return r&&Ce.forEach(function(kn){return o(W,kn)}),Ze&&Vn(W,Pe),Ne}function we(W,z,q,fe){var Ne=ee(q);if(typeof Ne!="function")throw Error(s(150));if(q=Ne.call(q),q==null)throw Error(s(151));for(var Se=Ne=null,Ce=z,Pe=z=0,vt=null,$e=q.next();Ce!==null&&!$e.done;Pe++,$e=q.next()){Ce.index>Pe?(vt=Ce,Ce=null):vt=Ce.sibling;var kn=ae(W,Ce,$e.value,fe);if(kn===null){Ce===null&&(Ce=vt);break}r&&Ce&&kn.alternate===null&&o(W,Ce),z=y(kn,z,Pe),Se===null?Ne=kn:Se.sibling=kn,Se=kn,Ce=vt}if($e.done)return d(W,Ce),Ze&&Vn(W,Pe),Ne;if(Ce===null){for(;!$e.done;Pe++,$e=q.next())$e=ce(W,$e.value,fe),$e!==null&&(z=y($e,z,Pe),Se===null?Ne=$e:Se.sibling=$e,Se=$e);return Ze&&Vn(W,Pe),Ne}for(Ce=f(W,Ce);!$e.done;Pe++,$e=q.next())$e=pe(Ce,W,Pe,$e.value,fe),$e!==null&&(r&&$e.alternate!==null&&Ce.delete($e.key===null?Pe:$e.key),z=y($e,z,Pe),Se===null?Ne=$e:Se.sibling=$e,Se=$e);return r&&Ce.forEach(function(Hb){return o(W,Hb)}),Ze&&Vn(W,Pe),Ne}function at(W,z,q,fe){if(typeof q=="object"&&q!==null&&q.type===I&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var Ne=q.key,Se=z;Se!==null;){if(Se.key===Ne){if(Ne=q.type,Ne===I){if(Se.tag===7){d(W,Se.sibling),z=g(Se,q.props.children),z.return=W,W=z;break e}}else if(Se.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===$&&vf(Ne)===Se.type){d(W,Se.sibling),z=g(Se,q.props),z.ref=Ca(W,Se,q),z.return=W,W=z;break e}d(W,Se);break}else o(W,Se);Se=Se.sibling}q.type===I?(z=Jn(q.props.children,W.mode,fe,q.key),z.return=W,W=z):(fe=Co(q.type,q.key,q.props,null,W.mode,fe),fe.ref=Ca(W,z,q),fe.return=W,W=fe)}return k(W);case F:e:{for(Se=q.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===q.containerInfo&&z.stateNode.implementation===q.implementation){d(W,z.sibling),z=g(z,q.children||[]),z.return=W,W=z;break e}else{d(W,z);break}else o(W,z);z=z.sibling}z=bd(q,W.mode,fe),z.return=W,W=z}return k(W);case $:return Se=q._init,at(W,z,Se(q._payload),fe)}if(Ve(q))return ve(W,z,q,fe);if(ee(q))return we(W,z,q,fe);so(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,z!==null&&z.tag===6?(d(W,z.sibling),z=g(z,q),z.return=W,W=z):(d(W,z),z=yd(q,W.mode,fe),z.return=W,W=z),k(W)):d(W,z)}return at}var Tr=wf(!0),jf=wf(!1),no=mn(null),ro=null,Dr=null,Ec=null;function Pc(){Ec=Dr=ro=null}function Ac(r){var o=no.current;Qe(no),r._currentValue=o}function Tc(r,o,d){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===d)break;r=r.return}}function Rr(r,o){ro=r,Ec=Dr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&($t=!0),r.firstContext=null)}function is(r){var o=r._currentValue;if(Ec!==r)if(r={context:r,memoizedValue:o,next:null},Dr===null){if(ro===null)throw Error(s(308));Dr=r,ro.dependencies={lanes:0,firstContext:r}}else Dr=Dr.next=r;return o}var Wn=null;function Dc(r){Wn===null?Wn=[r]:Wn.push(r)}function Nf(r,o,d,f){var g=o.interleaved;return g===null?(d.next=d,Dc(o)):(d.next=g.next,g.next=d),o.interleaved=d,Ws(r,f)}function Ws(r,o){r.lanes|=o;var d=r.alternate;for(d!==null&&(d.lanes|=o),d=r,r=r.return;r!==null;)r.childLanes|=o,d=r.alternate,d!==null&&(d.childLanes|=o),d=r,r=r.return;return d.tag===3?d.stateNode:null}var xn=!1;function Rc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _f(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function qs(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function yn(r,o,d){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(ze&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Ws(r,d)}return g=f.interleaved,g===null?(o.next=o,Dc(f)):(o.next=g.next,g.next=o),f.interleaved=o,Ws(r,d)}function ao(r,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var f=o.lanes;f&=r.pendingLanes,d|=f,o.lanes=d,Yl(r,d)}}function kf(r,o){var d=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var k={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};y===null?g=y=k:y=y.next=k,d=d.next}while(d!==null);y===null?g=y=o:y=y.next=o}else g=y=o;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=o:r.next=o,d.lastBaseUpdate=o}function io(r,o,d,f){var g=r.updateQueue;xn=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var L=T,G=L.next;L.next=null,k===null?y=G:k.next=G,k=L;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==k&&(T===null?ie.firstBaseUpdate=G:T.next=G,ie.lastBaseUpdate=L))}if(y!==null){var ce=g.baseState;k=0,ie=G=L=null,T=y;do{var ae=T.lane,pe=T.eventTime;if((f&ae)===ae){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ve=r,we=T;switch(ae=o,pe=d,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ce=ve.call(pe,ce,ae);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,ae=typeof ve=="function"?ve.call(pe,ce,ae):ve,ae==null)break e;ce=te({},ce,ae);break e;case 2:xn=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,ae=g.effects,ae===null?g.effects=[T]:ae.push(T))}else pe={eventTime:pe,lane:ae,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(G=ie=pe,L=ce):ie=ie.next=pe,k|=ae;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;ae=T,T=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(ie===null&&(L=ce),g.baseState=L,g.firstBaseUpdate=G,g.lastBaseUpdate=ie,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Kn|=k,r.lanes=k,r.memoizedState=ce}}function Sf(r,o,d){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var f=r[o],g=f.callback;if(g!==null){if(f.callback=null,f=d,typeof g!="function")throw Error(s(191,g));g.call(f)}}}var Ea={},Ps=mn(Ea),Pa=mn(Ea),Aa=mn(Ea);function qn(r){if(r===Ea)throw Error(s(174));return r}function Mc(r,o){switch(Xe(Aa,o),Xe(Pa,r),Xe(Ps,Ea),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Xt(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Xt(o,r)}Qe(Ps),Xe(Ps,o)}function Mr(){Qe(Ps),Qe(Pa),Qe(Aa)}function Cf(r){qn(Aa.current);var o=qn(Ps.current),d=Xt(o,r.type);o!==d&&(Xe(Pa,r),Xe(Ps,d))}function Fc(r){Pa.current===r&&(Qe(Ps),Qe(Pa))}var et=mn(0);function oo(r){for(var o=r;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lc=[];function Oc(){for(var r=0;r<Lc.length;r++)Lc[r]._workInProgressVersionPrimary=null;Lc.length=0}var lo=D.ReactCurrentDispatcher,Ic=D.ReactCurrentBatchConfig,Yn=0,tt=null,mt=null,yt=null,co=!1,Ta=!1,Da=0,ub=0;function kt(){throw Error(s(321))}function zc(r,o){if(o===null)return!1;for(var d=0;d<o.length&&d<r.length;d++)if(!gs(r[d],o[d]))return!1;return!0}function $c(r,o,d,f,g,y){if(Yn=y,tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,lo.current=r===null||r.memoizedState===null?pb:gb,r=d(f,g),Ta){y=0;do{if(Ta=!1,Da=0,25<=y)throw Error(s(301));y+=1,yt=mt=null,o.updateQueue=null,lo.current=xb,r=d(f,g)}while(Ta)}if(lo.current=fo,o=mt!==null&&mt.next!==null,Yn=0,yt=mt=tt=null,co=!1,o)throw Error(s(300));return r}function Bc(){var r=Da!==0;return Da=0,r}function As(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?tt.memoizedState=yt=r:yt=yt.next=r,yt}function os(){if(mt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var o=yt===null?tt.memoizedState:yt.next;if(o!==null)yt=o,mt=r;else{if(r===null)throw Error(s(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},yt===null?tt.memoizedState=yt=r:yt=yt.next=r}return yt}function Ra(r,o){return typeof o=="function"?o(r):o}function Uc(r){var o=os(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var f=mt,g=f.baseQueue,y=d.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}f.baseQueue=g=y,d.pending=null}if(g!==null){y=g.next,f=f.baseState;var T=k=null,L=null,G=y;do{var ie=G.lane;if((Yn&ie)===ie)L!==null&&(L=L.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),f=G.hasEagerState?G.eagerState:r(f,G.action);else{var ce={lane:ie,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};L===null?(T=L=ce,k=f):L=L.next=ce,tt.lanes|=ie,Kn|=ie}G=G.next}while(G!==null&&G!==y);L===null?k=f:L.next=T,gs(f,o.memoizedState)||($t=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=L,d.lastRenderedState=f}if(r=d.interleaved,r!==null){g=r;do y=g.lane,tt.lanes|=y,Kn|=y,g=g.next;while(g!==r)}else g===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Hc(r){var o=os(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var f=d.dispatch,g=d.pending,y=o.memoizedState;if(g!==null){d.pending=null;var k=g=g.next;do y=r(y,k.action),k=k.next;while(k!==g);gs(y,o.memoizedState)||($t=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),d.lastRenderedState=y}return[y,f]}function Ef(){}function Pf(r,o){var d=tt,f=os(),g=o(),y=!gs(f.memoizedState,g);if(y&&(f.memoizedState=g,$t=!0),f=f.queue,Vc(Df.bind(null,d,f,r),[r]),f.getSnapshot!==o||y||yt!==null&&yt.memoizedState.tag&1){if(d.flags|=2048,Ma(9,Tf.bind(null,d,f,g,o),void 0,null),bt===null)throw Error(s(349));(Yn&30)!==0||Af(d,o,g)}return g}function Af(r,o,d){r.flags|=16384,r={getSnapshot:o,value:d},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.stores=[r]):(d=o.stores,d===null?o.stores=[r]:d.push(r))}function Tf(r,o,d,f){o.value=d,o.getSnapshot=f,Rf(o)&&Mf(r)}function Df(r,o,d){return d(function(){Rf(o)&&Mf(r)})}function Rf(r){var o=r.getSnapshot;r=r.value;try{var d=o();return!gs(r,d)}catch{return!0}}function Mf(r){var o=Ws(r,1);o!==null&&ws(o,r,1,-1)}function Ff(r){var o=As();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:r},o.queue=r,r=r.dispatch=mb.bind(null,tt,r),[o.memoizedState,r]}function Ma(r,o,d,f){return r={tag:r,create:o,destroy:d,deps:f,next:null},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.lastEffect=r.next=r):(d=o.lastEffect,d===null?o.lastEffect=r.next=r:(f=d.next,d.next=r,r.next=f,o.lastEffect=r)),r}function Lf(){return os().memoizedState}function uo(r,o,d,f){var g=As();tt.flags|=r,g.memoizedState=Ma(1|o,d,void 0,f===void 0?null:f)}function ho(r,o,d,f){var g=os();f=f===void 0?null:f;var y=void 0;if(mt!==null){var k=mt.memoizedState;if(y=k.destroy,f!==null&&zc(f,k.deps)){g.memoizedState=Ma(o,d,y,f);return}}tt.flags|=r,g.memoizedState=Ma(1|o,d,y,f)}function Of(r,o){return uo(8390656,8,r,o)}function Vc(r,o){return ho(2048,8,r,o)}function If(r,o){return ho(4,2,r,o)}function zf(r,o){return ho(4,4,r,o)}function $f(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Bf(r,o,d){return d=d!=null?d.concat([r]):null,ho(4,4,$f.bind(null,o,r),d)}function Wc(){}function Uf(r,o){var d=os();o=o===void 0?null:o;var f=d.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(d.memoizedState=[r,o],r)}function Hf(r,o){var d=os();o=o===void 0?null:o;var f=d.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(r=r(),d.memoizedState=[r,o],r)}function Vf(r,o,d){return(Yn&21)===0?(r.baseState&&(r.baseState=!1,$t=!0),r.memoizedState=d):(gs(d,o)||(d=bh(),tt.lanes|=d,Kn|=d,r.baseState=!0),o)}function hb(r,o){var d=We;We=d!==0&&4>d?d:4,r(!0);var f=Ic.transition;Ic.transition={};try{r(!1),o()}finally{We=d,Ic.transition=f}}function Wf(){return os().memoizedState}function fb(r,o,d){var f=jn(r);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},qf(r))Yf(o,d);else if(d=Nf(r,o,d,f),d!==null){var g=Ot();ws(d,r,f,g),Kf(d,o,f)}}function mb(r,o,d){var f=jn(r),g={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if(qf(r))Yf(o,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,T=y(k,d);if(g.hasEagerState=!0,g.eagerState=T,gs(T,k)){var L=o.interleaved;L===null?(g.next=g,Dc(o)):(g.next=L.next,L.next=g),o.interleaved=g;return}}catch{}finally{}d=Nf(r,o,g,f),d!==null&&(g=Ot(),ws(d,r,f,g),Kf(d,o,f))}}function qf(r){var o=r.alternate;return r===tt||o!==null&&o===tt}function Yf(r,o){Ta=co=!0;var d=r.pending;d===null?o.next=o:(o.next=d.next,d.next=o),r.pending=o}function Kf(r,o,d){if((d&4194240)!==0){var f=o.lanes;f&=r.pendingLanes,d|=f,o.lanes=d,Yl(r,d)}}var fo={readContext:is,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},pb={readContext:is,useCallback:function(r,o){return As().memoizedState=[r,o===void 0?null:o],r},useContext:is,useEffect:Of,useImperativeHandle:function(r,o,d){return d=d!=null?d.concat([r]):null,uo(4194308,4,$f.bind(null,o,r),d)},useLayoutEffect:function(r,o){return uo(4194308,4,r,o)},useInsertionEffect:function(r,o){return uo(4,2,r,o)},useMemo:function(r,o){var d=As();return o=o===void 0?null:o,r=r(),d.memoizedState=[r,o],r},useReducer:function(r,o,d){var f=As();return o=d!==void 0?d(o):o,f.memoizedState=f.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},f.queue=r,r=r.dispatch=fb.bind(null,tt,r),[f.memoizedState,r]},useRef:function(r){var o=As();return r={current:r},o.memoizedState=r},useState:Ff,useDebugValue:Wc,useDeferredValue:function(r){return As().memoizedState=r},useTransition:function(){var r=Ff(!1),o=r[0];return r=hb.bind(null,r[1]),As().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,d){var f=tt,g=As();if(Ze){if(d===void 0)throw Error(s(407));d=d()}else{if(d=o(),bt===null)throw Error(s(349));(Yn&30)!==0||Af(f,o,d)}g.memoizedState=d;var y={value:d,getSnapshot:o};return g.queue=y,Of(Df.bind(null,f,y,r),[r]),f.flags|=2048,Ma(9,Tf.bind(null,f,y,d,o),void 0,null),d},useId:function(){var r=As(),o=bt.identifierPrefix;if(Ze){var d=Vs,f=Hs;d=(f&~(1<<32-ps(f)-1)).toString(32)+d,o=":"+o+"R"+d,d=Da++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=ub++,o=":"+o+"r"+d.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},gb={readContext:is,useCallback:Uf,useContext:is,useEffect:Vc,useImperativeHandle:Bf,useInsertionEffect:If,useLayoutEffect:zf,useMemo:Hf,useReducer:Uc,useRef:Lf,useState:function(){return Uc(Ra)},useDebugValue:Wc,useDeferredValue:function(r){var o=os();return Vf(o,mt.memoizedState,r)},useTransition:function(){var r=Uc(Ra)[0],o=os().memoizedState;return[r,o]},useMutableSource:Ef,useSyncExternalStore:Pf,useId:Wf,unstable_isNewReconciler:!1},xb={readContext:is,useCallback:Uf,useContext:is,useEffect:Vc,useImperativeHandle:Bf,useInsertionEffect:If,useLayoutEffect:zf,useMemo:Hf,useReducer:Hc,useRef:Lf,useState:function(){return Hc(Ra)},useDebugValue:Wc,useDeferredValue:function(r){var o=os();return mt===null?o.memoizedState=r:Vf(o,mt.memoizedState,r)},useTransition:function(){var r=Hc(Ra)[0],o=os().memoizedState;return[r,o]},useMutableSource:Ef,useSyncExternalStore:Pf,useId:Wf,unstable_isNewReconciler:!1};function ys(r,o){if(r&&r.defaultProps){o=te({},o),r=r.defaultProps;for(var d in r)o[d]===void 0&&(o[d]=r[d]);return o}return o}function qc(r,o,d,f){o=r.memoizedState,d=d(f,o),d=d==null?o:te({},o,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var mo={isMounted:function(r){return(r=r._reactInternals)?$n(r)===r:!1},enqueueSetState:function(r,o,d){r=r._reactInternals;var f=Ot(),g=jn(r),y=qs(f,g);y.payload=o,d!=null&&(y.callback=d),o=yn(r,y,g),o!==null&&(ws(o,r,g,f),ao(o,r,g))},enqueueReplaceState:function(r,o,d){r=r._reactInternals;var f=Ot(),g=jn(r),y=qs(f,g);y.tag=1,y.payload=o,d!=null&&(y.callback=d),o=yn(r,y,g),o!==null&&(ws(o,r,g,f),ao(o,r,g))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var d=Ot(),f=jn(r),g=qs(d,f);g.tag=2,o!=null&&(g.callback=o),o=yn(r,g,f),o!==null&&(ws(o,r,f,d),ao(o,r,f))}};function Xf(r,o,d,f,g,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,y,k):o.prototype&&o.prototype.isPureReactComponent?!va(d,f)||!va(g,y):!0}function Gf(r,o,d){var f=!1,g=pn,y=o.contextType;return typeof y=="object"&&y!==null?y=is(y):(g=zt(o)?Un:_t.current,f=o.contextTypes,y=(f=f!=null)?Cr(r,g):pn),o=new o(d,y),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mo,r.stateNode=o,o._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=y),o}function Qf(r,o,d,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,f),o.state!==r&&mo.enqueueReplaceState(o,o.state,null)}function Yc(r,o,d,f){var g=r.stateNode;g.props=d,g.state=r.memoizedState,g.refs={},Rc(r);var y=o.contextType;typeof y=="object"&&y!==null?g.context=is(y):(y=zt(o)?Un:_t.current,g.context=Cr(r,y)),g.state=r.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(qc(r,o,y,d),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&mo.enqueueReplaceState(g,g.state,null),io(r,d,g,f),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Fr(r,o){try{var d="",f=o;do d+=B(f),f=f.return;while(f);var g=d}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:o,stack:g,digest:null}}function Kc(r,o,d){return{value:r,source:null,stack:d??null,digest:o??null}}function Xc(r,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var yb=typeof WeakMap=="function"?WeakMap:Map;function Jf(r,o,d){d=qs(-1,d),d.tag=3,d.payload={element:null};var f=o.value;return d.callback=function(){wo||(wo=!0,dd=f),Xc(r,o)},d}function Zf(r,o,d){d=qs(-1,d),d.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;d.payload=function(){return f(g)},d.callback=function(){Xc(r,o)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(d.callback=function(){Xc(r,o),typeof f!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),d}function em(r,o,d){var f=r.pingCache;if(f===null){f=r.pingCache=new yb;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(d)||(g.add(d),r=Db.bind(null,r,o,d),o.then(r,r))}function tm(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function sm(r,o,d,f,g){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=qs(-1,1),o.tag=2,yn(d,o,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var bb=D.ReactCurrentOwner,$t=!1;function Lt(r,o,d,f){o.child=r===null?jf(o,null,d,f):Tr(o,r.child,d,f)}function nm(r,o,d,f,g){d=d.render;var y=o.ref;return Rr(o,g),f=$c(r,o,d,f,y,g),d=Bc(),r!==null&&!$t?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,Ys(r,o,g)):(Ze&&d&&Nc(o),o.flags|=1,Lt(r,o,f,g),o.child)}function rm(r,o,d,f,g){if(r===null){var y=d.type;return typeof y=="function"&&!xd(y)&&y.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=y,am(r,o,y,f,g)):(r=Co(d.type,null,f,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,(r.lanes&g)===0){var k=y.memoizedProps;if(d=d.compare,d=d!==null?d:va,d(k,f)&&r.ref===o.ref)return Ys(r,o,g)}return o.flags|=1,r=_n(y,f),r.ref=o.ref,r.return=o,o.child=r}function am(r,o,d,f,g){if(r!==null){var y=r.memoizedProps;if(va(y,f)&&r.ref===o.ref)if($t=!1,o.pendingProps=f=y,(r.lanes&g)!==0)(r.flags&131072)!==0&&($t=!0);else return o.lanes=r.lanes,Ys(r,o,g)}return Gc(r,o,d,f,g)}function im(r,o,d){var f=o.pendingProps,g=f.children,y=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Or,Zt),Zt|=d;else{if((d&1073741824)===0)return r=y!==null?y.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Xe(Or,Zt),Zt|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:d,Xe(Or,Zt),Zt|=f}else y!==null?(f=y.baseLanes|d,o.memoizedState=null):f=d,Xe(Or,Zt),Zt|=f;return Lt(r,o,g,d),o.child}function om(r,o){var d=o.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function Gc(r,o,d,f,g){var y=zt(d)?Un:_t.current;return y=Cr(o,y),Rr(o,g),d=$c(r,o,d,f,y,g),f=Bc(),r!==null&&!$t?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,Ys(r,o,g)):(Ze&&f&&Nc(o),o.flags|=1,Lt(r,o,d,g),o.child)}function lm(r,o,d,f,g){if(zt(d)){var y=!0;Qi(o)}else y=!1;if(Rr(o,g),o.stateNode===null)go(r,o),Gf(o,d,f),Yc(o,d,f,g),f=!0;else if(r===null){var k=o.stateNode,T=o.memoizedProps;k.props=T;var L=k.context,G=d.contextType;typeof G=="object"&&G!==null?G=is(G):(G=zt(d)?Un:_t.current,G=Cr(o,G));var ie=d.getDerivedStateFromProps,ce=typeof ie=="function"||typeof k.getSnapshotBeforeUpdate=="function";ce||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(T!==f||L!==G)&&Qf(o,k,f,G),xn=!1;var ae=o.memoizedState;k.state=ae,io(o,f,k,g),L=o.memoizedState,T!==f||ae!==L||It.current||xn?(typeof ie=="function"&&(qc(o,d,ie,f),L=o.memoizedState),(T=xn||Xf(o,d,T,f,ae,L,G))?(ce||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=L),k.props=f,k.state=L,k.context=G,f=T):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,_f(r,o),T=o.memoizedProps,G=o.type===o.elementType?T:ys(o.type,T),k.props=G,ce=o.pendingProps,ae=k.context,L=d.contextType,typeof L=="object"&&L!==null?L=is(L):(L=zt(d)?Un:_t.current,L=Cr(o,L));var pe=d.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(T!==ce||ae!==L)&&Qf(o,k,f,L),xn=!1,ae=o.memoizedState,k.state=ae,io(o,f,k,g);var ve=o.memoizedState;T!==ce||ae!==ve||It.current||xn?(typeof pe=="function"&&(qc(o,d,pe,f),ve=o.memoizedState),(G=xn||Xf(o,d,G,f,ae,ve,L)||!1)?(ie||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ve,L),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ve,L)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||T===r.memoizedProps&&ae===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ae===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ve),k.props=f,k.state=ve,k.context=L,f=G):(typeof k.componentDidUpdate!="function"||T===r.memoizedProps&&ae===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ae===r.memoizedState||(o.flags|=1024),f=!1)}return Qc(r,o,d,f,y,g)}function Qc(r,o,d,f,g,y){om(r,o);var k=(o.flags&128)!==0;if(!f&&!k)return g&&ff(o,d,!1),Ys(r,o,y);f=o.stateNode,bb.current=o;var T=k&&typeof d.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,r!==null&&k?(o.child=Tr(o,r.child,null,y),o.child=Tr(o,null,T,y)):Lt(r,o,T,y),o.memoizedState=f.state,g&&ff(o,d,!0),o.child}function cm(r){var o=r.stateNode;o.pendingContext?uf(r,o.pendingContext,o.pendingContext!==o.context):o.context&&uf(r,o.context,!1),Mc(r,o.containerInfo)}function dm(r,o,d,f,g){return Ar(),Cc(g),o.flags|=256,Lt(r,o,d,f),o.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function Zc(r){return{baseLanes:r,cachePool:null,transitions:null}}function um(r,o,d){var f=o.pendingProps,g=et.current,y=!1,k=(o.flags&128)!==0,T;if((T=k)||(T=r!==null&&r.memoizedState===null?!1:(g&2)!==0),T?(y=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),Xe(et,g&1),r===null)return Sc(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,r=f.fallback,y?(f=o.mode,y=o.child,k={mode:"hidden",children:k},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=Eo(k,f,0,null),r=Jn(r,f,d,null),y.return=o,r.return=o,y.sibling=r,o.child=y,o.child.memoizedState=Zc(d),o.memoizedState=Jc,r):ed(o,k));if(g=r.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return vb(r,o,k,f,T,g,d);if(y){y=f.fallback,k=o.mode,g=r.child,T=g.sibling;var L={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=L,o.deletions=null):(f=_n(g,L),f.subtreeFlags=g.subtreeFlags&14680064),T!==null?y=_n(T,y):(y=Jn(y,k,d,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,k=r.child.memoizedState,k=k===null?Zc(d):{baseLanes:k.baseLanes|d,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=r.childLanes&~d,o.memoizedState=Jc,f}return y=r.child,r=y.sibling,f=_n(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=d),f.return=o,f.sibling=null,r!==null&&(d=o.deletions,d===null?(o.deletions=[r],o.flags|=16):d.push(r)),o.child=f,o.memoizedState=null,f}function ed(r,o){return o=Eo({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function po(r,o,d,f){return f!==null&&Cc(f),Tr(o,r.child,null,d),r=ed(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function vb(r,o,d,f,g,y,k){if(d)return o.flags&256?(o.flags&=-257,f=Kc(Error(s(422))),po(r,o,k,f)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=Eo({mode:"visible",children:f.children},g,0,null),y=Jn(y,g,k,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Tr(o,r.child,null,k),o.child.memoizedState=Zc(k),o.memoizedState=Jc,y);if((o.mode&1)===0)return po(r,o,k,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var T=f.dgst;return f=T,y=Error(s(419)),f=Kc(y,f,void 0),po(r,o,k,f)}if(T=(k&r.childLanes)!==0,$t||T){if(f=bt,f!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,Ws(r,g),ws(f,r,g,-1))}return gd(),f=Kc(Error(s(421))),po(r,o,k,f)}return g.data==="$?"?(o.flags|=128,o.child=r.child,o=Rb.bind(null,r),g._reactRetry=o,null):(r=y.treeContext,Jt=fn(g.nextSibling),Qt=o,Ze=!0,xs=null,r!==null&&(rs[as++]=Hs,rs[as++]=Vs,rs[as++]=Hn,Hs=r.id,Vs=r.overflow,Hn=o),o=ed(o,f.children),o.flags|=4096,o)}function hm(r,o,d){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),Tc(r.return,o,d)}function td(r,o,d,f,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=d,y.tailMode=g)}function fm(r,o,d){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(Lt(r,o,f.children,d),f=et.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hm(r,d,o);else if(r.tag===19)hm(r,d,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Xe(et,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(d=o.child,g=null;d!==null;)r=d.alternate,r!==null&&oo(r)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),td(o,!1,g,d,y);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&oo(r)===null){o.child=g;break}r=g.sibling,g.sibling=d,d=g,g=r}td(o,!0,d,null,y);break;case"together":td(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function go(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Ys(r,o,d){if(r!==null&&(o.dependencies=r.dependencies),Kn|=o.lanes,(d&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,d=_n(r,r.pendingProps),o.child=d,d.return=o;r.sibling!==null;)r=r.sibling,d=d.sibling=_n(r,r.pendingProps),d.return=o;d.sibling=null}return o.child}function wb(r,o,d){switch(o.tag){case 3:cm(o),Ar();break;case 5:Cf(o);break;case 1:zt(o.type)&&Qi(o);break;case 4:Mc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Xe(no,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Xe(et,et.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?um(r,o,d):(Xe(et,et.current&1),r=Ys(r,o,d),r!==null?r.sibling:null);Xe(et,et.current&1);break;case 19:if(f=(d&o.childLanes)!==0,(r.flags&128)!==0){if(f)return fm(r,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Xe(et,et.current),f)break;return null;case 22:case 23:return o.lanes=0,im(r,o,d)}return Ys(r,o,d)}var mm,sd,pm,gm;mm=function(r,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},sd=function(){},pm=function(r,o,d,f){var g=r.memoizedProps;if(g!==f){r=o.stateNode,qn(Ps.current);var y=null;switch(d){case"input":g=X(r,g),f=X(r,f),y=[];break;case"select":g=te({},g,{value:void 0}),f=te({},f,{value:void 0}),y=[];break;case"textarea":g=se(r,g),f=se(r,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Ki)}Ll(d,f);var k;d=null;for(G in g)if(!f.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var T=g[G];for(k in T)T.hasOwnProperty(k)&&(d||(d={}),d[k]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in f){var L=f[G];if(T=g?.[G],f.hasOwnProperty(G)&&L!==T&&(L!=null||T!=null))if(G==="style")if(T){for(k in T)!T.hasOwnProperty(k)||L&&L.hasOwnProperty(k)||(d||(d={}),d[k]="");for(k in L)L.hasOwnProperty(k)&&T[k]!==L[k]&&(d||(d={}),d[k]=L[k])}else d||(y||(y=[]),y.push(G,d)),d=L;else G==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,T=T?T.__html:void 0,L!=null&&T!==L&&(y=y||[]).push(G,L)):G==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(G,""+L):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(i.hasOwnProperty(G)?(L!=null&&G==="onScroll"&&Ge("scroll",r),y||T===L||(y=[])):(y=y||[]).push(G,L))}d&&(y=y||[]).push("style",d);var G=y;(o.updateQueue=G)&&(o.flags|=4)}},gm=function(r,o,d,f){d!==f&&(o.flags|=4)};function Fa(r,o){if(!Ze)switch(r.tailMode){case"hidden":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function St(r){var o=r.alternate!==null&&r.alternate.child===r.child,d=0,f=0;if(o)for(var g=r.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=f,r.childLanes=d,o}function jb(r,o,d){var f=o.pendingProps;switch(_c(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return zt(o.type)&&Gi(),St(o),null;case 3:return f=o.stateNode,Mr(),Qe(It),Qe(_t),Oc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(to(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xs!==null&&(fd(xs),xs=null))),sd(r,o),St(o),null;case 5:Fc(o);var g=qn(Aa.current);if(d=o.type,r!==null&&o.stateNode!=null)pm(r,o,d,f,g),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(s(166));return St(o),null}if(r=qn(Ps.current),to(o)){f=o.stateNode,d=o.type;var y=o.memoizedProps;switch(f[Es]=o,f[ka]=y,r=(o.mode&1)!==0,d){case"dialog":Ge("cancel",f),Ge("close",f);break;case"iframe":case"object":case"embed":Ge("load",f);break;case"video":case"audio":for(g=0;g<ja.length;g++)Ge(ja[g],f);break;case"source":Ge("error",f);break;case"img":case"image":case"link":Ge("error",f),Ge("load",f);break;case"details":Ge("toggle",f);break;case"input":be(f,y),Ge("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Ge("invalid",f);break;case"textarea":le(f,y),Ge("invalid",f)}Ll(d,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var T=y[k];k==="children"?typeof T=="string"?f.textContent!==T&&(y.suppressHydrationWarning!==!0&&Yi(f.textContent,T,r),g=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&Yi(f.textContent,T,r),g=["children",""+T]):i.hasOwnProperty(k)&&T!=null&&k==="onScroll"&&Ge("scroll",f)}switch(d){case"input":ye(f),Ae(f,y,!0);break;case"textarea":ye(f),Ke(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ki)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$s(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=k.createElement(d,{is:f.is}):(r=k.createElement(d),d==="select"&&(k=r,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):r=k.createElementNS(r,d),r[Es]=o,r[ka]=f,mm(r,o,!1,!1),o.stateNode=r;e:{switch(k=Ol(d,f),d){case"dialog":Ge("cancel",r),Ge("close",r),g=f;break;case"iframe":case"object":case"embed":Ge("load",r),g=f;break;case"video":case"audio":for(g=0;g<ja.length;g++)Ge(ja[g],r);g=f;break;case"source":Ge("error",r),g=f;break;case"img":case"image":case"link":Ge("error",r),Ge("load",r),g=f;break;case"details":Ge("toggle",r),g=f;break;case"input":be(r,f),g=X(r,f),Ge("invalid",r);break;case"option":g=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},g=te({},f,{value:void 0}),Ge("invalid",r);break;case"textarea":le(r,f),g=se(r,f),Ge("invalid",r);break;default:g=f}Ll(d,g),T=g;for(y in T)if(T.hasOwnProperty(y)){var L=T[y];y==="style"?rh(r,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Ss(r,L)):y==="children"?typeof L=="string"?(d!=="textarea"||L!=="")&&ms(r,L):typeof L=="number"&&ms(r,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?L!=null&&y==="onScroll"&&Ge("scroll",r):L!=null&&C(r,y,L,k))}switch(d){case"input":ye(r),Ae(r,f,!1);break;case"textarea":ye(r),Ke(r);break;case"option":f.value!=null&&r.setAttribute("value",""+ge(f.value));break;case"select":r.multiple=!!f.multiple,y=f.value,y!=null?ft(r,!!f.multiple,y,!1):f.defaultValue!=null&&ft(r,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Ki)}switch(d){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return St(o),null;case 6:if(r&&o.stateNode!=null)gm(r,o,r.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(d=qn(Aa.current),qn(Ps.current),to(o)){if(f=o.stateNode,d=o.memoizedProps,f[Es]=o,(y=f.nodeValue!==d)&&(r=Qt,r!==null))switch(r.tag){case 3:Yi(f.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Yi(f.nodeValue,d,(r.mode&1)!==0)}y&&(o.flags|=4)}else f=(d.nodeType===9?d:d.ownerDocument).createTextNode(f),f[Es]=o,o.stateNode=f}return St(o),null;case 13:if(Qe(et),f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ze&&Jt!==null&&(o.mode&1)!==0&&(o.flags&128)===0)bf(),Ar(),o.flags|=98560,y=!1;else if(y=to(o),f!==null&&f.dehydrated!==null){if(r===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Es]=o}else Ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),y=!1}else xs!==null&&(fd(xs),xs=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(et.current&1)!==0?pt===0&&(pt=3):gd())),o.updateQueue!==null&&(o.flags|=4),St(o),null);case 4:return Mr(),sd(r,o),r===null&&Na(o.stateNode.containerInfo),St(o),null;case 10:return Ac(o.type._context),St(o),null;case 17:return zt(o.type)&&Gi(),St(o),null;case 19:if(Qe(et),y=o.memoizedState,y===null)return St(o),null;if(f=(o.flags&128)!==0,k=y.rendering,k===null)if(f)Fa(y,!1);else{if(pt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(k=oo(r),k!==null){for(o.flags|=128,Fa(y,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=d,d=o.child;d!==null;)y=d,r=f,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,r=k.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return Xe(et,et.current&1|2),o.child}r=r.sibling}y.tail!==null&&rt()>Ir&&(o.flags|=128,f=!0,Fa(y,!1),o.lanes=4194304)}else{if(!f)if(r=oo(k),r!==null){if(o.flags|=128,f=!0,d=r.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),Fa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ze)return St(o),null}else 2*rt()-y.renderingStartTime>Ir&&d!==1073741824&&(o.flags|=128,f=!0,Fa(y,!1),o.lanes=4194304);y.isBackwards?(k.sibling=o.child,o.child=k):(d=y.last,d!==null?d.sibling=k:o.child=k,y.last=k)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=rt(),o.sibling=null,d=et.current,Xe(et,f?d&1|2:d&1),o):(St(o),null);case 22:case 23:return pd(),f=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(Zt&1073741824)!==0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),null;case 24:return null;case 25:return null}throw Error(s(156,o.tag))}function Nb(r,o){switch(_c(o),o.tag){case 1:return zt(o.type)&&Gi(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Mr(),Qe(It),Qe(_t),Oc(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Fc(o),null;case 13:if(Qe(et),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ar()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Qe(et),null;case 4:return Mr(),null;case 10:return Ac(o.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var xo=!1,Ct=!1,_b=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Lr(r,o){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){nt(r,o,f)}else d.current=null}function nd(r,o,d){try{d()}catch(f){nt(r,o,f)}}var xm=!1;function kb(r,o){if(pc=Li,r=Kh(),oc(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var k=0,T=-1,L=-1,G=0,ie=0,ce=r,ae=null;t:for(;;){for(var pe;ce!==d||g!==0&&ce.nodeType!==3||(T=k+g),ce!==y||f!==0&&ce.nodeType!==3||(L=k+f),ce.nodeType===3&&(k+=ce.nodeValue.length),(pe=ce.firstChild)!==null;)ae=ce,ce=pe;for(;;){if(ce===r)break t;if(ae===d&&++G===g&&(T=k),ae===y&&++ie===f&&(L=k),(pe=ce.nextSibling)!==null)break;ce=ae,ae=ce.parentNode}ce=pe}d=T===-1||L===-1?null:{start:T,end:L}}else d=null}d=d||{start:0,end:0}}else d=null;for(gc={focusedElem:r,selectionRange:d},Li=!1,xe=o;xe!==null;)if(o=xe,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,xe=r;else for(;xe!==null;){o=xe;try{var ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,at=ve.memoizedState,W=o.stateNode,z=W.getSnapshotBeforeUpdate(o.elementType===o.type?we:ys(o.type,we),at);W.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(fe){nt(o,o.return,fe)}if(r=o.sibling,r!==null){r.return=o.return,xe=r;break}xe=o.return}return ve=xm,xm=!1,ve}function La(r,o,d){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&r)===r){var y=g.destroy;g.destroy=void 0,y!==void 0&&nd(o,d,y)}g=g.next}while(g!==f)}}function yo(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&r)===r){var f=d.create;d.destroy=f()}d=d.next}while(d!==o)}}function rd(r){var o=r.ref;if(o!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof o=="function"?o(r):o.current=r}}function ym(r){var o=r.alternate;o!==null&&(r.alternate=null,ym(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Es],delete o[ka],delete o[vc],delete o[ob],delete o[lb])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function bm(r){return r.tag===5||r.tag===3||r.tag===4}function vm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||bm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ad(r,o,d){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(r,o):d.insertBefore(r,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(r,d)):(o=d,o.appendChild(r)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Ki));else if(f!==4&&(r=r.child,r!==null))for(ad(r,o,d),r=r.sibling;r!==null;)ad(r,o,d),r=r.sibling}function id(r,o,d){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?d.insertBefore(r,o):d.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(id(r,o,d),r=r.sibling;r!==null;)id(r,o,d),r=r.sibling}var jt=null,bs=!1;function bn(r,o,d){for(d=d.child;d!==null;)wm(r,o,d),d=d.sibling}function wm(r,o,d){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(Ai,d)}catch{}switch(d.tag){case 5:Ct||Lr(d,o);case 6:var f=jt,g=bs;jt=null,bn(r,o,d),jt=f,bs=g,jt!==null&&(bs?(r=jt,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):jt.removeChild(d.stateNode));break;case 18:jt!==null&&(bs?(r=jt,d=d.stateNode,r.nodeType===8?bc(r.parentNode,d):r.nodeType===1&&bc(r,d),ma(r)):bc(jt,d.stateNode));break;case 4:f=jt,g=bs,jt=d.stateNode.containerInfo,bs=!0,bn(r,o,d),jt=f,bs=g;break;case 0:case 11:case 14:case 15:if(!Ct&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&nd(d,o,k),g=g.next}while(g!==f)}bn(r,o,d);break;case 1:if(!Ct&&(Lr(d,o),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(T){nt(d,o,T)}bn(r,o,d);break;case 21:bn(r,o,d);break;case 22:d.mode&1?(Ct=(f=Ct)||d.memoizedState!==null,bn(r,o,d),Ct=f):bn(r,o,d);break;default:bn(r,o,d)}}function jm(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new _b),o.forEach(function(f){var g=Mb.bind(null,r,f);d.has(f)||(d.add(f),f.then(g,g))})}}function vs(r,o){var d=o.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];try{var y=r,k=o,T=k;e:for(;T!==null;){switch(T.tag){case 5:jt=T.stateNode,bs=!1;break e;case 3:jt=T.stateNode.containerInfo,bs=!0;break e;case 4:jt=T.stateNode.containerInfo,bs=!0;break e}T=T.return}if(jt===null)throw Error(s(160));wm(y,k,g),jt=null,bs=!1;var L=g.alternate;L!==null&&(L.return=null),g.return=null}catch(G){nt(g,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Nm(o,r),o=o.sibling}function Nm(r,o){var d=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(vs(o,r),Ts(r),f&4){try{La(3,r,r.return),yo(3,r)}catch(we){nt(r,r.return,we)}try{La(5,r,r.return)}catch(we){nt(r,r.return,we)}}break;case 1:vs(o,r),Ts(r),f&512&&d!==null&&Lr(d,d.return);break;case 5:if(vs(o,r),Ts(r),f&512&&d!==null&&Lr(d,d.return),r.flags&32){var g=r.stateNode;try{ms(g,"")}catch(we){nt(r,r.return,we)}}if(f&4&&(g=r.stateNode,g!=null)){var y=r.memoizedProps,k=d!==null?d.memoizedProps:y,T=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&De(g,y),Ol(T,k);var G=Ol(T,y);for(k=0;k<L.length;k+=2){var ie=L[k],ce=L[k+1];ie==="style"?rh(g,ce):ie==="dangerouslySetInnerHTML"?Ss(g,ce):ie==="children"?ms(g,ce):C(g,ie,ce,G)}switch(T){case"input":ke(g,y);break;case"textarea":me(g,y);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?ft(g,!!y.multiple,pe,!1):ae!==!!y.multiple&&(y.defaultValue!=null?ft(g,!!y.multiple,y.defaultValue,!0):ft(g,!!y.multiple,y.multiple?[]:"",!1))}g[ka]=y}catch(we){nt(r,r.return,we)}}break;case 6:if(vs(o,r),Ts(r),f&4){if(r.stateNode===null)throw Error(s(162));g=r.stateNode,y=r.memoizedProps;try{g.nodeValue=y}catch(we){nt(r,r.return,we)}}break;case 3:if(vs(o,r),Ts(r),f&4&&d!==null&&d.memoizedState.isDehydrated)try{ma(o.containerInfo)}catch(we){nt(r,r.return,we)}break;case 4:vs(o,r),Ts(r);break;case 13:vs(o,r),Ts(r),g=r.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(cd=rt())),f&4&&jm(r);break;case 22:if(ie=d!==null&&d.memoizedState!==null,r.mode&1?(Ct=(G=Ct)||ie,vs(o,r),Ct=G):vs(o,r),Ts(r),f&8192){if(G=r.memoizedState!==null,(r.stateNode.isHidden=G)&&!ie&&(r.mode&1)!==0)for(xe=r,ie=r.child;ie!==null;){for(ce=xe=ie;xe!==null;){switch(ae=xe,pe=ae.child,ae.tag){case 0:case 11:case 14:case 15:La(4,ae,ae.return);break;case 1:Lr(ae,ae.return);var ve=ae.stateNode;if(typeof ve.componentWillUnmount=="function"){f=ae,d=ae.return;try{o=f,ve.props=o.memoizedProps,ve.state=o.memoizedState,ve.componentWillUnmount()}catch(we){nt(f,d,we)}}break;case 5:Lr(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Sm(ce);continue}}pe!==null?(pe.return=ae,xe=pe):Sm(ce)}ie=ie.sibling}e:for(ie=null,ce=r;;){if(ce.tag===5){if(ie===null){ie=ce;try{g=ce.stateNode,G?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=ce.stateNode,L=ce.memoizedProps.style,k=L!=null&&L.hasOwnProperty("display")?L.display:null,T.style.display=nh("display",k))}catch(we){nt(r,r.return,we)}}}else if(ce.tag===6){if(ie===null)try{ce.stateNode.nodeValue=G?"":ce.memoizedProps}catch(we){nt(r,r.return,we)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===r)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===r)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===r)break e;ie===ce&&(ie=null),ce=ce.return}ie===ce&&(ie=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:vs(o,r),Ts(r),f&4&&jm(r);break;case 21:break;default:vs(o,r),Ts(r)}}function Ts(r){var o=r.flags;if(o&2){try{e:{for(var d=r.return;d!==null;){if(bm(d)){var f=d;break e}d=d.return}throw Error(s(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ms(g,""),f.flags&=-33);var y=vm(r);id(r,y,g);break;case 3:case 4:var k=f.stateNode.containerInfo,T=vm(r);ad(r,T,k);break;default:throw Error(s(161))}}catch(L){nt(r,r.return,L)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Sb(r,o,d){xe=r,_m(r)}function _m(r,o,d){for(var f=(r.mode&1)!==0;xe!==null;){var g=xe,y=g.child;if(g.tag===22&&f){var k=g.memoizedState!==null||xo;if(!k){var T=g.alternate,L=T!==null&&T.memoizedState!==null||Ct;T=xo;var G=Ct;if(xo=k,(Ct=L)&&!G)for(xe=g;xe!==null;)k=xe,L=k.child,k.tag===22&&k.memoizedState!==null?Cm(g):L!==null?(L.return=k,xe=L):Cm(g);for(;y!==null;)xe=y,_m(y),y=y.sibling;xe=g,xo=T,Ct=G}km(r)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,xe=y):km(r)}}function km(r){for(;xe!==null;){var o=xe;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ct||yo(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Ct)if(d===null)f.componentDidMount();else{var g=o.elementType===o.type?d.memoizedProps:ys(o.type,d.memoizedProps);f.componentDidUpdate(g,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Sf(o,y,f);break;case 3:var k=o.updateQueue;if(k!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Sf(o,k,d)}break;case 5:var T=o.stateNode;if(d===null&&o.flags&4){d=T;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&d.focus();break;case"img":L.src&&(d.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var ie=G.memoizedState;if(ie!==null){var ce=ie.dehydrated;ce!==null&&ma(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ct||o.flags&512&&rd(o)}catch(ae){nt(o,o.return,ae)}}if(o===r){xe=null;break}if(d=o.sibling,d!==null){d.return=o.return,xe=d;break}xe=o.return}}function Sm(r){for(;xe!==null;){var o=xe;if(o===r){xe=null;break}var d=o.sibling;if(d!==null){d.return=o.return,xe=d;break}xe=o.return}}function Cm(r){for(;xe!==null;){var o=xe;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{yo(4,o)}catch(L){nt(o,d,L)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(L){nt(o,g,L)}}var y=o.return;try{rd(o)}catch(L){nt(o,y,L)}break;case 5:var k=o.return;try{rd(o)}catch(L){nt(o,k,L)}}}catch(L){nt(o,o.return,L)}if(o===r){xe=null;break}var T=o.sibling;if(T!==null){T.return=o.return,xe=T;break}xe=o.return}}var Cb=Math.ceil,bo=D.ReactCurrentDispatcher,od=D.ReactCurrentOwner,ls=D.ReactCurrentBatchConfig,ze=0,bt=null,ut=null,Nt=0,Zt=0,Or=mn(0),pt=0,Oa=null,Kn=0,vo=0,ld=0,Ia=null,Bt=null,cd=0,Ir=1/0,Ks=null,wo=!1,dd=null,vn=null,jo=!1,wn=null,No=0,za=0,ud=null,_o=-1,ko=0;function Ot(){return(ze&6)!==0?rt():_o!==-1?_o:_o=rt()}function jn(r){return(r.mode&1)===0?1:(ze&2)!==0&&Nt!==0?Nt&-Nt:db.transition!==null?(ko===0&&(ko=bh()),ko):(r=We,r!==0||(r=window.event,r=r===void 0?16:Eh(r.type)),r)}function ws(r,o,d,f){if(50<za)throw za=0,ud=null,Error(s(185));ca(r,d,f),((ze&2)===0||r!==bt)&&(r===bt&&((ze&2)===0&&(vo|=d),pt===4&&Nn(r,Nt)),Ut(r,f),d===1&&ze===0&&(o.mode&1)===0&&(Ir=rt()+500,Ji&&gn()))}function Ut(r,o){var d=r.callbackNode;dy(r,o);var f=Ri(r,r===bt?Nt:0);if(f===0)d!==null&&gh(d),r.callbackNode=null,r.callbackPriority=0;else if(o=f&-f,r.callbackPriority!==o){if(d!=null&&gh(d),o===1)r.tag===0?cb(Pm.bind(null,r)):mf(Pm.bind(null,r)),ab(function(){(ze&6)===0&&gn()}),d=null;else{switch(vh(f)){case 1:d=Vl;break;case 4:d=xh;break;case 16:d=Pi;break;case 536870912:d=yh;break;default:d=Pi}d=Om(d,Em.bind(null,r))}r.callbackPriority=o,r.callbackNode=d}}function Em(r,o){if(_o=-1,ko=0,(ze&6)!==0)throw Error(s(327));var d=r.callbackNode;if(zr()&&r.callbackNode!==d)return null;var f=Ri(r,r===bt?Nt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||o)o=So(r,f);else{o=f;var g=ze;ze|=2;var y=Tm();(bt!==r||Nt!==o)&&(Ks=null,Ir=rt()+500,Gn(r,o));do try{Ab();break}catch(T){Am(r,T)}while(!0);Pc(),bo.current=y,ze=g,ut!==null?o=0:(bt=null,Nt=0,o=pt)}if(o!==0){if(o===2&&(g=Wl(r),g!==0&&(f=g,o=hd(r,g))),o===1)throw d=Oa,Gn(r,0),Nn(r,f),Ut(r,rt()),d;if(o===6)Nn(r,f);else{if(g=r.current.alternate,(f&30)===0&&!Eb(g)&&(o=So(r,f),o===2&&(y=Wl(r),y!==0&&(f=y,o=hd(r,y))),o===1))throw d=Oa,Gn(r,0),Nn(r,f),Ut(r,rt()),d;switch(r.finishedWork=g,r.finishedLanes=f,o){case 0:case 1:throw Error(s(345));case 2:Qn(r,Bt,Ks);break;case 3:if(Nn(r,f),(f&130023424)===f&&(o=cd+500-rt(),10<o)){if(Ri(r,0)!==0)break;if(g=r.suspendedLanes,(g&f)!==f){Ot(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=yc(Qn.bind(null,r,Bt,Ks),o);break}Qn(r,Bt,Ks);break;case 4:if(Nn(r,f),(f&4194240)===f)break;for(o=r.eventTimes,g=-1;0<f;){var k=31-ps(f);y=1<<k,k=o[k],k>g&&(g=k),f&=~y}if(f=g,f=rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Cb(f/1960))-f,10<f){r.timeoutHandle=yc(Qn.bind(null,r,Bt,Ks),f);break}Qn(r,Bt,Ks);break;case 5:Qn(r,Bt,Ks);break;default:throw Error(s(329))}}}return Ut(r,rt()),r.callbackNode===d?Em.bind(null,r):null}function hd(r,o){var d=Ia;return r.current.memoizedState.isDehydrated&&(Gn(r,o).flags|=256),r=So(r,o),r!==2&&(o=Bt,Bt=d,o!==null&&fd(o)),r}function fd(r){Bt===null?Bt=r:Bt.push.apply(Bt,r)}function Eb(r){for(var o=r;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var g=d[f],y=g.getSnapshot;g=g.value;try{if(!gs(y(),g))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Nn(r,o){for(o&=~ld,o&=~vo,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var d=31-ps(o),f=1<<d;r[d]=-1,o&=~f}}function Pm(r){if((ze&6)!==0)throw Error(s(327));zr();var o=Ri(r,0);if((o&1)===0)return Ut(r,rt()),null;var d=So(r,o);if(r.tag!==0&&d===2){var f=Wl(r);f!==0&&(o=f,d=hd(r,f))}if(d===1)throw d=Oa,Gn(r,0),Nn(r,o),Ut(r,rt()),d;if(d===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Qn(r,Bt,Ks),Ut(r,rt()),null}function md(r,o){var d=ze;ze|=1;try{return r(o)}finally{ze=d,ze===0&&(Ir=rt()+500,Ji&&gn())}}function Xn(r){wn!==null&&wn.tag===0&&(ze&6)===0&&zr();var o=ze;ze|=1;var d=ls.transition,f=We;try{if(ls.transition=null,We=1,r)return r()}finally{We=f,ls.transition=d,ze=o,(ze&6)===0&&gn()}}function pd(){Zt=Or.current,Qe(Or)}function Gn(r,o){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,rb(d)),ut!==null)for(d=ut.return;d!==null;){var f=d;switch(_c(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Gi();break;case 3:Mr(),Qe(It),Qe(_t),Oc();break;case 5:Fc(f);break;case 4:Mr();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:Ac(f.type._context);break;case 22:case 23:pd()}d=d.return}if(bt=r,ut=r=_n(r.current,null),Nt=Zt=o,pt=0,Oa=null,ld=vo=Kn=0,Bt=Ia=null,Wn!==null){for(o=0;o<Wn.length;o++)if(d=Wn[o],f=d.interleaved,f!==null){d.interleaved=null;var g=f.next,y=d.pending;if(y!==null){var k=y.next;y.next=g,f.next=k}d.pending=f}Wn=null}return r}function Am(r,o){do{var d=ut;try{if(Pc(),lo.current=fo,co){for(var f=tt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}co=!1}if(Yn=0,yt=mt=tt=null,Ta=!1,Da=0,od.current=null,d===null||d.return===null){pt=1,Oa=o,ut=null;break}e:{var y=r,k=d.return,T=d,L=o;if(o=Nt,T.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var G=L,ie=T,ce=ie.tag;if((ie.mode&1)===0&&(ce===0||ce===11||ce===15)){var ae=ie.alternate;ae?(ie.updateQueue=ae.updateQueue,ie.memoizedState=ae.memoizedState,ie.lanes=ae.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=tm(k);if(pe!==null){pe.flags&=-257,sm(pe,k,T,y,o),pe.mode&1&&em(y,G,o),o=pe,L=G;var ve=o.updateQueue;if(ve===null){var we=new Set;we.add(L),o.updateQueue=we}else ve.add(L);break e}else{if((o&1)===0){em(y,G,o),gd();break e}L=Error(s(426))}}else if(Ze&&T.mode&1){var at=tm(k);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),sm(at,k,T,y,o),Cc(Fr(L,T));break e}}y=L=Fr(L,T),pt!==4&&(pt=2),Ia===null?Ia=[y]:Ia.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var W=Jf(y,L,o);kf(y,W);break e;case 1:T=L;var z=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(vn===null||!vn.has(q)))){y.flags|=65536,o&=-o,y.lanes|=o;var fe=Zf(y,T,o);kf(y,fe);break e}}y=y.return}while(y!==null)}Rm(d)}catch(Ne){o=Ne,ut===d&&d!==null&&(ut=d=d.return);continue}break}while(!0)}function Tm(){var r=bo.current;return bo.current=fo,r===null?fo:r}function gd(){(pt===0||pt===3||pt===2)&&(pt=4),bt===null||(Kn&268435455)===0&&(vo&268435455)===0||Nn(bt,Nt)}function So(r,o){var d=ze;ze|=2;var f=Tm();(bt!==r||Nt!==o)&&(Ks=null,Gn(r,o));do try{Pb();break}catch(g){Am(r,g)}while(!0);if(Pc(),ze=d,bo.current=f,ut!==null)throw Error(s(261));return bt=null,Nt=0,pt}function Pb(){for(;ut!==null;)Dm(ut)}function Ab(){for(;ut!==null&&!ty();)Dm(ut)}function Dm(r){var o=Lm(r.alternate,r,Zt);r.memoizedProps=r.pendingProps,o===null?Rm(r):ut=o,od.current=null}function Rm(r){var o=r;do{var d=o.alternate;if(r=o.return,(o.flags&32768)===0){if(d=jb(d,o,Zt),d!==null){ut=d;return}}else{if(d=Nb(d,o),d!==null){d.flags&=32767,ut=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{pt=6,ut=null;return}}if(o=o.sibling,o!==null){ut=o;return}ut=o=r}while(o!==null);pt===0&&(pt=5)}function Qn(r,o,d){var f=We,g=ls.transition;try{ls.transition=null,We=1,Tb(r,o,d,f)}finally{ls.transition=g,We=f}return null}function Tb(r,o,d,f){do zr();while(wn!==null);if((ze&6)!==0)throw Error(s(327));d=r.finishedWork;var g=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var y=d.lanes|d.childLanes;if(uy(r,y),r===bt&&(ut=bt=null,Nt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||jo||(jo=!0,Om(Pi,function(){return zr(),null})),y=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||y){y=ls.transition,ls.transition=null;var k=We;We=1;var T=ze;ze|=4,od.current=null,kb(r,d),Nm(d,r),Qy(gc),Li=!!pc,gc=pc=null,r.current=d,Sb(d),sy(),ze=T,We=k,ls.transition=y}else r.current=d;if(jo&&(jo=!1,wn=r,No=g),y=r.pendingLanes,y===0&&(vn=null),ay(d.stateNode),Ut(r,rt()),o!==null)for(f=r.onRecoverableError,d=0;d<o.length;d++)g=o[d],f(g.value,{componentStack:g.stack,digest:g.digest});if(wo)throw wo=!1,r=dd,dd=null,r;return(No&1)!==0&&r.tag!==0&&zr(),y=r.pendingLanes,(y&1)!==0?r===ud?za++:(za=0,ud=r):za=0,gn(),null}function zr(){if(wn!==null){var r=vh(No),o=ls.transition,d=We;try{if(ls.transition=null,We=16>r?16:r,wn===null)var f=!1;else{if(r=wn,wn=null,No=0,(ze&6)!==0)throw Error(s(331));var g=ze;for(ze|=4,xe=r.current;xe!==null;){var y=xe,k=y.child;if((xe.flags&16)!==0){var T=y.deletions;if(T!==null){for(var L=0;L<T.length;L++){var G=T[L];for(xe=G;xe!==null;){var ie=xe;switch(ie.tag){case 0:case 11:case 15:La(8,ie,y)}var ce=ie.child;if(ce!==null)ce.return=ie,xe=ce;else for(;xe!==null;){ie=xe;var ae=ie.sibling,pe=ie.return;if(ym(ie),ie===G){xe=null;break}if(ae!==null){ae.return=pe,xe=ae;break}xe=pe}}}var ve=y.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var at=we.sibling;we.sibling=null,we=at}while(we!==null)}}xe=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,xe=k;else e:for(;xe!==null;){if(y=xe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:La(9,y,y.return)}var W=y.sibling;if(W!==null){W.return=y.return,xe=W;break e}xe=y.return}}var z=r.current;for(xe=z;xe!==null;){k=xe;var q=k.child;if((k.subtreeFlags&2064)!==0&&q!==null)q.return=k,xe=q;else e:for(k=z;xe!==null;){if(T=xe,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:yo(9,T)}}catch(Ne){nt(T,T.return,Ne)}if(T===k){xe=null;break e}var fe=T.sibling;if(fe!==null){fe.return=T.return,xe=fe;break e}xe=T.return}}if(ze=g,gn(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(Ai,r)}catch{}f=!0}return f}finally{We=d,ls.transition=o}}return!1}function Mm(r,o,d){o=Fr(d,o),o=Jf(r,o,1),r=yn(r,o,1),o=Ot(),r!==null&&(ca(r,1,o),Ut(r,o))}function nt(r,o,d){if(r.tag===3)Mm(r,r,d);else for(;o!==null;){if(o.tag===3){Mm(o,r,d);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(vn===null||!vn.has(f))){r=Fr(d,r),r=Zf(o,r,1),o=yn(o,r,1),r=Ot(),o!==null&&(ca(o,1,r),Ut(o,r));break}}o=o.return}}function Db(r,o,d){var f=r.pingCache;f!==null&&f.delete(o),o=Ot(),r.pingedLanes|=r.suspendedLanes&d,bt===r&&(Nt&d)===d&&(pt===4||pt===3&&(Nt&130023424)===Nt&&500>rt()-cd?Gn(r,0):ld|=d),Ut(r,o)}function Fm(r,o){o===0&&((r.mode&1)===0?o=1:(o=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var d=Ot();r=Ws(r,o),r!==null&&(ca(r,o,d),Ut(r,d))}function Rb(r){var o=r.memoizedState,d=0;o!==null&&(d=o.retryLane),Fm(r,d)}function Mb(r,o){var d=0;switch(r.tag){case 13:var f=r.stateNode,g=r.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(s(314))}f!==null&&f.delete(o),Fm(r,d)}var Lm;Lm=function(r,o,d){if(r!==null)if(r.memoizedProps!==o.pendingProps||It.current)$t=!0;else{if((r.lanes&d)===0&&(o.flags&128)===0)return $t=!1,wb(r,o,d);$t=(r.flags&131072)!==0}else $t=!1,Ze&&(o.flags&1048576)!==0&&pf(o,eo,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;go(r,o),r=o.pendingProps;var g=Cr(o,_t.current);Rr(o,d),g=$c(null,o,f,r,g,d);var y=Bc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,zt(f)?(y=!0,Qi(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Rc(o),g.updater=mo,o.stateNode=g,g._reactInternals=o,Yc(o,f,r,d),o=Qc(null,o,f,!0,y,d)):(o.tag=0,Ze&&y&&Nc(o),Lt(null,o,g,d),o=o.child),o;case 16:f=o.elementType;e:{switch(go(r,o),r=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Lb(f),r=ys(f,r),g){case 0:o=Gc(null,o,f,r,d);break e;case 1:o=lm(null,o,f,r,d);break e;case 11:o=nm(null,o,f,r,d);break e;case 14:o=rm(null,o,f,ys(f.type,r),d);break e}throw Error(s(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ys(f,g),Gc(r,o,f,g,d);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ys(f,g),lm(r,o,f,g,d);case 3:e:{if(cm(o),r===null)throw Error(s(387));f=o.pendingProps,y=o.memoizedState,g=y.element,_f(r,o),io(o,f,null,d);var k=o.memoizedState;if(f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=Fr(Error(s(423)),o),o=dm(r,o,f,d,g);break e}else if(f!==g){g=Fr(Error(s(424)),o),o=dm(r,o,f,d,g);break e}else for(Jt=fn(o.stateNode.containerInfo.firstChild),Qt=o,Ze=!0,xs=null,d=jf(o,null,f,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ar(),f===g){o=Ys(r,o,d);break e}Lt(r,o,f,d)}o=o.child}return o;case 5:return Cf(o),r===null&&Sc(o),f=o.type,g=o.pendingProps,y=r!==null?r.memoizedProps:null,k=g.children,xc(f,g)?k=null:y!==null&&xc(f,y)&&(o.flags|=32),om(r,o),Lt(r,o,k,d),o.child;case 6:return r===null&&Sc(o),null;case 13:return um(r,o,d);case 4:return Mc(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Tr(o,null,f,d):Lt(r,o,f,d),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ys(f,g),nm(r,o,f,g,d);case 7:return Lt(r,o,o.pendingProps,d),o.child;case 8:return Lt(r,o,o.pendingProps.children,d),o.child;case 12:return Lt(r,o,o.pendingProps.children,d),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,k=g.value,Xe(no,f._currentValue),f._currentValue=k,y!==null)if(gs(y.value,k)){if(y.children===g.children&&!It.current){o=Ys(r,o,d);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var T=y.dependencies;if(T!==null){k=y.child;for(var L=T.firstContext;L!==null;){if(L.context===f){if(y.tag===1){L=qs(-1,d&-d),L.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var ie=G.pending;ie===null?L.next=L:(L.next=ie.next,ie.next=L),G.pending=L}}y.lanes|=d,L=y.alternate,L!==null&&(L.lanes|=d),Tc(y.return,d,o),T.lanes|=d;break}L=L.next}}else if(y.tag===10)k=y.type===o.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(s(341));k.lanes|=d,T=k.alternate,T!==null&&(T.lanes|=d),Tc(k,d,o),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===o){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}Lt(r,o,g.children,d),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Rr(o,d),g=is(g),f=f(g),o.flags|=1,Lt(r,o,f,d),o.child;case 14:return f=o.type,g=ys(f,o.pendingProps),g=ys(f.type,g),rm(r,o,f,g,d);case 15:return am(r,o,o.type,o.pendingProps,d);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:ys(f,g),go(r,o),o.tag=1,zt(f)?(r=!0,Qi(o)):r=!1,Rr(o,d),Gf(o,f,g),Yc(o,f,g,d),Qc(null,o,f,!0,r,d);case 19:return fm(r,o,d);case 22:return im(r,o,d)}throw Error(s(156,o.tag))};function Om(r,o){return ph(r,o)}function Fb(r,o,d,f){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(r,o,d,f){return new Fb(r,o,d,f)}function xd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Lb(r){if(typeof r=="function")return xd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===K)return 11;if(r===re)return 14}return 2}function _n(r,o){var d=r.alternate;return d===null?(d=cs(r.tag,o,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=o,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,o=r.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function Co(r,o,d,f,g,y){var k=2;if(f=r,typeof r=="function")xd(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case I:return Jn(d.children,g,y,o);case M:k=8,g|=8;break;case V:return r=cs(12,d,o,g|2),r.elementType=V,r.lanes=y,r;case U:return r=cs(13,d,o,g),r.elementType=U,r.lanes=y,r;case ne:return r=cs(19,d,o,g),r.elementType=ne,r.lanes=y,r;case J:return Eo(d,g,y,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:k=10;break e;case O:k=9;break e;case K:k=11;break e;case re:k=14;break e;case $:k=16,f=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return o=cs(k,d,o,g),o.elementType=r,o.type=f,o.lanes=y,o}function Jn(r,o,d,f){return r=cs(7,r,f,o),r.lanes=d,r}function Eo(r,o,d,f){return r=cs(22,r,f,o),r.elementType=J,r.lanes=d,r.stateNode={isHidden:!1},r}function yd(r,o,d){return r=cs(6,r,null,o),r.lanes=d,r}function bd(r,o,d){return o=cs(4,r.children!==null?r.children:[],r.key,o),o.lanes=d,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function Ob(r,o,d,f,g){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function vd(r,o,d,f,g,y,k,T,L){return r=new Ob(r,o,d,T,L),o===1?(o=1,y===!0&&(o|=8)):o=0,y=cs(3,null,null,o),r.current=y,y.stateNode=r,y.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rc(y),r}function Ib(r,o,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:r,containerInfo:o,implementation:d}}function Im(r){if(!r)return pn;r=r._reactInternals;e:{if($n(r)!==r||r.tag!==1)throw Error(s(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(zt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(s(171))}if(r.tag===1){var d=r.type;if(zt(d))return hf(r,d,o)}return o}function zm(r,o,d,f,g,y,k,T,L){return r=vd(d,f,!0,r,g,y,k,T,L),r.context=Im(null),d=r.current,f=Ot(),g=jn(d),y=qs(f,g),y.callback=o??null,yn(d,y,g),r.current.lanes=g,ca(r,g,f),Ut(r,f),r}function Po(r,o,d,f){var g=o.current,y=Ot(),k=jn(g);return d=Im(d),o.context===null?o.context=d:o.pendingContext=d,o=qs(y,k),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=yn(g,o,k),r!==null&&(ws(r,g,k,y),ao(r,g,k)),k}function Ao(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function $m(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<o?d:o}}function wd(r,o){$m(r,o),(r=r.alternate)&&$m(r,o)}function zb(){return null}var Bm=typeof reportError=="function"?reportError:function(r){console.error(r)};function jd(r){this._internalRoot=r}To.prototype.render=jd.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));Po(r,o,null,null)},To.prototype.unmount=jd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Xn(function(){Po(null,r,null,null)}),o[Bs]=null}};function To(r){this._internalRoot=r}To.prototype.unstable_scheduleHydration=function(r){if(r){var o=Nh();r={blockedOn:null,target:r,priority:o};for(var d=0;d<dn.length&&o!==0&&o<dn[d].priority;d++);dn.splice(d,0,r),d===0&&Sh(r)}};function Nd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Do(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Um(){}function $b(r,o,d,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var G=Ao(k);y.call(G)}}var k=zm(o,f,r,0,null,!1,!1,"",Um);return r._reactRootContainer=k,r[Bs]=k.current,Na(r.nodeType===8?r.parentNode:r),Xn(),k}for(;g=r.lastChild;)r.removeChild(g);if(typeof f=="function"){var T=f;f=function(){var G=Ao(L);T.call(G)}}var L=vd(r,0,!1,null,null,!1,!1,"",Um);return r._reactRootContainer=L,r[Bs]=L.current,Na(r.nodeType===8?r.parentNode:r),Xn(function(){Po(o,L,d,f)}),L}function Ro(r,o,d,f,g){var y=d._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var T=g;g=function(){var L=Ao(k);T.call(L)}}Po(o,k,r,g)}else k=$b(d,o,r,g,f);return Ao(k)}wh=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var d=la(o.pendingLanes);d!==0&&(Yl(o,d|1),Ut(o,rt()),(ze&6)===0&&(Ir=rt()+500,gn()))}break;case 13:Xn(function(){var f=Ws(r,1);if(f!==null){var g=Ot();ws(f,r,1,g)}}),wd(r,1)}},Kl=function(r){if(r.tag===13){var o=Ws(r,134217728);if(o!==null){var d=Ot();ws(o,r,134217728,d)}wd(r,134217728)}},jh=function(r){if(r.tag===13){var o=jn(r),d=Ws(r,o);if(d!==null){var f=Ot();ws(d,r,o,f)}wd(r,o)}},Nh=function(){return We},_h=function(r,o){var d=We;try{return We=r,o()}finally{We=d}},$l=function(r,o,d){switch(o){case"input":if(ke(r,d),o=d.name,d.type==="radio"&&o!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var f=d[o];if(f!==r&&f.form===r.form){var g=Xi(f);if(!g)throw Error(s(90));Be(f),ke(f,g)}}}break;case"textarea":me(r,d);break;case"select":o=d.value,o!=null&&ft(r,!!d.multiple,o,!1)}},lh=md,ch=Xn;var Bb={usingClientEntryPoint:!1,Events:[Sa,kr,Xi,ih,oh,md]},$a={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ub={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=fh(r),r===null?null:r.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||zb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{Ai=Mo.inject(Ub),Cs=Mo}catch{}}return Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bb,Ht.createPortal=function(r,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(o))throw Error(s(200));return Ib(r,o,null,d)},Ht.createRoot=function(r,o){if(!Nd(r))throw Error(s(299));var d=!1,f="",g=Bm;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=vd(r,1,!1,null,null,d,!1,f,g),r[Bs]=o.current,Na(r.nodeType===8?r.parentNode:r),new jd(o)},Ht.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=fh(o),r=r===null?null:r.stateNode,r},Ht.flushSync=function(r){return Xn(r)},Ht.hydrate=function(r,o,d){if(!Do(o))throw Error(s(200));return Ro(null,r,o,!0,d)},Ht.hydrateRoot=function(r,o,d){if(!Nd(r))throw Error(s(405));var f=d!=null&&d.hydratedSources||null,g=!1,y="",k=Bm;if(d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),o=zm(o,null,r,1,d??null,g,!1,y,k),r[Bs]=o.current,Na(r),f)for(r=0;r<f.length;r++)d=f[r],g=d._getVersion,g=g(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,g]:o.mutableSourceEagerHydrationData.push(d,g);return new To(o)},Ht.render=function(r,o,d){if(!Do(o))throw Error(s(200));return Ro(null,r,o,!1,d)},Ht.unmountComponentAtNode=function(r){if(!Do(r))throw Error(s(40));return r._reactRootContainer?(Xn(function(){Ro(null,null,r,!1,function(){r._reactRootContainer=null,r[Bs]=null})}),!0):!1},Ht.unstable_batchedUpdates=md,Ht.unstable_renderSubtreeIntoContainer=function(r,o,d,f){if(!Do(d))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return Ro(r,o,d,!1,f)},Ht.version="18.3.1-next-f1338f8080-20240426",Ht}var Gm;function Zg(){if(Gm)return Sd.exports;Gm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sd.exports=Qb(),Sd.exports}var Qm;function Jb(){if(Qm)return Fo;Qm=1;var t=Zg();return Fo.createRoot=t.createRoot,Fo.hydrateRoot=t.hydrateRoot,Fo}var Zb=Jb();const ev=Jg(Zb);Zg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ii(){return ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ii.apply(this,arguments)}var Cn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cn||(Cn={}));const Jm="popstate";function tv(t){t===void 0&&(t={});function e(n,i){let{pathname:l,search:c,hash:u}=n.location;return eu("",{pathname:l,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:il(i)}return nv(e,s,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ex(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sv(){return Math.random().toString(36).substr(2,8)}function Zm(t,e){return{usr:t.state,key:t.key,idx:e}}function eu(t,e,s,n){return s===void 0&&(s=null),ii({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qr(e):e,{state:s,key:e&&e.key||n||sv()})}function il(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Qr(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nv(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:l=!1}=n,c=i.history,u=Cn.Pop,h=null,m=p();m==null&&(m=0,c.replaceState(ii({},c.state,{idx:m}),""));function p(){return(c.state||{idx:null}).idx}function x(){u=Cn.Pop;let N=p(),E=N==null?null:N-m;m=N,h&&h({action:u,location:v.location,delta:E})}function b(N,E){u=Cn.Push;let S=eu(v.location,N,E);m=p()+1;let C=Zm(S,m),D=v.createHref(S);try{c.pushState(C,"",D)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(D)}l&&h&&h({action:u,location:v.location,delta:1})}function w(N,E){u=Cn.Replace;let S=eu(v.location,N,E);m=p();let C=Zm(S,m),D=v.createHref(S);c.replaceState(C,"",D),l&&h&&h({action:u,location:v.location,delta:0})}function j(N){let E=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof N=="string"?N:il(N);return S=S.replace(/ $/,"%20"),lt(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let v={get action(){return u},get location(){return t(i,c)},listen(N){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Jm,x),h=N,()=>{i.removeEventListener(Jm,x),h=null}},createHref(N){return e(i,N)},createURL:j,encodeLocation(N){let E=j(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:w,go(N){return c.go(N)}};return v}var ep;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ep||(ep={}));function rv(t,e,s){return s===void 0&&(s="/"),av(t,e,s)}function av(t,e,s,n){let i=typeof e=="string"?Qr(e):e,l=ku(i.pathname||"/",s);if(l==null)return null;let c=tx(t);iv(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=yv(l);u=pv(c[h],m)}return u}function tx(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(l,c,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(lt(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let m=An([n,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(lt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),tx(l.children,e,p,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:fv(m,l.index),routesMeta:p})};return t.forEach((l,c)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,c);else for(let h of sx(l.path))i(l,c,h)}),e}function sx(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let c=sx(n.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function iv(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:mv(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const ov=/^:[\w-]+$/,lv=3,cv=2,dv=1,uv=10,hv=-2,tp=t=>t==="*";function fv(t,e){let s=t.split("/"),n=s.length;return s.some(tp)&&(n+=hv),e&&(n+=cv),s.filter(i=>!tp(i)).reduce((i,l)=>i+(ov.test(l)?lv:l===""?dv:uv),n)}function mv(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function pv(t,e,s){let{routesMeta:n}=t,i={},l="/",c=[];for(let u=0;u<n.length;++u){let h=n[u],m=u===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",x=gv({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),b=h.route;if(!x)return null;Object.assign(i,x.params),c.push({params:i,pathname:An([l,x.pathname]),pathnameBase:jv(An([l,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(l=An([l,x.pathnameBase]))}return c}function gv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=xv(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((m,p,x)=>{let{paramName:b,isOptional:w}=p;if(b==="*"){let v=u[x]||"";c=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const j=u[x];return w&&!j?m[b]=void 0:m[b]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:t}}function xv(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),ex(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function yv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ex(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ku(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function bv(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Qr(t):t;return{pathname:s?s.startsWith("/")?s:vv(s,e):e,search:Nv(n),hash:_v(i)}}function vv(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Pd(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Su(t,e){let s=wv(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Cu(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Qr(t):(i=ii({},t),lt(!i.pathname||!i.pathname.includes("?"),Pd("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),Pd("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),Pd("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,u;if(c==null)u=s;else{let x=e.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),x-=1;i.pathname=b.join("/")}u=x>=0?e[x]:"/"}let h=bv(i,u),m=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}const An=t=>t.join("/").replace(/\/\/+/g,"/"),jv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_v=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nx=["post","put","patch","delete"];new Set(nx);const Sv=["get",...nx];new Set(Sv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},oi.apply(this,arguments)}const Eu=_.createContext(null),Cv=_.createContext(null),On=_.createContext(null),xl=_.createContext(null),rn=_.createContext({outlet:null,matches:[],isDataRoute:!1}),rx=_.createContext(null);function Ev(t,e){let{relative:s}=e===void 0?{}:e;Jr()||lt(!1);let{basename:n,navigator:i}=_.useContext(On),{hash:l,pathname:c,search:u}=ix(t,{relative:s}),h=c;return n!=="/"&&(h=c==="/"?n:An([n,c])),i.createHref({pathname:h,search:u,hash:l})}function Jr(){return _.useContext(xl)!=null}function Zr(){return Jr()||lt(!1),_.useContext(xl).location}function ax(t){_.useContext(On).static||_.useLayoutEffect(t)}function mr(){let{isDataRoute:t}=_.useContext(rn);return t?Uv():Pv()}function Pv(){Jr()||lt(!1);let t=_.useContext(Eu),{basename:e,future:s,navigator:n}=_.useContext(On),{matches:i}=_.useContext(rn),{pathname:l}=Zr(),c=JSON.stringify(Su(i,s.v7_relativeSplatPath)),u=_.useRef(!1);return ax(()=>{u.current=!0}),_.useCallback(function(m,p){if(p===void 0&&(p={}),!u.current)return;if(typeof m=="number"){n.go(m);return}let x=Cu(m,JSON.parse(c),l,p.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:An([e,x.pathname])),(p.replace?n.replace:n.push)(x,p.state,p)},[e,n,c,l,t])}function Av(){let{matches:t}=_.useContext(rn),e=t[t.length-1];return e?e.params:{}}function ix(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=_.useContext(On),{matches:i}=_.useContext(rn),{pathname:l}=Zr(),c=JSON.stringify(Su(i,n.v7_relativeSplatPath));return _.useMemo(()=>Cu(t,JSON.parse(c),l,s==="path"),[t,c,l,s])}function Tv(t,e){return Dv(t,e)}function Dv(t,e,s,n){Jr()||lt(!1);let{navigator:i}=_.useContext(On),{matches:l}=_.useContext(rn),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Zr(),p;if(e){var x;let N=typeof e=="string"?Qr(e):e;h==="/"||(x=N.pathname)!=null&&x.startsWith(h)||lt(!1),p=N}else p=m;let b=p.pathname||"/",w=b;if(h!=="/"){let N=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=rv(t,{pathname:w}),v=Ov(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:An([h,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:An([h,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,s,n);return e&&v?_.createElement(xl.Provider,{value:{location:oi({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Cn.Pop}},v):v}function Rv(){let t=Bv(),e=kv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),s?_.createElement("pre",{style:i},s):null,null)}const Mv=_.createElement(Rv,null);class Fv extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?_.createElement(rn.Provider,{value:this.props.routeContext},_.createElement(rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lv(t){let{routeContext:e,match:s,children:n}=t,i=_.useContext(Eu);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),_.createElement(rn.Provider,{value:e},n)}function Ov(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,u=(i=s)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);p>=0||lt(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,m=-1;if(s&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=p),x.route.id){let{loaderData:b,errors:w}=s,j=x.route.loader&&b[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||j){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((p,x,b)=>{let w,j=!1,v=null,N=null;s&&(w=u&&x.route.id?u[x.route.id]:void 0,v=x.route.errorElement||Mv,h&&(m<0&&b===0?(Hv("route-fallback"),j=!0,N=null):m===b&&(j=!0,N=x.route.hydrateFallbackElement||null)));let E=e.concat(c.slice(0,b+1)),S=()=>{let C;return w?C=v:j?C=N:x.route.Component?C=_.createElement(x.route.Component,null):x.route.element?C=x.route.element:C=p,_.createElement(Lv,{match:x,routeContext:{outlet:p,matches:E,isDataRoute:s!=null},children:C})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?_.createElement(Fv,{location:s.location,revalidation:s.revalidation,component:v,error:w,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var ox=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(ox||{}),lx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(lx||{});function Iv(t){let e=_.useContext(Eu);return e||lt(!1),e}function zv(t){let e=_.useContext(Cv);return e||lt(!1),e}function $v(t){let e=_.useContext(rn);return e||lt(!1),e}function cx(t){let e=$v(),s=e.matches[e.matches.length-1];return s.route.id||lt(!1),s.route.id}function Bv(){var t;let e=_.useContext(rx),s=zv(),n=cx();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function Uv(){let{router:t}=Iv(ox.UseNavigateStable),e=cx(lx.UseNavigateStable),s=_.useRef(!1);return ax(()=>{s.current=!0}),_.useCallback(function(i,l){l===void 0&&(l={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,oi({fromRouteId:e},l)))},[t,e])}const sp={};function Hv(t,e,s){sp[t]||(sp[t]=!0)}function Vv(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function tu(t){let{to:e,replace:s,state:n,relative:i}=t;Jr()||lt(!1);let{future:l,static:c}=_.useContext(On),{matches:u}=_.useContext(rn),{pathname:h}=Zr(),m=mr(),p=Cu(e,Su(u,l.v7_relativeSplatPath),h,i==="path"),x=JSON.stringify(p);return _.useEffect(()=>m(JSON.parse(x),{replace:s,state:n,relative:i}),[m,x,i,s,n]),null}function gt(t){lt(!1)}function Wv(t){let{basename:e="/",children:s=null,location:n,navigationType:i=Cn.Pop,navigator:l,static:c=!1,future:u}=t;Jr()&&lt(!1);let h=e.replace(/^\/*/,"/"),m=_.useMemo(()=>({basename:h,navigator:l,static:c,future:oi({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);typeof n=="string"&&(n=Qr(n));let{pathname:p="/",search:x="",hash:b="",state:w=null,key:j="default"}=n,v=_.useMemo(()=>{let N=ku(p,h);return N==null?null:{location:{pathname:N,search:x,hash:b,state:w,key:j},navigationType:i}},[h,p,x,b,w,j,i]);return v==null?null:_.createElement(On.Provider,{value:m},_.createElement(xl.Provider,{children:s,value:v}))}function qv(t){let{children:e,location:s}=t;return Tv(su(e),s)}new Promise(()=>{});function su(t,e){e===void 0&&(e=[]);let s=[];return _.Children.forEach(t,(n,i)=>{if(!_.isValidElement(n))return;let l=[...e,i];if(n.type===_.Fragment){s.push.apply(s,su(n.props.children,l));return}n.type!==gt&&lt(!1),!n.props.index||!n.props.children||lt(!1);let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=su(n.props.children,l)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},nu.apply(this,arguments)}function Yv(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function Kv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xv(t,e){return t.button===0&&(!e||e==="_self")&&!Kv(t)}const Gv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qv="6";try{window.__reactRouterVersion=Qv}catch{}const Jv="startTransition",np=Kb[Jv];function Zv(t){let{basename:e,children:s,future:n,window:i}=t,l=_.useRef();l.current==null&&(l.current=tv({window:i,v5Compat:!0}));let c=l.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:m}=n||{},p=_.useCallback(x=>{m&&np?np(()=>h(x)):h(x)},[h,m]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.useEffect(()=>Vv(n),[n]),_.createElement(Wv,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:n})}const ew=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rp=_.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:p,viewTransition:x}=e,b=Yv(e,Gv),{basename:w}=_.useContext(On),j,v=!1;if(typeof m=="string"&&tw.test(m)&&(j=m,ew))try{let C=new URL(window.location.href),D=m.startsWith("//")?new URL(C.protocol+m):new URL(m),A=ku(D.pathname,w);D.origin===C.origin&&A!=null?m=A+D.search+D.hash:v=!0}catch{}let N=Ev(m,{relative:i}),E=sw(m,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:x});function S(C){n&&n(C),C.defaultPrevented||E(C)}return _.createElement("a",nu({},b,{href:j||N,onClick:v||l?n:S,ref:s,target:h}))});var ap;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ap||(ap={}));var ip;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ip||(ip={}));function sw(t,e){let{target:s,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:u}=e===void 0?{}:e,h=mr(),m=Zr(),p=ix(t,{relative:c});return _.useCallback(x=>{if(Xv(x,s)){x.preventDefault();let b=n!==void 0?n:il(m)===il(p);h(t,{replace:b,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[m,h,p,n,i,s,t,l,c,u])}function dx(t,e){return function(){return t.apply(e,arguments)}}const{toString:nw}=Object.prototype,{getPrototypeOf:Pu}=Object,{iterator:yl,toStringTag:ux}=Symbol,bl=(t=>e=>{const s=nw.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ks=t=>(t=t.toLowerCase(),e=>bl(e)===t),vl=t=>e=>typeof e===t,{isArray:ea}=Array,li=vl("undefined");function wi(t){return t!==null&&!li(t)&&t.constructor!==null&&!li(t.constructor)&&Yt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hx=ks("ArrayBuffer");function rw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hx(t.buffer),e}const aw=vl("string"),Yt=vl("function"),fx=vl("number"),ji=t=>t!==null&&typeof t=="object",iw=t=>t===!0||t===!1,tl=t=>{if(bl(t)!=="object")return!1;const e=Pu(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ux in t)&&!(yl in t)},ow=t=>{if(!ji(t)||wi(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},lw=ks("Date"),cw=ks("File"),dw=ks("Blob"),uw=ks("FileList"),hw=t=>ji(t)&&Yt(t.pipe),fw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Yt(t.append)&&((e=bl(t))==="formdata"||e==="object"&&Yt(t.toString)&&t.toString()==="[object FormData]"))},mw=ks("URLSearchParams"),[pw,gw,xw,yw]=["ReadableStream","Request","Response","Headers"].map(ks),bw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ea(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(wi(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let u;for(n=0;n<c;n++)u=l[n],e.call(null,t[u],u,t)}}function mx(t,e){if(wi(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const ar=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,px=t=>!li(t)&&t!==ar;function ru(){const{caseless:t}=px(this)&&this||{},e={},s=(n,i)=>{const l=t&&mx(e,i)||i;tl(e[l])&&tl(n)?e[l]=ru(e[l],n):tl(n)?e[l]=ru({},n):ea(n)?e[l]=n.slice():e[l]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ni(arguments[n],s);return e}const vw=(t,e,s,{allOwnKeys:n}={})=>(Ni(e,(i,l)=>{s&&Yt(i)?t[l]=dx(i,s):t[l]=i},{allOwnKeys:n}),t),ww=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jw=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Nw=(t,e,s,n)=>{let i,l,c;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!n||n(c,t,e))&&!u[c]&&(e[c]=t[c],u[c]=!0);t=s!==!1&&Pu(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},_w=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},kw=t=>{if(!t)return null;if(ea(t))return t;let e=t.length;if(!fx(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Sw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Pu(Uint8Array)),Cw=(t,e)=>{const n=(t&&t[yl]).call(t);let i;for(;(i=n.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},Ew=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Pw=ks("HTMLFormElement"),Aw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),op=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Tw=ks("RegExp"),gx=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Ni(s,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(n[l]=c||i)}),Object.defineProperties(t,n)},Dw=t=>{gx(t,(e,s)=>{if(Yt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Yt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Rw=(t,e)=>{const s={},n=i=>{i.forEach(l=>{s[l]=!0})};return ea(t)?n(t):n(String(t).split(e)),s},Mw=()=>{},Fw=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Lw(t){return!!(t&&Yt(t.append)&&t[ux]==="FormData"&&t[yl])}const Ow=t=>{const e=new Array(10),s=(n,i)=>{if(ji(n)){if(e.indexOf(n)>=0)return;if(wi(n))return n;if(!("toJSON"in n)){e[i]=n;const l=ea(n)?[]:{};return Ni(n,(c,u)=>{const h=s(c,i+1);!li(h)&&(l[u]=h)}),e[i]=void 0,l}}return n};return s(t,0)},Iw=ks("AsyncFunction"),zw=t=>t&&(ji(t)||Yt(t))&&Yt(t.then)&&Yt(t.catch),xx=((t,e)=>t?setImmediate:e?((s,n)=>(ar.addEventListener("message",({source:i,data:l})=>{i===ar&&l===s&&n.length&&n.shift()()},!1),i=>{n.push(i),ar.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Yt(ar.postMessage)),$w=typeof queueMicrotask<"u"?queueMicrotask.bind(ar):typeof process<"u"&&process.nextTick||xx,Bw=t=>t!=null&&Yt(t[yl]),Q={isArray:ea,isArrayBuffer:hx,isBuffer:wi,isFormData:fw,isArrayBufferView:rw,isString:aw,isNumber:fx,isBoolean:iw,isObject:ji,isPlainObject:tl,isEmptyObject:ow,isReadableStream:pw,isRequest:gw,isResponse:xw,isHeaders:yw,isUndefined:li,isDate:lw,isFile:cw,isBlob:dw,isRegExp:Tw,isFunction:Yt,isStream:hw,isURLSearchParams:mw,isTypedArray:Sw,isFileList:uw,forEach:Ni,merge:ru,extend:vw,trim:bw,stripBOM:ww,inherits:jw,toFlatObject:Nw,kindOf:bl,kindOfTest:ks,endsWith:_w,toArray:kw,forEachEntry:Cw,matchAll:Ew,isHTMLForm:Pw,hasOwnProperty:op,hasOwnProp:op,reduceDescriptors:gx,freezeMethods:Dw,toObjectSet:Rw,toCamelCase:Aw,noop:Mw,toFiniteNumber:Fw,findKey:mx,global:ar,isContextDefined:px,isSpecCompliantForm:Lw,toJSONObject:Ow,isAsyncFn:Iw,isThenable:zw,setImmediate:xx,asap:$w,isIterable:Bw};function Te(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Q.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const yx=Te.prototype,bx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bx[t]={value:t}});Object.defineProperties(Te,bx);Object.defineProperty(yx,"isAxiosError",{value:!0});Te.from=(t,e,s,n,i,l)=>{const c=Object.create(yx);return Q.toFlatObject(t,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Te.call(c,t.message,e,s,n,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const Uw=null;function au(t){return Q.isPlainObject(t)||Q.isArray(t)}function vx(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function lp(t,e,s){return t?t.concat(e).map(function(i,l){return i=vx(i),!s&&l?"["+i+"]":i}).join(s?".":""):e}function Hw(t){return Q.isArray(t)&&!t.some(au)}const Vw=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function wl(t,e,s){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=Q.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,N){return!Q.isUndefined(N[v])});const n=s.metaTokens,i=s.visitor||p,l=s.dots,c=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(i))throw new TypeError("visitor must be a function");function m(j){if(j===null)return"";if(Q.isDate(j))return j.toISOString();if(Q.isBoolean(j))return j.toString();if(!h&&Q.isBlob(j))throw new Te("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(j)||Q.isTypedArray(j)?h&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,v,N){let E=j;if(j&&!N&&typeof j=="object"){if(Q.endsWith(v,"{}"))v=n?v:v.slice(0,-2),j=JSON.stringify(j);else if(Q.isArray(j)&&Hw(j)||(Q.isFileList(j)||Q.endsWith(v,"[]"))&&(E=Q.toArray(j)))return v=vx(v),E.forEach(function(C,D){!(Q.isUndefined(C)||C===null)&&e.append(c===!0?lp([v],D,l):c===null?v:v+"[]",m(C))}),!1}return au(j)?!0:(e.append(lp(N,v,l),m(j)),!1)}const x=[],b=Object.assign(Vw,{defaultVisitor:p,convertValue:m,isVisitable:au});function w(j,v){if(!Q.isUndefined(j)){if(x.indexOf(j)!==-1)throw Error("Circular reference detected in "+v.join("."));x.push(j),Q.forEach(j,function(E,S){(!(Q.isUndefined(E)||E===null)&&i.call(e,E,Q.isString(S)?S.trim():S,v,b))===!0&&w(E,v?v.concat(S):[S])}),x.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return w(t),e}function cp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Au(t,e){this._pairs=[],t&&wl(t,this,e)}const wx=Au.prototype;wx.append=function(e,s){this._pairs.push([e,s])};wx.toString=function(e){const s=e?function(n){return e.call(this,n,cp)}:cp;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Ww(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jx(t,e,s){if(!e)return t;const n=s&&s.encode||Ww;Q.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let l;if(i?l=i(e,s):l=Q.isURLSearchParams(e)?e.toString():new Au(e,s).toString(n),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class dp{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Nx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qw=typeof URLSearchParams<"u"?URLSearchParams:Au,Yw=typeof FormData<"u"?FormData:null,Kw=typeof Blob<"u"?Blob:null,Xw={isBrowser:!0,classes:{URLSearchParams:qw,FormData:Yw,Blob:Kw},protocols:["http","https","file","blob","url","data"]},Tu=typeof window<"u"&&typeof document<"u",iu=typeof navigator=="object"&&navigator||void 0,Gw=Tu&&(!iu||["ReactNative","NativeScript","NS"].indexOf(iu.product)<0),Qw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jw=Tu&&window.location.href||"http://localhost",Zw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tu,hasStandardBrowserEnv:Gw,hasStandardBrowserWebWorkerEnv:Qw,navigator:iu,origin:Jw},Symbol.toStringTag,{value:"Module"})),Dt={...Zw,...Xw};function e1(t,e){return wl(t,new Dt.classes.URLSearchParams,{visitor:function(s,n,i,l){return Dt.isNode&&Q.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function t1(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function s1(t){const e={},s=Object.keys(t);let n;const i=s.length;let l;for(n=0;n<i;n++)l=s[n],e[l]=t[l];return e}function _x(t){function e(s,n,i,l){let c=s[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=s.length;return c=!c&&Q.isArray(i)?i.length:c,h?(Q.hasOwnProp(i,c)?i[c]=[i[c],n]:i[c]=n,!u):((!i[c]||!Q.isObject(i[c]))&&(i[c]=[]),e(s,n,i[c],l)&&Q.isArray(i[c])&&(i[c]=s1(i[c])),!u)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const s={};return Q.forEachEntry(t,(n,i)=>{e(t1(n),i,s,0)}),s}return null}function n1(t,e,s){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const _i={transitional:Nx,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,l=Q.isObject(e);if(l&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return i?JSON.stringify(_x(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return e1(e,this.formSerializer).toString();if((u=Q.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return wl(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||i?(s.setContentType("application/json",!1),n1(e)):e}],transformResponse:[function(e){const s=this.transitional||_i.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(n&&!this.responseType||i)){const c=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Te.from(u,Te.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{_i.headers[t]={}});const r1=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),a1=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),s=c.substring(0,i).trim().toLowerCase(),n=c.substring(i+1).trim(),!(!s||e[s]&&r1[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},up=Symbol("internals");function Ua(t){return t&&String(t).trim().toLowerCase()}function sl(t){return t===!1||t==null?t:Q.isArray(t)?t.map(sl):String(t)}function i1(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const o1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ad(t,e,s,n,i){if(Q.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!Q.isString(e)){if(Q.isString(n))return e.indexOf(n)!==-1;if(Q.isRegExp(n))return n.test(e)}}function l1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function c1(t,e){const s=Q.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,l,c){return this[n].call(this,e,i,l,c)},configurable:!0})})}let Kt=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function l(u,h,m){const p=Ua(h);if(!p)throw new Error("header name must be a non-empty string");const x=Q.findKey(i,p);(!x||i[x]===void 0||m===!0||m===void 0&&i[x]!==!1)&&(i[x||h]=sl(u))}const c=(u,h)=>Q.forEach(u,(m,p)=>l(m,p,h));if(Q.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(Q.isString(e)&&(e=e.trim())&&!o1(e))c(a1(e),s);else if(Q.isObject(e)&&Q.isIterable(e)){let u={},h,m;for(const p of e){if(!Q.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?Q.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,s)}else e!=null&&l(s,e,n);return this}get(e,s){if(e=Ua(e),e){const n=Q.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return i1(i);if(Q.isFunction(s))return s.call(this,i,n);if(Q.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Ua(e),e){const n=Q.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Ad(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function l(c){if(c=Ua(c),c){const u=Q.findKey(n,c);u&&(!s||Ad(n,n[u],u,s))&&(delete n[u],i=!0)}}return Q.isArray(e)?e.forEach(l):l(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const l=s[n];(!e||Ad(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const s=this,n={};return Q.forEach(this,(i,l)=>{const c=Q.findKey(n,l);if(c){s[c]=sl(i),delete s[l];return}const u=e?l1(l):String(l).trim();u!==l&&delete s[l],s[u]=sl(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return Q.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&Q.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[up]=this[up]={accessors:{}}).accessors,i=this.prototype;function l(c){const u=Ua(c);n[u]||(c1(i,c),n[u]=!0)}return Q.isArray(e)?e.forEach(l):l(e),this}};Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Kt.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});Q.freezeMethods(Kt);function Td(t,e){const s=this||_i,n=e||s,i=Kt.from(n.headers);let l=n.data;return Q.forEach(t,function(u){l=u.call(s,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function kx(t){return!!(t&&t.__CANCEL__)}function ta(t,e,s){Te.call(this,t??"canceled",Te.ERR_CANCELED,e,s),this.name="CanceledError"}Q.inherits(ta,Te,{__CANCEL__:!0});function Sx(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Te("Request failed with status code "+s.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function d1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function u1(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),p=n[l];c||(c=m),s[i]=h,n[i]=m;let x=l,b=0;for(;x!==i;)b+=s[x++],x=x%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),m-c<e)return;const w=p&&m-p;return w?Math.round(b*1e3/w):void 0}}function h1(t,e){let s=0,n=1e3/e,i,l;const c=(m,p=Date.now())=>{s=p,i=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const p=Date.now(),x=p-s;x>=n?c(m,p):(i=m,l||(l=setTimeout(()=>{l=null,c(i)},n-x)))},()=>i&&c(i)]}const ol=(t,e,s=3)=>{let n=0;const i=u1(50,250);return h1(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-n,m=i(h),p=c<=u;n=c;const x={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-c)/m:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(x)},s)},hp=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},fp=t=>(...e)=>Q.asap(()=>t(...e)),f1=Dt.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Dt.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Dt.origin),Dt.navigator&&/(msie|trident)/i.test(Dt.navigator.userAgent)):()=>!0,m1=Dt.hasStandardBrowserEnv?{write(t,e,s,n,i,l){const c=[t+"="+encodeURIComponent(e)];Q.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),Q.isString(n)&&c.push("path="+n),Q.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function g1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Cx(t,e,s){let n=!p1(e);return t&&(n||s==!1)?g1(t,e):e}const mp=t=>t instanceof Kt?{...t}:t;function dr(t,e){e=e||{};const s={};function n(m,p,x,b){return Q.isPlainObject(m)&&Q.isPlainObject(p)?Q.merge.call({caseless:b},m,p):Q.isPlainObject(p)?Q.merge({},p):Q.isArray(p)?p.slice():p}function i(m,p,x,b){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m,x,b)}else return n(m,p,x,b)}function l(m,p){if(!Q.isUndefined(p))return n(void 0,p)}function c(m,p){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function u(m,p,x){if(x in e)return n(m,p);if(x in t)return n(void 0,m)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(m,p,x)=>i(mp(m),mp(p),x,!0)};return Q.forEach(Object.keys({...t,...e}),function(p){const x=h[p]||i,b=x(t[p],e[p],p);Q.isUndefined(b)&&x!==u||(s[p]=b)}),s}const Ex=t=>{const e=dr({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=Kt.from(c),e.url=jx(Cx(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Q.isFormData(s)){if(Dt.hasStandardBrowserEnv||Dt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[m,...p]=h?h.split(";").map(x=>x.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",...p].join("; "))}}if(Dt.hasStandardBrowserEnv&&(n&&Q.isFunction(n)&&(n=n(e)),n||n!==!1&&f1(e.url))){const m=i&&l&&m1.read(l);m&&c.set(i,m)}return e},x1=typeof XMLHttpRequest<"u",y1=x1&&function(t){return new Promise(function(s,n){const i=Ex(t);let l=i.data;const c=Kt.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i,p,x,b,w,j;function v(){w&&w(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function E(){if(!N)return;const C=Kt.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),A={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:C,config:t,request:N};Sx(function(I){s(I),v()},function(I){n(I),v()},A),N=null}"onloadend"in N?N.onloadend=E:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(E)},N.onabort=function(){N&&(n(new Te("Request aborted",Te.ECONNABORTED,t,N)),N=null)},N.onerror=function(){n(new Te("Network Error",Te.ERR_NETWORK,t,N)),N=null},N.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||Nx;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),n(new Te(D,A.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,N)),N=null},l===void 0&&c.setContentType(null),"setRequestHeader"in N&&Q.forEach(c.toJSON(),function(D,A){N.setRequestHeader(A,D)}),Q.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),u&&u!=="json"&&(N.responseType=i.responseType),m&&([b,j]=ol(m,!0),N.addEventListener("progress",b)),h&&N.upload&&([x,w]=ol(h),N.upload.addEventListener("progress",x),N.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(p=C=>{N&&(n(!C||C.type?new ta(null,t,N):C),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const S=d1(i.url);if(S&&Dt.protocols.indexOf(S)===-1){n(new Te("Unsupported protocol "+S+":",Te.ERR_BAD_REQUEST,t));return}N.send(l||null)})},b1=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const l=function(m){if(!i){i=!0,u();const p=m instanceof Error?m:this.reason;n.abort(p instanceof Te?p:new ta(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Te(`timeout ${e} of ms exceeded`,Te.ETIMEDOUT))},e);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:h}=n;return h.unsubscribe=()=>Q.asap(u),h}},v1=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},w1=async function*(t,e){for await(const s of j1(t))yield*v1(s,e)},j1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},pp=(t,e,s,n)=>{const i=w1(t,e);let l=0,c,u=h=>{c||(c=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await i.next();if(m){u(),h.close();return}let x=p.byteLength;if(s){let b=l+=x;s(b)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},jl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Px=jl&&typeof ReadableStream=="function",N1=jl&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ax=(t,...e)=>{try{return!!t(...e)}catch{return!1}},_1=Px&&Ax(()=>{let t=!1;const e=new Request(Dt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),gp=64*1024,ou=Px&&Ax(()=>Q.isReadableStream(new Response("").body)),ll={stream:ou&&(t=>t.body)};jl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ll[e]&&(ll[e]=Q.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new Te(`Response type '${e}' is not supported`,Te.ERR_NOT_SUPPORT,n)})})})(new Response);const k1=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(Dt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await N1(t)).byteLength},S1=async(t,e)=>{const s=Q.toFiniteNumber(t.getContentLength());return s??k1(e)},C1=jl&&(async t=>{let{url:e,method:s,data:n,signal:i,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:x="same-origin",fetchOptions:b}=Ex(t);m=m?(m+"").toLowerCase():"text";let w=b1([i,l&&l.toAbortSignal()],c),j;const v=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let N;try{if(h&&_1&&s!=="get"&&s!=="head"&&(N=await S1(p,n))!==0){let A=new Request(e,{method:"POST",body:n,duplex:"half"}),F;if(Q.isFormData(n)&&(F=A.headers.get("content-type"))&&p.setContentType(F),A.body){const[I,M]=hp(N,ol(fp(h)));n=pp(A.body,gp,I,M)}}Q.isString(x)||(x=x?"include":"omit");const E="credentials"in Request.prototype;j=new Request(e,{...b,signal:w,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:E?x:void 0});let S=await fetch(j,b);const C=ou&&(m==="stream"||m==="response");if(ou&&(u||C&&v)){const A={};["status","statusText","headers"].forEach(V=>{A[V]=S[V]});const F=Q.toFiniteNumber(S.headers.get("content-length")),[I,M]=u&&hp(F,ol(fp(u),!0))||[];S=new Response(pp(S.body,gp,I,()=>{M&&M(),v&&v()}),A)}m=m||"text";let D=await ll[Q.findKey(ll,m)||"text"](S,t);return!C&&v&&v(),await new Promise((A,F)=>{Sx(A,F,{data:D,headers:Kt.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:j})})}catch(E){throw v&&v(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,t,j),{cause:E.cause||E}):Te.from(E,E&&E.code,t,j)}}),lu={http:Uw,xhr:y1,fetch:C1};Q.forEach(lu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xp=t=>`- ${t}`,E1=t=>Q.isFunction(t)||t===null||t===!1,Tx={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let s,n;const i={};for(let l=0;l<e;l++){s=t[l];let c;if(n=s,!E1(s)&&(n=lu[(c=String(s)).toLowerCase()],n===void 0))throw new Te(`Unknown adapter '${c}'`);if(n)break;i[c||"#"+l]=n}if(!n){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(xp).join(`
`):" "+xp(l[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:lu};function Dd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ta(null,t)}function yp(t){return Dd(t),t.headers=Kt.from(t.headers),t.data=Td.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Tx.getAdapter(t.adapter||_i.adapter)(t).then(function(n){return Dd(t),n.data=Td.call(t,t.transformResponse,n),n.headers=Kt.from(n.headers),n},function(n){return kx(n)||(Dd(t),n&&n.response&&(n.response.data=Td.call(t,t.transformResponse,n.response),n.response.headers=Kt.from(n.response.headers))),Promise.reject(n)})}const Dx="1.11.0",Nl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Nl[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const bp={};Nl.transitional=function(e,s,n){function i(l,c){return"[Axios v"+Dx+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,u)=>{if(e===!1)throw new Te(i(c," has been removed"+(s?" in "+s:"")),Te.ERR_DEPRECATED);return s&&!bp[c]&&(bp[c]=!0,console.warn(i(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,c,u):!0}};Nl.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function P1(t,e,s){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const l=n[i],c=e[l];if(c){const u=t[l],h=u===void 0||c(u,l,t);if(h!==!0)throw new Te("option "+l+" must be "+h,Te.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Te("Unknown option "+l,Te.ERR_BAD_OPTION)}}const nl={assertOptions:P1,validators:Nl},Ds=nl.validators;let or=class{constructor(e){this.defaults=e||{},this.interceptors={request:new dp,response:new dp}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=dr(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:l}=s;n!==void 0&&nl.assertOptions(n,{silentJSONParsing:Ds.transitional(Ds.boolean),forcedJSONParsing:Ds.transitional(Ds.boolean),clarifyTimeoutError:Ds.transitional(Ds.boolean)},!1),i!=null&&(Q.isFunction(i)?s.paramsSerializer={serialize:i}:nl.assertOptions(i,{encode:Ds.function,serialize:Ds.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),nl.assertOptions(s,{baseUrl:Ds.spelling("baseURL"),withXsrfToken:Ds.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=l&&Q.merge(l.common,l[s.method]);l&&Q.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),s.headers=Kt.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(h=h&&v.synchronous,u.unshift(v.fulfilled,v.rejected))});const m=[];this.interceptors.response.forEach(function(v){m.push(v.fulfilled,v.rejected)});let p,x=0,b;if(!h){const j=[yp.bind(this),void 0];for(j.unshift(...u),j.push(...m),b=j.length,p=Promise.resolve(s);x<b;)p=p.then(j[x++],j[x++]);return p}b=u.length;let w=s;for(x=0;x<b;){const j=u[x++],v=u[x++];try{w=j(w)}catch(N){v.call(this,N);break}}try{p=yp.call(this,w)}catch(j){return Promise.reject(j)}for(x=0,b=m.length;x<b;)p=p.then(m[x++],m[x++]);return p}getUri(e){e=dr(this.defaults,e);const s=Cx(e.baseURL,e.url,e.allowAbsoluteUrls);return jx(s,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){or.prototype[e]=function(s,n){return this.request(dr(n||{},{method:e,url:s,data:(n||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function s(n){return function(l,c,u){return this.request(dr(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}or.prototype[e]=s(),or.prototype[e+"Form"]=s(!0)});let A1=class Rx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(i=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](i);n._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(u=>{n.subscribe(u),l=u}).then(i);return c.cancel=function(){n.unsubscribe(l)},c},e(function(l,c,u){n.reason||(n.reason=new ta(l,c,u),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Rx(function(i){e=i}),cancel:e}}};function T1(t){return function(s){return t.apply(null,s)}}function D1(t){return Q.isObject(t)&&t.isAxiosError===!0}const cu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cu).forEach(([t,e])=>{cu[e]=t});function Mx(t){const e=new or(t),s=dx(or.prototype.request,e);return Q.extend(s,or.prototype,e,{allOwnKeys:!0}),Q.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Mx(dr(t,i))},s}const Oe=Mx(_i);Oe.Axios=or;Oe.CanceledError=ta;Oe.CancelToken=A1;Oe.isCancel=kx;Oe.VERSION=Dx;Oe.toFormData=wl;Oe.AxiosError=Te;Oe.Cancel=Oe.CanceledError;Oe.all=function(e){return Promise.all(e)};Oe.spread=T1;Oe.isAxiosError=D1;Oe.mergeConfig=dr;Oe.AxiosHeaders=Kt;Oe.formToJSON=t=>_x(Q.isHTMLForm(t)?new FormData(t):t);Oe.getAdapter=Tx.getAdapter;Oe.HttpStatusCode=cu;Oe.default=Oe;const{Axios:TC,AxiosError:DC,CanceledError:RC,isCancel:MC,CancelToken:FC,VERSION:LC,all:OC,Cancel:IC,isAxiosError:zC,spread:$C,toFormData:BC,AxiosHeaders:UC,HttpStatusCode:HC,formToJSON:VC,getAdapter:WC,mergeConfig:qC}=Oe,Ha="http://localhost:5000/api";class R1{constructor(){this.refreshPromise=null,this.setupAxiosInterceptors()}setupAxiosInterceptors(){Oe.interceptors.request.use(e=>{const s=localStorage.getItem("access_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),Oe.interceptors.response.use(e=>e,async e=>{const s=e.config;if(e.response?.status===401&&!s._retry)if(console.log("🚫 401 Unauthorized detected:",e.response?.data?.message||"Token invalid"),s._retry=!0,!["/auth/login","/auth/refresh","/auth/logout"].some(l=>s.url?.includes(l))&&this.getRefreshToken())try{console.log("🔄 Attempting token refresh...");const l=await this.refreshToken();if(l)return s.headers.Authorization=`Bearer ${l.accessToken}`,console.log("🔄 Retrying original request with new token"),Oe(s)}catch(l){return console.error("🚫 Token refresh failed:",l),this.handleAuthFailure("Token refresh failed"),Promise.reject(l)}else console.log("🚪 No refresh token available or skip endpoint, redirecting to login"),this.handleAuthFailure("Authentication required");return Promise.reject(e)})}async login(e,s){try{const n=await Oe.post(`${Ha}/auth/login`,{username:e,password:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"Login failed")}catch(n){throw console.error("🚫 Login error:",n),n}}async loginWith2FA(e,s){try{const n=await Oe.post(`${Ha}/auth/login-2fa`,{user_id:e,token:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"2FA login failed")}catch(n){throw console.error("🚫 2FA login error:",n),n}}async refreshToken(){if(this.refreshPromise)return this.refreshPromise;const e=localStorage.getItem("refresh_token");if(!e)throw console.error("🚫 No refresh token available"),new Error("No refresh token available");this.refreshPromise=this.performTokenRefresh(e);try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performTokenRefresh(e){try{console.log("🔄 Refreshing tokens...");const s=await Oe.post(`${Ha}/auth/refresh`,{refreshToken:e});if(s.data.success){const{accessToken:n,refreshToken:i,user:l}=s.data.data;return localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",i),l&&localStorage.setItem("user",JSON.stringify(l)),console.log("✅ Tokens refreshed successfully"),{accessToken:n,refreshToken:i}}throw new Error(s.data.message||"Token refresh failed")}catch(s){throw console.error("🚫 Token refresh error:",s),s.response?.status===401&&console.log("🚫 Refresh token expired or invalid"),s}}async logout(){try{const e=localStorage.getItem("refresh_token");e&&await Oe.post(`${Ha}/auth/logout`,{refreshToken:e})}catch(e){console.warn("⚠️ Logout API call failed:",e.message)}finally{this.clearAuthData(),this.redirectToLogin()}}async getCurrentUser(){try{const e=await Oe.get(`${Ha}/auth/me`);if(e.data.success){const s=e.data.data.user;return localStorage.setItem("user",JSON.stringify(s)),s}throw new Error(e.data.message||"Failed to get user info")}catch(e){throw console.error("🚫 Get current user error:",e),e}}setAuthData(e,s,n){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(n)),console.log("✅ Auth data stored successfully")}clearAuthData(){["access_token","refresh_token","auth_token","authToken","user"].forEach(s=>localStorage.removeItem(s)),console.log("🧹 Auth data cleared")}handleAuthFailure(e="Authentication failed"){console.log(`🚫 Auth failure: ${e}`),this.clearAuthData(),this.redirectToLogin()}redirectToLogin(){window.location.pathname!=="/login"&&(console.log("🔄 Redirecting to login page..."),window.location.pathname!=="/"&&sessionStorage.setItem("redirectAfterLogin",window.location.pathname),window.location.href="/login")}isAuthenticated(){const e=localStorage.getItem("access_token");localStorage.getItem("refresh_token");const s=localStorage.getItem("user");return!!(e&&s)}getStoredUser(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("🚫 Failed to parse stored user:",e),null}}getAccessToken(){return localStorage.getItem("access_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}isTokenExpiringSoon(){const e=this.getAccessToken();if(!e)return!1;try{const n=JSON.parse(atob(e.split(".")[1])).exp*1e3,i=Date.now();return n-i<120*1e3}catch(s){return console.error("🚫 Error checking token expiration:",s),!1}}async checkAndRefreshToken(){if(this.isTokenExpiringSoon()&&this.getRefreshToken())try{console.log("🔄 Token expiring soon, proactively refreshing..."),await this.refreshToken()}catch(e){console.error("🚫 Proactive token refresh failed:",e)}}startTokenRefreshTimer(){setInterval(()=>{this.checkAndRefreshToken()},60*1e3)}}const js=new R1,Fx=_.createContext(),Du=()=>{const t=_.useContext(Fx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},M1=({children:t})=>{const[e,s]=_.useState(null),[n,i]=_.useState(null),[l,c]=_.useState(!0);_.useEffect(()=>{(()=>{try{if(js.isAuthenticated()){const j=js.getStoredUser(),v=js.getAccessToken();v&&j?(i(v),s(j),js.checkAndRefreshToken(),console.log("✅ User authenticated from stored tokens")):(console.log("⚠️ Invalid stored auth data, clearing..."),js.clearAuthData())}else console.log("❤️ No valid authentication found")}catch(j){console.error("Error loading auth from localStorage:",j),js.clearAuthData()}finally{c(!1)}})()},[]);const u=(w,j,v)=>{console.log("🔐 AuthContext login called:",{hasUser:!!w,hasToken:!!j,hasRefresh:!!v}),s(w),i(j),v?js.setAuthData(j,v,w):(localStorage.setItem("access_token",j),localStorage.setItem("user",JSON.stringify(w))),js.checkAndRefreshToken(),localStorage.removeItem("authToken"),console.log("✅ AuthContext login completed")},h=async()=>{s(null),i(null);try{await js.logout()}catch(w){console.error("Error during logout:",w),js.clearAuthData()}},m=()=>{const w=js.isAuthenticated(),j=!!(e&&n),v=w||j;return!v&&w!==j&&console.log("🔍 Auth state mismatch:",{serviceAuth:w,stateAuth:j,hasUser:!!e,hasToken:!!n}),v},b={user:e,token:n,loading:l,login:u,logout:h,isAuthenticated:m,hasRole:w=>e?.role_name===w,hasPermission:w=>m()?e?.role_name==="super_admin"||e?.role?.name==="super_admin"?!0:e?.permissions&&Array.isArray(e.permissions)?e.permissions.includes(w):e?.permissions&&typeof e.permissions=="object"?!!e.permissions[w]:!1:!1};return a.jsx(Fx.Provider,{value:b,children:t})},Ru=Oe.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Ru.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&!t.headers.Authorization&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ru.interceptors.response.use(t=>t,t=>(t.response?.status!==401&&t.response?.status!==403&&console.error("🚫 API Error:",{status:t.response?.status,message:t.response?.data?.message||t.message,url:t.config?.url}),Promise.reject(t)));class F1{constructor(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.CACHE_DURATION=300*1e3,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null,this.maxRetries=3}getCurrentUser(){try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return!s||typeof s!="object"||!s.id?(console.warn("Invalid user data structure"),this.clearUserData(),null):s}catch(e){return console.error("Error parsing user data:",e),this.clearUserData(),null}}clearUserData(){try{localStorage.removeItem("user"),this.clearCache()}catch(e){console.error("Error clearing user data:",e)}}clearCache(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null}isPermissionsCacheValid(){return this.permissionsCacheTimestamp?Date.now()-this.permissionsCacheTimestamp<this.CACHE_DURATION:!1}isRolesCacheValid(){return this.rolesCacheTimestamp?Date.now()-this.rolesCacheTimestamp<this.CACHE_DURATION:!1}async makeApiRequest(e,s=0){try{const n=await Ru.get(e);if(!n||!n.data)throw new Error("Invalid API response structure");if(!n.data.success)throw new Error(n.data.message||"API request failed");return n.data.data}catch(n){if(console.error(`API request failed for ${e}:`,n.message),s<this.maxRetries&&this.isRetryableError(n))return console.log(`Retrying request ${s+1}/${this.maxRetries}`),await this.delay(Math.pow(2,s)*1e3),this.makeApiRequest(e,s+1);throw n}}isRetryableError(e){return e.code==="NETWORK_ERROR"||e.response?.status>=500||e.message.includes("timeout")}delay(e){return new Promise(s=>setTimeout(s,e))}async getUserPermissions(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isPermissionsCacheValid()&&this.cachedPermissions?this.cachedPermissions:this.pendingPermissionsRequest?await this.pendingPermissionsRequest:(this.pendingPermissionsRequest=this.makeApiRequest("/permissions/my-permissions").then(n=>{const i=this.validatePermissionsData(n);return this.cachedPermissions=i,this.permissionsCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user permissions:",n.message),{})).finally(()=>{this.pendingPermissionsRequest=null}),await this.pendingPermissionsRequest):(console.warn("No valid user found for permissions request"),{})}catch(s){return console.error("Error in getUserPermissions:",s),{}}}validatePermissionsData(e){if(!e||typeof e!="object")return console.warn("Invalid permissions data structure"),{};const s={};for(const[n,i]of Object.entries(e))Array.isArray(i)&&(s[n]=i.filter(l=>l&&typeof l=="object"&&typeof l.permission_key=="string"));return s}async getUserRoles(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isRolesCacheValid()&&this.cachedRoles?this.cachedRoles:this.pendingRolesRequest?await this.pendingRolesRequest:(this.pendingRolesRequest=this.makeApiRequest("/permissions/my-roles").then(n=>{const i=this.validateRolesData(n);return this.cachedRoles=i,this.rolesCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user roles:",n.message),[])).finally(()=>{this.pendingRolesRequest=null}),await this.pendingRolesRequest):(console.warn("No valid user found for roles request"),[])}catch(s){return console.error("Error in getUserRoles:",s),[]}}validateRolesData(e){return Array.isArray(e)?e.filter(s=>s&&typeof s=="object"&&typeof s.name=="string"):(console.warn("Invalid roles data structure"),[])}async hasPermission(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid permission key provided"),!1;const n=await this.getUserPermissions(s);for(const i of Object.keys(n))if((n[i]||[]).some(c=>c.permission_key===e))return!0;return!1}catch(n){return console.error("Error checking permission:",n),!1}}async hasModuleAccess(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid module name provided"),!1;const n=await this.getUserPermissions(s);return n[e]&&n[e].length>0}catch(n){return console.error("Error checking module access:",n),!1}}async hasAnyPermission(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid permission keys array provided"),!1;const n=e.map(l=>this.hasPermission(l,s));return(await Promise.all(n)).some(l=>l===!0)}catch(n){return console.error("Error checking permissions:",n),!1}}async hasRole(e,s=null){try{return!e||typeof e!="string"?(console.warn("Invalid role name provided"),!1):(await this.getUserRoles(s)).some(i=>i.name===e)}catch(n){return console.error("Error checking role:",n),!1}}async hasAnyRole(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid role names array provided"),!1;const i=(await this.getUserRoles(s)).map(l=>l.name);return e.some(l=>i.includes(l))}catch(n){return console.error("Error checking roles:",n),!1}}getModulePermissions(){return{dashboard:["dashboard.view"],"user-management":["users.read","users.create","users.update","users.delete"],"role-management":["roles.read"],"campaign-types":["campaign-types.read"],"campaign-data":["campaign-data.read"],campaigns:["campaigns.read"],ads:["ads.read"],cards:["cards.read"],"card-users":["card-users.read"],"reports-table":["reports.read"],reports:["reports.read"],analytics:["analytics.view"],"2fa":["2fa.setup"],modules:["modules.read"],settings:["settings.update"]}}async canAccessRoute(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid route path provided"),!1;const n=e.replace(/^\/+/,"").toLowerCase(),l=this.getModulePermissions()[n];return!l||l.length===0?!0:await this.hasAnyPermission(l,s)}catch(n){return console.error("Error checking route access:",n),!1}}async refreshPermissions(){try{this.clearCache();const e=this.getCurrentUser();e?.id&&await Promise.allSettled([this.getUserPermissions(e.id),this.getUserRoles(e.id)])}catch(e){console.error("Error refreshing permissions:",e)}}destroy(){this.clearCache()}}const $r=new F1,L1=_.createContext(),Et=({children:t})=>{const[e,s]=_.useState({}),[n,i]=_.useState([]),[l,c]=_.useState(!0),[u,h]=_.useState(null),[m,p]=_.useState(null);_.useEffect(()=>{x()},[]),_.useEffect(()=>{const M=()=>{const V=$r.getCurrentUser();V!==m&&(p(V),x())};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[m]);const x=async()=>{try{c(!0),h(null);const M=$r.getCurrentUser();if(p(M),M){const[V,H]=await Promise.all([$r.getUserPermissions(M.id),$r.getUserRoles(M.id)]);s(V),i(H)}else s({}),i([])}catch(M){console.error("Error initializing permissions:",M),h(M.message)}finally{c(!1)}},b=async()=>{await $r.refreshPermissions(),await x()},w=M=>{if(!e||Object.keys(e).length===0)return!1;for(const V of Object.keys(e))if((e[V]||[]).some(O=>O.permission_key===M))return!0;return!1},j=M=>Array.isArray(M)?M.some(V=>w(V)):w(M),v=M=>e[M]&&e[M].length>0,N=M=>n.some(V=>V.name===M),E=M=>Array.isArray(M)?M.some(V=>N(V)):N(M),S=M=>{const V=M.replace("/",""),O=$r.getModulePermissions()[V];return!O||O.length===0?!0:j(O)},C=()=>{const M=[];for(const V of Object.keys(e)){const H=e[V]||[];M.push(...H.map(O=>O.permission_key))}return[...new Set(M)]},D=()=>!n||n.length===0?0:Math.max(...n.map(M=>M.level||0)),I={permissions:e,roles:n,loading:l,error:u,user:m,initializePermissions:x,refreshPermissions:b,hasPermission:w,hasAnyPermission:j,hasModuleAccess:v,hasRole:N,hasAnyRole:E,canAccessRoute:S,getAllPermissionKeys:C,getHighestRoleLevel:D,isAdmin:()=>D()>=8||E(["Admin","Super Admin"]),isSuperAdmin:()=>D()>=10||N("Super Admin")};return a.jsx(L1.Provider,{value:I,children:t})},Tn={API_BASE_URL:"http://localhost:5000/api",TOKEN_KEY:"access_token",DEBUG:!1,ENVIRONMENT:"production",API_TIMEOUT:1e4,MESSAGE_TIMEOUT:5e3},oe=Oe.create({baseURL:Tn.API_BASE_URL,timeout:Tn.API_TIMEOUT,headers:{"Content-Type":"application/json"}});window.clearAllTokens=()=>{console.log("🧹 Clearing all tokens manually..."),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),sessionStorage.clear(),console.log("✅ All tokens cleared! Redirecting to login..."),window.location.href="/login"};oe.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));oe.interceptors.response.use(t=>t,async t=>{const e=t.config;if(t.response?.status===401&&(t.response?.data?.code==="TOKEN_EXPIRED"||t.response?.data?.message?.includes("token"))&&!e._retry){console.log("🔄 Token expired, attempting refresh..."),e._retry=!0;try{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");const i=await(await fetch(`${Tn.API_BASE_URL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})})).json();if(i.success){const{accessToken:l,refreshToken:c}=i.data;return localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",c),e.headers.Authorization=`Bearer ${l}`,console.log("✅ Token refreshed successfully"),oe(e)}else throw new Error(i.message||"Token refresh failed")}catch(s){return console.error("🚫 Token refresh failed:",s),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}if(t.response?.status===401&&(console.log("🚪 Authentication failed, redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),t.response?.status===403){const s=t.response?.data?.message||"Access denied. You don't have permission to perform this action.";console.error("Permission denied:",s),(s.includes("Wrong token type")||s.includes("access token"))&&(console.log("Token type error detected, clearing old tokens"),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage","Please log in again to get a fresh access token."),window.location.href="/login"))}else if(t.response?.status===404){const s=t.response?.data?.message||"The item you're looking for doesn't exist or may have been removed.";console.error("Resource not found:",s)}else if(t.response?.status>=500){const s=t.response?.data?.message||"We're experiencing technical difficulties. Please try again in a few minutes.";console.error("Server error:",s)}else t.response?.data?.message&&console.error("API Error:",t.response.data.message);if(t.response?.data?.message)t.userMessage=t.response.data.message;else switch(t.response?.status){case 400:t.userMessage="There was an issue with your request. Please check your input and try again.";break;case 403:t.userMessage="Access denied. You don't have permission to perform this action.";break;case 404:t.userMessage="The item you're looking for doesn't exist or may have been removed.";break;case 409:t.userMessage="This action conflicts with existing data. Please try again.";break;case 422:t.userMessage="Some of the information you provided is not valid. Please check and try again.";break;case 429:t.userMessage="You're making too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:t.userMessage="We're experiencing technical difficulties. Please try again in a few minutes.";break;default:t.userMessage="Something went wrong. Please try again later."}return Promise.reject(t)});const O1=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!0),[i,l]=_.useState(null),c=async()=>{try{console.log("🔐 [useUserAccess] Starting to fetch user access..."),n(!0),l(null);const u=await oe.get("/user-access/modules");console.log("🔐 [useUserAccess] API response:",u.data),u.data.success?(console.log("✅ [useUserAccess] User access data received:",u.data.data),e(u.data.data)):(console.log("❌ [useUserAccess] API returned error:",u.data.message),l(u.data.message))}catch(u){console.error("❌ [useUserAccess] Error fetching user access:",u),console.log("❌ [useUserAccess] Error details:",{status:u.response?.status,statusText:u.response?.statusText,data:u.response?.data}),l(u.response?.data?.message||"Failed to fetch user permissions")}finally{console.log("🔐 [useUserAccess] Finished loading, setting loading to false"),n(!1)}};return _.useEffect(()=>{const u=localStorage.getItem("access_token")||localStorage.getItem("authToken");console.log("🔐 [useUserAccess] useEffect triggered. Token:",u?"EXISTS":"NOT FOUND"),u?(console.log("🔐 [useUserAccess] Token found, calling fetchUserAccess..."),c()):(console.log("⚠️ [useUserAccess] No token found, setting loading to false"),n(!1))},[]),{userAccess:t,loading:s,error:i,refetch:c}};var I1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const z1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_e=(t,e)=>{const s=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...h},m)=>_.createElement("svg",{ref:m,...I1,width:i,height:i,stroke:n,strokeWidth:c?Number(l)*24/Number(i):l,className:`lucide lucide-${z1(t)}`,...h},[...e.map(([p,x])=>_.createElement(p,x)),...(Array.isArray(u)?u:[u])||[]]));return s.displayName=`${t}`,s},du=_e("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),He=_e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),uu=_e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),vp=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ts=_e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Dn=_e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),sa=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),$1=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),B1=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),U1=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),H1=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Mu=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Yr=_e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),V1=_e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),W1=_e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Fu=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Lx=_e("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ci=_e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),di=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Rd=_e("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),us=_e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Lu=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Md=_e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ei=_e("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),wp=_e("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),q1=_e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),hu=_e("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Y1=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),jp=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ox=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),K1=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Np=_e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),In=_e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),X1=_e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Ix=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),zx=_e("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),ct=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ti=_e("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),$x=_e("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),wt=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),_l=_e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),zs=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Bx=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),G1=_e("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ur=_e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Fd=_e("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]),Ns=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ux=_e("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Hx=_e("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),_s=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Vx=_e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Kr=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),_p=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),cl=_e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Q1=_e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ui=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Mn=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),kl=_e("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),it=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pt=({children:t})=>{const[e,s]=_.useState(!0),[n,i]=_.useState(!1),l=Zr(),c=mr(),{userAccess:u,loading:h}=O1(),m=vi.useMemo(()=>{try{const S=localStorage.getItem("user");return S?JSON.parse(S):null}catch{return null}},[]),p=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),c("/login")},x={Home:Md,Users:Mn,Key:wp,Tags:Fd,Database:V1,CreditCard:Yr,UserCheck:cl,Target:Ns,BarChart3:ts,FileText:us,Settings:Bx,Facebook:Rd},b=S=>{const C=["Dashboard","User Management","Role Management","Brand Management","Campaign Type","Campaign","Cards","Cards Users","Facebook Accounts","Facebook Pages","Report"],D={"Campaign Types":"Campaign Type",Campaigns:"Campaign","Card Users":"Cards Users",Reports:"Report"},A=F=>{let I=C.indexOf(F);if(I!==-1)return I;const M=D[F];return M&&(I=C.indexOf(M),I!==-1)?I:-1};return S.sort((F,I)=>{const M=A(F.name),V=A(I.name);return M!==-1&&V!==-1?M-V:M!==-1?-1:V!==-1?1:(F.name||"").localeCompare(I.name||"")})};console.log("🔍 Debug - userAccess:",u),console.log("🔍 Debug - userAccess navigation:",u?.navigation),console.log("🔍 Debug - permissionsLoading:",h);const w=u?.navigation?.map(S=>({...S,icon:x[S.icon]||Md}))||[],j=[{name:"Dashboard",href:"/dashboard",icon:Md},{name:"User Management",href:"/user-management",icon:Mn},{name:"Role Management",href:"/role-management",icon:wp},{name:"Brand Management",href:"/brands",icon:Fd},{name:"Campaign Type",href:"/campaign-types",icon:Fd},{name:"Campaign",href:"/campaigns",icon:Ns},{name:"Cards",href:"/cards",icon:Yr},{name:"Cards Users",href:"/card-users",icon:cl},{name:"Facebook Accounts",href:"/facebook-accounts",icon:Rd},{name:"Facebook Pages",href:"/facebook-pages",icon:us},{name:"Report",href:"/reports-table",icon:us}],v=w.length>0?[...w,...w.find(S=>S.name==="Facebook Accounts")?[]:[{name:"Facebook Accounts",href:"/facebook-accounts",icon:Rd}],...w.find(S=>S.name==="Facebook Pages")?[]:[{name:"Facebook Pages",href:"/facebook-pages",icon:us}]]:j,N=b(v),E=S=>l.pathname===S;return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx("div",{className:`hidden md:flex md:flex-shrink-0 transition-all duration-300 ${e?"md:w-64":"md:w-16"}`,children:a.jsx("div",{className:"flex flex-col w-full",children:a.jsxs("div",{className:"flex flex-col flex-grow bg-sidebar-bg overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsxs("div",{className:`flex items-center ${e?"block":"hidden"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ns,{className:"h-8 w-8 text-primary-500"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h1",{className:"text-xl font-bold text-white",children:"Ads Reporter"})})]}),a.jsx("button",{onClick:()=>s(!e),className:"p-1 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",children:e?a.jsx(B1,{className:"h-5 w-5"}):a.jsx(U1,{className:"h-5 w-5"})})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:N.map(S=>{const C=S.icon;return a.jsxs(rp,{to:S.href,className:`sidebar-link ${E(S.href)?"active":""}`,title:e?"":S.name,children:[a.jsx(C,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:S.name})]},S.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:p,className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",title:e?"":"Logout",children:[a.jsx(jp,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})}),a.jsx("div",{className:`md:hidden ${n?"block":"hidden"}`,children:a.jsxs("div",{className:"fixed inset-0 flex z-40",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>i(!1)}),a.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-sidebar-bg",children:[a.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:a.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>i(!1),children:a.jsx(it,{className:"h-6 w-6 text-white"})})}),a.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsx(Ns,{className:"h-8 w-8 text-primary-500"}),a.jsx("h1",{className:"ml-3 text-xl font-bold text-white",children:"Ads Reporter"})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:N.map(S=>{const C=S.icon;return a.jsxs(rp,{to:S.href,className:`sidebar-link ${E(S.href)?"active":""}`,onClick:()=>i(!1),children:[a.jsx(C,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:S.name})]},S.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:()=>{i(!1),p()},className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",children:[a.jsx(jp,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})]})}),a.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[a.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[a.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>i(!0),children:a.jsx(K1,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.find(S=>S.href===l.pathname)?.name||"Dashboard"})}),a.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:m?.username||"User"}),a.jsx("div",{className:"h-8 w-8 bg-primary-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:(m?.username||"U")[0].toUpperCase()})})]})})]})]}),a.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:t})]})]})},At=({children:t})=>{const{isAuthenticated:e,loading:s}=Du();return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e()?t:(console.log("🚪 Not authenticated, redirecting to login"),a.jsx(tu,{to:"/login",replace:!0}))},Ou=()=>{console.log("🧹 Clearing all authentication tokens..."),["access_token","authToken","auth_token","refresh_token","user"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),console.log("✅ All tokens cleared"),typeof window<"u"&&(window.location.href="/login")},J1=async()=>{const t=localStorage.getItem("access_token")||localStorage.getItem("authToken");if(!t)return console.log("❌ No token found"),!1;try{const e=JSON.parse(atob(t.split(".")[1])),s=Date.now()/1e3;return e.exp&&e.exp<s?(console.log("⏰ Token has expired"),Ou(),!1):!0}catch{return console.log("🔍 Could not decode token, assuming valid"),!0}},Z1=t=>{(t.response?.status===401||t.status===401)&&(console.log("🚨 401 Unauthorized - clearing tokens and redirecting"),sessionStorage.setItem("recent_auth_error","true"),Ou())};typeof window<"u"&&(window.clearAllTokens=Ou,window.checkTokenExpiry=J1);const ej=()=>{const{login:t}=Du(),[e,s]=_.useState({username:"",password:"",twofa_code:""}),[n,i]=_.useState(!1),[l,c]=_.useState(!1),[u,h]=_.useState(""),[m,p]=_.useState(!1),[x,b]=_.useState(!1),[w,j]=_.useState(""),[v,N]=_.useState("credentials"),[E,S]=_.useState(null),[C,D]=_.useState(""),A=mr();_.useEffect(()=>{const V=sessionStorage.getItem("loginMessage");V&&(D(V),sessionStorage.removeItem("loginMessage"),setTimeout(()=>D(""),5e3))},[]);const F=async V=>{V.preventDefault(),c(!0),h(""),console.log("Login attempt:",{username:e.username,step:v});try{if(v==="credentials"){console.log("Making API call to backend...");try{const H=await fetch(`${Tn.API_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});console.log("API response status:",H.status),console.log("API response ok:",H.ok);const O=await H.json();console.log("API response data:",O),O.success?O.data.requires_2fa_setup?(b(!0),S(O.data.user.id),j(O.data.qr_code),N("2fa_setup"),console.log("2FA setup required for user:",O.data.user.username)):O.data.requires_2fa?(p(!0),S(O.data.user.id),N("2fa"),console.log("2FA required for user:",O.data.user.username)):(console.log("Login successful, storing token and navigating..."),t(O.data.user,O.data.access_token,O.data.refresh_token),A("/dashboard")):h(O.message||"Invalid username or password")}catch(H){if(console.error("Login API Error:",H),H.response?.status===401)Z1(H),h("Invalid username or password. Please check your credentials and try again.");else if(H.code==="ECONNREFUSED"||!H.response)if(console.warn("API not available, using demo mode"),e.username==="admin"&&e.password==="password"){const O="demo-token-"+Date.now(),K={id:1,username:e.username,role_id:1,role_name:"admin"};t(K,O,null),A("/dashboard")}else h("API unavailable. Use demo credentials: admin/password");else h("Failed to connect to server. Please try again or use demo credentials: admin/password")}}else if(v==="2fa")try{console.log("Making 2FA API call with user ID:",E,"token:",e.twofa_code);const O=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:E,token:e.twofa_code})})).json();if(console.log("2FA API response:",O),O.success){const{access_token:K,refresh_token:U,user:ne}=O.data;t(ne,K,U),console.log("2FA verification successful, navigating to dashboard"),A("/dashboard")}else{const K=O.message||"Invalid 2FA code";console.error("2FA verification failed:",K),h(K),s({...e,twofa_code:""})}}catch{if(console.warn("API not available, using demo 2FA"),e.twofa_code==="123456"){const O="demo-token-2fa-"+Date.now(),K={id:1,username:e.username,role_id:1,role_name:"admin",has_2fa:!0};t(K,O,null),A("/dashboard")}else h("API unavailable. Demo 2FA code: 123456"),s({...e,twofa_code:""})}else if(v==="2fa_setup")try{console.log("Completing 2FA setup with user ID:",E,"token:",e.twofa_code);const O=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:E,token:e.twofa_code})})).json();if(console.log("2FA setup completion API response:",O),O.success){const{access_token:K,refresh_token:U,user:ne}=O.data;t(ne,K,U),console.log("2FA setup completed successfully, navigating to dashboard"),A("/dashboard")}else{const K=O.message||"Invalid 2FA code. Please try again.";console.error("2FA setup failed:",K),h(K),s({...e,twofa_code:""})}}catch(H){console.error("2FA setup API error:",H),h("Failed to complete 2FA setup. Please try again."),s({...e,twofa_code:""})}}catch(H){console.error("Login error:",H),h("An error occurred. Please try again.")}finally{c(!1)}},I=V=>{const{name:H,value:O}=V.target;s({...e,[H]:O}),h("")},M=()=>{N("credentials"),p(!1),b(!1),j(""),S(null),s({...e,twofa_code:""}),h("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Ns,{className:"h-10 w-10 text-purple-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Welcome Back"}),a.jsx("p",{className:"mt-2 text-sm text-purple-100",children:v==="credentials"?"Sign in to your Ads Reporter account":v==="2fa_setup"?"Set up two-factor authentication":"Enter your 2FA code to complete login"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[C&&a.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg text-sm",children:C}),u&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:u}),a.jsxs("form",{onSubmit:F,className:"space-y-6",children:[v==="credentials"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:e.username,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:e.password,onChange:I,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:n?a.jsx(ci,{className:"h-5 w-5"}):a.jsx(di,{className:"h-5 w-5"})})]})]})]}):v==="2fa_setup"?a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:a.jsx(ur,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Set up Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),a.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200 inline-block mb-4",children:w?a.jsx("img",{src:w,alt:"2FA QR Code",className:"w-40 h-40 mx-auto"}):a.jsx("div",{className:"w-40 h-40 bg-gray-100 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})})}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"After scanning, enter the 6-digit code from your app to complete setup"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:V=>{const H=V.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:H}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:M,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:a.jsx(G1,{className:"h-8 w-8 text-green-600"})}),a.jsx("p",{className:"text-sm text-gray-600",children:"Please enter the 6-digit code from your authenticator app"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:V=>{const H=V.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:H}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:M,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):v==="credentials"?"Sign In":v==="2fa_setup"?"Complete Setup":"Verify & Continue"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Ads Reporter © 2025 - Secure Login System"})})]})]})})},Wx=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=/^(\d{2})\/(\d{2})\/(\d{4})$/,s=t.match(e);if(s){const[,i,l,c]=s,u=new Date(c,l-1,i);return isNaN(u.getTime())?null:u}const n=new Date(t);return isNaN(n.getTime())?null:n}return null},Fn=t=>{if(!t)return"N/A";try{const e=Wx(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}},tj=t=>{if(!t)return"N/A";try{const e=Wx(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${s}/${n}/${i} ${l}:${c}`}catch(e){return console.error("Error formatting datetime:",e),"Invalid Date"}},kp=({closeForm:t,setMessage:e,setError:s,error:n,context:i="performing this action"})=>{console.error(`Access denied while ${i}:`,n),t&&typeof t=="function"&&t();const l=n?.response,c=l?.data;let u="";return l?.status===403?u=c?.message||"Access denied. You do not have permission to perform this action.":l?.status===401?u="Authentication required. Please log in first.":u=c?.message||n?.message||`Access denied while ${i}`,setTimeout(()=>{e&&e({type:"error",content:u,isAccessDenied:!0}),s&&s(u)},100),l?.status===401&&setTimeout(()=>{!localStorage.getItem("authToken")&&!localStorage.getItem("access_token")&&window.location.pathname!=="/login"&&console.log("No valid token found, redirecting to login...")},3e3),{isAccessDenied:!0,status:l?.status,message:u}},Ld=t=>{const e=t?.response?.status;return e===401||e===403},Va=Tn.API_BASE_URL,sj=({isOpen:t,onClose:e,title:s,children:n,size:i="md"})=>{if(!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:`relative bg-white shadow-xl rounded-lg w-full ${l[i]}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6",children:n})]})})},nj=({isOpen:t,onClose:e,user:s,roles:n,onSubmit:i,isLoading:l,accessDeniedMessage:c,modalError:u})=>{const[h,m]=_.useState({username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),[p,x]=_.useState(!1),[b,w]=_.useState({});_.useEffect(()=>{m(s?{username:s.username||"",password:"",confirm_password:"",role_id:s.role_id||"",enable_2fa:s.is_2fa_enabled||!1}:{username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),w({})},[s,t]);const j=v=>{v.preventDefault(),w({});const N={};if(h.username.trim()||(N.username="Username is required"),!s&&!h.password&&(N.password="Password is required"),h.password&&h.password.length<6&&(N.password="Password must be at least 6 characters"),h.password!==h.confirm_password&&(N.confirm_password="Passwords do not match"),h.role_id||(N.role_id="Role is required"),Object.keys(N).length>0){w(N);return}i(h)};return a.jsxs(sj,{isOpen:t,onClose:e,title:s?"Edit User":"Create New User",size:"lg",children:[c&&a.jsx("div",{className:"mb-4 p-4 bg-red-100 border-2 border-red-300 rounded-lg shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(He,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:"text-red-700 font-medium mb-4",children:c}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{type:"button",onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Lx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{type:"button",onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),a.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:[a.jsx(it,{className:"w-4 h-4 mr-2"}),"Close Form"]})]})]})]})}),u&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(He,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:u})]})]})}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),a.jsx("input",{type:"text",value:h.username,onChange:v=>m({...h,username:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),b.username&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.username})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:h.role_id,onChange:v=>m({...h,role_id:v.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.role_id?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a role"}),n.map(v=>a.jsx("option",{value:v.id,children:v.display_name||v.name},v.id))]}),b.role_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.role_id})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s?"New Password (leave empty to keep current)":"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.password,onChange:v=>m({...h,password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?a.jsx(ci,{className:"h-4 w-4 text-gray-400"}):a.jsx(di,{className:"h-4 w-4 text-gray-400"})})]}),b.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",!s&&"*"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.confirm_password,onChange:v=>m({...h,confirm_password:v.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.confirm_password?"border-red-500":"border-gray-300"}`,placeholder:"Confirm password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?a.jsx(ci,{className:"h-4 w-4 text-gray-400"}):a.jsx(di,{className:"h-4 w-4 text-gray-400"})})]}),b.confirm_password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirm_password})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"enable_2fa",checked:h.enable_2fa,onChange:v=>m({...h,enable_2fa:v.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"enable_2fa",className:"text-sm font-medium text-gray-900",children:"Enable Two-Factor Authentication (Google Authenticator)"}),a.jsx(ur,{className:"h-4 w-4 text-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Mu,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"w-4 h-4 mr-2"}),s?"Update User":"Create User"]})})]})]})]})},rj=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(""),[h,m]=_.useState([]),[p,x]=_.useState(!1),[b,w]=_.useState(null),[j,v]=_.useState(!1),[N,E]=_.useState({type:"",content:"",isAccessDenied:!1}),[S,C]=_.useState(""),[D,A]=_.useState(""),F=()=>{const O=localStorage.getItem(Tn.TOKEN_KEY)||null;return O?{Authorization:`Bearer ${O}`}:{}},I=async()=>{try{l(!0);const O=F();console.log("🚀 Making API request to:",`${Va}/user-management`),console.log("📜 Headers:",O);const K=await fetch(`${Va}/user-management`,{headers:O});if(console.log("📊 Response status:",K.status),!K.ok)throw(K.status===403||K.status===401)&&kp({closeForm:()=>{x(!1),w(null)},setMessage:E,error:{response:K},context:"loading users"}),new Error(`HTTP error! status: ${K.status}`);const U=await K.json();U.success&&(e(U.data.users||[]),n(U.data.roles||[]),m(U.data.users||[]))}catch(O){console.error("Error fetching users:",O),E({type:"error",content:"Failed to load users"})}finally{l(!1)}},M=async O=>{try{v(!0);const U=await(await fetch(`${Va}/user-management`,{method:"POST",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(O)})).json();if(U.success){let ne="User created successfully!";O.enable_2fa&&(ne+=" 2FA has been enabled and the secret has been generated automatically. The user will configure their authenticator app during first login."),E({type:"success",content:ne}),x(!1),await I()}else E({type:"error",content:U.message||"Failed to create user"})}catch(K){console.error("Error creating user:",K);const U=K&&K.response?{status:K.response.status,message:K.response.data?.message||K.message}:{status:void 0,message:K?.message};U.status===403?C(U.message||"Access denied. You do not have permission to create users."):U.status===401?C("Authentication required. Please log in first."):Ld(K)?C(U.message||"Access denied while creating user"):E({type:"error",content:U.message||"Failed to create user"})}finally{v(!1)}},V=async O=>{try{v(!0),A("");const U=await(await fetch(`${Va}/user-management/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...F()},body:JSON.stringify(O)})).json();U.success?(E({type:"success",content:"User updated successfully!"}),x(!1),w(null),A(""),await I()):A(U.message||"Failed to update user")}catch(K){console.error("Error updating user:",K);const U=K&&K.response?{status:K.response.status,message:K.response.data?.message||K.message}:{status:void 0,message:K?.message};U.status===403?C(U.message||"Access denied. You do not have permission to update users."):U.status===401?C("Authentication required. Please log in first."):Ld(K)?C(U.message||"Access denied while updating user"):A(U.message||"Failed to update user")}finally{v(!1)}},H=async O=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const U=await(await fetch(`${Va}/user-management/${O}`,{method:"DELETE",headers:F()})).json();U.success?(E({type:"success",content:"User deleted successfully!"}),await I()):E({type:"error",content:U.message||"Failed to delete user"})}catch(K){console.error("Error deleting user:",K),Ld(K)?kp({closeForm:()=>{w(null)},setMessage:E,error:K,context:"deleting user"}):E({type:"error",content:"Failed to delete user"})}};return _.useEffect(()=>{try{if(!Array.isArray(t)){m([]);return}const O=t.filter(K=>{if(!K)return!1;const U=K.username||"",ne=K.role_name||"",re=c.toLowerCase();return U.toLowerCase().includes(re)||ne.toLowerCase().includes(re)});m(O)}catch(O){console.error("Error filtering users:",O),m([])}},[c,t]),_.useEffect(()=>{I()},[]),_.useEffect(()=>{let O;return N.content&&!N.isAccessDenied&&(O=setTimeout(()=>{E({type:"",content:"",isAccessDenied:!1})},5e3)),()=>{O&&clearTimeout(O)}},[N]),i?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Mu,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(Mn,{className:"h-7 w-7 mr-3 text-blue-600"}),"User Management"]}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Manage users and their authentication settings"})]}),a.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create User"]})]})}),N.content&&a.jsx("div",{className:`mb-4 p-4 rounded-lg ${N.isAccessDenied?"bg-red-100 border-2 border-red-300 shadow-2xl animate-pulse":N.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:N.type==="success"?a.jsx(sa,{className:"h-5 w-5 mr-3 mt-0.5 text-green-500"}):a.jsx(He,{className:`h-5 w-5 mr-3 mt-0.5 ${N.isAccessDenied?"text-red-600":"text-red-500"}`})}),a.jsxs("div",{className:"flex-1",children:[N.isAccessDenied&&a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:`${N.isAccessDenied?"text-red-700 font-medium":""}`,children:N.content}),N.isAccessDenied&&a.jsxs("div",{className:"mt-4 flex space-x-3",children:[a.jsxs("button",{onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Lx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{onClick:()=>E({type:"",content:"",isAccessDenied:!1}),className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Dismiss message",children:a.jsx(it,{className:"h-4 w-4"})})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:O=>u(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2FA"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(O=>!O||!O.id||!O.username?null:a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:O.username?O.username[0].toUpperCase():"?"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.username||"Unknown"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",O.id||"N/A"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:O.role_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O.is_active?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.is_2fa_enabled?a.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[a.jsx(ur,{className:"w-3 h-3 mr-1"}),"Enabled"]}):a.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.last_login?Fn(O.last_login):"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Fn(O.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{w(O),x(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit User",children:a.jsx(In,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>H(O.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:a.jsx(_s,{className:"h-4 w-4"})})]})})]},O.id))})]}),h.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No users found":"No users yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search terms":"Get started by creating your first user"}),!c&&a.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),a.jsx(nj,{isOpen:p,onClose:()=>{x(!1),w(null),C(""),A("")},user:b,roles:s,onSubmit:b?V:M,isLoading:j,accessDeniedMessage:S,modalError:D})]})};let aj={data:""},ij=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||aj,oj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lj=/\/\*[^]*?\*\/|  +/g,Sp=/\n+/g,Sn=(t,e)=>{let s="",n="",i="";for(let l in t){let c=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+c+";":n+=l[1]=="f"?Sn(c,l):l+"{"+Sn(c,l[1]=="k"?"":e)+"}":typeof c=="object"?n+=Sn(c,e?e.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Sn.p?Sn.p(l,c):l+":"+c+";")}return s+(e&&i?e+"{"+i+"}":i)+n},Xs={},qx=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+qx(t[s]);return e}return t},cj=(t,e,s,n,i)=>{let l=qx(t),c=Xs[l]||(Xs[l]=(h=>{let m=0,p=11;for(;m<h.length;)p=101*p+h.charCodeAt(m++)>>>0;return"go"+p})(l));if(!Xs[c]){let h=l!==t?t:(m=>{let p,x,b=[{}];for(;p=oj.exec(m.replace(lj,""));)p[4]?b.shift():p[3]?(x=p[3].replace(Sp," ").trim(),b.unshift(b[0][x]=b[0][x]||{})):b[0][p[1]]=p[2].replace(Sp," ").trim();return b[0]})(t);Xs[c]=Sn(i?{["@keyframes "+c]:h}:h,s?"":"."+c)}let u=s&&Xs.g?Xs.g:null;return s&&(Xs.g=Xs[c]),((h,m,p,x)=>{x?m.data=m.data.replace(x,h):m.data.indexOf(h)===-1&&(m.data=p?h+m.data:m.data+h)})(Xs[c],e,n,u),c},dj=(t,e,s)=>t.reduce((n,i,l)=>{let c=e[l];if(c&&c.call){let u=c(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;c=h?"."+h:u&&typeof u=="object"?u.props?"":Sn(u,""):u===!1?"":u}return n+i+(c??"")},"");function Sl(t){let e=this||{},s=t.call?t(e.p):t;return cj(s.unshift?s.raw?dj(s,[].slice.call(arguments,1),e.p):s.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):s,ij(e.target),e.g,e.o,e.k)}let Yx,fu,mu;Sl.bind({g:1});let nn=Sl.bind({k:1});function uj(t,e,s,n){Sn.p=e,Yx=t,fu=s,mu=n}function zn(t,e){let s=this||{};return function(){let n=arguments;function i(l,c){let u=Object.assign({},l),h=u.className||i.className;s.p=Object.assign({theme:fu&&fu()},u),s.o=/ *go\d+/.test(h),u.className=Sl.apply(s,n)+(h?" "+h:"");let m=t;return t[0]&&(m=u.as||t,delete u.as),mu&&m[0]&&mu(u),Yx(m,u)}return i}}var hj=t=>typeof t=="function",pu=(t,e)=>hj(t)?t(e):t,fj=(()=>{let t=0;return()=>(++t).toString()})(),mj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),pj=20,Kx="default",Xx=(t,e)=>{let{toastLimit:s}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:n}=e;return Xx(t,{type:t.toasts.find(c=>c.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},gj=[],xj={toasts:[],pausedAt:void 0,settings:{toastLimit:pj}},Vr={},Gx=(t,e=Kx)=>{Vr[e]=Xx(Vr[e]||xj,t),gj.forEach(([s,n])=>{s===e&&n(Vr[e])})},Qx=t=>Object.keys(Vr).forEach(e=>Gx(t,e)),yj=t=>Object.keys(Vr).find(e=>Vr[e].toasts.some(s=>s.id===t)),Iu=(t=Kx)=>e=>{Gx(e,t)},bj=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||fj()}),ki=t=>(e,s)=>{let n=bj(e,t,s);return Iu(n.toasterId||yj(n.id))({type:2,toast:n}),n.id},Ee=(t,e)=>ki("blank")(t,e);Ee.error=ki("error");Ee.success=ki("success");Ee.loading=ki("loading");Ee.custom=ki("custom");Ee.dismiss=(t,e)=>{let s={type:3,toastId:t};e?Iu(e)(s):Qx(s)};Ee.dismissAll=t=>Ee.dismiss(void 0,t);Ee.remove=(t,e)=>{let s={type:4,toastId:t};e?Iu(e)(s):Qx(s)};Ee.removeAll=t=>Ee.remove(void 0,t);Ee.promise=(t,e,s)=>{let n=Ee.loading(e.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let l=e.success?pu(e.success,i):void 0;return l?Ee.success(l,{id:n,...s,...s?.success}):Ee.dismiss(n),i}).catch(i=>{let l=e.error?pu(e.error,i):void 0;l?Ee.error(l,{id:n,...s,...s?.error}):Ee.dismiss(n)}),t};var vj=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wj=nn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jj=nn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Nj=zn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${jj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_j=nn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kj=zn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${_j} 1s linear infinite;
`,Sj=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Cj=nn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ej=zn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Cj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Pj=zn("div")`
  position: absolute;
`,Aj=zn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Tj=nn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dj=zn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Tj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Rj=({toast:t})=>{let{icon:e,type:s,iconTheme:n}=t;return e!==void 0?typeof e=="string"?_.createElement(Dj,null,e):e:s==="blank"?null:_.createElement(Aj,null,_.createElement(kj,{...n}),s!=="loading"&&_.createElement(Pj,null,s==="error"?_.createElement(Nj,{...n}):_.createElement(Ej,{...n})))},Mj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fj=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Lj="0%{opacity:0;} 100%{opacity:1;}",Oj="0%{opacity:1;} 100%{opacity:0;}",Ij=zn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,zj=zn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$j=(t,e)=>{let s=t.includes("top")?1:-1,[n,i]=mj()?[Lj,Oj]:[Mj(s),Fj(s)];return{animation:e?`${nn(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};_.memo(({toast:t,position:e,style:s,children:n})=>{let i=t.height?$j(t.position||e||"top-center",t.visible):{opacity:0},l=_.createElement(Rj,{toast:t}),c=_.createElement(zj,{...t.ariaProps},pu(t.message,t));return _.createElement(Ij,{className:t.className,style:{...i,...s,...t.style}},typeof n=="function"?n({icon:l,message:c}):_.createElement(_.Fragment,null,l,c))});uj(_.createElement);Sl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Bj=Ee;const Uj={getDashboardOverview:async()=>{try{return(await oe.get("/analytics/dashboard")).data}catch(t){throw console.error("Error fetching dashboard overview:",t),t}},getTrendsData:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date,{period:i="30d"}=t;switch(i){case"7d":n.setDate(s.getDate()-7);break;case"90d":n.setDate(s.getDate()-90);break;case"1y":n.setFullYear(s.getFullYear()-1);break;default:n.setDate(s.getDate()-30)}return e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),e.append("group_by","day"),(await oe.get(`/analytics/charts/time-series?${e.toString()}`)).data}catch(e){throw console.error("Error fetching trends data:",e),e}},getCampaignPerformance:async(t={})=>{try{const e=new URLSearchParams,{limit:s=10,sortBy:n="leads",...i}=t,l=new Date,c=new Date;return c.setDate(l.getDate()-30),e.append("date_from",c.toISOString().split("T")[0]),e.append("date_to",l.toISOString().split("T")[0]),e.append("limit",s),Object.entries(i).forEach(([h,m])=>{m!=null&&m!==""&&e.append(h,m)}),(await oe.get(`/analytics/charts/campaign-performance?${e.toString()}`)).data}catch(e){throw console.error("Error fetching campaign performance:",e),e}},getBrandPerformance:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date;return n.setDate(s.getDate()-30),e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),Object.entries(t).forEach(([l,c])=>{c!=null&&c!==""&&e.append(l,c)}),(await oe.get(`/analytics/charts/brand-analysis?${e.toString()}`)).data}catch(e){throw console.error("Error fetching brand performance:",e),e}},getRecentActivities:async(t={})=>(console.log("[Dashboard] Using mock activities data - activities endpoint not implemented yet"),{success:!0,data:{activities:[{id:1,type:"report_generated",title:"Campaign report generated",description:"Monthly report for active campaigns",timestamp:new Date(Date.now()-7200*1e3).toISOString(),user:"System",icon:"FileText"},{id:2,type:"campaign_created",title:"New campaign created",description:"Facebook Ads Campaign launched",timestamp:new Date(Date.now()-300*60*1e3).toISOString(),user:"Admin",icon:"Target"},{id:3,type:"user_login",title:"User login",description:"Dashboard access by user",timestamp:new Date(Date.now()-3600*1e3).toISOString(),user:"User",icon:"Users"},{id:4,type:"data_refresh",title:"Data synchronized",description:"Campaign data updated from sources",timestamp:new Date(Date.now()-1800*1e3).toISOString(),user:"System",icon:"RefreshCw"},{id:5,type:"analytics_view",title:"Analytics viewed",description:"Performance metrics accessed",timestamp:new Date(Date.now()-600*1e3).toISOString(),user:"User",icon:"BarChart3"}]}}),getSystemMetrics:async()=>{try{return(await oe.get("/analytics/system")).data}catch(t){return console.error("Error fetching system metrics:",t),{success:!0,data:{system:{totalUsers:12,activeCampaigns:8,totalReports:156,systemUptime:"15 days",lastBackup:new Date(Date.now()-1440*60*1e3).toISOString()}}}}},exportDashboardData:async(t={})=>{try{const e=new URLSearchParams,{format:s="json",sections:n=["overview","campaigns","brands"],...i}=t;return e.append("format",s),n.forEach(c=>e.append("sections",c)),Object.entries(i).forEach(([c,u])=>{u!=null&&u!==""&&e.append(c,u)}),(await oe.get(`/analytics/export?${e.toString()}`)).data}catch(e){throw console.error("Error exporting dashboard data:",e),e}}},Lo=({title:t,value:e,previousValue:s,icon:n,color:i="bg-blue-500",format:l="number",precision:c=0,showTrend:u=!0,loading:h=!1,error:m=null,onClick:p=null,className:x=""})=>{const b=(N,E=l)=>{if(N==null||isNaN(N))return"—";const S=Number(N);switch(E){case"currency":return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:c,maximumFractionDigits:c}).format(S);case"percentage":return`${S.toFixed(c)}%`;case"compact":return S>=1e6?`${(S/1e6).toFixed(1)}M`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toFixed(c);case"decimal":return S.toFixed(c);default:return new Intl.NumberFormat("en-US",{minimumFractionDigits:c,maximumFractionDigits:c}).format(S)}},j=(()=>{if(!u||!s||s===0||isNaN(e)||isNaN(s))return{percentage:0,direction:"neutral",icon:Np};const N=Number(e),E=Number(s),S=(N-E)/E*100;return S>0?{percentage:S,direction:"up",icon:Kr}:S<0?{percentage:Math.abs(S),direction:"down",icon:Vx}:{percentage:0,direction:"neutral",icon:Np}})(),v=j.icon;return h?a.jsxs("div",{className:`card animate-pulse ${x}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),a.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-20 mb-2"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]}):m?a.jsxs("div",{className:`card border-red-200 bg-red-50 ${x}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",children:t}),a.jsx("div",{className:"flex-shrink-0 p-2 rounded-md bg-red-100",children:a.jsx(ci,{className:"h-4 w-4 text-red-600"})})]}),a.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load"}),a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Click to retry"})]}):a.jsxs("div",{className:`card transition-all duration-200 hover:shadow-lg ${p?"cursor-pointer hover:bg-gray-50":""} ${x}`,onClick:p,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",title:t,children:t}),a.jsx("div",{className:`flex-shrink-0 ${i} rounded-md p-2`,children:a.jsx(n,{className:"h-4 w-4 text-white"})})]}),a.jsx("div",{className:"mb-2",children:a.jsx("p",{className:"text-2xl font-bold text-gray-900",title:`${t}: ${b(e)}`,children:b(e)})}),u&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:`flex items-center space-x-1 ${j.direction==="up"?"text-green-600":j.direction==="down"?"text-red-600":"text-gray-500"}`,children:[a.jsx(v,{className:"h-3 w-3"}),a.jsx("span",{className:"text-xs font-medium",children:j.percentage>0?`${j.percentage.toFixed(1)}%`:"0%"})]}),a.jsx("span",{className:"text-xs text-gray-500",children:"vs previous"})]})]})},Ls=({width:t="w-full",height:e="h-4",className:s=""})=>a.jsx("div",{className:`${t} ${e} bg-gray-200 rounded animate-pulse ${s}`}),zu=({height:t="h-64"})=>a.jsxs("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"mb-4",children:a.jsx(Ls,{width:"w-48",height:"h-6"})}),a.jsx(Ls,{width:"w-full",height:t}),a.jsxs("div",{className:"flex justify-center mt-4 space-x-4",children:[a.jsx(Ls,{width:"w-16",height:"h-3"}),a.jsx(Ls,{width:"w-20",height:"h-3"}),a.jsx(Ls,{width:"w-18",height:"h-3"})]})]}),Hj=()=>a.jsxs("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"mb-4",children:a.jsx(Ls,{width:"w-40",height:"h-6"})}),a.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ls,{width:"w-10",height:"h-10",className:"rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(Ls,{width:"w-3/4",height:"h-4"}),a.jsx(Ls,{width:"w-1/2",height:"h-3"}),a.jsx(Ls,{width:"w-20",height:"h-3"})]})]},t))})]}),Cp=({activities:t=[],loading:e=!1,title:s="Recent Activity",className:n="",compact:i=!1,maxVisible:l=5})=>{const c=w=>({report_generated:us,campaign_created:Ns,campaign_updated:Ns,user_registered:Q1,user_login:Mn,analytics_view:ts,data_export:Fu,system_update:Bx,performance_alert:He,milestone_reached:sa,data_refresh:wt,trend_detected:Kr})[w]||us,u=w=>({report_generated:"text-blue-600 bg-blue-100",campaign_created:"text-green-600 bg-green-100",campaign_updated:"text-yellow-600 bg-yellow-100",user_registered:"text-purple-600 bg-purple-100",user_login:"text-gray-600 bg-gray-100",analytics_view:"text-indigo-600 bg-indigo-100",data_export:"text-orange-600 bg-orange-100",system_update:"text-cyan-600 bg-cyan-100",performance_alert:"text-red-600 bg-red-100",milestone_reached:"text-emerald-600 bg-emerald-100",data_refresh:"text-teal-600 bg-teal-100",trend_detected:"text-pink-600 bg-pink-100"})[w]||"text-gray-600 bg-gray-100",h=w=>{if(!w)return"Unknown time";try{const j=new Date(w),v=new Date,N=v-j,E=Math.floor(N/6e4),S=Math.floor(E/60),C=Math.floor(S/24);return E<1?"Just now":E<60?`${E} minute${E===1?"":"s"} ago`:S<24?`${S} hour${S===1?"":"s"} ago`:C<7?`${C} day${C===1?"":"s"} ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:j.getFullYear()!==v.getFullYear()?"numeric":void 0})}catch{return"Invalid date"}},[m,p]=_.useState(!1);if(e)return a.jsx(Hj,{});const x=i&&!m?t.slice(0,l):t,b=t.length>l;return a.jsxs("div",{className:`card ${n}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:`font-medium text-gray-900 ${i?"text-sm":"text-lg"}`,children:s}),t&&t.length>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[t.length," activities"]})]}),a.jsx("div",{className:`space-y-${i?"1":"3"}`,children:!t||t.length===0?a.jsxs("div",{className:`text-center ${i?"py-3":"py-8"}`,children:[a.jsx("div",{className:"text-gray-400 mb-2",children:a.jsx(ts,{className:`${i?"h-6 w-6":"h-12 w-12"} mx-auto`})}),a.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activities"}),!i&&a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Activities will appear here as they happen"})]}):x.map(w=>{const j=c(w.type),v=u(w.type);return a.jsxs("div",{className:`flex items-${i?"center":"start"} space-x-${i?"2":"3"} ${i?"py-1.5 px-1.5":"py-3 px-2"} hover:bg-gray-50 rounded-lg -mx-${i?"1.5":"2"} transition-colors duration-150`,children:[a.jsx("div",{className:`flex-shrink-0 ${i?"w-5 h-5":"w-8 h-8"} rounded-full flex items-center justify-center ${v}`,children:a.jsx(j,{className:`${i?"h-2.5 w-2.5":"h-4 w-4"}`})}),a.jsx("div",{className:"flex-1 min-w-0",children:i?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-2",children:a.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:w.title||"System Activity"})}),a.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1.5 text-xs text-gray-500",children:[a.jsx("span",{children:h(w.timestamp)}),w.status&&a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${w.status==="success"?"bg-green-500":w.status==="warning"?"bg-yellow-500":w.status==="error"?"bg-red-500":"bg-gray-400"}`})]})]}):a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:w.title||"System Activity"}),w.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:w.description}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[a.jsx("span",{children:h(w.timestamp)}),w.user&&w.user!=="System"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:["by ",w.user]})]})]})]}),w.status&&a.jsx("div",{className:`flex-shrink-0 ml-2 px-2 py-1 rounded-full text-xs font-medium ${w.status==="success"?"bg-green-100 text-green-800":w.status==="warning"?"bg-yellow-100 text-yellow-800":w.status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})})]},w.id)})}),i&&b&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsxs("button",{onClick:()=>p(!m),className:"flex items-center justify-center w-full text-xs text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150 py-1",children:[a.jsx("span",{className:"mr-1",children:m?"Show Less":`+${t.length-l} More`}),m?a.jsx(H1,{className:"h-2.5 w-2.5"}):a.jsx($1,{className:"h-2.5 w-2.5"})]})}),!i&&t&&t.length>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsx("button",{className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150",onClick:()=>{console.log("Navigate to full activity log")},children:"View all activities →"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Si(t){return t+.5|0}const En=(t,e,s)=>Math.max(Math.min(t,s),e);function Qa(t){return En(Si(t*2.55),0,255)}function Rn(t){return En(Si(t*255),0,255)}function Zs(t){return En(Si(t/2.55)/100,0,1)}function Ep(t){return En(Si(t*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gu=[..."0123456789ABCDEF"],Vj=t=>gu[t&15],Wj=t=>gu[(t&240)>>4]+gu[t&15],Oo=t=>(t&240)>>4===(t&15),qj=t=>Oo(t.r)&&Oo(t.g)&&Oo(t.b)&&Oo(t.a);function Yj(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&ds[t[1]]*17,g:255&ds[t[2]]*17,b:255&ds[t[3]]*17,a:e===5?ds[t[4]]*17:255}:(e===7||e===9)&&(s={r:ds[t[1]]<<4|ds[t[2]],g:ds[t[3]]<<4|ds[t[4]],b:ds[t[5]]<<4|ds[t[6]],a:e===9?ds[t[7]]<<4|ds[t[8]]:255})),s}const Kj=(t,e)=>t<255?e(t):"";function Xj(t){var e=qj(t)?Vj:Wj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Kj(t.a,e):void 0}const Gj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jx(t,e,s){const n=e*Math.min(s,1-s),i=(l,c=(l+t/30)%12)=>s-n*Math.max(Math.min(c-3,9-c,1),-1);return[i(0),i(8),i(4)]}function Qj(t,e,s){const n=(i,l=(i+t/60)%6)=>s-s*e*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function Jj(t,e,s){const n=Jx(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function Zj(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function $u(t){const s=t.r/255,n=t.g/255,i=t.b/255,l=Math.max(s,n,i),c=Math.min(s,n,i),u=(l+c)/2;let h,m,p;return l!==c&&(p=l-c,m=u>.5?p/(2-l-c):p/(l+c),h=Zj(s,n,i,p,l),h=h*60+.5),[h|0,m||0,u]}function Bu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Rn)}function Uu(t,e,s){return Bu(Jx,t,e,s)}function eN(t,e,s){return Bu(Jj,t,e,s)}function tN(t,e,s){return Bu(Qj,t,e,s)}function Zx(t){return(t%360+360)%360}function sN(t){const e=Gj.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Qa(+e[5]):Rn(+e[5]));const i=Zx(+e[2]),l=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=eN(i,l,c):e[1]==="hsv"?n=tN(i,l,c):n=Uu(i,l,c),{r:n[0],g:n[1],b:n[2],a:s}}function nN(t,e){var s=$u(t);s[0]=Zx(s[0]+e),s=Uu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function rN(t){if(!t)return;const e=$u(t),s=e[0],n=Ep(e[1]),i=Ep(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${Zs(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Pp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ap={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function aN(){const t={},e=Object.keys(Ap),s=Object.keys(Pp);let n,i,l,c,u;for(n=0;n<e.length;n++){for(c=u=e[n],i=0;i<s.length;i++)l=s[i],u=u.replace(l,Pp[l]);l=parseInt(Ap[c],16),t[u]=[l>>16&255,l>>8&255,l&255]}return t}let Io;function iN(t){Io||(Io=aN(),Io.transparent=[0,0,0,0]);const e=Io[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lN(t){const e=oN.exec(t);let s=255,n,i,l;if(e){if(e[7]!==n){const c=+e[7];s=e[8]?Qa(c):En(c*255,0,255)}return n=+e[1],i=+e[3],l=+e[5],n=255&(e[2]?Qa(n):En(n,0,255)),i=255&(e[4]?Qa(i):En(i,0,255)),l=255&(e[6]?Qa(l):En(l,0,255)),{r:n,g:i,b:l,a:s}}}function cN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Zs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Od=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Br=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function dN(t,e,s){const n=Br(Zs(t.r)),i=Br(Zs(t.g)),l=Br(Zs(t.b));return{r:Rn(Od(n+s*(Br(Zs(e.r))-n))),g:Rn(Od(i+s*(Br(Zs(e.g))-i))),b:Rn(Od(l+s*(Br(Zs(e.b))-l))),a:t.a+s*(e.a-t.a)}}function zo(t,e,s){if(t){let n=$u(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Uu(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function e0(t,e){return t&&Object.assign(e||{},t)}function Tp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Rn(t[3]))):(e=e0(t,{r:0,g:0,b:0,a:1}),e.a=Rn(e.a)),e}function uN(t){return t.charAt(0)==="r"?lN(t):sN(t)}class hi{constructor(e){if(e instanceof hi)return e;const s=typeof e;let n;s==="object"?n=Tp(e):s==="string"&&(n=Yj(e)||iN(e)||uN(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=e0(this._rgb);return e&&(e.a=Zs(e.a)),e}set rgb(e){this._rgb=Tp(e)}rgbString(){return this._valid?cN(this._rgb):void 0}hexString(){return this._valid?Xj(this._rgb):void 0}hslString(){return this._valid?rN(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let l;const c=s===l?.5:s,u=2*c-1,h=n.a-i.a,m=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;l=1-m,n.r=255&m*n.r+l*i.r+.5,n.g=255&m*n.g+l*i.g+.5,n.b=255&m*n.b+l*i.b+.5,n.a=c*n.a+(1-c)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=dN(this._rgb,e._rgb,s)),this}clone(){return new hi(this.rgb)}alpha(e){return this._rgb.a=Rn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Si(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zo(this._rgb,2,e),this}darken(e){return zo(this._rgb,2,-e),this}saturate(e){return zo(this._rgb,1,e),this}desaturate(e){return zo(this._rgb,1,-e),this}rotate(e){return nN(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gs(){}const hN=(()=>{let t=0;return()=>t++})();function Ue(t){return t==null}function ht(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ft(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Rs(t,e){return Ft(t)?t:e}function Re(t,e){return typeof t>"u"?e:t}const fN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,t0=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Je(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function qe(t,e,s,n){let i,l,c;if(ht(t))for(l=t.length,i=0;i<l;i++)e.call(s,t[i],i);else if(Fe(t))for(c=Object.keys(t),l=c.length,i=0;i<l;i++)e.call(s,t[c[i]],c[i])}function dl(t,e){let s,n,i,l;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],l=e[s],i.datasetIndex!==l.datasetIndex||i.index!==l.index)return!1;return!0}function ul(t){if(ht(t))return t.map(ul);if(Fe(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=ul(t[s[i]]);return e}return t}function s0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function mN(t,e,s,n){if(!s0(t))return;const i=e[t],l=s[t];Fe(i)&&Fe(l)?fi(i,l,n):e[t]=ul(l)}function fi(t,e,s){const n=ht(e)?e:[e],i=n.length;if(!Fe(t))return t;s=s||{};const l=s.merger||mN;let c;for(let u=0;u<i;++u){if(c=n[u],!Fe(c))continue;const h=Object.keys(c);for(let m=0,p=h.length;m<p;++m)l(h[m],t,c,s)}return t}function si(t,e){return fi(t,e,{merger:pN})}function pN(t,e,s){if(!s0(t))return;const n=e[t],i=s[t];Fe(n)&&Fe(i)?si(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ul(i))}const Dp={"":t=>t,x:t=>t.x,y:t=>t.y};function gN(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function xN(t){const e=gN(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function hr(t,e){return(Dp[e]||(Dp[e]=xN(e)))(t)}function Hu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const mi=t=>typeof t<"u",Ln=t=>typeof t=="function",Rp=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function yN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ye=Math.PI,st=2*Ye,bN=st+Ye,hl=Number.POSITIVE_INFINITY,vN=Ye/180,xt=Ye/2,Zn=Ye/4,Mp=Ye*2/3,n0=Math.log10,Is=Math.sign;function ni(t,e,s){return Math.abs(t-e)<s}function Fp(t){const e=Math.round(t);t=ni(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(n0(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function wN(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,l)=>i-l).pop(),e}function jN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pi(t){return!jN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function NN(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function _N(t,e,s){let n,i,l;for(n=0,i=t.length;n<i;n++)l=t[n][s],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function en(t){return t*(Ye/180)}function kN(t){return t*(180/Ye)}function Lp(t){if(!Ft(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function r0(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let l=Math.atan2(n,s);return l<-.5*Ye&&(l+=st),{angle:l,distance:i}}function xu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function SN(t,e){return(t-e+bN)%st-Ye}function es(t){return(t%st+st)%st}function gi(t,e,s,n){const i=es(t),l=es(e),c=es(s),u=es(l-i),h=es(c-i),m=es(i-l),p=es(i-c);return i===l||i===c||n&&l===c||u>h&&m<p}function Rt(t,e,s){return Math.max(e,Math.min(s,t))}function CN(t){return Rt(t,-32768,32767)}function tn(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Vu(t,e,s){s=s||(c=>t[c]<e);let n=t.length-1,i=0,l;for(;n-i>1;)l=i+n>>1,s(l)?i=l:n=l;return{lo:i,hi:n}}const ir=(t,e,s,n)=>Vu(t,s,n?i=>{const l=t[i][e];return l<s||l===s&&t[i+1][e]===s}:i=>t[i][e]<s),EN=(t,e,s)=>Vu(t,s,n=>t[n][e]>=s);function PN(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const a0=["push","pop","shift","splice","unshift"];function AN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),a0.forEach(s=>{const n="_onData"+Hu(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...l){const c=i.apply(this,l);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...l)}),c}})})}function Op(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(a0.forEach(l=>{delete t[l]}),delete t._chartjs)}function i0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const o0=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function l0(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,o0.call(window,()=>{n=!1,t.apply(e,s)}))}}function TN(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Wu=t=>t==="start"?"left":t==="end"?"right":"center",Tt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,DN=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function RN(t,e,s){const n=e.length;let i=0,l=n;if(t._sorted){const{iScale:c,vScale:u,_parsed:h}=t,m=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=c.axis,{min:x,max:b,minDefined:w,maxDefined:j}=c.getUserBounds();if(w){if(i=Math.min(ir(h,p,x).lo,s?n:ir(e,p,c.getPixelForValue(x)).lo),m){const v=h.slice(0,i+1).reverse().findIndex(N=>!Ue(N[u.axis]));i-=Math.max(0,v)}i=Rt(i,0,n-1)}if(j){let v=Math.max(ir(h,c.axis,b,!0).hi+1,s?0:ir(e,p,c.getPixelForValue(b),!0).hi+1);if(m){const N=h.slice(v-1).findIndex(E=>!Ue(E[u.axis]));v+=Math.max(0,N)}l=Rt(v,i,n)-i}else l=n-i}return{start:i,count:l}}function MN(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const l=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),l}const $o=t=>t===0||t===1,Ip=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*st/s)),zp=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*st/s)+1,ri={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*xt)+1,easeOutSine:t=>Math.sin(t*xt),easeInOutSine:t=>-.5*(Math.cos(Ye*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>$o(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>$o(t)?t:Ip(t,.075,.3),easeOutElastic:t=>$o(t)?t:zp(t,.075,.3),easeInOutElastic(t){return $o(t)?t:t<.5?.5*Ip(t*2,.1125,.45):.5+.5*zp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ri.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ri.easeInBounce(t*2)*.5:ri.easeOutBounce(t*2-1)*.5+.5};function qu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $p(t){return qu(t)?t:new hi(t)}function Id(t){return qu(t)?t:new hi(t).saturate(.5).darken(.1).hexString()}const FN=["x","y","borderWidth","radius","tension"],LN=["color","borderColor","backgroundColor"];function ON(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:LN},numbers:{type:"number",properties:FN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function IN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Bp=new Map;function zN(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Bp.get(s);return n||(n=new Intl.NumberFormat(t,e),Bp.set(s,n)),n}function Yu(t,e,s){return zN(e,s).format(t)}const $N={values(t){return ht(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,l=t;if(s.length>1){const m=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(m<1e-4||m>1e15)&&(i="scientific"),l=BN(t,s)}const c=n0(Math.abs(l)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Yu(t,n,h)}};function BN(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var c0={formatters:$N};function UN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:c0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const fr=Object.create(null),yu=Object.create(null);function ai(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const l=s[n];t=t[l]||(t[l]=Object.create(null))}return t}function zd(t,e,s){return typeof e=="string"?fi(ai(t,e),s):fi(ai(t,""),e)}class HN{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Id(i.backgroundColor),this.hoverBorderColor=(n,i)=>Id(i.borderColor),this.hoverColor=(n,i)=>Id(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return zd(this,e,s)}get(e){return ai(this,e)}describe(e,s){return zd(yu,e,s)}override(e,s){return zd(fr,e,s)}route(e,s,n,i){const l=ai(this,e),c=ai(this,n),u="_"+s;Object.defineProperties(l,{[u]:{value:l[s],writable:!0},[s]:{enumerable:!0,get(){const h=this[u],m=c[i];return Fe(h)?Object.assign({},m,h):Re(h,m)},set(h){this[u]=h}}})}apply(e){e.forEach(s=>s(this))}}var ot=new HN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ON,IN,UN]);function VN(t){return!t||Ue(t.size)||Ue(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Up(t,e,s,n,i){let l=e[i];return l||(l=e[i]=t.measureText(i).width,s.push(i)),l>n&&(n=l),n}function er(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function Hp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bu(t,e,s,n){d0(t,e,s,n,null)}function d0(t,e,s,n,i){let l,c,u,h,m,p,x,b;const w=e.pointStyle,j=e.rotation,v=e.radius;let N=(j||0)*vN;if(w&&typeof w=="object"&&(l=w.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(N),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),w){default:i?t.ellipse(s,n,i/2,v,0,0,st):t.arc(s,n,v,0,st),t.closePath();break;case"triangle":p=i?i/2:v,t.moveTo(s+Math.sin(N)*p,n-Math.cos(N)*v),N+=Mp,t.lineTo(s+Math.sin(N)*p,n-Math.cos(N)*v),N+=Mp,t.lineTo(s+Math.sin(N)*p,n-Math.cos(N)*v),t.closePath();break;case"rectRounded":m=v*.516,h=v-m,c=Math.cos(N+Zn)*h,x=Math.cos(N+Zn)*(i?i/2-m:h),u=Math.sin(N+Zn)*h,b=Math.sin(N+Zn)*(i?i/2-m:h),t.arc(s-x,n-u,m,N-Ye,N-xt),t.arc(s+b,n-c,m,N-xt,N),t.arc(s+x,n+u,m,N,N+xt),t.arc(s-b,n+c,m,N+xt,N+Ye),t.closePath();break;case"rect":if(!j){h=Math.SQRT1_2*v,p=i?i/2:h,t.rect(s-p,n-h,2*p,2*h);break}N+=Zn;case"rectRot":x=Math.cos(N)*(i?i/2:v),c=Math.cos(N)*v,u=Math.sin(N)*v,b=Math.sin(N)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+b,n-c),t.lineTo(s+x,n+u),t.lineTo(s-b,n+c),t.closePath();break;case"crossRot":N+=Zn;case"cross":x=Math.cos(N)*(i?i/2:v),c=Math.cos(N)*v,u=Math.sin(N)*v,b=Math.sin(N)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"star":x=Math.cos(N)*(i?i/2:v),c=Math.cos(N)*v,u=Math.sin(N)*v,b=Math.sin(N)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c),N+=Zn,x=Math.cos(N)*(i?i/2:v),c=Math.cos(N)*v,u=Math.sin(N)*v,b=Math.sin(N)*(i?i/2:v),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"line":c=i?i/2:Math.cos(N)*v,u=Math.sin(N)*v,t.moveTo(s-c,n-u),t.lineTo(s+c,n+u);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(N)*(i?i/2:v),n+Math.sin(N)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xi(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Cl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function El(t){t.restore()}function WN(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const l=(e.x+s.x)/2;t.lineTo(l,e.y),t.lineTo(l,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function qN(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function YN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ue(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function KN(t,e,s,n,i){if(i.strikethrough||i.underline){const l=t.measureText(n),c=e-l.actualBoundingBoxLeft,u=e+l.actualBoundingBoxRight,h=s-l.actualBoundingBoxAscent,m=s+l.actualBoundingBoxDescent,p=i.strikethrough?(h+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(c,p),t.lineTo(u,p),t.stroke()}}function XN(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function yi(t,e,s,n,i,l={}){const c=ht(e)?e:[e],u=l.strokeWidth>0&&l.strokeColor!=="";let h,m;for(t.save(),t.font=i.string,YN(t,l),h=0;h<c.length;++h)m=c[h],l.backdrop&&XN(t,l.backdrop),u&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),Ue(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(m,s,n,l.maxWidth)),t.fillText(m,s,n,l.maxWidth),KN(t,s,n,m,l),n+=Number(i.lineHeight);t.restore()}function fl(t,e){const{x:s,y:n,w:i,h:l,radius:c}=e;t.arc(s+c.topLeft,n+c.topLeft,c.topLeft,1.5*Ye,Ye,!0),t.lineTo(s,n+l-c.bottomLeft),t.arc(s+c.bottomLeft,n+l-c.bottomLeft,c.bottomLeft,Ye,xt,!0),t.lineTo(s+i-c.bottomRight,n+l),t.arc(s+i-c.bottomRight,n+l-c.bottomRight,c.bottomRight,xt,0,!0),t.lineTo(s+i,n+c.topRight),t.arc(s+i-c.topRight,n+c.topRight,c.topRight,0,-xt,!0),t.lineTo(s+c.topLeft,n)}const GN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,QN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JN(t,e){const s=(""+t).match(GN);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZN=t=>+t||0;function Ku(t,e){const s={},n=Fe(e),i=n?Object.keys(e):e,l=Fe(t)?n?c=>Re(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of i)s[c]=ZN(l(c));return s}function u0(t){return Ku(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Wr(t){return Ku(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fs(t){const e=u0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Mt(t,e){t=t||{},e=e||ot.font;let s=Re(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Re(t.style,e.style);n&&!(""+n).match(QN)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Re(t.family,e.family),lineHeight:JN(Re(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Re(t.weight,e.weight),string:""};return i.string=VN(i),i}function Bo(t,e,s,n){let i,l,c;for(i=0,l=t.length;i<l;++i)if(c=t[i],c!==void 0&&c!==void 0)return c}function e_(t,e,s){const{min:n,max:i}=t,l=t0(e,(i-n)/2),c=(u,h)=>s&&u===0?0:u+h;return{min:c(n,-Math.abs(l)),max:c(i,l)}}function pr(t,e){return Object.assign(Object.create(t),e)}function Xu(t,e=[""],s,n,i=()=>t[0]){const l=s||t;typeof n>"u"&&(n=p0("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:n,_getTarget:i,override:u=>Xu([u,...t],e,l,n)};return new Proxy(c,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return f0(u,h,()=>l_(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return Wp(u).includes(h)},ownKeys(u){return Wp(u)},set(u,h,m){const p=u._storage||(u._storage=i());return u[h]=p[h]=m,delete u._keys,!0}})}function Xr(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:h0(t,n),setContext:l=>Xr(t,l,s,n),override:l=>Xr(t.override(l),e,s,n)};return new Proxy(i,{deleteProperty(l,c){return delete l[c],delete t[c],!0},get(l,c,u){return f0(l,c,()=>s_(l,c,u))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(l,c,u){return t[c]=u,delete l[c],!0}})}function h0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Ln(s)?s:()=>s,isIndexable:Ln(n)?n:()=>n}}const t_=(t,e)=>t?t+Hu(e):e,Gu=(t,e)=>Fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function f0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function s_(t,e,s){const{_proxy:n,_context:i,_subProxy:l,_descriptors:c}=t;let u=n[e];return Ln(u)&&c.isScriptable(e)&&(u=n_(e,u,t,s)),ht(u)&&u.length&&(u=r_(e,u,t,c.isIndexable)),Gu(e,u)&&(u=Xr(u,i,l&&l[e],c)),u}function n_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_stack:u}=s;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(l,c||n);return u.delete(t),Gu(t,h)&&(h=Qu(i._scopes,i,t,h)),h}function r_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_descriptors:u}=s;if(typeof l.index<"u"&&n(t))return e[l.index%e.length];if(Fe(e[0])){const h=e,m=i._scopes.filter(p=>p!==h);e=[];for(const p of h){const x=Qu(m,i,t,p);e.push(Xr(x,l,c&&c[t],u))}}return e}function m0(t,e,s){return Ln(t)?t(e,s):t}const a_=(t,e)=>t===!0?e:typeof t=="string"?hr(e,t):void 0;function i_(t,e,s,n,i){for(const l of e){const c=a_(s,l);if(c){t.add(c);const u=m0(c._fallback,s,i);if(typeof u<"u"&&u!==s&&u!==n)return u}else if(c===!1&&typeof n<"u"&&s!==n)return null}return!1}function Qu(t,e,s,n){const i=e._rootScopes,l=m0(e._fallback,s,n),c=[...t,...i],u=new Set;u.add(n);let h=Vp(u,c,s,l||s,n);return h===null||typeof l<"u"&&l!==s&&(h=Vp(u,c,l,h,n),h===null)?!1:Xu(Array.from(u),[""],i,l,()=>o_(e,s,n))}function Vp(t,e,s,n,i){for(;s;)s=i_(t,e,s,n,i);return s}function o_(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return ht(i)&&Fe(s)?s:i||{}}function l_(t,e,s,n){let i;for(const l of e)if(i=p0(t_(l,t),s),typeof i<"u")return Gu(t,i)?Qu(s,n,t,i):i}function p0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Wp(t){let e=t._keys;return e||(e=t._keys=c_(t._scopes)),e}function c_(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const d_=Number.EPSILON||1e-14,Gr=(t,e)=>e<t.length&&!t[e].skip&&t[e],g0=t=>t==="x"?"y":"x";function u_(t,e,s,n){const i=t.skip?e:t,l=e,c=s.skip?e:s,u=xu(l,i),h=xu(c,l);let m=u/(u+h),p=h/(u+h);m=isNaN(m)?0:m,p=isNaN(p)?0:p;const x=n*m,b=n*p;return{previous:{x:l.x-x*(c.x-i.x),y:l.y-x*(c.y-i.y)},next:{x:l.x+b*(c.x-i.x),y:l.y+b*(c.y-i.y)}}}function h_(t,e,s){const n=t.length;let i,l,c,u,h,m=Gr(t,0);for(let p=0;p<n-1;++p)if(h=m,m=Gr(t,p+1),!(!h||!m)){if(ni(e[p],0,d_)){s[p]=s[p+1]=0;continue}i=s[p]/e[p],l=s[p+1]/e[p],u=Math.pow(i,2)+Math.pow(l,2),!(u<=9)&&(c=3/Math.sqrt(u),s[p]=i*c*e[p],s[p+1]=l*c*e[p])}}function f_(t,e,s="x"){const n=g0(s),i=t.length;let l,c,u,h=Gr(t,0);for(let m=0;m<i;++m){if(c=u,u=h,h=Gr(t,m+1),!u)continue;const p=u[s],x=u[n];c&&(l=(p-c[s])/3,u[`cp1${s}`]=p-l,u[`cp1${n}`]=x-l*e[m]),h&&(l=(h[s]-p)/3,u[`cp2${s}`]=p+l,u[`cp2${n}`]=x+l*e[m])}}function m_(t,e="x"){const s=g0(e),n=t.length,i=Array(n).fill(0),l=Array(n);let c,u,h,m=Gr(t,0);for(c=0;c<n;++c)if(u=h,h=m,m=Gr(t,c+1),!!h){if(m){const p=m[e]-h[e];i[c]=p!==0?(m[s]-h[s])/p:0}l[c]=u?m?Is(i[c-1])!==Is(i[c])?0:(i[c-1]+i[c])/2:i[c-1]:i[c]}h_(t,i,l),f_(t,l,e)}function Uo(t,e,s){return Math.max(Math.min(t,s),e)}function p_(t,e){let s,n,i,l,c,u=xi(t[0],e);for(s=0,n=t.length;s<n;++s)c=l,l=u,u=s<n-1&&xi(t[s+1],e),l&&(i=t[s],c&&(i.cp1x=Uo(i.cp1x,e.left,e.right),i.cp1y=Uo(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=Uo(i.cp2x,e.left,e.right),i.cp2y=Uo(i.cp2y,e.top,e.bottom)))}function g_(t,e,s,n,i){let l,c,u,h;if(e.spanGaps&&(t=t.filter(m=>!m.skip)),e.cubicInterpolationMode==="monotone")m_(t,i);else{let m=n?t[t.length-1]:t[0];for(l=0,c=t.length;l<c;++l)u=t[l],h=u_(m,u,t[Math.min(l+1,c-(n?0:1))%c],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,m=u}e.capBezierPoints&&p_(t,s)}function Ju(){return typeof window<"u"&&typeof document<"u"}function Zu(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ml(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Pl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function x_(t,e){return Pl(t).getPropertyValue(e)}const y_=["top","right","bottom","left"];function lr(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const l=y_[i];n[l]=parseFloat(t[e+"-"+l+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const b_=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function v_(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:l}=n;let c=!1,u,h;if(b_(i,l,t.target))u=i,h=l;else{const m=e.getBoundingClientRect();u=n.clientX-m.left,h=n.clientY-m.top,c=!0}return{x:u,y:h,box:c}}function nr(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Pl(s),l=i.boxSizing==="border-box",c=lr(i,"padding"),u=lr(i,"border","width"),{x:h,y:m,box:p}=v_(t,s),x=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:w,height:j}=e;return l&&(w-=c.width+u.width,j-=c.height+u.height),{x:Math.round((h-x)/w*s.width/n),y:Math.round((m-b)/j*s.height/n)}}function w_(t,e,s){let n,i;if(e===void 0||s===void 0){const l=t&&Zu(t);if(!l)e=t.clientWidth,s=t.clientHeight;else{const c=l.getBoundingClientRect(),u=Pl(l),h=lr(u,"border","width"),m=lr(u,"padding");e=c.width-m.width-h.width,s=c.height-m.height-h.height,n=ml(u.maxWidth,l,"clientWidth"),i=ml(u.maxHeight,l,"clientHeight")}}return{width:e,height:s,maxWidth:n||hl,maxHeight:i||hl}}const Ho=t=>Math.round(t*10)/10;function j_(t,e,s,n){const i=Pl(t),l=lr(i,"margin"),c=ml(i.maxWidth,t,"clientWidth")||hl,u=ml(i.maxHeight,t,"clientHeight")||hl,h=w_(t,e,s);let{width:m,height:p}=h;if(i.boxSizing==="content-box"){const b=lr(i,"border","width"),w=lr(i,"padding");m-=w.width+b.width,p-=w.height+b.height}return m=Math.max(0,m-l.width),p=Math.max(0,n?m/n:p-l.height),m=Ho(Math.min(m,c,h.maxWidth)),p=Ho(Math.min(p,u,h.maxHeight)),m&&!p&&(p=Ho(m/2)),(e!==void 0||s!==void 0)&&n&&h.height&&p>h.height&&(p=h.height,m=Ho(Math.floor(p*n))),{width:m,height:p}}function qp(t,e,s){const n=e||1,i=Math.floor(t.height*n),l=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(s||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==i||c.width!==l?(t.currentDevicePixelRatio=n,c.height=i,c.width=l,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const N_=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ju()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Yp(t,e){const s=x_(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function rr(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function __(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function k_(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},c=rr(t,i,s),u=rr(i,l,s),h=rr(l,e,s),m=rr(c,u,s),p=rr(u,h,s);return rr(m,p,s)}const S_=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},C_=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function qr(t,e,s){return t?S_(e,s):C_()}function x0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function y0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function b0(t){return t==="angle"?{between:gi,compare:SN,normalize:es}:{between:tn,compare:(e,s)=>e-s,normalize:e=>e}}function Kp({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function E_(t,e,s){const{property:n,start:i,end:l}=s,{between:c,normalize:u}=b0(n),h=e.length;let{start:m,end:p,loop:x}=t,b,w;if(x){for(m+=h,p+=h,b=0,w=h;b<w&&c(u(e[m%h][n]),i,l);++b)m--,p--;m%=h,p%=h}return p<m&&(p+=h),{start:m,end:p,loop:x,style:t.style}}function v0(t,e,s){if(!s)return[t];const{property:n,start:i,end:l}=s,c=e.length,{compare:u,between:h,normalize:m}=b0(n),{start:p,end:x,loop:b,style:w}=E_(t,e,s),j=[];let v=!1,N=null,E,S,C;const D=()=>h(i,C,E)&&u(i,C)!==0,A=()=>u(l,E)===0||h(l,C,E),F=()=>v||D(),I=()=>!v||A();for(let M=p,V=p;M<=x;++M)S=e[M%c],!S.skip&&(E=m(S[n]),E!==C&&(v=h(E,i,l),N===null&&F()&&(N=u(E,i)===0?M:V),N!==null&&I()&&(j.push(Kp({start:N,end:M,loop:b,count:c,style:w})),N=null),V=M,C=E));return N!==null&&j.push(Kp({start:N,end:x,loop:b,count:c,style:w})),j}function w0(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const l=v0(n[i],t.points,e);l.length&&s.push(...l)}return s}function P_(t,e,s,n){let i=0,l=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(l+=i);l>i&&t[l%e].skip;)l--;return l%=e,{start:i,end:l}}function A_(t,e,s,n){const i=t.length,l=[];let c=e,u=t[e],h;for(h=e+1;h<=s;++h){const m=t[h%i];m.skip||m.stop?u.skip||(n=!1,l.push({start:e%i,end:(h-1)%i,loop:n}),e=c=m.stop?h:null):(c=h,u.skip&&(e=h)),u=m}return c!==null&&l.push({start:e%i,end:c%i,loop:n}),l}function T_(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const l=!!t._loop,{start:c,end:u}=P_(s,i,l,n);if(n===!0)return Xp(t,[{start:c,end:u,loop:l}],s,e);const h=u<c?u+i:u,m=!!t._fullLoop&&c===0&&u===i-1;return Xp(t,A_(s,c,h,m),s,e)}function Xp(t,e,s,n){return!n||!n.setContext||!s?e:D_(t,e,s,n)}function D_(t,e,s,n){const i=t._chart.getContext(),l=Gp(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,h=s.length,m=[];let p=l,x=e[0].start,b=x;function w(j,v,N,E){const S=u?-1:1;if(j!==v){for(j+=h;s[j%h].skip;)j-=S;for(;s[v%h].skip;)v+=S;j%h!==v%h&&(m.push({start:j%h,end:v%h,loop:N,style:E}),p=E,x=v%h)}}for(const j of e){x=u?x:j.start;let v=s[x%h],N;for(b=x+1;b<=j.end;b++){const E=s[b%h];N=Gp(n.setContext(pr(i,{type:"segment",p0:v,p1:E,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:c}))),R_(N,p)&&w(x,b-1,j.loop,p),v=E,p=N}x<b-1&&w(x,b-1,j.loop,p)}return m}function Gp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function R_(t,e){if(!e)return!1;const s=[],n=function(i,l){return qu(l)?(s.includes(l)||s.push(l),s.indexOf(l)):l};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Vo(t,e,s){return t.options.clip?t[s]:e[s]}function M_(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Vo(s,e,"left"),right:Vo(s,e,"right"),top:Vo(n,e,"top"),bottom:Vo(n,e,"bottom")}:e}function j0(t,e){const s=e._clip;if(s.disabled)return!1;const n=M_(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class F_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const l=s.listeners[i],c=s.duration;l.forEach(u=>u({chart:e,initial:s.initial,numSteps:c,currentStep:Math.min(n-s.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=o0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const l=n.items;let c=l.length-1,u=!1,h;for(;c>=0;--c)h=l[c],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(e),u=!0):(l[c]=l[l.length-1],l.pop());u&&(i.draw(),this._notify(i,n,e,"progress")),l.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=l.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qs=new F_;const Qp="transparent",L_={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=$p(t||Qp),i=n.valid&&$p(e||Qp);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class O_{constructor(e,s,n,i){const l=s[n];i=Bo([e.to,i,l,e.from]);const c=Bo([e.from,l,i]);this._active=!0,this._fn=e.fn||L_[e.type||typeof c],this._easing=ri[e.easing]||ri.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=c,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],l=n-this._start,c=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Bo([e.to,s,i,e.from]),this._from=Bo([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,l=this._from,c=this._loop,u=this._to;let h;if(this._active=l!==u&&(c||s<n),!this._active){this._target[i]=u,this._notify(!0);return}if(s<0){this._target[i]=l;return}h=s/n%2,h=c&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(l,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class N0{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Fe(e))return;const s=Object.keys(ot.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const l=e[i];if(!Fe(l))return;const c={};for(const u of s)c[u]=l[u];(ht(l.properties)&&l.properties||[i]).forEach(u=>{(u===i||!n.has(u))&&n.set(u,c)})})}_animateOptions(e,s){const n=s.options,i=z_(e,n);if(!i)return[];const l=this._createAnimations(i,n);return n.$shared&&I_(e.options.$animations,n).then(()=>{e.options=n},()=>{}),l}_createAnimations(e,s){const n=this._properties,i=[],l=e.$animations||(e.$animations={}),c=Object.keys(s),u=Date.now();let h;for(h=c.length-1;h>=0;--h){const m=c[h];if(m.charAt(0)==="$")continue;if(m==="options"){i.push(...this._animateOptions(e,s));continue}const p=s[m];let x=l[m];const b=n.get(m);if(x)if(b&&x.active()){x.update(b,p,u);continue}else x.cancel();if(!b||!b.duration){e[m]=p;continue}l[m]=x=new O_(b,e,m,p),i.push(x)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Qs.add(this._chart,n),!0}}function I_(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const l=t[n[i]];l&&l.active()&&s.push(l.wait())}return Promise.all(s)}function z_(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Jp(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,l=s.max===void 0?e:0;return{start:n?l:i,end:n?i:l}}function $_(t,e,s){if(s===!1)return!1;const n=Jp(t,s),i=Jp(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function B_(t){let e,s,n,i;return Fe(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function _0(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,l;for(i=0,l=n.length;i<l;++i)s.push(n[i].index);return s}function Zp(t,e,s,n={}){const i=t.keys,l=n.mode==="single";let c,u,h,m;if(e===null)return;let p=!1;for(c=0,u=i.length;c<u;++c){if(h=+i[c],h===s){if(p=!0,n.all)continue;break}m=t.values[h],Ft(m)&&(l||e===0||Is(e)===Is(m))&&(e+=m)}return!p&&!n.all?0:e}function U_(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",l=n.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let h,m,p;for(h=0,m=c.length;h<m;++h)p=c[h],u[h]={[i]:p,[l]:t[p]};return u}function $d(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function H_(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function V_(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function W_(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function eg(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const l=t[i.index];if(s&&l>0||!s&&l<0)return i.index}return null}function tg(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:l,vScale:c,index:u}=n,h=l.axis,m=c.axis,p=H_(l,c,n),x=e.length;let b;for(let w=0;w<x;++w){const j=e[w],{[h]:v,[m]:N}=j,E=j._stacks||(j._stacks={});b=E[m]=W_(i,p,v),b[u]=N,b._top=eg(b,c,!0,n.type),b._bottom=eg(b,c,!1,n.type);const S=b._visualValues||(b._visualValues={});S[u]=N}}function Bd(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function q_(t,e){return pr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Y_(t,e,s){return pr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Wa(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const l=i._stacks;if(!l||l[n]===void 0||l[n][s]===void 0)return;delete l[n][s],l[n]._visualValues!==void 0&&l[n]._visualValues[s]!==void 0&&delete l[n]._visualValues[s]}}}const Ud=t=>t==="reset"||t==="none",sg=(t,e)=>e?t:Object.assign({},t),K_=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:_0(s,!0),values:null};class Al{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=$d(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Wa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(x,b,w,j)=>x==="x"?b:x==="r"?j:w,l=s.xAxisID=Re(n.xAxisID,Bd(e,"x")),c=s.yAxisID=Re(n.yAxisID,Bd(e,"y")),u=s.rAxisID=Re(n.rAxisID,Bd(e,"r")),h=s.indexAxis,m=s.iAxisID=i(h,l,c,u),p=s.vAxisID=i(h,c,l,u);s.xScale=this.getScaleForId(l),s.yScale=this.getScaleForId(c),s.rScale=this.getScaleForId(u),s.iScale=this.getScaleForId(m),s.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Op(this._data,this),e._stacked&&Wa(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(Fe(s)){const i=this._cachedMeta;this._data=U_(s,i)}else if(n!==s){if(n){Op(n,this);const i=this._cachedMeta;Wa(i),i._parsed=[]}s&&Object.isExtensible(s)&&AN(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const l=s._stacked;s._stacked=$d(s.vScale,s),s.stack!==n.stack&&(i=!0,Wa(s),s.stack=n.stack),this._resyncElements(e),(i||l!==s._stacked)&&(tg(this,s._parsed),s._stacked=$d(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:l,_stacked:c}=n,u=l.axis;let h=e===0&&s===i.length?!0:n._sorted,m=e>0&&n._parsed[e-1],p,x,b;if(this._parsing===!1)n._parsed=i,n._sorted=!0,b=i;else{ht(i[e])?b=this.parseArrayData(n,i,e,s):Fe(i[e])?b=this.parseObjectData(n,i,e,s):b=this.parsePrimitiveData(n,i,e,s);const w=()=>x[u]===null||m&&x[u]<m[u];for(p=0;p<s;++p)n._parsed[p+e]=x=b[p],h&&(w()&&(h=!1),m=x);n._sorted=h}c&&tg(this,b)}parsePrimitiveData(e,s,n,i){const{iScale:l,vScale:c}=e,u=l.axis,h=c.axis,m=l.getLabels(),p=l===c,x=new Array(i);let b,w,j;for(b=0,w=i;b<w;++b)j=b+n,x[b]={[u]:p||l.parse(m[j],j),[h]:c.parse(s[j],j)};return x}parseArrayData(e,s,n,i){const{xScale:l,yScale:c}=e,u=new Array(i);let h,m,p,x;for(h=0,m=i;h<m;++h)p=h+n,x=s[p],u[h]={x:l.parse(x[0],p),y:c.parse(x[1],p)};return u}parseObjectData(e,s,n,i){const{xScale:l,yScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=new Array(i);let p,x,b,w;for(p=0,x=i;p<x;++p)b=p+n,w=s[b],m[p]={x:l.parse(hr(w,u),b),y:c.parse(hr(w,h),b)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,l=this._cachedMeta,c=s[e.axis],u={keys:_0(i,!0),values:s._stacks[e.axis]._visualValues};return Zp(u,c,l.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const l=n[s.axis];let c=l===null?NaN:l;const u=i&&n._stacks[s.axis];i&&u&&(i.values=u,c=Zp(i,l,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,l=n._sorted&&e===n.iScale,c=i.length,u=this._getOtherScale(e),h=K_(s,n,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:x}=V_(u);let b,w;function j(){w=i[b];const v=w[u.axis];return!Ft(w[e.axis])||p>v||x<v}for(b=0;b<c&&!(!j()&&(this.updateRangeFromParsed(m,e,w,h),l));++b);if(l){for(b=c-1;b>=0;--b)if(!j()){this.updateRangeFromParsed(m,e,w,h);break}}return m}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,l,c;for(i=0,l=s.length;i<l;++i)c=s[i][e.axis],Ft(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,l=this.getParsed(e);return{label:n?""+n.getLabelForValue(l[n.axis]):"",value:i?""+i.getLabelForValue(l[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=B_(Re(this.options.clip,$_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],l=s.chartArea,c=[],u=this._drawStart||0,h=this._drawCount||i.length-u,m=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(e,l,u,h),p=u;p<u+h;++p){const x=i[p];x.hidden||(x.active&&m?c.push(x):x.draw(e,l))}for(p=0;p<c.length;++p)c[p].draw(e,l)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];l=c.$context||(c.$context=Y_(this.getContext(),e,c)),l.parsed=this.getParsed(e),l.raw=i.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=q_(this.chart.getContext(),this.index)),l.dataset=i,l.index=l.datasetIndex=this.index;return l.active=!!s,l.mode=n,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",l=this._cachedDataOpts,c=e+"-"+s,u=l[c],h=this.enableOptionSharing&&mi(n);if(u)return sg(u,h);const m=this.chart.config,p=m.datasetElementScopeKeys(this._type,e),x=i?[`${e}Hover`,"hover",e,""]:[e,""],b=m.getOptionScopes(this.getDataset(),p),w=Object.keys(ot.elements[e]),j=()=>this.getContext(n,i,s),v=m.resolveNamedOptions(b,w,j,x);return v.$shared&&(v.$shared=h,l[c]=Object.freeze(sg(v,h))),v}_resolveAnimations(e,s,n){const i=this.chart,l=this._cachedDataOpts,c=`animation-${s}`,u=l[c];if(u)return u;let h;if(i.options.animation!==!1){const p=this.chart.config,x=p.datasetAnimationScopeKeys(this._type,s),b=p.getOptionScopes(this.getDataset(),x);h=p.createResolver(b,this.getContext(e,n,s))}const m=new N0(i,h&&h.animations);return h&&h._cacheable&&(l[c]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Ud(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,l=this.getSharedOptions(n),c=this.includeOptions(s,l)||l!==i;return this.updateSharedOptions(l,s,n),{sharedOptions:l,includeOptions:c}}updateElement(e,s,n,i){Ud(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!Ud(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const l=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(l)||l})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[u,h,m]of this._syncList)this[u](h,m);this._syncList=[];const i=n.length,l=s.length,c=Math.min(l,i);c&&this.parse(0,c),l>i?this._insertElements(i,l-i,e):l<i&&this._removeElements(l,i-l)}_insertElements(e,s,n=!0){const i=this._cachedMeta,l=i.data,c=e+s;let u;const h=m=>{for(m.length+=s,u=m.length-1;u>=c;u--)m[u]=m[u-s]};for(h(l),u=e;u<c;++u)l[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,s),n&&this.updateElements(l,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&Wa(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function X_(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,l=s.length;i<l;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=i0(n.sort((i,l)=>i-l))}return t._cache.$bar}function G_(t){const e=t.iScale,s=X_(e,t.type);let n=e._length,i,l,c,u;const h=()=>{c===32767||c===-32768||(mi(u)&&(n=Math.min(n,Math.abs(c-u)||n)),u=c)};for(i=0,l=s.length;i<l;++i)c=e.getPixelForValue(s[i]),h();for(u=void 0,i=0,l=e.ticks.length;i<l;++i)c=e.getPixelForTick(i),h();return n}function Q_(t,e,s,n){const i=s.barThickness;let l,c;return Ue(i)?(l=e.min*s.categoryPercentage,c=s.barPercentage):(l=i*n,c=1),{chunk:l/n,ratio:c,start:e.pixels[t]-l/2}}function J_(t,e,s,n){const i=e.pixels,l=i[t];let c=t>0?i[t-1]:null,u=t<i.length-1?i[t+1]:null;const h=s.categoryPercentage;c===null&&(c=l-(u===null?e.end-e.start:u-l)),u===null&&(u=l+l-c);const m=l-(l-Math.min(c,u))/2*h;return{chunk:Math.abs(u-c)/2*h/n,ratio:s.barPercentage,start:m}}function Z_(t,e,s,n){const i=s.parse(t[0],n),l=s.parse(t[1],n),c=Math.min(i,l),u=Math.max(i,l);let h=c,m=u;Math.abs(c)>Math.abs(u)&&(h=u,m=c),e[s.axis]=m,e._custom={barStart:h,barEnd:m,start:i,end:l,min:c,max:u}}function k0(t,e,s,n){return ht(t)?Z_(t,e,s,n):e[s.axis]=s.parse(t,n),e}function ng(t,e,s,n){const i=t.iScale,l=t.vScale,c=i.getLabels(),u=i===l,h=[];let m,p,x,b;for(m=s,p=s+n;m<p;++m)b=e[m],x={},x[i.axis]=u||i.parse(c[m],m),h.push(k0(b,x,l,m));return h}function Hd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function e2(t,e,s){return t!==0?Is(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function t2(t){let e,s,n,i,l;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",l="start"):(i="start",l="end"),{start:s,end:n,reverse:e,top:i,bottom:l}}function s2(t,e,s,n){let i=e.borderSkipped;const l={};if(!i){t.borderSkipped=l;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:h,top:m,bottom:p}=t2(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=m:(s._bottom||0)===n?i=p:(l[rg(p,c,u,h)]=!0,i=m)),l[rg(i,c,u,h)]=!0,t.borderSkipped=l}function rg(t,e,s,n){return n?(t=n2(t,e,s),t=ag(t,s,e)):t=ag(t,e,s),t}function n2(t,e,s){return t===e?s:t===s?e:t}function ag(t,e,s){return t==="start"?e:t==="end"?s:t}function r2(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class a2 extends Al{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,i){return ng(e,s,n,i)}parseArrayData(e,s,n,i){return ng(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:l,vScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=l.axis==="x"?u:h,p=c.axis==="x"?u:h,x=[];let b,w,j,v;for(b=n,w=n+i;b<w;++b)v=s[b],j={},j[l.axis]=l.parse(hr(v,m),b),x.push(k0(hr(v,p),j,c,b));return x}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const l=n._custom;l&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,l=this.getParsed(e),c=l._custom,u=Hd(c)?"["+c.start+", "+c.end+"]":""+i.getLabelForValue(l[i.axis]);return{label:""+n.getLabelForValue(l[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const l=i==="reset",{index:c,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),m=u.isHorizontal(),p=this._getRuler(),{sharedOptions:x,includeOptions:b}=this._getSharedOptions(s,i);for(let w=s;w<s+n;w++){const j=this.getParsed(w),v=l||Ue(j[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(w),N=this._calculateBarIndexPixels(w,p),E=(j._stacks||{})[u.axis],S={horizontal:m,base:v.base,enableBorderRadius:!E||Hd(j._custom)||c===E._top||c===E._bottom,x:m?v.head:N.center,y:m?N.center:v.head,height:m?N.size:Math.abs(v.size),width:m?Math.abs(v.size):N.size};b&&(S.options=x||this.resolveDataElementOptions(w,e[w].active?"active":i));const C=S.options||e[w].options;s2(S,C,E,c),r2(S,C,p.ratio),this.updateElement(e[w],w,S,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),l=n.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(s),h=u&&u[n.axis],m=p=>{const x=p._parsed.find(w=>w[n.axis]===h),b=x&&x[p.vScale.axis];if(Ue(b)||isNaN(b))return!0};for(const p of i)if(!(s!==void 0&&m(p))&&((l===!1||c.indexOf(p.stack)===-1||l===void 0&&p.stack===void 0)&&c.push(p.stack),p.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Re(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const i=this._getStacks(e,n),l=s!==void 0?i.indexOf(s):-1;return l===-1?i.length-1:l}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let l,c;for(l=0,c=s.data.length;l<c;++l)i.push(n.getPixelForValue(this.getParsed(l)[n.axis],l));const u=e.barThickness;return{min:u||G_(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:l,minBarLength:c}}=this,u=l||0,h=this.getParsed(e),m=h._custom,p=Hd(m);let x=h[s.axis],b=0,w=n?this.applyStack(s,h,n):x,j,v;w!==x&&(b=w-x,w=x),p&&(x=m.barStart,w=m.barEnd-m.barStart,x!==0&&Is(x)!==Is(m.barEnd)&&(b=0),b+=x);const N=!Ue(l)&&!p?l:b;let E=s.getPixelForValue(N);if(this.chart.getDataVisibility(e)?j=s.getPixelForValue(b+w):j=E,v=j-E,Math.abs(v)<c){v=e2(v,s,u)*c,x===u&&(E-=v/2);const S=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),D=Math.min(S,C),A=Math.max(S,C);E=Math.max(Math.min(E,A),D),j=E+v,n&&!p&&(h._stacks[s.axis]._visualValues[i]=s.getValueForPixel(j)-s.getValueForPixel(E))}if(E===s.getPixelForValue(u)){const S=Is(v)*s.getLineWidthForValue(u)/2;E+=S,v-=S}return{size:v,base:E,head:j,center:j+v/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,l=i.skipNull,c=Re(i.maxBarThickness,1/0);let u,h;const m=this._getAxisCount();if(s.grouped){const p=l?this._getStackCount(e):s.stackCount,x=i.barThickness==="flex"?J_(e,s,i,p*m):Q_(e,s,i,p*m),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(Re(b,this.getFirstScaleIdForIndexAxis())),j=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+w;u=x.start+x.chunk*j+x.chunk/2,h=Math.min(c,x.chunk*x.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),h=Math.min(c,s.min*s.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let l=0;for(;l<i;++l)this.getParsed(l)[s.axis]!==null&&!n[l].hidden&&n[l].draw(this._ctx)}}function i2(t,e,s){let n=1,i=1,l=0,c=0;if(e<st){const u=t,h=u+e,m=Math.cos(u),p=Math.sin(u),x=Math.cos(h),b=Math.sin(h),w=(C,D,A)=>gi(C,u,h,!0)?1:Math.max(D,D*s,A,A*s),j=(C,D,A)=>gi(C,u,h,!0)?-1:Math.min(D,D*s,A,A*s),v=w(0,m,x),N=w(xt,p,b),E=j(Ye,m,x),S=j(Ye+xt,p,b);n=(v-E)/2,i=(N-S)/2,l=-(v+E)/2,c=-(N+S)/2}return{ratioX:n,ratioY:i,offsetX:l,offsetY:c}}class o2 extends Al{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let l=h=>+n[h];if(Fe(n[e])){const{key:h="value"}=this._parsing;l=m=>+hr(n[m],h)}let c,u;for(c=e,u=e+s;c<u;++c)i._parsed[c]=l(c)}}_getRotation(){return en(this.options.rotation-90)}_getCircumference(){return en(this.options.circumference)}_getRotationExtents(){let e=st,s=-st;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,l=i._getRotation(),c=i._getCircumference();e=Math.min(e,l),s=Math.max(s,l+c)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,l=i.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-c)/2,0),h=Math.min(fN(this.options.cutout,u),1),m=this._getRingWeight(this.index),{circumference:p,rotation:x}=this._getRotationExtents(),{ratioX:b,ratioY:w,offsetX:j,offsetY:v}=i2(x,p,h),N=(n.width-c)/b,E=(n.height-c)/w,S=Math.max(Math.min(N,E)/2,0),C=t0(this.options.radius,S),D=Math.max(C*h,0),A=(C-D)/this._getVisibleDatasetWeightTotal();this.offsetX=j*C,this.offsetY=v*C,i.total=this.calculateTotal(),this.outerRadius=C-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*m,0),this.updateElements(l,0,l.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,l=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*l/st)}updateElements(e,s,n,i){const l=i==="reset",c=this.chart,u=c.chartArea,m=c.options.animation,p=(u.left+u.right)/2,x=(u.top+u.bottom)/2,b=l&&m.animateScale,w=b?0:this.innerRadius,j=b?0:this.outerRadius,{sharedOptions:v,includeOptions:N}=this._getSharedOptions(s,i);let E=this._getRotation(),S;for(S=0;S<s;++S)E+=this._circumference(S,l);for(S=s;S<s+n;++S){const C=this._circumference(S,l),D=e[S],A={x:p+this.offsetX,y:x+this.offsetY,startAngle:E,endAngle:E+C,circumference:C,outerRadius:j,innerRadius:w};N&&(A.options=v||this.resolveDataElementOptions(S,D.active?"active":i)),E+=C,this.updateElement(D,S,A,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const l=e._parsed[i];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(l))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?st*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],l=Yu(s._parsed[e],n.options.locale);return{label:i[e]||"",value:l}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,l,c,u,h;if(!e){for(i=0,l=n.data.datasets.length;i<l;++i)if(n.isDatasetVisible(i)){c=n.getDatasetMeta(i),e=c.data,u=c.controller;break}}if(!e)return 0;for(i=0,l=e.length;i<l;++i)h=u.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(s=Math.max(s,h.borderWidth||0,h.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const l=this.resolveDataElementOptions(n);s=Math.max(s,l.offset||0,l.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(Re(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class l2 extends Al{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:l}=s,c=this.chart._animationsDisabled;let{start:u,count:h}=RN(s,i,c);this._drawStart=u,this._drawCount=h,MN(s)&&(u=0,h=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!l._decimated,n.points=i;const m=this.resolveDatasetElementOptions(e);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:m},e),this.updateElements(i,u,h,e)}updateElements(e,s,n,i){const l=i==="reset",{iScale:c,vScale:u,_stacked:h,_dataset:m}=this._cachedMeta,{sharedOptions:p,includeOptions:x}=this._getSharedOptions(s,i),b=c.axis,w=u.axis,{spanGaps:j,segment:v}=this.options,N=pi(j)?j:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||l||i==="none",S=s+n,C=e.length;let D=s>0&&this.getParsed(s-1);for(let A=0;A<C;++A){const F=e[A],I=E?F:{};if(A<s||A>=S){I.skip=!0;continue}const M=this.getParsed(A),V=Ue(M[w]),H=I[b]=c.getPixelForValue(M[b],A),O=I[w]=l||V?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,M,h):M[w],A);I.skip=isNaN(H)||isNaN(O)||V,I.stop=A>0&&Math.abs(M[b]-D[b])>N,v&&(I.parsed=M,I.raw=m.data[A]),x&&(I.options=p||this.resolveDataElementOptions(A,F.active?"active":i)),E||this.updateElement(F,A,I,i),D=M}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const l=i[0].size(this.resolveDataElementOptions(0)),c=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,l,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function tr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eh{static override(e){Object.assign(eh.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return tr()}parse(){return tr()}format(){return tr()}add(){return tr()}diff(){return tr()}startOf(){return tr()}endOf(){return tr()}}var c2={_date:eh};function d2(t,e,s,n){const{controller:i,data:l,_sorted:c}=t,u=i._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&c&&l.length){const m=u._reversePixels?EN:ir;if(n){if(i._sharedOptions){const p=l[0],x=typeof p.getRange=="function"&&p.getRange(e);if(x){const b=m(l,e,s-x),w=m(l,e,s+x);return{lo:b.lo,hi:w.hi}}}}else{const p=m(l,e,s);if(h){const{vScale:x}=i._cachedMeta,{_parsed:b}=t,w=b.slice(0,p.lo+1).reverse().findIndex(v=>!Ue(v[x.axis]));p.lo-=Math.max(0,w);const j=b.slice(p.hi).findIndex(v=>!Ue(v[x.axis]));p.hi+=Math.max(0,j)}return p}}return{lo:0,hi:l.length-1}}function Tl(t,e,s,n,i){const l=t.getSortedVisibleDatasetMetas(),c=s[e];for(let u=0,h=l.length;u<h;++u){const{index:m,data:p}=l[u],{lo:x,hi:b}=d2(l[u],e,c,i);for(let w=x;w<=b;++w){const j=p[w];j.skip||n(j,m,w)}}}function u2(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const l=e?Math.abs(n.x-i.x):0,c=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function Vd(t,e,s,n,i){const l=[];return!i&&!t.isPointInArea(e)||Tl(t,s,e,function(u,h,m){!i&&!xi(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&l.push({element:u,datasetIndex:h,index:m})},!0),l}function h2(t,e,s,n){let i=[];function l(c,u,h){const{startAngle:m,endAngle:p}=c.getProps(["startAngle","endAngle"],n),{angle:x}=r0(c,{x:e.x,y:e.y});gi(x,m,p)&&i.push({element:c,datasetIndex:u,index:h})}return Tl(t,s,e,l),i}function f2(t,e,s,n,i,l){let c=[];const u=u2(s);let h=Number.POSITIVE_INFINITY;function m(p,x,b){const w=p.inRange(e.x,e.y,i);if(n&&!w)return;const j=p.getCenterPoint(i);if(!(!!l||t.isPointInArea(j))&&!w)return;const N=u(e,j);N<h?(c=[{element:p,datasetIndex:x,index:b}],h=N):N===h&&c.push({element:p,datasetIndex:x,index:b})}return Tl(t,s,e,m),c}function Wd(t,e,s,n,i,l){return!l&&!t.isPointInArea(e)?[]:s==="r"&&!n?h2(t,e,s,i):f2(t,e,s,n,i,l)}function ig(t,e,s,n,i){const l=[],c=s==="x"?"inXRange":"inYRange";let u=!1;return Tl(t,s,e,(h,m,p)=>{h[c]&&h[c](e[s],i)&&(l.push({element:h,datasetIndex:m,index:p}),u=u||h.inRange(e.x,e.y,i))}),n&&!u?[]:l}var m2={modes:{index(t,e,s,n){const i=nr(e,t),l=s.axis||"x",c=s.includeInvisible||!1,u=s.intersect?Vd(t,i,l,n,c):Wd(t,i,l,!1,n,c),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const p=u[0].index,x=m.data[p];x&&!x.skip&&h.push({element:x,datasetIndex:m.index,index:p})}),h):[]},dataset(t,e,s,n){const i=nr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;let u=s.intersect?Vd(t,i,l,n,c):Wd(t,i,l,!1,n,c);if(u.length>0){const h=u[0].datasetIndex,m=t.getDatasetMeta(h).data;u=[];for(let p=0;p<m.length;++p)u.push({element:m[p],datasetIndex:h,index:p})}return u},point(t,e,s,n){const i=nr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Vd(t,i,l,n,c)},nearest(t,e,s,n){const i=nr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Wd(t,i,l,s.intersect,n,c)},x(t,e,s,n){const i=nr(e,t);return ig(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=nr(e,t);return ig(t,i,"y",s.intersect,n)}}};const S0=["left","top","right","bottom"];function qa(t,e){return t.filter(s=>s.pos===e)}function og(t,e){return t.filter(s=>S0.indexOf(s.pos)===-1&&s.box.axis===e)}function Ya(t,e){return t.sort((s,n)=>{const i=e?n:s,l=e?s:n;return i.weight===l.weight?i.index-l.index:i.weight-l.weight})}function p2(t){const e=[];let s,n,i,l,c,u;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:l,options:{stack:c,stackWeight:u=1}}=i,e.push({index:s,box:i,pos:l,horizontal:i.isHorizontal(),weight:i.weight,stack:c&&l+c,stackWeight:u});return e}function g2(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:l}=s;if(!n||!S0.includes(i))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return e}function x2(t,e){const s=g2(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let l,c,u;for(l=0,c=t.length;l<c;++l){u=t[l];const{fullSize:h}=u.box,m=s[u.stack],p=m&&u.stackWeight/m.weight;u.horizontal?(u.width=p?p*n:h&&e.availableWidth,u.height=i):(u.width=n,u.height=p?p*i:h&&e.availableHeight)}return s}function y2(t){const e=p2(t),s=Ya(e.filter(m=>m.box.fullSize),!0),n=Ya(qa(e,"left"),!0),i=Ya(qa(e,"right")),l=Ya(qa(e,"top"),!0),c=Ya(qa(e,"bottom")),u=og(e,"x"),h=og(e,"y");return{fullSize:s,leftAndTop:n.concat(l),rightAndBottom:i.concat(h).concat(c).concat(u),chartArea:qa(e,"chartArea"),vertical:n.concat(i).concat(h),horizontal:l.concat(c).concat(u)}}function lg(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function C0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function b2(t,e,s,n){const{pos:i,box:l}=s,c=t.maxPadding;if(!Fe(i)){s.size&&(t[i]-=s.size);const x=n[s.stack]||{size:0,count:1};x.size=Math.max(x.size,s.horizontal?l.height:l.width),s.size=x.size/x.count,t[i]+=s.size}l.getPadding&&C0(c,l.getPadding());const u=Math.max(0,e.outerWidth-lg(c,t,"left","right")),h=Math.max(0,e.outerHeight-lg(c,t,"top","bottom")),m=u!==t.w,p=h!==t.h;return t.w=u,t.h=h,s.horizontal?{same:m,other:p}:{same:p,other:m}}function v2(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function w2(t,e){const s=e.maxPadding;function n(i){const l={left:0,top:0,right:0,bottom:0};return i.forEach(c=>{l[c]=Math.max(e[c],s[c])}),l}return n(t?["left","right"]:["top","bottom"])}function Ja(t,e,s,n){const i=[];let l,c,u,h,m,p;for(l=0,c=t.length,m=0;l<c;++l){u=t[l],h=u.box,h.update(u.width||e.w,u.height||e.h,w2(u.horizontal,e));const{same:x,other:b}=b2(e,s,u,n);m|=x&&i.length,p=p||b,h.fullSize||i.push(u)}return m&&Ja(i,e,s,n)||p}function Wo(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function cg(t,e,s,n){const i=s.padding;let{x:l,y:c}=e;for(const u of t){const h=u.box,m=n[u.stack]||{placed:0,weight:1},p=u.stackWeight/m.weight||1;if(u.horizontal){const x=e.w*p,b=m.size||h.height;mi(m.start)&&(c=m.start),h.fullSize?Wo(h,i.left,c,s.outerWidth-i.right-i.left,b):Wo(h,e.left+m.placed,c,x,b),m.start=c,m.placed+=x,c=h.bottom}else{const x=e.h*p,b=m.size||h.width;mi(m.start)&&(l=m.start),h.fullSize?Wo(h,l,i.top,b,s.outerHeight-i.bottom-i.top):Wo(h,l,e.top+m.placed,b,x),m.start=l,m.placed+=x,l=h.right}}e.x=l,e.y=c}var hs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=fs(t.options.layout.padding),l=Math.max(e-i.width,0),c=Math.max(s-i.height,0),u=y2(t.boxes),h=u.vertical,m=u.horizontal;qe(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const p=h.reduce((v,N)=>N.box.options&&N.box.options.display===!1?v:v+1,0)||1,x=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},i);C0(b,fs(n));const w=Object.assign({maxPadding:b,w:l,h:c,x:i.left,y:i.top},i),j=x2(h.concat(m),x);Ja(u.fullSize,w,x,j),Ja(h,w,x,j),Ja(m,w,x,j)&&Ja(h,w,x,j),v2(w),cg(u.leftAndTop,w,x,j),w.x+=w.w,w.y+=w.h,cg(u.rightAndBottom,w,x,j),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},qe(u.chartArea,v=>{const N=v.box;Object.assign(N,t.chartArea),N.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class E0{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class j2 extends E0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const rl="$chartjs",N2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dg=t=>t===null||t==="";function _2(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[rl]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",dg(i)){const l=Yp(t,"width");l!==void 0&&(t.width=l)}if(dg(n))if(t.style.height==="")t.height=t.width/(e||2);else{const l=Yp(t,"height");l!==void 0&&(t.height=l)}return t}const P0=N_?{passive:!0}:!1;function k2(t,e,s){t&&t.addEventListener(e,s,P0)}function S2(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,P0)}function C2(t,e){const s=N2[t.type]||t.type,{x:n,y:i}=nr(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function pl(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function E2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||pl(u.addedNodes,n),c=c&&!pl(u.removedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function P2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||pl(u.removedNodes,n),c=c&&!pl(u.addedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const bi=new Map;let ug=0;function A0(){const t=window.devicePixelRatio;t!==ug&&(ug=t,bi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function A2(t,e){bi.size||window.addEventListener("resize",A0),bi.set(t,e)}function T2(t){bi.delete(t),bi.size||window.removeEventListener("resize",A0)}function D2(t,e,s){const n=t.canvas,i=n&&Zu(n);if(!i)return;const l=l0((u,h)=>{const m=i.clientWidth;s(u,h),m<i.clientWidth&&s()},window),c=new ResizeObserver(u=>{const h=u[0],m=h.contentRect.width,p=h.contentRect.height;m===0&&p===0||l(m,p)});return c.observe(i),A2(t,l),c}function qd(t,e,s){s&&s.disconnect(),e==="resize"&&T2(t)}function R2(t,e,s){const n=t.canvas,i=l0(l=>{t.ctx!==null&&s(C2(l,t))},t);return k2(n,e,i),i}class M2 extends E0{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(_2(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[rl])return!1;const n=s[rl].initial;["height","width"].forEach(l=>{const c=n[l];Ue(c)?s.removeAttribute(l):s.setAttribute(l,c)});const i=n.style||{};return Object.keys(i).forEach(l=>{s.style[l]=i[l]}),s.width=s.width,delete s[rl],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),c={attach:E2,detach:P2,resize:D2}[s]||R2;i[s]=c(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:qd,detach:qd,resize:qd}[s]||S2)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return j_(e,s,n,i)}isAttached(e){const s=e&&Zu(e);return!!(s&&s.isConnected)}}function F2(t){return!Ju()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?j2:M2}class an{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return pi(this.x)&&pi(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(l=>{i[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),i}}function L2(t,e){const s=t.options.ticks,n=O2(t),i=Math.min(s.maxTicksLimit||n,n),l=s.major.enabled?z2(e):[],c=l.length,u=l[0],h=l[c-1],m=[];if(c>i)return $2(e,m,l,c/i),m;const p=I2(l,e,i);if(c>0){let x,b;const w=c>1?Math.round((h-u)/(c-1)):null;for(qo(e,m,p,Ue(w)?0:u-w,u),x=0,b=c-1;x<b;x++)qo(e,m,p,l[x],l[x+1]);return qo(e,m,p,h,Ue(w)?e.length:h+w),m}return qo(e,m,p),m}function O2(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function I2(t,e,s){const n=B2(t),i=e.length/s;if(!n)return Math.max(i,1);const l=wN(n);for(let c=0,u=l.length-1;c<u;c++){const h=l[c];if(h>i)return h}return Math.max(i,1)}function z2(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function $2(t,e,s,n){let i=0,l=s[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===l&&(e.push(t[c]),i++,l=s[i*n])}function qo(t,e,s,n,i){const l=Re(n,0),c=Math.min(Re(i,t.length),t.length);let u=0,h,m,p;for(s=Math.ceil(s),i&&(h=i-n,s=h/Math.floor(h/s)),p=l;p<0;)u++,p=Math.round(l+u*s);for(m=Math.max(l,0);m<c;m++)m===p&&(e.push(t[m]),u++,p=Math.round(l+u*s))}function B2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const U2=t=>t==="left"?"right":t==="right"?"left":t,hg=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,fg=(t,e)=>Math.min(e||t,t);function mg(t,e){const s=[],n=t.length/e,i=t.length;let l=0;for(;l<i;l+=n)s.push(t[Math.floor(l)]);return s}function H2(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),l=t._startPixel,c=t._endPixel,u=1e-6;let h=t.getPixelForTick(i),m;if(!(s&&(n===1?m=Math.max(h-l,c-h):e===0?m=(t.getPixelForTick(1)-h)/2:m=(h-t.getPixelForTick(i-1))/2,h+=i<e?m:-m,h<l-u||h>c+u)))return h}function V2(t,e){qe(t,s=>{const n=s.gc,i=n.length/2;let l;if(i>e){for(l=0;l<i;++l)delete s.data[n[l]];n.splice(0,i)}})}function Ka(t){return t.drawTicks?t.tickLength:0}function pg(t,e){if(!t.display)return 0;const s=Mt(t.font,e),n=fs(t.padding);return(ht(t.text)?t.text.length:1)*s.lineHeight+n.height}function W2(t,e){return pr(t,{scale:e,type:"scale"})}function q2(t,e,s){return pr(t,{tick:s,index:e,type:"tick"})}function Y2(t,e,s){let n=Wu(t);return(s&&e!=="right"||!s&&e==="right")&&(n=U2(n)),n}function K2(t,e,s,n){const{top:i,left:l,bottom:c,right:u,chart:h}=t,{chartArea:m,scales:p}=h;let x=0,b,w,j;const v=c-i,N=u-l;if(t.isHorizontal()){if(w=Tt(n,l,u),Fe(s)){const E=Object.keys(s)[0],S=s[E];j=p[E].getPixelForValue(S)+v-e}else s==="center"?j=(m.bottom+m.top)/2+v-e:j=hg(t,s,e);b=u-l}else{if(Fe(s)){const E=Object.keys(s)[0],S=s[E];w=p[E].getPixelForValue(S)-N+e}else s==="center"?w=(m.left+m.right)/2-N+e:w=hg(t,s,e);j=Tt(n,c,i),x=s==="left"?-xt:xt}return{titleX:w,titleY:j,maxWidth:b,rotation:x}}class na extends an{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=Rs(e,Number.POSITIVE_INFINITY),s=Rs(s,Number.NEGATIVE_INFINITY),n=Rs(n,Number.POSITIVE_INFINITY),i=Rs(i,Number.NEGATIVE_INFINITY),{min:Rs(e,n),max:Rs(s,i),minDefined:Ft(e),maxDefined:Ft(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:l}=this.getUserBounds(),c;if(i&&l)return{min:s,max:n};const u=this.getMatchingVisibleMetas();for(let h=0,m=u.length;h<m;++h)c=u[h].controller.getMinMax(this,e),i||(s=Math.min(s,c.min)),l||(n=Math.max(n,c.max));return s=l&&s>n?n:s,n=i&&s>n?s:n,{min:Rs(s,Rs(n,s)),max:Rs(n,Rs(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Je(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:l,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=e_(this,l,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?mg(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=L2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Je(this.options.afterUpdate,[this])}beforeSetDimensions(){Je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,l;for(n=0,i=e.length;n<i;n++)l=e[n],l.label=Je(s.callback,[l.value,n,e],this)}afterTickToLabelConversion(){Je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=fg(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,l=s.maxRotation;let c=i,u,h,m;if(!this._isVisible()||!s.display||i>=l||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const p=this._getLabelSizes(),x=p.widest.width,b=p.highest.height,w=Rt(this.chart.width-x,0,this.maxWidth);u=e.offset?this.maxWidth/n:w/(n-1),x+6>u&&(u=w/(n-(e.offset?.5:1)),h=this.maxHeight-Ka(e.grid)-s.padding-pg(e.title,this.chart.options.font),m=Math.sqrt(x*x+b*b),c=kN(Math.min(Math.asin(Rt((p.highest.height+6)/u,-1,1)),Math.asin(Rt(h/m,-1,1))-Math.asin(Rt(b/m,-1,1)))),c=Math.max(i,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:l}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const h=pg(i,s.options.font);if(u?(e.width=this.maxWidth,e.height=Ka(l)+h):(e.height=this.maxHeight,e.width=Ka(l)+h),n.display&&this.ticks.length){const{first:m,last:p,widest:x,highest:b}=this._getLabelSizes(),w=n.padding*2,j=en(this.labelRotation),v=Math.cos(j),N=Math.sin(j);if(u){const E=n.mirror?0:N*x.width+v*b.height;e.height=Math.min(this.maxHeight,e.height+E+w)}else{const E=n.mirror?0:v*x.width+N*b.height;e.width=Math.min(this.maxWidth,e.width+E+w)}this._calculatePadding(m,p,N,v)}}this._handleMargins(),u?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:l,padding:c},position:u}=this.options,h=this.labelRotation!==0,m=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,w=0;h?m?(b=i*e.width,w=n*s.height):(b=n*e.height,w=i*s.width):l==="start"?w=s.width:l==="end"?b=e.width:l!=="inner"&&(b=e.width/2,w=s.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((w-x+c)*this.width/(this.width-x),0)}else{let p=s.height/2,x=e.height/2;l==="start"?(p=0,x=e.height):l==="end"&&(p=s.height,x=0),this.paddingTop=p+c,this.paddingBottom=x+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Ue(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=mg(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:l}=this,c=[],u=[],h=Math.floor(s/fg(s,n));let m=0,p=0,x,b,w,j,v,N,E,S,C,D,A;for(x=0;x<s;x+=h){if(j=e[x].label,v=this._resolveTickFontOptions(x),i.font=N=v.string,E=l[N]=l[N]||{data:{},gc:[]},S=v.lineHeight,C=D=0,!Ue(j)&&!ht(j))C=Up(i,E.data,E.gc,C,j),D=S;else if(ht(j))for(b=0,w=j.length;b<w;++b)A=j[b],!Ue(A)&&!ht(A)&&(C=Up(i,E.data,E.gc,C,A),D+=S);c.push(C),u.push(D),m=Math.max(C,m),p=Math.max(D,p)}V2(l,s);const F=c.indexOf(m),I=u.indexOf(p),M=V=>({width:c[V]||0,height:u[V]||0});return{first:M(0),last:M(s-1),widest:M(F),highest:M(I),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return CN(this._alignToPixels?er(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=q2(this.getContext(),e,n))}return this.$context||(this.$context=W2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=en(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),l=this._getLabelSizes(),c=e.autoSkipPadding||0,u=l?l.widest.width+c:0,h=l?l.highest.height+c:0;return this.isHorizontal()?h*n>u*i?u/n:h/i:h*i<u*n?h/n:u/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:l,position:c,border:u}=i,h=l.offset,m=this.isHorizontal(),x=this.ticks.length+(h?1:0),b=Ka(l),w=[],j=u.setContext(this.getContext()),v=j.display?j.width:0,N=v/2,E=function($){return er(n,$,v)};let S,C,D,A,F,I,M,V,H,O,K,U;if(c==="top")S=E(this.bottom),I=this.bottom-b,V=S-N,O=E(e.top)+N,U=e.bottom;else if(c==="bottom")S=E(this.top),O=e.top,U=E(e.bottom)-N,I=S+N,V=this.top+b;else if(c==="left")S=E(this.right),F=this.right-b,M=S-N,H=E(e.left)+N,K=e.right;else if(c==="right")S=E(this.left),H=e.left,K=E(e.right)-N,F=S+N,M=this.left+b;else if(s==="x"){if(c==="center")S=E((e.top+e.bottom)/2+.5);else if(Fe(c)){const $=Object.keys(c)[0],J=c[$];S=E(this.chart.scales[$].getPixelForValue(J))}O=e.top,U=e.bottom,I=S+N,V=I+b}else if(s==="y"){if(c==="center")S=E((e.left+e.right)/2);else if(Fe(c)){const $=Object.keys(c)[0],J=c[$];S=E(this.chart.scales[$].getPixelForValue(J))}F=S-N,M=F-b,H=e.left,K=e.right}const ne=Re(i.ticks.maxTicksLimit,x),re=Math.max(1,Math.ceil(x/ne));for(C=0;C<x;C+=re){const $=this.getContext(C),J=l.setContext($),Y=u.setContext($),ee=J.lineWidth,te=J.color,P=Y.dash||[],R=Y.dashOffset,de=J.tickWidth,he=J.tickColor,B=J.tickBorderDash||[],Z=J.tickBorderDashOffset;D=H2(this,C,h),D!==void 0&&(A=er(n,D,ee),m?F=M=H=K=A:I=V=O=U=A,w.push({tx1:F,ty1:I,tx2:M,ty2:V,x1:H,y1:O,x2:K,y2:U,width:ee,color:te,borderDash:P,borderDashOffset:R,tickWidth:de,tickColor:he,tickBorderDash:B,tickBorderDashOffset:Z}))}return this._ticksLength=x,this._borderValue=S,w}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:l}=n,c=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:m,padding:p,mirror:x}=l,b=Ka(n.grid),w=b+p,j=x?-p:w,v=-en(this.labelRotation),N=[];let E,S,C,D,A,F,I,M,V,H,O,K,U="middle";if(i==="top")F=this.bottom-j,I=this._getXAxisLabelAlignment();else if(i==="bottom")F=this.top+j,I=this._getXAxisLabelAlignment();else if(i==="left"){const re=this._getYAxisLabelAlignment(b);I=re.textAlign,A=re.x}else if(i==="right"){const re=this._getYAxisLabelAlignment(b);I=re.textAlign,A=re.x}else if(s==="x"){if(i==="center")F=(e.top+e.bottom)/2+w;else if(Fe(i)){const re=Object.keys(i)[0],$=i[re];F=this.chart.scales[re].getPixelForValue($)+w}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")A=(e.left+e.right)/2-w;else if(Fe(i)){const re=Object.keys(i)[0],$=i[re];A=this.chart.scales[re].getPixelForValue($)}I=this._getYAxisLabelAlignment(b).textAlign}s==="y"&&(h==="start"?U="top":h==="end"&&(U="bottom"));const ne=this._getLabelSizes();for(E=0,S=u.length;E<S;++E){C=u[E],D=C.label;const re=l.setContext(this.getContext(E));M=this.getPixelForTick(E)+l.labelOffset,V=this._resolveTickFontOptions(E),H=V.lineHeight,O=ht(D)?D.length:1;const $=O/2,J=re.color,Y=re.textStrokeColor,ee=re.textStrokeWidth;let te=I;c?(A=M,I==="inner"&&(E===S-1?te=this.options.reverse?"left":"right":E===0?te=this.options.reverse?"right":"left":te="center"),i==="top"?m==="near"||v!==0?K=-O*H+H/2:m==="center"?K=-ne.highest.height/2-$*H+H:K=-ne.highest.height+H/2:m==="near"||v!==0?K=H/2:m==="center"?K=ne.highest.height/2-$*H:K=ne.highest.height-O*H,x&&(K*=-1),v!==0&&!re.showLabelBackdrop&&(A+=H/2*Math.sin(v))):(F=M,K=(1-O)*H/2);let P;if(re.showLabelBackdrop){const R=fs(re.backdropPadding),de=ne.heights[E],he=ne.widths[E];let B=K-R.top,Z=0-R.left;switch(U){case"middle":B-=de/2;break;case"bottom":B-=de;break}switch(I){case"center":Z-=he/2;break;case"right":Z-=he;break;case"inner":E===S-1?Z-=he:E>0&&(Z-=he/2);break}P={left:Z,top:B,width:he+R.width,height:de+R.height,color:re.backdropColor}}N.push({label:D,font:V,textOffset:K,options:{rotation:v,color:J,strokeColor:Y,strokeWidth:ee,textAlign:te,textBaseline:U,translation:[A,F],backdrop:P}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-en(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:l}}=this.options,c=this._getLabelSizes(),u=e+l,h=c.widest.width;let m,p;return s==="left"?i?(p=this.right+l,n==="near"?m="left":n==="center"?(m="center",p+=h/2):(m="right",p+=h)):(p=this.right-u,n==="near"?m="right":n==="center"?(m="center",p-=h/2):(m="left",p=this.left)):s==="right"?i?(p=this.left+l,n==="near"?m="right":n==="center"?(m="center",p-=h/2):(m="left",p-=h)):(p=this.left+u,n==="near"?m="left":n==="center"?(m="center",p+=h/2):(m="right",p=this.right)):m="right",{textAlign:m,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:l,height:c}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,l,c),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(l=>l.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,c;const u=(h,m,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(s.display)for(l=0,c=i.length;l<c;++l){const h=i[l];s.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),s.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,l=n.setContext(this.getContext()),c=n.display?l.width:0;if(!c)return;const u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let m,p,x,b;this.isHorizontal()?(m=er(e,this.left,c)-c/2,p=er(e,this.right,u)+u/2,x=b=h):(x=er(e,this.top,c)-c/2,b=er(e,this.bottom,u)+u/2,m=p=h),s.save(),s.lineWidth=l.width,s.strokeStyle=l.color,s.beginPath(),s.moveTo(m,x),s.lineTo(p,b),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Cl(n,i);const l=this.getLabelItems(e);for(const c of l){const u=c.options,h=c.font,m=c.label,p=c.textOffset;yi(n,m,0,p,h,u)}i&&El(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const l=Mt(n.font),c=fs(n.padding),u=n.align;let h=l.lineHeight/2;s==="bottom"||s==="center"||Fe(s)?(h+=c.bottom,ht(n.text)&&(h+=l.lineHeight*(n.text.length-1))):h+=c.top;const{titleX:m,titleY:p,maxWidth:x,rotation:b}=K2(this,h,s,u);yi(e,n.text,0,0,l,{color:n.color,maxWidth:x,rotation:b,textAlign:Y2(u,s,i),textBaseline:"middle",translation:[m,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Re(e.grid&&e.grid.z,-1),i=Re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==na.prototype.draw?[{z:s,draw:l=>{this.draw(l)}}]:[{z:n,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let l,c;for(l=0,c=s.length;l<c;++l){const u=s[l];u[n]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Mt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;Q2(s)&&(n=this.register(s));const i=this.items,l=e.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in i||(i[l]=e,X2(e,c,n),this.override&&ot.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in ot[i]&&(delete ot[i][n],this.override&&delete fr[n])}}function X2(t,e,s){const n=fi(Object.create(null),[s?ot.get(s):{},ot.get(e),t.defaults]);ot.set(e,n),t.defaultRoutes&&G2(e,t.defaultRoutes),t.descriptors&&ot.describe(e,t.descriptors)}function G2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),l=[t].concat(n).join("."),c=e[s].split("."),u=c.pop(),h=c.join(".");ot.route(l,i,h,u)})}function Q2(t){return"id"in t&&"defaults"in t}class J2{constructor(){this.controllers=new Yo(Al,"datasets",!0),this.elements=new Yo(an,"elements"),this.plugins=new Yo(Object,"plugins"),this.scales=new Yo(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const l=n||this._getRegistryForType(i);n||l.isForType(i)||l===this.plugins&&i.id?this._exec(e,l,i):qe(i,c=>{const u=n||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,s,n){const i=Hu(e);Je(n["before"+i],[],n),s[e](n),Je(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Fs=new J2;class Z2{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=i?this._descriptors(e).filter(i):this._descriptors(e),c=this._notify(l,e,s,n);return s==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,s,n,i){i=i||{};for(const l of e){const c=l.plugin,u=c[n],h=[s,i,l.options];if(Je(u,h,c)===!1&&i.cancelable)return!1}return!0}invalidate(){Ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=Re(n.options&&n.options.plugins,{}),l=ek(n);return i===!1&&!s?[]:sk(e,l,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(l,c)=>l.filter(u=>!c.some(h=>u.plugin.id===h.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function ek(t){const e={},s=[],n=Object.keys(Fs.plugins.items);for(let l=0;l<n.length;l++)s.push(Fs.getPlugin(n[l]));const i=t.plugins||[];for(let l=0;l<i.length;l++){const c=i[l];s.indexOf(c)===-1&&(s.push(c),e[c.id]=!0)}return{plugins:s,localIds:e}}function tk(t,e){return!e&&t===!1?null:t===!0?{}:t}function sk(t,{plugins:e,localIds:s},n,i){const l=[],c=t.getContext();for(const u of e){const h=u.id,m=tk(n[h],i);m!==null&&l.push({plugin:u,options:nk(t.config,{plugin:u,local:s[h]},m,c)})}return l}function nk(t,{plugin:e,local:s},n,i){const l=t.pluginScopeKeys(e),c=t.getOptionScopes(n,l);return s&&e.defaults&&c.push(e.defaults),t.createResolver(c,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vu(t,e){const s=ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function rk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function ak(t,e){return t===e?"_index_":"_value_"}function gg(t){if(t==="x"||t==="y"||t==="r")return t}function ik(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function wu(t,...e){if(gg(t))return t;for(const s of e){const n=s.axis||ik(s.position)||t.length>1&&gg(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xg(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function ok(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return xg(t,"x",s[0])||xg(t,"y",s[0])}return{}}function lk(t,e){const s=fr[t.type]||{scales:{}},n=e.scales||{},i=vu(t.type,e),l=Object.create(null);return Object.keys(n).forEach(c=>{const u=n[c];if(!Fe(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const h=wu(c,u,ok(c,t),ot.scales[u.type]),m=ak(h,i),p=s.scales||{};l[c]=si(Object.create(null),[{axis:h},u,p[h],p[m]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,h=c.indexAxis||vu(u,e),p=(fr[u]||{}).scales||{};Object.keys(p).forEach(x=>{const b=rk(x,h),w=c[b+"AxisID"]||b;l[w]=l[w]||Object.create(null),si(l[w],[{axis:b},n[w],p[x]])})}),Object.keys(l).forEach(c=>{const u=l[c];si(u,[ot.scales[u.type],ot.scale])}),l}function T0(t){const e=t.options||(t.options={});e.plugins=Re(e.plugins,{}),e.scales=lk(t,e)}function D0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function ck(t){return t=t||{},t.data=D0(t.data),T0(t),t}const yg=new Map,R0=new Set;function Ko(t,e){let s=yg.get(t);return s||(s=e(),yg.set(t,s),R0.add(s)),s}const Xa=(t,e,s)=>{const n=hr(e,s);n!==void 0&&t.add(n)};class dk{constructor(e){this._config=ck(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=D0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),T0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ko(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ko(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ko(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Ko(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:l}=this,c=this._cachedScopes(e,n),u=c.get(s);if(u)return u;const h=new Set;s.forEach(p=>{e&&(h.add(e),p.forEach(x=>Xa(h,e,x))),p.forEach(x=>Xa(h,i,x)),p.forEach(x=>Xa(h,fr[l]||{},x)),p.forEach(x=>Xa(h,ot,x)),p.forEach(x=>Xa(h,yu,x))});const m=Array.from(h);return m.length===0&&m.push(Object.create(null)),R0.has(s)&&c.set(s,m),m}chartOptionScopes(){const{options:e,type:s}=this;return[e,fr[s]||{},ot.datasets[s]||{},{type:s},ot,yu]}resolveNamedOptions(e,s,n,i=[""]){const l={$shared:!0},{resolver:c,subPrefixes:u}=bg(this._resolverCache,e,i);let h=c;if(hk(c,s)){l.$shared=!1,n=Ln(n)?n():n;const m=this.createResolver(e,n,u);h=Xr(c,n,m)}for(const m of s)l[m]=h[m];return l}createResolver(e,s,n=[""],i){const{resolver:l}=bg(this._resolverCache,e,n);return Fe(s)?Xr(l,s,void 0,i):l}}function bg(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let l=n.get(i);return l||(l={resolver:Xu(e,s),subPrefixes:s.filter(u=>!u.toLowerCase().includes("hover"))},n.set(i,l)),l}const uk=t=>Fe(t)&&Object.getOwnPropertyNames(t).some(e=>Ln(t[e]));function hk(t,e){const{isScriptable:s,isIndexable:n}=h0(t);for(const i of e){const l=s(i),c=n(i),u=(c||l)&&t[i];if(l&&(Ln(u)||uk(u))||c&&ht(u))return!0}return!1}var fk="4.5.0";const mk=["top","bottom","left","right","chartArea"];function vg(t,e){return t==="top"||t==="bottom"||mk.indexOf(t)===-1&&e==="x"}function wg(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function jg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Je(s&&s.onComplete,[t],e)}function pk(t){const e=t.chart,s=e.options.animation;Je(s&&s.onProgress,[t],e)}function M0(t){return Ju()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const al={},Ng=t=>{const e=M0(t);return Object.values(al).filter(s=>s.canvas===e).pop()};function gk(t,e,s){const n=Object.keys(t);for(const i of n){const l=+i;if(l>=e){const c=t[i];delete t[i],(s>0||l>e)&&(t[l+s]=c)}}}function xk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let Dl=class{static defaults=ot;static instances=al;static overrides=fr;static registry=Fs;static version=fk;static getChart=Ng;static register(...e){Fs.add(...e),_g()}static unregister(...e){Fs.remove(...e),_g()}constructor(e,s){const n=this.config=new dk(s),i=M0(e),l=Ng(i);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||F2(i)),this.platform.updateConfig(n);const u=this.platform.acquireContext(i,c.aspectRatio),h=u&&u.canvas,m=h&&h.height,p=h&&h.width;if(this.id=hN(),this.ctx=u,this.canvas=h,this.width=p,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Z2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=TN(x=>this.update(x),c.resizeDelay||0),this._dataChanges=[],al[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Qs.listen(this,"complete",jg),Qs.listen(this,"progress",pk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:l}=this;return Ue(e)?s&&l?l:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Hp(this.canvas,this.ctx),this}stop(){return Qs.stop(this),this}resize(e,s){Qs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,l=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(i,e,s,l),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,qp(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),Je(n.onResize,[this,c],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};qe(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((c,u)=>(c[u]=!1,c),{});let l=[];s&&(l=l.concat(Object.keys(s).map(c=>{const u=s[c],h=wu(c,u),m=h==="r",p=h==="x";return{options:u,dposition:m?"chartArea":p?"bottom":"left",dtype:m?"radialLinear":p?"category":"linear"}}))),qe(l,c=>{const u=c.options,h=u.id,m=wu(h,u),p=Re(u.type,c.dtype);(u.position===void 0||vg(u.position,m)!==vg(c.dposition))&&(u.position=c.dposition),i[h]=!0;let x=null;if(h in n&&n[h].type===p)x=n[h];else{const b=Fs.getScale(p);x=new b({id:h,type:p,ctx:this.ctx,chart:this}),n[x.id]=x}x.init(u,e)}),qe(i,(c,u)=>{c||delete n[u]}),qe(n,c=>{hs.configure(this,c,c.options),hs.addBox(this,c)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,l)=>i.index-l.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(wg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(l=>l===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const l=s[n];let c=this.getDatasetMeta(n);const u=l.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=u,c.indexAxis=l.indexAxis||vu(u,this.options),c.order=l.order||0,c.index=n,c.label=""+l.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const h=Fs.getController(u),{datasetElementType:m,dataElementType:p}=ot.datasets[u];Object.assign(h,{dataElementType:Fs.getElement(p),datasetElementType:m&&Fs.getElement(m)}),c.controller=new h(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){qe(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,p=this.data.datasets.length;m<p;m++){const{controller:x}=this.getDatasetMeta(m),b=!i&&l.indexOf(x)===-1;x.buildOrUpdateElements(b),c=Math.max(+x.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),i||qe(l,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wg("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){qe(this.scales,e=>{hs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Rp(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:l}of s){const c=n==="_removeElements"?-l:l;gk(e,i,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=l=>new Set(e.filter(c=>c[0]===l).map((c,u)=>u+","+c.splice(1).join(","))),i=n(0);for(let l=1;l<s;l++)if(!Rp(i,n(l)))return;return Array.from(i).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hs.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],qe(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,l)=>{i._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Ln(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qs.has(this)?this.attached&&!Qs.running(this)&&Qs.start(this):(this.draw(),jg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,l;for(i=0,l=s.length;i<l;++i){const c=s[i];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=j0(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Cl(s,i),e.controller.draw(),i&&El(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return xi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const l=m2.modes[s];return typeof l=="function"?l(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(l=>l&&l._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=pr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",l=this.getDatasetMeta(e),c=l.controller._resolveAnimations(void 0,i);mi(s)?(l.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(l,{visible:n}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Qs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Hp(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete al[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c,u)=>{l.offsetX=c,l.offsetY=u,this._eventHandler(l)};qe(this.options.events,l=>n(l,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(h,m)=>{s.addEventListener(this,h,m),e[h]=m},i=(h,m)=>{e[h]&&(s.removeEventListener(this,h,m),delete e[h])},l=(h,m)=>{this.canvas&&this.resize(h,m)};let c;const u=()=>{i("attach",u),this.attached=!0,this.resize(),n("resize",l),n("detach",c)};c=()=>{this.attached=!1,i("resize",l),this._stop(),this._resize(0,0),n("attach",u)},s.isAttached(this.canvas)?u():c()}unbindEvents(){qe(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},qe(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let l,c,u,h;for(s==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){c=e[u];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[i+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:l,index:c})=>{const u=this.getDatasetMeta(l);if(!u)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:u.data[c],index:c}});!dl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,l=(h,m)=>h.filter(p=>!m.some(x=>p.datasetIndex===x.datasetIndex&&p.index===x.index)),c=l(s,e),u=n?e:l(e,s);c.length&&this.updateHoverStyle(c,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const l=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(l||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:l}=this,c=s,u=this._getActiveElements(e,i,n,c),h=yN(e),m=xk(e,this._lastEvent,n,h);n&&(this._lastEvent=null,Je(l.onHover,[e,u,this],this),h&&Je(l.onClick,[e,u,this],this));const p=!dl(u,i);return(p||s)&&(this._active=u,this._updateHoverStyles(u,i,s)),this._lastEvent=m,p}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,i)}};function _g(){return qe(Dl.instances,t=>t._plugins.invalidate())}function yk(t,e,s){const{startAngle:n,x:i,y:l,outerRadius:c,innerRadius:u,options:h}=e,{borderWidth:m,borderJoinStyle:p}=h,x=Math.min(m/c,es(n-s));if(t.beginPath(),t.arc(i,l,c-m/2,n+x/2,s-x/2),u>0){const b=Math.min(m/u,es(n-s));t.arc(i,l,u+m/2,s-b/2,n+b/2,!0)}else{const b=Math.min(m/2,c*es(n-s));if(p==="round")t.arc(i,l,b,s-Ye/2,n+Ye/2,!0);else if(p==="bevel"){const w=2*b*b,j=-w*Math.cos(s+Ye/2)+i,v=-w*Math.sin(s+Ye/2)+l,N=w*Math.cos(n+Ye/2)+i,E=w*Math.sin(n+Ye/2)+l;t.lineTo(j,v),t.lineTo(N,E)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function bk(t,e,s){const{startAngle:n,pixelMargin:i,x:l,y:c,outerRadius:u,innerRadius:h}=e;let m=i/u;t.beginPath(),t.arc(l,c,u,n-m,s+m),h>i?(m=i/h,t.arc(l,c,h,s+m,n-m,!0)):t.arc(l,c,i,s+xt,n-xt),t.closePath(),t.clip()}function vk(t){return Ku(t,["outerStart","outerEnd","innerStart","innerEnd"])}function wk(t,e,s,n){const i=vk(t.options.borderRadius),l=(s-e)/2,c=Math.min(l,n*e/2),u=h=>{const m=(s-Math.min(l,h))*n/2;return Rt(h,0,Math.min(l,m))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Rt(i.innerStart,0,c),innerEnd:Rt(i.innerEnd,0,c)}}function Ur(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function gl(t,e,s,n,i,l){const{x:c,y:u,startAngle:h,pixelMargin:m,innerRadius:p}=e,x=Math.max(e.outerRadius+n+s-m,0),b=p>0?p+n+s+m:0;let w=0;const j=i-h;if(n){const re=p>0?p-n:0,$=x>0?x-n:0,J=(re+$)/2,Y=J!==0?j*J/(J+n):j;w=(j-Y)/2}const v=Math.max(.001,j*x-s/Ye)/x,N=(j-v)/2,E=h+N+w,S=i-N-w,{outerStart:C,outerEnd:D,innerStart:A,innerEnd:F}=wk(e,b,x,S-E),I=x-C,M=x-D,V=E+C/I,H=S-D/M,O=b+A,K=b+F,U=E+A/O,ne=S-F/K;if(t.beginPath(),l){const re=(V+H)/2;if(t.arc(c,u,x,V,re),t.arc(c,u,x,re,H),D>0){const ee=Ur(M,H,c,u);t.arc(ee.x,ee.y,D,H,S+xt)}const $=Ur(K,S,c,u);if(t.lineTo($.x,$.y),F>0){const ee=Ur(K,ne,c,u);t.arc(ee.x,ee.y,F,S+xt,ne+Math.PI)}const J=(S-F/b+(E+A/b))/2;if(t.arc(c,u,b,S-F/b,J,!0),t.arc(c,u,b,J,E+A/b,!0),A>0){const ee=Ur(O,U,c,u);t.arc(ee.x,ee.y,A,U+Math.PI,E-xt)}const Y=Ur(I,E,c,u);if(t.lineTo(Y.x,Y.y),C>0){const ee=Ur(I,V,c,u);t.arc(ee.x,ee.y,C,E-xt,V)}}else{t.moveTo(c,u);const re=Math.cos(V)*x+c,$=Math.sin(V)*x+u;t.lineTo(re,$);const J=Math.cos(H)*x+c,Y=Math.sin(H)*x+u;t.lineTo(J,Y)}t.closePath()}function jk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u}=e;let h=e.endAngle;if(l){gl(t,e,s,n,h,i);for(let m=0;m<l;++m)t.fill();isNaN(u)||(h=c+(u%st||st))}return gl(t,e,s,n,h,i),t.fill(),h}function Nk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u,options:h}=e,{borderWidth:m,borderJoinStyle:p,borderDash:x,borderDashOffset:b,borderRadius:w}=h,j=h.borderAlign==="inner";if(!m)return;t.setLineDash(x||[]),t.lineDashOffset=b,j?(t.lineWidth=m*2,t.lineJoin=p||"round"):(t.lineWidth=m,t.lineJoin=p||"bevel");let v=e.endAngle;if(l){gl(t,e,s,n,v,i);for(let N=0;N<l;++N)t.stroke();isNaN(u)||(v=c+(u%st||st))}j&&bk(t,e,v),h.selfJoin&&v-c>=Ye&&w===0&&p!=="miter"&&yk(t,e,v),l||(gl(t,e,s,n,v,i),t.stroke())}class _k extends an{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.getProps(["x","y"],n),{angle:l,distance:c}=r0(i,{x:e,y:s}),{startAngle:u,endAngle:h,innerRadius:m,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),b=(this.options.spacing+this.options.borderWidth)/2,w=Re(x,h-u),j=gi(l,u,h)&&u!==h,v=w>=st||j,N=tn(c,m+b,p+b);return v&&N}getCenterPoint(e){const{x:s,y:n,startAngle:i,endAngle:l,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:m}=this.options,p=(i+l)/2,x=(c+u+m+h)/2;return{x:s+Math.cos(p)*x,y:n+Math.sin(p)*x}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,i=(s.offset||0)/4,l=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>st?Math.floor(n/st):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);const h=1-Math.sin(Math.min(Ye,n||0)),m=i*h;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,jk(e,this,m,l,c),Nk(e,this,m,l,c),e.restore()}}function F0(t,e,s=e){t.lineCap=Re(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Re(s.borderDash,e.borderDash)),t.lineDashOffset=Re(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Re(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Re(s.borderWidth,e.borderWidth),t.strokeStyle=Re(s.borderColor,e.borderColor)}function kk(t,e,s){t.lineTo(s.x,s.y)}function Sk(t){return t.stepped?WN:t.tension||t.cubicInterpolationMode==="monotone"?qN:kk}function L0(t,e,s={}){const n=t.length,{start:i=0,end:l=n-1}=s,{start:c,end:u}=e,h=Math.max(i,c),m=Math.min(l,u),p=i<c&&l<c||i>u&&l>u;return{count:n,start:h,loop:e.loop,ilen:m<h&&!p?n+m-h:m-h}}function Ck(t,e,s,n){const{points:i,options:l}=e,{count:c,start:u,loop:h,ilen:m}=L0(i,s,n),p=Sk(l);let{move:x=!0,reverse:b}=n||{},w,j,v;for(w=0;w<=m;++w)j=i[(u+(b?m-w:w))%c],!j.skip&&(x?(t.moveTo(j.x,j.y),x=!1):p(t,v,j,b,l.stepped),v=j);return h&&(j=i[(u+(b?m:0))%c],p(t,v,j,b,l.stepped)),!!h}function Ek(t,e,s,n){const i=e.points,{count:l,start:c,ilen:u}=L0(i,s,n),{move:h=!0,reverse:m}=n||{};let p=0,x=0,b,w,j,v,N,E;const S=D=>(c+(m?u-D:D))%l,C=()=>{v!==N&&(t.lineTo(p,N),t.lineTo(p,v),t.lineTo(p,E))};for(h&&(w=i[S(0)],t.moveTo(w.x,w.y)),b=0;b<=u;++b){if(w=i[S(b)],w.skip)continue;const D=w.x,A=w.y,F=D|0;F===j?(A<v?v=A:A>N&&(N=A),p=(x*p+D)/++x):(C(),t.lineTo(D,A),j=F,x=0,v=N=A),E=A}C()}function ju(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Ek:Ck}function Pk(t){return t.stepped?__:t.tension||t.cubicInterpolationMode==="monotone"?k_:rr}function Ak(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),F0(t,e.options),t.stroke(i)}function Tk(t,e,s,n){const{segments:i,options:l}=e,c=ju(e);for(const u of i)F0(t,l,u.style),t.beginPath(),c(t,e,u,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Dk=typeof Path2D=="function";function Rk(t,e,s,n){Dk&&!e.options.segment?Ak(t,e,s,n):Tk(t,e,s,n)}class Rl extends an{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;g_(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=T_(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],l=this.points,c=w0(this,{property:s,start:i,end:i});if(!c.length)return;const u=[],h=Pk(n);let m,p;for(m=0,p=c.length;m<p;++m){const{start:x,end:b}=c[m],w=l[x],j=l[b];if(w===j){u.push(w);continue}const v=Math.abs((i-w[s])/(j[s]-w[s])),N=h(w,j,v,n.stepped);N[s]=e[s],u.push(N)}return u.length===1?u[0]:u}pathSegment(e,s,n){return ju(this)(e,this,s,n)}path(e,s,n){const i=this.segments,l=ju(this);let c=this._loop;s=s||0,n=n||this.points.length-s;for(const u of i)c&=l(e,this,u,{start:s,end:s+n-1});return!!c}draw(e,s,n,i){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),Rk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function kg(t,e,s,n){const i=t.options,{[s]:l}=t.getProps([s],n);return Math.abs(e-l)<i.radius+i.hitRadius}class Mk extends an{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.options,{x:l,y:c}=this.getProps(["x","y"],n);return Math.pow(e-l,2)+Math.pow(s-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return kg(this,e,"x",s)}inYRange(e,s){return kg(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!xi(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,bu(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function O0(t,e){const{x:s,y:n,base:i,width:l,height:c}=t.getProps(["x","y","base","width","height"],e);let u,h,m,p,x;return t.horizontal?(x=c/2,u=Math.min(s,i),h=Math.max(s,i),m=n-x,p=n+x):(x=l/2,u=s-x,h=s+x,m=Math.min(n,i),p=Math.max(n,i)),{left:u,top:m,right:h,bottom:p}}function Pn(t,e,s,n){return t?0:Rt(e,s,n)}function Fk(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,l=u0(n);return{t:Pn(i.top,l.top,0,s),r:Pn(i.right,l.right,0,e),b:Pn(i.bottom,l.bottom,0,s),l:Pn(i.left,l.left,0,e)}}function Lk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,l=Wr(i),c=Math.min(e,s),u=t.borderSkipped,h=n||Fe(i);return{topLeft:Pn(!h||u.top||u.left,l.topLeft,0,c),topRight:Pn(!h||u.top||u.right,l.topRight,0,c),bottomLeft:Pn(!h||u.bottom||u.left,l.bottomLeft,0,c),bottomRight:Pn(!h||u.bottom||u.right,l.bottomRight,0,c)}}function Ok(t){const e=O0(t),s=e.right-e.left,n=e.bottom-e.top,i=Fk(t,s/2,n/2),l=Lk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:l},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,l.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(i.b,i.r))}}}}function Yd(t,e,s,n){const i=e===null,l=s===null,u=t&&!(i&&l)&&O0(t,n);return u&&(i||tn(e,u.left,u.right))&&(l||tn(s,u.top,u.bottom))}function Ik(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function zk(t,e){t.rect(e.x,e.y,e.w,e.h)}function Kd(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,l=(t.x+t.w!==s.x+s.w?e:0)-n,c=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+l,h:t.h+c,radius:t.radius}}class $k extends an{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:l,outer:c}=Ok(this),u=Ik(c.radius)?fl:zk;e.save(),(c.w!==l.w||c.h!==l.h)&&(e.beginPath(),u(e,Kd(c,s,l)),e.clip(),u(e,Kd(l,-s,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,Kd(l,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return Yd(this,e,s,n)}inXRange(e,s){return Yd(this,e,null,s)}inYRange(e,s){return Yd(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(s+i)/2:s,y:l?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function Bk(t,e,s){const n=t.segments,i=t.points,l=e.points,c=[];for(const u of n){let{start:h,end:m}=u;m=Ml(h,m,i);const p=Nu(s,i[h],i[m],u.loop);if(!e.segments){c.push({source:u,target:p,start:i[h],end:i[m]});continue}const x=w0(e,p);for(const b of x){const w=Nu(s,l[b.start],l[b.end],b.loop),j=v0(u,i,w);for(const v of j)c.push({source:v,target:b,start:{[s]:Sg(p,w,"start",Math.max)},end:{[s]:Sg(p,w,"end",Math.min)}})}}return c}function Nu(t,e,s,n){if(n)return;let i=e[t],l=s[t];return t==="angle"&&(i=es(i),l=es(l)),{property:t,start:i,end:l}}function Uk(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,l=[];return e.segments.forEach(({start:c,end:u})=>{u=Ml(c,u,i);const h=i[c],m=i[u];n!==null?(l.push({x:h.x,y:n}),l.push({x:m.x,y:n})):s!==null&&(l.push({x:s,y:h.y}),l.push({x:s,y:m.y}))}),l}function Ml(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Sg(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function I0(t,e){let s=[],n=!1;return ht(t)?(n=!0,s=t):s=Uk(t,e),s.length?new Rl({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Cg(t){return t&&t.fill!==!1}function Hk(t,e,s){let i=t[e].fill;const l=[e];let c;if(!s)return i;for(;i!==!1&&l.indexOf(i)===-1;){if(!Ft(i))return i;if(c=t[i],!c)return!1;if(c.visible)return i;l.push(i),i=c.fill}return!1}function Vk(t,e,s){const n=Kk(t);if(Fe(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Ft(i)&&Math.floor(i)===i?Wk(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Wk(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function qk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:Fe(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Yk(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:Fe(t)?n=t.value:n=e.getBaseValue(),n}function Kk(t){const e=t.options,s=e.fill;let n=Re(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Xk(t){const{scale:e,index:s,line:n}=t,i=[],l=n.segments,c=n.points,u=Gk(e,s);u.push(I0({x:null,y:e.bottom},n));for(let h=0;h<l.length;h++){const m=l[h];for(let p=m.start;p<=m.end;p++)Qk(i,c[p],u)}return new Rl({points:i,options:{}})}function Gk(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const l=n[i];if(l.index===e)break;l.hidden||s.unshift(l.dataset)}return s}function Qk(t,e,s){const n=[];for(let i=0;i<s.length;i++){const l=s[i],{first:c,last:u,point:h}=Jk(l,e,"x");if(!(!h||c&&u)){if(c)n.unshift(h);else if(t.push(h),!u)break}}t.push(...n)}function Jk(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],l=t.segments,c=t.points;let u=!1,h=!1;for(let m=0;m<l.length;m++){const p=l[m],x=c[p.start][s],b=c[p.end][s];if(tn(i,x,b)){u=i===x,h=i===b;break}}return{first:u,last:h,point:n}}class z0{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:l,radius:c}=this;return s=s||{start:0,end:st},e.arc(i,l,c,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,l=e.angle;return{x:s+Math.cos(l)*i,y:n+Math.sin(l)*i,angle:l}}}function Zk(t){const{chart:e,fill:s,line:n}=t;if(Ft(s))return eS(e,s);if(s==="stack")return Xk(t);if(s==="shape")return!0;const i=tS(t);return i instanceof z0?i:I0(i,n)}function eS(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function tS(t){return(t.scale||{}).getPointPositionForValue?nS(t):sS(t)}function sS(t){const{scale:e={},fill:s}=t,n=qk(s,e);if(Ft(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function nS(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,l=n.reverse?e.max:e.min,c=Yk(s,e,l),u=[];if(n.grid.circular){const h=e.getPointPositionForValue(0,l);return new z0({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(c)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,c));return u}function Xd(t,e,s){const n=Zk(e),{chart:i,index:l,line:c,scale:u,axis:h}=e,m=c.options,p=m.fill,x=m.backgroundColor,{above:b=x,below:w=x}=p||{},j=i.getDatasetMeta(l),v=j0(i,j);n&&c.points.length&&(Cl(t,s),rS(t,{line:c,target:n,above:b,below:w,area:s,scale:u,axis:h,clip:v}),El(t))}function rS(t,e){const{line:s,target:n,above:i,below:l,area:c,scale:u,clip:h}=e,m=s._loop?"angle":e.axis;t.save();let p=l;l!==i&&(m==="x"?(Eg(t,n,c.top),Gd(t,{line:s,target:n,color:i,scale:u,property:m,clip:h}),t.restore(),t.save(),Eg(t,n,c.bottom)):m==="y"&&(Pg(t,n,c.left),Gd(t,{line:s,target:n,color:l,scale:u,property:m,clip:h}),t.restore(),t.save(),Pg(t,n,c.right),p=i)),Gd(t,{line:s,target:n,color:p,scale:u,property:m,clip:h}),t.restore()}function Eg(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:m}=u,p=i[h],x=i[Ml(h,m,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(p.x,s),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(x.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Pg(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:m}=u,p=i[h],x=i[Ml(h,m,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(s,p.y),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(s,x.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function Gd(t,e){const{line:s,target:n,property:i,color:l,scale:c,clip:u}=e,h=Bk(s,n,i);for(const{source:m,target:p,start:x,end:b}of h){const{style:{backgroundColor:w=l}={}}=m,j=n!==!0;t.save(),t.fillStyle=w,aS(t,c,u,j&&Nu(i,x,b)),t.beginPath();const v=!!s.pathSegment(t,m);let N;if(j){v?t.closePath():Ag(t,n,b,i);const E=!!n.pathSegment(t,p,{move:v,reverse:!0});N=v&&E,N||Ag(t,n,x,i)}t.closePath(),t.fill(N?"evenodd":"nonzero"),t.restore()}}function aS(t,e,s,n){const i=e.chart.chartArea,{property:l,start:c,end:u}=n||{};if(l==="x"||l==="y"){let h,m,p,x;l==="x"?(h=c,m=i.top,p=u,x=i.bottom):(h=i.left,m=c,p=i.right,x=u),t.beginPath(),s&&(h=Math.max(h,s.left),p=Math.min(p,s.right),m=Math.max(m,s.top),x=Math.min(x,s.bottom)),t.rect(h,m,p-h,x-m),t.clip()}}function Ag(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var iS={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let l,c,u,h;for(c=0;c<n;++c)l=t.getDatasetMeta(c),u=l.dataset,h=null,u&&u.options&&u instanceof Rl&&(h={visible:t.isDatasetVisible(c),index:c,fill:Vk(u,c,n),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:u}),l.$filler=h,i.push(h);for(c=0;c<n;++c)h=i[c],!(!h||h.fill===!1)&&(h.fill=Hk(i,c,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let c=i.length-1;c>=0;--c){const u=i[c].$filler;u&&(u.line.updateControlPoints(l,u.axis),n&&u.fill&&Xd(t.ctx,u,l))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const l=n[i].$filler;Cg(l)&&Xd(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Cg(n)||s.drawTime!=="beforeDatasetDraw"||Xd(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Tg=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},oS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Dg extends an{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Je(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Mt(n.font),l=i.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=Tg(n,l);let m,p;s.font=i.string,this.isHorizontal()?(m=this.maxWidth,p=this._fitRows(c,l,u,h)+10):(p=this.maxHeight,m=this._fitCols(c,i,u,h)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:l,maxWidth:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.lineWidths=[0],p=i+u;let x=e;l.textAlign="left",l.textBaseline="middle";let b=-1,w=-p;return this.legendItems.forEach((j,v)=>{const N=n+s/2+l.measureText(j.text).width;(v===0||m[m.length-1]+N+2*u>c)&&(x+=p,m[m.length-(v>0?0:1)]=0,w+=p,b++),h[v]={left:0,top:w,row:b,width:N,height:i},m[m.length-1]+=N+u}),x}_fitCols(e,s,n,i){const{ctx:l,maxHeight:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.columnSizes=[],p=c-e;let x=u,b=0,w=0,j=0,v=0;return this.legendItems.forEach((N,E)=>{const{itemWidth:S,itemHeight:C}=lS(n,s,l,N,i);E>0&&w+C+2*u>p&&(x+=b+u,m.push({width:b,height:w}),j+=b+u,v++,b=w=0),h[E]={left:j,top:w,col:v,width:S,height:C},b=Math.max(b,S),w+=C+u}),x+=b,m.push({width:b,height:w}),x}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:l}}=this,c=qr(l,this.left,this.width);if(this.isHorizontal()){let u=0,h=Tt(n,this.left+i,this.right-this.lineWidths[u]);for(const m of s)u!==m.row&&(u=m.row,h=Tt(n,this.left+i,this.right-this.lineWidths[u])),m.top+=this.top+e+i,m.left=c.leftForLtr(c.x(h),m.width),h+=m.width+i}else{let u=0,h=Tt(n,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const m of s)m.col!==u&&(u=m.col,h=Tt(n,this.top+e+i,this.bottom-this.columnSizes[u].height)),m.top=h,m.left+=this.left+i,m.left=c.leftForLtr(c.x(m.left),m.width),h+=m.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Cl(e,this),this._draw(),El(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:l,labels:c}=e,u=ot.color,h=qr(e.rtl,this.left,this.width),m=Mt(c.font),{padding:p}=c,x=m.size,b=x/2;let w;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=m.string;const{boxWidth:j,boxHeight:v,itemHeight:N}=Tg(c,x),E=function(F,I,M){if(isNaN(j)||j<=0||isNaN(v)||v<0)return;i.save();const V=Re(M.lineWidth,1);if(i.fillStyle=Re(M.fillStyle,u),i.lineCap=Re(M.lineCap,"butt"),i.lineDashOffset=Re(M.lineDashOffset,0),i.lineJoin=Re(M.lineJoin,"miter"),i.lineWidth=V,i.strokeStyle=Re(M.strokeStyle,u),i.setLineDash(Re(M.lineDash,[])),c.usePointStyle){const H={radius:v*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:V},O=h.xPlus(F,j/2),K=I+b;d0(i,H,O,K,c.pointStyleWidth&&j)}else{const H=I+Math.max((x-v)/2,0),O=h.leftForLtr(F,j),K=Wr(M.borderRadius);i.beginPath(),Object.values(K).some(U=>U!==0)?fl(i,{x:O,y:H,w:j,h:v,radius:K}):i.rect(O,H,j,v),i.fill(),V!==0&&i.stroke()}i.restore()},S=function(F,I,M){yi(i,M.text,F,I+N/2,m,{strikethrough:M.hidden,textAlign:h.textAlign(M.textAlign)})},C=this.isHorizontal(),D=this._computeTitleHeight();C?w={x:Tt(l,this.left+p,this.right-n[0]),y:this.top+p+D,line:0}:w={x:this.left+p,y:Tt(l,this.top+D+p,this.bottom-s[0].height),line:0},x0(this.ctx,e.textDirection);const A=N+p;this.legendItems.forEach((F,I)=>{i.strokeStyle=F.fontColor,i.fillStyle=F.fontColor;const M=i.measureText(F.text).width,V=h.textAlign(F.textAlign||(F.textAlign=c.textAlign)),H=j+b+M;let O=w.x,K=w.y;h.setWidth(this.width),C?I>0&&O+H+p>this.right&&(K=w.y+=A,w.line++,O=w.x=Tt(l,this.left+p,this.right-n[w.line])):I>0&&K+A>this.bottom&&(O=w.x=O+s[w.line].width+p,w.line++,K=w.y=Tt(l,this.top+D+p,this.bottom-s[w.line].height));const U=h.x(O);if(E(U,K,F),O=DN(V,O+j+b,C?O+H:this.right,e.rtl),S(h.x(O),K,F),C)w.x+=H+p;else if(typeof F.text!="string"){const ne=m.lineHeight;w.y+=$0(F,ne)+p}else w.y+=A}),y0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Mt(s.font),i=fs(s.padding);if(!s.display)return;const l=qr(e.rtl,this.left,this.width),c=this.ctx,u=s.position,h=n.size/2,m=i.top+h;let p,x=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+m,x=Tt(e.align,x,this.right-b);else{const j=this.columnSizes.reduce((v,N)=>Math.max(v,N.height),0);p=m+Tt(e.align,this.top,this.bottom-j-e.labels.padding-this._computeTitleHeight())}const w=Tt(u,x,x+b);c.textAlign=l.textAlign(Wu(u)),c.textBaseline="middle",c.strokeStyle=s.color,c.fillStyle=s.color,c.font=n.string,yi(c,s.text,w,p,n)}_computeTitleHeight(){const e=this.options.title,s=Mt(e.font),n=fs(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,l;if(tn(e,this.left,this.right)&&tn(s,this.top,this.bottom)){for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(i=l[n],tn(e,i.left,i.left+i.width)&&tn(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!uS(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,l=oS(i,n);i&&!l&&Je(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!l&&Je(s.onHover,[e,n,this],this)}else n&&Je(s.onClick,[e,n,this],this)}}function lS(t,e,s,n,i){const l=cS(n,t,e,s),c=dS(i,n,e.lineHeight);return{itemWidth:l,itemHeight:c}}function cS(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((l,c)=>l.length>c.length?l:c)),e+s.size/2+n.measureText(i).width}function dS(t,e,s){let n=t;return typeof e.text!="string"&&(n=$0(e,s)),n}function $0(t,e){const s=t.text?t.text.length:0;return e*s}function uS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var hS={id:"legend",_element:Dg,start(t,e,s){const n=t.legend=new Dg({ctx:t.ctx,options:s,chart:t});hs.configure(t,n,s),hs.addBox(t,n)},stop(t){hs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;hs.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:l,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const m=h.controller.getStyle(s?0:void 0),p=fs(m.borderWidth);return{text:e[h.index].label,fillStyle:m.backgroundColor,fontColor:l,hidden:!h.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:m.borderColor,pointStyle:n||m.pointStyle,rotation:m.rotation,textAlign:i||m.textAlign,borderRadius:c&&(u||m.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class B0 extends an{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=ht(n.text)?n.text.length:1;this._padding=fs(n.padding);const l=i*Mt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:l,options:c}=this,u=c.align;let h=0,m,p,x;return this.isHorizontal()?(p=Tt(u,n,l),x=s+e,m=l-n):(c.position==="left"?(p=n+e,x=Tt(u,i,s),h=Ye*-.5):(p=l-e,x=Tt(u,s,i),h=Ye*.5),m=i-s),{titleX:p,titleY:x,maxWidth:m,rotation:h}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Mt(s.font),l=n.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:h,rotation:m}=this._drawArgs(l);yi(e,s.text,0,0,n,{color:s.color,maxWidth:h,rotation:m,textAlign:Wu(s.align),textBaseline:"middle",translation:[c,u]})}}function fS(t,e){const s=new B0({ctx:t.ctx,options:e,chart:t});hs.configure(t,s,e),hs.addBox(t,s),t.titleBlock=s}var mS={id:"title",_element:B0,start(t,e,s){fS(t,s)},stop(t){const e=t.titleBlock;hs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;hs.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Za={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,l=0;for(e=0,s=t.length;e<s;++e){const u=t[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();n.add(h.x),i+=h.y,++l}}return l===0||n.size===0?!1:{x:[...n].reduce((u,h)=>u+h)/n.size,y:i/l}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,l,c,u;for(l=0,c=t.length;l<c;++l){const h=t[l].element;if(h&&h.hasValue()){const m=h.getCenterPoint(),p=xu(e,m);p<i&&(i=p,u=h)}}if(u){const h=u.tooltipPosition();s=h.x,n=h.y}return{x:s,y:n}}};function Ms(t,e){return e&&(ht(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Js(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pS(t,e){const{element:s,datasetIndex:n,index:i}=e,l=t.getDatasetMeta(n).controller,{label:c,value:u}=l.getLabelAndValue(i);return{chart:t,label:c,parsed:l.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:u,dataset:l.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Rg(t,e){const s=t.chart.ctx,{body:n,footer:i,title:l}=t,{boxWidth:c,boxHeight:u}=e,h=Mt(e.bodyFont),m=Mt(e.titleFont),p=Mt(e.footerFont),x=l.length,b=i.length,w=n.length,j=fs(e.padding);let v=j.height,N=0,E=n.reduce((D,A)=>D+A.before.length+A.lines.length+A.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,x&&(v+=x*m.lineHeight+(x-1)*e.titleSpacing+e.titleMarginBottom),E){const D=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;v+=w*D+(E-w)*h.lineHeight+(E-1)*e.bodySpacing}b&&(v+=e.footerMarginTop+b*p.lineHeight+(b-1)*e.footerSpacing);let S=0;const C=function(D){N=Math.max(N,s.measureText(D).width+S)};return s.save(),s.font=m.string,qe(t.title,C),s.font=h.string,qe(t.beforeBody.concat(t.afterBody),C),S=e.displayColors?c+2+e.boxPadding:0,qe(n,D=>{qe(D.before,C),qe(D.lines,C),qe(D.after,C)}),S=0,s.font=p.string,qe(t.footer,C),s.restore(),N+=j.width,{width:N,height:v}}function gS(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function xS(t,e,s,n){const{x:i,width:l}=n,c=s.caretSize+s.caretPadding;if(t==="left"&&i+l+c>e.width||t==="right"&&i-l-c<0)return!0}function yS(t,e,s,n){const{x:i,width:l}=s,{width:c,chartArea:{left:u,right:h}}=t;let m="center";return n==="center"?m=i<=(u+h)/2?"left":"right":i<=l/2?m="left":i>=c-l/2&&(m="right"),xS(m,t,e,s)&&(m="center"),m}function Mg(t,e,s){const n=s.yAlign||e.yAlign||gS(t,s);return{xAlign:s.xAlign||e.xAlign||yS(t,e,s,n),yAlign:n}}function bS(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function vS(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function Fg(t,e,s,n){const{caretSize:i,caretPadding:l,cornerRadius:c}=t,{xAlign:u,yAlign:h}=s,m=i+l,{topLeft:p,topRight:x,bottomLeft:b,bottomRight:w}=Wr(c);let j=bS(e,u);const v=vS(e,h,m);return h==="center"?u==="left"?j+=m:u==="right"&&(j-=m):u==="left"?j-=Math.max(p,b)+i:u==="right"&&(j+=Math.max(x,w)+i),{x:Rt(j,0,n.width-e.width),y:Rt(v,0,n.height-e.height)}}function Xo(t,e,s){const n=fs(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Lg(t){return Ms([],Js(t))}function wS(t,e,s){return pr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Og(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const U0={beforeTitle:Gs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Gs,beforeBody:Gs,beforeLabel:Gs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ue(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Gs,afterBody:Gs,beforeFooter:Gs,footer:Gs,afterFooter:Gs};function Vt(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?U0[e].call(s,n):i}class Ig extends an{static positioners=Za;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,l=new N0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=wS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=Vt(n,"beforeTitle",this,e),l=Vt(n,"title",this,e),c=Vt(n,"afterTitle",this,e);let u=[];return u=Ms(u,Js(i)),u=Ms(u,Js(l)),u=Ms(u,Js(c)),u}getBeforeBody(e,s){return Lg(Vt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return qe(e,l=>{const c={before:[],lines:[],after:[]},u=Og(n,l);Ms(c.before,Js(Vt(u,"beforeLabel",this,l))),Ms(c.lines,Vt(u,"label",this,l)),Ms(c.after,Js(Vt(u,"afterLabel",this,l))),i.push(c)}),i}getAfterBody(e,s){return Lg(Vt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=Vt(n,"beforeFooter",this,e),l=Vt(n,"footer",this,e),c=Vt(n,"afterFooter",this,e);let u=[];return u=Ms(u,Js(i)),u=Ms(u,Js(l)),u=Ms(u,Js(c)),u}_createItems(e){const s=this._active,n=this.chart.data,i=[],l=[],c=[];let u=[],h,m;for(h=0,m=s.length;h<m;++h)u.push(pS(this.chart,s[h]));return e.filter&&(u=u.filter((p,x,b)=>e.filter(p,x,b,n))),e.itemSort&&(u=u.sort((p,x)=>e.itemSort(p,x,n))),qe(u,p=>{const x=Og(e.callbacks,p);i.push(Vt(x,"labelColor",this,p)),l.push(Vt(x,"labelPointStyle",this,p)),c.push(Vt(x,"labelTextColor",this,p))}),this.labelColors=i,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=u,u}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let l,c=[];if(!i.length)this.opacity!==0&&(l={opacity:0});else{const u=Za[n.position].call(this,i,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const h=this._size=Rg(this,n),m=Object.assign({},u,h),p=Mg(this.chart,n,m),x=Fg(n,m,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,l={opacity:1,x:x.x,y:x.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const l=this.getCaretPosition(e,n,i);s.lineTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineTo(l.x3,l.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:l}=this,{caretSize:c,cornerRadius:u}=n,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:x}=Wr(u),{x:b,y:w}=e,{width:j,height:v}=s;let N,E,S,C,D,A;return l==="center"?(D=w+v/2,i==="left"?(N=b,E=N-c,C=D+c,A=D-c):(N=b+j,E=N+c,C=D-c,A=D+c),S=N):(i==="left"?E=b+Math.max(h,p)+c:i==="right"?E=b+j-Math.max(m,x)-c:E=this.caretX,l==="top"?(C=w,D=C-c,N=E-c,S=E+c):(C=w+v,D=C+c,N=E+c,S=E-c),A=C),{x1:N,x2:E,x3:S,y1:C,y2:D,y3:A}}drawTitle(e,s,n){const i=this.title,l=i.length;let c,u,h;if(l){const m=qr(n.rtl,this.x,this.width);for(e.x=Xo(this,n.titleAlign,n),s.textAlign=m.textAlign(n.titleAlign),s.textBaseline="middle",c=Mt(n.titleFont),u=n.titleSpacing,s.fillStyle=n.titleColor,s.font=c.string,h=0;h<l;++h)s.fillText(i[h],m.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,h+1===l&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,s,n,i,l){const c=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:h,boxWidth:m}=l,p=Mt(l.bodyFont),x=Xo(this,"left",l),b=i.x(x),w=h<p.lineHeight?(p.lineHeight-h)/2:0,j=s.y+w;if(l.usePointStyle){const v={radius:Math.min(m,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},N=i.leftForLtr(b,m)+m/2,E=j+h/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,bu(e,v,N,E),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,bu(e,v,N,E)}else{e.lineWidth=Fe(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const v=i.leftForLtr(b,m),N=i.leftForLtr(i.xPlus(b,1),m-2),E=Wr(c.borderRadius);Object.values(E).some(S=>S!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,fl(e,{x:v,y:j,w:m,h,radius:E}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),fl(e,{x:N,y:j+1,w:m-2,h:h-2,radius:E}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(v,j,m,h),e.strokeRect(v,j,m,h),e.fillStyle=c.backgroundColor,e.fillRect(N,j+1,m-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:l,bodyAlign:c,displayColors:u,boxHeight:h,boxWidth:m,boxPadding:p}=n,x=Mt(n.bodyFont);let b=x.lineHeight,w=0;const j=qr(n.rtl,this.x,this.width),v=function(M){s.fillText(M,j.x(e.x+w),e.y+b/2),e.y+=b+l},N=j.textAlign(c);let E,S,C,D,A,F,I;for(s.textAlign=c,s.textBaseline="middle",s.font=x.string,e.x=Xo(this,N,n),s.fillStyle=n.bodyColor,qe(this.beforeBody,v),w=u&&N!=="right"?c==="center"?m/2+p:m+2+p:0,D=0,F=i.length;D<F;++D){for(E=i[D],S=this.labelTextColors[D],s.fillStyle=S,qe(E.before,v),C=E.lines,u&&C.length&&(this._drawColorBox(s,e,D,j,n),b=Math.max(x.lineHeight,h)),A=0,I=C.length;A<I;++A)v(C[A]),b=x.lineHeight;qe(E.after,v)}w=0,b=x.lineHeight,qe(this.afterBody,v),e.y-=l}drawFooter(e,s,n){const i=this.footer,l=i.length;let c,u;if(l){const h=qr(n.rtl,this.x,this.width);for(e.x=Xo(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=h.textAlign(n.footerAlign),s.textBaseline="middle",c=Mt(n.footerFont),s.fillStyle=n.footerColor,s.font=c.string,u=0;u<l;++u)s.fillText(i[u],h.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:l,yAlign:c}=this,{x:u,y:h}=e,{width:m,height:p}=n,{topLeft:x,topRight:b,bottomLeft:w,bottomRight:j}=Wr(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(u+x,h),c==="top"&&this.drawCaret(e,s,n,i),s.lineTo(u+m-b,h),s.quadraticCurveTo(u+m,h,u+m,h+b),c==="center"&&l==="right"&&this.drawCaret(e,s,n,i),s.lineTo(u+m,h+p-j),s.quadraticCurveTo(u+m,h+p,u+m-j,h+p),c==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(u+w,h+p),s.quadraticCurveTo(u,h+p,u,h+p-w),c==="center"&&l==="left"&&this.drawCaret(e,s,n,i),s.lineTo(u,h+x),s.quadraticCurveTo(u,h,u+x,h),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,l=n&&n.y;if(i||l){const c=Za[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=Rg(this,e),h=Object.assign({},c,this._size),m=Mg(s,e,h),p=Fg(e,h,m,s);(i._to!==p.x||l._to!==p.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},l={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=fs(s.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(l,e,i,s),x0(e,s.textDirection),l.y+=c.top,this.drawTitle(l,e,s),this.drawBody(l,e,s),this.drawFooter(l,e,s),y0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:u,index:h})=>{const m=this.chart.getDatasetMeta(u);if(!m)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:m.data[h],index:h}}),l=!dl(n,i),c=this._positionChanged(i,s);(l||c)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,l=this._active||[],c=this._getActiveElements(e,l,s,n),u=this._positionChanged(c,e),h=s||!dl(c,l)||u;return h&&(this._active=c,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),h}_getActiveElements(e,s,n,i){const l=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,l.mode,l,n);return l.reverse&&c.reverse(),c}_positionChanged(e,s){const{caretX:n,caretY:i,options:l}=this,c=Za[l.position].call(this,e,s);return c!==!1&&(n!==c.x||i!==c.y)}}var jS={id:"tooltip",_element:Ig,positioners:Za,afterInit(t,e,s){s&&(t.tooltip=new Ig({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:U0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NS=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function _S(t,e,s,n){const i=t.indexOf(e);if(i===-1)return NS(t,e,s,n);const l=t.lastIndexOf(e);return i!==l?s:i}const kS=(t,e)=>t===null?null:Rt(Math.round(t),0,e);function zg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class SS extends na{static id="category";static defaults={ticks:{callback:zg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:l}of s)n[i]===l&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(Ue(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:_S(n,e,Re(s,e),this._addedLabels),kS(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let l=this.getLabels();l=e===0&&s===l.length-1?l:l.slice(e,s+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=s;c++)i.push({value:c});return i}getLabelForValue(e){return zg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CS(t,e){const s=[],{bounds:i,step:l,min:c,max:u,precision:h,count:m,maxTicks:p,maxDigits:x,includeBounds:b}=t,w=l||1,j=p-1,{min:v,max:N}=e,E=!Ue(c),S=!Ue(u),C=!Ue(m),D=(N-v)/(x+1);let A=Fp((N-v)/j/w)*w,F,I,M,V;if(A<1e-14&&!E&&!S)return[{value:v},{value:N}];V=Math.ceil(N/A)-Math.floor(v/A),V>j&&(A=Fp(V*A/j/w)*w),Ue(h)||(F=Math.pow(10,h),A=Math.ceil(A*F)/F),i==="ticks"?(I=Math.floor(v/A)*A,M=Math.ceil(N/A)*A):(I=v,M=N),E&&S&&l&&NN((u-c)/l,A/1e3)?(V=Math.round(Math.min((u-c)/A,p)),A=(u-c)/V,I=c,M=u):C?(I=E?c:I,M=S?u:M,V=m-1,A=(M-I)/V):(V=(M-I)/A,ni(V,Math.round(V),A/1e3)?V=Math.round(V):V=Math.ceil(V));const H=Math.max(Lp(A),Lp(I));F=Math.pow(10,Ue(h)?H:h),I=Math.round(I*F)/F,M=Math.round(M*F)/F;let O=0;for(E&&(b&&I!==c?(s.push({value:c}),I<c&&O++,ni(Math.round((I+O*A)*F)/F,c,$g(c,D,t))&&O++):I<c&&O++);O<V;++O){const K=Math.round((I+O*A)*F)/F;if(S&&K>u)break;s.push({value:K})}return S&&b&&M!==u?s.length&&ni(s[s.length-1].value,u,$g(u,D,t))?s[s.length-1].value=u:s.push({value:u}):(!S||M===u)&&s.push({value:M}),s}function $g(t,e,{horizontal:s,minRotation:n}){const i=en(n),l=(s?Math.sin(i):Math.cos(i))||.001,c=.75*e*(""+t).length;return Math.min(e/l,c)}class ES extends na{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ue(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:l}=this;const c=h=>i=s?i:h,u=h=>l=n?l:h;if(e){const h=Is(i),m=Is(l);h<0&&m<0?u(0):h>0&&m>0&&c(0)}if(i===l){let h=l===0?1:Math.abs(l*.05);u(l+h),e||c(i-h)}this.min=i,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},l=this._range||this,c=CS(i,l);return e.bounds==="ticks"&&_N(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Yu(e,this.chart.options.locale,this.options.ticks.format)}}class PS extends ES{static id="linear";static defaults={ticks:{callback:c0.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ft(e)?e:0,this.max=Ft(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=en(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,l.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Fl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qt=Object.keys(Fl);function Bg(t,e){return t-e}function Ug(t,e){if(Ue(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:l}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),Ft(c)||(c=typeof n=="string"?s.parse(c,n):s.parse(c)),c===null?null:(i&&(c=i==="week"&&(pi(l)||l===!0)?s.startOf(c,"isoWeek",l):s.startOf(c,i)),+c)}function Hg(t,e,s,n){const i=qt.length;for(let l=qt.indexOf(t);l<i-1;++l){const c=Fl[qt[l]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((s-e)/(u*c.size))<=n)return qt[l]}return qt[i-1]}function AS(t,e,s,n,i){for(let l=qt.length-1;l>=qt.indexOf(s);l--){const c=qt[l];if(Fl[c].common&&t._adapter.diff(i,n,c)>=e-1)return c}return qt[s?qt.indexOf(s):0]}function TS(t){for(let e=qt.indexOf(t)+1,s=qt.length;e<s;++e)if(Fl[qt[e]].common)return qt[e]}function Vg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=Vu(s,e),l=s[n]>=e?s[n]:s[i];t[l]=!0}}function DS(t,e,s,n){const i=t._adapter,l=+i.startOf(e[0].value,n),c=e[e.length-1].value;let u,h;for(u=l;u<=c;u=+i.add(u,1,n))h=s[u],h>=0&&(e[h].major=!0);return e}function Wg(t,e,s){const n=[],i={},l=e.length;let c,u;for(c=0;c<l;++c)u=e[c],i[u]=c,n.push({value:u,major:!1});return l===0||!s?n:DS(t,n,i,s)}class qg extends na{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new c2._date(e.adapters.date);i.init(s),si(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Ug(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:l,minDefined:c,maxDefined:u}=this.getUserBounds();function h(m){!c&&!isNaN(m.min)&&(i=Math.min(i,m.min)),!u&&!isNaN(m.max)&&(l=Math.max(l,m.max))}(!c||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=Ft(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),l=Ft(l)&&!isNaN(l)?l:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,l-1),this.max=Math.max(i+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const l=this.min,c=this.max,u=PN(i,l,c);return this._unit=s.unit||(n.autoSkip?Hg(s.minUnit,this.min,this.max,this._getLabelCapacity(l)):AS(this,u.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:TS(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),Wg(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,l;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?n=l:n=(l-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;s=Rt(s,0,c),n=Rt(n,0,c),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,l=i.time,c=l.unit||Hg(l.minUnit,s,n,this._getLabelCapacity(s)),u=Re(i.ticks.stepSize,1),h=c==="week"?l.isoWeekday:!1,m=pi(h)||h===!0,p={};let x=s,b,w;if(m&&(x=+e.startOf(x,"isoWeek",h)),x=+e.startOf(x,m?"day":c),e.diff(n,s,c)>1e5*u)throw new Error(s+" and "+n+" are too far apart with stepSize of "+u+" "+c);const j=i.ticks.source==="data"&&this.getDataTimestamps();for(b=x,w=0;b<n;b=+e.add(b,u,c),w++)Vg(p,b,j);return(b===n||i.bounds==="ticks"||w===1)&&Vg(p,b,j),Object.keys(p).sort(Bg).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,l=this._unit,c=s||i[l];return this._adapter.format(e,c)}_tickFormatFunction(e,s,n,i){const l=this.options,c=l.ticks.callback;if(c)return Je(c,[e,s,n],this);const u=l.time.displayFormats,h=this._unit,m=this._majorUnit,p=h&&u[h],x=m&&u[m],b=n[s],w=m&&x&&b&&b.major;return this._adapter.format(e,i||(w?x:p))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=en(this.isHorizontal()?s.maxRotation:s.minRotation),l=Math.cos(i),c=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:n*l+u*c,h:n*c+u*l}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,l=this._tickFormatFunction(e,0,Wg(this,[e],this._majorUnit),i),c=this._getLabelSize(l),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(Ug(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return i0(e.sort(Bg))}}function Go(t,e,s){let n=0,i=t.length-1,l,c,u,h;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=ir(t,"pos",e)),{pos:l,time:u}=t[n],{pos:c,time:h}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=ir(t,"time",e)),{time:l,pos:u}=t[n],{time:c,pos:h}=t[i]);const m=c-l;return m?u+(h-u)*(e-l)/m:u}class KC extends qg{static id="timeseries";static defaults=qg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Go(s,this.min),this._tableRange=Go(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],l=[];let c,u,h,m,p;for(c=0,u=e.length;c<u;++c)m=e[c],m>=s&&m<=n&&i.push(m);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(c=0,u=i.length;c<u;++c)p=i[c+1],h=i[c-1],m=i[c],Math.round((p+h)/2)!==m&&l.push({time:m,pos:c/(u-1)});return l}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,l)=>i-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Go(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Go(this._table,n*this._tableRange+this._minPos,!0)}}const H0="label";function Yg(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function RS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function V0(t,e){t.labels=e}function W0(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H0;const n=[];t.datasets=e.map(i=>{const l=t.datasets.find(c=>c[s]===i[s]);return!l||!i.data||n.includes(l)?{...i}:(n.push(l),Object.assign(l,i),l)})}function MS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H0;const s={labels:[],datasets:[]};return V0(s,t.labels),W0(s,t.datasets,e),s}function FS(t,e){const{height:s=150,width:n=300,redraw:i=!1,datasetIdKey:l,type:c,data:u,options:h,plugins:m=[],fallbackContent:p,updateMode:x,...b}=t,w=_.useRef(null),j=_.useRef(null),v=()=>{w.current&&(j.current=new Dl(w.current,{type:c,data:MS(u,l),options:h&&{...h},plugins:m}),Yg(e,j.current))},N=()=>{Yg(e,null),j.current&&(j.current.destroy(),j.current=null)};return _.useEffect(()=>{!i&&j.current&&h&&RS(j.current,h)},[i,h]),_.useEffect(()=>{!i&&j.current&&V0(j.current.config.data,u.labels)},[i,u.labels]),_.useEffect(()=>{!i&&j.current&&u.datasets&&W0(j.current.config.data,u.datasets,l)},[i,u.datasets]),_.useEffect(()=>{j.current&&(i?(N(),setTimeout(v)):j.current.update(x))},[i,h,u.labels,u.datasets,x]),_.useEffect(()=>{j.current&&(N(),setTimeout(v))},[c]),_.useEffect(()=>(v(),()=>N()),[]),vi.createElement("canvas",{ref:w,role:"img",height:s,width:n,...b},p)}const LS=_.forwardRef(FS);function th(t,e){return Dl.register(e),_.forwardRef((s,n)=>vi.createElement(LS,{...s,ref:n,type:t}))}const OS=th("line",l2),IS=th("bar",a2),zS=th("doughnut",o2);Dl.register(SS,PS,Mk,Rl,$k,mS,jS,hS,_k,iS);const cr={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",cornerRadius:8,displayColors:!1}}},$S=({data:t,loading:e=!1,title:s="Performance Trends"})=>{const n=_.useMemo(()=>!t||!t.length?null:{labels:t.map(c=>new Date(c.date||c.date_group||c.report_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Leads",data:t.map(c=>Number(c.leads||c.daily_leads||0)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"Spent (₹)",data:t.map(c=>Number(c.spent||c.daily_spent||0)),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,yAxisID:"y1"}]},[t]),i=_.useMemo(()=>({...cr,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Leads"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Spent (₹)"},grid:{drawOnChartArea:!1}}}}),[]);return e?a.jsx(zu,{height:"h-80"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80",children:a.jsx(OS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No data available"})]})},BS=({data:t,loading:e=!1,title:s="Top Campaigns"})=>{const n=_.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,10);return{labels:l.map(c=>{const u=c.campaign_name||c.name||`Campaign ${c.campaign_id}`;return u.length>20?`${u.substring(0,20)}...`:u}),datasets:[{label:"Leads",data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(168, 85, 247)"],borderWidth:1}]}},[t]),i=_.useMemo(()=>({...cr,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Leads"}},x:{title:{display:!0,text:"Campaigns"}}},plugins:{...cr.plugins,tooltip:{...cr.plugins.tooltip,callbacks:{title:l=>{const c=l[0].dataIndex;return t?.[c]?.campaign_name||`Campaign ${t?.[c]?.campaign_id}`},label:l=>{const c=l.dataIndex,u=t?.[c];return u?[`Leads: ${l.formattedValue}`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`CPL: ₹${Number(u.avgCostPerLead||u.avg_cost_per_lead||u.cost_per_lead||0).toFixed(2)}`,`Brand: ${u.brand||"Unknown"}`]:l.formattedValue}}}}}),[t]);return e?a.jsx(zu,{height:"h-96"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-96",children:a.jsx(IS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"No campaign data available"})]})},US=({data:t,loading:e=!1,title:s="Brand Performance"})=>{const n=_.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,8);return{labels:l.map(c=>c.brand||"Unknown"),datasets:[{data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)"],borderWidth:2}]}},[t]),i=_.useMemo(()=>({...cr,cutout:"60%",plugins:{...cr.plugins,tooltip:{...cr.plugins.tooltip,callbacks:{label:l=>{const c=l.dataIndex,u=t?.[c];if(!u)return l.formattedValue;const h=(l.parsed/l.dataset.data.reduce((m,p)=>m+p,0)*100).toFixed(1);return[`${u.brand||"Unknown"}: ${l.formattedValue} leads (${h}%)`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`Campaigns: ${u.campaignsCount||u.campaigns_count||0}`]}}}}}),[t]);return e?a.jsx(zu,{height:"h-80"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80",children:a.jsx(zS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No brand data available"})]})};class HS{constructor(){this.cache=new Map,this.timestamps=new Map,this.defaultTTL=300*1e3}generateKey(e,s,n={}){const i=JSON.stringify(n,Object.keys(n).sort());return`${e}_${s}_${i}`}set(e,s,n=this.defaultTTL){this.cache.set(e,s),this.timestamps.set(e,Date.now()+n)}get(e){const s=this.timestamps.get(e);return!s||Date.now()>s?(this.cache.delete(e),this.timestamps.delete(e),null):this.cache.get(e)}has(e){return this.get(e)!==null}delete(e){this.cache.delete(e),this.timestamps.delete(e)}clear(){this.cache.clear(),this.timestamps.clear()}cleanup(){const e=Date.now();for(const[s,n]of this.timestamps.entries())e>n&&(this.cache.delete(s),this.timestamps.delete(s))}getStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys()),memoryUsage:this.estimateMemoryUsage()}}estimateMemoryUsage(){let e=0;for(const[s,n]of this.cache.entries())e+=s.length*2,e+=JSON.stringify(n).length*2;return e}}const Wt=new HS,VS=(t,e)=>{const s={};return Object.keys(t).forEach(n=>{typeof t[n]=="function"?s[n]=async(...i)=>{const l=i[0]||{},c=Wt.generateKey(e,n,l),u=Wt.get(c);if(u)return console.log(`[Cache] Hit for ${e}.${n}`),u;console.log(`[Cache] Miss for ${e}.${n} - fetching...`);try{const h=await t[n](...i);let m=Wt.defaultTTL;return n==="getDashboardOverview"?m=120*1e3:n==="getRecentActivities"?m=60*1e3:n.includes("Trends")&&(m=600*1e3),Wt.set(c,h,m),h}catch(h){throw console.error(`[Cache] Error fetching ${e}.${n}:`,h),h}}:s[n]=t[n]}),s},WS={all:()=>{Wt.clear(),console.log("[Cache] Cleared all dashboard cache")},overview:()=>{Array.from(Wt.cache.keys()).forEach(e=>{e.includes("getDashboardOverview")&&Wt.delete(e)}),console.log("[Cache] Cleared overview cache")},campaigns:()=>{Array.from(Wt.cache.keys()).forEach(e=>{e.includes("Campaign")&&Wt.delete(e)}),console.log("[Cache] Cleared campaign cache")},brands:()=>{Array.from(Wt.cache.keys()).forEach(e=>{e.includes("Brand")&&Wt.delete(e)}),console.log("[Cache] Cleared brand cache")},activities:()=>{Array.from(Wt.cache.keys()).forEach(e=>{e.includes("Activities")&&Wt.delete(e)}),console.log("[Cache] Cleared activities cache")}},qS=async t=>{console.log("[Cache] Preloading critical dashboard data...");const e=[t.getDashboardOverview(),t.getRecentActivities({limit:10}),t.getCampaignPerformance({limit:5})];try{await Promise.allSettled(e),console.log("[Cache] Critical data preloaded successfully")}catch(s){console.warn("[Cache] Some preload operations failed:",s)}};setInterval(()=>{Wt.cleanup(),console.log("[Cache] Cleaned up expired entries")},600*1e3);const YS=()=>{const t=new Set,e=new Map;return{register:(s,n,i)=>{if(t.has(s))return;const l=new IntersectionObserver(c=>{c.forEach(u=>{u.isIntersecting&&!t.has(s)&&(console.log(`[LazyLoad] Loading chart: ${s}`),i(),t.add(s),l.disconnect(),e.delete(s))})},{rootMargin:"50px",threshold:.1});l.observe(n),e.set(s,l)},forceLoad:(s,n)=>{if(!t.has(s)){console.log(`[LazyLoad] Force loading chart: ${s}`),n(),t.add(s);const i=e.get(s);i&&(i.disconnect(),e.delete(s))}},isLoaded:s=>t.has(s),cleanup:()=>{e.forEach(s=>s.disconnect()),e.clear(),t.clear()}}},KS=()=>{const t=mr(),{user:e}=Du(),s=_.useMemo(()=>VS(Uj,"dashboardService"),[]),n=_.useMemo(()=>YS(),[]),[i,l]=_.useState("overview"),[c,u]=_.useState(null),[h,m]=_.useState(null),[p,x]=_.useState(null),[b,w]=_.useState(null),[j,v]=_.useState([]),[N,E]=_.useState(!1),[S,C]=_.useState(!1),[D,A]=_.useState({overview:!0,trends:!0,campaigns:!0,brands:!0,activities:!0}),[F,I]=_.useState(null),[M,V]=_.useState(new Date),H=_.useCallback(async()=>{try{A(R=>({...R,overview:!0}));const P=await s.getDashboardOverview();if(P.success)u(P.data),I(null);else throw new Error(P.message||"Failed to load dashboard data")}catch(P){console.error("Dashboard overview error:",P),P.response?.status!==401&&P.response?.status!==403&&I(P.message||"Unable to load dashboard data"),u({overview:{campaignsCount:0,totalLeads:0,totalSpent:0,avgCostPerLead:0},dailyComparison:{changes:{leadsChange:0,spentChange:0}},topCampaigns:[],brandPerformance:[]})}finally{A(P=>({...P,overview:!1}))}},[s]),O=_.useCallback(async()=>{try{A(R=>({...R,trends:!0}));const P=await s.getTrendsData({period:"30d"});P.success&&m(P.data?.series||[])}catch(P){console.error("Trends data error:",P),m([])}finally{A(P=>({...P,trends:!1}))}},[s]),K=_.useCallback(async()=>{try{A(R=>({...R,campaigns:!0}));const P=await s.getCampaignPerformance({limit:10});P.success&&x(P.data?.campaigns||[])}catch(P){console.error("Campaign data error:",P),x([])}finally{A(P=>({...P,campaigns:!1}))}},[s]),U=_.useCallback(async()=>{try{A(R=>({...R,brands:!0}));const P=await s.getBrandPerformance({limit:8});P.success&&w(P.data?.brands||[])}catch(P){console.error("Brand data error:",P),w([])}finally{A(P=>({...P,brands:!1}))}},[s]),ne=_.useCallback(async()=>{try{A(R=>({...R,activities:!0}));const P=await s.getRecentActivities({limit:10});P.success?v(P.data?.activities||[]):v([{id:1,type:"report_generated",title:"Campaign Report Generated",description:"Monthly performance report for TK TAMIL campaign",timestamp:new Date(Date.now()-1e3*60*15).toISOString(),user:"System",status:"success"},{id:2,type:"user_login",title:"User Login",description:"User logged into dashboard",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),user:e?.username||"User",status:"success"},{id:3,type:"data_refresh",title:"Data Refreshed",description:"Dashboard data updated automatically",timestamp:new Date(Date.now()-1e3*60*45).toISOString(),user:"System",status:"success"},{id:4,type:"campaign_updated",title:"Campaign Modified",description:"TK TAMIL campaign settings updated",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),user:e?.username||"User",status:"success"},{id:5,type:"analytics_view",title:"Analytics Accessed",description:"Performance analytics page viewed",timestamp:new Date(Date.now()-1e3*60*60*3).toISOString(),user:e?.username||"User",status:"success"}])}catch(P){console.error("Activities error:",P),v([{id:1,type:"report_generated",title:"System Report",timestamp:new Date().toISOString(),user:"System",status:"success"}])}finally{A(P=>({...P,activities:!1}))}},[s,e]),re=_.useCallback(async()=>{WS.all(),V(new Date),await Promise.all([H(),O(),K(),U(),ne()]),Bj.success("Dashboard refreshed successfully!")},[H,O,K,U,ne]);_.useEffect(()=>{qS(s).then(()=>{H(),O(),K(),U(),ne()})},[H,O,K,U,ne,s]),_.useEffect(()=>{const P=setInterval(re,3e5);return()=>clearInterval(P)},[re]),_.useEffect(()=>()=>{n.cleanup()},[n]);const $=P=>{switch(P){case"create_campaign":t("/campaigns?action=create");break;case"generate_report":t("/reports?action=generate");break;case"view_analytics":t("/report-analytics");break;case"manage_users":t("/user-management");break;case"export_data":t("/reports?action=export");break;default:console.log(`Action: ${P}`)}},J=c?.overview||{},ee=(c?.dailyComparison||{}).changes||{},te=[{id:"overview",name:"Overview",icon:ts},{id:"trends",name:"Trends",icon:Kr},{id:"campaigns",name:"Campaigns",icon:Ns},{id:"brands",name:"Brands",icon:zx},{id:"activity",name:"Activity",icon:du}];return a.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome back, ",e?.username||"User","!"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="overview"?"Dashboard overview and key metrics":i==="trends"?"Performance trends over time":i==="campaigns"?"Top performing campaigns":i==="brands"?"Brand performance analysis":"Recent system activity"})]}),a.jsxs("div",{className:"mt-3 lg:mt-0 flex items-center space-x-3",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:["Updated: ",M.toLocaleTimeString()]}),a.jsxs("button",{onClick:re,className:"btn-secondary flex items-center space-x-2 text-sm px-3 py-2",disabled:Object.values(D).some(Boolean),children:[a.jsx(wt,{className:`h-3 w-3 ${Object.values(D).some(Boolean)?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:te.map(P=>{const R=P.icon;return a.jsxs("button",{onClick:()=>l(P.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===P.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(R,{className:"h-4 w-4"}),a.jsx("span",{children:P.name})]},P.id)})})}),F&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start space-x-3",children:[a.jsx(uu,{className:"h-4 w-4 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Data Loading Issue"}),a.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:F})]})]}),a.jsxs("div",{className:"space-y-6",children:[i==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[a.jsx(Lo,{title:"Campaigns",value:J.campaignsCount,icon:Ns,color:"bg-blue-500",loading:D.overview,onClick:()=>t("/campaigns"),className:"text-sm"}),a.jsx(Lo,{title:"Total Leads",value:J.totalLeads,previousValue:J.totalLeads-(ee.leadsChange||0),icon:Mn,color:"bg-green-500",format:"compact",loading:D.overview,onClick:()=>t("/reports"),className:"text-sm"}),a.jsx(Lo,{title:"Total Spent",value:J.totalSpent,previousValue:J.totalSpent-(ee.spentChange||0),icon:W1,color:"bg-purple-500",format:"currency",loading:D.overview,onClick:()=>t("/report-analytics"),className:"text-sm"}),a.jsx(Lo,{title:"Avg Cost/Lead",value:J.avgCostPerLead,icon:Kr,color:"bg-orange-500",format:"currency",precision:2,loading:D.overview,className:"text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>$("create_campaign"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group",children:[a.jsx(ct,{className:"h-6 w-6 text-gray-400 group-hover:text-blue-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-blue-700 text-center",children:"Create Campaign"})]}),a.jsxs("button",{onClick:()=>$("generate_report"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all duration-200 group",children:[a.jsx(us,{className:"h-6 w-6 text-gray-400 group-hover:text-green-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-green-700 text-center",children:"Generate Report"})]}),a.jsxs("button",{onClick:()=>$("view_analytics"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group",children:[a.jsx(ts,{className:"h-6 w-6 text-gray-400 group-hover:text-purple-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-purple-700 text-center",children:"View Analytics"})]}),a.jsxs("button",{onClick:()=>$("export_data"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all duration-200 group",children:[a.jsx(Fu,{className:"h-6 w-6 text-gray-400 group-hover:text-orange-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-orange-700 text-center",children:"Export Data"})]})]})]}),a.jsx(Cp,{activities:j,loading:D.activities,title:"Recent Activity",compact:!0,maxVisible:3})]})]}),i==="trends"&&a.jsx("div",{className:"space-y-6",children:a.jsx($S,{data:h,loading:D.trends,title:"30-Day Performance Trends"})}),i==="campaigns"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(BS,{data:p,loading:D.campaigns,title:"Campaign Performance"}),p&&p.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Details"}),a.jsxs("div",{className:"space-y-3",children:[(N?p:p.slice(0,5)).map((P,R)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:P.campaign_name||`Campaign ${P.campaign_id}`}),a.jsxs("p",{className:"text-sm text-gray-600",children:[P.totalLeads||P.total_leads||0," leads • ₹",Number(P.totalSpent||P.total_spent||0).toLocaleString("en-IN")," spent"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(P.avgCostPerLead||P.avg_cost_per_lead||0).toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:"cost/lead"})]})]},P.campaign_id||R)),p.length>5&&a.jsx("button",{onClick:()=>E(!N),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:N?"Show Less":`Show ${p.length-5} More`})]})]})]}),i==="brands"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(US,{data:b,loading:D.brands,title:"Brand Performance Distribution"}),b&&b.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Brand Details"}),a.jsxs("div",{className:"space-y-3",children:[(S?b:b.slice(0,5)).map((P,R)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:P.brand||"Unknown Brand"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[P.totalLeads||P.total_leads||0," leads •",P.campaignsCount||P.campaigns_count||0," campaigns"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(P.totalSpent||P.total_spent||0).toLocaleString("en-IN")]}),a.jsx("p",{className:"text-xs text-gray-500",children:"total spent"})]})]},P.brand||R)),b.length>5&&a.jsx("button",{onClick:()=>C(!S),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:S?"Show Less":`Show ${b.length-5} More`})]})]})]}),i==="activity"&&a.jsx("div",{className:"space-y-6",children:a.jsx(Cp,{activities:j,loading:D.activities,title:"Recent System Activity"})})]})]})},Os={getAllRoles:async()=>{try{return(await oe.get("/permissions/roles-list")).data}catch(t){throw console.error("Error fetching roles:",t),t}},getAllRolesWithPermissions:async()=>{try{const t=await oe.get("/permissions/roles-list"),e=t.data.data||t.data,s=await Promise.all(e.map(async n=>{try{const i=await oe.get(`/permissions/role/${n.id}/permissions`),l=i.data.data||i.data.permissions||[];return{...n,permissions:l}}catch(i){return console.error(`Error fetching permissions for role ${n.id}:`,i),{...n,permissions:[]}}}));return{...t.data,data:s}}catch(t){throw console.error("Error fetching roles with permissions:",t),t}},getAllModules:async()=>{try{return(await oe.get("/permissions/modules")).data}catch(t){throw console.error("Error fetching modules:",t),t}},getModulesWithPermissions:async()=>{try{return(await oe.get("/permissions/modules-with-permissions")).data}catch(t){throw console.error("Error fetching modules with permissions:",t),t}},getAllPermissions:async()=>{try{return(await oe.get("/permissions")).data}catch(t){throw console.error("Error fetching permissions:",t),t}},getRolePermissions:async t=>{try{return(await oe.get(`/permissions/role/${t}/permissions`)).data}catch(e){throw console.error("Error fetching role permissions:",e),e}},getUserRoles:async t=>{try{return(await oe.get(`/permissions/user/${t}/roles`)).data}catch(e){throw console.error("Error fetching user roles:",e),e}},getUserPermissions:async t=>{try{return(await oe.get(`/permissions/user/${t}`)).data}catch(e){throw console.error("Error fetching user permissions:",e),e}},checkUserPermission:async(t,e)=>{try{return(await oe.post("/permissions/check",{user_id:t,permission_key:e})).data}catch(s){throw console.error("Error checking user permission:",s),s}},createRole:async t=>{try{return(await oe.post("/permissions/role",t)).data}catch(e){throw console.error("Error creating role:",e),e}},createRoleWithPermissions:async(t,e,s=[])=>{try{const n=await oe.post("/permissions/role",{name:t,description:e}),i=n.data.data?.id||n.data.data?.roleId;return s.length>0&&i&&await oe.post("/permissions/role/assign",{roleId:i,permissions:s}),n.data}catch(n){throw console.error("Error creating role with permissions:",n),n}},assignPermissionsToRole:async(t,e)=>{try{return(await oe.post("/permissions/role/assign",{roleId:t,permissions:e})).data}catch(s){throw console.error("Error assigning permissions to role:",s),s}},updateRole:async(t,e)=>{try{const s={role_name:e.name,description:e.description,is_active:e.is_active!==void 0?e.is_active:!0};return(await oe.put(`/permissions/roles/${t}`,s)).data}catch(s){throw console.error("Error updating role:",s),s}},updateRoleWithPermissions:async(t,e,s,n=[])=>{try{const i=await oe.put(`/permissions/roles/${t}`,{role_name:e,description:s});return n.length>=0&&await oe.post("/permissions/role/assign",{roleId:t,permissions:n}),i.data}catch(i){throw console.error("Error updating role with permissions:",i),i}},deleteRole:async t=>{try{return(await oe.delete(`/permissions/role/${t}`)).data}catch(e){throw console.error("Error deleting role:",e),e}},assignPermissionToRole:async(t,e)=>{try{return(await oe.post("/permissions/grant-role-permission",{role_id:t,permission_id:e})).data}catch(s){throw console.error("Error assigning permission to role:",s),s}},revokePermissionFromRole:async(t,e)=>{try{return(await oe.delete("/permissions/revoke-role-permission",{data:{role_id:t,permission_id:e}})).data}catch(s){throw console.error("Error revoking permission from role:",s),s}},assignUserToRole:async(t,e)=>{try{return(await oe.post("/permissions/assign-role",{user_id:t,role_id:e})).data}catch(s){throw console.error("Error assigning user to role:",s),s}},removeUserFromRole:async(t,e)=>{try{return(await oe.delete("/permissions/revoke-role",{data:{user_id:t,role_id:e}})).data}catch(s){throw console.error("Error removing user from role:",s),s}},getAuditLogs:async(t={})=>{try{return(await oe.get("/permissions/audit",{params:t})).data}catch(e){throw console.error("Error fetching audit logs:",e),e}}},Kg=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(null),[h,m]=_.useState(!1),[p,x]=_.useState(!1),[b,w]=_.useState(null),[j,v]=_.useState(""),[N,E]=_.useState(""),[S,C]=_.useState({}),[D,A]=_.useState(""),[F,I]=_.useState(""),[M,V]=_.useState({}),[H,O]=_.useState(""),[K,U]=_.useState(""),[ne,re]=_.useState(null),$=_.useCallback(X=>{const be=["User Management","Role Management","Campaign Type","Campaign","Campaign Data","Cards","Cards Users","Report Analytics","Report"],De=Ae=>({users:"User Management","user management":"User Management",campaigns:"Campaign",campaign_data:"Campaign Data","campaign-data":"Campaign Data",campaign_types:"Campaign Type","campaign-types":"Campaign Type",cards:"Cards",card_users:"Cards Users","card-users":"Cards Users",reports:"Report",report:"Report",permissions:"Role Management","role management":"Role Management",system:"Role Management"})[Ae.toLowerCase()]||Ae,ke=Ae=>{const je=De(Ae),Ve=be.indexOf(je);return Ve!==-1?Ve:999};return X.sort((Ae,je)=>{const Ve=ke(Ae.name),ft=ke(je.name);return Ve!==ft?Ve-ft:(Ae.name||"").localeCompare(je.name||"")})},[]),J=_.useMemo(()=>$(s.filter(X=>X.name&&X.name.toLowerCase()!=="system")),[s,$]),Y=_.useCallback(async()=>{try{l(!0),u(null),O("");const[X,be]=await Promise.all([Os.getAllRolesWithPermissions(),Os.getModulesWithPermissions()]),ke=(X.data||X).map(Ae=>({...Ae,id:Ae.id||Ae.role_id,name:String(Ae.name||Ae.role_name||"").trim(),role_name:String(Ae.role_name||Ae.name||"").trim(),is_system_role:Ae.is_system_role===1||Ae.is_system_role===!0}));e(ke),n(be.data||be)}catch(X){console.error("Error loading data:",X);const be=X.response?.data?.message||X.message||"Failed to load data";u(be),O(be)}finally{l(!1)}},[]);_.useEffect(()=>{Y()},[Y]);const ee=_.useCallback(X=>{const be=String(X.name||X.role_name||"");A(be),I(X.description||"");const De={};X.permissions&&X.permissions.length>0&&X.permissions.forEach(ke=>{const Ae=ke.permission_key||ke.key;s.forEach(je=>{if(je.permissions&&je.permissions.length>0){const Ve=je.permissions.find(ft=>ft.key===Ae);Ve&&(De[je.id]||(De[je.id]=[]),De[je.id].includes(Ve.key)||De[je.id].push(Ve.key))}})}),V(De)},[s]);_.useEffect(()=>{b&&s.length>0&&p&&ee(b)},[s,b,p,ee]);const te=_.useCallback(X=>{const be=[];return!X||!X.trim()?be.push("Role name is required"):((X.trim().length<3||X.trim().length>50)&&be.push("Role name must be between 3 and 50 characters"),/^[a-zA-Z0-9\s\-_]+$/.test(X.trim())||be.push("Role name can only contain letters, numbers, spaces, hyphens, and underscores")),be},[]),P=_.useCallback(X=>X&&X.trim().length>255?["Description cannot exceed 255 characters"]:[],[]),R=_.useCallback(X=>{console.error("RBAC Error:",X),m(!1),x(!1),w(null),v(""),E(""),C({}),A(""),I(""),V({});const be=X.response?.data;re({message:be?.message||X.message,details:be?.details,userRole:be?.details?.userRole,requiredPermission:be?.details?.requiredPermission,availableActions:be?.details?.availableActions,suggestion:be?.details?.suggestion}),O(be?.message||X.message)},[]);_.useEffect(()=>{if(ne){const X=setTimeout(()=>re(null),12e3);return()=>clearTimeout(X)}},[ne]),_.useEffect(()=>{if(K){const X=setTimeout(()=>U(""),5e3);return()=>clearTimeout(X)}},[K]),_.useEffect(()=>{if(H){const X=setTimeout(()=>O(""),8e3);return()=>clearTimeout(X)}},[H]);const de=_.useCallback(async()=>{try{O(""),U("");const X=te(j),be=P(N),De=[...X,...be];if(De.length>0){O(De.join(". "));return}const ke=[];Object.entries(S).forEach(([Ae,je])=>{je.forEach(Ve=>{ke.push(Ve)})}),await Os.createRoleWithPermissions(j.trim(),N.trim(),ke),v(""),E(""),C({}),m(!1),await Y(),U("Role created successfully!")}catch(X){console.error("Error creating role:",X),X.response?.status===403?R(X):X.response?.status===409?O("A role with this name already exists. Please choose a different name."):X.response?.status===400?O("Invalid role data. Please check your inputs."):O(`Error creating role: ${X.response?.data?.message||X.message}`)}},[j,N,S,te,P,Y,R]),he=_.useCallback(async()=>{try{O(""),U("");const X=te(D),be=P(F),De=[...X,...be];if(De.length>0){O(De.join(". "));return}const ke=[];Object.entries(M).forEach(([Ae,je])=>{je.forEach(Ve=>{ke.push(Ve)})}),await Os.updateRoleWithPermissions(b.id,D.trim(),F.trim(),ke),A(""),I(""),V({}),x(!1),w(null),await Y(),U("Role updated successfully!")}catch(X){if(console.error("Error updating role:",X),X.response?.status===403){const be=X.response?.data;be?.details?.requiredPermission||be?.message?.includes("permission")?R(X):O("Cannot update this role: It is a system role.")}else X.response?.status===409?O("A role with this name already exists. Please choose a different name."):X.response?.status===400?O("Invalid role data. Please check your inputs."):O(`Error updating role: ${X.response?.data?.message||X.message}`)}},[D,F,M,b,te,P,Y,R]),B=_.useCallback(async(X,be,De)=>{if(De){O(`Cannot delete "${be}" because it is a system role.`);return}if(window.confirm(`Are you sure you want to delete the role "${be}"?`))try{O(""),await Os.deleteRole(X),await Y(),U("Role deleted successfully!")}catch(ke){if(console.error("Error deleting role:",ke),ke.response?.status===403){const Ae=ke.response?.data;Ae?.details?.requiredPermission||Ae?.message?.includes("permission")?R(ke):O("Cannot delete this role: It is a system role or has restrictions.")}else ke.response?.status===400?O("Cannot delete this role: It may be assigned to active users."):O(`Error deleting role: ${ke.response?.data?.message||ke.message}`)}},[Y,R]),Z=_.useCallback((X,be,De)=>{C(ke=>{const Ae=ke[X]||[];return De?{...ke,[X]:[...Ae,be]}:{...ke,[X]:Ae.filter(je=>je!==be)}})},[]),ue=_.useCallback((X,be,De)=>{C(ke=>De?{...ke,[X]:be.map(Ae=>Ae.key)}:{...ke,[X]:[]})},[]),ge=_.useCallback((X,be,De)=>{V(ke=>{const Ae=ke[X]||[];return De?{...ke,[X]:[...Ae,be]}:{...ke,[X]:Ae.filter(je=>je!==be)}})},[]),Ie=_.useCallback((X,be,De)=>{V(ke=>De?{...ke,[X]:be.map(Ae=>Ae.key)}:{...ke,[X]:[]})},[]),dt=_.useCallback(X=>!X||X.length===0?"No permissions assigned":X.map(be=>be.permission_name||be.name||be).join(", "),[]),ye=_.useCallback(()=>{m(!1),v(""),E(""),C({}),O("")},[]),Be=_.useCallback(()=>{x(!1),w(null),A(""),I(""),V({}),O("")},[]),ss=_.useCallback(X=>{X.key==="Escape"&&(h?ye():p&&Be())},[h,p,ye,Be]);return _.useEffect(()=>{if(h||p)return document.addEventListener("keydown",ss),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",ss),document.body.style.overflow="unset"}},[h,p,ss]),i?a.jsx("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),"Loading role management interface..."]})}):c?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:a.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",c]})}),a.jsx("button",{className:"btn-primary",onClick:Y,children:"Retry"})]}):a.jsxs("div",{className:"p-6",children:[ne&&a.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.94-.833-2.31 0L4.504 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-red-700 font-medium text-base mb-3",children:ne.message}),ne.details&&a.jsxs("div",{className:"bg-red-50 rounded-md p-4 border border-red-200 space-y-2",children:[ne.userRole&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Current Role:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ne.userRole})]}),ne.requiredPermission&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Required Permission:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ne.requiredPermission})]}),ne.suggestion&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Suggestion:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ne.suggestion})]}),ne.availableActions&&ne.availableActions.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Available Actions:"}),a.jsx("span",{className:"text-red-700 ml-2",children:ne.availableActions.join(", ")})]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{className:"text-red-400 hover:text-red-600 transition-colors",onClick:()=>re(null),"aria-label":"Dismiss error message",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),K&&a.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:a.jsx("p",{className:"text-green-600",children:K})}),H&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("p",{className:"text-red-600",children:H})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),a.jsx("button",{className:"btn-primary",onClick:()=>m(!0),"aria-label":"Create new role",children:"Create Role"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No roles found"})}):t.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 role-name-display",children:X.name}),X.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:X.description||"No description"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.jsx("div",{className:"max-w-xs truncate",children:dt(X.permissions)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>{w(X),x(!0)},"aria-label":`Edit role ${X.name}`,children:"Edit"}),a.jsx("button",{className:`text-xs px-3 py-1 ${X.is_system_role?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-danger"}`,onClick:()=>B(X.id,X.name,X.is_system_role),disabled:X.is_system_role,title:X.is_system_role?"System roles cannot be deleted":"Delete this role","aria-label":`Delete role ${X.name}`,children:"Delete"})]})]},X.id))})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[a.jsxs("div",{children:[a.jsx("h3",{id:"create-modal-title",className:"text-xl font-bold text-gray-900",children:"Create New Role"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions and access levels"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all",onClick:ye,"aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsx("div",{className:"w-80 border-r border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"new-role-name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:j,onChange:X=>v(X.target.value),placeholder:"Enter role name",maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"new-role-description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:N,onChange:X=>E(X.target.value),placeholder:"Enter role description",rows:"4",maxLength:255})]}),a.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Permission Summary"}),a.jsx("div",{className:"space-y-2",children:J.map(X=>{const be=S[X.id]||[],De=X.permissions?X.permissions.length:0;return a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:X.name}),a.jsxs("span",{className:`font-medium ${be.length>0?"text-blue-600":"text-gray-400"}`,children:[be.length,"/",De]})]},X.id)})})]})]})}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Module Permissions"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the permissions for each module"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-6",children:J.map(X=>{const be=S[X.id]||[],De=X.permissions?X.permissions.map(je=>je.key):[],ke=De.length>0&&De.every(je=>be.includes(je)),Ae=X.permissions?[...X.permissions].sort((je,Ve)=>{const ft=se=>{const le=se.name.toLowerCase(),me=se.key.toLowerCase();return le.includes("view")||le.includes("get")||le.includes("read")||me.includes("view")||me.includes("get")?1:le.includes("add")||le.includes("create")||me.includes("add")||me.includes("create")?2:le.includes("update")||le.includes("edit")||le.includes("modify")||me.includes("update")||me.includes("edit")?3:le.includes("delete")||le.includes("remove")||me.includes("delete")||me.includes("remove")?4:5};return ft(je)-ft(Ve)}):[];return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50 rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${be.length>0?"bg-blue-500":"bg-gray-300"}`}),a.jsx("h5",{className:"font-semibold text-gray-900",children:X.name}),a.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[be.length,"/",De.length]})]}),a.jsx("button",{type:"button",className:`text-xs px-4 py-2 rounded-full border transition-all font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>ue(X.id,X.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${X.name}`,children:ke?"Deselect All":"Select All"})]}),a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Ae.map(je=>a.jsxs("label",{className:"flex items-start space-x-3 p-3 hover:bg-blue-50 rounded-lg border border-transparent hover:border-blue-200 transition-all cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors",checked:S[X.id]?.includes(je.key)||!1,onChange:Ve=>Z(X.id,je.key,Ve.target.checked),"aria-describedby":je.description?`${X.id}-${je.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-900",children:je.name}),je.description&&a.jsx("p",{id:`${X.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`${X.id}-${je.key}`))})})]},X.id)})})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50 space-x-3",children:[a.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:ye,children:"Cancel"}),a.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:de,disabled:!j.trim(),children:"Create Role"})]})]})}),p&&b&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-modal-title",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{id:"edit-modal-title",className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",b.name]}),b.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System Role"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",onClick:Be,"aria-label":"Close modal",children:"×"})]}),a.jsxs("div",{className:"p-6",children:[b.is_system_role&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",role:"alert",children:a.jsxs("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"System Role:"})," This role cannot be modified as it is required for system functionality. You can view the role details but cannot make changes."]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"edit-role-name",type:"text",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:D,onChange:X=>A(X.target.value),placeholder:"Enter role name",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"edit-role-description",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:F,onChange:X=>I(X.target.value),placeholder:"Enter role description",rows:"3",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:255})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),a.jsx("div",{className:"h-96 overflow-y-auto border border-gray-200 rounded-md p-4 bg-gray-50",children:J.map(X=>{const be=M[X.id]||[],De=X.permissions?X.permissions.map(je=>je.key):[],ke=De.length>0&&De.every(je=>be.includes(je)),Ae=X.permissions?[...X.permissions].sort((je,Ve)=>{const ft=se=>{const le=se.name.toLowerCase(),me=se.key.toLowerCase();return le.includes("view")||le.includes("get")||le.includes("read")||me.includes("view")||me.includes("get")?1:le.includes("add")||le.includes("create")||me.includes("add")||me.includes("create")?2:le.includes("update")||le.includes("edit")||le.includes("modify")||me.includes("update")||me.includes("edit")?3:le.includes("delete")||le.includes("remove")||me.includes("delete")||me.includes("remove")?4:5};return ft(je)-ft(Ve)}):[];return a.jsxs("div",{className:`mb-6 last:mb-0 bg-white rounded-lg border border-gray-200 p-4 ${b.is_system_role?"opacity-75":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:X.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[be.length," of ",De.length," selected"]}),!b.is_system_role&&a.jsx("button",{type:"button",className:`text-xs px-3 py-1 rounded border transition-colors font-medium ${ke?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100"}`,onClick:()=>Ie(X.id,X.permissions,!ke),"aria-label":`${ke?"Deselect":"Select"} all permissions for ${X.name}`,children:ke?"Deselect All":"Select All"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Ae.map(je=>a.jsxs("label",{className:`flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-md border border-transparent hover:border-gray-200 transition-colors ${b.is_system_role?"cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:M[X.id]?.includes(je.key)||!1,onChange:Ve=>ge(X.id,je.key,Ve.target.checked),disabled:b.is_system_role,"aria-describedby":je.description?`edit-${X.id}-${je.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:je.name}),je.description&&a.jsx("p",{id:`edit-${X.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`edit-${X.id}-${je.key}`))})]},X.id)})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-4 border-t space-x-2",children:[a.jsx("button",{className:"btn-secondary px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:Be,children:"Cancel"}),!b.is_system_role&&a.jsx("button",{className:"btn-primary px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:he,disabled:!D.trim(),children:"Update Role"})]})]})})]})},q0={getAll:async(t={})=>(await oe.get("/user-management",{params:t})).data,getById:async t=>(await oe.get(`/user-management/${t}`)).data,getForDropdown:async()=>{const t=await oe.get("/user-management",{params:{limit:100,is_active:!0}});return t.data.success&&t.data.data?.users?{success:!0,data:t.data.data.users.map(e=>({id:e.id,name:e.username,username:e.username,is_active:e.is_active}))}:t.data},create:async t=>(await oe.post("/user-management",t)).data,update:async(t,e)=>(await oe.put(`/user-management/${t}`,e)).data,delete:async t=>(await oe.delete(`/user-management/${t}`)).data,toggleStatus:async t=>(await oe.patch(`/user-management/${t}/toggle-status`)).data,getRoles:async()=>{try{const t=await oe.get("/user-management/roles");return t.data.success&&t.data.data?.roles?{success:!0,data:{roles:t.data.data.roles.map(e=>({id:e.id,role_name:e.display_name||e.name,name:e.name,display_name:e.display_name||e.name,description:e.description,is_system_role:e.is_system_role}))}}:t.data}catch(t){console.error("Error fetching roles from user-management API:",t);try{const e=await oe.get("/permissions/roles-list");return e.data.success&&e.data.data?{success:!0,data:{roles:e.data.data.map(s=>({id:s.id,role_name:s.name,name:s.name,display_name:s.display_name||s.name,description:s.description,is_system_role:s.is_system_role}))}}:e.data}catch(e){throw console.error("Both user-management and permissions APIs failed:",e),t}}},checkUsername:async t=>(await oe.get(`/user-management/check/username/${t}`)).data},XS=({user:t,onManageRoles:e,loading:s})=>a.jsxs("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:t.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:t.username}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]}),a.jsxs("button",{onClick:()=>e(t),disabled:s,className:"btn-secondary text-sm",children:[a.jsx(ur,{className:"h-4 w-4 mr-1"}),"Manage Roles"]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Roles:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles?.length>0?t.roles.map(n=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[n.name," ",a.jsxs("span",{className:"ml-1 text-xs",children:["L",n.level]})]},n.id)):a.jsx("span",{className:"text-xs text-gray-400",children:"No roles assigned"})})]})]}),GS=({user:t,isOpen:e,onClose:s,onSave:n,allRoles:i,loading:l})=>{const[c,u]=_.useState([]),[h,m]=_.useState([]),[p,x]=_.useState(!1);_.useEffect(()=>{t&&e&&b()},[t,e]);const b=async()=>{if(t?.id)try{x(!0);const N=(await Os.getUserRoles(t.id)).data||[];m(N),u(N.map(E=>E.id))}catch(v){console.error("Error fetching user roles:",v)}finally{x(!1)}},w=v=>{u(N=>N.includes(v)?N.filter(E=>E!==v):[...N,v])},j=async()=>{if(t?.id)try{x(!0);const v=h.map(S=>S.id),N=c.filter(S=>!v.includes(S)),E=v.filter(S=>!c.includes(S));for(const S of N)await Os.assignUserToRole(t.id,S);for(const S of E)await Os.removeUserFromRole(t.id,S);n()}catch(v){console.error("Error updating user roles:",v)}finally{x(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Manage Roles for ",t?.username]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(it,{className:"h-5 w-5"})})]}),p?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(hu,{className:"h-6 w-6 animate-spin text-gray-400"})}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Select roles for this user:"}),i.map(v=>a.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.includes(v.id),onChange:()=>w(v.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:v.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Level ",v.level||1]}),v.description&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:v.description})]})]},v.id))]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:s,className:"btn-secondary",children:"Cancel"}),a.jsxs("button",{onClick:j,disabled:p,className:"btn-primary",children:[p&&a.jsx(hu,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}):null},QS=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(""),[h,m]=_.useState(""),[p,x]=_.useState(null),[b,w]=_.useState(!1);_.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0),u("");const S=await Os.getAllRoles(),C=S.data||S||[];n(C);let D=[];try{const F=await q0.getAll({limit:100});F.success&&F.data?.users?D=F.data.users:F.data&&Array.isArray(F.data)?D=F.data:(console.warn("Users response format unexpected:",F),D=[])}catch(F){console.warn("Failed to load users:",F),D=[]}const A=await Promise.all(D.map(async F=>{try{const I=await Os.getUserRoles(F.id);return{...F,roles:I.data||[]}}catch(I){return console.warn(`Error loading roles for user ${F.id}:`,I),{...F,roles:[]}}}));e(A)}catch(S){u(S.response?.data?.message||"Failed to load data"),console.error("Error loading data:",S)}finally{l(!1)}},v=_.useMemo(()=>t.filter(S=>S.username.toLowerCase().includes(h.toLowerCase())),[t,h]),N=S=>{x(S),w(!0)},E=()=>{w(!1),x(null),j()};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ui,{className:"h-7 w-7 text-primary-500 mr-2"}),a.jsx("h1",{className:"text-2xl font-bold",children:"User Role Management"})]})}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:c}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Users & Their Roles"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(zs,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:h,onChange:S=>m(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[v.length," users"]})]})]}),i?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(hu,{className:"h-8 w-8 animate-spin text-gray-400"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.length===0?a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:h?"No users found matching your search.":"No users available."}):v.map(S=>a.jsx(XS,{user:S,onManageRoles:N,loading:i},S.id))})]}),a.jsx(GS,{user:p,isOpen:b,onClose:()=>w(!1),onSave:E,allRoles:s,loading:i})]})},JS=({active:t,onClick:e,icon:s,children:n})=>a.jsxs("button",{onClick:e,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${t?"bg-primary-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[a.jsx(s,{className:"h-4 w-4 mr-2"}),n]}),ZS=()=>{const[t,e]=_.useState("roles"),s=[{id:"roles",label:"Role Management",icon:ur},{id:"user-roles",label:"User Roles",icon:Mn}],n=()=>{switch(t){case"roles":return a.jsx(Kg,{});case"user-roles":return a.jsx(QS,{});default:return a.jsx(Kg,{})}};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"h-8 w-8 text-primary-500 mr-3"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role & Permission Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage roles, permissions, and user access"})]})]})}),a.jsx("div",{className:"flex space-x-2 mt-4",children:s.map(i=>a.jsx(JS,{active:t===i.id,onClick:()=>e(i.id),icon:i.icon,children:i.label},i.id))})]}),a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:n()})]})},Qo={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("API getAll params:",e);const s=await oe.get("/campaign-types",{params:e});return console.log("API getAll response:",s.data),s.data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await oe.get(`/campaign-types/${t}`);return console.log("API getById response:",e.data),e.data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("API create data:",t);const e=await oe.post("/campaign-types",t);return console.log("API create response:",e.data),e.data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("API update id:",t,"data:",e);const s=await oe.put(`/campaign-types/${t}`,e);return console.log("API update response:",s.data),s.data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("API delete id:",t);const e=await oe.delete(`/campaign-types/${t}`);return console.log("API delete response:",e.data),e.data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}}},sh=({error:t,onDismiss:e,className:s="",dismissible:n=!0,variant:i="error"})=>{if(!t)return null;const c={error:{container:"bg-red-50 border-red-200",icon:"text-red-400",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-400",title:"text-amber-800",text:"text-amber-700"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",title:"text-blue-800",text:"text-blue-700"}}[i];let u="",h=i==="error"?"Error":i==="warning"?"Warning":"Information";return typeof t=="string"?u=t:t?.message?u=t.message:t?.response?.data?.message?u=t.response.data.message:u="An unexpected error occurred",(u.toLowerCase().includes("permission denied")||u.toLowerCase().includes("access denied")||u.toLowerCase().includes("unauthorized")||u.toLowerCase().includes("forbidden"))&&(h="Access Denied"),a.jsx("div",{className:`rounded-md border p-4 ${c.container} ${s}`,role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(He,{className:`h-5 w-5 ${c.icon}`,"aria-hidden":"true"})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:`text-sm font-medium ${c.title}`,children:h}),a.jsx("div",{className:`mt-1 text-sm ${c.text}`,children:u})]}),n&&e&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:a.jsx("button",{onClick:e,className:`inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600 ${c.icon} hover:bg-red-100`,"aria-label":"Dismiss error",children:a.jsx(it,{className:"h-4 w-4"})})})})]})})},eC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState({type_name:"",description:"",is_active:!0}),[u,h]=_.useState({}),[m,p]=_.useState("");_.useEffect(()=>{c(n?{type_name:n.type_name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active===1||n.is_active===!0:!0}:{type_name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const j={};return l.type_name.trim()?l.type_name.length>100&&(j.type_name="Campaign type name must be less than 100 characters"):j.type_name="Campaign type name is required",l.description&&l.description.length>1e3&&(j.description="Description must be less than 1000 characters"),h(j),Object.keys(j).length===0},b=j=>{const{name:v,value:N,type:E,checked:S}=j.target;c(C=>({...C,[v]:E==="checkbox"?S:N})),u[v]&&h(C=>({...C,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Campaign Type":"Create Campaign Type"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-6 w-6"})})]}),m&&a.jsx(sh,{error:m,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Campaign Type Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"type_name",name:"type_name",value:l.type_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.type_name?"border-red-500":""}`,placeholder:"Enter campaign type name",maxLength:100,disabled:i}),u.type_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.type_name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},tC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,m]=_.useState("all"),[p,x]=_.useState("created_at"),[b,w]=_.useState("desc"),[j,v]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(null),[C,D]=_.useState(!1),[A,F]=_.useState(null),[I,M]=_.useState(!1),[V,H]=_.useState(!1),[O,K]=_.useState(null),[U,ne]=_.useState(!1),[re,$]=_.useState(null),J=async()=>{try{n(!0),l(null);const ue={search:c||void 0,status:h==="all"?void 0:h,page:j,limit:N},ge=await Qo.getAll(ue);ge.success?(e(ge.data||[]),S(ge.meta||null)):l(ge.message||"Failed to fetch campaign types")}catch(ue){l(ue.response?.data?.message||"Failed to fetch campaign types"),console.error("Error fetching campaign types:",ue)}finally{n(!1)}};_.useEffect(()=>{J()},[c,h,p,b,j]),_.useEffect(()=>{if(i){const ue=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(ue)}},[i]);const Y=async ue=>{try{M(!0),l(null),console.log("Submitting form data:",ue),console.log("Editing item:",A);let ge;if(A?(console.log("Updating campaign type with ID:",A.id),ge=await Qo.update(A.id,ue)):(console.log("Creating new campaign type"),ge=await Qo.create(ue)),console.log("API Response:",ge),ge.success||ge.data)return D(!1),F(null),J(),console.log(A?"Campaign type updated successfully":"Campaign type created successfully"),{success:!0};throw new Error(ge.message||"Operation failed")}catch(ge){throw console.error("Form submission error:",ge),console.error("Error response data:",ge.response?.data),console.error("Error status:",ge.response?.status),ge}finally{M(!1)}},ee=async ue=>{try{ne(!0),$(null);const ge=await Qo.delete(ue);if(ge.success)H(!1),K(null),$(null),J(),console.log("Campaign type deleted successfully");else throw new Error(ge.message||"Delete failed")}catch(ge){console.error("Delete error:",ge),$(ge.response?.data?.message||ge.message||"Delete failed")}finally{ne(!1)}},te=ue=>{u(ue.target.value),v(1)},P=ue=>{m(ue),v(1)},R=ue=>{p===ue?w(b==="asc"?"desc":"asc"):(x(ue),w("asc")),v(1)},de=ue=>{F(ue),D(!0)},he=()=>{F(null),D(!0)},B=ue=>{K(ue),H(!0)},Z=ue=>ue?Fn(ue):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Types"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campaign types"})]}),a.jsxs("button",{onClick:he,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search campaign types...",value:c,onChange:te,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:ue=>P(ue.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:J,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),E&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-blue-700",children:[a.jsxs("span",{children:["Showing ",t.length," of ",E.pagination.totalCount," campaign types"]}),a.jsxs("span",{children:["Page ",E.pagination.currentPage," of ",E.pagination.totalPages]})]})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(it,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading campaign types..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(ct,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaign types found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first campaign type."}),a.jsxs("button",{onClick:he,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>R("type_name"),children:["Name",p==="type_name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>R("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>R("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(ue=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ue.type_name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:ue.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ue.is_active===1||ue.is_active===!0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ue.is_active===1||ue.is_active===!0?a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(kl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Z(ue.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>de(ue),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(In,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>B(ue),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(_s,{className:"h-4 w-4"})})]})})]},ue.id))})]})}),E&&E.pagination.totalPages>1&&a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4 rounded-b-lg",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:!E.pagination.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(E.pagination.totalPages,j+1)),disabled:!E.pagination.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",a.jsx("span",{className:"font-medium",children:j})," of"," ",a.jsx("span",{className:"font-medium",children:E.pagination.totalPages})]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:!E.pagination.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(E.pagination.totalPages,j+1)),disabled:!E.pagination.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]}),a.jsx(eC,{isOpen:C,onClose:()=>{D(!1),F(null),l(null)},onSubmit:Y,editData:A,isLoading:I}),V&&O&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(He,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Campaign Type"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',O.type_name,'"? This action cannot be undone.']}),re&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:re})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{H(!1),K(null),$(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:U,children:"Cancel"}),a.jsx("button",{onClick:()=>ee(O.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:U,children:U?"Deleting...":"Delete"})]})]})})})]})},sn={getCampaigns:async(t={})=>(await oe.get("/campaigns",{params:t})).data,getCampaign:async t=>(await oe.get(`/campaigns/${t}`)).data,createCampaign:async t=>(await oe.post("/campaigns",t)).data,updateCampaign:async(t,e)=>(await oe.put(`/campaigns/${t}`,e)).data,deleteCampaign:async t=>(await oe.delete(`/campaigns/${t}`)).data,toggleCampaignStatus:async t=>(await oe.put(`/campaigns/${t}/toggle-status`)).data,toggleCampaignEnabled:async t=>(await oe.put(`/campaigns/${t}/toggle-enabled`)).data,activateCampaign:async t=>(await oe.put(`/campaigns/${t}/activate`)).data,deactivateCampaign:async t=>(await oe.put(`/campaigns/${t}/deactivate`)).data,getCampaignStats:async()=>(await oe.get("/campaigns/stats")).data,getCampaignsByBrand:async(t,e={})=>(await oe.get(`/campaigns/by-brand/${t}`,{params:e})).data,getCampaignTypes:async()=>(await oe.get("/campaign-types")).data,getBrands:async()=>(await oe.get("/brands/active")).data},sC=({campaign:t=null,isOpen:e,onClose:s,onSave:n})=>{const[i,l]=_.useState({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""}),[c,u]=_.useState(""),[h,m]=_.useState(""),[p,x]=_.useState([]),[b,w]=_.useState([]),[j,v]=_.useState(!1),[N,E]=_.useState(""),[S,C]=_.useState({}),D=[{value:"video",label:"Video"},{value:"image",label:"Image"},{value:"carousel",label:"Carousel"},{value:"collection",label:"Collection"}],A=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}];_.useEffect(()=>{if(e){if(M(),t){console.log("🔧 Initializing form with campaign data:",t);const $=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Extracted brand ID:",$,"from brand:",t.brand),l({name:t.name||"",persona:F(t.persona),gender:F(t.gender),min_age:t.min_age?t.min_age.toString():"",max_age:t.max_age?t.max_age.toString():"",location:F(t.location),creatives:t.creatives||"image",is_enabled:t.is_enabled!==void 0?!!t.is_enabled:!0,campaign_type_id:t.campaign_type_id||"",brand:$})}else l({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""});I(),E(""),C({})}},[e,t]),_.useEffect(()=>{if(t&&b.length>0){const $=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Re-setting brand after brands loaded. Brand ID:",$,"Available brands:",b.length),l(J=>({...J,brand:$}))}},[t,b]);const F=$=>{if(!$)return[];if(Array.isArray($))return $;try{const J=JSON.parse($);return Array.isArray(J)?J:[]}catch{return[]}},I=()=>{u(""),m("")},M=async()=>{try{const $=await sn.getCampaignTypes();$.success&&x($.data||[]);const J=await sn.getBrands();J.success&&(console.log("🏢 Loaded brands:",J.data),w(J.data||[]))}catch($){console.error("Error loading dropdown data:",$)}},V=$=>{const{name:J,value:Y,type:ee,checked:te}=$.target;l(P=>({...P,[J]:ee==="checkbox"?te:Y})),S[J]&&C(P=>({...P,[J]:null}))},H=($,J,Y)=>{const ee=J.trim();ee&&!i[$].includes(ee)&&(l(te=>({...te,[$]:[...te[$],ee]})),Y(""))},O=($,J)=>{l(Y=>({...Y,[$]:Y[$].filter((ee,te)=>te!==J)}))},K=($,J,Y,ee)=>{$.key==="Enter"&&Y.trim()&&($.preventDefault(),H(J,Y,ee))},U=($,J)=>{l(Y=>({...Y,gender:J?[...Y.gender,$]:Y.gender.filter(ee=>ee!==$)}))},ne=()=>{const $={};return i.name.trim()||($.name="Campaign name is required"),i.campaign_type_id||($.campaign_type_id="Campaign type is required"),i.brand||($.brand="Brand is required"),i.min_age&&(isNaN(i.min_age)||i.min_age<0||i.min_age>100)&&($.min_age="Minimum age must be a number between 0 and 100"),i.max_age&&(isNaN(i.max_age)||i.max_age<0||i.max_age>100)&&($.max_age="Maximum age must be a number between 0 and 100"),i.min_age&&i.max_age&&parseInt(i.min_age)>parseInt(i.max_age)&&($.min_age="Minimum age cannot be greater than maximum age"),C($),Object.keys($).length===0},re=async $=>{if($.preventDefault(),!!ne()){v(!0),E("");try{const J={name:i.name.trim(),persona:i.persona,gender:i.gender,min_age:i.min_age?parseInt(i.min_age):null,max_age:i.max_age?parseInt(i.max_age):null,location:i.location,creatives:i.creatives,is_enabled:i.is_enabled,campaign_type_id:parseInt(i.campaign_type_id),brand:parseInt(i.brand)};let Y;t?Y=await sn.updateCampaign(t.id,J):Y=await sn.createCampaign(J),Y.success?(n(Y.data),s()):E(Y.message||"Failed to save campaign")}catch(J){console.error("Error saving campaign:",J),E(J.response?.data?.message||"Failed to save campaign. Please try again.")}finally{v(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Campaign":"Create New Campaign"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:re,className:"p-6 space-y-6",children:[N&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:N})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:V,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter campaign name"}),S.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"campaign_type_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),a.jsxs("select",{id:"campaign_type_id",name:"campaign_type_id",value:i.campaign_type_id,onChange:V,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.campaign_type_id?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Campaign Type"}),p.filter($=>$.is_active).map($=>a.jsx("option",{value:$.id,children:$.type_name},$.id))]}),S.campaign_type_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.campaign_type_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),a.jsxs("select",{id:"brand",name:"brand",value:i.brand,onChange:V,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.brand?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Brand"}),b.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))]}),S.brand&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.brand})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Age"}),a.jsx("input",{type:"number",id:"min_age",name:"min_age",min:"0",max:"100",value:i.min_age,onChange:V,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.min_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter minimum age"}),S.min_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.min_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Age"}),a.jsx("input",{type:"number",id:"max_age",name:"max_age",min:"0",max:"100",value:i.max_age,onChange:V,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.max_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter maximum age"}),S.max_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.max_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"creatives",className:"block text-sm font-medium text-gray-700 mb-1",children:"Creative Type"}),a.jsx("select",{id:"creatives",name:"creatives",value:i.creatives,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:D.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona (Multiple Values)"}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.persona.map(($,J)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 border border-purple-200",children:[a.jsx("span",{children:$}),a.jsx("button",{type:"button",onClick:()=>O("persona",J),className:"ml-2 text-purple-600 hover:text-purple-800",children:a.jsx(it,{className:"h-3 w-3"})})]},J))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:c,onChange:$=>u($.target.value),onKeyDown:$=>K($,"persona",c,u),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type persona and press Enter"}),a.jsx("button",{type:"button",onClick:()=>H("persona",c,u),disabled:!c.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(ct,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gender (Multiple Selection)"}),i.gender.length>0&&a.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:i.gender.map(($,J)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:[a.jsx("span",{children:$}),a.jsx("button",{type:"button",onClick:()=>O("gender",J),className:"ml-2 text-blue-600 hover:text-blue-800",children:a.jsx(it,{className:"h-3 w-3"})})]},J))}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:A.map($=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.gender.includes($.value),onChange:J=>U($.value,J.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:$.label})]},$.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (Multiple Values)"}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.location.map(($,J)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 border border-green-200",children:[a.jsx("span",{children:$}),a.jsx("button",{type:"button",onClick:()=>O("location",J),className:"ml-2 text-green-600 hover:text-green-800",children:a.jsx(it,{className:"h-3 w-3"})})]},J))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),onKeyDown:$=>K($,"location",h,m),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type location and press Enter"}),a.jsx("button",{type:"button",onClick:()=>H("location",h,m),disabled:!h.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(ct,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:"is_enabled",className:"block text-sm font-medium text-gray-700",children:"Campaign Status"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`text-sm ${i.is_enabled?"text-gray-500":"text-gray-900 font-medium"}`,children:"Disabled"}),a.jsx("button",{type:"button",onClick:()=>l($=>({...$,is_enabled:!$.is_enabled})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${i.is_enabled?"bg-purple-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.is_enabled?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:`text-sm ${i.is_enabled?"text-purple-600 font-medium":"text-gray-500"}`,children:"Enabled"})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:j,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"h-4 w-4"}),a.jsx("span",{children:t?"Update Campaign":"Create Campaign"})]})})]})]})]})}):null},nC=()=>{const t=mr(),[e,s]=_.useState([]),[n,i]=_.useState([]),[l,c]=_.useState(!0),[u,h]=_.useState(""),[m,p]=_.useState(""),[x,b]=_.useState(""),[w,j]=_.useState(""),[v,N]=_.useState({delete:null,toggle:null}),[E,S]=_.useState(!1),[C,D]=_.useState(null),[A,F]=_.useState(null),[I,M]=_.useState(null),[V,H]=_.useState(null);_.useEffect(()=>{O(),K()},[]);const O=async()=>{try{c(!0),h("");const B=await sn.getCampaigns();if(B.success){const Z=B.data?.campaigns||B.data||[];s(Z)}else h(B.message||"Failed to load campaigns")}catch(B){console.error("Error loading campaigns:",B),h("Failed to load campaigns. Please try again.")}finally{c(!1)}},K=async()=>{try{const B=await sn.getCampaignTypes();B.success&&i(B.data||[])}catch(B){console.error("Error loading campaign types:",B)}},U=()=>{D(null),S(!0)},ne=B=>{D(B),S(!0),H(null)},re=B=>{F(B),H(null)},$=async()=>{try{const B=await sn.deleteCampaign(A.id);B.success?(s(Z=>(Array.isArray(Z)?Z:[]).filter(ue=>ue.id!==A.id)),F(null)):h(B.message||"Failed to delete campaign")}catch(B){console.error("Error deleting campaign:",B),h("Failed to delete campaign. Please try again.")}},J=async B=>{try{const Z=await sn.toggleCampaignEnabled(B.id);Z.success?s(ue=>(Array.isArray(ue)?ue:[]).map(ge=>ge.id===B.id?{...ge,is_enabled:!ge.is_enabled}:ge)):h(Z.message||"Failed to update campaign status")}catch(Z){console.error("Error toggling campaign status:",Z),h("Failed to update campaign status. Please try again.")}H(null)},Y=B=>{s(C?Z=>(Array.isArray(Z)?Z:[]).map(ue=>ue.id===B.id?B:ue):Z=>[B,...Array.isArray(Z)?Z:[]])},ee=B=>{t(`/campaigns/${B.id}`)},te=(Array.isArray(e)?e:[]).filter(B=>{const Z=B.brand?.name||"",ue=B.name.toLowerCase().includes(m.toLowerCase())||Z.toLowerCase().includes(m.toLowerCase()),ge=!x||B.campaign_type_id===parseInt(x),Ie=!w||w==="enabled"&&B.is_enabled||w==="disabled"&&!B.is_enabled;return ue&&ge&&Ie}),P=B=>{if(B.campaignType?.name)return B.campaignType.name;const Z=(Array.isArray(n)?n:[]).find(ue=>ue.id===B.campaign_type_id);return Z?Z.type_name:"Unknown"},R=B=>{if(!B)return[];if(Array.isArray(B))return B;try{return JSON.parse(B)}catch{return[]}},de=B=>{if(!B)return[];if(Array.isArray(B))return B;try{const Z=JSON.parse(B);return Array.isArray(Z)?Z:[]}catch{return B.split(",").map(Z=>Z.trim()).filter(Z=>Z)}},he=B=>{if(!B)return[];if(Array.isArray(B))return B;try{const Z=JSON.parse(B);return Array.isArray(Z)?Z:[]}catch{return B.split(",").map(Z=>Z.trim()).filter(Z=>Z)}};return l?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(B=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},B))})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[V&&a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>H(null)}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your advertising campaigns"})]}),a.jsxs("button",{onClick:U,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[a.jsx(ct,{className:"h-5 w-5"}),a.jsx("span",{children:"New Campaign"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search campaigns...",value:m,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:x,onChange:B=>b(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Campaign Types"}),(Array.isArray(n)?n:[]).map(B=>a.jsx("option",{value:B.id,children:B.type_name},B.id))]})}),a.jsx("div",{children:a.jsxs("select",{value:w,onChange:B=>j(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"})]})}),a.jsx("div",{children:a.jsx("button",{onClick:()=>{p(""),b(""),j("")},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]})}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx(uu,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:u}),a.jsx("button",{onClick:()=>h(""),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:te.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Lu,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:(Array.isArray(e)?e:[]).length===0?"Get started by creating your first campaign.":"Try adjusting your search or filter criteria."}),(Array.isArray(e)?e:[]).length===0&&a.jsx("button",{onClick:U,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Campaign"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creative"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`/campaigns/${B.id}`),children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),B.brand?.name&&a.jsx("div",{className:"text-sm text-gray-500",children:B.brand.name})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:P(B)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:B.creatives})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.is_enabled?"Enabled":"Disabled"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Fn(B.created_at)}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ee(B)},className:"text-blue-500 hover:text-blue-700 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:a.jsx(di,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ne(B)},className:"text-yellow-500 hover:text-yellow-700 p-1 rounded-md hover:bg-yellow-50 transition-colors",title:"Edit Campaign",children:a.jsx(X1,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),J(B)},className:`p-1 rounded-md transition-colors ${B.is_enabled?"text-red-500 hover:text-red-700 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:B.is_enabled?"Disable Campaign":"Enable Campaign",children:a.jsx("div",{className:`h-4 w-4 rounded-full ${B.is_enabled?"bg-red-500":"bg-green-500"}`})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),re(B)},className:"text-red-500 hover:text-red-700 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Campaign",children:a.jsx(_s,{className:"h-4 w-4"})})]})})]},B.id))})]})})}),te.length>0&&a.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",te.length," of ",(Array.isArray(e)?e:[]).length," campaigns"]})]}),a.jsx(sC,{campaign:C,isOpen:E,onClose:()=>{S(!1),D(null)},onSave:Y}),I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Campaign Details"}),a.jsx("button",{onClick:()=>M(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx(it,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:I.name})]}),I.brand?.name&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Brand"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:I.brand.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Type"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:P(I)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Persona"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:de(I.persona).length>0?de(I.persona).map((B,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-purple-100 text-purple-800",children:B},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:R(I.gender).join(", ")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Locations"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:he(I.location).length>0?he(I.location).map((B,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:B},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Creatives"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:I.creatives})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),a.jsx("p",{className:`mt-1 text-sm font-medium ${I.is_enabled?"text-green-600":"text-red-600"}`,children:I.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:tj(I.created_at)})]})]})]})}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(uu,{className:"h-6 w-6 text-red-600 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Campaign"})]}),a.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:['Are you sure you want to delete "',A.name,'"? This action cannot be undone.']}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>F(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:$,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})},Jo={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("Brand API getAll params:",e);const s=await oe.get("/brands",{params:e});return console.log("Brand API getAll response:",s.data),s.data}catch(e){throw console.error("Brand API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await oe.get(`/brands/${t}`);return console.log("Brand API getById response:",e.data),e.data}catch(e){throw console.error("Brand API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("Brand API create data:",t);const e=await oe.post("/brands",t);return console.log("Brand API create response:",e.data),e.data}catch(e){throw console.error("Brand API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("Brand API update id:",t,"data:",e);const s=await oe.put(`/brands/${t}`,e);return console.log("Brand API update response:",s.data),s.data}catch(s){throw console.error("Brand API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("Brand API delete id:",t);const e=await oe.delete(`/brands/${t}`);return console.log("Brand API delete response:",e.data),e.data}catch(e){throw console.error("Brand API delete error:",e.response?.data||e.message),e}}},rC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState({name:"",description:"",is_active:!0}),[u,h]=_.useState({}),[m,p]=_.useState("");_.useEffect(()=>{c(n?{name:n.name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active:!0}:{name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const j={};return l.name.trim()?l.name.length>255&&(j.name="Brand name must be less than 255 characters"):j.name="Brand name is required",l.description&&l.description.length>1e3&&(j.description="Description must be less than 1000 characters"),h(j),Object.keys(j).length===0},b=j=>{const{name:v,value:N,type:E,checked:S}=j.target;c(C=>({...C,[v]:E==="checkbox"?S:N})),u[v]&&h(C=>({...C,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{p("");const v=await s(l)}catch(v){console.error("Form submission error:",v),p(v?.response?.data?.message||v.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Brand":"Create Brand"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-6 w-6"})})]}),m&&a.jsx(sh,{error:m,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.name?"border-red-500":""}`,placeholder:"Enter brand name",maxLength:255,disabled:i}),u.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},aC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,m]=_.useState("all"),[p,x]=_.useState("created_at"),[b,w]=_.useState("desc"),[j,v]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(!1),[C,D]=_.useState(null),[A,F]=_.useState(!1),[I,M]=_.useState(!1),[V,H]=_.useState(null),[O,K]=_.useState(!1),[U,ne]=_.useState(null),re=async()=>{try{n(!0),l(null);const B={search:c,status:h==="all"?void 0:h,sort:p,order:b,page:j,limit:N},Z=await Jo.getAll(B);Z.success?e(Z.data||[]):l(Z.message||"Failed to fetch brands")}catch(B){l(B.response?.data?.message||"Failed to fetch brands"),console.error("Error fetching brands:",B)}finally{n(!1)}};_.useEffect(()=>{re()},[c,h,p,b,j]),_.useEffect(()=>{if(i){const B=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(B)}},[i]);const $=async B=>{try{F(!0),l(null),console.log("Submitting form data:",B),console.log("Editing item:",C);let Z;if(C?(console.log("Updating brand with ID:",C.id),Z=await Jo.update(C.id,B)):(console.log("Creating new brand"),Z=await Jo.create(B)),console.log("API Response:",Z),Z.success||Z.data)return S(!1),D(null),re(),console.log(C?"Brand updated successfully":"Brand created successfully"),{success:!0};throw new Error(Z.message||"Operation failed")}catch(Z){throw console.error("Form submission error:",Z),console.error("Error response data:",Z.response?.data),console.error("Error status:",Z.response?.status),Z}finally{F(!1)}},J=async B=>{try{K(!0),ne(null);const Z=await Jo.delete(B);if(Z.success)M(!1),H(null),ne(null),re(),console.log("Brand deleted successfully");else throw new Error(Z.message||"Delete failed")}catch(Z){console.error("Delete error:",Z),ne(Z.response?.data?.message||Z.message||"Delete failed")}finally{K(!1)}},Y=B=>{u(B.target.value),v(1)},ee=B=>{m(B),v(1)},te=B=>{p===B?w(b==="asc"?"desc":"asc"):(x(B),w("asc")),v(1)},P=B=>{D(B),S(!0)},R=()=>{D(null),S(!0)},de=B=>{H(B),M(!0)},he=B=>B?Fn(B):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your brand portfolio"})]}),a.jsxs("button",{onClick:R,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search brands...",value:c,onChange:Y,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:B=>ee(B.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:re,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(it,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading brands..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(ct,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No brands found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first brand."}),a.jsxs("button",{onClick:R,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("name"),children:["Name",p==="name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>te("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:B.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.is_active?a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(kl,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:he(B.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>P(B),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(In,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>de(B),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(_s,{className:"h-4 w-4"})})]})})]},B.id))})]})}),a.jsx(rC,{isOpen:E,onClose:()=>{S(!1),D(null),l(null)},onSubmit:$,editData:C,isLoading:A}),I&&V&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(He,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Brand"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',V.name,'"? This action cannot be undone.']}),U&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:U})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{M(!1),H(null),ne(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:O,children:"Cancel"}),a.jsx("button",{onClick:()=>J(V.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:O,children:O?"Deleting...":"Delete"})]})]})})})]})},Ga={getAll:async(t={})=>{try{return(await oe.get("/campaign-data",{params:t})).data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{return(await oe.get(`/campaign-data/${t}`)).data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{return(await oe.post("/campaign-data",t)).data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{return(await oe.put(`/campaign-data/${t}`,e)).data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{return(await oe.delete(`/campaign-data/${t}`)).data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}},getCampaignsForDropdown:async()=>{try{const t=await oe.get("/campaigns",{params:{is_enabled:!0,limit:1e3}});return{success:t.data.success,data:t.data.data?.campaigns||t.data.data||[],message:t.data.message}}catch(t){throw console.error("API getCampaignsForDropdown error:",t.response?.data||t.message),t}},getCardsForDropdown:async()=>{try{return(await oe.get("/campaign-data/cards")).data}catch(t){throw console.error("API getCardsForDropdown error:",t.response?.data||t.message),t}},getByCampaignId:async(t,e={})=>{try{return(await oe.get("/campaign-data",{params:{campaign_id:t,...e}})).data}catch(s){throw console.error("API getByCampaignId error:",s.response?.data||s.message),s}}},iC=()=>{const{id:t}=Av(),e=mr(),[s,n]=_.useState(null),[i,l]=_.useState(!0),[c,u]=_.useState([]),[h,m]=_.useState(!0),[p,x]=_.useState(null),[b,w]=_.useState(""),[j,v]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(!1),[C,D]=_.useState(null),[A,F]=_.useState(!1),[I,M]=_.useState(!1),[V,H]=_.useState(null),[O,K]=_.useState(!1),[U,ne]=_.useState([]),[re,$]=_.useState(!1),[J,Y]=_.useState({from:"",to:""}),[ee,te]=_.useState({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""});function P(){const se=new Date;se.setDate(se.getDate()-1);const le=se.getFullYear(),me=String(se.getMonth()+1).padStart(2,"0"),Ke=String(se.getDate()).padStart(2,"0");return`${le}-${me}-${Ke}`}const R=()=>{const se=new Date,le=new Date(se.getFullYear(),se.getMonth(),1),me=new Date(se.getFullYear(),se.getMonth()+1,0),Ke=Xt=>{const ns=Xt.getFullYear(),Ss=String(Xt.getMonth()+1).padStart(2,"0"),ms=String(Xt.getDate()).padStart(2,"0");return`${ns}-${Ss}-${ms}`},$s={from:Ke(le),to:Ke(me)};return console.log("Current month range:",$s),$s},de=async()=>{try{l(!0);const se=await sn.getCampaign(t);se.success&&se.data?n(se.data):x("Campaign not found")}catch(se){console.error("Error fetching campaign:",se),x("Failed to load campaign details")}finally{l(!1)}},he=async()=>{try{m(!0),x(null);const se={search:b,page:j,limit:N,date_from:De(J.from),date_to:De(J.to)},le=await Ga.getByCampaignId(t,se);le.success?u(le.data||[]):x(le.message||"Failed to fetch campaign data")}catch(se){x(se.response?.data?.message||"Failed to fetch campaign data"),console.error("Error fetching campaign data:",se)}finally{m(!1)}},B=async()=>{try{$(!0);const se=await Ga.getCardsForDropdown();se.success&&ne(se.data||[])}catch(se){console.error("Error fetching cards:",se)}finally{$(!1)}};_.useEffect(()=>{t&&(de(),B())},[t]),_.useEffect(()=>{t&&ke(J.from)&&ke(J.to)&&he()},[t,b,j,J]);const Z=se=>{const{name:le,value:me}=se.target;te(Ke=>({...Ke,[le]:me}))},ue=async se=>{se.preventDefault();try{if(F(!0),x(null),!ee.card_id||!ee.data_date){x("Card and Date are required fields");return}const le={campaign_id:parseInt(t),facebook_result:parseInt(ee.facebook_result)||0,zoho_result:parseInt(ee.zoho_result)||0,spent:parseFloat(ee.spent)||0,data_date:ee.data_date,card_id:parseInt(ee.card_id)};let me;if(C?me=await Ga.update(C.id,le):me=await Ga.create(le),me.success||me.data)S(!1),D(null),te({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""}),he();else throw new Error(me.message||"Operation failed")}catch(le){console.error("Form submission error:",le);const me=le.response?.data?.message||le.response?.data?.error||le.message||"Operation failed";x(me)}finally{F(!1)}},ge=async se=>{try{K(!0);const le=await Ga.delete(se);if(le.success)M(!1),H(null),he();else throw new Error(le.message||"Delete failed")}catch(le){console.error("Delete error:",le),x(le.response?.data?.message||"Delete failed")}finally{K(!1)}},Ie=se=>{w(se.target.value),v(1)},dt=se=>{x(null),D(se),te({facebook_result:se.facebook_result?.toString()||"",zoho_result:se.zoho_result?.toString()||"",spent:se.spent?.toString()||"",data_date:se.data_date||"",card_id:se.card_id?.toString()||""}),S(!0)},ye=()=>{x(null),D(null),te({facebook_result:"",zoho_result:"",spent:"",data_date:P(),card_id:""}),S(!0)},Be=se=>{H(se),M(!0)},ss=se=>se?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(se)):"₹0.00",X=se=>{const le=U.find(me=>me.id===se);return le?le.card_name:"-"},be=se=>{if(!se)return"";if(se.includes("T")||se.includes("-"))try{const le=new Date(se);if(!isNaN(le.getTime())){const me=String(le.getDate()).padStart(2,"0"),Ke=String(le.getMonth()+1).padStart(2,"0"),$s=le.getFullYear();return`${me}/${Ke}/${$s}`}}catch(le){console.error("Error parsing date:",se,le)}if(se.match(/^\d{4}-\d{2}-\d{2}$/)){const[le,me,Ke]=se.split("-");return`${Ke}/${me}/${le}`}return se},De=se=>{if(!se)return"";const[le,me,Ke]=se.split("/");return`${Ke}-${me.padStart(2,"0")}-${le.padStart(2,"0")}`},ke=se=>{if(!se)return!1;const le=se.split("/");if(le.length!==3)return!1;const[me,Ke,$s]=le,Xt=parseInt(me,10),ns=parseInt(Ke,10),Ss=parseInt($s,10);if(isNaN(Xt)||isNaN(ns)||isNaN(Ss)||Xt<1||Xt>31||ns<1||ns>12||Ss<1900||Ss>2100)return!1;const ms=new Date(Ss,ns-1,Xt);return ms.getFullYear()===Ss&&ms.getMonth()===ns-1&&ms.getDate()===Xt};_.useEffect(()=>{const se=R();Y({from:be(se.from),to:be(se.to)})},[]);const Ae=(se,le)=>{let me=le.replace(/[^0-9/]/g,"");if(me.length>=2&&me.charAt(2)!=="/"&&(me.length===2?me=me+"/":me.length>2&&me.length<=4&&(me=me.substring(0,2)+"/"+me.substring(2))),me.length>=5&&me.charAt(5)!=="/"){if(me.length===5)me=me+"/";else if(me.length>5){const Ke=me.split("/");Ke.length===2&&(me=Ke[0]+"/"+Ke[1].substring(0,2)+"/"+Ke[1].substring(2))}}me.length<=10&&Y(Ke=>({...Ke,[se]:me}))},je=(se,le)=>{le&&Y(me=>({...me,[se]:be(le)}))},Ve=se=>{let le=se.replace(/[^0-9/]/g,"");if(le.length>=2&&le.charAt(2)!=="/"&&(le.length===2?le=le+"/":le.length>2&&le.length<=4&&(le=le.substring(0,2)+"/"+le.substring(2))),le.length>=5&&le.charAt(5)!=="/"){if(le.length===5)le=le+"/";else if(le.length>5){const me=le.split("/");me.length===2&&(le=me[0]+"/"+me[1].substring(0,2)+"/"+me[1].substring(2))}}if(le.length<=10)if(ke(le)){const me=De(le);te(Ke=>({...Ke,data_date:me}))}else te(me=>({...me,data_date:le}))},ft=se=>{se&&te(le=>({...le,data_date:se}))};return i?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(se=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},se))})]})}):s?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[a.jsx(vp,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),a.jsx("div",{children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Data"}),a.jsxs("button",{onClick:ye,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Data Entry"]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_from",className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_from_picker").showPicker&&document.getElementById("date_from_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_from",value:J.from,onChange:se=>Ae("from",se.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_from_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>je("from",se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_to",className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_to_picker").showPicker&&document.getElementById("date_to_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_to",value:J.to,onChange:se=>Ae("to",se.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_to_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>je("to",se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",id:"search",placeholder:"Search data...",value:b,onChange:Ie,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:he,disabled:h,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})})]})}),p&&a.jsx("div",{className:"mx-6 mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:p}),a.jsx("button",{onClick:()=>x(null),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"overflow-hidden",children:h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading performance data..."})]}):c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(ts,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No performance data yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your campaign performance by adding data entries."}),a.jsxs("button",{onClick:ye,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add First Entry"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Card"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(se=>{const le=parseInt(se.facebook_result)||0,me=parseInt(se.zoho_result)||0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Fn(se.data_date)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:le})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:me})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-green-600",children:ss(se.spent)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-blue-600 font-medium",children:le>0?ss(parseFloat(se.spent)/le):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-purple-600 font-medium",children:me>0?ss(parseFloat(se.spent)/me):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:se.card_display_name||se.card_name||X(se.card_id)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>dt(se),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(In,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>Be(se),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(_s,{className:"h-4 w-4"})})]})})]},se.id)})})]})})})]}),E&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:C?"Edit Performance Data":"Add Performance Data"}),p&&E&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-4 w-4 text-red-400"}),a.jsx("div",{className:"ml-2",children:a.jsx("p",{className:"text-sm text-red-700",children:p})})]})}),a.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_result",className:"block text-sm font-medium text-gray-700",children:"Facebook Result"}),a.jsx("input",{type:"number",id:"facebook_result",name:"facebook_result",value:ee.facebook_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"zoho_result",className:"block text-sm font-medium text-gray-700",children:"Zoho Result"}),a.jsx("input",{type:"number",id:"zoho_result",name:"zoho_result",value:ee.zoho_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"spent",className:"block text-sm font-medium text-gray-700",children:"Spent (₹)"}),a.jsx("input",{type:"number",step:"0.01",id:"spent",name:"spent",value:ee.spent,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"data_date",className:"block text-sm font-medium text-gray-700",children:"Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("form_date_picker").showPicker&&document.getElementById("form_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"data_date",name:"data_date",value:ee.data_date?be(ee.data_date):"",onChange:se=>Ve(se.target.value),placeholder:"DD/MM/YYYY",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3 pl-10"}),a.jsx("input",{type:"date",id:"form_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>ft(se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:ee.card_id,onChange:Z,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3",children:[a.jsx("option",{value:"",children:"Select Card"}),U.map(se=>a.jsx("option",{value:se.id,children:se.card_name},se.id))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{S(!1),D(null),x(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:A,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:A||re,children:A?"Saving...":C?"Update":"Create"})]})]})]})})}),I&&V&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(He,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Performance Data"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this performance data entry? This action cannot be undone."})}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{M(!1),H(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:O,children:"Cancel"}),a.jsx("button",{onClick:()=>ge(V.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:O,children:O?"Deleting...":"Delete"})]})]})})})]}):a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[a.jsx(vp,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})]})})},sr="/cards",Hr={getAll:async(t={})=>{try{return(await oe.get(sr,{params:t})).data}catch(e){throw console.error("API get all cards error:",e.response?.data||e),e}},getActive:async(t={})=>{try{return(await oe.get(`${sr}/active`,{params:t})).data}catch(e){throw console.error("API get active cards error:",e.response?.data||e),e}},getById:async t=>{try{return(await oe.get(`${sr}/${t}`)).data}catch(e){throw console.error("API get card error:",e.response?.data||e),e}},create:async t=>{try{return(await oe.post(sr,t)).data}catch(e){throw console.error("API create card error:",e.response?.data||e),e}},update:async(t,e)=>{try{return(await oe.put(`${sr}/${t}`,e)).data}catch(s){throw console.error("API update card error:",s.response?.data||s),s}},addBalance:async(t,e,s="")=>{try{return(await oe.post(`${sr}/${t}/add-balance`,{amount:Number(e),description:s||""})).data}catch(n){throw console.error("API add balance error:",n.response?.data||n),n}},delete:async t=>{try{return(await oe.delete(`${sr}/${t}`)).data}catch(e){throw console.error("API delete card error:",e.response?.data||e),e}}},oC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState(""),[u,h]=_.useState({card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),[m,p]=_.useState({});_.useEffect(()=>{h(n?{card_name:n.card_name||"",card_number_last4:n.card_number_last4||"",card_type:n.card_type||"",current_balance:n.current_balance||"",is_active:n.is_active!==void 0?n.is_active:!0}:{card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),p({})},[n,t]),_.useEffect(()=>{t&&c("")},[t]);const x=()=>{const j={};return u.card_name.trim()?u.card_name.length>100&&(j.card_name="Card name must be less than 100 characters"):j.card_name="Card name is required",u.card_number_last4.trim()?/^\d{4}$/.test(u.card_number_last4)||(j.card_number_last4="Must be exactly 4 digits"):j.card_number_last4="Last 4 digits are required",u.card_type||(j.card_type="Card type is required"),u.current_balance.toString().trim()?(isNaN(parseFloat(u.current_balance))||parseFloat(u.current_balance)<0)&&(j.current_balance="Current balance must be a valid positive number"):j.current_balance="Current balance is required",p(j),Object.keys(j).length===0},b=j=>{const{name:v,value:N,type:E,checked:S}=j.target;let C=E==="checkbox"?S:N;if(v==="card_number_last4"&&(C=N.replace(/\D/g,"").slice(0,4)),v==="current_balance")if(N===""||/^\d*\.?\d*$/.test(N))C=N;else return;h(D=>({...D,[v]:C})),m[v]&&p(D=>({...D,[v]:""}))},w=async j=>{if(j.preventDefault(),!!x())try{c("");const v={...u,current_balance:parseFloat(u.current_balance)};await s(v)}catch(v){console.error("Form submission error:",v),c(v?.response?.data?.message||v.message||"An error occurred")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Card":"Add New Card"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-6 w-6"})})]}),l&&a.jsx(sh,{error:l,onDismiss:()=>c(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_name",name:"card_name",value:u.card_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_name?"border-red-500":""}`,placeholder:"Enter card name",maxLength:100,disabled:i}),m.card_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_name})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_number_last4",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last 4 Digits ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_number_last4",name:"card_number_last4",value:u.card_number_last4,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_number_last4?"border-red-500":""}`,placeholder:"1234",maxLength:4,disabled:i}),m.card_number_last4&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_number_last4})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_type",name:"card_type",value:u.card_type,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.card_type?"border-red-500":""}`,placeholder:"e.g., Visa, MasterCard, American Express",maxLength:50,disabled:i}),m.card_type&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.card_type})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"current_balance",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Balance ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"₹"}),a.jsx("input",{type:"text",id:"current_balance",name:"current_balance",value:u.current_balance,onChange:b,className:`mt-1 block w-full pl-7 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${m.current_balance?"border-red-500":""}`,placeholder:"0.00",disabled:i})]}),m.current_balance&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.current_balance})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:u.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},lC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,m]=_.useState(1),[p]=_.useState(10),[x,b]=_.useState(!1),[w,j]=_.useState(null),[v,N]=_.useState(!1),[E,S]=_.useState(!1),[C,D]=_.useState(null),[A,F]=_.useState(!1),[I,M]=_.useState(!1),[V,H]=_.useState(null),[O,K]=_.useState(""),[U,ne]=_.useState(!1),re=async()=>{try{n(!0),l(null);const ye={search:c,page:h,limit:p},Be=await Hr.getAll(ye);Be.success?e(Be.data?.cards||[]):l(Be.message||"Failed to fetch cards")}catch(ye){l(ye.response?.data?.message||"Failed to fetch cards"),console.error("Error fetching cards:",ye)}finally{n(!1)}};_.useEffect(()=>{const ye=setTimeout(()=>{m(1),re()},300);return()=>clearTimeout(ye)},[c]),_.useEffect(()=>{re()},[h]),_.useEffect(()=>{re()},[]);const $=(ye=null)=>{j(ye),b(!0)},J=()=>{b(!1),j(null)},Y=async ye=>{try{if(N(!0),w){const Be=await Hr.update(w.id||w._id,ye);if(!Be.success)throw new Error(Be.message||"Update failed")}else{const Be=await Hr.create(ye);if(!Be.success)throw new Error(Be.message||"Creation failed")}J(),await re()}catch(Be){throw console.error("Form submission error:",Be),Be}finally{N(!1)}},ee=ye=>{D(ye),S(!0)},te=async()=>{if(C)try{F(!0);const ye=await Hr.delete(C.id||C._id);if(!ye.success)throw new Error(ye.message||"Delete failed");S(!1),D(null),await re()}catch(ye){console.error("Delete error:",ye),alert(ye.response?.data?.message||"Failed to delete card")}finally{F(!1)}},P=()=>{S(!1),D(null)},R=ye=>{H(ye),K(""),M(!0)},de=()=>{M(!1),H(null),K("")},he=async()=>{if(!V||!O)return;const ye=parseFloat(O);if(isNaN(ye)||ye<=0){alert("Please enter a valid positive amount");return}try{ne(!0);const Be=await Hr.addBalance(V.id||V._id,ye);if(!Be.success)throw new Error(Be.message||"Failed to add balance");M(!1),H(null),K(""),await re()}catch(Be){console.error("Add balance error:",Be),alert(Be.response?.data?.message||"Failed to add balance")}finally{ne(!1)}},B=_.useMemo(()=>c.trim()?t.filter(ye=>ye.card_name?.toLowerCase().includes(c.toLowerCase())||ye.card_number_last4?.includes(c)||ye.card_type?.toLowerCase().includes(c.toLowerCase())):t,[t,c]),Z=B.length,ue=Math.ceil(Z/p),ge=(h-1)*p,Ie=ge+p,dt=B.slice(ge,Ie);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Yr,{className:"h-7 w-7 text-blue-600"}),"Cards Management"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>re(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>$(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Card"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:ye=>u(ye.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cards..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((ye,Be)=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},Be))}):dt.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by adding your first card."}),!c&&a.jsxs("button",{onClick:()=>$(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Add Card"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:dt.map(ye=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:ye.card_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["•••• •••• •••• ",ye.card_number_last4]})]}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ye.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ye.is_active?a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-3 h-3 mr-1"})," Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(kl,{className:"w-3 h-3 mr-1"})," Inactive"]})})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Card Type"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:ye.card_type||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Balance"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ei,{className:"h-4 w-4 text-green-600 mr-1"}),a.jsx("span",{className:"text-sm font-semibold text-green-600",children:Number(ye.current_balance||0).toFixed(2)})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Dn,{className:"h-3 w-3 mr-1"}),Fn(ye.created_at)]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>R(ye),className:"inline-flex items-center px-3 py-1.5 border border-green-300 shadow-sm text-xs font-medium rounded text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[a.jsx(ct,{className:"h-3 w-3 mr-1"}),"Add Balance"]}),a.jsxs("button",{onClick:()=>$(ye),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(In,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>ee(ye),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[a.jsx(_s,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]})},ye.id||ye._id))}),ue>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",ge+1," to ",Math.min(Ie,Z)," of ",Z," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>m(ye=>Math.max(1,ye-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",ue]}),a.jsx("button",{onClick:()=>m(ye=>Math.min(ue,ye+1)),disabled:h>=ue,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(oC,{isOpen:x,onClose:J,onSubmit:Y,editData:w,isLoading:v}),E&&C&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(He,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Card"}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',C.card_name,'"? This action cannot be undone.']})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:te,disabled:A,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:A?"Deleting...":"Delete"}),a.jsx("button",{onClick:P,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),I&&V&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(ei,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Balance"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['Add balance to "',V.card_name,'"']}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"balance-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (₹)"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ei,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"number",id:"balance-amount",value:O,onChange:ye=>K(ye.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]})]})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:he,disabled:U||!O,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:U?"Adding...":"Add Balance"}),a.jsx("button",{onClick:de,disabled:U,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Zo={getAll:async(t={})=>(await oe.get("/card-users",{params:t})).data,getById:async t=>(await oe.get(`/card-users/${t}`)).data,create:async t=>(await oe.post("/card-users",t)).data,update:async(t,e)=>(await oe.put(`/card-users/${t}`,e)).data,delete:async t=>(await oe.delete(`/card-users/${t}`)).data,getCardsByUser:async t=>(await oe.get(`/card-users/user/${t}/cards`)).data,getUsersByCard:async t=>(await oe.get(`/card-users/card/${t}/users`)).data},el=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}/${s}/${e}`},Xg=t=>{if(!t)return"";if(t.includes("T")){const i=new Date(t);if(!isNaN(i.getTime())){const l=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0");return`${String(i.getDate()).padStart(2,"0")}/${c}/${l}`}}const[e,s,n]=t.split("-");return e&&s&&n?`${n}/${s}/${e}`:""},cC=t=>{if(!t)return"";const[e,s,n]=t.split("/");return`${n}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`},dC=({isOpen:t,onClose:e,onSubmit:s,editData:n,isLoading:i})=>{const[l,c]=_.useState({card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),[u,h]=_.useState({}),[m,p]=_.useState([]),[x,b]=_.useState([]),[w,j]=_.useState(!1);_.useEffect(()=>{t&&(c(n?{card_id:n.card_id?.toString()||"",user_id:n.user_id?.toString()||"",assigned_date:n.assigned_date?Xg(n.assigned_date):el(),is_primary:!!n.is_primary}:{card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),h({}))},[t,n]),_.useEffect(()=>{t&&v()},[t]);const v=async()=>{j(!0);try{console.log("🔄 CardUsersForm: Loading options..."),console.log("📡 CardUsersForm: Calling cardsService.getActive...");const A=await Hr.getActive({limit:100});console.log("📨 CardUsersForm: Cards response:",A);const F=A?.data?.cards||A?.data||[];console.log("📋 CardUsersForm: Extracted cards list:",F),console.log("📊 CardUsersForm: Cards list length:",F.length),Array.isArray(F)&&F.length>0&&F.forEach((V,H)=>{console.log(`   Card ${H+1}: ID=${V.id}, Name="${V.card_name}", Balance=${V.current_balance}`)}),p(Array.isArray(F)?F:[]),console.log("👥 CardUsersForm: Loading users...");const M=(await q0.getForDropdown())?.data||[];console.log("👥 CardUsersForm: Users loaded:",M.length),b(Array.isArray(M)?M:[])}catch(A){console.error("❌ CardUsersForm: Error loading options:",A),p([]),b([])}finally{j(!1)}},N=A=>{const{name:F,value:I,type:M,checked:V}=A.target;if(F==="assigned_date"){let H=I.replace(/[^0-9/]/g,"");if(H.length>=2&&H.charAt(2)!=="/"&&(H.length===2?H=H+"/":H.length>2&&H.length<=4&&(H=H.substring(0,2)+"/"+H.substring(2))),H.length>=5&&H.charAt(5)!=="/"){if(H.length===5)H=H+"/";else if(H.length>5){const O=H.split("/");O.length===2&&(H=O[0]+"/"+O[1].substring(0,2)+"/"+O[1].substring(2))}}H.length<=10&&c(O=>({...O,[F]:H}))}else c(H=>({...H,[F]:M==="checkbox"?V:I}));u[F]&&h(H=>({...H,[F]:""}))},E=()=>{const A={};return l.card_id||(A.card_id="Card is required"),l.user_id||(A.user_id="User is required"),l.assigned_date||(A.assigned_date="Assigned date is required"),h(A),Object.keys(A).length===0},S=async A=>{if(A.preventDefault(),!!E())try{const F={...l,card_id:parseInt(l.card_id),user_id:parseInt(l.user_id),assigned_date:cC(l.assigned_date)};await s(F)}catch(F){console.error("Form submission error:",F),h({submit:F.response?.data?.message||F.message||"An error occurred while saving"})}},C=A=>{A&&c(F=>({...F,assigned_date:Xg(A)}))},D=()=>{c({card_id:"",user_id:"",assigned_date:el(),is_primary:!1}),h({}),e()};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:D}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsx("button",{onClick:D,className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.jsx(it,{className:"h-6 w-6"})})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"w-full mt-3 text-center sm:mt-0 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:n?"Edit Card Assignment":"Assign Card to User"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.submit&&a.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:u.submit})]})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:l.card_id,onChange:N,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.card_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a card..."}),m.map(A=>a.jsxs("option",{value:A.id,children:[A.card_name," (••••",A.card_number_last4,")"]},A.id))]}),u.card_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.card_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"User *"}),a.jsxs("select",{id:"user_id",name:"user_id",value:l.user_id,onChange:N,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.user_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a user..."}),x.map(A=>a.jsx("option",{value:A.id,children:A.username},A.id))]}),u.user_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.user_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"assigned_date",className:"block text-sm font-medium text-gray-700",children:"Assigned Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("assigned_date_picker").showPicker&&document.getElementById("assigned_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"assigned_date",name:"assigned_date",value:l.assigned_date,onChange:N,placeholder:"DD/MM/YYYY",disabled:i,required:!0,className:`pl-10 mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.assigned_date?"border-red-300":"border-gray-300"}`}),a.jsx("input",{type:"date",id:"assigned_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:A=>C(A.target.value),tabIndex:-1})]}),u.assigned_date&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.assigned_date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_primary",name:"is_primary",checked:l.is_primary,onChange:N,disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-700",children:"Set as primary card for this user"})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:D,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i||w,className:"px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Saving...":n?"Update Assignment":"Create Assignment"})]})]})]})})]})]})}):null},uC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,m]=_.useState(1),[p]=_.useState(10),[x,b]=_.useState(!1),[w,j]=_.useState(null),[v,N]=_.useState(!1),[E,S]=_.useState(!1),[C,D]=_.useState(null),[A,F]=_.useState(!1),[I,M]=_.useState(null),V=async()=>{try{n(!0),l(null);const R={search:c,page:h,limit:p},de=await Zo.getAll(R);if(de.success){console.log("📊 Card Users API Response:",de),console.log("📊 Response data structure:",Object.keys(de.data||{}));const he=de.data?.assignments||de.data?.cardUsers||de.data||[];console.log("📊 Extracted assignments:",he.length),he.length>0&&console.log("📊 First assignment sample:",{id:he[0].id,card_name:he[0].card_name,username:he[0].username,card_id:he[0].card_id,user_id:he[0].user_id}),e(he)}else l(de.message||"Failed to fetch card assignments")}catch(R){l(R.response?.data?.message||"Failed to fetch card assignments"),console.error("Error fetching assignments:",R)}finally{n(!1)}};_.useEffect(()=>{const R=setTimeout(()=>{m(1),V()},300);return()=>clearTimeout(R)},[c]),_.useEffect(()=>{V()},[h]),_.useEffect(()=>{V()},[]);const H=(R=null)=>{j(R),b(!0)},O=()=>{b(!1),j(null)},K=async R=>{try{if(N(!0),w){const de=await Zo.update(w.id||w._id,R);if(!de.success)throw new Error(de.message||"Update failed")}else{const de=await Zo.create(R);if(!de.success)throw new Error(de.message||"Creation failed")}O(),await V()}catch(de){throw console.error("Form submission error:",de),de}finally{N(!1)}},U=R=>{D(R),S(!0)},ne=async()=>{if(C)try{F(!0),M(null);const R=await Zo.delete(C.id||C._id);if(!R.success)throw new Error(R.message||"Delete failed");S(!1),D(null),M(null),await V()}catch(R){console.error("Delete error:",R);const de=R.response?.data?.message||R.message||"Failed to delete assignment";M(de)}finally{F(!1)}},re=()=>{S(!1),D(null),M(null)},$=_.useMemo(()=>c.trim()?t.filter(R=>R.card_name?.toLowerCase().includes(c.toLowerCase())||R.username?.toLowerCase().includes(c.toLowerCase())||R.card_number_last4?.includes(c)):t,[t,c]),J=$.length,Y=Math.ceil(J/p),ee=(h-1)*p,te=ee+p,P=$.slice(ee,te);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(cl,{className:"h-7 w-7 text-blue-600"}),"Card User Assignments"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>V(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>H(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:R=>u(R.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search assignments..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((R,de)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},de))})})}):P.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx(cl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by assigning a card to a user."}),!c&&a.jsxs("button",{onClick:()=>H(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(ct,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yr,{className:"h-4 w-4 mr-1"}),"Card"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ui,{className:"h-4 w-4 mr-1"}),"User"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Assigned Date"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(R=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yr,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.card_name||"Unknown Card"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["••••",R.card_number_last4||"****"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ui,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.username||"Unknown User"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.assigned_date?Fn(R.assigned_date):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.is_primary?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.is_primary?a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-3 h-3 mr-1"})," Primary"]}):a.jsxs(a.Fragment,{children:[a.jsx(kl,{className:"w-3 h-3 mr-1"})," Secondary"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>H(R),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(In,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>U(R),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[a.jsx(_s,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},R.id||R._id))})]})}),Y>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",ee+1," to ",Math.min(te,J)," of ",J," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>m(R=>Math.max(1,R-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",Y]}),a.jsx("button",{onClick:()=>m(R=>Math.min(Y,R+1)),disabled:h>=Y,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(dC,{isOpen:x,onClose:O,onSubmit:K,editData:w,isLoading:v}),E&&C&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(He,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Assignment"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the assignment of "',C.card_name,'" to "',C.username,'"? This action cannot be undone.']}),I&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:I})})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:ne,disabled:A,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:A?"Deleting...":"Delete"}),a.jsx("button",{onClick:re,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},Le={buildDaily:async t=>{try{return(await oe.post(`/reports/build?date=${t}`)).data}catch(e){throw console.error("Error building daily reports:",e),e}},buildRange:async(t,e)=>{try{return(await oe.post(`/reports/build-range?from=${t}&to=${e}`)).data}catch(s){throw console.error("Error building range reports:",s),s}},rebuildCampaignRange:async(t,e,s)=>{try{return(await oe.post(`/reports/rebuild-campaign?campaign_id=${t}&from=${e}&to=${s}`)).data}catch(n){throw console.error("Error rebuilding campaign reports:",n),n}},generateReport:async(t={})=>{try{const e=new URLSearchParams,s={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};Object.entries(t).forEach(([i,l])=>{if(l!=null&&l!==""){const c=s[i]||i;e.append(c,l)}});const n=await oe.get(`/reports?${e.toString()}`);if(n.data.success&&n.data.data){const i=Array.isArray(n.data.data)?n.data.data:[],l=n.data.meta||{},c={53:"Tradekaro",54:"BazaarFX"},u=i.map(m=>{const p=parseFloat(m.spent)||0,x=parseInt(m.leads)||0,b=Math.round(x*.526),w=x-b;let j="Unknown Brand";return m.brand_name?j=m.brand_name:m.brand&&c[m.brand]&&(j=c[m.brand]),{id:m.id,campaign_id:m.campaign_id,campaign_name:m.campaign_name,brand:j,report_date:m.report_date,facebook_result:b,zoho_result:w,leads:x,spent:p,cost_per_lead:parseFloat(m.cost_per_lead)||0,facebook_cost_per_lead:b>0?p/b:0,zoho_cost_per_lead:w>0?p/w:0}}),h={totalCampaigns:i.length>0?[...new Set(i.map(m=>m.campaign_id))].length:0,totalRecords:i.length,totalFacebookResults:i.reduce((m,p)=>m+(p.facebook_result||0),0),totalZohoResults:i.reduce((m,p)=>m+(p.zoho_result||0),0),totalResults:i.reduce((m,p)=>m+(p.leads||0),0),totalSpent:i.reduce((m,p)=>m+(p.spent||0),0),avgCostPerResult:0,dateRange:{from:t.dateFrom||"",to:t.dateTo||""}};return h.totalResults>0&&(h.avgCostPerResult=h.totalSpent/h.totalResults),{success:!0,message:`Found ${u.length} reports from reports table`,data:{reports:u,summary:h,filters:t},meta:l}}return n.data}catch(e){throw console.error("Error generating report:",e),e}},getAll:async(t={})=>{try{const e=new URLSearchParams,{page:s=1,limit:n=10,...i}=t;return e.append("page",s),e.append("limit",n),Object.entries(i).forEach(([c,u])=>{u!=null&&u!==""&&e.append(c,u)}),(await oe.get(`/reports?${e.toString()}`)).data}catch(e){throw console.error("Error fetching reports:",e),e}},getById:async t=>{try{return(await oe.get(`/reports/${t}`)).data}catch(e){throw console.error("Error fetching report by ID:",e),e}},create:async t=>{try{return(await oe.post("/reports",t)).data}catch(e){throw console.error("Error creating report:",e),e}},update:async(t,e)=>{try{return(await oe.put(`/reports/${t}`,e)).data}catch(s){throw console.error("Error updating report:",s),s}},delete:async t=>{try{return(await oe.delete(`/reports/${t}`)).data}catch(e){throw console.error("Error deleting report:",e),e}},getFilterOptions:async()=>{try{return(await oe.get("/reports/filters")).data}catch(t){throw console.error("Error fetching filter options:",t),t}},getDashboardStats:async()=>{try{return(await oe.get("/reports/dashboard")).data}catch(t){throw console.error("Error fetching dashboard stats:",t),t}},formatCurrency:t=>t==null?"₹0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(t),formatNumber:t=>t==null?"0":new Intl.NumberFormat("en-IN").format(t),calculateROI:(t,e)=>!e||e===0?0:(t-e)/e*100,calculateCostPerResult:(t,e)=>!e||e===0?0:t/e,getDateRangePresets:()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()-1);const s=new Date(t);s.setDate(s.getDate()-7);const n=new Date(t);n.setMonth(n.getMonth()-1);const i=new Date(t);i.setMonth(i.getMonth()-3);const l=c=>c.toISOString().split("T")[0];return{today:{label:"Today",from:l(t),to:l(t)},yesterday:{label:"Yesterday",from:l(e),to:l(e)},lastWeek:{label:"Last 7 Days",from:l(s),to:l(t)},lastMonth:{label:"Last 30 Days",from:l(n),to:l(t)},lastThreeMonths:{label:"Last 3 Months",from:l(i),to:l(t)}}}},Gg=t=>{if(!t)return"";const e=new Date(t),s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`},hC=({isOpen:t,onClose:e,onReportGenerated:s})=>{const[n,i]=_.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[l,c]=_.useState(!1),[u,h]=_.useState({campaigns:[],brands:[],dateRange:{}}),[m,p]=_.useState("");_.useEffect(()=>{if(t){x();const C=new Date,D=new Date;D.setDate(C.getDate()-7),i({dateFrom:D.toISOString().split("T")[0],dateTo:C.toISOString().split("T")[0],campaignId:"",brand:""}),p("")}},[t]);const x=async()=>{try{const C=await Le.getFilterOptions();C.success&&h(C.data)}catch(C){console.error("Error loading filter options:",C)}},b=(C,D)=>{i(A=>({...A,[C]:D})),p("")},w=()=>{if(!n.dateFrom||!n.dateTo)return p("Please select both start and end dates"),!1;const C=new Date(n.dateFrom),D=new Date(n.dateTo);if(C>D)return p("Start date cannot be after end date"),!1;const A=Math.abs(D-C);return Math.ceil(A/(1e3*60*60*24))>365?(p("Date range cannot exceed 1 year"),!1):!0},j=async C=>{try{const D=new URLSearchParams,A={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};Object.entries(C).forEach(([K,U])=>{if(U!=null&&U!==""){const ne=A[K]||K;D.append(ne,U)}});const F=await oe.get(`/reports/export?${D.toString()}`,{responseType:"blob"}),I=new Blob([F.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),M=window.URL.createObjectURL(I),V=document.createElement("a");V.href=M;const H=F.headers["content-disposition"];let O=`Campaign_Reports_${C.dateFrom}_to_${C.dateTo}.xlsx`;if(H){const K=H.match(/filename="(.+)"/);K&&(O=K[1])}V.download=O,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(M),s&&s("Excel report downloaded successfully"),e()}catch(D){console.error("Error downloading Excel report:",D),D.response?.status===404?p("No data found for the selected criteria. Please try different filters."):p("Failed to download Excel report. Please try again.")}},v=async()=>{if(w()){c(!0),p("");try{const C=await Le.generateReport(n);C.success&&C.data?(s(C.data),e()):p("No data found for the selected criteria. Please try different filters.")}catch(C){console.error("Error generating report:",C),C.response?.status===404?p("No data found for the selected criteria. Please try different filters."):C.response?.status===401?p("Authentication failed. Please log in again."):p("Failed to generate report. Please try again.")}finally{c(!1)}}},N=async()=>{if(w()){c(!0),p("");try{await j(n)}catch(C){console.error("Error downloading Excel report:",C),C.response?.status===404?p("No data found for the selected criteria. Please try different filters."):C.response?.status===401?p("Authentication failed. Please log in again."):p("Failed to download Excel report. Please try again.")}finally{c(!1)}}},E=()=>{l||e()},S=C=>{const A=Le.getDateRangePresets()[C];A&&i(F=>({...F,dateFrom:A.from,dateTo:A.to}))};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:E}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxs("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-6 w-6 text-blue-600 mr-2"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Report"})]}),a.jsx("button",{onClick:E,disabled:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"h-5 w-5"})})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View report data on screen or download an Excel file based on your selected filters"})]}),a.jsxs("div",{className:"bg-white px-6 py-4 space-y-6",children:[m&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-600",children:m})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(Dn,{className:"h-4 w-4 mr-2 text-blue-600"}),"Date Range *"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Le.getDateRangePresets()).map(([C,D])=>a.jsx("button",{onClick:()=>S(C),disabled:l,className:"px-3 py-1 text-xs border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:D.label},C))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),a.jsx("input",{type:"date",value:n.dateFrom,onChange:C=>b("dateFrom",C.target.value),disabled:l,max:u.dateRange?.latest,min:u.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),a.jsx("input",{type:"date",value:n.dateTo,onChange:C=>b("dateTo",C.target.value),disabled:l,max:u.dateRange?.latest,min:n.dateFrom||u.dateRange?.earliest,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(Lu,{className:"h-4 w-4 mr-2 text-blue-600"}),"Filters (Optional)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Campaign"}),a.jsxs("select",{value:n.campaignId,onChange:C=>b("campaignId",C.target.value),disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Campaigns"}),u.campaigns?.map(C=>a.jsxs("option",{value:C.id,children:[C.name," ",C.brand&&`(${C.brand})`]},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Brand"}),a.jsxs("select",{value:n.brand,onChange:C=>b("brand",C.target.value),disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Brands"}),u.brands?.map(C=>a.jsx("option",{value:C,children:C},C))]})]})]})]}),u.dateRange?.earliest&&u.dateRange?.latest&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"Available Data:"})," ",Gg(u.dateRange.earliest)," to ",Gg(u.dateRange.latest)]}),a.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[a.jsx("strong",{children:"Campaigns:"})," ",u.campaigns?.length||0," campaigns available"]}),a.jsxs("p",{className:"text-sm text-blue-600",children:[a.jsx("strong",{children:"Brands:"})," ",u.brands?.length||0," brands available"]})]})]}),a.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:v,disabled:l||!n.dateFrom||!n.dateTo,className:"w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),"View Report"]})}),a.jsx("button",{type:"button",onClick:N,disabled:l||!n.dateFrom||!n.dateTo,className:"w-full inline-flex justify-center items-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Downloading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Fu,{className:"h-4 w-4 mr-2"}),"Download Excel"]})}),a.jsx("button",{type:"button",onClick:E,disabled:l,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}):null},Qd=t=>{if(!t)return"";const e=new Date(t),s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`},fC=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!1),[i,l]=_.useState(null),[c,u]=_.useState(null),[h,m]=_.useState(!1),[p,x]=_.useState("summary");_.useEffect(()=>{b()},[]);const b=async()=>{try{n(!0);const S=await Le.getDashboardStats();S.success&&u(S.data)}catch(S){console.error("Error loading dashboard stats:",S),l("Failed to load dashboard statistics")}finally{n(!1)}},w=S=>{e(S),l(null)},j=()=>{e(null),l(null)},v=({title:S,value:C,icon:D,change:A,changeType:F,description:I})=>a.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:S}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C}),I&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I}),A&&a.jsxs("p",{className:`text-sm flex items-center mt-2 ${F==="positive"?"text-green-600":"text-red-600"}`,children:[F==="positive"?a.jsx(Kr,{className:"h-4 w-4 mr-1"}):a.jsx(Vx,{className:"h-4 w-4 mr-1"}),A]})]}),a.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:a.jsx(D,{className:"h-6 w-6 text-blue-600"})})]})}),N=({title:S,data:C})=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:S}),a.jsx("div",{className:"space-y-4",children:Object.entries(C).map(([D,A])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:D.replace(/([A-Z])/g," $1").toLowerCase()}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:typeof A=="number"&&D.includes("spent")?Le.formatCurrency(A):typeof A=="number"?Le.formatNumber(A):A})]},D))})]}),E=({reports:S})=>a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Detailed Report Data"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((C,D)=>{const A=C.facebook_cost_per_lead?parseFloat(C.facebook_cost_per_lead):0,F=C.zoho_cost_per_lead?parseFloat(C.zoho_cost_per_lead):0,I=M=>!M||M===0?"bg-gray-100 text-gray-800":M<5?"bg-green-100 text-green-800":M<10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.campaign_name||`Campaign ${C.campaign_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Qd(C.report_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Le.formatCurrency(C.spent)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Le.formatNumber(C.facebook_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Le.formatNumber(C.zoho_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I(A)}`,children:A>0?Le.formatCurrency(A):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I(F)}`,children:F>0?Le.formatCurrency(F):"N/A"})})]},D)})})]})})]})});return s&&!t&&!c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),a.jsx("p",{className:"text-gray-600",children:"Generate and analyze comprehensive advertising reports"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),"Generate Report"]}),t&&a.jsx("button",{onClick:j,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Report"})]})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-600",children:i})]})}),t?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(v,{title:"Total Spent",value:Le.formatCurrency(t.summary?.totalSpent||0),icon:ei,description:`From ${Qd(t.filters?.dateFrom)} to ${Qd(t.filters?.dateTo)}`}),a.jsx(v,{title:"Total Results",value:Le.formatNumber(t.summary?.totalResults||0),icon:Ns,description:`Facebook: ${Le.formatNumber(t.summary?.totalFacebookResults||0)} | Zoho: ${Le.formatNumber(t.summary?.totalZohoResults||0)}`}),a.jsx(v,{title:"Campaigns",value:Le.formatNumber(t.summary?.totalCampaigns||0),icon:Mn,description:`${t.summary?.totalRecords||0} total records`}),a.jsx(v,{title:"Avg Cost/Result",value:Le.formatCurrency(t.summary?.avgCostPerResult||0),icon:du})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>x("summary"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="summary"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Summary"}),a.jsx("button",{onClick:()=>x("detailed"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="detailed"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Detailed Data"}),a.jsx("button",{onClick:()=>x("breakdown"),className:`px-3 py-2 rounded-md text-sm font-medium ${p==="breakdown"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Breakdown"})]})}),p==="summary"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(N,{title:"Summary Statistics",data:t.summary||{}}),t.filters&&a.jsx(N,{title:"Applied Filters",data:t.filters})]}),p==="detailed"&&t.reports&&a.jsx(E,{reports:t.reports}),p==="breakdown"&&a.jsxs("div",{className:"space-y-6",children:[t.brandBreakdown&&t.brandBreakdown.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(zx,{className:"h-5 w-5 mr-2 text-blue-600"}),"Brand Breakdown"]}),a.jsx("div",{className:"space-y-3",children:t.brandBreakdown.map((S,C)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[a.jsx("span",{className:"font-medium text-gray-900",children:S.brand||"Unknown Brand"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Le.formatCurrency(S.total_spent)," spent"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Le.formatNumber(S.total_results)," results | ",S.campaigns_count," campaigns"]})]})]},C))})]}),t.campaignBreakdown&&t.campaignBreakdown.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[a.jsx(ts,{className:"h-5 w-5 mr-2 text-blue-600"}),"Campaign Breakdown"]}),a.jsx("div",{className:"space-y-3",children:t.campaignBreakdown.map((S,C)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:S.campaign_name}),a.jsx("div",{className:"text-xs text-gray-500",children:S.brand})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Le.formatCurrency(S.total_spent)}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Le.formatNumber(S.total_results)," results"]})]})]},C))})]})]})]}):a.jsxs("div",{className:"space-y-6",children:[c&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(v,{title:"Current Month",value:Le.formatCurrency(c.currentMonth?.totalSpent||0),icon:ei,description:`${c.currentMonth?.month} overview`}),a.jsx(v,{title:"Monthly Campaigns",value:Le.formatNumber(c.currentMonth?.campaignsCount||0),icon:Ns,description:"Active this month"}),a.jsx(v,{title:"Monthly Results",value:Le.formatNumber(c.currentMonth?.totalLeads||0),icon:du}),a.jsx(v,{title:"Avg Cost/Lead",value:Le.formatCurrency(c.currentMonth?.avgCostPerLead||0),icon:Kr})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[a.jsx(us,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate Your First Report"}),a.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Generate Report" to create comprehensive reports from your campaign data with custom date ranges and filters.'}),a.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ts,{className:"h-4 w-4 mr-2"}),"Get Started"]})]})]}),a.jsx(hC,{isOpen:h,onClose:()=>m(!1),onReportGenerated:w})]})},mC=()=>a.jsx("div",{className:"p-6",children:a.jsx(fC,{})}),pC=t=>t?new Date(t).toLocaleDateString("en-GB"):"",gC=(t,e)=>{if(!t||!e)return"";const s=new Date(t),n=new Date(e),i=Math.abs(n-s),l=Math.ceil(i/(1e3*60*60*24));return l===0?"Today":l===1?"Yesterday":l<=7?`Last ${l} days`:l<=30?`Last ${Math.ceil(l/7)} weeks`:`${Math.ceil(l/30)} months`},xC=()=>{const[t,e]=_.useState({dateFrom:"",dateTo:"",campaignId:"",brand:""}),[s,n]=_.useState([]),[i,l]=_.useState(null),[c,u]=_.useState(!1),[h,m]=_.useState(""),[p,x]=_.useState({campaigns:[],brands:[],dateRange:{}}),[b,w]=_.useState(!0),[j,v]=_.useState(1),[N]=_.useState(15);_.useEffect(()=>{S(),E()},[]),_.useEffect(()=>{t.dateFrom&&t.dateTo&&C()},[t]);const E=()=>{const U=new Date,ne=new Date;ne.setDate(U.getDate()-30),e(re=>({...re,dateFrom:ne.toISOString().split("T")[0],dateTo:U.toISOString().split("T")[0]}))},S=async()=>{try{const U=await Le.getFilterOptions();U.success&&x(U.data)}catch(U){console.error("Error loading filter options:",U)}},C=async()=>{if(!(!t.dateFrom||!t.dateTo)){u(!0),m("");try{const U=await Le.generateReport(t);if(U.success){const{reports:ne=[],summary:re=null}=U.data||{};n(ne),l(re),v(1),console.log("📊 Reports loaded:",{totalRecords:ne.length,summary:re,filters:t}),ne.length>0&&console.log("🔍 First report data received:",{campaign_name:ne[0].campaign_name,facebook_result:ne[0].facebook_result,zoho_result:ne[0].zoho_result,spent:ne[0].spent,facebook_cost_per_lead:ne[0].facebook_cost_per_lead,zoho_cost_per_lead:ne[0].zoho_cost_per_lead,facebook_cost_per_lead_type:typeof ne[0].facebook_cost_per_lead,zoho_cost_per_lead_type:typeof ne[0].zoho_cost_per_lead})}else m(U.message||"Failed to load reports"),n([]),l(null)}catch(U){console.error("Error loading reports:",U),m("Failed to load reports. Please try again."),n([]),l(null)}finally{u(!1)}}},D=(U,ne)=>{e(re=>({...re,[U]:ne})),m("")},A=U=>{const re=Le.getDateRangePresets()[U];re&&e($=>({...$,dateFrom:re.from,dateTo:re.to}))},F=()=>{e({dateFrom:"",dateTo:"",campaignId:"",brand:""}),n([]),l(null),v(1)},I=Math.ceil(s.length/N),M=(j-1)*N,V=M+N,H=s.slice(M,V),O=U=>{v(Math.max(1,Math.min(U,I)))},K=U=>!U||U===0?"bg-gray-100 text-gray-800":U<5?"bg-green-100 text-green-800":U<10?"bg-yellow-100 text-yellow-800":U<20?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[a.jsx(us,{className:"h-8 w-8 mr-3 text-blue-600"}),"Campaign Reports"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Live data from campaign performance •",s.length>0&&a.jsxs("span",{className:"ml-1",children:[gC(t.dateFrom,t.dateTo)," •",s.length," records"]})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:C,disabled:c||!t.dateFrom||!t.dateTo,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(wt,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Loading...":"Refresh Data"]})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("button",{onClick:()=>w(!b),className:"flex items-center text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:[a.jsx(Lu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Filters & Date Range",a.jsx("svg",{className:`h-4 w-4 ml-2 transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[a.jsx(Dn,{className:"h-4 w-4 inline mr-1"}),"Date Range (Required)"]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(Le.getDateRangePresets()).map(([U,ne])=>a.jsx("button",{onClick:()=>A(U),disabled:c,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors disabled:opacity-50",children:ne.label},U))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"From Date"}),a.jsx("input",{type:"date",value:t.dateFrom,onChange:U=>D("dateFrom",U.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"To Date"}),a.jsx("input",{type:"date",value:t.dateTo,onChange:U=>D("dateTo",U.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Campaign"}),a.jsxs("select",{value:t.campaignId,onChange:U=>D("campaignId",U.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"All Campaigns"}),p.campaigns?.map(U=>a.jsxs("option",{value:U.id,children:[U.name," ",U.brand&&`(${U.brand})`]},U.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),a.jsxs("select",{value:t.brand,onChange:U=>D("brand",U.target.value),disabled:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-50",children:[a.jsx("option",{value:"",children:"All Brands"}),p.brands?.map(U=>a.jsx("option",{value:U,children:U},U))]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[a.jsx("button",{onClick:F,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear all filters"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[s.length," record",s.length!==1?"s":""," found"]})]})]})]}),h&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-3"}),a.jsx("p",{className:"text-sm text-red-700",children:h})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Performance Data"}),s.length>0&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",M+1," to ",Math.min(V,s.length)," of ",s.length," entries"]})]})}),c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Loading campaign data..."})]})}):s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No data available"}),a.jsx("p",{className:"text-gray-600 max-w-sm mx-auto",children:t.dateFrom&&t.dateTo?"No records found for the selected date range and filters. Try adjusting your selection.":"Please select a date range to view campaign reports."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Brand"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Amount Spent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map((U,ne)=>{const re=U.facebook_cost_per_lead?parseFloat(U.facebook_cost_per_lead):0,$=U.zoho_cost_per_lead?parseFloat(U.zoho_cost_per_lead):0;return a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.campaign_name||`Campaign ${U.campaign_id}`})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:U.brand||"Unknown"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:pC(U.report_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Le.formatNumber(U.facebook_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Le.formatNumber(U.zoho_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Le.formatCurrency(U.spent||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${K(re)}`,children:re>0?Le.formatCurrency(re):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${K($)}`,children:$>0?Le.formatCurrency($):"N/A"})})]},`${U.id}-${ne}`)})})]})}),I>1&&a.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:M+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(V,s.length)})," of"," ",a.jsx("span",{className:"font-medium",children:s.length})," results"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>O(j-1),disabled:j===1,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,I)},(U,ne)=>{let re;return I<=5||j<=3?re=ne+1:j>=I-2?re=I-4+ne:re=j-2+ne,a.jsx("button",{onClick:()=>O(re),className:`px-3 py-1 text-sm rounded transition-colors ${j===re?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:re},re)})}),a.jsx("button",{onClick:()=>O(j+1),disabled:j===I,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})]})},yC=()=>a.jsx("div",{className:"p-6",children:a.jsx(xC,{})}),bC=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!0),[i,l]=_.useState(null);_.useEffect(()=>{c()},[]);const c=async()=>{n(!0),l(null);try{const u=localStorage.getItem("authToken")||localStorage.getItem("access_token"),h={"Content-Type":"application/json",...u&&{Authorization:`Bearer ${u}`}},p=await(await fetch("/api/analytics/dashboard",{headers:h})).json();p.success?e(p.data):l(p.message||"Failed to load data")}catch(u){console.error("Error loading data:",u),l("Failed to connect to analytics API")}finally{n(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[a.jsx(ts,{className:"mr-3"}),"Report Analytics Dashboard"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Campaign performance insights and data visualization"})]}),a.jsxs("button",{onClick:c,disabled:s,className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium transition-colors bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50",children:[a.jsx(wt,{className:`h-4 w-4 ${s?"animate-spin":""}`}),a.jsx("span",{children:s?"Loading...":"Refresh"})]})]})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(He,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-600",children:i}),a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Make sure you're logged in and have proper permissions."})]})]})}),t&&a.jsxs("div",{className:"space-y-6",children:[t.topCampaigns&&t.topCampaigns.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:a.jsx("h3",{className:"text-lg font-medium text-white",children:"Top Campaigns"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Brand"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Spent"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.topCampaigns.map((u,h)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.campaign_name||`Campaign ${u.campaign_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.brand||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.total_leads||0}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(u.total_spent||0).toLocaleString()]})]},h))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Debug Information:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Current Month:"})," ",t.overview?.currentMonth||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"User Role:"})," ",t.userRole||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Data Scope:"})," ",t.dataScope||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Top Campaigns Count:"})," ",t.topCampaigns?.length||0]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Brand Performance Count:"})," ",t.brandPerformance?.length||0]})]}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Full Debug Data (Click to expand)"}),a.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})]})]})},vC=()=>a.jsx("div",{className:"p-6",children:a.jsx(bC,{})}),Jd="http://localhost:5000/api",wC=({account:t,onClose:e,onSave:s})=>{const[n,i]=_.useState({email:t?.email||"",password:"",authenticator:t?.authenticator||"",phone_number:t?.phone_number||"",status:t?.status||"enabled"}),[l,c]=_.useState(null),[u,h]=_.useState(t?.id_image_path?`${Jd.replace("/api","")}${t.id_image_path}`:null),[m,p]=_.useState(!1),[x,b]=_.useState(!1),[w,j]=_.useState({}),v=_.useRef(null),N=!!t,E=()=>{const I=localStorage.getItem("authToken"),M=localStorage.getItem("access_token"),V=I||M;return console.log("🔐 [FacebookAccountForm] Token check:",{authToken:I?"Present":"Missing",accessToken:M?"Present":"Missing",finalToken:V?"Present":"Missing"}),V},S=I=>{const{name:M,value:V}=I.target;i(H=>({...H,[M]:V})),w[M]&&j(H=>({...H,[M]:""}))},C=I=>{const M=I.target.files[0];if(M){if(!M.type.startsWith("image/")){Ee.error("Please select an image file");return}if(M.size>5*1024*1024){Ee.error("Image size must be less than 5MB");return}c(M);const V=new FileReader;V.onload=H=>{h(H.target.result)},V.readAsDataURL(M)}},D=()=>{c(null),h(t?.id_image_path?`${Jd.replace("/api","")}${t.id_image_path}`:null),v.current&&(v.current.value="")},A=()=>{const I={};return n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(I.email="Please enter a valid email address"):I.email="Email is required",!N&&!n.password?I.password="Password is required":n.password&&n.password.length<6?I.password="Password must be at least 6 characters long":n.password&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.password)&&(I.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"),n.phone_number&&!/^\+?[\d\s\-\(\)]+$/.test(n.phone_number)&&(I.phone_number="Please enter a valid phone number"),n.authenticator&&n.authenticator.length>500&&(I.authenticator="Authenticator text cannot exceed 500 characters"),j(I),Object.keys(I).length===0},F=async I=>{try{if(I.preventDefault(),console.log("🚀 [FacebookAccountForm] Form submission started"),console.log("📝 [FacebookAccountForm] Form data:",n),console.log("🖼️ [FacebookAccountForm] Selected image:",l?l.name:"None"),!A()){console.log("❌ [FacebookAccountForm] Validation failed"),Ee.error("Please fix the errors before submitting");return}console.log("✅ [FacebookAccountForm] Validation passed, starting API call"),b(!0);try{console.log("📝 [FacebookAccountForm] Starting FormData creation...");const M=new FormData;console.log("📝 [FacebookAccountForm] Adding email:",n.email),M.append("email",n.email),n.password?(console.log("📝 [FacebookAccountForm] Adding password: [HIDDEN]"),M.append("password",n.password)):console.log("📝 [FacebookAccountForm] No password provided"),n.authenticator&&(console.log("📝 [FacebookAccountForm] Adding authenticator"),M.append("authenticator",n.authenticator)),n.phone_number&&(console.log("📝 [FacebookAccountForm] Adding phone_number:",n.phone_number),M.append("phone_number",n.phone_number)),console.log("📝 [FacebookAccountForm] Adding status:",n.status),M.append("status",n.status),l?(console.log("📝 [FacebookAccountForm] Adding image file:",l.name),M.append("id_image",l)):console.log("📝 [FacebookAccountForm] No image file selected"),console.log("✅ [FacebookAccountForm] FormData creation completed");const V=N?`/facebook-accounts/${t.id}`:"/facebook-accounts",H=N?"put":"post",O=`${Jd}${V}`,K=E();console.log("🌍 [FacebookAccountForm] API Details:"),console.log("   Method:",H),console.log("   URL:",O),console.log("   Token:",K?"Present":"Missing"),console.log("   FormData contents:");for(let[ne,re]of M.entries())console.log(`     ${ne}:`,re instanceof File?`File(${re.name})`:re);const U=await Oe({method:H,url:O,data:M,headers:{Authorization:`Bearer ${K}`,"Content-Type":"multipart/form-data"}});console.log("✅ [FacebookAccountForm] API Response received:",U.data),U.data.success?(Ee.success(U.data.message),s()):Ee.error(U.data.message||"Failed to save account")}catch(M){if(console.error("❌ [FacebookAccountForm] Error saving account:",M),console.log("❌ [FacebookAccountForm] Error details:",{status:M.response?.status,statusText:M.response?.statusText,data:M.response?.data}),M.response?.data?.errors){const V={};M.response.data.errors.forEach(H=>{V[H.path||H.param]=H.msg}),j(V),Ee.error("Please fix the validation errors")}else Ee.error(M.response?.data?.message||"Failed to save account")}finally{console.log("🔄 [FacebookAccountForm] Setting loading to false"),b(!1)}}catch(M){console.error("🚫 [FacebookAccountForm] Outer error caught:",M),Ee.error("An unexpected error occurred. Please try again."),b(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-8 mx-auto p-5 border max-w-2xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N?"Edit Facebook Account":"Add Facebook Account"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(it,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:I=>{console.log("📝 [FacebookAccountForm] Form onSubmit triggered"),F(I)},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Ox,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:S,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook email address",required:!0}),w.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(He,{className:"w-4 h-4 mr-1"}),w.email]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Y1,{className:"w-4 h-4 inline mr-1"}),"Password ",!N&&"*",N&&a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(leave empty to keep current password)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:n.password,onChange:S,className:`block w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook password",required:!N}),a.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:m?a.jsx(ci,{className:"w-4 h-4"}):a.jsx(di,{className:"w-4 h-4"})})]}),w.password&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(He,{className:"w-4 h-4 mr-1"}),w.password]}),!w.password&&n.password&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use a strong password with uppercase, lowercase, and numbers"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Ix,{className:"w-4 h-4 inline mr-1"}),"Phone Number",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:n.phone_number,onChange:S,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.phone_number?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"+1234567890"}),w.phone_number&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(He,{className:"w-4 h-4 mr-1"}),w.phone_number]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"authenticator",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(ur,{className:"w-4 h-4 inline mr-1"}),"2FA Authenticator Details",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("textarea",{id:"authenticator",name:"authenticator",value:n.authenticator,onChange:S,rows:3,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.authenticator?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"2FA backup codes, secret key, or other authenticator details...",maxLength:500}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[w.authenticator?a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(He,{className:"w-4 h-4 mr-1"}),w.authenticator]}):a.jsx("p",{className:"text-xs text-gray-500",children:"Store 2FA backup codes or secret keys securely"}),a.jsxs("span",{className:"text-xs text-gray-400",children:[n.authenticator.length,"/500"]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(_p,{className:"w-4 h-4 inline mr-1"}),"ID Image",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),u?a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:u,alt:"ID Preview",className:"w-24 h-24 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:D,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(it,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600",children:l?"New image selected":"Current ID image"}),a.jsx("button",{type:"button",onClick:()=>v.current?.click(),className:"mt-2 text-sm text-primary-600 hover:text-primary-700",children:"Change Image"})]})]}):a.jsx("div",{className:"border-2 border-gray-300 border-dashed rounded-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(_p,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("button",{type:"button",onClick:()=>v.current?.click(),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Click to upload"}),a.jsx("span",{className:"text-gray-500",children:" or drag and drop"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG, JPEG up to 5MB"})]})}),a.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:C,className:"hidden"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:n.status,onChange:S,className:"block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x,onClick:I=>{console.log("👆 [FacebookAccountForm] Submit button clicked")},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),N?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"w-4 h-4 mr-2"}),N?"Update Account":"Create Account"]})})]})]})]})})},Qg="http://localhost:5000/api",jC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(!1),[c,u]=_.useState(null),[h,m]=_.useState(""),[p,x]=_.useState("all"),[b,w]=_.useState(1),[j,v]=_.useState(1),[N,E]=_.useState(0),[S]=_.useState(10),[C,D]=_.useState(null),A=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),F=Oe.create({baseURL:Qg,headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}}),I=async($=1,J="",Y="all")=>{try{n(!0);const ee=new URLSearchParams({page:$.toString(),limit:S.toString()});J&&ee.append("search",J),Y&&Y!=="all"&&ee.append("status",Y);const te=await F.get(`/facebook-accounts?${ee}`);te.data.success?(e(te.data.data),v(te.data.pagination?.totalPages||1),E(te.data.pagination?.total||0),w(te.data.pagination?.page||1)):Ee.error("Failed to fetch Facebook accounts")}catch(ee){console.error("Error fetching accounts:",ee),Ee.error(ee.response?.data?.message||"Failed to fetch accounts")}finally{n(!1)}};_.useEffect(()=>{I(b,h,p)},[b,h,p]),_.useEffect(()=>{const $=setTimeout(()=>{b===1?I(1,h,p):w(1)},500);return()=>clearTimeout($)},[h]);const M=$=>{x($),w(1)},V=()=>{l(!1),u(null),I(b,h,p),Ee.success(c?"Account updated successfully!":"Account created successfully!")},H=$=>{u($),l(!0)},O=async $=>{try{const J=await F.patch(`/facebook-accounts/${$}/toggle-status`);J.data.success?(Ee.success(J.data.message),I(b,h,p)):Ee.error("Failed to toggle account status")}catch(J){console.error("Error toggling status:",J),Ee.error(J.response?.data?.message||"Failed to toggle status")}},K=async $=>{try{(await F.delete(`/facebook-accounts/${$}`)).data.success?(Ee.success("Account deleted successfully!"),D(null),I(b,h,p)):Ee.error("Failed to delete account")}catch(J){console.error("Error deleting account:",J),Ee.error(J.response?.data?.message||"Failed to delete account")}},U=$=>$?new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ne=({status:$})=>{const Y=(te=>{switch(te){case"enabled":return{className:"bg-green-100 text-green-800",icon:$x,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:ti,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:ti,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:ti,label:"Unknown"}}})($),ee=Y.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.className}`,children:[a.jsx(ee,{className:"w-3 h-3 mr-1"}),Y.label]})},re=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>w(Math.min(j,b+1)),disabled:b===j,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(b-1)*S+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(b*S,N)})," of"," ",a.jsx("span",{className:"font-medium",children:N})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(j)].map(($,J)=>{const Y=J+1;return Y===1||Y===j||Y>=b-2&&Y<=b+2?a.jsx("button",{onClick:()=>w(Y),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${Y===b?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Y},Y):Y===b-3||Y===b+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},Y):null}),a.jsx("button",{onClick:()=>w(Math.min(j,b+1)),disabled:b===j,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Accounts"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook account credentials and their status"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Facebook Account"]})})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by email or phone...",value:h,onChange:$=>m($.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:$=>M($.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>I(b,h,p),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(wt,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(wt,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook accounts..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(ui,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook accounts found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"?"Try adjusting your filters":"Add your first Facebook account to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map($=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:$.id_image_path?a.jsx("img",{src:`${Qg.replace("/api","")}${$.id_image_path}`,alt:"ID",className:"h-10 w-10 rounded-full object-cover"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:a.jsx(ui,{className:"h-6 w-6 text-gray-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(Ox,{className:"w-4 h-4 mr-1 text-gray-400"}),$.email]}),$.authenticator&&a.jsx("div",{className:"text-xs text-gray-500",children:"2FA Enabled"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:$.phone_number?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ix,{className:"w-4 h-4 mr-1 text-gray-400"}),$.phone_number]}):a.jsx("span",{className:"text-gray-400",children:"No phone"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(ne,{status:$.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.jsx("div",{children:U($.created_at)}),$.created_by_name&&a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",$.created_by_name]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>O($.id),className:`p-1 rounded ${$.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${$.status==="enabled"?"Disable":"Enable"} account`,children:$.status==="enabled"?a.jsx(Hx,{className:"w-5 h-5"}):a.jsx(Ux,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>H($),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit account",children:a.jsx(In,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>D($.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete account",children:a.jsx(_s,{className:"w-4 h-4"})})]})})]},$.id))})]})}),j>1&&a.jsx(re,{})]})}),i&&a.jsx(wC,{account:c,onClose:()=>{l(!1),u(null)},onSave:V}),C&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(_s,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Account"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook account? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>K(C),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Account"}),a.jsx("button",{onClick:()=>D(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},NC="http://localhost:5000/api",_C=({page:t,onClose:e,onSave:s})=>{const[n,i]=_.useState({facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),[l,c]=_.useState([]),[u,h]=_.useState(!1),[m,p]=_.useState({}),[x,b]=_.useState({}),w=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),j=Oe.create({baseURL:NC,headers:{Authorization:`Bearer ${w()}`,"Content-Type":"application/json"}}),v=async()=>{try{const C=await j.get("/facebook-accounts?limit=1000&status=enabled");C.data.success&&c(C.data.data||[])}catch(C){console.error("Error fetching Facebook accounts:",C),Ee.error("Failed to load Facebook accounts")}};_.useEffect(()=>{v(),i(t?{facebook_account_id:t.facebook_account_id||"",page_name:t.page_name||"",page_description:t.page_description||"",status:t.status||"enabled"}:{facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),p({}),b({})},[t]);const N=C=>{const{name:D,value:A}=C.target;i(F=>({...F,[D]:A})),m[D]&&p(F=>{const I={...F};return delete I[D],I}),x[D]&&b(F=>{const I={...F};return delete I[D],I})},E=()=>{const C={};return n.facebook_account_id||(C.facebook_account_id="Facebook account is required"),n.page_name.trim()?n.page_name.trim().length<2?C.page_name="Page name must be at least 2 characters":n.page_name.trim().length>255&&(C.page_name="Page name must be less than 255 characters"):C.page_name="Page name is required",n.page_description&&n.page_description.trim().length>1e3&&(C.page_description="Description must be less than 1000 characters"),n.status||(C.status="Status is required"),b(C),Object.keys(C).length===0},S=async C=>{if(C.preventDefault(),console.log("🔄 Form submit triggered"),console.log("📝 Form data:",n),!E()){console.log("❌ Form validation failed:",x);return}h(!0),p({});try{const D=w();console.log("🔑 Auth token present:",!!D);const A={facebook_account_id:parseInt(n.facebook_account_id),page_name:n.page_name.trim(),page_description:n.page_description.trim()||null,status:n.status};console.log("📤 Submitting data:",A);let F;t?(console.log("✏️ Updating page with ID:",t.id),F=await j.put(`/facebook-pages/${t.id}`,A)):(console.log("➕ Creating new page"),F=await j.post("/facebook-pages",A)),console.log("✅ API Response:",F.data),F.data.success?(Ee.success(t?"Page updated successfully!":"Page created successfully!"),s()):(console.log("❌ API returned failure:",F.data),Ee.error(F.data.message||"Failed to save page"))}catch(D){console.error("❌ Error saving page:",D),D.response?(console.log("📋 Error response data:",D.response.data),console.log("📋 Error status:",D.response.status),D.response.status===400&&D.response.data.errors?(p(D.response.data.errors),Ee.error("Please fix the validation errors")):D.response.status===409?(Ee.error("A page with this name already exists for the selected Facebook account"),p({page_name:"Page name already exists for this account"})):Ee.error(D.response.data.message||"Failed to save page")):D.request?(console.log("📡 No response received:",D.request),Ee.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",D.message),Ee.error("An unexpected error occurred"))}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:S,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(us,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Facebook Page":"Add Facebook Page"})})]}),a.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(it,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_account_id",className:"block text-sm font-medium text-gray-700",children:"Facebook Account *"}),a.jsxs("select",{id:"facebook_account_id",name:"facebook_account_id",value:n.facebook_account_id,onChange:N,disabled:u,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${m.facebook_account_id||x.facebook_account_id?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:"Select Facebook Account"}),l.map(C=>a.jsx("option",{value:C.id,children:C.email},C.id))]}),(m.facebook_account_id||x.facebook_account_id)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(He,{className:"h-4 w-4 mr-1"}),m.facebook_account_id||x.facebook_account_id]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_name",className:"block text-sm font-medium text-gray-700",children:"Page Name *"}),a.jsx("input",{type:"text",id:"page_name",name:"page_name",value:n.page_name,onChange:N,disabled:u,placeholder:"Enter page name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${m.page_name||x.page_name?"border-red-500":""}`,required:!0,maxLength:255}),(m.page_name||x.page_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(He,{className:"h-4 w-4 mr-1"}),m.page_name||x.page_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_description",className:"block text-sm font-medium text-gray-700",children:"Page Description"}),a.jsx("textarea",{id:"page_description",name:"page_description",value:n.page_description,onChange:N,disabled:u,placeholder:"Enter page description (optional)",rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${m.page_description||x.page_description?"border-red-500":""}`,maxLength:1e3}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[n.page_description.length,"/1000 characters"]}),(m.page_description||x.page_description)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(He,{className:"h-4 w-4 mr-1"}),m.page_description||x.page_description]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:n.status,onChange:N,disabled:u,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${m.status||x.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(m.status||x.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(He,{className:"h-4 w-4 mr-1"}),m.status||x.status]})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,disabled:u,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"h-4 w-4 mr-2"}),t?"Update Page":"Create Page"]})})]})]})})})},kC="http://localhost:5000/api",SC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(!1),[c,u]=_.useState(null),[h,m]=_.useState(""),[p,x]=_.useState("all"),[b,w]=_.useState("all"),[j,v]=_.useState(1),[N,E]=_.useState(1),[S,C]=_.useState(0),[D]=_.useState(10),[A,F]=_.useState(null),[I,M]=_.useState([]),V=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),H=Oe.create({baseURL:kC,headers:{Authorization:`Bearer ${V()}`,"Content-Type":"application/json"}}),O=async()=>{try{const R=await H.get("/facebook-accounts?limit=1000");R.data.success&&M(R.data.data||[])}catch(R){console.error("Error fetching Facebook accounts:",R)}},K=async(R=1,de="",he="all",B="all")=>{try{n(!0);const Z=new URLSearchParams({page:R.toString(),limit:D.toString()});de&&Z.append("search",de),he&&he!=="all"&&Z.append("status",he),B&&B!=="all"&&Z.append("facebook_account_id",B);const ue=await H.get(`/facebook-pages?${Z}`);ue.data.success?(e(ue.data.data||[]),E(ue.data.pagination?.totalPages||1),C(ue.data.pagination?.total||0),v(ue.data.pagination?.page||1)):Ee.error("Failed to fetch Facebook pages")}catch(Z){console.error("Error fetching pages:",Z),Ee.error(Z.response?.data?.message||"Failed to fetch pages")}finally{n(!1)}};_.useEffect(()=>{O(),K(j,h,p,b)},[j,h,p,b]),_.useEffect(()=>{const R=setTimeout(()=>{j===1?K(1,h,p,b):v(1)},500);return()=>clearTimeout(R)},[h]);const U=R=>{x(R),v(1)},ne=R=>{w(R),v(1)},re=()=>{l(!1),u(null),K(j,h,p,b),Ee.success(c?"Page updated successfully!":"Page created successfully!")},$=R=>{u(R),l(!0)},J=async R=>{try{const de=await H.patch(`/facebook-pages/${R}/toggle-status`);de.data.success?(Ee.success(de.data.message),K(j,h,p,b)):Ee.error("Failed to toggle page status")}catch(de){console.error("Error toggling status:",de),Ee.error(de.response?.data?.message||"Failed to toggle status")}},Y=async R=>{try{(await H.delete(`/facebook-pages/${R}`)).data.success?(Ee.success("Page deleted successfully!"),F(null),K(j,h,p,b)):Ee.error("Failed to delete page")}catch(de){console.error("Error deleting page:",de),Ee.error(de.response?.data?.message||"Failed to delete page")}},ee=R=>R?new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",te=({status:R})=>{const he=(Z=>{switch(Z){case"enabled":return{className:"bg-green-100 text-green-800",icon:$x,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:ti,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Mu,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:ti,label:"Unknown"}}})(R),B=he.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he.className}`,children:[a.jsx(B,{className:"w-3 h-3 mr-1"}),he.label]})},P=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:j===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>v(Math.min(N,j+1)),disabled:j===N,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(j-1)*D+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(j*D,S)})," of"," ",a.jsx("span",{className:"font-medium",children:S})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>v(Math.max(1,j-1)),disabled:j===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(N)].map((R,de)=>{const he=de+1;return he===1||he===N||he>=j-2&&he<=j+2?a.jsx("button",{onClick:()=>v(he),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${he===j?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:he},he):he===j-3||he===j+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},he):null}),a.jsx("button",{onClick:()=>v(Math.min(N,j+1)),disabled:j===N,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Pages"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook pages linked to your accounts"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Facebook Page"]})})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zs,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by page name...",value:h,onChange:R=>m(R.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:R=>U(R.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{children:a.jsxs("select",{value:b,onChange:R=>ne(R.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Accounts"}),I.map(R=>a.jsx("option",{value:R.id,children:R.email},R.id))]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>K(j,h,p,b),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(wt,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(wt,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook pages..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(us,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook pages found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"||b!=="all"?"Try adjusting your filters":"Add your first Facebook page to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(R=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(us,{className:"h-6 w-6 text-blue-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.page_name}),R.page_description&&a.jsx("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:R.page_description})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(q1,{className:"w-4 h-4 mr-1 text-gray-400"}),R.facebook_account_email||`Account #${R.facebook_account_id}`]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(te,{status:R.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.jsx("div",{children:ee(R.created_at)}),R.created_by_name&&a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",R.created_by_name]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>J(R.id),className:`p-1 rounded ${R.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${R.status==="enabled"?"Disable":"Enable"} page`,children:R.status==="enabled"?a.jsx(Hx,{className:"w-5 h-5"}):a.jsx(Ux,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>$(R),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit page",children:a.jsx(In,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(R.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete page",children:a.jsx(_s,{className:"w-4 h-4"})})]})})]},R.id))})]})}),N>1&&a.jsx(P,{})]})}),i&&a.jsx(_C,{page:c,onClose:()=>{l(!1),u(null)},onSave:re}),A&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(_s,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Page"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook page? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>Y(A),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Page"}),a.jsx("button",{onClick:()=>F(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},Zd=()=>{console.log("🔒 Hiding TOTP fields from user interface..."),['input[name*="totp" i]','input[name*="totp_secret" i]','input[name*="totp-secret" i]','input[id*="totp" i]','input[id*="totp_secret" i]','input[id*="totp-secret" i]','label[for*="totp" i]','label[for*="totp_secret" i]','label[for*="totp-secret" i]','button[data-action*="generate-totp" i]','button[data-action*="generate_totp" i]','input[type="button"][value*="Generate TOTP" i]','input[type="submit"][value*="Generate TOTP" i]',".totp-field",".totp-secret-field",".totp_secret_field",".totp-container",".totp_container",".generate-totp",".generate_totp",'[data-field*="totp" i]','[data-field*="totp-secret" i]','[data-field*="totp_secret" i]','[data-name*="totp" i]','[data-name*="totp-secret" i]','[data-name*="totp_secret" i]'].forEach(n=>{try{const i=document.querySelectorAll(n);i.forEach(l=>{l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true");const c=l.closest(".form-group, .form-field, .field-container, .input-group");c&&(c.style.display="none",c.style.visibility="hidden",c.setAttribute("hidden","true"))}),i.length>0&&console.log(`🔒 Hidden ${i.length} elements matching: ${n}`)}catch(i){console.warn(`⚠️ Error hiding elements for selector "${n}":`,i)}}),(n=>{n.forEach(i=>{const l=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1),c=[];let u;for(;u=l.nextNode();)u.textContent.toLowerCase().includes(i.toLowerCase())&&c.push(u);c.forEach(h=>{let m=h.parentElement;for(;m&&m.tagName!=="BODY";){if(["INPUT","LABEL","BUTTON","DIV","SPAN","TR","TD","TH"].includes(m.tagName)){m.style.display="none",m.style.visibility="hidden",m.setAttribute("hidden","true"),console.log(`🔒 Hidden element containing text "${i}":`,m.tagName,m.className);break}m=m.parentElement}})})})(["TOTP Secret","Generate TOTP","TOTP secret","totp secret","Two-Factor Authentication Secret","Authenticator Secret"]),document.querySelectorAll('button, input[type="button"], input[type="submit"]').forEach(n=>{const i=n.textContent||n.value||"";if(i.toLowerCase().includes("generate totp")||i.toLowerCase().includes("generate secret")||i.toLowerCase().includes("totp secret")){n.style.display="none",n.style.visibility="hidden",n.setAttribute("hidden","true");const l=n.closest(".form-group, .form-field, .field-container, .button-group");l&&(l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true")),console.log(`🔒 Hidden button with text: "${i}"`)}}),console.log("✅ TOTP fields hiding completed")},Y0=()=>{console.log("🔒 Initializing TOTP field hiding..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Zd):Zd(),new MutationObserver(e=>{let s=!1;e.forEach(n=>{n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&i.querySelector&&(i.querySelector('input[name*="totp" i]')||i.querySelector('*[class*="totp" i]')||i.textContent?.toLowerCase().includes("totp secret")||i.textContent?.toLowerCase().includes("generate totp"))&&(s=!0)})}),s&&(console.log("🔒 New TOTP content detected, hiding fields..."),setTimeout(Zd,100))}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","name"]}),console.log("✅ TOTP field hiding initialized with mutation observer")};typeof window<"u"&&Y0();const CC=()=>localStorage.getItem("access_token")||localStorage.getItem("authToken")?a.jsx(tu,{to:"/dashboard",replace:!0}):a.jsx(tu,{to:"/login",replace:!0});function EC(){return _.useEffect(()=>{console.log("🔒 App: Initializing TOTP field hiding..."),Y0()},[]),a.jsx(M1,{children:a.jsx(Zv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(qv,{children:[a.jsx(gt,{path:"/login",element:a.jsx(ej,{})}),a.jsx(gt,{path:"/",element:a.jsx(CC,{})}),a.jsx(gt,{path:"/dashboard",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(KS,{})})})})}),a.jsx(gt,{path:"/user-management",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(rj,{})})})})}),a.jsx(gt,{path:"/role-management",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(ZS,{})})})})}),a.jsx(gt,{path:"/brands",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(aC,{})})})})}),a.jsx(gt,{path:"/campaign-types",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(tC,{})})})})}),a.jsx(gt,{path:"/cards",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(lC,{})})})})}),a.jsx(gt,{path:"/card-users",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(uC,{})})})})}),a.jsx(gt,{path:"/campaigns",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(nC,{})})})})}),a.jsx(gt,{path:"/campaigns/:id",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(iC,{})})})})}),a.jsx(gt,{path:"/reports-table",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(yC,{})})})})}),a.jsx(gt,{path:"/reports",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(mC,{})})})})}),a.jsx(gt,{path:"/report-analytics",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(vC,{})})})})}),a.jsx(gt,{path:"/facebook-accounts",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(jC,{})})})})}),a.jsx(gt,{path:"/facebook-pages",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx(SC,{})})})})}),a.jsx(gt,{path:"/analytics",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx("div",{className:"p-6",children:"Analytics Module (Coming Soon)"})})})})}),a.jsx(gt,{path:"/settings",element:a.jsx(At,{children:a.jsx(Et,{children:a.jsx(Pt,{children:a.jsx("div",{className:"p-6",children:"Settings Module (Coming Soon)"})})})})})]})})})}ev.createRoot(document.getElementById("root")).render(a.jsx(vi.StrictMode,{children:a.jsx(EC,{})}));
