function Ub(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function ex(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pd={exports:{}},Ha={},Md={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function Hb(){if(qf)return Fe;qf=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=x&&C[x]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function N(C,A,ae){this.props=C,this.context=A,this.refs=j,this.updater=ae||w}N.prototype.isReactComponent={},N.prototype.setState=function(C,A){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,A,"setState")},N.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function E(){}E.prototype=N.prototype;function S(C,A,ae){this.props=C,this.context=A,this.refs=j,this.updater=ae||w}var P=S.prototype=new E;P.constructor=S,v(P,N.prototype),P.isPureReactComponent=!0;var D=Array.isArray,T=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function F(C,A,ae){var de,$={},Z=null,he=null;if(A!=null)for(de in A.ref!==void 0&&(he=A.ref),A.key!==void 0&&(Z=""+A.key),A)T.call(A,de)&&!R.hasOwnProperty(de)&&($[de]=A[de]);var xe=arguments.length-2;if(xe===1)$.children=ae;else if(1<xe){for(var Be=Array(xe),dt=0;dt<xe;dt++)Be[dt]=arguments[dt+2];$.children=Be}if(C&&C.defaultProps)for(de in xe=C.defaultProps,xe)$[de]===void 0&&($[de]=xe[de]);return{$$typeof:t,type:C,key:Z,ref:he,props:$,_owner:L.current}}function U(C,A){return{$$typeof:t,type:C.type,key:A,ref:C.ref,props:C.props,_owner:C._owner}}function H(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function B(C){var A={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ae){return A[ae]})}var Q=/\/+/g;function ne(C,A){return typeof C=="object"&&C!==null&&C.key!=null?B(""+C.key):A.toString(36)}function V(C,A,ae,de,$){var Z=typeof C;(Z==="undefined"||Z==="boolean")&&(C=null);var he=!1;if(C===null)he=!0;else switch(Z){case"string":case"number":he=!0;break;case"object":switch(C.$$typeof){case t:case e:he=!0}}if(he)return he=C,$=$(he),C=de===""?"."+ne(he,0):de,D($)?(ae="",C!=null&&(ae=C.replace(Q,"$&/")+"/"),V($,A,ae,"",function(dt){return dt})):$!=null&&(H($)&&($=U($,ae+(!$.key||he&&he.key===$.key?"":(""+$.key).replace(Q,"$&/")+"/")+C)),A.push($)),1;if(he=0,de=de===""?".":de+":",D(C))for(var xe=0;xe<C.length;xe++){Z=C[xe];var Be=de+ne(Z,xe);he+=V(Z,A,ae,Be,$)}else if(Be=b(C),typeof Be=="function")for(C=Be.call(C),xe=0;!(Z=C.next()).done;)Z=Z.value,Be=de+ne(Z,xe++),he+=V(Z,A,ae,Be,$);else if(Z==="object")throw A=String(C),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return he}function re(C,A,ae){if(C==null)return C;var de=[],$=0;return V(C,de,"","",function(Z){return A.call(ae,Z,$++)}),de}function I(C){if(C._status===-1){var A=C._result;A=A(),A.then(function(ae){(C._status===0||C._status===-1)&&(C._status=1,C._result=ae)},function(ae){(C._status===0||C._status===-1)&&(C._status=2,C._result=ae)}),C._status===-1&&(C._status=0,C._result=A)}if(C._status===1)return C._result.default;throw C._result}var K={current:null},q={transition:null},te={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:q,ReactCurrentOwner:L};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:re,forEach:function(C,A,ae){re(C,function(){A.apply(this,arguments)},ae)},count:function(C){var A=0;return re(C,function(){A++}),A},toArray:function(C){return re(C,function(A){return A})||[]},only:function(C){if(!H(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Fe.Component=N,Fe.Fragment=s,Fe.Profiler=i,Fe.PureComponent=S,Fe.StrictMode=n,Fe.Suspense=h,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Fe.act=ee,Fe.cloneElement=function(C,A,ae){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var de=v({},C.props),$=C.key,Z=C.ref,he=C._owner;if(A!=null){if(A.ref!==void 0&&(Z=A.ref,he=L.current),A.key!==void 0&&($=""+A.key),C.type&&C.type.defaultProps)var xe=C.type.defaultProps;for(Be in A)T.call(A,Be)&&!R.hasOwnProperty(Be)&&(de[Be]=A[Be]===void 0&&xe!==void 0?xe[Be]:A[Be])}var Be=arguments.length-2;if(Be===1)de.children=ae;else if(1<Be){xe=Array(Be);for(var dt=0;dt<Be;dt++)xe[dt]=arguments[dt+2];de.children=xe}return{$$typeof:t,type:C.type,key:$,ref:Z,props:de,_owner:he}},Fe.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:l,_context:C},C.Consumer=C},Fe.createElement=F,Fe.createFactory=function(C){var A=F.bind(null,C);return A.type=C,A},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(C){return{$$typeof:u,render:C}},Fe.isValidElement=H,Fe.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:I}},Fe.memo=function(C,A){return{$$typeof:f,type:C,compare:A===void 0?null:A}},Fe.startTransition=function(C){var A=q.transition;q.transition={};try{C()}finally{q.transition=A}},Fe.unstable_act=ee,Fe.useCallback=function(C,A){return K.current.useCallback(C,A)},Fe.useContext=function(C){return K.current.useContext(C)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(C){return K.current.useDeferredValue(C)},Fe.useEffect=function(C,A){return K.current.useEffect(C,A)},Fe.useId=function(){return K.current.useId()},Fe.useImperativeHandle=function(C,A,ae){return K.current.useImperativeHandle(C,A,ae)},Fe.useInsertionEffect=function(C,A){return K.current.useInsertionEffect(C,A)},Fe.useLayoutEffect=function(C,A){return K.current.useLayoutEffect(C,A)},Fe.useMemo=function(C,A){return K.current.useMemo(C,A)},Fe.useReducer=function(C,A,ae){return K.current.useReducer(C,A,ae)},Fe.useRef=function(C){return K.current.useRef(C)},Fe.useState=function(C){return K.current.useState(C)},Fe.useSyncExternalStore=function(C,A,ae){return K.current.useSyncExternalStore(C,A,ae)},Fe.useTransition=function(){return K.current.useTransition()},Fe.version="18.3.1",Fe}var Yf;function Eu(){return Yf||(Yf=1,Md.exports=Hb()),Md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Vb(){if(Kf)return Ha;Kf=1;var t=Eu(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var p,x={},b=null,w=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!l.hasOwnProperty(p)&&(x[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)x[p]===void 0&&(x[p]=h[p]);return{$$typeof:e,type:u,key:b,ref:w,props:x,_owner:i.current}}return Ha.Fragment=s,Ha.jsx=c,Ha.jsxs=c,Ha}var Xf;function Wb(){return Xf||(Xf=1,Pd.exports=Vb()),Pd.exports}var a=Wb(),_=Eu();const wi=ex(_),qb=Ub({__proto__:null,default:wi},[_]);var Io={},Td={exports:{}},Ut={},Dd={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function Yb(){return Qf||(Qf=1,(function(t){function e(q,te){var ee=q.length;q.push(te);e:for(;0<ee;){var C=ee-1>>>1,A=q[C];if(0<i(A,te))q[C]=te,q[ee]=A,ee=C;else break e}}function s(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var te=q[0],ee=q.pop();if(ee!==te){q[0]=ee;e:for(var C=0,A=q.length,ae=A>>>1;C<ae;){var de=2*(C+1)-1,$=q[de],Z=de+1,he=q[Z];if(0>i($,ee))Z<A&&0>i(he,$)?(q[C]=he,q[Z]=ee,C=Z):(q[C]=$,q[de]=ee,C=de);else if(Z<A&&0>i(he,ee))q[C]=he,q[Z]=ee,C=Z;else break e}}return te}function i(q,te){var ee=q.sortIndex-te.sortIndex;return ee!==0?ee:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,x=null,b=3,w=!1,v=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var te=s(f);te!==null;){if(te.callback===null)n(f);else if(te.startTime<=q)n(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=s(f)}}function D(q){if(j=!1,P(q),!v)if(s(h)!==null)v=!0,I(T);else{var te=s(f);te!==null&&K(D,te.startTime-q)}}function T(q,te){v=!1,j&&(j=!1,E(F),F=-1),w=!0;var ee=b;try{for(P(te),x=s(h);x!==null&&(!(x.expirationTime>te)||q&&!B());){var C=x.callback;if(typeof C=="function"){x.callback=null,b=x.priorityLevel;var A=C(x.expirationTime<=te);te=t.unstable_now(),typeof A=="function"?x.callback=A:x===s(h)&&n(h),P(te)}else n(h);x=s(h)}if(x!==null)var ae=!0;else{var de=s(f);de!==null&&K(D,de.startTime-te),ae=!1}return ae}finally{x=null,b=ee,w=!1}}var L=!1,R=null,F=-1,U=5,H=-1;function B(){return!(t.unstable_now()-H<U)}function Q(){if(R!==null){var q=t.unstable_now();H=q;var te=!0;try{te=R(!0,q)}finally{te?ne():(L=!1,R=null)}}else L=!1}var ne;if(typeof S=="function")ne=function(){S(Q)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,re=V.port2;V.port1.onmessage=Q,ne=function(){re.postMessage(null)}}else ne=function(){N(Q,0)};function I(q){R=q,L||(L=!0,ne())}function K(q,te){F=N(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||w||(v=!0,I(T))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(q){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var ee=b;b=te;try{return q()}finally{b=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=b;b=q;try{return te()}finally{b=ee}},t.unstable_scheduleCallback=function(q,te,ee){var C=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?C+ee:C):ee=C,q){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ee+A,q={id:p++,callback:te,priorityLevel:q,startTime:ee,expirationTime:A,sortIndex:-1},ee>C?(q.sortIndex=ee,e(f,q),s(h)===null&&q===s(f)&&(j?(E(F),F=-1):j=!0,K(D,ee-C))):(q.sortIndex=A,e(h,q),v||w||(v=!0,I(T))),q},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(q){var te=b;return function(){var ee=b;b=te;try{return q.apply(this,arguments)}finally{b=ee}}}})(Rd)),Rd}var Jf;function Kb(){return Jf||(Jf=1,Dd.exports=Yb()),Dd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf;function Xb(){if(Gf)return Ut;Gf=1;var t=Eu(),e=Kb();function s(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(r,o){c(r,o),c(r+"Capture",o)}function c(r,o){for(i[r]=o,r=0;r<o.length;r++)n.add(o[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},x={};function b(r){return h.call(x,r)?!0:h.call(p,r)?!1:f.test(r)?x[r]=!0:(p[r]=!0,!1)}function w(r,o,d,m){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function v(r,o,d,m){if(o===null||typeof o>"u"||w(r,o,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(r,o,d,m,g,y,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=d,this.propertyName=r,this.type=o,this.sanitizeURL=y,this.removeEmptyString=k}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){N[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];N[o]=new j(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){N[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){N[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){N[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){N[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){N[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){N[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){N[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function S(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(E,S);N[o]=new j(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(E,S);N[o]=new j(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(E,S);N[o]=new j(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){N[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){N[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function P(r,o,d,m){var g=N.hasOwnProperty(o)?N[o]:null;(g!==null?g.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(v(o,d,g,m)&&(d=null),m||g===null?b(o)&&(d===null?r.removeAttribute(o):r.setAttribute(o,""+d)):g.mustUseProperty?r[g.propertyName]=d===null?g.type===3?!1:"":d:(o=g.attributeName,m=g.attributeNamespace,d===null?r.removeAttribute(o):(g=g.type,d=g===3||g===4&&d===!0?"":""+d,m?r.setAttributeNS(m,o,d):r.setAttribute(o,d))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),q=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,C;function A(r){if(C===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);C=o&&o[1]||""}return`
`+C+r}var ae=!1;function de(r,o){if(!r||ae)return"";ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var m=X}Reflect.construct(r,[],o)}else{try{o.call()}catch(X){m=X}r.call(o.prototype)}else{try{throw Error()}catch(X){m=X}r()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),y=m.stack.split(`
`),k=g.length-1,M=y.length-1;1<=k&&0<=M&&g[k]!==y[M];)M--;for(;1<=k&&0<=M;k--,M--)if(g[k]!==y[M]){if(k!==1||M!==1)do if(k--,M--,0>M||g[k]!==y[M]){var O=`
`+g[k].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=k&&0<=M);break}}}finally{ae=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?A(r):""}function $(r){switch(r.tag){case 5:return A(r.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return r=de(r.type,!1),r;case 11:return r=de(r.type.render,!1),r;case 1:return r=de(r.type,!0),r;default:return""}}function Z(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case L:return"Portal";case U:return"Profiler";case F:return"StrictMode";case ne:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case B:return(r.displayName||"Context")+".Consumer";case H:return(r._context.displayName||"Context")+".Provider";case Q:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case re:return o=r.displayName||null,o!==null?o:Z(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return Z(r(o))}catch{}}return null}function he(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(o);case 8:return o===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Be(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function dt(r){var o=Be(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),m=""+r[o];if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){m=""+k,y.call(this,k)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ve(r){r._valueTracker||(r._valueTracker=dt(r))}function Ue(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return r&&(m=Be(r)?r.checked?"true":"false":r.value),r=m,r!==d?(o.setValue(r),!0):!1}function ts(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function J(r,o){var d=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function be(r,o){var d=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;d=xe(o.value!=null?o.value:d),r._wrapperState={initialChecked:m,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Pe(r,o){o=o.checked,o!=null&&P(r,"checked",o,!1)}function Se(r,o){Pe(r,o);var d=xe(o.value),m=o.type;if(d!=null)m==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?je(r,o.type,d):o.hasOwnProperty("defaultValue")&&je(r,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function Ie(r,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,d||o===r.value||(r.value=o),r.defaultValue=o}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function je(r,o,d){(o!=="number"||ts(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var De=Array.isArray;function ft(r,o,d,m){if(r=r.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<r.length;d++)g=o.hasOwnProperty("$"+r[d].value),r[d].selected!==g&&(r[d].selected=g),g&&m&&(r[d].defaultSelected=!0)}else{for(d=""+xe(d),o=null,g=0;g<r.length;g++){if(r[g].value===d){r[g].selected=!0,m&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function se(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(s(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function le(r,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(s(92));if(De(d)){if(1<d.length)throw Error(s(93));d=d[0]}o=d}o==null&&(o=""),d=o}r._wrapperState={initialValue:xe(d)}}function pe(r,o){var d=xe(o.value),m=xe(o.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),o.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),m!=null&&(r.defaultValue=""+m)}function Ye(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Bs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Bs(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ss,_s=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,m,g){MSApp.execUnsafeLocalFunction(function(){return r(o,d,m,g)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(ss=ss||document.createElement("div"),ss.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ss.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function hs(r,o){if(o){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=o;return}}r.textContent=o}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q0=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(r){q0.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),ia[o]=ia[r]})});function ih(r,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||ia.hasOwnProperty(r)&&ia[r]?(""+o).trim():o+"px"}function oh(r,o){r=r.style;for(var d in o)if(o.hasOwnProperty(d)){var m=d.indexOf("--")===0,g=ih(d,o[d],m);d==="float"&&(d="cssFloat"),m?r.setProperty(d,g):r[d]=g}}var Y0=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ul(r,o){if(o){if(Y0[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(s(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(s(61))}if(o.style!=null&&typeof o.style!="object")throw Error(s(62))}}function Hl(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function Wl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ql=null,pr=null,gr=null;function lh(r){if(r=Ea(r)){if(typeof ql!="function")throw Error(s(280));var o=r.stateNode;o&&(o=Gi(o),ql(r.stateNode,r.type,o))}}function ch(r){pr?gr?gr.push(r):gr=[r]:pr=r}function dh(){if(pr){var r=pr,o=gr;if(gr=pr=null,lh(r),o)for(r=0;r<o.length;r++)lh(o[r])}}function uh(r,o){return r(o)}function hh(){}var Yl=!1;function mh(r,o,d){if(Yl)return r(o,d);Yl=!0;try{return uh(r,o,d)}finally{Yl=!1,(pr!==null||gr!==null)&&(hh(),dh())}}function oa(r,o){var d=r.stateNode;if(d===null)return null;var m=Gi(d);if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(s(231,o,typeof d));return d}var Kl=!1;if(u)try{var la={};Object.defineProperty(la,"passive",{get:function(){Kl=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Kl=!1}function K0(r,o,d,m,g,y,k,M,O){var X=Array.prototype.slice.call(arguments,3);try{o.apply(d,X)}catch(oe){this.onError(oe)}}var ca=!1,Pi=null,Mi=!1,Xl=null,X0={onError:function(r){ca=!0,Pi=r}};function Q0(r,o,d,m,g,y,k,M,O){ca=!1,Pi=null,K0.apply(X0,arguments)}function J0(r,o,d,m,g,y,k,M,O){if(Q0.apply(this,arguments),ca){if(ca){var X=Pi;ca=!1,Pi=null}else throw Error(s(198));Mi||(Mi=!0,Xl=X)}}function Bn(r){var o=r,d=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(d=o.return),r=o.return;while(r)}return o.tag===3?d:null}function fh(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function ph(r){if(Bn(r)!==r)throw Error(s(188))}function G0(r){var o=r.alternate;if(!o){if(o=Bn(r),o===null)throw Error(s(188));return o!==r?null:r}for(var d=r,m=o;;){var g=d.return;if(g===null)break;var y=g.alternate;if(y===null){if(m=g.return,m!==null){d=m;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===d)return ph(g),r;if(y===m)return ph(g),o;y=y.sibling}throw Error(s(188))}if(d.return!==m.return)d=g,m=y;else{for(var k=!1,M=g.child;M;){if(M===d){k=!0,d=g,m=y;break}if(M===m){k=!0,m=g,d=y;break}M=M.sibling}if(!k){for(M=y.child;M;){if(M===d){k=!0,d=y,m=g;break}if(M===m){k=!0,m=y,d=g;break}M=M.sibling}if(!k)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?r:o}function gh(r){return r=G0(r),r!==null?xh(r):null}function xh(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=xh(r);if(o!==null)return o;r=r.sibling}return null}var yh=e.unstable_scheduleCallback,bh=e.unstable_cancelCallback,Z0=e.unstable_shouldYield,ey=e.unstable_requestPaint,at=e.unstable_now,ty=e.unstable_getCurrentPriorityLevel,Ql=e.unstable_ImmediatePriority,vh=e.unstable_UserBlockingPriority,Ti=e.unstable_NormalPriority,sy=e.unstable_LowPriority,wh=e.unstable_IdlePriority,Di=null,ks=null;function ny(r){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Di,r,void 0,(r.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:iy,ry=Math.log,ay=Math.LN2;function iy(r){return r>>>=0,r===0?32:31-(ry(r)/ay|0)|0}var Ri=64,Fi=4194304;function da(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Li(r,o){var d=r.pendingLanes;if(d===0)return 0;var m=0,g=r.suspendedLanes,y=r.pingedLanes,k=d&268435455;if(k!==0){var M=k&~g;M!==0?m=da(M):(y&=k,y!==0&&(m=da(y)))}else k=d&~g,k!==0?m=da(k):y!==0&&(m=da(y));if(m===0)return 0;if(o!==0&&o!==m&&(o&g)===0&&(g=m&-m,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((m&4)!==0&&(m|=d&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=m;0<o;)d=31-ms(o),g=1<<d,m|=r[d],o&=~g;return m}function oy(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ly(r,o){for(var d=r.suspendedLanes,m=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes;0<y;){var k=31-ms(y),M=1<<k,O=g[k];O===-1?((M&d)===0||(M&m)!==0)&&(g[k]=oy(M,o)):O<=o&&(r.expiredLanes|=M),y&=~M}}function Jl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function jh(){var r=Ri;return Ri<<=1,(Ri&4194240)===0&&(Ri=64),r}function Gl(r){for(var o=[],d=0;31>d;d++)o.push(r);return o}function ua(r,o,d){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-ms(o),r[o]=d}function cy(r,o){var d=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<d;){var g=31-ms(d),y=1<<g;o[g]=0,m[g]=-1,r[g]=-1,d&=~y}}function Zl(r,o){var d=r.entangledLanes|=o;for(r=r.entanglements;d;){var m=31-ms(d),g=1<<m;g&o|r[m]&o&&(r[m]|=o),d&=~g}}var Ve=0;function Nh(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var _h,ec,kh,Sh,Ch,tc=!1,Oi=[],ln=null,cn=null,dn=null,ha=new Map,ma=new Map,un=[],dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eh(r,o){switch(r){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":ha.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(o.pointerId)}}function fa(r,o,d,m,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Ea(o),o!==null&&ec(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function uy(r,o,d,m,g){switch(o){case"focusin":return ln=fa(ln,r,o,d,m,g),!0;case"dragenter":return cn=fa(cn,r,o,d,m,g),!0;case"mouseover":return dn=fa(dn,r,o,d,m,g),!0;case"pointerover":var y=g.pointerId;return ha.set(y,fa(ha.get(y)||null,r,o,d,m,g)),!0;case"gotpointercapture":return y=g.pointerId,ma.set(y,fa(ma.get(y)||null,r,o,d,m,g)),!0}return!1}function Ah(r){var o=zn(r.target);if(o!==null){var d=Bn(o);if(d!==null){if(o=d.tag,o===13){if(o=fh(d),o!==null){r.blockedOn=o,Ch(r.priority,function(){kh(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ii(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var d=nc(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var m=new d.constructor(d.type,d);Vl=m,d.target.dispatchEvent(m),Vl=null}else return o=Ea(d),o!==null&&ec(o),r.blockedOn=d,!1;o.shift()}return!0}function Ph(r,o,d){Ii(r)&&d.delete(o)}function hy(){tc=!1,ln!==null&&Ii(ln)&&(ln=null),cn!==null&&Ii(cn)&&(cn=null),dn!==null&&Ii(dn)&&(dn=null),ha.forEach(Ph),ma.forEach(Ph)}function pa(r,o){r.blockedOn===o&&(r.blockedOn=null,tc||(tc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hy)))}function ga(r){function o(g){return pa(g,r)}if(0<Oi.length){pa(Oi[0],r);for(var d=1;d<Oi.length;d++){var m=Oi[d];m.blockedOn===r&&(m.blockedOn=null)}}for(ln!==null&&pa(ln,r),cn!==null&&pa(cn,r),dn!==null&&pa(dn,r),ha.forEach(o),ma.forEach(o),d=0;d<un.length;d++)m=un[d],m.blockedOn===r&&(m.blockedOn=null);for(;0<un.length&&(d=un[0],d.blockedOn===null);)Ah(d),d.blockedOn===null&&un.shift()}var xr=D.ReactCurrentBatchConfig,Bi=!0;function my(r,o,d,m){var g=Ve,y=xr.transition;xr.transition=null;try{Ve=1,sc(r,o,d,m)}finally{Ve=g,xr.transition=y}}function fy(r,o,d,m){var g=Ve,y=xr.transition;xr.transition=null;try{Ve=4,sc(r,o,d,m)}finally{Ve=g,xr.transition=y}}function sc(r,o,d,m){if(Bi){var g=nc(r,o,d,m);if(g===null)vc(r,o,m,zi,d),Eh(r,m);else if(uy(g,r,o,d,m))m.stopPropagation();else if(Eh(r,m),o&4&&-1<dy.indexOf(r)){for(;g!==null;){var y=Ea(g);if(y!==null&&_h(y),y=nc(r,o,d,m),y===null&&vc(r,o,m,zi,d),y===g)break;g=y}g!==null&&m.stopPropagation()}else vc(r,o,m,null,d)}}var zi=null;function nc(r,o,d,m){if(zi=null,r=Wl(m),r=zn(r),r!==null)if(o=Bn(r),o===null)r=null;else if(d=o.tag,d===13){if(r=fh(o),r!==null)return r;r=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return zi=r,null}function Mh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ty()){case Ql:return 1;case vh:return 4;case Ti:case sy:return 16;case wh:return 536870912;default:return 16}default:return 16}}var hn=null,rc=null,$i=null;function Th(){if($i)return $i;var r,o=rc,d=o.length,m,g="value"in hn?hn.value:hn.textContent,y=g.length;for(r=0;r<d&&o[r]===g[r];r++);var k=d-r;for(m=1;m<=k&&o[d-m]===g[y-m];m++);return $i=g.slice(r,1<m?1-m:void 0)}function Ui(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Hi(){return!0}function Dh(){return!1}function Xt(r){function o(d,m,g,y,k){this._reactName=d,this._targetInst=g,this.type=m,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(d=r[M],this[M]=d?d(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Hi:Dh,this.isPropagationStopped=Dh,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),o}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=Xt(yr),xa=ee({},yr,{view:0,detail:0}),py=Xt(xa),ic,oc,ya,Vi=ee({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ya&&(ya&&r.type==="mousemove"?(ic=r.screenX-ya.screenX,oc=r.screenY-ya.screenY):oc=ic=0,ya=r),ic)},movementY:function(r){return"movementY"in r?r.movementY:oc}}),Rh=Xt(Vi),gy=ee({},Vi,{dataTransfer:0}),xy=Xt(gy),yy=ee({},xa,{relatedTarget:0}),lc=Xt(yy),by=ee({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=Xt(by),wy=ee({},yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jy=Xt(wy),Ny=ee({},yr,{data:0}),Fh=Xt(Ny),_y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cy(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Sy[r])?!!o[r]:!1}function cc(){return Cy}var Ey=ee({},xa,{key:function(r){if(r.key){var o=_y[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ui(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ky[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(r){return r.type==="keypress"?Ui(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ui(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ay=Xt(Ey),Py=ee({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lh=Xt(Py),My=ee({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),Ty=Xt(My),Dy=ee({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ry=Xt(Dy),Fy=ee({},Vi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ly=Xt(Fy),Oy=[9,13,27,32],dc=u&&"CompositionEvent"in window,ba=null;u&&"documentMode"in document&&(ba=document.documentMode);var Iy=u&&"TextEvent"in window&&!ba,Oh=u&&(!dc||ba&&8<ba&&11>=ba),Ih=" ",Bh=!1;function zh(r,o){switch(r){case"keyup":return Oy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $h(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var br=!1;function By(r,o){switch(r){case"compositionend":return $h(o);case"keypress":return o.which!==32?null:(Bh=!0,Ih);case"textInput":return r=o.data,r===Ih&&Bh?null:r;default:return null}}function zy(r,o){if(br)return r==="compositionend"||!dc&&zh(r,o)?(r=Th(),$i=rc=hn=null,br=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Oh&&o.locale!=="ko"?null:o.data;default:return null}}var $y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!$y[r.type]:o==="textarea"}function Hh(r,o,d,m){ch(m),o=Xi(o,"onChange"),0<o.length&&(d=new ac("onChange","change",null,d,m),r.push({event:d,listeners:o}))}var va=null,wa=null;function Uy(r){om(r,0)}function Wi(r){var o=_r(r);if(Ue(o))return r}function Hy(r,o){if(r==="change")return o}var Vh=!1;if(u){var uc;if(u){var hc="oninput"in document;if(!hc){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),hc=typeof Wh.oninput=="function"}uc=hc}else uc=!1;Vh=uc&&(!document.documentMode||9<document.documentMode)}function qh(){va&&(va.detachEvent("onpropertychange",Yh),wa=va=null)}function Yh(r){if(r.propertyName==="value"&&Wi(wa)){var o=[];Hh(o,wa,r,Wl(r)),mh(Uy,o)}}function Vy(r,o,d){r==="focusin"?(qh(),va=o,wa=d,va.attachEvent("onpropertychange",Yh)):r==="focusout"&&qh()}function Wy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wi(wa)}function qy(r,o){if(r==="click")return Wi(o)}function Yy(r,o){if(r==="input"||r==="change")return Wi(o)}function Ky(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var fs=typeof Object.is=="function"?Object.is:Ky;function ja(r,o){if(fs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var d=Object.keys(r),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var g=d[m];if(!h.call(o,g)||!fs(r[g],o[g]))return!1}return!0}function Kh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xh(r,o){var d=Kh(r);r=0;for(var m;d;){if(d.nodeType===3){if(m=r+d.textContent.length,r<=o&&m>=o)return{node:d,offset:o-r};r=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Kh(d)}}function Qh(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Qh(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Jh(){for(var r=window,o=ts();o instanceof r.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)r=o.contentWindow;else break;o=ts(r.document)}return o}function mc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function Xy(r){var o=Jh(),d=r.focusedElem,m=r.selectionRange;if(o!==d&&d&&d.ownerDocument&&Qh(d.ownerDocument.documentElement,d)){if(m!==null&&mc(d)){if(o=m.start,r=m.end,r===void 0&&(r=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(r,d.value.length);else if(r=(o=d.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var g=d.textContent.length,y=Math.min(m.start,g);m=m.end===void 0?y:Math.min(m.end,g),!r.extend&&y>m&&(g=m,m=y,y=g),g=Xh(d,y);var k=Xh(d,m);g&&k&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),r.removeAllRanges(),y>m?(r.addRange(o),r.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),r.addRange(o)))}}for(o=[],r=d;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)r=o[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Qy=u&&"documentMode"in document&&11>=document.documentMode,vr=null,fc=null,Na=null,pc=!1;function Gh(r,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;pc||vr==null||vr!==ts(m)||(m=vr,"selectionStart"in m&&mc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Na&&ja(Na,m)||(Na=m,m=Xi(fc,"onSelect"),0<m.length&&(o=new ac("onSelect","select",null,o,d),r.push({event:o,listeners:m}),o.target=vr)))}function qi(r,o){var d={};return d[r.toLowerCase()]=o.toLowerCase(),d["Webkit"+r]="webkit"+o,d["Moz"+r]="moz"+o,d}var wr={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},gc={},Zh={};u&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Yi(r){if(gc[r])return gc[r];if(!wr[r])return r;var o=wr[r],d;for(d in o)if(o.hasOwnProperty(d)&&d in Zh)return gc[r]=o[d];return r}var em=Yi("animationend"),tm=Yi("animationiteration"),sm=Yi("animationstart"),nm=Yi("transitionend"),rm=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(r,o){rm.set(r,o),l(o,[r])}for(var xc=0;xc<am.length;xc++){var yc=am[xc],Jy=yc.toLowerCase(),Gy=yc[0].toUpperCase()+yc.slice(1);mn(Jy,"on"+Gy)}mn(em,"onAnimationEnd"),mn(tm,"onAnimationIteration"),mn(sm,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(nm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function im(r,o,d){var m=r.type||"unknown-event";r.currentTarget=d,J0(m,o,void 0,r),r.currentTarget=null}function om(r,o){o=(o&4)!==0;for(var d=0;d<r.length;d++){var m=r[d],g=m.event;m=m.listeners;e:{var y=void 0;if(o)for(var k=m.length-1;0<=k;k--){var M=m[k],O=M.instance,X=M.currentTarget;if(M=M.listener,O!==y&&g.isPropagationStopped())break e;im(g,M,X),y=O}else for(k=0;k<m.length;k++){if(M=m[k],O=M.instance,X=M.currentTarget,M=M.listener,O!==y&&g.isPropagationStopped())break e;im(g,M,X),y=O}}}if(Mi)throw r=Xl,Mi=!1,Xl=null,r}function Xe(r,o){var d=o[Sc];d===void 0&&(d=o[Sc]=new Set);var m=r+"__bubble";d.has(m)||(lm(o,r,2,!1),d.add(m))}function bc(r,o,d){var m=0;o&&(m|=4),lm(d,r,m,o)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function ka(r){if(!r[Ki]){r[Ki]=!0,n.forEach(function(d){d!=="selectionchange"&&(Zy.has(d)||bc(d,!1,r),bc(d,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Ki]||(o[Ki]=!0,bc("selectionchange",!1,o))}}function lm(r,o,d,m){switch(Mh(o)){case 1:var g=my;break;case 4:g=fy;break;default:g=sc}d=g.bind(null,o,d,r),g=void 0,!Kl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),m?g!==void 0?r.addEventListener(o,d,{capture:!0,passive:g}):r.addEventListener(o,d,!0):g!==void 0?r.addEventListener(o,d,{passive:g}):r.addEventListener(o,d,!1)}function vc(r,o,d,m,g){var y=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var M=m.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(k===4)for(k=m.return;k!==null;){var O=k.tag;if((O===3||O===4)&&(O=k.stateNode.containerInfo,O===g||O.nodeType===8&&O.parentNode===g))return;k=k.return}for(;M!==null;){if(k=zn(M),k===null)return;if(O=k.tag,O===5||O===6){m=y=k;continue e}M=M.parentNode}}m=m.return}mh(function(){var X=y,oe=Wl(d),ue=[];e:{var ie=rm.get(r);if(ie!==void 0){var ge=ac,we=r;switch(r){case"keypress":if(Ui(d)===0)break e;case"keydown":case"keyup":ge=Ay;break;case"focusin":we="focus",ge=lc;break;case"focusout":we="blur",ge=lc;break;case"beforeblur":case"afterblur":ge=lc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Ty;break;case em:case tm:case sm:ge=vy;break;case nm:ge=Ry;break;case"scroll":ge=py;break;case"wheel":ge=Ly;break;case"copy":case"cut":case"paste":ge=jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Lh}var Ne=(o&4)!==0,it=!Ne&&r==="scroll",W=Ne?ie!==null?ie+"Capture":null:ie;Ne=[];for(var z=X,Y;z!==null;){Y=z;var me=Y.stateNode;if(Y.tag===5&&me!==null&&(Y=me,W!==null&&(me=oa(z,W),me!=null&&Ne.push(Sa(z,me,Y)))),it)break;z=z.return}0<Ne.length&&(ie=new ge(ie,we,null,d,oe),ue.push({event:ie,listeners:Ne}))}}if((o&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ge=r==="mouseout"||r==="pointerout",ie&&d!==Vl&&(we=d.relatedTarget||d.fromElement)&&(zn(we)||we[zs]))break e;if((ge||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ge?(we=d.relatedTarget||d.toElement,ge=X,we=we?zn(we):null,we!==null&&(it=Bn(we),we!==it||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=X),ge!==we)){if(Ne=Rh,me="onMouseLeave",W="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=Lh,me="onPointerLeave",W="onPointerEnter",z="pointer"),it=ge==null?ie:_r(ge),Y=we==null?ie:_r(we),ie=new Ne(me,z+"leave",ge,d,oe),ie.target=it,ie.relatedTarget=Y,me=null,zn(oe)===X&&(Ne=new Ne(W,z+"enter",we,d,oe),Ne.target=Y,Ne.relatedTarget=it,me=Ne),it=me,ge&&we)t:{for(Ne=ge,W=we,z=0,Y=Ne;Y;Y=jr(Y))z++;for(Y=0,me=W;me;me=jr(me))Y++;for(;0<z-Y;)Ne=jr(Ne),z--;for(;0<Y-z;)W=jr(W),Y--;for(;z--;){if(Ne===W||W!==null&&Ne===W.alternate)break t;Ne=jr(Ne),W=jr(W)}Ne=null}else Ne=null;ge!==null&&cm(ue,ie,ge,Ne,!1),we!==null&&it!==null&&cm(ue,it,we,Ne,!0)}}e:{if(ie=X?_r(X):window,ge=ie.nodeName&&ie.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ie.type==="file")var _e=Hy;else if(Uh(ie))if(Vh)_e=Yy;else{_e=Wy;var Ce=Vy}else(ge=ie.nodeName)&&ge.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(_e=qy);if(_e&&(_e=_e(r,X))){Hh(ue,_e,d,oe);break e}Ce&&Ce(r,ie,X),r==="focusout"&&(Ce=ie._wrapperState)&&Ce.controlled&&ie.type==="number"&&je(ie,"number",ie.value)}switch(Ce=X?_r(X):window,r){case"focusin":(Uh(Ce)||Ce.contentEditable==="true")&&(vr=Ce,fc=X,Na=null);break;case"focusout":Na=fc=vr=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,Gh(ue,d,oe);break;case"selectionchange":if(Qy)break;case"keydown":case"keyup":Gh(ue,d,oe)}var Ee;if(dc)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else br?zh(r,d)&&(Ae="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Ae="onCompositionStart");Ae&&(Oh&&d.locale!=="ko"&&(br||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&br&&(Ee=Th()):(hn=oe,rc="value"in hn?hn.value:hn.textContent,br=!0)),Ce=Xi(X,Ae),0<Ce.length&&(Ae=new Fh(Ae,r,null,d,oe),ue.push({event:Ae,listeners:Ce}),Ee?Ae.data=Ee:(Ee=$h(d),Ee!==null&&(Ae.data=Ee)))),(Ee=Iy?By(r,d):zy(r,d))&&(X=Xi(X,"onBeforeInput"),0<X.length&&(oe=new Fh("onBeforeInput","beforeinput",null,d,oe),ue.push({event:oe,listeners:X}),oe.data=Ee))}om(ue,o)})}function Sa(r,o,d){return{instance:r,listener:o,currentTarget:d}}function Xi(r,o){for(var d=o+"Capture",m=[];r!==null;){var g=r,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=oa(r,d),y!=null&&m.unshift(Sa(r,y,g)),y=oa(r,o),y!=null&&m.push(Sa(r,y,g))),r=r.return}return m}function jr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function cm(r,o,d,m,g){for(var y=o._reactName,k=[];d!==null&&d!==m;){var M=d,O=M.alternate,X=M.stateNode;if(O!==null&&O===m)break;M.tag===5&&X!==null&&(M=X,g?(O=oa(d,y),O!=null&&k.unshift(Sa(d,O,M))):g||(O=oa(d,y),O!=null&&k.push(Sa(d,O,M)))),d=d.return}k.length!==0&&r.push({event:o,listeners:k})}var eb=/\r\n?/g,tb=/\u0000|\uFFFD/g;function dm(r){return(typeof r=="string"?r:""+r).replace(eb,`
`).replace(tb,"")}function Qi(r,o,d){if(o=dm(o),dm(r)!==o&&d)throw Error(s(425))}function Ji(){}var wc=null,jc=null;function Nc(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,sb=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,nb=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(r){return um.resolve(null).then(r).catch(rb)}:_c;function rb(r){setTimeout(function(){throw r})}function kc(r,o){var d=o,m=0;do{var g=d.nextSibling;if(r.removeChild(d),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(m===0){r.removeChild(g),ga(o);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=g}while(d);ga(o)}function fn(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function hm(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return r;o--}else d==="/$"&&o++}r=r.previousSibling}return null}var Nr=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Nr,Ca="__reactProps$"+Nr,zs="__reactContainer$"+Nr,Sc="__reactEvents$"+Nr,ab="__reactListeners$"+Nr,ib="__reactHandles$"+Nr;function zn(r){var o=r[Ss];if(o)return o;for(var d=r.parentNode;d;){if(o=d[zs]||d[Ss]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(r=hm(r);r!==null;){if(d=r[Ss])return d;r=hm(r)}return o}r=d,d=r.parentNode}return null}function Ea(r){return r=r[Ss]||r[zs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function _r(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function Gi(r){return r[Ca]||null}var Cc=[],kr=-1;function pn(r){return{current:r}}function Qe(r){0>kr||(r.current=Cc[kr],Cc[kr]=null,kr--)}function Ke(r,o){kr++,Cc[kr]=r.current,r.current=o}var gn={},St=pn(gn),Ot=pn(!1),$n=gn;function Sr(r,o){var d=r.type.contextTypes;if(!d)return gn;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in d)g[y]=o[y];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=g),g}function It(r){return r=r.childContextTypes,r!=null}function Zi(){Qe(Ot),Qe(St)}function mm(r,o,d){if(St.current!==gn)throw Error(s(168));Ke(St,o),Ke(Ot,d)}function fm(r,o,d){var m=r.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var g in m)if(!(g in o))throw Error(s(108,he(r)||"Unknown",g));return ee({},d,m)}function eo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||gn,$n=St.current,Ke(St,r),Ke(Ot,Ot.current),!0}function pm(r,o,d){var m=r.stateNode;if(!m)throw Error(s(169));d?(r=fm(r,o,$n),m.__reactInternalMemoizedMergedChildContext=r,Qe(Ot),Qe(St),Ke(St,r)):Qe(Ot),Ke(Ot,d)}var $s=null,to=!1,Ec=!1;function gm(r){$s===null?$s=[r]:$s.push(r)}function ob(r){to=!0,gm(r)}function xn(){if(!Ec&&$s!==null){Ec=!0;var r=0,o=Ve;try{var d=$s;for(Ve=1;r<d.length;r++){var m=d[r];do m=m(!0);while(m!==null)}$s=null,to=!1}catch(g){throw $s!==null&&($s=$s.slice(r+1)),yh(Ql,xn),g}finally{Ve=o,Ec=!1}}return null}var Cr=[],Er=0,so=null,no=0,ns=[],rs=0,Un=null,Us=1,Hs="";function Hn(r,o){Cr[Er++]=no,Cr[Er++]=so,so=r,no=o}function xm(r,o,d){ns[rs++]=Us,ns[rs++]=Hs,ns[rs++]=Un,Un=r;var m=Us;r=Hs;var g=32-ms(m)-1;m&=~(1<<g),d+=1;var y=32-ms(o)+g;if(30<y){var k=g-g%5;y=(m&(1<<k)-1).toString(32),m>>=k,g-=k,Us=1<<32-ms(o)+g|d<<g|m,Hs=y+r}else Us=1<<y|d<<g|m,Hs=r}function Ac(r){r.return!==null&&(Hn(r,1),xm(r,1,0))}function Pc(r){for(;r===so;)so=Cr[--Er],Cr[Er]=null,no=Cr[--Er],Cr[Er]=null;for(;r===Un;)Un=ns[--rs],ns[rs]=null,Hs=ns[--rs],ns[rs]=null,Us=ns[--rs],ns[rs]=null}var Qt=null,Jt=null,Ze=!1,ps=null;function ym(r,o){var d=ls(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=r,o=r.deletions,o===null?(r.deletions=[d],r.flags|=16):o.push(d)}function bm(r,o){switch(r.tag){case 5:var d=r.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Qt=r,Jt=fn(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Qt=r,Jt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=Un!==null?{id:Us,overflow:Hs}:null,r.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=ls(18,null,null,0),d.stateNode=o,d.return=r,r.child=d,Qt=r,Jt=null,!0):!1;default:return!1}}function Mc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Tc(r){if(Ze){var o=Jt;if(o){var d=o;if(!bm(r,o)){if(Mc(r))throw Error(s(418));o=fn(d.nextSibling);var m=Qt;o&&bm(r,o)?ym(m,d):(r.flags=r.flags&-4097|2,Ze=!1,Qt=r)}}else{if(Mc(r))throw Error(s(418));r.flags=r.flags&-4097|2,Ze=!1,Qt=r}}}function vm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Qt=r}function ro(r){if(r!==Qt)return!1;if(!Ze)return vm(r),Ze=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!Nc(r.type,r.memoizedProps)),o&&(o=Jt)){if(Mc(r))throw wm(),Error(s(418));for(;o;)ym(r,o),o=fn(o.nextSibling)}if(vm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(o===0){Jt=fn(r.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}r=r.nextSibling}Jt=null}}else Jt=Qt?fn(r.stateNode.nextSibling):null;return!0}function wm(){for(var r=Jt;r;)r=fn(r.nextSibling)}function Ar(){Jt=Qt=null,Ze=!1}function Dc(r){ps===null?ps=[r]:ps.push(r)}var lb=D.ReactCurrentBatchConfig;function Aa(r,o,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var m=d.stateNode}if(!m)throw Error(s(147,r));var g=m,y=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(k){var M=g.refs;k===null?delete M[y]:M[y]=k},o._stringRef=y,o)}if(typeof r!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,r))}return r}function ao(r,o){throw r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function jm(r){var o=r._init;return o(r._payload)}function Nm(r){function o(W,z){if(r){var Y=W.deletions;Y===null?(W.deletions=[z],W.flags|=16):Y.push(z)}}function d(W,z){if(!r)return null;for(;z!==null;)o(W,z),z=z.sibling;return null}function m(W,z){for(W=new Map;z!==null;)z.key!==null?W.set(z.key,z):W.set(z.index,z),z=z.sibling;return W}function g(W,z){return W=kn(W,z),W.index=0,W.sibling=null,W}function y(W,z,Y){return W.index=Y,r?(Y=W.alternate,Y!==null?(Y=Y.index,Y<z?(W.flags|=2,z):Y):(W.flags|=2,z)):(W.flags|=1048576,z)}function k(W){return r&&W.alternate===null&&(W.flags|=2),W}function M(W,z,Y,me){return z===null||z.tag!==6?(z=_d(Y,W.mode,me),z.return=W,z):(z=g(z,Y),z.return=W,z)}function O(W,z,Y,me){var _e=Y.type;return _e===R?oe(W,z,Y.props.children,me,Y.key):z!==null&&(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&jm(_e)===z.type)?(me=g(z,Y.props),me.ref=Aa(W,z,Y),me.return=W,me):(me=Po(Y.type,Y.key,Y.props,null,W.mode,me),me.ref=Aa(W,z,Y),me.return=W,me)}function X(W,z,Y,me){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=kd(Y,W.mode,me),z.return=W,z):(z=g(z,Y.children||[]),z.return=W,z)}function oe(W,z,Y,me,_e){return z===null||z.tag!==7?(z=Jn(Y,W.mode,me,_e),z.return=W,z):(z=g(z,Y),z.return=W,z)}function ue(W,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number")return z=_d(""+z,W.mode,Y),z.return=W,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return Y=Po(z.type,z.key,z.props,null,W.mode,Y),Y.ref=Aa(W,null,z),Y.return=W,Y;case L:return z=kd(z,W.mode,Y),z.return=W,z;case I:var me=z._init;return ue(W,me(z._payload),Y)}if(De(z)||te(z))return z=Jn(z,W.mode,Y,null),z.return=W,z;ao(W,z)}return null}function ie(W,z,Y,me){var _e=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return _e!==null?null:M(W,z,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return Y.key===_e?O(W,z,Y,me):null;case L:return Y.key===_e?X(W,z,Y,me):null;case I:return _e=Y._init,ie(W,z,_e(Y._payload),me)}if(De(Y)||te(Y))return _e!==null?null:oe(W,z,Y,me,null);ao(W,Y)}return null}function ge(W,z,Y,me,_e){if(typeof me=="string"&&me!==""||typeof me=="number")return W=W.get(Y)||null,M(z,W,""+me,_e);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case T:return W=W.get(me.key===null?Y:me.key)||null,O(z,W,me,_e);case L:return W=W.get(me.key===null?Y:me.key)||null,X(z,W,me,_e);case I:var Ce=me._init;return ge(W,z,Y,Ce(me._payload),_e)}if(De(me)||te(me))return W=W.get(Y)||null,oe(z,W,me,_e,null);ao(z,me)}return null}function we(W,z,Y,me){for(var _e=null,Ce=null,Ee=z,Ae=z=0,vt=null;Ee!==null&&Ae<Y.length;Ae++){Ee.index>Ae?(vt=Ee,Ee=null):vt=Ee.sibling;var $e=ie(W,Ee,Y[Ae],me);if($e===null){Ee===null&&(Ee=vt);break}r&&Ee&&$e.alternate===null&&o(W,Ee),z=y($e,z,Ae),Ce===null?_e=$e:Ce.sibling=$e,Ce=$e,Ee=vt}if(Ae===Y.length)return d(W,Ee),Ze&&Hn(W,Ae),_e;if(Ee===null){for(;Ae<Y.length;Ae++)Ee=ue(W,Y[Ae],me),Ee!==null&&(z=y(Ee,z,Ae),Ce===null?_e=Ee:Ce.sibling=Ee,Ce=Ee);return Ze&&Hn(W,Ae),_e}for(Ee=m(W,Ee);Ae<Y.length;Ae++)vt=ge(Ee,W,Ae,Y[Ae],me),vt!==null&&(r&&vt.alternate!==null&&Ee.delete(vt.key===null?Ae:vt.key),z=y(vt,z,Ae),Ce===null?_e=vt:Ce.sibling=vt,Ce=vt);return r&&Ee.forEach(function(Sn){return o(W,Sn)}),Ze&&Hn(W,Ae),_e}function Ne(W,z,Y,me){var _e=te(Y);if(typeof _e!="function")throw Error(s(150));if(Y=_e.call(Y),Y==null)throw Error(s(151));for(var Ce=_e=null,Ee=z,Ae=z=0,vt=null,$e=Y.next();Ee!==null&&!$e.done;Ae++,$e=Y.next()){Ee.index>Ae?(vt=Ee,Ee=null):vt=Ee.sibling;var Sn=ie(W,Ee,$e.value,me);if(Sn===null){Ee===null&&(Ee=vt);break}r&&Ee&&Sn.alternate===null&&o(W,Ee),z=y(Sn,z,Ae),Ce===null?_e=Sn:Ce.sibling=Sn,Ce=Sn,Ee=vt}if($e.done)return d(W,Ee),Ze&&Hn(W,Ae),_e;if(Ee===null){for(;!$e.done;Ae++,$e=Y.next())$e=ue(W,$e.value,me),$e!==null&&(z=y($e,z,Ae),Ce===null?_e=$e:Ce.sibling=$e,Ce=$e);return Ze&&Hn(W,Ae),_e}for(Ee=m(W,Ee);!$e.done;Ae++,$e=Y.next())$e=ge(Ee,W,Ae,$e.value,me),$e!==null&&(r&&$e.alternate!==null&&Ee.delete($e.key===null?Ae:$e.key),z=y($e,z,Ae),Ce===null?_e=$e:Ce.sibling=$e,Ce=$e);return r&&Ee.forEach(function($b){return o(W,$b)}),Ze&&Hn(W,Ae),_e}function it(W,z,Y,me){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:e:{for(var _e=Y.key,Ce=z;Ce!==null;){if(Ce.key===_e){if(_e=Y.type,_e===R){if(Ce.tag===7){d(W,Ce.sibling),z=g(Ce,Y.props.children),z.return=W,W=z;break e}}else if(Ce.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&jm(_e)===Ce.type){d(W,Ce.sibling),z=g(Ce,Y.props),z.ref=Aa(W,Ce,Y),z.return=W,W=z;break e}d(W,Ce);break}else o(W,Ce);Ce=Ce.sibling}Y.type===R?(z=Jn(Y.props.children,W.mode,me,Y.key),z.return=W,W=z):(me=Po(Y.type,Y.key,Y.props,null,W.mode,me),me.ref=Aa(W,z,Y),me.return=W,W=me)}return k(W);case L:e:{for(Ce=Y.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){d(W,z.sibling),z=g(z,Y.children||[]),z.return=W,W=z;break e}else{d(W,z);break}else o(W,z);z=z.sibling}z=kd(Y,W.mode,me),z.return=W,W=z}return k(W);case I:return Ce=Y._init,it(W,z,Ce(Y._payload),me)}if(De(Y))return we(W,z,Y,me);if(te(Y))return Ne(W,z,Y,me);ao(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,z!==null&&z.tag===6?(d(W,z.sibling),z=g(z,Y),z.return=W,W=z):(d(W,z),z=_d(Y,W.mode,me),z.return=W,W=z),k(W)):d(W,z)}return it}var Pr=Nm(!0),_m=Nm(!1),io=pn(null),oo=null,Mr=null,Rc=null;function Fc(){Rc=Mr=oo=null}function Lc(r){var o=io.current;Qe(io),r._currentValue=o}function Oc(r,o,d){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===d)break;r=r.return}}function Tr(r,o){oo=r,Rc=Mr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Bt=!0),r.firstContext=null)}function as(r){var o=r._currentValue;if(Rc!==r)if(r={context:r,memoizedValue:o,next:null},Mr===null){if(oo===null)throw Error(s(308));Mr=r,oo.dependencies={lanes:0,firstContext:r}}else Mr=Mr.next=r;return o}var Vn=null;function Ic(r){Vn===null?Vn=[r]:Vn.push(r)}function km(r,o,d,m){var g=o.interleaved;return g===null?(d.next=d,Ic(o)):(d.next=g.next,g.next=d),o.interleaved=d,Vs(r,m)}function Vs(r,o){r.lanes|=o;var d=r.alternate;for(d!==null&&(d.lanes|=o),d=r,r=r.return;r!==null;)r.childLanes|=o,d=r.alternate,d!==null&&(d.childLanes|=o),d=r,r=r.return;return d.tag===3?d.stateNode:null}var yn=!1;function Bc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ws(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function bn(r,o,d){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(ze&2)!==0){var g=m.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),m.pending=o,Vs(r,d)}return g=m.interleaved,g===null?(o.next=o,Ic(m)):(o.next=g.next,g.next=o),m.interleaved=o,Vs(r,d)}function lo(r,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var m=o.lanes;m&=r.pendingLanes,d|=m,o.lanes=d,Zl(r,d)}}function Cm(r,o){var d=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var g=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var k={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};y===null?g=y=k:y=y.next=k,d=d.next}while(d!==null);y===null?g=y=o:y=y.next=o}else g=y=o;d={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:m.shared,effects:m.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=o:r.next=o,d.lastBaseUpdate=o}function co(r,o,d,m){var g=r.updateQueue;yn=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var O=M,X=O.next;O.next=null,k===null?y=X:k.next=X,k=O;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==k&&(M===null?oe.firstBaseUpdate=X:M.next=X,oe.lastBaseUpdate=O))}if(y!==null){var ue=g.baseState;k=0,oe=X=O=null,M=y;do{var ie=M.lane,ge=M.eventTime;if((m&ie)===ie){oe!==null&&(oe=oe.next={eventTime:ge,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var we=r,Ne=M;switch(ie=o,ge=d,Ne.tag){case 1:if(we=Ne.payload,typeof we=="function"){ue=we.call(ge,ue,ie);break e}ue=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ne.payload,ie=typeof we=="function"?we.call(ge,ue,ie):we,ie==null)break e;ue=ee({},ue,ie);break e;case 2:yn=!0}}M.callback!==null&&M.lane!==0&&(r.flags|=64,ie=g.effects,ie===null?g.effects=[M]:ie.push(M))}else ge={eventTime:ge,lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(X=oe=ge,O=ue):oe=oe.next=ge,k|=ie;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,g.lastBaseUpdate=ie,g.shared.pending=null}}while(!0);if(oe===null&&(O=ue),g.baseState=O,g.firstBaseUpdate=X,g.lastBaseUpdate=oe,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Yn|=k,r.lanes=k,r.memoizedState=ue}}function Em(r,o,d){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var m=r[o],g=m.callback;if(g!==null){if(m.callback=null,m=d,typeof g!="function")throw Error(s(191,g));g.call(m)}}}var Pa={},Cs=pn(Pa),Ma=pn(Pa),Ta=pn(Pa);function Wn(r){if(r===Pa)throw Error(s(174));return r}function zc(r,o){switch(Ke(Ta,o),Ke(Ma,r),Ke(Cs,Pa),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Kt(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Kt(o,r)}Qe(Cs),Ke(Cs,o)}function Dr(){Qe(Cs),Qe(Ma),Qe(Ta)}function Am(r){Wn(Ta.current);var o=Wn(Cs.current),d=Kt(o,r.type);o!==d&&(Ke(Ma,r),Ke(Cs,d))}function $c(r){Ma.current===r&&(Qe(Cs),Qe(Ma))}var et=pn(0);function uo(r){for(var o=r;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Uc=[];function Hc(){for(var r=0;r<Uc.length;r++)Uc[r]._workInProgressVersionPrimary=null;Uc.length=0}var ho=D.ReactCurrentDispatcher,Vc=D.ReactCurrentBatchConfig,qn=0,tt=null,pt=null,yt=null,mo=!1,Da=!1,Ra=0,cb=0;function Ct(){throw Error(s(321))}function Wc(r,o){if(o===null)return!1;for(var d=0;d<o.length&&d<r.length;d++)if(!fs(r[d],o[d]))return!1;return!0}function qc(r,o,d,m,g,y){if(qn=y,tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ho.current=r===null||r.memoizedState===null?mb:fb,r=d(m,g),Da){y=0;do{if(Da=!1,Ra=0,25<=y)throw Error(s(301));y+=1,yt=pt=null,o.updateQueue=null,ho.current=pb,r=d(m,g)}while(Da)}if(ho.current=go,o=pt!==null&&pt.next!==null,qn=0,yt=pt=tt=null,mo=!1,o)throw Error(s(300));return r}function Yc(){var r=Ra!==0;return Ra=0,r}function Es(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?tt.memoizedState=yt=r:yt=yt.next=r,yt}function is(){if(pt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=pt.next;var o=yt===null?tt.memoizedState:yt.next;if(o!==null)yt=o,pt=r;else{if(r===null)throw Error(s(310));pt=r,r={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},yt===null?tt.memoizedState=yt=r:yt=yt.next=r}return yt}function Fa(r,o){return typeof o=="function"?o(r):o}function Kc(r){var o=is(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var m=pt,g=m.baseQueue,y=d.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}m.baseQueue=g=y,d.pending=null}if(g!==null){y=g.next,m=m.baseState;var M=k=null,O=null,X=y;do{var oe=X.lane;if((qn&oe)===oe)O!==null&&(O=O.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:r(m,X.action);else{var ue={lane:oe,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};O===null?(M=O=ue,k=m):O=O.next=ue,tt.lanes|=oe,Yn|=oe}X=X.next}while(X!==null&&X!==y);O===null?k=m:O.next=M,fs(m,o.memoizedState)||(Bt=!0),o.memoizedState=m,o.baseState=k,o.baseQueue=O,d.lastRenderedState=m}if(r=d.interleaved,r!==null){g=r;do y=g.lane,tt.lanes|=y,Yn|=y,g=g.next;while(g!==r)}else g===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Xc(r){var o=is(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=r;var m=d.dispatch,g=d.pending,y=o.memoizedState;if(g!==null){d.pending=null;var k=g=g.next;do y=r(y,k.action),k=k.next;while(k!==g);fs(y,o.memoizedState)||(Bt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),d.lastRenderedState=y}return[y,m]}function Pm(){}function Mm(r,o){var d=tt,m=is(),g=o(),y=!fs(m.memoizedState,g);if(y&&(m.memoizedState=g,Bt=!0),m=m.queue,Qc(Rm.bind(null,d,m,r),[r]),m.getSnapshot!==o||y||yt!==null&&yt.memoizedState.tag&1){if(d.flags|=2048,La(9,Dm.bind(null,d,m,g,o),void 0,null),bt===null)throw Error(s(349));(qn&30)!==0||Tm(d,o,g)}return g}function Tm(r,o,d){r.flags|=16384,r={getSnapshot:o,value:d},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.stores=[r]):(d=o.stores,d===null?o.stores=[r]:d.push(r))}function Dm(r,o,d,m){o.value=d,o.getSnapshot=m,Fm(o)&&Lm(r)}function Rm(r,o,d){return d(function(){Fm(o)&&Lm(r)})}function Fm(r){var o=r.getSnapshot;r=r.value;try{var d=o();return!fs(r,d)}catch{return!0}}function Lm(r){var o=Vs(r,1);o!==null&&bs(o,r,1,-1)}function Om(r){var o=Es();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:r},o.queue=r,r=r.dispatch=hb.bind(null,tt,r),[o.memoizedState,r]}function La(r,o,d,m){return r={tag:r,create:o,destroy:d,deps:m,next:null},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.lastEffect=r.next=r):(d=o.lastEffect,d===null?o.lastEffect=r.next=r:(m=d.next,d.next=r,r.next=m,o.lastEffect=r)),r}function Im(){return is().memoizedState}function fo(r,o,d,m){var g=Es();tt.flags|=r,g.memoizedState=La(1|o,d,void 0,m===void 0?null:m)}function po(r,o,d,m){var g=is();m=m===void 0?null:m;var y=void 0;if(pt!==null){var k=pt.memoizedState;if(y=k.destroy,m!==null&&Wc(m,k.deps)){g.memoizedState=La(o,d,y,m);return}}tt.flags|=r,g.memoizedState=La(1|o,d,y,m)}function Bm(r,o){return fo(8390656,8,r,o)}function Qc(r,o){return po(2048,8,r,o)}function zm(r,o){return po(4,2,r,o)}function $m(r,o){return po(4,4,r,o)}function Um(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Hm(r,o,d){return d=d!=null?d.concat([r]):null,po(4,4,Um.bind(null,o,r),d)}function Jc(){}function Vm(r,o){var d=is();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&Wc(o,m[1])?m[0]:(d.memoizedState=[r,o],r)}function Wm(r,o){var d=is();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&Wc(o,m[1])?m[0]:(r=r(),d.memoizedState=[r,o],r)}function qm(r,o,d){return(qn&21)===0?(r.baseState&&(r.baseState=!1,Bt=!0),r.memoizedState=d):(fs(d,o)||(d=jh(),tt.lanes|=d,Yn|=d,r.baseState=!0),o)}function db(r,o){var d=Ve;Ve=d!==0&&4>d?d:4,r(!0);var m=Vc.transition;Vc.transition={};try{r(!1),o()}finally{Ve=d,Vc.transition=m}}function Ym(){return is().memoizedState}function ub(r,o,d){var m=Nn(r);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Km(r))Xm(o,d);else if(d=km(r,o,d,m),d!==null){var g=Lt();bs(d,r,m,g),Qm(d,o,m)}}function hb(r,o,d){var m=Nn(r),g={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Km(r))Xm(o,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,M=y(k,d);if(g.hasEagerState=!0,g.eagerState=M,fs(M,k)){var O=o.interleaved;O===null?(g.next=g,Ic(o)):(g.next=O.next,O.next=g),o.interleaved=g;return}}catch{}finally{}d=km(r,o,g,m),d!==null&&(g=Lt(),bs(d,r,m,g),Qm(d,o,m))}}function Km(r){var o=r.alternate;return r===tt||o!==null&&o===tt}function Xm(r,o){Da=mo=!0;var d=r.pending;d===null?o.next=o:(o.next=d.next,d.next=o),r.pending=o}function Qm(r,o,d){if((d&4194240)!==0){var m=o.lanes;m&=r.pendingLanes,d|=m,o.lanes=d,Zl(r,d)}}var go={readContext:as,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},mb={readContext:as,useCallback:function(r,o){return Es().memoizedState=[r,o===void 0?null:o],r},useContext:as,useEffect:Bm,useImperativeHandle:function(r,o,d){return d=d!=null?d.concat([r]):null,fo(4194308,4,Um.bind(null,o,r),d)},useLayoutEffect:function(r,o){return fo(4194308,4,r,o)},useInsertionEffect:function(r,o){return fo(4,2,r,o)},useMemo:function(r,o){var d=Es();return o=o===void 0?null:o,r=r(),d.memoizedState=[r,o],r},useReducer:function(r,o,d){var m=Es();return o=d!==void 0?d(o):o,m.memoizedState=m.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},m.queue=r,r=r.dispatch=ub.bind(null,tt,r),[m.memoizedState,r]},useRef:function(r){var o=Es();return r={current:r},o.memoizedState=r},useState:Om,useDebugValue:Jc,useDeferredValue:function(r){return Es().memoizedState=r},useTransition:function(){var r=Om(!1),o=r[0];return r=db.bind(null,r[1]),Es().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,d){var m=tt,g=Es();if(Ze){if(d===void 0)throw Error(s(407));d=d()}else{if(d=o(),bt===null)throw Error(s(349));(qn&30)!==0||Tm(m,o,d)}g.memoizedState=d;var y={value:d,getSnapshot:o};return g.queue=y,Bm(Rm.bind(null,m,y,r),[r]),m.flags|=2048,La(9,Dm.bind(null,m,y,d,o),void 0,null),d},useId:function(){var r=Es(),o=bt.identifierPrefix;if(Ze){var d=Hs,m=Us;d=(m&~(1<<32-ms(m)-1)).toString(32)+d,o=":"+o+"R"+d,d=Ra++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=cb++,o=":"+o+"r"+d.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},fb={readContext:as,useCallback:Vm,useContext:as,useEffect:Qc,useImperativeHandle:Hm,useInsertionEffect:zm,useLayoutEffect:$m,useMemo:Wm,useReducer:Kc,useRef:Im,useState:function(){return Kc(Fa)},useDebugValue:Jc,useDeferredValue:function(r){var o=is();return qm(o,pt.memoizedState,r)},useTransition:function(){var r=Kc(Fa)[0],o=is().memoizedState;return[r,o]},useMutableSource:Pm,useSyncExternalStore:Mm,useId:Ym,unstable_isNewReconciler:!1},pb={readContext:as,useCallback:Vm,useContext:as,useEffect:Qc,useImperativeHandle:Hm,useInsertionEffect:zm,useLayoutEffect:$m,useMemo:Wm,useReducer:Xc,useRef:Im,useState:function(){return Xc(Fa)},useDebugValue:Jc,useDeferredValue:function(r){var o=is();return pt===null?o.memoizedState=r:qm(o,pt.memoizedState,r)},useTransition:function(){var r=Xc(Fa)[0],o=is().memoizedState;return[r,o]},useMutableSource:Pm,useSyncExternalStore:Mm,useId:Ym,unstable_isNewReconciler:!1};function gs(r,o){if(r&&r.defaultProps){o=ee({},o),r=r.defaultProps;for(var d in r)o[d]===void 0&&(o[d]=r[d]);return o}return o}function Gc(r,o,d,m){o=r.memoizedState,d=d(m,o),d=d==null?o:ee({},o,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var xo={isMounted:function(r){return(r=r._reactInternals)?Bn(r)===r:!1},enqueueSetState:function(r,o,d){r=r._reactInternals;var m=Lt(),g=Nn(r),y=Ws(m,g);y.payload=o,d!=null&&(y.callback=d),o=bn(r,y,g),o!==null&&(bs(o,r,g,m),lo(o,r,g))},enqueueReplaceState:function(r,o,d){r=r._reactInternals;var m=Lt(),g=Nn(r),y=Ws(m,g);y.tag=1,y.payload=o,d!=null&&(y.callback=d),o=bn(r,y,g),o!==null&&(bs(o,r,g,m),lo(o,r,g))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var d=Lt(),m=Nn(r),g=Ws(d,m);g.tag=2,o!=null&&(g.callback=o),o=bn(r,g,m),o!==null&&(bs(o,r,m,d),lo(o,r,m))}};function Jm(r,o,d,m,g,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,y,k):o.prototype&&o.prototype.isPureReactComponent?!ja(d,m)||!ja(g,y):!0}function Gm(r,o,d){var m=!1,g=gn,y=o.contextType;return typeof y=="object"&&y!==null?y=as(y):(g=It(o)?$n:St.current,m=o.contextTypes,y=(m=m!=null)?Sr(r,g):gn),o=new o(d,y),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xo,r.stateNode=o,o._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=y),o}function Zm(r,o,d,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==r&&xo.enqueueReplaceState(o,o.state,null)}function Zc(r,o,d,m){var g=r.stateNode;g.props=d,g.state=r.memoizedState,g.refs={},Bc(r);var y=o.contextType;typeof y=="object"&&y!==null?g.context=as(y):(y=It(o)?$n:St.current,g.context=Sr(r,y)),g.state=r.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Gc(r,o,y,d),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&xo.enqueueReplaceState(g,g.state,null),co(r,d,g,m),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Rr(r,o){try{var d="",m=o;do d+=$(m),m=m.return;while(m);var g=d}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:o,stack:g,digest:null}}function ed(r,o,d){return{value:r,source:null,stack:d??null,digest:o??null}}function td(r,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var gb=typeof WeakMap=="function"?WeakMap:Map;function ef(r,o,d){d=Ws(-1,d),d.tag=3,d.payload={element:null};var m=o.value;return d.callback=function(){_o||(_o=!0,gd=m),td(r,o)},d}function tf(r,o,d){d=Ws(-1,d),d.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var g=o.value;d.payload=function(){return m(g)},d.callback=function(){td(r,o)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(d.callback=function(){td(r,o),typeof m!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),d}function sf(r,o,d){var m=r.pingCache;if(m===null){m=r.pingCache=new gb;var g=new Set;m.set(o,g)}else g=m.get(o),g===void 0&&(g=new Set,m.set(o,g));g.has(d)||(g.add(d),r=Pb.bind(null,r,o,d),o.then(r,r))}function nf(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function rf(r,o,d,m,g){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=Ws(-1,1),o.tag=2,bn(d,o,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var xb=D.ReactCurrentOwner,Bt=!1;function Ft(r,o,d,m){o.child=r===null?_m(o,null,d,m):Pr(o,r.child,d,m)}function af(r,o,d,m,g){d=d.render;var y=o.ref;return Tr(o,g),m=qc(r,o,d,m,y,g),d=Yc(),r!==null&&!Bt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,qs(r,o,g)):(Ze&&d&&Ac(o),o.flags|=1,Ft(r,o,m,g),o.child)}function of(r,o,d,m,g){if(r===null){var y=d.type;return typeof y=="function"&&!Nd(y)&&y.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=y,lf(r,o,y,m,g)):(r=Po(d.type,null,m,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,(r.lanes&g)===0){var k=y.memoizedProps;if(d=d.compare,d=d!==null?d:ja,d(k,m)&&r.ref===o.ref)return qs(r,o,g)}return o.flags|=1,r=kn(y,m),r.ref=o.ref,r.return=o,o.child=r}function lf(r,o,d,m,g){if(r!==null){var y=r.memoizedProps;if(ja(y,m)&&r.ref===o.ref)if(Bt=!1,o.pendingProps=m=y,(r.lanes&g)!==0)(r.flags&131072)!==0&&(Bt=!0);else return o.lanes=r.lanes,qs(r,o,g)}return sd(r,o,d,m,g)}function cf(r,o,d){var m=o.pendingProps,g=m.children,y=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Lr,Gt),Gt|=d;else{if((d&1073741824)===0)return r=y!==null?y.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Ke(Lr,Gt),Gt|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=y!==null?y.baseLanes:d,Ke(Lr,Gt),Gt|=m}else y!==null?(m=y.baseLanes|d,o.memoizedState=null):m=d,Ke(Lr,Gt),Gt|=m;return Ft(r,o,g,d),o.child}function df(r,o){var d=o.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function sd(r,o,d,m,g){var y=It(d)?$n:St.current;return y=Sr(o,y),Tr(o,g),d=qc(r,o,d,m,y,g),m=Yc(),r!==null&&!Bt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,qs(r,o,g)):(Ze&&m&&Ac(o),o.flags|=1,Ft(r,o,d,g),o.child)}function uf(r,o,d,m,g){if(It(d)){var y=!0;eo(o)}else y=!1;if(Tr(o,g),o.stateNode===null)bo(r,o),Gm(o,d,m),Zc(o,d,m,g),m=!0;else if(r===null){var k=o.stateNode,M=o.memoizedProps;k.props=M;var O=k.context,X=d.contextType;typeof X=="object"&&X!==null?X=as(X):(X=It(d)?$n:St.current,X=Sr(o,X));var oe=d.getDerivedStateFromProps,ue=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==m||O!==X)&&Zm(o,k,m,X),yn=!1;var ie=o.memoizedState;k.state=ie,co(o,m,k,g),O=o.memoizedState,M!==m||ie!==O||Ot.current||yn?(typeof oe=="function"&&(Gc(o,d,oe,m),O=o.memoizedState),(M=yn||Jm(o,d,M,m,ie,O,X))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=O),k.props=m,k.state=O,k.context=X,m=M):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{k=o.stateNode,Sm(r,o),M=o.memoizedProps,X=o.type===o.elementType?M:gs(o.type,M),k.props=X,ue=o.pendingProps,ie=k.context,O=d.contextType,typeof O=="object"&&O!==null?O=as(O):(O=It(d)?$n:St.current,O=Sr(o,O));var ge=d.getDerivedStateFromProps;(oe=typeof ge=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==ue||ie!==O)&&Zm(o,k,m,O),yn=!1,ie=o.memoizedState,k.state=ie,co(o,m,k,g);var we=o.memoizedState;M!==ue||ie!==we||Ot.current||yn?(typeof ge=="function"&&(Gc(o,d,ge,m),we=o.memoizedState),(X=yn||Jm(o,d,X,m,ie,we,O)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,we,O),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,we,O)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||M===r.memoizedProps&&ie===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&ie===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=we),k.props=m,k.state=we,k.context=O,m=X):(typeof k.componentDidUpdate!="function"||M===r.memoizedProps&&ie===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&ie===r.memoizedState||(o.flags|=1024),m=!1)}return nd(r,o,d,m,y,g)}function nd(r,o,d,m,g,y){df(r,o);var k=(o.flags&128)!==0;if(!m&&!k)return g&&pm(o,d,!1),qs(r,o,y);m=o.stateNode,xb.current=o;var M=k&&typeof d.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,r!==null&&k?(o.child=Pr(o,r.child,null,y),o.child=Pr(o,null,M,y)):Ft(r,o,M,y),o.memoizedState=m.state,g&&pm(o,d,!0),o.child}function hf(r){var o=r.stateNode;o.pendingContext?mm(r,o.pendingContext,o.pendingContext!==o.context):o.context&&mm(r,o.context,!1),zc(r,o.containerInfo)}function mf(r,o,d,m,g){return Ar(),Dc(g),o.flags|=256,Ft(r,o,d,m),o.child}var rd={dehydrated:null,treeContext:null,retryLane:0};function ad(r){return{baseLanes:r,cachePool:null,transitions:null}}function ff(r,o,d){var m=o.pendingProps,g=et.current,y=!1,k=(o.flags&128)!==0,M;if((M=k)||(M=r!==null&&r.memoizedState===null?!1:(g&2)!==0),M?(y=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),Ke(et,g&1),r===null)return Tc(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=m.children,r=m.fallback,y?(m=o.mode,y=o.child,k={mode:"hidden",children:k},(m&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=Mo(k,m,0,null),r=Jn(r,m,d,null),y.return=o,r.return=o,y.sibling=r,o.child=y,o.child.memoizedState=ad(d),o.memoizedState=rd,r):id(o,k));if(g=r.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return yb(r,o,k,m,M,g,d);if(y){y=m.fallback,k=o.mode,g=r.child,M=g.sibling;var O={mode:"hidden",children:m.children};return(k&1)===0&&o.child!==g?(m=o.child,m.childLanes=0,m.pendingProps=O,o.deletions=null):(m=kn(g,O),m.subtreeFlags=g.subtreeFlags&14680064),M!==null?y=kn(M,y):(y=Jn(y,k,d,null),y.flags|=2),y.return=o,m.return=o,m.sibling=y,o.child=m,m=y,y=o.child,k=r.child.memoizedState,k=k===null?ad(d):{baseLanes:k.baseLanes|d,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=r.childLanes&~d,o.memoizedState=rd,m}return y=r.child,r=y.sibling,m=kn(y,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=d),m.return=o,m.sibling=null,r!==null&&(d=o.deletions,d===null?(o.deletions=[r],o.flags|=16):d.push(r)),o.child=m,o.memoizedState=null,m}function id(r,o){return o=Mo({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function yo(r,o,d,m){return m!==null&&Dc(m),Pr(o,r.child,null,d),r=id(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function yb(r,o,d,m,g,y,k){if(d)return o.flags&256?(o.flags&=-257,m=ed(Error(s(422))),yo(r,o,k,m)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(y=m.fallback,g=o.mode,m=Mo({mode:"visible",children:m.children},g,0,null),y=Jn(y,g,k,null),y.flags|=2,m.return=o,y.return=o,m.sibling=y,o.child=m,(o.mode&1)!==0&&Pr(o,r.child,null,k),o.child.memoizedState=ad(k),o.memoizedState=rd,y);if((o.mode&1)===0)return yo(r,o,k,null);if(g.data==="$!"){if(m=g.nextSibling&&g.nextSibling.dataset,m)var M=m.dgst;return m=M,y=Error(s(419)),m=ed(y,m,void 0),yo(r,o,k,m)}if(M=(k&r.childLanes)!==0,Bt||M){if(m=bt,m!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(m.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,Vs(r,g),bs(m,r,g,-1))}return jd(),m=ed(Error(s(421))),yo(r,o,k,m)}return g.data==="$?"?(o.flags|=128,o.child=r.child,o=Mb.bind(null,r),g._reactRetry=o,null):(r=y.treeContext,Jt=fn(g.nextSibling),Qt=o,Ze=!0,ps=null,r!==null&&(ns[rs++]=Us,ns[rs++]=Hs,ns[rs++]=Un,Us=r.id,Hs=r.overflow,Un=o),o=id(o,m.children),o.flags|=4096,o)}function pf(r,o,d){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),Oc(r.return,o,d)}function od(r,o,d,m,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=m,y.tail=d,y.tailMode=g)}function gf(r,o,d){var m=o.pendingProps,g=m.revealOrder,y=m.tail;if(Ft(r,o,m.children,d),m=et.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&pf(r,d,o);else if(r.tag===19)pf(r,d,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(Ke(et,m),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(d=o.child,g=null;d!==null;)r=d.alternate,r!==null&&uo(r)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),od(o,!1,g,d,y);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&uo(r)===null){o.child=g;break}r=g.sibling,g.sibling=d,d=g,g=r}od(o,!0,d,null,y);break;case"together":od(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bo(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function qs(r,o,d){if(r!==null&&(o.dependencies=r.dependencies),Yn|=o.lanes,(d&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,d=kn(r,r.pendingProps),o.child=d,d.return=o;r.sibling!==null;)r=r.sibling,d=d.sibling=kn(r,r.pendingProps),d.return=o;d.sibling=null}return o.child}function bb(r,o,d){switch(o.tag){case 3:hf(o),Ar();break;case 5:Am(o);break;case 1:It(o.type)&&eo(o);break;case 4:zc(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,g=o.memoizedProps.value;Ke(io,m._currentValue),m._currentValue=g;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Ke(et,et.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?ff(r,o,d):(Ke(et,et.current&1),r=qs(r,o,d),r!==null?r.sibling:null);Ke(et,et.current&1);break;case 19:if(m=(d&o.childLanes)!==0,(r.flags&128)!==0){if(m)return gf(r,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ke(et,et.current),m)break;return null;case 22:case 23:return o.lanes=0,cf(r,o,d)}return qs(r,o,d)}var xf,ld,yf,bf;xf=function(r,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},ld=function(){},yf=function(r,o,d,m){var g=r.memoizedProps;if(g!==m){r=o.stateNode,Wn(Cs.current);var y=null;switch(d){case"input":g=J(r,g),m=J(r,m),y=[];break;case"select":g=ee({},g,{value:void 0}),m=ee({},m,{value:void 0}),y=[];break;case"textarea":g=se(r,g),m=se(r,m),y=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Ji)}Ul(d,m);var k;d=null;for(X in g)if(!m.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var M=g[X];for(k in M)M.hasOwnProperty(k)&&(d||(d={}),d[k]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?y||(y=[]):(y=y||[]).push(X,null));for(X in m){var O=m[X];if(M=g?.[X],m.hasOwnProperty(X)&&O!==M&&(O!=null||M!=null))if(X==="style")if(M){for(k in M)!M.hasOwnProperty(k)||O&&O.hasOwnProperty(k)||(d||(d={}),d[k]="");for(k in O)O.hasOwnProperty(k)&&M[k]!==O[k]&&(d||(d={}),d[k]=O[k])}else d||(y||(y=[]),y.push(X,d)),d=O;else X==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,M=M?M.__html:void 0,O!=null&&M!==O&&(y=y||[]).push(X,O)):X==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(X,""+O):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(O!=null&&X==="onScroll"&&Xe("scroll",r),y||M===O||(y=[])):(y=y||[]).push(X,O))}d&&(y=y||[]).push("style",d);var X=y;(o.updateQueue=X)&&(o.flags|=4)}},bf=function(r,o,d,m){d!==m&&(o.flags|=4)};function Oa(r,o){if(!Ze)switch(r.tailMode){case"hidden":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Et(r){var o=r.alternate!==null&&r.alternate.child===r.child,d=0,m=0;if(o)for(var g=r.child;g!==null;)d|=g.lanes|g.childLanes,m|=g.subtreeFlags&14680064,m|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)d|=g.lanes|g.childLanes,m|=g.subtreeFlags,m|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=m,r.childLanes=d,o}function vb(r,o,d){var m=o.pendingProps;switch(Pc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return It(o.type)&&Zi(),Et(o),null;case 3:return m=o.stateNode,Dr(),Qe(Ot),Qe(St),Hc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(ro(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ps!==null&&(bd(ps),ps=null))),ld(r,o),Et(o),null;case 5:$c(o);var g=Wn(Ta.current);if(d=o.type,r!==null&&o.stateNode!=null)yf(r,o,d,m,g),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(s(166));return Et(o),null}if(r=Wn(Cs.current),ro(o)){m=o.stateNode,d=o.type;var y=o.memoizedProps;switch(m[Ss]=o,m[Ca]=y,r=(o.mode&1)!==0,d){case"dialog":Xe("cancel",m),Xe("close",m);break;case"iframe":case"object":case"embed":Xe("load",m);break;case"video":case"audio":for(g=0;g<_a.length;g++)Xe(_a[g],m);break;case"source":Xe("error",m);break;case"img":case"image":case"link":Xe("error",m),Xe("load",m);break;case"details":Xe("toggle",m);break;case"input":be(m,y),Xe("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!y.multiple},Xe("invalid",m);break;case"textarea":le(m,y),Xe("invalid",m)}Ul(d,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var M=y[k];k==="children"?typeof M=="string"?m.textContent!==M&&(y.suppressHydrationWarning!==!0&&Qi(m.textContent,M,r),g=["children",M]):typeof M=="number"&&m.textContent!==""+M&&(y.suppressHydrationWarning!==!0&&Qi(m.textContent,M,r),g=["children",""+M]):i.hasOwnProperty(k)&&M!=null&&k==="onScroll"&&Xe("scroll",m)}switch(d){case"input":ve(m),Ie(m,y,!0);break;case"textarea":ve(m),Ye(m);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(m.onclick=Ji)}m=g,o.updateQueue=m,m!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Bs(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=k.createElement(d,{is:m.is}):(r=k.createElement(d),d==="select"&&(k=r,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):r=k.createElementNS(r,d),r[Ss]=o,r[Ca]=m,xf(r,o,!1,!1),o.stateNode=r;e:{switch(k=Hl(d,m),d){case"dialog":Xe("cancel",r),Xe("close",r),g=m;break;case"iframe":case"object":case"embed":Xe("load",r),g=m;break;case"video":case"audio":for(g=0;g<_a.length;g++)Xe(_a[g],r);g=m;break;case"source":Xe("error",r),g=m;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),g=m;break;case"details":Xe("toggle",r),g=m;break;case"input":be(r,m),g=J(r,m),Xe("invalid",r);break;case"option":g=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},g=ee({},m,{value:void 0}),Xe("invalid",r);break;case"textarea":le(r,m),g=se(r,m),Xe("invalid",r);break;default:g=m}Ul(d,g),M=g;for(y in M)if(M.hasOwnProperty(y)){var O=M[y];y==="style"?oh(r,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&_s(r,O)):y==="children"?typeof O=="string"?(d!=="textarea"||O!=="")&&hs(r,O):typeof O=="number"&&hs(r,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?O!=null&&y==="onScroll"&&Xe("scroll",r):O!=null&&P(r,y,O,k))}switch(d){case"input":ve(r),Ie(r,m,!1);break;case"textarea":ve(r),Ye(r);break;case"option":m.value!=null&&r.setAttribute("value",""+xe(m.value));break;case"select":r.multiple=!!m.multiple,y=m.value,y!=null?ft(r,!!m.multiple,y,!1):m.defaultValue!=null&&ft(r,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Ji)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Et(o),null;case 6:if(r&&o.stateNode!=null)bf(r,o,r.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(s(166));if(d=Wn(Ta.current),Wn(Cs.current),ro(o)){if(m=o.stateNode,d=o.memoizedProps,m[Ss]=o,(y=m.nodeValue!==d)&&(r=Qt,r!==null))switch(r.tag){case 3:Qi(m.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Qi(m.nodeValue,d,(r.mode&1)!==0)}y&&(o.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ss]=o,o.stateNode=m}return Et(o),null;case 13:if(Qe(et),m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ze&&Jt!==null&&(o.mode&1)!==0&&(o.flags&128)===0)wm(),Ar(),o.flags|=98560,y=!1;else if(y=ro(o),m!==null&&m.dehydrated!==null){if(r===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Ss]=o}else Ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),y=!1}else ps!==null&&(bd(ps),ps=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(et.current&1)!==0?gt===0&&(gt=3):jd())),o.updateQueue!==null&&(o.flags|=4),Et(o),null);case 4:return Dr(),ld(r,o),r===null&&ka(o.stateNode.containerInfo),Et(o),null;case 10:return Lc(o.type._context),Et(o),null;case 17:return It(o.type)&&Zi(),Et(o),null;case 19:if(Qe(et),y=o.memoizedState,y===null)return Et(o),null;if(m=(o.flags&128)!==0,k=y.rendering,k===null)if(m)Oa(y,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(k=uo(r),k!==null){for(o.flags|=128,Oa(y,!1),m=k.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=d,d=o.child;d!==null;)y=d,r=m,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,r=k.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return Ke(et,et.current&1|2),o.child}r=r.sibling}y.tail!==null&&at()>Or&&(o.flags|=128,m=!0,Oa(y,!1),o.lanes=4194304)}else{if(!m)if(r=uo(k),r!==null){if(o.flags|=128,m=!0,d=r.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),Oa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ze)return Et(o),null}else 2*at()-y.renderingStartTime>Or&&d!==1073741824&&(o.flags|=128,m=!0,Oa(y,!1),o.lanes=4194304);y.isBackwards?(k.sibling=o.child,o.child=k):(d=y.last,d!==null?d.sibling=k:o.child=k,y.last=k)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=at(),o.sibling=null,d=et.current,Ke(et,m?d&1|2:d&1),o):(Et(o),null);case 22:case 23:return wd(),m=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Gt&1073741824)!==0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),null;case 24:return null;case 25:return null}throw Error(s(156,o.tag))}function wb(r,o){switch(Pc(o),o.tag){case 1:return It(o.type)&&Zi(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Dr(),Qe(Ot),Qe(St),Hc(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return $c(o),null;case 13:if(Qe(et),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ar()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Qe(et),null;case 4:return Dr(),null;case 10:return Lc(o.type._context),null;case 22:case 23:return wd(),null;case 24:return null;default:return null}}var vo=!1,At=!1,jb=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Fr(r,o){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){nt(r,o,m)}else d.current=null}function cd(r,o,d){try{d()}catch(m){nt(r,o,m)}}var vf=!1;function Nb(r,o){if(wc=Bi,r=Jh(),mc(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var g=m.anchorOffset,y=m.focusNode;m=m.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var k=0,M=-1,O=-1,X=0,oe=0,ue=r,ie=null;t:for(;;){for(var ge;ue!==d||g!==0&&ue.nodeType!==3||(M=k+g),ue!==y||m!==0&&ue.nodeType!==3||(O=k+m),ue.nodeType===3&&(k+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)ie=ue,ue=ge;for(;;){if(ue===r)break t;if(ie===d&&++X===g&&(M=k),ie===y&&++oe===m&&(O=k),(ge=ue.nextSibling)!==null)break;ue=ie,ie=ue.parentNode}ue=ge}d=M===-1||O===-1?null:{start:M,end:O}}else d=null}d=d||{start:0,end:0}}else d=null;for(jc={focusedElem:r,selectionRange:d},Bi=!1,ye=o;ye!==null;)if(o=ye,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,ye=r;else for(;ye!==null;){o=ye;try{var we=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ne=we.memoizedProps,it=we.memoizedState,W=o.stateNode,z=W.getSnapshotBeforeUpdate(o.elementType===o.type?Ne:gs(o.type,Ne),it);W.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(me){nt(o,o.return,me)}if(r=o.sibling,r!==null){r.return=o.return,ye=r;break}ye=o.return}return we=vf,vf=!1,we}function Ia(r,o,d){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var g=m=m.next;do{if((g.tag&r)===r){var y=g.destroy;g.destroy=void 0,y!==void 0&&cd(o,d,y)}g=g.next}while(g!==m)}}function wo(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&r)===r){var m=d.create;d.destroy=m()}d=d.next}while(d!==o)}}function dd(r){var o=r.ref;if(o!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof o=="function"?o(r):o.current=r}}function wf(r){var o=r.alternate;o!==null&&(r.alternate=null,wf(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Ss],delete o[Ca],delete o[Sc],delete o[ab],delete o[ib])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function jf(r){return r.tag===5||r.tag===3||r.tag===4}function Nf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||jf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ud(r,o,d){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(r,o):d.insertBefore(r,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(r,d)):(o=d,o.appendChild(r)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Ji));else if(m!==4&&(r=r.child,r!==null))for(ud(r,o,d),r=r.sibling;r!==null;)ud(r,o,d),r=r.sibling}function hd(r,o,d){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?d.insertBefore(r,o):d.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(hd(r,o,d),r=r.sibling;r!==null;)hd(r,o,d),r=r.sibling}var _t=null,xs=!1;function vn(r,o,d){for(d=d.child;d!==null;)_f(r,o,d),d=d.sibling}function _f(r,o,d){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Di,d)}catch{}switch(d.tag){case 5:At||Fr(d,o);case 6:var m=_t,g=xs;_t=null,vn(r,o,d),_t=m,xs=g,_t!==null&&(xs?(r=_t,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):_t.removeChild(d.stateNode));break;case 18:_t!==null&&(xs?(r=_t,d=d.stateNode,r.nodeType===8?kc(r.parentNode,d):r.nodeType===1&&kc(r,d),ga(r)):kc(_t,d.stateNode));break;case 4:m=_t,g=xs,_t=d.stateNode.containerInfo,xs=!0,vn(r,o,d),_t=m,xs=g;break;case 0:case 11:case 14:case 15:if(!At&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){g=m=m.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&cd(d,o,k),g=g.next}while(g!==m)}vn(r,o,d);break;case 1:if(!At&&(Fr(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(M){nt(d,o,M)}vn(r,o,d);break;case 21:vn(r,o,d);break;case 22:d.mode&1?(At=(m=At)||d.memoizedState!==null,vn(r,o,d),At=m):vn(r,o,d);break;default:vn(r,o,d)}}function kf(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new jb),o.forEach(function(m){var g=Tb.bind(null,r,m);d.has(m)||(d.add(m),m.then(g,g))})}}function ys(r,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var g=d[m];try{var y=r,k=o,M=k;e:for(;M!==null;){switch(M.tag){case 5:_t=M.stateNode,xs=!1;break e;case 3:_t=M.stateNode.containerInfo,xs=!0;break e;case 4:_t=M.stateNode.containerInfo,xs=!0;break e}M=M.return}if(_t===null)throw Error(s(160));_f(y,k,g),_t=null,xs=!1;var O=g.alternate;O!==null&&(O.return=null),g.return=null}catch(X){nt(g,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sf(o,r),o=o.sibling}function Sf(r,o){var d=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ys(o,r),As(r),m&4){try{Ia(3,r,r.return),wo(3,r)}catch(Ne){nt(r,r.return,Ne)}try{Ia(5,r,r.return)}catch(Ne){nt(r,r.return,Ne)}}break;case 1:ys(o,r),As(r),m&512&&d!==null&&Fr(d,d.return);break;case 5:if(ys(o,r),As(r),m&512&&d!==null&&Fr(d,d.return),r.flags&32){var g=r.stateNode;try{hs(g,"")}catch(Ne){nt(r,r.return,Ne)}}if(m&4&&(g=r.stateNode,g!=null)){var y=r.memoizedProps,k=d!==null?d.memoizedProps:y,M=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{M==="input"&&y.type==="radio"&&y.name!=null&&Pe(g,y),Hl(M,k);var X=Hl(M,y);for(k=0;k<O.length;k+=2){var oe=O[k],ue=O[k+1];oe==="style"?oh(g,ue):oe==="dangerouslySetInnerHTML"?_s(g,ue):oe==="children"?hs(g,ue):P(g,oe,ue,X)}switch(M){case"input":Se(g,y);break;case"textarea":pe(g,y);break;case"select":var ie=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?ft(g,!!y.multiple,ge,!1):ie!==!!y.multiple&&(y.defaultValue!=null?ft(g,!!y.multiple,y.defaultValue,!0):ft(g,!!y.multiple,y.multiple?[]:"",!1))}g[Ca]=y}catch(Ne){nt(r,r.return,Ne)}}break;case 6:if(ys(o,r),As(r),m&4){if(r.stateNode===null)throw Error(s(162));g=r.stateNode,y=r.memoizedProps;try{g.nodeValue=y}catch(Ne){nt(r,r.return,Ne)}}break;case 3:if(ys(o,r),As(r),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ga(o.containerInfo)}catch(Ne){nt(r,r.return,Ne)}break;case 4:ys(o,r),As(r);break;case 13:ys(o,r),As(r),g=r.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(pd=at())),m&4&&kf(r);break;case 22:if(oe=d!==null&&d.memoizedState!==null,r.mode&1?(At=(X=At)||oe,ys(o,r),At=X):ys(o,r),As(r),m&8192){if(X=r.memoizedState!==null,(r.stateNode.isHidden=X)&&!oe&&(r.mode&1)!==0)for(ye=r,oe=r.child;oe!==null;){for(ue=ye=oe;ye!==null;){switch(ie=ye,ge=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ia(4,ie,ie.return);break;case 1:Fr(ie,ie.return);var we=ie.stateNode;if(typeof we.componentWillUnmount=="function"){m=ie,d=ie.return;try{o=m,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(Ne){nt(m,d,Ne)}}break;case 5:Fr(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Af(ue);continue}}ge!==null?(ge.return=ie,ye=ge):Af(ue)}oe=oe.sibling}e:for(oe=null,ue=r;;){if(ue.tag===5){if(oe===null){oe=ue;try{g=ue.stateNode,X?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(M=ue.stateNode,O=ue.memoizedProps.style,k=O!=null&&O.hasOwnProperty("display")?O.display:null,M.style.display=ih("display",k))}catch(Ne){nt(r,r.return,Ne)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(Ne){nt(r,r.return,Ne)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===r)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===r)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===r)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:ys(o,r),As(r),m&4&&kf(r);break;case 21:break;default:ys(o,r),As(r)}}function As(r){var o=r.flags;if(o&2){try{e:{for(var d=r.return;d!==null;){if(jf(d)){var m=d;break e}d=d.return}throw Error(s(160))}switch(m.tag){case 5:var g=m.stateNode;m.flags&32&&(hs(g,""),m.flags&=-33);var y=Nf(r);hd(r,y,g);break;case 3:case 4:var k=m.stateNode.containerInfo,M=Nf(r);ud(r,M,k);break;default:throw Error(s(161))}}catch(O){nt(r,r.return,O)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function _b(r,o,d){ye=r,Cf(r)}function Cf(r,o,d){for(var m=(r.mode&1)!==0;ye!==null;){var g=ye,y=g.child;if(g.tag===22&&m){var k=g.memoizedState!==null||vo;if(!k){var M=g.alternate,O=M!==null&&M.memoizedState!==null||At;M=vo;var X=At;if(vo=k,(At=O)&&!X)for(ye=g;ye!==null;)k=ye,O=k.child,k.tag===22&&k.memoizedState!==null?Pf(g):O!==null?(O.return=k,ye=O):Pf(g);for(;y!==null;)ye=y,Cf(y),y=y.sibling;ye=g,vo=M,At=X}Ef(r)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ye=y):Ef(r)}}function Ef(r){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:At||wo(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!At)if(d===null)m.componentDidMount();else{var g=o.elementType===o.type?d.memoizedProps:gs(o.type,d.memoizedProps);m.componentDidUpdate(g,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Em(o,y,m);break;case 3:var k=o.updateQueue;if(k!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Em(o,k,d)}break;case 5:var M=o.stateNode;if(d===null&&o.flags&4){d=M;var O=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&d.focus();break;case"img":O.src&&(d.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var oe=X.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&ga(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}At||o.flags&512&&dd(o)}catch(ie){nt(o,o.return,ie)}}if(o===r){ye=null;break}if(d=o.sibling,d!==null){d.return=o.return,ye=d;break}ye=o.return}}function Af(r){for(;ye!==null;){var o=ye;if(o===r){ye=null;break}var d=o.sibling;if(d!==null){d.return=o.return,ye=d;break}ye=o.return}}function Pf(r){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{wo(4,o)}catch(O){nt(o,d,O)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var g=o.return;try{m.componentDidMount()}catch(O){nt(o,g,O)}}var y=o.return;try{dd(o)}catch(O){nt(o,y,O)}break;case 5:var k=o.return;try{dd(o)}catch(O){nt(o,k,O)}}}catch(O){nt(o,o.return,O)}if(o===r){ye=null;break}var M=o.sibling;if(M!==null){M.return=o.return,ye=M;break}ye=o.return}}var kb=Math.ceil,jo=D.ReactCurrentDispatcher,md=D.ReactCurrentOwner,os=D.ReactCurrentBatchConfig,ze=0,bt=null,ut=null,kt=0,Gt=0,Lr=pn(0),gt=0,Ba=null,Yn=0,No=0,fd=0,za=null,zt=null,pd=0,Or=1/0,Ys=null,_o=!1,gd=null,wn=null,ko=!1,jn=null,So=0,$a=0,xd=null,Co=-1,Eo=0;function Lt(){return(ze&6)!==0?at():Co!==-1?Co:Co=at()}function Nn(r){return(r.mode&1)===0?1:(ze&2)!==0&&kt!==0?kt&-kt:lb.transition!==null?(Eo===0&&(Eo=jh()),Eo):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:Mh(r.type)),r)}function bs(r,o,d,m){if(50<$a)throw $a=0,xd=null,Error(s(185));ua(r,d,m),((ze&2)===0||r!==bt)&&(r===bt&&((ze&2)===0&&(No|=d),gt===4&&_n(r,kt)),$t(r,m),d===1&&ze===0&&(o.mode&1)===0&&(Or=at()+500,to&&xn()))}function $t(r,o){var d=r.callbackNode;ly(r,o);var m=Li(r,r===bt?kt:0);if(m===0)d!==null&&bh(d),r.callbackNode=null,r.callbackPriority=0;else if(o=m&-m,r.callbackPriority!==o){if(d!=null&&bh(d),o===1)r.tag===0?ob(Tf.bind(null,r)):gm(Tf.bind(null,r)),nb(function(){(ze&6)===0&&xn()}),d=null;else{switch(Nh(m)){case 1:d=Ql;break;case 4:d=vh;break;case 16:d=Ti;break;case 536870912:d=wh;break;default:d=Ti}d=zf(d,Mf.bind(null,r))}r.callbackPriority=o,r.callbackNode=d}}function Mf(r,o){if(Co=-1,Eo=0,(ze&6)!==0)throw Error(s(327));var d=r.callbackNode;if(Ir()&&r.callbackNode!==d)return null;var m=Li(r,r===bt?kt:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||o)o=Ao(r,m);else{o=m;var g=ze;ze|=2;var y=Rf();(bt!==r||kt!==o)&&(Ys=null,Or=at()+500,Xn(r,o));do try{Eb();break}catch(M){Df(r,M)}while(!0);Fc(),jo.current=y,ze=g,ut!==null?o=0:(bt=null,kt=0,o=gt)}if(o!==0){if(o===2&&(g=Jl(r),g!==0&&(m=g,o=yd(r,g))),o===1)throw d=Ba,Xn(r,0),_n(r,m),$t(r,at()),d;if(o===6)_n(r,m);else{if(g=r.current.alternate,(m&30)===0&&!Sb(g)&&(o=Ao(r,m),o===2&&(y=Jl(r),y!==0&&(m=y,o=yd(r,y))),o===1))throw d=Ba,Xn(r,0),_n(r,m),$t(r,at()),d;switch(r.finishedWork=g,r.finishedLanes=m,o){case 0:case 1:throw Error(s(345));case 2:Qn(r,zt,Ys);break;case 3:if(_n(r,m),(m&130023424)===m&&(o=pd+500-at(),10<o)){if(Li(r,0)!==0)break;if(g=r.suspendedLanes,(g&m)!==m){Lt(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=_c(Qn.bind(null,r,zt,Ys),o);break}Qn(r,zt,Ys);break;case 4:if(_n(r,m),(m&4194240)===m)break;for(o=r.eventTimes,g=-1;0<m;){var k=31-ms(m);y=1<<k,k=o[k],k>g&&(g=k),m&=~y}if(m=g,m=at()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*kb(m/1960))-m,10<m){r.timeoutHandle=_c(Qn.bind(null,r,zt,Ys),m);break}Qn(r,zt,Ys);break;case 5:Qn(r,zt,Ys);break;default:throw Error(s(329))}}}return $t(r,at()),r.callbackNode===d?Mf.bind(null,r):null}function yd(r,o){var d=za;return r.current.memoizedState.isDehydrated&&(Xn(r,o).flags|=256),r=Ao(r,o),r!==2&&(o=zt,zt=d,o!==null&&bd(o)),r}function bd(r){zt===null?zt=r:zt.push.apply(zt,r)}function Sb(r){for(var o=r;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var g=d[m],y=g.getSnapshot;g=g.value;try{if(!fs(y(),g))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _n(r,o){for(o&=~fd,o&=~No,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var d=31-ms(o),m=1<<d;r[d]=-1,o&=~m}}function Tf(r){if((ze&6)!==0)throw Error(s(327));Ir();var o=Li(r,0);if((o&1)===0)return $t(r,at()),null;var d=Ao(r,o);if(r.tag!==0&&d===2){var m=Jl(r);m!==0&&(o=m,d=yd(r,m))}if(d===1)throw d=Ba,Xn(r,0),_n(r,o),$t(r,at()),d;if(d===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Qn(r,zt,Ys),$t(r,at()),null}function vd(r,o){var d=ze;ze|=1;try{return r(o)}finally{ze=d,ze===0&&(Or=at()+500,to&&xn())}}function Kn(r){jn!==null&&jn.tag===0&&(ze&6)===0&&Ir();var o=ze;ze|=1;var d=os.transition,m=Ve;try{if(os.transition=null,Ve=1,r)return r()}finally{Ve=m,os.transition=d,ze=o,(ze&6)===0&&xn()}}function wd(){Gt=Lr.current,Qe(Lr)}function Xn(r,o){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,sb(d)),ut!==null)for(d=ut.return;d!==null;){var m=d;switch(Pc(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Zi();break;case 3:Dr(),Qe(Ot),Qe(St),Hc();break;case 5:$c(m);break;case 4:Dr();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:Lc(m.type._context);break;case 22:case 23:wd()}d=d.return}if(bt=r,ut=r=kn(r.current,null),kt=Gt=o,gt=0,Ba=null,fd=No=Yn=0,zt=za=null,Vn!==null){for(o=0;o<Vn.length;o++)if(d=Vn[o],m=d.interleaved,m!==null){d.interleaved=null;var g=m.next,y=d.pending;if(y!==null){var k=y.next;y.next=g,m.next=k}d.pending=m}Vn=null}return r}function Df(r,o){do{var d=ut;try{if(Fc(),ho.current=go,mo){for(var m=tt.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}mo=!1}if(qn=0,yt=pt=tt=null,Da=!1,Ra=0,md.current=null,d===null||d.return===null){gt=1,Ba=o,ut=null;break}e:{var y=r,k=d.return,M=d,O=o;if(o=kt,M.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=O,oe=M,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ge=nf(k);if(ge!==null){ge.flags&=-257,rf(ge,k,M,y,o),ge.mode&1&&sf(y,X,o),o=ge,O=X;var we=o.updateQueue;if(we===null){var Ne=new Set;Ne.add(O),o.updateQueue=Ne}else we.add(O);break e}else{if((o&1)===0){sf(y,X,o),jd();break e}O=Error(s(426))}}else if(Ze&&M.mode&1){var it=nf(k);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),rf(it,k,M,y,o),Dc(Rr(O,M));break e}}y=O=Rr(O,M),gt!==4&&(gt=2),za===null?za=[y]:za.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var W=ef(y,O,o);Cm(y,W);break e;case 1:M=O;var z=y.type,Y=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(wn===null||!wn.has(Y)))){y.flags|=65536,o&=-o,y.lanes|=o;var me=tf(y,M,o);Cm(y,me);break e}}y=y.return}while(y!==null)}Lf(d)}catch(_e){o=_e,ut===d&&d!==null&&(ut=d=d.return);continue}break}while(!0)}function Rf(){var r=jo.current;return jo.current=go,r===null?go:r}function jd(){(gt===0||gt===3||gt===2)&&(gt=4),bt===null||(Yn&268435455)===0&&(No&268435455)===0||_n(bt,kt)}function Ao(r,o){var d=ze;ze|=2;var m=Rf();(bt!==r||kt!==o)&&(Ys=null,Xn(r,o));do try{Cb();break}catch(g){Df(r,g)}while(!0);if(Fc(),ze=d,jo.current=m,ut!==null)throw Error(s(261));return bt=null,kt=0,gt}function Cb(){for(;ut!==null;)Ff(ut)}function Eb(){for(;ut!==null&&!Z0();)Ff(ut)}function Ff(r){var o=Bf(r.alternate,r,Gt);r.memoizedProps=r.pendingProps,o===null?Lf(r):ut=o,md.current=null}function Lf(r){var o=r;do{var d=o.alternate;if(r=o.return,(o.flags&32768)===0){if(d=vb(d,o,Gt),d!==null){ut=d;return}}else{if(d=wb(d,o),d!==null){d.flags&=32767,ut=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{gt=6,ut=null;return}}if(o=o.sibling,o!==null){ut=o;return}ut=o=r}while(o!==null);gt===0&&(gt=5)}function Qn(r,o,d){var m=Ve,g=os.transition;try{os.transition=null,Ve=1,Ab(r,o,d,m)}finally{os.transition=g,Ve=m}return null}function Ab(r,o,d,m){do Ir();while(jn!==null);if((ze&6)!==0)throw Error(s(327));d=r.finishedWork;var g=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var y=d.lanes|d.childLanes;if(cy(r,y),r===bt&&(ut=bt=null,kt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||ko||(ko=!0,zf(Ti,function(){return Ir(),null})),y=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||y){y=os.transition,os.transition=null;var k=Ve;Ve=1;var M=ze;ze|=4,md.current=null,Nb(r,d),Sf(d,r),Xy(jc),Bi=!!wc,jc=wc=null,r.current=d,_b(d),ey(),ze=M,Ve=k,os.transition=y}else r.current=d;if(ko&&(ko=!1,jn=r,So=g),y=r.pendingLanes,y===0&&(wn=null),ny(d.stateNode),$t(r,at()),o!==null)for(m=r.onRecoverableError,d=0;d<o.length;d++)g=o[d],m(g.value,{componentStack:g.stack,digest:g.digest});if(_o)throw _o=!1,r=gd,gd=null,r;return(So&1)!==0&&r.tag!==0&&Ir(),y=r.pendingLanes,(y&1)!==0?r===xd?$a++:($a=0,xd=r):$a=0,xn(),null}function Ir(){if(jn!==null){var r=Nh(So),o=os.transition,d=Ve;try{if(os.transition=null,Ve=16>r?16:r,jn===null)var m=!1;else{if(r=jn,jn=null,So=0,(ze&6)!==0)throw Error(s(331));var g=ze;for(ze|=4,ye=r.current;ye!==null;){var y=ye,k=y.child;if((ye.flags&16)!==0){var M=y.deletions;if(M!==null){for(var O=0;O<M.length;O++){var X=M[O];for(ye=X;ye!==null;){var oe=ye;switch(oe.tag){case 0:case 11:case 15:Ia(8,oe,y)}var ue=oe.child;if(ue!==null)ue.return=oe,ye=ue;else for(;ye!==null;){oe=ye;var ie=oe.sibling,ge=oe.return;if(wf(oe),oe===X){ye=null;break}if(ie!==null){ie.return=ge,ye=ie;break}ye=ge}}}var we=y.alternate;if(we!==null){var Ne=we.child;if(Ne!==null){we.child=null;do{var it=Ne.sibling;Ne.sibling=null,Ne=it}while(Ne!==null)}}ye=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,ye=k;else e:for(;ye!==null;){if(y=ye,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ia(9,y,y.return)}var W=y.sibling;if(W!==null){W.return=y.return,ye=W;break e}ye=y.return}}var z=r.current;for(ye=z;ye!==null;){k=ye;var Y=k.child;if((k.subtreeFlags&2064)!==0&&Y!==null)Y.return=k,ye=Y;else e:for(k=z;ye!==null;){if(M=ye,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:wo(9,M)}}catch(_e){nt(M,M.return,_e)}if(M===k){ye=null;break e}var me=M.sibling;if(me!==null){me.return=M.return,ye=me;break e}ye=M.return}}if(ze=g,xn(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Di,r)}catch{}m=!0}return m}finally{Ve=d,os.transition=o}}return!1}function Of(r,o,d){o=Rr(d,o),o=ef(r,o,1),r=bn(r,o,1),o=Lt(),r!==null&&(ua(r,1,o),$t(r,o))}function nt(r,o,d){if(r.tag===3)Of(r,r,d);else for(;o!==null;){if(o.tag===3){Of(o,r,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wn===null||!wn.has(m))){r=Rr(d,r),r=tf(o,r,1),o=bn(o,r,1),r=Lt(),o!==null&&(ua(o,1,r),$t(o,r));break}}o=o.return}}function Pb(r,o,d){var m=r.pingCache;m!==null&&m.delete(o),o=Lt(),r.pingedLanes|=r.suspendedLanes&d,bt===r&&(kt&d)===d&&(gt===4||gt===3&&(kt&130023424)===kt&&500>at()-pd?Xn(r,0):fd|=d),$t(r,o)}function If(r,o){o===0&&((r.mode&1)===0?o=1:(o=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var d=Lt();r=Vs(r,o),r!==null&&(ua(r,o,d),$t(r,d))}function Mb(r){var o=r.memoizedState,d=0;o!==null&&(d=o.retryLane),If(r,d)}function Tb(r,o){var d=0;switch(r.tag){case 13:var m=r.stateNode,g=r.memoizedState;g!==null&&(d=g.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(o),If(r,d)}var Bf;Bf=function(r,o,d){if(r!==null)if(r.memoizedProps!==o.pendingProps||Ot.current)Bt=!0;else{if((r.lanes&d)===0&&(o.flags&128)===0)return Bt=!1,bb(r,o,d);Bt=(r.flags&131072)!==0}else Bt=!1,Ze&&(o.flags&1048576)!==0&&xm(o,no,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;bo(r,o),r=o.pendingProps;var g=Sr(o,St.current);Tr(o,d),g=qc(null,o,m,r,g,d);var y=Yc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,It(m)?(y=!0,eo(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bc(o),g.updater=xo,o.stateNode=g,g._reactInternals=o,Zc(o,m,r,d),o=nd(null,o,m,!0,y,d)):(o.tag=0,Ze&&y&&Ac(o),Ft(null,o,g,d),o=o.child),o;case 16:m=o.elementType;e:{switch(bo(r,o),r=o.pendingProps,g=m._init,m=g(m._payload),o.type=m,g=o.tag=Rb(m),r=gs(m,r),g){case 0:o=sd(null,o,m,r,d);break e;case 1:o=uf(null,o,m,r,d);break e;case 11:o=af(null,o,m,r,d);break e;case 14:o=of(null,o,m,gs(m.type,r),d);break e}throw Error(s(306,m,""))}return o;case 0:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:gs(m,g),sd(r,o,m,g,d);case 1:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:gs(m,g),uf(r,o,m,g,d);case 3:e:{if(hf(o),r===null)throw Error(s(387));m=o.pendingProps,y=o.memoizedState,g=y.element,Sm(r,o),co(o,m,null,d);var k=o.memoizedState;if(m=k.element,y.isDehydrated)if(y={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=Rr(Error(s(423)),o),o=mf(r,o,m,d,g);break e}else if(m!==g){g=Rr(Error(s(424)),o),o=mf(r,o,m,d,g);break e}else for(Jt=fn(o.stateNode.containerInfo.firstChild),Qt=o,Ze=!0,ps=null,d=_m(o,null,m,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ar(),m===g){o=qs(r,o,d);break e}Ft(r,o,m,d)}o=o.child}return o;case 5:return Am(o),r===null&&Tc(o),m=o.type,g=o.pendingProps,y=r!==null?r.memoizedProps:null,k=g.children,Nc(m,g)?k=null:y!==null&&Nc(m,y)&&(o.flags|=32),df(r,o),Ft(r,o,k,d),o.child;case 6:return r===null&&Tc(o),null;case 13:return ff(r,o,d);case 4:return zc(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=Pr(o,null,m,d):Ft(r,o,m,d),o.child;case 11:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:gs(m,g),af(r,o,m,g,d);case 7:return Ft(r,o,o.pendingProps,d),o.child;case 8:return Ft(r,o,o.pendingProps.children,d),o.child;case 12:return Ft(r,o,o.pendingProps.children,d),o.child;case 10:e:{if(m=o.type._context,g=o.pendingProps,y=o.memoizedProps,k=g.value,Ke(io,m._currentValue),m._currentValue=k,y!==null)if(fs(y.value,k)){if(y.children===g.children&&!Ot.current){o=qs(r,o,d);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var M=y.dependencies;if(M!==null){k=y.child;for(var O=M.firstContext;O!==null;){if(O.context===m){if(y.tag===1){O=Ws(-1,d&-d),O.tag=2;var X=y.updateQueue;if(X!==null){X=X.shared;var oe=X.pending;oe===null?O.next=O:(O.next=oe.next,oe.next=O),X.pending=O}}y.lanes|=d,O=y.alternate,O!==null&&(O.lanes|=d),Oc(y.return,d,o),M.lanes|=d;break}O=O.next}}else if(y.tag===10)k=y.type===o.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(s(341));k.lanes|=d,M=k.alternate,M!==null&&(M.lanes|=d),Oc(k,d,o),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===o){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}Ft(r,o,g.children,d),o=o.child}return o;case 9:return g=o.type,m=o.pendingProps.children,Tr(o,d),g=as(g),m=m(g),o.flags|=1,Ft(r,o,m,d),o.child;case 14:return m=o.type,g=gs(m,o.pendingProps),g=gs(m.type,g),of(r,o,m,g,d);case 15:return lf(r,o,o.type,o.pendingProps,d);case 17:return m=o.type,g=o.pendingProps,g=o.elementType===m?g:gs(m,g),bo(r,o),o.tag=1,It(m)?(r=!0,eo(o)):r=!1,Tr(o,d),Gm(o,m,g),Zc(o,m,g,d),nd(null,o,m,!0,r,d);case 19:return gf(r,o,d);case 22:return cf(r,o,d)}throw Error(s(156,o.tag))};function zf(r,o){return yh(r,o)}function Db(r,o,d,m){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(r,o,d,m){return new Db(r,o,d,m)}function Nd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Rb(r){if(typeof r=="function")return Nd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Q)return 11;if(r===re)return 14}return 2}function kn(r,o){var d=r.alternate;return d===null?(d=ls(r.tag,o,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=o,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,o=r.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function Po(r,o,d,m,g,y){var k=2;if(m=r,typeof r=="function")Nd(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case R:return Jn(d.children,g,y,o);case F:k=8,g|=8;break;case U:return r=ls(12,d,o,g|2),r.elementType=U,r.lanes=y,r;case ne:return r=ls(13,d,o,g),r.elementType=ne,r.lanes=y,r;case V:return r=ls(19,d,o,g),r.elementType=V,r.lanes=y,r;case K:return Mo(d,g,y,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:k=10;break e;case B:k=9;break e;case Q:k=11;break e;case re:k=14;break e;case I:k=16,m=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return o=ls(k,d,o,g),o.elementType=r,o.type=m,o.lanes=y,o}function Jn(r,o,d,m){return r=ls(7,r,m,o),r.lanes=d,r}function Mo(r,o,d,m){return r=ls(22,r,m,o),r.elementType=K,r.lanes=d,r.stateNode={isHidden:!1},r}function _d(r,o,d){return r=ls(6,r,null,o),r.lanes=d,r}function kd(r,o,d){return o=ls(4,r.children!==null?r.children:[],r.key,o),o.lanes=d,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function Fb(r,o,d,m,g){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=m,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Sd(r,o,d,m,g,y,k,M,O){return r=new Fb(r,o,d,M,O),o===1?(o=1,y===!0&&(o|=8)):o=0,y=ls(3,null,null,o),r.current=y,y.stateNode=r,y.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bc(y),r}function Lb(r,o,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:m==null?null:""+m,children:r,containerInfo:o,implementation:d}}function $f(r){if(!r)return gn;r=r._reactInternals;e:{if(Bn(r)!==r||r.tag!==1)throw Error(s(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(It(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(s(171))}if(r.tag===1){var d=r.type;if(It(d))return fm(r,d,o)}return o}function Uf(r,o,d,m,g,y,k,M,O){return r=Sd(d,m,!0,r,g,y,k,M,O),r.context=$f(null),d=r.current,m=Lt(),g=Nn(d),y=Ws(m,g),y.callback=o??null,bn(d,y,g),r.current.lanes=g,ua(r,g,m),$t(r,m),r}function To(r,o,d,m){var g=o.current,y=Lt(),k=Nn(g);return d=$f(d),o.context===null?o.context=d:o.pendingContext=d,o=Ws(y,k),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=bn(g,o,k),r!==null&&(bs(r,g,k,y),lo(r,g,k)),k}function Do(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Hf(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<o?d:o}}function Cd(r,o){Hf(r,o),(r=r.alternate)&&Hf(r,o)}function Ob(){return null}var Vf=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ed(r){this._internalRoot=r}Ro.prototype.render=Ed.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));To(r,o,null,null)},Ro.prototype.unmount=Ed.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Kn(function(){To(null,r,null,null)}),o[zs]=null}};function Ro(r){this._internalRoot=r}Ro.prototype.unstable_scheduleHydration=function(r){if(r){var o=Sh();r={blockedOn:null,target:r,priority:o};for(var d=0;d<un.length&&o!==0&&o<un[d].priority;d++);un.splice(d,0,r),d===0&&Ah(r)}};function Ad(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Fo(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Wf(){}function Ib(r,o,d,m,g){if(g){if(typeof m=="function"){var y=m;m=function(){var X=Do(k);y.call(X)}}var k=Uf(o,m,r,0,null,!1,!1,"",Wf);return r._reactRootContainer=k,r[zs]=k.current,ka(r.nodeType===8?r.parentNode:r),Kn(),k}for(;g=r.lastChild;)r.removeChild(g);if(typeof m=="function"){var M=m;m=function(){var X=Do(O);M.call(X)}}var O=Sd(r,0,!1,null,null,!1,!1,"",Wf);return r._reactRootContainer=O,r[zs]=O.current,ka(r.nodeType===8?r.parentNode:r),Kn(function(){To(o,O,d,m)}),O}function Lo(r,o,d,m,g){var y=d._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var M=g;g=function(){var O=Do(k);M.call(O)}}To(o,k,r,g)}else k=Ib(d,o,r,g,m);return Do(k)}_h=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var d=da(o.pendingLanes);d!==0&&(Zl(o,d|1),$t(o,at()),(ze&6)===0&&(Or=at()+500,xn()))}break;case 13:Kn(function(){var m=Vs(r,1);if(m!==null){var g=Lt();bs(m,r,1,g)}}),Cd(r,1)}},ec=function(r){if(r.tag===13){var o=Vs(r,134217728);if(o!==null){var d=Lt();bs(o,r,134217728,d)}Cd(r,134217728)}},kh=function(r){if(r.tag===13){var o=Nn(r),d=Vs(r,o);if(d!==null){var m=Lt();bs(d,r,o,m)}Cd(r,o)}},Sh=function(){return Ve},Ch=function(r,o){var d=Ve;try{return Ve=r,o()}finally{Ve=d}},ql=function(r,o,d){switch(o){case"input":if(Se(r,d),o=d.name,d.type==="radio"&&o!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==r&&m.form===r.form){var g=Gi(m);if(!g)throw Error(s(90));Ue(m),Se(m,g)}}}break;case"textarea":pe(r,d);break;case"select":o=d.value,o!=null&&ft(r,!!d.multiple,o,!1)}},uh=vd,hh=Kn;var Bb={usingClientEntryPoint:!1,Events:[Ea,_r,Gi,ch,dh,vd]},Ua={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zb={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=gh(r),r===null?null:r.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||Ob,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Di=Oo.inject(zb),ks=Oo}catch{}}return Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bb,Ut.createPortal=function(r,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ad(o))throw Error(s(200));return Lb(r,o,null,d)},Ut.createRoot=function(r,o){if(!Ad(r))throw Error(s(299));var d=!1,m="",g=Vf;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Sd(r,1,!1,null,null,d,!1,m,g),r[zs]=o.current,ka(r.nodeType===8?r.parentNode:r),new Ed(o)},Ut.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=gh(o),r=r===null?null:r.stateNode,r},Ut.flushSync=function(r){return Kn(r)},Ut.hydrate=function(r,o,d){if(!Fo(o))throw Error(s(200));return Lo(null,r,o,!0,d)},Ut.hydrateRoot=function(r,o,d){if(!Ad(r))throw Error(s(405));var m=d!=null&&d.hydratedSources||null,g=!1,y="",k=Vf;if(d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),o=Uf(o,null,r,1,d??null,g,!1,y,k),r[zs]=o.current,ka(r),m)for(r=0;r<m.length;r++)d=m[r],g=d._getVersion,g=g(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,g]:o.mutableSourceEagerHydrationData.push(d,g);return new Ro(o)},Ut.render=function(r,o,d){if(!Fo(o))throw Error(s(200));return Lo(null,r,o,!1,d)},Ut.unmountComponentAtNode=function(r){if(!Fo(r))throw Error(s(40));return r._reactRootContainer?(Kn(function(){Lo(null,null,r,!1,function(){r._reactRootContainer=null,r[zs]=null})}),!0):!1},Ut.unstable_batchedUpdates=vd,Ut.unstable_renderSubtreeIntoContainer=function(r,o,d,m){if(!Fo(d))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return Lo(r,o,d,!1,m)},Ut.version="18.3.1-next-f1338f8080-20240426",Ut}var Zf;function tx(){if(Zf)return Td.exports;Zf=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Td.exports=Xb(),Td.exports}var ep;function Qb(){if(ep)return Io;ep=1;var t=tx();return Io.createRoot=t.createRoot,Io.hydrateRoot=t.hydrateRoot,Io}var Jb=Qb();const Gb=ex(Jb);tx();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ii(){return ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ii.apply(this,arguments)}var En;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(En||(En={}));const tp="popstate";function Zb(t){t===void 0&&(t={});function e(n,i){let{pathname:l,search:c,hash:u}=n.location;return au("",{pathname:l,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:ul(i)}return tv(e,s,null,t)}function ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ev(){return Math.random().toString(36).substr(2,8)}function sp(t,e){return{usr:t.state,key:t.key,idx:e}}function au(t,e,s,n){return s===void 0&&(s=null),ii({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gr(e):e,{state:s,key:e&&e.key||n||ev()})}function ul(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Gr(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function tv(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:l=!1}=n,c=i.history,u=En.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(ii({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function x(){u=En.Pop;let N=p(),E=N==null?null:N-f;f=N,h&&h({action:u,location:j.location,delta:E})}function b(N,E){u=En.Push;let S=au(j.location,N,E);f=p()+1;let P=sp(S,f),D=j.createHref(S);try{c.pushState(P,"",D)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(D)}l&&h&&h({action:u,location:j.location,delta:1})}function w(N,E){u=En.Replace;let S=au(j.location,N,E);f=p();let P=sp(S,f),D=j.createHref(S);c.replaceState(P,"",D),l&&h&&h({action:u,location:j.location,delta:0})}function v(N){let E=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof N=="string"?N:ul(N);return S=S.replace(/ $/,"%20"),ct(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let j={get action(){return u},get location(){return t(i,c)},listen(N){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(tp,x),h=N,()=>{i.removeEventListener(tp,x),h=null}},createHref(N){return e(i,N)},createURL:v,encodeLocation(N){let E=v(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:w,go(N){return c.go(N)}};return j}var np;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(np||(np={}));function sv(t,e,s){return s===void 0&&(s="/"),nv(t,e,s)}function nv(t,e,s,n){let i=typeof e=="string"?Gr(e):e,l=Au(i.pathname||"/",s);if(l==null)return null;let c=nx(t);rv(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=gv(l);u=mv(c[h],f)}return u}function nx(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(l,c,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(ct(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=Mn([n,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),nx(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:uv(f,l.index),routesMeta:p})};return t.forEach((l,c)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,c);else for(let h of rx(l.path))i(l,c,h)}),e}function rx(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let c=rx(n.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function rv(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:hv(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const av=/^:[\w-]+$/,iv=3,ov=2,lv=1,cv=10,dv=-2,rp=t=>t==="*";function uv(t,e){let s=t.split("/"),n=s.length;return s.some(rp)&&(n+=dv),e&&(n+=ov),s.filter(i=>!rp(i)).reduce((i,l)=>i+(av.test(l)?iv:l===""?lv:cv),n)}function hv(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function mv(t,e,s){let{routesMeta:n}=t,i={},l="/",c=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",x=fv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),b=h.route;if(!x)return null;Object.assign(i,x.params),c.push({params:i,pathname:Mn([l,x.pathname]),pathnameBase:vv(Mn([l,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(l=Mn([l,x.pathnameBase]))}return c}function fv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=pv(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((f,p,x)=>{let{paramName:b,isOptional:w}=p;if(b==="*"){let j=u[x]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const v=u[x];return w&&!v?f[b]=void 0:f[b]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function pv(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),sx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function gv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Au(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function xv(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Gr(t):t;return{pathname:s?s.startsWith("/")?s:yv(s,e):e,search:wv(n),hash:jv(i)}}function yv(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Fd(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Pu(t,e){let s=bv(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Mu(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Gr(t):(i=ii({},t),ct(!i.pathname||!i.pathname.includes("?"),Fd("?","pathname","search",i)),ct(!i.pathname||!i.pathname.includes("#"),Fd("#","pathname","hash",i)),ct(!i.search||!i.search.includes("#"),Fd("#","search","hash",i)));let l=t===""||i.pathname==="",c=l?"/":i.pathname,u;if(c==null)u=s;else{let x=e.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),x-=1;i.pathname=b.join("/")}u=x>=0?e[x]:"/"}let h=xv(i,u),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Mn=t=>t.join("/").replace(/\/\/+/g,"/"),vv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ax=["post","put","patch","delete"];new Set(ax);const _v=["get",...ax];new Set(_v);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},oi.apply(this,arguments)}const Tu=_.createContext(null),kv=_.createContext(null),On=_.createContext(null),Nl=_.createContext(null),an=_.createContext({outlet:null,matches:[],isDataRoute:!1}),ix=_.createContext(null);function Sv(t,e){let{relative:s}=e===void 0?{}:e;Zr()||ct(!1);let{basename:n,navigator:i}=_.useContext(On),{hash:l,pathname:c,search:u}=lx(t,{relative:s}),h=c;return n!=="/"&&(h=c==="/"?n:Mn([n,c])),i.createHref({pathname:h,search:u,hash:l})}function Zr(){return _.useContext(Nl)!=null}function ea(){return Zr()||ct(!1),_.useContext(Nl).location}function ox(t){_.useContext(On).static||_.useLayoutEffect(t)}function mr(){let{isDataRoute:t}=_.useContext(an);return t?zv():Cv()}function Cv(){Zr()||ct(!1);let t=_.useContext(Tu),{basename:e,future:s,navigator:n}=_.useContext(On),{matches:i}=_.useContext(an),{pathname:l}=ea(),c=JSON.stringify(Pu(i,s.v7_relativeSplatPath)),u=_.useRef(!1);return ox(()=>{u.current=!0}),_.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){n.go(f);return}let x=Mu(f,JSON.parse(c),l,p.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Mn([e,x.pathname])),(p.replace?n.replace:n.push)(x,p.state,p)},[e,n,c,l,t])}function Ev(){let{matches:t}=_.useContext(an),e=t[t.length-1];return e?e.params:{}}function lx(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=_.useContext(On),{matches:i}=_.useContext(an),{pathname:l}=ea(),c=JSON.stringify(Pu(i,n.v7_relativeSplatPath));return _.useMemo(()=>Mu(t,JSON.parse(c),l,s==="path"),[t,c,l,s])}function Av(t,e){return Pv(t,e)}function Pv(t,e,s,n){Zr()||ct(!1);let{navigator:i}=_.useContext(On),{matches:l}=_.useContext(an),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=ea(),p;if(e){var x;let N=typeof e=="string"?Gr(e):e;h==="/"||(x=N.pathname)!=null&&x.startsWith(h)||ct(!1),p=N}else p=f;let b=p.pathname||"/",w=b;if(h!=="/"){let N=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=sv(t,{pathname:w}),j=Fv(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Mn([h,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Mn([h,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,s,n);return e&&j?_.createElement(Nl.Provider,{value:{location:oi({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:En.Pop}},j):j}function Mv(){let t=Bv(),e=Nv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),s?_.createElement("pre",{style:i},s):null,null)}const Tv=_.createElement(Mv,null);class Dv extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?_.createElement(an.Provider,{value:this.props.routeContext},_.createElement(ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rv(t){let{routeContext:e,match:s,children:n}=t,i=_.useContext(Tu);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),_.createElement(an.Provider,{value:e},n)}function Fv(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,u=(i=s)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);p>=0||ct(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(s&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=p),x.route.id){let{loaderData:b,errors:w}=s,v=x.route.loader&&b[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||v){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,x,b)=>{let w,v=!1,j=null,N=null;s&&(w=u&&x.route.id?u[x.route.id]:void 0,j=x.route.errorElement||Tv,h&&(f<0&&b===0?($v("route-fallback"),v=!0,N=null):f===b&&(v=!0,N=x.route.hydrateFallbackElement||null)));let E=e.concat(c.slice(0,b+1)),S=()=>{let P;return w?P=j:v?P=N:x.route.Component?P=_.createElement(x.route.Component,null):x.route.element?P=x.route.element:P=p,_.createElement(Rv,{match:x,routeContext:{outlet:p,matches:E,isDataRoute:s!=null},children:P})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?_.createElement(Dv,{location:s.location,revalidation:s.revalidation,component:j,error:w,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var cx=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(cx||{}),dx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(dx||{});function Lv(t){let e=_.useContext(Tu);return e||ct(!1),e}function Ov(t){let e=_.useContext(kv);return e||ct(!1),e}function Iv(t){let e=_.useContext(an);return e||ct(!1),e}function ux(t){let e=Iv(),s=e.matches[e.matches.length-1];return s.route.id||ct(!1),s.route.id}function Bv(){var t;let e=_.useContext(ix),s=Ov(),n=ux();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function zv(){let{router:t}=Lv(cx.UseNavigateStable),e=ux(dx.UseNavigateStable),s=_.useRef(!1);return ox(()=>{s.current=!0}),_.useCallback(function(i,l){l===void 0&&(l={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,oi({fromRouteId:e},l)))},[t,e])}const ap={};function $v(t,e,s){ap[t]||(ap[t]=!0)}function Uv(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function iu(t){let{to:e,replace:s,state:n,relative:i}=t;Zr()||ct(!1);let{future:l,static:c}=_.useContext(On),{matches:u}=_.useContext(an),{pathname:h}=ea(),f=mr(),p=Mu(e,Pu(u,l.v7_relativeSplatPath),h,i==="path"),x=JSON.stringify(p);return _.useEffect(()=>f(JSON.parse(x),{replace:s,state:n,relative:i}),[f,x,i,s,n]),null}function ot(t){ct(!1)}function Hv(t){let{basename:e="/",children:s=null,location:n,navigationType:i=En.Pop,navigator:l,static:c=!1,future:u}=t;Zr()&&ct(!1);let h=e.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:h,navigator:l,static:c,future:oi({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);typeof n=="string"&&(n=Gr(n));let{pathname:p="/",search:x="",hash:b="",state:w=null,key:v="default"}=n,j=_.useMemo(()=>{let N=Au(p,h);return N==null?null:{location:{pathname:N,search:x,hash:b,state:w,key:v},navigationType:i}},[h,p,x,b,w,v,i]);return j==null?null:_.createElement(On.Provider,{value:f},_.createElement(Nl.Provider,{children:s,value:j}))}function Vv(t){let{children:e,location:s}=t;return Av(ou(e),s)}new Promise(()=>{});function ou(t,e){e===void 0&&(e=[]);let s=[];return _.Children.forEach(t,(n,i)=>{if(!_.isValidElement(n))return;let l=[...e,i];if(n.type===_.Fragment){s.push.apply(s,ou(n.props.children,l));return}n.type!==ot&&ct(!1),!n.props.index||!n.props.children||ct(!1);let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=ou(n.props.children,l)),s.push(c)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},lu.apply(this,arguments)}function Wv(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function qv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Yv(t,e){return t.button===0&&(!e||e==="_self")&&!qv(t)}const Kv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xv="6";try{window.__reactRouterVersion=Xv}catch{}const Qv="startTransition",ip=qb[Qv];function Jv(t){let{basename:e,children:s,future:n,window:i}=t,l=_.useRef();l.current==null&&(l.current=Zb({window:i,v5Compat:!0}));let c=l.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:f}=n||{},p=_.useCallback(x=>{f&&ip?ip(()=>h(x)):h(x)},[h,f]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.useEffect(()=>Uv(n),[n]),_.createElement(Hv,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:n})}const Gv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,op=_.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:l,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:x}=e,b=Wv(e,Kv),{basename:w}=_.useContext(On),v,j=!1;if(typeof f=="string"&&Zv.test(f)&&(v=f,Gv))try{let P=new URL(window.location.href),D=f.startsWith("//")?new URL(P.protocol+f):new URL(f),T=Au(D.pathname,w);D.origin===P.origin&&T!=null?f=T+D.search+D.hash:j=!0}catch{}let N=Sv(f,{relative:i}),E=ew(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:x});function S(P){n&&n(P),P.defaultPrevented||E(P)}return _.createElement("a",lu({},b,{href:v||N,onClick:j||l?n:S,ref:s,target:h}))});var lp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lp||(lp={}));var cp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cp||(cp={}));function ew(t,e){let{target:s,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:u}=e===void 0?{}:e,h=mr(),f=ea(),p=lx(t,{relative:c});return _.useCallback(x=>{if(Yv(x,s)){x.preventDefault();let b=n!==void 0?n:ul(f)===ul(p);h(t,{replace:b,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[f,h,p,n,i,s,t,l,c,u])}function hx(t,e){return function(){return t.apply(e,arguments)}}const{toString:tw}=Object.prototype,{getPrototypeOf:Du}=Object,{iterator:_l,toStringTag:mx}=Symbol,kl=(t=>e=>{const s=tw.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),js=t=>(t=t.toLowerCase(),e=>kl(e)===t),Sl=t=>e=>typeof e===t,{isArray:ta}=Array,li=Sl("undefined");function ji(t){return t!==null&&!li(t)&&t.constructor!==null&&!li(t.constructor)&&qt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const fx=js("ArrayBuffer");function sw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&fx(t.buffer),e}const nw=Sl("string"),qt=Sl("function"),px=Sl("number"),Ni=t=>t!==null&&typeof t=="object",rw=t=>t===!0||t===!1,rl=t=>{if(kl(t)!=="object")return!1;const e=Du(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mx in t)&&!(_l in t)},aw=t=>{if(!Ni(t)||ji(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},iw=js("Date"),ow=js("File"),lw=js("Blob"),cw=js("FileList"),dw=t=>Ni(t)&&qt(t.pipe),uw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qt(t.append)&&((e=kl(t))==="formdata"||e==="object"&&qt(t.toString)&&t.toString()==="[object FormData]"))},hw=js("URLSearchParams"),[mw,fw,pw,gw]=["ReadableStream","Request","Response","Headers"].map(js),xw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _i(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ta(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(ji(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let u;for(n=0;n<c;n++)u=l[n],e.call(null,t[u],u,t)}}function gx(t,e){if(ji(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xx=t=>!li(t)&&t!==rr;function cu(){const{caseless:t}=xx(this)&&this||{},e={},s=(n,i)=>{const l=t&&gx(e,i)||i;rl(e[l])&&rl(n)?e[l]=cu(e[l],n):rl(n)?e[l]=cu({},n):ta(n)?e[l]=n.slice():e[l]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&_i(arguments[n],s);return e}const yw=(t,e,s,{allOwnKeys:n}={})=>(_i(e,(i,l)=>{s&&qt(i)?t[l]=hx(i,s):t[l]=i},{allOwnKeys:n}),t),bw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vw=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},ww=(t,e,s,n)=>{let i,l,c;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)c=i[l],(!n||n(c,t,e))&&!u[c]&&(e[c]=t[c],u[c]=!0);t=s!==!1&&Du(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},jw=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},Nw=t=>{if(!t)return null;if(ta(t))return t;let e=t.length;if(!px(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},_w=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Du(Uint8Array)),kw=(t,e)=>{const n=(t&&t[_l]).call(t);let i;for(;(i=n.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},Sw=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Cw=js("HTMLFormElement"),Ew=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),dp=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Aw=js("RegExp"),yx=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};_i(s,(i,l)=>{let c;(c=e(i,l,t))!==!1&&(n[l]=c||i)}),Object.defineProperties(t,n)},Pw=t=>{yx(t,(e,s)=>{if(qt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(qt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Mw=(t,e)=>{const s={},n=i=>{i.forEach(l=>{s[l]=!0})};return ta(t)?n(t):n(String(t).split(e)),s},Tw=()=>{},Dw=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Rw(t){return!!(t&&qt(t.append)&&t[mx]==="FormData"&&t[_l])}const Fw=t=>{const e=new Array(10),s=(n,i)=>{if(Ni(n)){if(e.indexOf(n)>=0)return;if(ji(n))return n;if(!("toJSON"in n)){e[i]=n;const l=ta(n)?[]:{};return _i(n,(c,u)=>{const h=s(c,i+1);!li(h)&&(l[u]=h)}),e[i]=void 0,l}}return n};return s(t,0)},Lw=js("AsyncFunction"),Ow=t=>t&&(Ni(t)||qt(t))&&qt(t.then)&&qt(t.catch),bx=((t,e)=>t?setImmediate:e?((s,n)=>(rr.addEventListener("message",({source:i,data:l})=>{i===rr&&l===s&&n.length&&n.shift()()},!1),i=>{n.push(i),rr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",qt(rr.postMessage)),Iw=typeof queueMicrotask<"u"?queueMicrotask.bind(rr):typeof process<"u"&&process.nextTick||bx,Bw=t=>t!=null&&qt(t[_l]),G={isArray:ta,isArrayBuffer:fx,isBuffer:ji,isFormData:uw,isArrayBufferView:sw,isString:nw,isNumber:px,isBoolean:rw,isObject:Ni,isPlainObject:rl,isEmptyObject:aw,isReadableStream:mw,isRequest:fw,isResponse:pw,isHeaders:gw,isUndefined:li,isDate:iw,isFile:ow,isBlob:lw,isRegExp:Aw,isFunction:qt,isStream:dw,isURLSearchParams:hw,isTypedArray:_w,isFileList:cw,forEach:_i,merge:cu,extend:yw,trim:xw,stripBOM:bw,inherits:vw,toFlatObject:ww,kindOf:kl,kindOfTest:js,endsWith:jw,toArray:Nw,forEachEntry:kw,matchAll:Sw,isHTMLForm:Cw,hasOwnProperty:dp,hasOwnProp:dp,reduceDescriptors:yx,freezeMethods:Pw,toObjectSet:Mw,toCamelCase:Ew,noop:Tw,toFiniteNumber:Dw,findKey:gx,global:rr,isContextDefined:xx,isSpecCompliantForm:Rw,toJSONObject:Fw,isAsyncFn:Lw,isThenable:Ow,setImmediate:bx,asap:Iw,isIterable:Bw};function Me(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}G.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const vx=Me.prototype,wx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{wx[t]={value:t}});Object.defineProperties(Me,wx);Object.defineProperty(vx,"isAxiosError",{value:!0});Me.from=(t,e,s,n,i,l)=>{const c=Object.create(vx);return G.toFlatObject(t,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Me.call(c,t.message,e,s,n,i),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const zw=null;function du(t){return G.isPlainObject(t)||G.isArray(t)}function jx(t){return G.endsWith(t,"[]")?t.slice(0,-2):t}function up(t,e,s){return t?t.concat(e).map(function(i,l){return i=jx(i),!s&&l?"["+i+"]":i}).join(s?".":""):e}function $w(t){return G.isArray(t)&&!t.some(du)}const Uw=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function Cl(t,e,s){if(!G.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=G.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,N){return!G.isUndefined(N[j])});const n=s.metaTokens,i=s.visitor||p,l=s.dots,c=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(i))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(G.isDate(v))return v.toISOString();if(G.isBoolean(v))return v.toString();if(!h&&G.isBlob(v))throw new Me("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(v)||G.isTypedArray(v)?h&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,j,N){let E=v;if(v&&!N&&typeof v=="object"){if(G.endsWith(j,"{}"))j=n?j:j.slice(0,-2),v=JSON.stringify(v);else if(G.isArray(v)&&$w(v)||(G.isFileList(v)||G.endsWith(j,"[]"))&&(E=G.toArray(v)))return j=jx(j),E.forEach(function(P,D){!(G.isUndefined(P)||P===null)&&e.append(c===!0?up([j],D,l):c===null?j:j+"[]",f(P))}),!1}return du(v)?!0:(e.append(up(N,j,l),f(v)),!1)}const x=[],b=Object.assign(Uw,{defaultVisitor:p,convertValue:f,isVisitable:du});function w(v,j){if(!G.isUndefined(v)){if(x.indexOf(v)!==-1)throw Error("Circular reference detected in "+j.join("."));x.push(v),G.forEach(v,function(E,S){(!(G.isUndefined(E)||E===null)&&i.call(e,E,G.isString(S)?S.trim():S,j,b))===!0&&w(E,j?j.concat(S):[S])}),x.pop()}}if(!G.isObject(t))throw new TypeError("data must be an object");return w(t),e}function hp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ru(t,e){this._pairs=[],t&&Cl(t,this,e)}const Nx=Ru.prototype;Nx.append=function(e,s){this._pairs.push([e,s])};Nx.toString=function(e){const s=e?function(n){return e.call(this,n,hp)}:hp;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Hw(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _x(t,e,s){if(!e)return t;const n=s&&s.encode||Hw;G.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let l;if(i?l=i(e,s):l=G.isURLSearchParams(e)?e.toString():new Ru(e,s).toString(n),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class mp{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(n){n!==null&&e(n)})}}const kx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vw=typeof URLSearchParams<"u"?URLSearchParams:Ru,Ww=typeof FormData<"u"?FormData:null,qw=typeof Blob<"u"?Blob:null,Yw={isBrowser:!0,classes:{URLSearchParams:Vw,FormData:Ww,Blob:qw},protocols:["http","https","file","blob","url","data"]},Fu=typeof window<"u"&&typeof document<"u",uu=typeof navigator=="object"&&navigator||void 0,Kw=Fu&&(!uu||["ReactNative","NativeScript","NS"].indexOf(uu.product)<0),Xw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qw=Fu&&window.location.href||"http://localhost",Jw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fu,hasStandardBrowserEnv:Kw,hasStandardBrowserWebWorkerEnv:Xw,navigator:uu,origin:Qw},Symbol.toStringTag,{value:"Module"})),Mt={...Jw,...Yw};function Gw(t,e){return Cl(t,new Mt.classes.URLSearchParams,{visitor:function(s,n,i,l){return Mt.isNode&&G.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function Zw(t){return G.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function e1(t){const e={},s=Object.keys(t);let n;const i=s.length;let l;for(n=0;n<i;n++)l=s[n],e[l]=t[l];return e}function Sx(t){function e(s,n,i,l){let c=s[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=s.length;return c=!c&&G.isArray(i)?i.length:c,h?(G.hasOwnProp(i,c)?i[c]=[i[c],n]:i[c]=n,!u):((!i[c]||!G.isObject(i[c]))&&(i[c]=[]),e(s,n,i[c],l)&&G.isArray(i[c])&&(i[c]=e1(i[c])),!u)}if(G.isFormData(t)&&G.isFunction(t.entries)){const s={};return G.forEachEntry(t,(n,i)=>{e(Zw(n),i,s,0)}),s}return null}function t1(t,e,s){if(G.isString(t))try{return(e||JSON.parse)(t),G.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const ki={transitional:kx,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,l=G.isObject(e);if(l&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return i?JSON.stringify(Sx(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Gw(e,this.formSerializer).toString();if((u=G.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Cl(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||i?(s.setContentType("application/json",!1),t1(e)):e}],transformResponse:[function(e){const s=this.transitional||ki.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(n&&!this.responseType||i)){const c=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Me.from(u,Me.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mt.classes.FormData,Blob:Mt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],t=>{ki.headers[t]={}});const s1=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n1=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),s=c.substring(0,i).trim().toLowerCase(),n=c.substring(i+1).trim(),!(!s||e[s]&&s1[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},fp=Symbol("internals");function Va(t){return t&&String(t).trim().toLowerCase()}function al(t){return t===!1||t==null?t:G.isArray(t)?t.map(al):String(t)}function r1(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const a1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ld(t,e,s,n,i){if(G.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!G.isString(e)){if(G.isString(n))return e.indexOf(n)!==-1;if(G.isRegExp(n))return n.test(e)}}function i1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function o1(t,e){const s=G.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,l,c){return this[n].call(this,e,i,l,c)},configurable:!0})})}let Yt=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function l(u,h,f){const p=Va(h);if(!p)throw new Error("header name must be a non-empty string");const x=G.findKey(i,p);(!x||i[x]===void 0||f===!0||f===void 0&&i[x]!==!1)&&(i[x||h]=al(u))}const c=(u,h)=>G.forEach(u,(f,p)=>l(f,p,h));if(G.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(G.isString(e)&&(e=e.trim())&&!a1(e))c(n1(e),s);else if(G.isObject(e)&&G.isIterable(e)){let u={},h,f;for(const p of e){if(!G.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(h=u[f])?G.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,s)}else e!=null&&l(s,e,n);return this}get(e,s){if(e=Va(e),e){const n=G.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return r1(i);if(G.isFunction(s))return s.call(this,i,n);if(G.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Va(e),e){const n=G.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Ld(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function l(c){if(c=Va(c),c){const u=G.findKey(n,c);u&&(!s||Ld(n,n[u],u,s))&&(delete n[u],i=!0)}}return G.isArray(e)?e.forEach(l):l(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const l=s[n];(!e||Ld(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const s=this,n={};return G.forEach(this,(i,l)=>{const c=G.findKey(n,l);if(c){s[c]=al(i),delete s[l];return}const u=e?i1(l):String(l).trim();u!==l&&delete s[l],s[u]=al(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return G.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&G.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[fp]=this[fp]={accessors:{}}).accessors,i=this.prototype;function l(c){const u=Va(c);n[u]||(o1(i,c),n[u]=!0)}return G.isArray(e)?e.forEach(l):l(e),this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Yt.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});G.freezeMethods(Yt);function Od(t,e){const s=this||ki,n=e||s,i=Yt.from(n.headers);let l=n.data;return G.forEach(t,function(u){l=u.call(s,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function Cx(t){return!!(t&&t.__CANCEL__)}function sa(t,e,s){Me.call(this,t??"canceled",Me.ERR_CANCELED,e,s),this.name="CanceledError"}G.inherits(sa,Me,{__CANCEL__:!0});function Ex(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Me("Request failed with status code "+s.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function l1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function c1(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),p=n[l];c||(c=f),s[i]=h,n[i]=f;let x=l,b=0;for(;x!==i;)b+=s[x++],x=x%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),f-c<e)return;const w=p&&f-p;return w?Math.round(b*1e3/w):void 0}}function d1(t,e){let s=0,n=1e3/e,i,l;const c=(f,p=Date.now())=>{s=p,i=null,l&&(clearTimeout(l),l=null),t(...f)};return[(...f)=>{const p=Date.now(),x=p-s;x>=n?c(f,p):(i=f,l||(l=setTimeout(()=>{l=null,c(i)},n-x)))},()=>i&&c(i)]}const hl=(t,e,s=3)=>{let n=0;const i=c1(50,250);return d1(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-n,f=i(h),p=c<=u;n=c;const x={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:f||void 0,estimated:f&&u&&p?(u-c)/f:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(x)},s)},pp=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},gp=t=>(...e)=>G.asap(()=>t(...e)),u1=Mt.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Mt.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Mt.origin),Mt.navigator&&/(msie|trident)/i.test(Mt.navigator.userAgent)):()=>!0,h1=Mt.hasStandardBrowserEnv?{write(t,e,s,n,i,l){const c=[t+"="+encodeURIComponent(e)];G.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),G.isString(n)&&c.push("path="+n),G.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function m1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function f1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ax(t,e,s){let n=!m1(e);return t&&(n||s==!1)?f1(t,e):e}const xp=t=>t instanceof Yt?{...t}:t;function cr(t,e){e=e||{};const s={};function n(f,p,x,b){return G.isPlainObject(f)&&G.isPlainObject(p)?G.merge.call({caseless:b},f,p):G.isPlainObject(p)?G.merge({},p):G.isArray(p)?p.slice():p}function i(f,p,x,b){if(G.isUndefined(p)){if(!G.isUndefined(f))return n(void 0,f,x,b)}else return n(f,p,x,b)}function l(f,p){if(!G.isUndefined(p))return n(void 0,p)}function c(f,p){if(G.isUndefined(p)){if(!G.isUndefined(f))return n(void 0,f)}else return n(void 0,p)}function u(f,p,x){if(x in e)return n(f,p);if(x in t)return n(void 0,f)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(f,p,x)=>i(xp(f),xp(p),x,!0)};return G.forEach(Object.keys({...t,...e}),function(p){const x=h[p]||i,b=x(t[p],e[p],p);G.isUndefined(b)&&x!==u||(s[p]=b)}),s}const Px=t=>{const e=cr({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=Yt.from(c),e.url=_x(Ax(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(G.isFormData(s)){if(Mt.hasStandardBrowserEnv||Mt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[f,...p]=h?h.split(";").map(x=>x.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Mt.hasStandardBrowserEnv&&(n&&G.isFunction(n)&&(n=n(e)),n||n!==!1&&u1(e.url))){const f=i&&l&&h1.read(l);f&&c.set(i,f)}return e},p1=typeof XMLHttpRequest<"u",g1=p1&&function(t){return new Promise(function(s,n){const i=Px(t);let l=i.data;const c=Yt.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:f}=i,p,x,b,w,v;function j(){w&&w(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function E(){if(!N)return;const P=Yt.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),T={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:P,config:t,request:N};Ex(function(R){s(R),j()},function(R){n(R),j()},T),N=null}"onloadend"in N?N.onloadend=E:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(E)},N.onabort=function(){N&&(n(new Me("Request aborted",Me.ECONNABORTED,t,N)),N=null)},N.onerror=function(){n(new Me("Network Error",Me.ERR_NETWORK,t,N)),N=null},N.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||kx;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),n(new Me(D,T.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,t,N)),N=null},l===void 0&&c.setContentType(null),"setRequestHeader"in N&&G.forEach(c.toJSON(),function(D,T){N.setRequestHeader(T,D)}),G.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),u&&u!=="json"&&(N.responseType=i.responseType),f&&([b,v]=hl(f,!0),N.addEventListener("progress",b)),h&&N.upload&&([x,w]=hl(h),N.upload.addEventListener("progress",x),N.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(p=P=>{N&&(n(!P||P.type?new sa(null,t,N):P),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const S=l1(i.url);if(S&&Mt.protocols.indexOf(S)===-1){n(new Me("Unsupported protocol "+S+":",Me.ERR_BAD_REQUEST,t));return}N.send(l||null)})},x1=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const l=function(f){if(!i){i=!0,u();const p=f instanceof Error?f:this.reason;n.abort(p instanceof Me?p:new sa(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Me(`timeout ${e} of ms exceeded`,Me.ETIMEDOUT))},e);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),t=null)};t.forEach(f=>f.addEventListener("abort",l));const{signal:h}=n;return h.unsubscribe=()=>G.asap(u),h}},y1=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},b1=async function*(t,e){for await(const s of v1(t))yield*y1(s,e)},v1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},yp=(t,e,s,n)=>{const i=b1(t,e);let l=0,c,u=h=>{c||(c=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await i.next();if(f){u(),h.close();return}let x=p.byteLength;if(s){let b=l+=x;s(b)}h.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},El=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mx=El&&typeof ReadableStream=="function",w1=El&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Tx=(t,...e)=>{try{return!!t(...e)}catch{return!1}},j1=Mx&&Tx(()=>{let t=!1;const e=new Request(Mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),bp=64*1024,hu=Mx&&Tx(()=>G.isReadableStream(new Response("").body)),ml={stream:hu&&(t=>t.body)};El&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ml[e]&&(ml[e]=G.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new Me(`Response type '${e}' is not supported`,Me.ERR_NOT_SUPPORT,n)})})})(new Response);const N1=async t=>{if(t==null)return 0;if(G.isBlob(t))return t.size;if(G.isSpecCompliantForm(t))return(await new Request(Mt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(G.isArrayBufferView(t)||G.isArrayBuffer(t))return t.byteLength;if(G.isURLSearchParams(t)&&(t=t+""),G.isString(t))return(await w1(t)).byteLength},_1=async(t,e)=>{const s=G.toFiniteNumber(t.getContentLength());return s??N1(e)},k1=El&&(async t=>{let{url:e,method:s,data:n,signal:i,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:f,headers:p,withCredentials:x="same-origin",fetchOptions:b}=Px(t);f=f?(f+"").toLowerCase():"text";let w=x1([i,l&&l.toAbortSignal()],c),v;const j=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let N;try{if(h&&j1&&s!=="get"&&s!=="head"&&(N=await _1(p,n))!==0){let T=new Request(e,{method:"POST",body:n,duplex:"half"}),L;if(G.isFormData(n)&&(L=T.headers.get("content-type"))&&p.setContentType(L),T.body){const[R,F]=pp(N,hl(gp(h)));n=yp(T.body,bp,R,F)}}G.isString(x)||(x=x?"include":"omit");const E="credentials"in Request.prototype;v=new Request(e,{...b,signal:w,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:E?x:void 0});let S=await fetch(v,b);const P=hu&&(f==="stream"||f==="response");if(hu&&(u||P&&j)){const T={};["status","statusText","headers"].forEach(U=>{T[U]=S[U]});const L=G.toFiniteNumber(S.headers.get("content-length")),[R,F]=u&&pp(L,hl(gp(u),!0))||[];S=new Response(yp(S.body,bp,R,()=>{F&&F(),j&&j()}),T)}f=f||"text";let D=await ml[G.findKey(ml,f)||"text"](S,t);return!P&&j&&j(),await new Promise((T,L)=>{Ex(T,L,{data:D,headers:Yt.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:v})})}catch(E){throw j&&j(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,t,v),{cause:E.cause||E}):Me.from(E,E&&E.code,t,v)}}),mu={http:zw,xhr:g1,fetch:k1};G.forEach(mu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vp=t=>`- ${t}`,S1=t=>G.isFunction(t)||t===null||t===!1,Dx={getAdapter:t=>{t=G.isArray(t)?t:[t];const{length:e}=t;let s,n;const i={};for(let l=0;l<e;l++){s=t[l];let c;if(n=s,!S1(s)&&(n=mu[(c=String(s)).toLowerCase()],n===void 0))throw new Me(`Unknown adapter '${c}'`);if(n)break;i[c||"#"+l]=n}if(!n){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(vp).join(`
`):" "+vp(l[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:mu};function Id(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new sa(null,t)}function wp(t){return Id(t),t.headers=Yt.from(t.headers),t.data=Od.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Dx.getAdapter(t.adapter||ki.adapter)(t).then(function(n){return Id(t),n.data=Od.call(t,t.transformResponse,n),n.headers=Yt.from(n.headers),n},function(n){return Cx(n)||(Id(t),n&&n.response&&(n.response.data=Od.call(t,t.transformResponse,n.response),n.response.headers=Yt.from(n.response.headers))),Promise.reject(n)})}const Rx="1.11.0",Al={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Al[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jp={};Al.transitional=function(e,s,n){function i(l,c){return"[Axios v"+Rx+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,u)=>{if(e===!1)throw new Me(i(c," has been removed"+(s?" in "+s:"")),Me.ERR_DEPRECATED);return s&&!jp[c]&&(jp[c]=!0,console.warn(i(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,c,u):!0}};Al.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function C1(t,e,s){if(typeof t!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const l=n[i],c=e[l];if(c){const u=t[l],h=u===void 0||c(u,l,t);if(h!==!0)throw new Me("option "+l+" must be "+h,Me.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Me("Unknown option "+l,Me.ERR_BAD_OPTION)}}const il={assertOptions:C1,validators:Al},Ps=il.validators;let ir=class{constructor(e){this.defaults=e||{},this.interceptors={request:new mp,response:new mp}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=cr(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:l}=s;n!==void 0&&il.assertOptions(n,{silentJSONParsing:Ps.transitional(Ps.boolean),forcedJSONParsing:Ps.transitional(Ps.boolean),clarifyTimeoutError:Ps.transitional(Ps.boolean)},!1),i!=null&&(G.isFunction(i)?s.paramsSerializer={serialize:i}:il.assertOptions(i,{encode:Ps.function,serialize:Ps.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),il.assertOptions(s,{baseUrl:Ps.spelling("baseURL"),withXsrfToken:Ps.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=l&&G.merge(l.common,l[s.method]);l&&G.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),s.headers=Yt.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(s)===!1||(h=h&&j.synchronous,u.unshift(j.fulfilled,j.rejected))});const f=[];this.interceptors.response.forEach(function(j){f.push(j.fulfilled,j.rejected)});let p,x=0,b;if(!h){const v=[wp.bind(this),void 0];for(v.unshift(...u),v.push(...f),b=v.length,p=Promise.resolve(s);x<b;)p=p.then(v[x++],v[x++]);return p}b=u.length;let w=s;for(x=0;x<b;){const v=u[x++],j=u[x++];try{w=v(w)}catch(N){j.call(this,N);break}}try{p=wp.call(this,w)}catch(v){return Promise.reject(v)}for(x=0,b=f.length;x<b;)p=p.then(f[x++],f[x++]);return p}getUri(e){e=cr(this.defaults,e);const s=Ax(e.baseURL,e.url,e.allowAbsoluteUrls);return _x(s,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){ir.prototype[e]=function(s,n){return this.request(cr(n||{},{method:e,url:s,data:(n||{}).data}))}});G.forEach(["post","put","patch"],function(e){function s(n){return function(l,c,u){return this.request(cr(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}ir.prototype[e]=s(),ir.prototype[e+"Form"]=s(!0)});let E1=class Fx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(i=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](i);n._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(u=>{n.subscribe(u),l=u}).then(i);return c.cancel=function(){n.unsubscribe(l)},c},e(function(l,c,u){n.reason||(n.reason=new sa(l,c,u),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Fx(function(i){e=i}),cancel:e}}};function A1(t){return function(s){return t.apply(null,s)}}function P1(t){return G.isObject(t)&&t.isAxiosError===!0}const fu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fu).forEach(([t,e])=>{fu[e]=t});function Lx(t){const e=new ir(t),s=hx(ir.prototype.request,e);return G.extend(s,ir.prototype,e,{allOwnKeys:!0}),G.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Lx(cr(t,i))},s}const Le=Lx(ki);Le.Axios=ir;Le.CanceledError=sa;Le.CancelToken=E1;Le.isCancel=Cx;Le.VERSION=Rx;Le.toFormData=Cl;Le.AxiosError=Me;Le.Cancel=Le.CanceledError;Le.all=function(e){return Promise.all(e)};Le.spread=A1;Le.isAxiosError=P1;Le.mergeConfig=cr;Le.AxiosHeaders=Yt;Le.formToJSON=t=>Sx(G.isHTMLForm(t)?new FormData(t):t);Le.getAdapter=Dx.getAdapter;Le.HttpStatusCode=fu;Le.default=Le;const{Axios:DC,AxiosError:RC,CanceledError:FC,isCancel:LC,CancelToken:OC,VERSION:IC,all:BC,Cancel:zC,isAxiosError:$C,spread:UC,toFormData:HC,AxiosHeaders:VC,HttpStatusCode:WC,formToJSON:qC,getAdapter:YC,mergeConfig:KC}=Le,Wa="http://localhost:5000/api";class M1{constructor(){this.refreshPromise=null,this.setupAxiosInterceptors()}setupAxiosInterceptors(){Le.interceptors.request.use(e=>{const s=localStorage.getItem("access_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),Le.interceptors.response.use(e=>e,async e=>{const s=e.config;if(e.response?.status===401&&!s._retry)if(console.log("🚫 401 Unauthorized detected:",e.response?.data?.message||"Token invalid"),s._retry=!0,!["/auth/login","/auth/refresh","/auth/logout"].some(l=>s.url?.includes(l))&&this.getRefreshToken())try{console.log("🔄 Attempting token refresh...");const l=await this.refreshToken();if(l)return s.headers.Authorization=`Bearer ${l.accessToken}`,console.log("🔄 Retrying original request with new token"),Le(s)}catch(l){return console.error("🚫 Token refresh failed:",l),this.handleAuthFailure("Token refresh failed"),Promise.reject(l)}else console.log("🚪 No refresh token available or skip endpoint, redirecting to login"),this.handleAuthFailure("Authentication required");return Promise.reject(e)})}async login(e,s){try{const n=await Le.post(`${Wa}/auth/login`,{username:e,password:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"Login failed")}catch(n){throw console.error("🚫 Login error:",n),n}}async loginWith2FA(e,s){try{const n=await Le.post(`${Wa}/auth/login-2fa`,{user_id:e,token:s});if(n.data.success){const{access_token:i,refresh_token:l,user:c}=n.data.data;return this.setAuthData(i,l,c),n.data}throw new Error(n.data.message||"2FA login failed")}catch(n){throw console.error("🚫 2FA login error:",n),n}}async refreshToken(){if(this.refreshPromise)return this.refreshPromise;const e=localStorage.getItem("refresh_token");if(!e)throw console.error("🚫 No refresh token available"),new Error("No refresh token available");this.refreshPromise=this.performTokenRefresh(e);try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performTokenRefresh(e){try{console.log("🔄 Refreshing tokens...");const s=await Le.post(`${Wa}/auth/refresh`,{refreshToken:e});if(s.data.success){const{accessToken:n,refreshToken:i,user:l}=s.data.data;return localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",i),l&&localStorage.setItem("user",JSON.stringify(l)),console.log("✅ Tokens refreshed successfully"),{accessToken:n,refreshToken:i}}throw new Error(s.data.message||"Token refresh failed")}catch(s){throw console.error("🚫 Token refresh error:",s),s.response?.status===401&&console.log("🚫 Refresh token expired or invalid"),s}}async logout(){try{const e=localStorage.getItem("refresh_token");e&&await Le.post(`${Wa}/auth/logout`,{refreshToken:e})}catch(e){console.warn("⚠️ Logout API call failed:",e.message)}finally{this.clearAuthData(),this.redirectToLogin()}}async getCurrentUser(){try{const e=await Le.get(`${Wa}/auth/me`);if(e.data.success){const s=e.data.data.user;return localStorage.setItem("user",JSON.stringify(s)),s}throw new Error(e.data.message||"Failed to get user info")}catch(e){throw console.error("🚫 Get current user error:",e),e}}setAuthData(e,s,n){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",s),localStorage.setItem("user",JSON.stringify(n)),console.log("✅ Auth data stored successfully")}clearAuthData(){["access_token","refresh_token","auth_token","authToken","user"].forEach(s=>localStorage.removeItem(s)),console.log("🧹 Auth data cleared")}handleAuthFailure(e="Authentication failed"){console.log(`🚫 Auth failure: ${e}`),this.clearAuthData(),this.redirectToLogin()}redirectToLogin(){window.location.pathname!=="/login"&&(console.log("🔄 Redirecting to login page..."),window.location.pathname!=="/"&&sessionStorage.setItem("redirectAfterLogin",window.location.pathname),window.location.href="/login")}isAuthenticated(){const e=localStorage.getItem("access_token");localStorage.getItem("refresh_token");const s=localStorage.getItem("user");return!!(e&&s)}getStoredUser(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("🚫 Failed to parse stored user:",e),null}}getAccessToken(){return localStorage.getItem("access_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}isTokenExpiringSoon(){const e=this.getAccessToken();if(!e)return!1;try{const n=JSON.parse(atob(e.split(".")[1])).exp*1e3,i=Date.now();return n-i<120*1e3}catch(s){return console.error("🚫 Error checking token expiration:",s),!1}}async checkAndRefreshToken(){if(this.isTokenExpiringSoon()&&this.getRefreshToken())try{console.log("🔄 Token expiring soon, proactively refreshing..."),await this.refreshToken()}catch(e){console.error("🚫 Proactive token refresh failed:",e)}}startTokenRefreshTimer(){setInterval(()=>{this.checkAndRefreshToken()},60*1e3)}}const vs=new M1,Ox=_.createContext(),Lu=()=>{const t=_.useContext(Ox);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},T1=({children:t})=>{const[e,s]=_.useState(null),[n,i]=_.useState(null),[l,c]=_.useState(!0);_.useEffect(()=>{(()=>{try{if(vs.isAuthenticated()){const v=vs.getStoredUser(),j=vs.getAccessToken();j&&v?(i(j),s(v),vs.checkAndRefreshToken(),console.log("✅ User authenticated from stored tokens")):(console.log("⚠️ Invalid stored auth data, clearing..."),vs.clearAuthData())}else console.log("❤️ No valid authentication found")}catch(v){console.error("Error loading auth from localStorage:",v),vs.clearAuthData()}finally{c(!1)}})()},[]);const u=(w,v,j)=>{console.log("🔐 AuthContext login called:",{hasUser:!!w,hasToken:!!v,hasRefresh:!!j}),s(w),i(v),j?vs.setAuthData(v,j,w):(localStorage.setItem("access_token",v),localStorage.setItem("user",JSON.stringify(w))),vs.checkAndRefreshToken(),localStorage.removeItem("authToken"),console.log("✅ AuthContext login completed")},h=async()=>{s(null),i(null);try{await vs.logout()}catch(w){console.error("Error during logout:",w),vs.clearAuthData()}},f=()=>{const w=vs.isAuthenticated(),v=!!(e&&n),j=w||v;return!j&&w!==v&&console.log("🔍 Auth state mismatch:",{serviceAuth:w,stateAuth:v,hasUser:!!e,hasToken:!!n}),j},b={user:e,token:n,loading:l,login:u,logout:h,isAuthenticated:f,hasRole:w=>e?.role_name===w,hasPermission:w=>f()?e?.role_name==="super_admin"||e?.role?.name==="super_admin"?!0:e?.permissions&&Array.isArray(e.permissions)?e.permissions.includes(w):e?.permissions&&typeof e.permissions=="object"?!!e.permissions[w]:!1:!1};return a.jsx(Ox.Provider,{value:b,children:t})},Ou=Le.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Ou.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&!t.headers.Authorization&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ou.interceptors.response.use(t=>t,t=>(t.response?.status!==401&&t.response?.status!==403&&console.error("🚫 API Error:",{status:t.response?.status,message:t.response?.data?.message||t.message,url:t.config?.url}),Promise.reject(t)));class D1{constructor(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.CACHE_DURATION=300*1e3,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null,this.maxRetries=3}getCurrentUser(){try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return!s||typeof s!="object"||!s.id?(console.warn("Invalid user data structure"),this.clearUserData(),null):s}catch(e){return console.error("Error parsing user data:",e),this.clearUserData(),null}}clearUserData(){try{localStorage.removeItem("user"),this.clearCache()}catch(e){console.error("Error clearing user data:",e)}}clearCache(){this.cachedPermissions=null,this.cachedRoles=null,this.permissionsCacheTimestamp=null,this.rolesCacheTimestamp=null,this.pendingPermissionsRequest=null,this.pendingRolesRequest=null}isPermissionsCacheValid(){return this.permissionsCacheTimestamp?Date.now()-this.permissionsCacheTimestamp<this.CACHE_DURATION:!1}isRolesCacheValid(){return this.rolesCacheTimestamp?Date.now()-this.rolesCacheTimestamp<this.CACHE_DURATION:!1}async makeApiRequest(e,s=0){try{const n=await Ou.get(e);if(!n||!n.data)throw new Error("Invalid API response structure");if(!n.data.success)throw new Error(n.data.message||"API request failed");return n.data.data}catch(n){if(console.error(`API request failed for ${e}:`,n.message),s<this.maxRetries&&this.isRetryableError(n))return console.log(`Retrying request ${s+1}/${this.maxRetries}`),await this.delay(Math.pow(2,s)*1e3),this.makeApiRequest(e,s+1);throw n}}isRetryableError(e){return e.code==="NETWORK_ERROR"||e.response?.status>=500||e.message.includes("timeout")}delay(e){return new Promise(s=>setTimeout(s,e))}async getUserPermissions(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isPermissionsCacheValid()&&this.cachedPermissions?this.cachedPermissions:this.pendingPermissionsRequest?await this.pendingPermissionsRequest:(this.pendingPermissionsRequest=this.makeApiRequest("/permissions/my-permissions").then(n=>{const i=this.validatePermissionsData(n);return this.cachedPermissions=i,this.permissionsCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user permissions:",n.message),{})).finally(()=>{this.pendingPermissionsRequest=null}),await this.pendingPermissionsRequest):(console.warn("No valid user found for permissions request"),{})}catch(s){return console.error("Error in getUserPermissions:",s),{}}}validatePermissionsData(e){if(!e||typeof e!="object")return console.warn("Invalid permissions data structure"),{};const s={};for(const[n,i]of Object.entries(e))Array.isArray(i)&&(s[n]=i.filter(l=>l&&typeof l=="object"&&typeof l.permission_key=="string"));return s}async getUserRoles(e=null){try{return(e?{id:e}:this.getCurrentUser())?.id?this.isRolesCacheValid()&&this.cachedRoles?this.cachedRoles:this.pendingRolesRequest?await this.pendingRolesRequest:(this.pendingRolesRequest=this.makeApiRequest("/permissions/my-roles").then(n=>{const i=this.validateRolesData(n);return this.cachedRoles=i,this.rolesCacheTimestamp=Date.now(),i}).catch(n=>(console.error("Failed to get user roles:",n.message),[])).finally(()=>{this.pendingRolesRequest=null}),await this.pendingRolesRequest):(console.warn("No valid user found for roles request"),[])}catch(s){return console.error("Error in getUserRoles:",s),[]}}validateRolesData(e){return Array.isArray(e)?e.filter(s=>s&&typeof s=="object"&&typeof s.name=="string"):(console.warn("Invalid roles data structure"),[])}async hasPermission(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid permission key provided"),!1;const n=await this.getUserPermissions(s);for(const i of Object.keys(n))if((n[i]||[]).some(c=>c.permission_key===e))return!0;return!1}catch(n){return console.error("Error checking permission:",n),!1}}async hasModuleAccess(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid module name provided"),!1;const n=await this.getUserPermissions(s);return n[e]&&n[e].length>0}catch(n){return console.error("Error checking module access:",n),!1}}async hasAnyPermission(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid permission keys array provided"),!1;const n=e.map(l=>this.hasPermission(l,s));return(await Promise.all(n)).some(l=>l===!0)}catch(n){return console.error("Error checking permissions:",n),!1}}async hasRole(e,s=null){try{return!e||typeof e!="string"?(console.warn("Invalid role name provided"),!1):(await this.getUserRoles(s)).some(i=>i.name===e)}catch(n){return console.error("Error checking role:",n),!1}}async hasAnyRole(e,s=null){try{if(!Array.isArray(e)||e.length===0)return console.warn("Invalid role names array provided"),!1;const i=(await this.getUserRoles(s)).map(l=>l.name);return e.some(l=>i.includes(l))}catch(n){return console.error("Error checking roles:",n),!1}}getModulePermissions(){return{dashboard:["dashboard.view"],"user-management":["users.read","users.create","users.update","users.delete"],"role-management":["roles.read"],"campaign-types":["campaign-types.read"],"campaign-data":["campaign-data.read"],campaigns:["campaigns.read"],ads:["ads.read"],cards:["cards.read"],"card-users":["card-users.read"],"reports-table":["reports.read"],reports:["reports.read"],analytics:["analytics.view"],"2fa":["2fa.setup"],modules:["modules.read"],settings:["settings.update"]}}async canAccessRoute(e,s=null){try{if(!e||typeof e!="string")return console.warn("Invalid route path provided"),!1;const n=e.replace(/^\/+/,"").toLowerCase(),l=this.getModulePermissions()[n];return!l||l.length===0?!0:await this.hasAnyPermission(l,s)}catch(n){return console.error("Error checking route access:",n),!1}}async refreshPermissions(){try{this.clearCache();const e=this.getCurrentUser();e?.id&&await Promise.allSettled([this.getUserPermissions(e.id),this.getUserRoles(e.id)])}catch(e){console.error("Error refreshing permissions:",e)}}destroy(){this.clearCache()}}const Br=new D1,R1=_.createContext(),wt=({children:t})=>{const[e,s]=_.useState({}),[n,i]=_.useState([]),[l,c]=_.useState(!0),[u,h]=_.useState(null),[f,p]=_.useState(null);_.useEffect(()=>{x()},[]),_.useEffect(()=>{const F=()=>{const U=Br.getCurrentUser();U!==f&&(p(U),x())};return window.addEventListener("storage",F),()=>window.removeEventListener("storage",F)},[f]);const x=async()=>{try{c(!0),h(null);const F=Br.getCurrentUser();if(p(F),F){const[U,H]=await Promise.all([Br.getUserPermissions(F.id),Br.getUserRoles(F.id)]);s(U),i(H)}else s({}),i([])}catch(F){console.error("Error initializing permissions:",F),h(F.message)}finally{c(!1)}},b=async()=>{await Br.refreshPermissions(),await x()},w=F=>{if(!e||Object.keys(e).length===0)return!1;for(const U of Object.keys(e))if((e[U]||[]).some(B=>B.permission_key===F))return!0;return!1},v=F=>Array.isArray(F)?F.some(U=>w(U)):w(F),j=F=>e[F]&&e[F].length>0,N=F=>n.some(U=>U.name===F),E=F=>Array.isArray(F)?F.some(U=>N(U)):N(F),S=F=>{const U=F.replace("/",""),B=Br.getModulePermissions()[U];return!B||B.length===0?!0:v(B)},P=()=>{const F=[];for(const U of Object.keys(e)){const H=e[U]||[];F.push(...H.map(B=>B.permission_key))}return[...new Set(F)]},D=()=>!n||n.length===0?0:Math.max(...n.map(F=>F.level||0)),R={permissions:e,roles:n,loading:l,error:u,user:f,initializePermissions:x,refreshPermissions:b,hasPermission:w,hasAnyPermission:v,hasModuleAccess:j,hasRole:N,hasAnyRole:E,canAccessRoute:S,getAllPermissionKeys:P,getHighestRoleLevel:D,isAdmin:()=>D()>=8||E(["Admin","Super Admin"]),isSuperAdmin:()=>D()>=10||N("Super Admin")};return a.jsx(R1.Provider,{value:R,children:t})},Tn={API_BASE_URL:"http://localhost:5000/api",TOKEN_KEY:"access_token",DEBUG:!1,ENVIRONMENT:"production",API_TIMEOUT:1e4,MESSAGE_TIMEOUT:5e3},ce=Le.create({baseURL:Tn.API_BASE_URL,timeout:Tn.API_TIMEOUT,headers:{"Content-Type":"application/json"}});window.clearAllTokens=()=>{console.log("🧹 Clearing all tokens manually..."),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),sessionStorage.clear(),console.log("✅ All tokens cleared! Redirecting to login..."),window.location.href="/login"};ce.interceptors.request.use(t=>{const e=localStorage.getItem("access_token")||localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ce.interceptors.response.use(t=>t,async t=>{const e=t.config;if(t.response?.status===401&&(t.response?.data?.code==="TOKEN_EXPIRED"||t.response?.data?.message?.includes("token"))&&!e._retry){console.log("🔄 Token expired, attempting refresh..."),e._retry=!0;try{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");const i=await(await fetch(`${Tn.API_BASE_URL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})})).json();if(i.success){const{accessToken:l,refreshToken:c}=i.data;return localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",c),e.headers.Authorization=`Bearer ${l}`,console.log("✅ Token refreshed successfully"),ce(e)}else throw new Error(i.message||"Token refresh failed")}catch(s){return console.error("🚫 Token refresh failed:",s),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}if(t.response?.status===401&&(console.log("🚩 Authentication failed, redirecting to login"),(e.url?.includes("/facebook-")||e.url?.includes("/bm")||e.url?.includes("/ads-manager"))&&sessionStorage.setItem("loginMessage","Please log in again to access the new Facebook and Advertising modules with updated permissions."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")),t.response?.status===403){const s=t.response?.data?.message||"Access denied. You don't have permission to perform this action.";console.error("Permission denied:",s);const n=e.url?.includes("/facebook-")||e.url?.includes("/bm")||e.url?.includes("/ads-manager");if(s.includes("Wrong token type")||s.includes("access token"))console.log("Token type error detected, clearing old tokens"),localStorage.removeItem("access_token"),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(sessionStorage.setItem("loginMessage","Please log in again to get a fresh access token."),window.location.href="/login");else if(n){console.log("🔒 Access denied to new module - may need fresh session");const i="You may need to log out and log in again to access the new Facebook and Advertising modules.";sessionStorage.setItem("permissionMessage",i),t.isNewModulePermissionError=!0,t.newModuleMessage=i}}else if(t.response?.status===404){const s=t.response?.data?.message||"The item you're looking for doesn't exist or may have been removed.";console.error("Resource not found:",s)}else if(t.response?.status>=500){const s=t.response?.data?.message||"We're experiencing technical difficulties. Please try again in a few minutes.";console.error("Server error:",s)}else t.response?.data?.message&&console.error("API Error:",t.response.data.message);if(t.response?.data?.message)t.userMessage=t.response.data.message;else switch(t.response?.status){case 400:t.userMessage="There was an issue with your request. Please check your input and try again.";break;case 403:t.userMessage="Access denied. You don't have permission to perform this action.";break;case 404:t.userMessage="The item you're looking for doesn't exist or may have been removed.";break;case 409:t.userMessage="This action conflicts with existing data. Please try again.";break;case 422:t.userMessage="Some of the information you provided is not valid. Please check and try again.";break;case 429:t.userMessage="You're making too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:t.userMessage="We're experiencing technical difficulties. Please try again in a few minutes.";break;default:t.userMessage="Something went wrong. Please try again later."}return Promise.reject(t)});const F1=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!0),[i,l]=_.useState(null),c=async()=>{try{console.log("🔐 [useUserAccess] Starting to fetch user access..."),n(!0),l(null);const u=await ce.get("/user-access/modules");console.log("🔐 [useUserAccess] API response:",u.data),u.data.success?(console.log("✅ [useUserAccess] User access data received:",u.data.data),e(u.data.data)):(console.log("❌ [useUserAccess] API returned error:",u.data.message),l(u.data.message))}catch(u){console.error("❌ [useUserAccess] Error fetching user access:",u),console.log("❌ [useUserAccess] Error details:",{status:u.response?.status,statusText:u.response?.statusText,data:u.response?.data}),l(u.response?.data?.message||"Failed to fetch user permissions")}finally{console.log("🔐 [useUserAccess] Finished loading, setting loading to false"),n(!1)}};return _.useEffect(()=>{const u=localStorage.getItem("access_token")||localStorage.getItem("authToken");console.log("🔐 [useUserAccess] useEffect triggered. Token:",u?"EXISTS":"NOT FOUND"),u?(console.log("🔐 [useUserAccess] Token found, calling fetchUserAccess..."),c()):(console.log("⚠️ [useUserAccess] No token found, setting loading to false"),n(!1))},[]),{userAccess:t,loading:s,error:i,refetch:c}};var L1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const O1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ke=(t,e)=>{const s=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...h},f)=>_.createElement("svg",{ref:f,...L1,width:i,height:i,stroke:n,strokeWidth:c?Number(l)*24/Number(i):l,className:`lucide lucide-${O1(t)}`,...h},[...e.map(([p,x])=>_.createElement(p,x)),...(Array.isArray(u)?u:[u])||[]]));return s.displayName=`${t}`,s},Ix=ke("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Re=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),pu=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Np=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),nn=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),sn=ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Hr=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),na=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),I1=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),B1=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),z1=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),$1=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Pl=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Kr=ke("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),U1=ke("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),H1=ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Iu=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Bx=ke("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ci=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),di=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Bd=ke("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ws=ke("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),zx=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),zd=ke("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ol=ke("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),_p=ke("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),V1=ke("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),gu=ke("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),W1=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),kp=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Si=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),q1=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Sp=ke("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Is=ke("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Y1=ke("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Ci=ke("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),K1=ke("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Ge=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Vr=ke("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Bu=ke("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),mt=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ra=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ns=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),$x=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),X1=ke("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),dr=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),$d=ke("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]),Ls=ke("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),fl=ke("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),pl=ke("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),es=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Q1=ke("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Xr=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Cp=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ui=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),J1=ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),hi=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rn=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ml=ke("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rt=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jt=({children:t})=>{const[e,s]=_.useState(!0),[n,i]=_.useState(!1),l=ea(),c=mr(),{userAccess:u,loading:h}=F1(),f=wi.useMemo(()=>{try{const S=localStorage.getItem("user");return S?JSON.parse(S):null}catch{return null}},[]),p=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),c("/login")},x={Home:zd,Users:Rn,Key:_p,Tags:$d,Database:U1,CreditCard:Kr,UserCheck:ui,Target:Ls,BarChart3:nn,FileText:ws,Settings:$x,Facebook:Bd,Building2:sn},b=S=>{const P=["Dashboard","User Management","Role Management","Brand Management","Business Manager","Campaign Type","Campaign","Cards","Cards Users","Facebook Accounts","Facebook Pages","Report"],D={"Campaign Types":"Campaign Type",Campaigns:"Campaign","Card Users":"Cards Users",Reports:"Report"},T=L=>{let R=P.indexOf(L);if(R!==-1)return R;const F=D[L];return F&&(R=P.indexOf(F),R!==-1)?R:-1};return S.sort((L,R)=>{const F=T(L.name),U=T(R.name);return F!==-1&&U!==-1?F-U:F!==-1?-1:U!==-1?1:(L.name||"").localeCompare(R.name||"")})};console.log("🔍 Debug - userAccess:",u),console.log("🔍 Debug - userAccess navigation:",u?.navigation),console.log("🔍 Debug - permissionsLoading:",h);const w=u?.navigation?.map(S=>({...S,icon:x[S.icon]||zd}))||[],v=[{name:"Dashboard",href:"/dashboard",icon:zd},{name:"User Management",href:"/user-management",icon:Rn},{name:"Role Management",href:"/role-management",icon:_p},{name:"Brand Management",href:"/brands",icon:$d},{name:"Business Manager",href:"/business-manager",icon:sn},{name:"Campaign Type",href:"/campaign-types",icon:$d},{name:"Campaign",href:"/campaigns",icon:Ls},{name:"Cards",href:"/cards",icon:Kr},{name:"Cards Users",href:"/card-users",icon:ui},{name:"Facebook Accounts",href:"/facebook-accounts",icon:Bd},{name:"Facebook Pages",href:"/facebook-pages",icon:ws},{name:"Report",href:"/reports-table",icon:ws}],j=w.length>0?[...w,...w.find(S=>S.name==="Business Manager")?[]:[{name:"Business Manager",href:"/business-manager",icon:sn}],...w.find(S=>S.name==="Facebook Accounts")?[]:[{name:"Facebook Accounts",href:"/facebook-accounts",icon:Bd}],...w.find(S=>S.name==="Facebook Pages")?[]:[{name:"Facebook Pages",href:"/facebook-pages",icon:ws}]]:v,N=b(j),E=S=>l.pathname===S;return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx("div",{className:`hidden md:flex md:flex-shrink-0 transition-all duration-300 ${e?"md:w-64":"md:w-16"}`,children:a.jsx("div",{className:"flex flex-col w-full",children:a.jsxs("div",{className:"flex flex-col flex-grow bg-sidebar-bg overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsxs("div",{className:`flex items-center ${e?"block":"hidden"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ls,{className:"h-8 w-8 text-primary-500"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h1",{className:"text-xl font-bold text-white",children:"Ads Reporter"})})]}),a.jsx("button",{onClick:()=>s(!e),className:"p-1 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",children:e?a.jsx(B1,{className:"h-5 w-5"}):a.jsx(z1,{className:"h-5 w-5"})})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:N.map(S=>{const P=S.icon;return a.jsxs(op,{to:S.href,className:`sidebar-link ${E(S.href)?"active":""}`,title:e?"":S.name,children:[a.jsx(P,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:S.name})]},S.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:p,className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",title:e?"":"Logout",children:[a.jsx(kp,{className:`h-5 w-5 ${e?"mr-3":"mx-auto"}`}),e&&a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})}),a.jsx("div",{className:`md:hidden ${n?"block":"hidden"}`,children:a.jsxs("div",{className:"fixed inset-0 flex z-40",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>i(!1)}),a.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-sidebar-bg",children:[a.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:a.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>i(!1),children:a.jsx(rt,{className:"h-6 w-6 text-white"})})}),a.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-gray-900",children:[a.jsx(Ls,{className:"h-8 w-8 text-primary-500"}),a.jsx("h1",{className:"ml-3 text-xl font-bold text-white",children:"Ads Reporter"})]}),a.jsxs("nav",{className:"mt-5 flex-1 px-2 space-y-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-1",children:N.map(S=>{const P=S.icon;return a.jsxs(op,{to:S.href,className:`sidebar-link ${E(S.href)?"active":""}`,onClick:()=>i(!1),children:[a.jsx(P,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:S.name})]},S.name)})}),a.jsx("div",{className:"pt-4 border-t border-gray-700",children:a.jsxs("button",{onClick:()=>{i(!1),p()},className:"w-full sidebar-link text-red-300 hover:text-red-100 hover:bg-red-600/20 transition-colors",children:[a.jsx(kp,{className:"h-5 w-5 mr-3"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})]})}),a.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[a.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[a.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>i(!0),children:a.jsx(q1,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.find(S=>S.href===l.pathname)?.name||"Dashboard"})}),a.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:f?.username||"User"}),a.jsx("div",{className:"h-8 w-8 bg-primary-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:(f?.username||"U")[0].toUpperCase()})})]})})]})]}),a.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none bg-gray-50",children:t})]})]})},Nt=({children:t})=>{const{isAuthenticated:e,loading:s}=Lu();return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e()?t:(console.log("🚪 Not authenticated, redirecting to login"),a.jsx(iu,{to:"/login",replace:!0}))},zu=()=>{console.log("🧹 Clearing all authentication tokens..."),["access_token","authToken","auth_token","refresh_token","user"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),console.log("✅ All tokens cleared"),typeof window<"u"&&(window.location.href="/login")},G1=async()=>{const t=localStorage.getItem("access_token")||localStorage.getItem("authToken");if(!t)return console.log("❌ No token found"),!1;try{const e=JSON.parse(atob(t.split(".")[1])),s=Date.now()/1e3;return e.exp&&e.exp<s?(console.log("⏰ Token has expired"),zu(),!1):!0}catch{return console.log("🔍 Could not decode token, assuming valid"),!0}},Z1=t=>{(t.response?.status===401||t.status===401)&&(console.log("🚨 401 Unauthorized - clearing tokens and redirecting"),sessionStorage.setItem("recent_auth_error","true"),zu())};typeof window<"u"&&(window.clearAllTokens=zu,window.checkTokenExpiry=G1);const ej=()=>{const{login:t}=Lu(),[e,s]=_.useState({username:"",password:"",twofa_code:""}),[n,i]=_.useState(!1),[l,c]=_.useState(!1),[u,h]=_.useState(""),[f,p]=_.useState(!1),[x,b]=_.useState(!1),[w,v]=_.useState(""),[j,N]=_.useState("credentials"),[E,S]=_.useState(null),[P,D]=_.useState(""),T=mr();_.useEffect(()=>{const U=sessionStorage.getItem("loginMessage");U&&(D(U),sessionStorage.removeItem("loginMessage"),setTimeout(()=>D(""),5e3))},[]);const L=async U=>{U.preventDefault(),c(!0),h(""),console.log("Login attempt:",{username:e.username,step:j});try{if(j==="credentials"){console.log("Making API call to backend...");try{const H=await fetch(`${Tn.API_BASE_URL}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});console.log("API response status:",H.status),console.log("API response ok:",H.ok);const B=await H.json();console.log("API response data:",B),B.success?B.data.requires_2fa_setup?(b(!0),S(B.data.user.id),v(B.data.qr_code),N("2fa_setup"),console.log("2FA setup required for user:",B.data.user.username)):B.data.requires_2fa?(p(!0),S(B.data.user.id),N("2fa"),console.log("2FA required for user:",B.data.user.username)):(console.log("Login successful, storing token and navigating..."),t(B.data.user,B.data.access_token,B.data.refresh_token),T("/dashboard")):h(B.message||"Invalid username or password")}catch(H){if(console.error("Login API Error:",H),H.response?.status===401)Z1(H),h("Invalid username or password. Please check your credentials and try again.");else if(H.code==="ECONNREFUSED"||!H.response)if(console.warn("API not available, using demo mode"),e.username==="admin"&&e.password==="password"){const B="demo-token-"+Date.now(),Q={id:1,username:e.username,role_id:1,role_name:"admin"};t(Q,B,null),T("/dashboard")}else h("API unavailable. Use demo credentials: admin/password");else h("Failed to connect to server. Please try again or use demo credentials: admin/password")}}else if(j==="2fa")try{console.log("Making 2FA API call with user ID:",E,"token:",e.twofa_code);const B=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:E,token:e.twofa_code})})).json();if(console.log("2FA API response:",B),B.success){const{access_token:Q,refresh_token:ne,user:V}=B.data;t(V,Q,ne),console.log("2FA verification successful, navigating to dashboard"),T("/dashboard")}else{const Q=B.message||"Invalid 2FA code";console.error("2FA verification failed:",Q),h(Q),s({...e,twofa_code:""})}}catch{if(console.warn("API not available, using demo 2FA"),e.twofa_code==="123456"){const B="demo-token-2fa-"+Date.now(),Q={id:1,username:e.username,role_id:1,role_name:"admin",has_2fa:!0};t(Q,B,null),T("/dashboard")}else h("API unavailable. Demo 2FA code: 123456"),s({...e,twofa_code:""})}else if(j==="2fa_setup")try{console.log("Completing 2FA setup with user ID:",E,"token:",e.twofa_code);const B=await(await fetch(`${Tn.API_BASE_URL}/auth/login-2fa`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:E,token:e.twofa_code})})).json();if(console.log("2FA setup completion API response:",B),B.success){const{access_token:Q,refresh_token:ne,user:V}=B.data;t(V,Q,ne),console.log("2FA setup completed successfully, navigating to dashboard"),T("/dashboard")}else{const Q=B.message||"Invalid 2FA code. Please try again.";console.error("2FA setup failed:",Q),h(Q),s({...e,twofa_code:""})}}catch(H){console.error("2FA setup API error:",H),h("Failed to complete 2FA setup. Please try again."),s({...e,twofa_code:""})}}catch(H){console.error("Login error:",H),h("An error occurred. Please try again.")}finally{c(!1)}},R=U=>{const{name:H,value:B}=U.target;s({...e,[H]:B}),h("")},F=()=>{N("credentials"),p(!1),b(!1),v(""),S(null),s({...e,twofa_code:""}),h("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Ls,{className:"h-10 w-10 text-purple-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Welcome Back"}),a.jsx("p",{className:"mt-2 text-sm text-purple-100",children:j==="credentials"?"Sign in to your Ads Reporter account":j==="2fa_setup"?"Set up two-factor authentication":"Enter your 2FA code to complete login"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[P&&a.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg text-sm",children:P}),u&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:u}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[j==="credentials"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:e.username,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:e.password,onChange:R,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:n?a.jsx(ci,{className:"h-5 w-5"}):a.jsx(di,{className:"h-5 w-5"})})]})]})]}):j==="2fa_setup"?a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:a.jsx(dr,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Set up Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),a.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200 inline-block mb-4",children:w?a.jsx("img",{src:w,alt:"2FA QR Code",className:"w-40 h-40 mx-auto"}):a.jsx("div",{className:"w-40 h-40 bg-gray-100 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})})}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"After scanning, enter the 6-digit code from your app to complete setup"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:U=>{const H=U.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:H}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:F,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:a.jsx(X1,{className:"h-8 w-8 text-green-600"})}),a.jsx("p",{className:"text-sm text-gray-600",children:"Please enter the 6-digit code from your authenticator app"})]}),a.jsx("label",{htmlFor:"twofa_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Code"}),a.jsx("input",{id:"twofa_code",name:"twofa_code",type:"text",required:!0,maxLength:"6",value:e.twofa_code,onChange:U=>{const H=U.target.value.replace(/\D/g,"").substring(0,6);s({...e,twofa_code:H}),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000"}),a.jsx("button",{type:"button",onClick:F,className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:"← Back to login"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):j==="credentials"?"Sign In":j==="2fa_setup"?"Complete Setup":"Verify & Continue"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Ads Reporter © 2025 - Secure Login System"})})]})]})})},Ux=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=/^(\d{2})\/(\d{2})\/(\d{4})$/,s=t.match(e);if(s){const[,i,l,c]=s,u=new Date(c,l-1,i);return isNaN(u.getTime())?null:u}const n=new Date(t);return isNaN(n.getTime())?null:n}return null},Fn=t=>{if(!t)return"N/A";try{const e=Ux(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${s}/${n}/${i}`}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}},tj=t=>{if(!t)return"N/A";try{const e=Ux(t);if(!e)return"Invalid Date";const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${s}/${n}/${i} ${l}:${c}`}catch(e){return console.error("Error formatting datetime:",e),"Invalid Date"}},Ep=({closeForm:t,setMessage:e,setError:s,error:n,context:i="performing this action"})=>{console.error(`Access denied while ${i}:`,n),t&&typeof t=="function"&&t();const l=n?.response,c=l?.data;let u="";return l?.status===403?u=c?.message||"Access denied. You do not have permission to perform this action.":l?.status===401?u="Authentication required. Please log in first.":u=c?.message||n?.message||`Access denied while ${i}`,setTimeout(()=>{e&&e({type:"error",content:u,isAccessDenied:!0}),s&&s(u)},100),l?.status===401&&setTimeout(()=>{!localStorage.getItem("authToken")&&!localStorage.getItem("access_token")&&window.location.pathname!=="/login"&&console.log("No valid token found, redirecting to login...")},3e3),{isAccessDenied:!0,status:l?.status,message:u}},Ud=t=>{const e=t?.response?.status;return e===401||e===403},qa=Tn.API_BASE_URL,sj=({isOpen:t,onClose:e,title:s,children:n,size:i="md"})=>{if(!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:`relative bg-white shadow-xl rounded-lg w-full ${l[i]}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6",children:n})]})})},nj=({isOpen:t,onClose:e,user:s,roles:n,onSubmit:i,isLoading:l,accessDeniedMessage:c,modalError:u})=>{const[h,f]=_.useState({username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),[p,x]=_.useState(!1),[b,w]=_.useState({});_.useEffect(()=>{f(s?{username:s.username||"",password:"",confirm_password:"",role_id:s.role_id||"",enable_2fa:s.is_2fa_enabled||!1}:{username:"",password:"",confirm_password:"",role_id:"",enable_2fa:!1}),w({})},[s,t]);const v=j=>{j.preventDefault(),w({});const N={};if(h.username.trim()||(N.username="Username is required"),!s&&!h.password&&(N.password="Password is required"),h.password&&h.password.length<6&&(N.password="Password must be at least 6 characters"),h.password!==h.confirm_password&&(N.confirm_password="Passwords do not match"),h.role_id||(N.role_id="Role is required"),Object.keys(N).length>0){w(N);return}i(h)};return a.jsxs(sj,{isOpen:t,onClose:e,title:s?"Edit User":"Create New User",size:"lg",children:[c&&a.jsx("div",{className:"mb-4 p-4 bg-red-100 border-2 border-red-300 rounded-lg shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Re,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:"text-red-700 font-medium mb-4",children:c}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{type:"button",onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Bx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{type:"button",onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),a.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:[a.jsx(rt,{className:"w-4 h-4 mr-2"}),"Close Form"]})]})]})]})}),u&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Re,{className:"h-5 w-5 mr-3 mt-0.5 text-red-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:u})]})]})}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),a.jsx("input",{type:"text",value:h.username,onChange:j=>f({...h,username:j.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter username"}),b.username&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.username})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:h.role_id,onChange:j=>f({...h,role_id:j.target.value}),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.role_id?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a role"}),n.map(j=>a.jsx("option",{value:j.id,children:j.display_name||j.name},j.id))]}),b.role_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.role_id})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s?"New Password (leave empty to keep current)":"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.password,onChange:j=>f({...h,password:j.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?a.jsx(ci,{className:"h-4 w-4 text-gray-400"}):a.jsx(di,{className:"h-4 w-4 text-gray-400"})})]}),b.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",!s&&"*"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p?"text":"password",value:h.confirm_password,onChange:j=>f({...h,confirm_password:j.target.value}),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.confirm_password?"border-red-500":"border-gray-300"}`,placeholder:"Confirm password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!p),children:p?a.jsx(ci,{className:"h-4 w-4 text-gray-400"}):a.jsx(di,{className:"h-4 w-4 text-gray-400"})})]}),b.confirm_password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirm_password})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"enable_2fa",checked:h.enable_2fa,onChange:j=>f({...h,enable_2fa:j.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"enable_2fa",className:"text-sm font-medium text-gray-900",children:"Enable Two-Factor Authentication (Google Authenticator)"}),a.jsx(dr,{className:"h-4 w-4 text-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Pl,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"w-4 h-4 mr-2"}),s?"Update User":"Create User"]})})]})]})]})},rj=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(""),[h,f]=_.useState([]),[p,x]=_.useState(!1),[b,w]=_.useState(null),[v,j]=_.useState(!1),[N,E]=_.useState({type:"",content:"",isAccessDenied:!1}),[S,P]=_.useState(""),[D,T]=_.useState(""),L=()=>{const B=localStorage.getItem(Tn.TOKEN_KEY)||null;return B?{Authorization:`Bearer ${B}`}:{}},R=async()=>{try{l(!0);const B=L();console.log("🚀 Making API request to:",`${qa}/user-management`),console.log("📜 Headers:",B);const Q=await fetch(`${qa}/user-management`,{headers:B});if(console.log("📊 Response status:",Q.status),!Q.ok)throw(Q.status===403||Q.status===401)&&Ep({closeForm:()=>{x(!1),w(null)},setMessage:E,error:{response:Q},context:"loading users"}),new Error(`HTTP error! status: ${Q.status}`);const ne=await Q.json();ne.success&&(e(ne.data.users||[]),n(ne.data.roles||[]),f(ne.data.users||[]))}catch(B){console.error("Error fetching users:",B),E({type:"error",content:"Failed to load users"})}finally{l(!1)}},F=async B=>{try{j(!0);const ne=await(await fetch(`${qa}/user-management`,{method:"POST",headers:{"Content-Type":"application/json",...L()},body:JSON.stringify(B)})).json();if(ne.success){let V="User created successfully!";B.enable_2fa&&(V+=" 2FA has been enabled and the secret has been generated automatically. The user will configure their authenticator app during first login."),E({type:"success",content:V}),x(!1),await R()}else E({type:"error",content:ne.message||"Failed to create user"})}catch(Q){console.error("Error creating user:",Q);const ne=Q&&Q.response?{status:Q.response.status,message:Q.response.data?.message||Q.message}:{status:void 0,message:Q?.message};ne.status===403?P(ne.message||"Access denied. You do not have permission to create users."):ne.status===401?P("Authentication required. Please log in first."):Ud(Q)?P(ne.message||"Access denied while creating user"):E({type:"error",content:ne.message||"Failed to create user"})}finally{j(!1)}},U=async B=>{try{j(!0),T("");const ne=await(await fetch(`${qa}/user-management/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...L()},body:JSON.stringify(B)})).json();ne.success?(E({type:"success",content:"User updated successfully!"}),x(!1),w(null),T(""),await R()):T(ne.message||"Failed to update user")}catch(Q){console.error("Error updating user:",Q);const ne=Q&&Q.response?{status:Q.response.status,message:Q.response.data?.message||Q.message}:{status:void 0,message:Q?.message};ne.status===403?P(ne.message||"Access denied. You do not have permission to update users."):ne.status===401?P("Authentication required. Please log in first."):Ud(Q)?P(ne.message||"Access denied while updating user"):T(ne.message||"Failed to update user")}finally{j(!1)}},H=async B=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const ne=await(await fetch(`${qa}/user-management/${B}`,{method:"DELETE",headers:L()})).json();ne.success?(E({type:"success",content:"User deleted successfully!"}),await R()):E({type:"error",content:ne.message||"Failed to delete user"})}catch(Q){console.error("Error deleting user:",Q),Ud(Q)?Ep({closeForm:()=>{w(null)},setMessage:E,error:Q,context:"deleting user"}):E({type:"error",content:"Failed to delete user"})}};return _.useEffect(()=>{try{if(!Array.isArray(t)){f([]);return}const B=t.filter(Q=>{if(!Q)return!1;const ne=Q.username||"",V=Q.role_name||"",re=c.toLowerCase();return ne.toLowerCase().includes(re)||V.toLowerCase().includes(re)});f(B)}catch(B){console.error("Error filtering users:",B),f([])}},[c,t]),_.useEffect(()=>{R()},[]),_.useEffect(()=>{let B;return N.content&&!N.isAccessDenied&&(B=setTimeout(()=>{E({type:"",content:"",isAccessDenied:!1})},5e3)),()=>{B&&clearTimeout(B)}},[N]),i?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Pl,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(Rn,{className:"h-7 w-7 mr-3 text-blue-600"}),"User Management"]}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Manage users and their authentication settings"})]}),a.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Create User"]})]})}),N.content&&a.jsx("div",{className:`mb-4 p-4 rounded-lg ${N.isAccessDenied?"bg-red-100 border-2 border-red-300 shadow-2xl animate-pulse":N.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:N.type==="success"?a.jsx(na,{className:"h-5 w-5 mr-3 mt-0.5 text-green-500"}):a.jsx(Re,{className:`h-5 w-5 mr-3 mt-0.5 ${N.isAccessDenied?"text-red-600":"text-red-500"}`})}),a.jsxs("div",{className:"flex-1",children:[N.isAccessDenied&&a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("div",{className:`${N.isAccessDenied?"text-red-700 font-medium":""}`,children:N.content}),N.isAccessDenied&&a.jsxs("div",{className:"mt-4 flex space-x-3",children:[a.jsxs("button",{onClick:()=>window.location.href="/login",className:"inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:[a.jsx(Bx,{className:"w-4 h-4 mr-2"}),"Go to Login"]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{onClick:()=>E({type:"",content:"",isAccessDenied:!1}),className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Dismiss message",children:a.jsx(rt,{className:"h-4 w-4"})})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:B=>u(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2FA"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(B=>!B||!B.id||!B.username?null:a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:B.username?B.username[0].toUpperCase():"?"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.username||"Unknown"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",B.id||"N/A"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:B.role_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.is_active?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.is_2fa_enabled?a.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[a.jsx(dr,{className:"w-3 h-3 mr-1"}),"Enabled"]}):a.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B.last_login?Fn(B.last_login):"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Fn(B.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{w(B),x(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit User",children:a.jsx(Is,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>H(B.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:a.jsx(es,{className:"h-4 w-4"})})]})})]},B.id))})]}),h.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Rn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No users found":"No users yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search terms":"Get started by creating your first user"}),!c&&a.jsxs("button",{onClick:()=>{w(null),x(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),a.jsx(nj,{isOpen:p,onClose:()=>{x(!1),w(null),P(""),T("")},user:b,roles:s,onSubmit:b?U:F,isLoading:v,accessDeniedMessage:S,modalError:D})]})};let aj={data:""},ij=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||aj,oj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lj=/\/\*[^]*?\*\/|  +/g,Ap=/\n+/g,Cn=(t,e)=>{let s="",n="",i="";for(let l in t){let c=t[l];l[0]=="@"?l[1]=="i"?s=l+" "+c+";":n+=l[1]=="f"?Cn(c,l):l+"{"+Cn(c,l[1]=="k"?"":e)+"}":typeof c=="object"?n+=Cn(c,e?e.replace(/([^,])+/g,u=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Cn.p?Cn.p(l,c):l+":"+c+";")}return s+(e&&i?e+"{"+i+"}":i)+n},Ks={},Hx=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Hx(t[s]);return e}return t},cj=(t,e,s,n,i)=>{let l=Hx(t),c=Ks[l]||(Ks[l]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(l));if(!Ks[c]){let h=l!==t?t:(f=>{let p,x,b=[{}];for(;p=oj.exec(f.replace(lj,""));)p[4]?b.shift():p[3]?(x=p[3].replace(Ap," ").trim(),b.unshift(b[0][x]=b[0][x]||{})):b[0][p[1]]=p[2].replace(Ap," ").trim();return b[0]})(t);Ks[c]=Cn(i?{["@keyframes "+c]:h}:h,s?"":"."+c)}let u=s&&Ks.g?Ks.g:null;return s&&(Ks.g=Ks[c]),((h,f,p,x)=>{x?f.data=f.data.replace(x,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(Ks[c],e,n,u),c},dj=(t,e,s)=>t.reduce((n,i,l)=>{let c=e[l];if(c&&c.call){let u=c(s),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;c=h?"."+h:u&&typeof u=="object"?u.props?"":Cn(u,""):u===!1?"":u}return n+i+(c??"")},"");function Tl(t){let e=this||{},s=t.call?t(e.p):t;return cj(s.unshift?s.raw?dj(s,[].slice.call(arguments,1),e.p):s.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):s,ij(e.target),e.g,e.o,e.k)}let Vx,xu,yu;Tl.bind({g:1});let rn=Tl.bind({k:1});function uj(t,e,s,n){Cn.p=e,Vx=t,xu=s,yu=n}function In(t,e){let s=this||{};return function(){let n=arguments;function i(l,c){let u=Object.assign({},l),h=u.className||i.className;s.p=Object.assign({theme:xu&&xu()},u),s.o=/ *go\d+/.test(h),u.className=Tl.apply(s,n)+(h?" "+h:"");let f=t;return t[0]&&(f=u.as||t,delete u.as),yu&&f[0]&&yu(u),Vx(f,u)}return i}}var hj=t=>typeof t=="function",bu=(t,e)=>hj(t)?t(e):t,mj=(()=>{let t=0;return()=>(++t).toString()})(),fj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),pj=20,Wx="default",qx=(t,e)=>{let{toastLimit:s}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,s)};case 1:return{...t,toasts:t.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:n}=e;return qx(t,{type:t.toasts.find(c=>c.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},gj=[],xj={toasts:[],pausedAt:void 0,settings:{toastLimit:pj}},Wr={},Yx=(t,e=Wx)=>{Wr[e]=qx(Wr[e]||xj,t),gj.forEach(([s,n])=>{s===e&&n(Wr[e])})},Kx=t=>Object.keys(Wr).forEach(e=>Yx(t,e)),yj=t=>Object.keys(Wr).find(e=>Wr[e].toasts.some(s=>s.id===t)),$u=(t=Wx)=>e=>{Yx(e,t)},bj=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||mj()}),Ei=t=>(e,s)=>{let n=bj(e,t,s);return $u(n.toasterId||yj(n.id))({type:2,toast:n}),n.id},fe=(t,e)=>Ei("blank")(t,e);fe.error=Ei("error");fe.success=Ei("success");fe.loading=Ei("loading");fe.custom=Ei("custom");fe.dismiss=(t,e)=>{let s={type:3,toastId:t};e?$u(e)(s):Kx(s)};fe.dismissAll=t=>fe.dismiss(void 0,t);fe.remove=(t,e)=>{let s={type:4,toastId:t};e?$u(e)(s):Kx(s)};fe.removeAll=t=>fe.remove(void 0,t);fe.promise=(t,e,s)=>{let n=fe.loading(e.loading,{...s,...s?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let l=e.success?bu(e.success,i):void 0;return l?fe.success(l,{id:n,...s,...s?.success}):fe.dismiss(n),i}).catch(i=>{let l=e.error?bu(e.error,i):void 0;l?fe.error(l,{id:n,...s,...s?.error}):fe.dismiss(n)}),t};var vj=rn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wj=rn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jj=rn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Nj=In("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${jj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_j=rn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kj=In("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${_j} 1s linear infinite;
`,Sj=rn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Cj=rn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ej=In("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Cj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Aj=In("div")`
  position: absolute;
`,Pj=In("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Mj=rn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tj=In("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Mj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Dj=({toast:t})=>{let{icon:e,type:s,iconTheme:n}=t;return e!==void 0?typeof e=="string"?_.createElement(Tj,null,e):e:s==="blank"?null:_.createElement(Pj,null,_.createElement(kj,{...n}),s!=="loading"&&_.createElement(Aj,null,s==="error"?_.createElement(Nj,{...n}):_.createElement(Ej,{...n})))},Rj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fj=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Lj="0%{opacity:0;} 100%{opacity:1;}",Oj="0%{opacity:1;} 100%{opacity:0;}",Ij=In("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Bj=In("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,zj=(t,e)=>{let s=t.includes("top")?1:-1,[n,i]=fj()?[Lj,Oj]:[Rj(s),Fj(s)];return{animation:e?`${rn(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};_.memo(({toast:t,position:e,style:s,children:n})=>{let i=t.height?zj(t.position||e||"top-center",t.visible):{opacity:0},l=_.createElement(Dj,{toast:t}),c=_.createElement(Bj,{...t.ariaProps},bu(t.message,t));return _.createElement(Ij,{className:t.className,style:{...i,...s,...t.style}},typeof n=="function"?n({icon:l,message:c}):_.createElement(_.Fragment,null,l,c))});uj(_.createElement);Tl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var $j=fe;const Uj={getDashboardOverview:async()=>{try{return(await ce.get("/analytics/dashboard")).data}catch(t){throw console.error("Error fetching dashboard overview:",t),t}},getTrendsData:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date,{period:i="30d"}=t;switch(i){case"7d":n.setDate(s.getDate()-7);break;case"90d":n.setDate(s.getDate()-90);break;case"1y":n.setFullYear(s.getFullYear()-1);break;default:n.setDate(s.getDate()-30)}return e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),e.append("group_by","day"),(await ce.get(`/analytics/charts/time-series?${e.toString()}`)).data}catch(e){throw console.error("Error fetching trends data:",e),e}},getCampaignPerformance:async(t={})=>{try{const e=new URLSearchParams,{limit:s=10,sortBy:n="leads",...i}=t,l=new Date,c=new Date;return c.setDate(l.getDate()-30),e.append("date_from",c.toISOString().split("T")[0]),e.append("date_to",l.toISOString().split("T")[0]),e.append("limit",s),Object.entries(i).forEach(([h,f])=>{f!=null&&f!==""&&e.append(h,f)}),(await ce.get(`/analytics/charts/campaign-performance?${e.toString()}`)).data}catch(e){throw console.error("Error fetching campaign performance:",e),e}},getBrandPerformance:async(t={})=>{try{const e=new URLSearchParams,s=new Date,n=new Date;return n.setDate(s.getDate()-30),e.append("date_from",n.toISOString().split("T")[0]),e.append("date_to",s.toISOString().split("T")[0]),Object.entries(t).forEach(([l,c])=>{c!=null&&c!==""&&e.append(l,c)}),(await ce.get(`/analytics/charts/brand-analysis?${e.toString()}`)).data}catch(e){throw console.error("Error fetching brand performance:",e),e}},getRecentActivities:async(t={})=>(console.log("[Dashboard] Using mock activities data - activities endpoint not implemented yet"),{success:!0,data:{activities:[{id:1,type:"report_generated",title:"Campaign report generated",description:"Monthly report for active campaigns",timestamp:new Date(Date.now()-7200*1e3).toISOString(),user:"System",icon:"FileText"},{id:2,type:"campaign_created",title:"New campaign created",description:"Facebook Ads Campaign launched",timestamp:new Date(Date.now()-300*60*1e3).toISOString(),user:"Admin",icon:"Target"},{id:3,type:"user_login",title:"User login",description:"Dashboard access by user",timestamp:new Date(Date.now()-3600*1e3).toISOString(),user:"User",icon:"Users"},{id:4,type:"data_refresh",title:"Data synchronized",description:"Campaign data updated from sources",timestamp:new Date(Date.now()-1800*1e3).toISOString(),user:"System",icon:"RefreshCw"},{id:5,type:"analytics_view",title:"Analytics viewed",description:"Performance metrics accessed",timestamp:new Date(Date.now()-600*1e3).toISOString(),user:"User",icon:"BarChart3"}]}}),getSystemMetrics:async()=>{try{return(await ce.get("/analytics/system")).data}catch(t){return console.error("Error fetching system metrics:",t),{success:!0,data:{system:{totalUsers:12,activeCampaigns:8,totalReports:156,systemUptime:"15 days",lastBackup:new Date(Date.now()-1440*60*1e3).toISOString()}}}}},exportDashboardData:async(t={})=>{try{const e=new URLSearchParams,{format:s="json",sections:n=["overview","campaigns","brands"],...i}=t;return e.append("format",s),n.forEach(c=>e.append("sections",c)),Object.entries(i).forEach(([c,u])=>{u!=null&&u!==""&&e.append(c,u)}),(await ce.get(`/analytics/export?${e.toString()}`)).data}catch(e){throw console.error("Error exporting dashboard data:",e),e}}},Bo=({title:t,value:e,previousValue:s,icon:n,color:i="bg-blue-500",format:l="number",precision:c=0,showTrend:u=!0,loading:h=!1,error:f=null,onClick:p=null,className:x=""})=>{const b=(N,E=l)=>{if(N==null||isNaN(N))return"—";const S=Number(N);switch(E){case"currency":return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:c,maximumFractionDigits:c}).format(S);case"percentage":return`${S.toFixed(c)}%`;case"compact":return S>=1e6?`${(S/1e6).toFixed(1)}M`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toFixed(c);case"decimal":return S.toFixed(c);default:return new Intl.NumberFormat("en-US",{minimumFractionDigits:c,maximumFractionDigits:c}).format(S)}},v=(()=>{if(!u||!s||s===0||isNaN(e)||isNaN(s))return{percentage:0,direction:"neutral",icon:Sp};const N=Number(e),E=Number(s),S=(N-E)/E*100;return S>0?{percentage:S,direction:"up",icon:Xr}:S<0?{percentage:Math.abs(S),direction:"down",icon:Q1}:{percentage:0,direction:"neutral",icon:Sp}})(),j=v.icon;return h?a.jsxs("div",{className:`card animate-pulse ${x}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),a.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-20 mb-2"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]}):f?a.jsxs("div",{className:`card border-red-200 bg-red-50 ${x}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",children:t}),a.jsx("div",{className:"flex-shrink-0 p-2 rounded-md bg-red-100",children:a.jsx(ci,{className:"h-4 w-4 text-red-600"})})]}),a.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load"}),a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Click to retry"})]}):a.jsxs("div",{className:`card transition-all duration-200 hover:shadow-lg ${p?"cursor-pointer hover:bg-gray-50":""} ${x}`,onClick:p,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 truncate",title:t,children:t}),a.jsx("div",{className:`flex-shrink-0 ${i} rounded-md p-2`,children:a.jsx(n,{className:"h-4 w-4 text-white"})})]}),a.jsx("div",{className:"mb-2",children:a.jsx("p",{className:"text-2xl font-bold text-gray-900",title:`${t}: ${b(e)}`,children:b(e)})}),u&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:`flex items-center space-x-1 ${v.direction==="up"?"text-green-600":v.direction==="down"?"text-red-600":"text-gray-500"}`,children:[a.jsx(j,{className:"h-3 w-3"}),a.jsx("span",{className:"text-xs font-medium",children:v.percentage>0?`${v.percentage.toFixed(1)}%`:"0%"})]}),a.jsx("span",{className:"text-xs text-gray-500",children:"vs previous"})]})]})},Rs=({width:t="w-full",height:e="h-4",className:s=""})=>a.jsx("div",{className:`${t} ${e} bg-gray-200 rounded animate-pulse ${s}`}),Uu=({height:t="h-64"})=>a.jsxs("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"mb-4",children:a.jsx(Rs,{width:"w-48",height:"h-6"})}),a.jsx(Rs,{width:"w-full",height:t}),a.jsxs("div",{className:"flex justify-center mt-4 space-x-4",children:[a.jsx(Rs,{width:"w-16",height:"h-3"}),a.jsx(Rs,{width:"w-20",height:"h-3"}),a.jsx(Rs,{width:"w-18",height:"h-3"})]})]}),Hj=()=>a.jsxs("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"mb-4",children:a.jsx(Rs,{width:"w-40",height:"h-6"})}),a.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Rs,{width:"w-10",height:"h-10",className:"rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(Rs,{width:"w-3/4",height:"h-4"}),a.jsx(Rs,{width:"w-1/2",height:"h-3"}),a.jsx(Rs,{width:"w-20",height:"h-3"})]})]},t))})]}),Pp=({activities:t=[],loading:e=!1,title:s="Recent Activity",className:n="",compact:i=!1,maxVisible:l=5})=>{const c=w=>({report_generated:ws,campaign_created:Ls,campaign_updated:Ls,user_registered:J1,user_login:Rn,analytics_view:nn,data_export:Iu,system_update:$x,performance_alert:Re,milestone_reached:na,data_refresh:mt,trend_detected:Xr})[w]||ws,u=w=>({report_generated:"text-blue-600 bg-blue-100",campaign_created:"text-green-600 bg-green-100",campaign_updated:"text-yellow-600 bg-yellow-100",user_registered:"text-purple-600 bg-purple-100",user_login:"text-gray-600 bg-gray-100",analytics_view:"text-indigo-600 bg-indigo-100",data_export:"text-orange-600 bg-orange-100",system_update:"text-cyan-600 bg-cyan-100",performance_alert:"text-red-600 bg-red-100",milestone_reached:"text-emerald-600 bg-emerald-100",data_refresh:"text-teal-600 bg-teal-100",trend_detected:"text-pink-600 bg-pink-100"})[w]||"text-gray-600 bg-gray-100",h=w=>{if(!w)return"Unknown time";try{const v=new Date(w),j=new Date,N=j-v,E=Math.floor(N/6e4),S=Math.floor(E/60),P=Math.floor(S/24);return E<1?"Just now":E<60?`${E} minute${E===1?"":"s"} ago`:S<24?`${S} hour${S===1?"":"s"} ago`:P<7?`${P} day${P===1?"":"s"} ago`:v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:v.getFullYear()!==j.getFullYear()?"numeric":void 0})}catch{return"Invalid date"}},[f,p]=_.useState(!1);if(e)return a.jsx(Hj,{});const x=i&&!f?t.slice(0,l):t,b=t.length>l;return a.jsxs("div",{className:`card ${n}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:`font-medium text-gray-900 ${i?"text-sm":"text-lg"}`,children:s}),t&&t.length>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[t.length," activities"]})]}),a.jsx("div",{className:`space-y-${i?"1":"3"}`,children:!t||t.length===0?a.jsxs("div",{className:`text-center ${i?"py-3":"py-8"}`,children:[a.jsx("div",{className:"text-gray-400 mb-2",children:a.jsx(nn,{className:`${i?"h-6 w-6":"h-12 w-12"} mx-auto`})}),a.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activities"}),!i&&a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Activities will appear here as they happen"})]}):x.map(w=>{const v=c(w.type),j=u(w.type);return a.jsxs("div",{className:`flex items-${i?"center":"start"} space-x-${i?"2":"3"} ${i?"py-1.5 px-1.5":"py-3 px-2"} hover:bg-gray-50 rounded-lg -mx-${i?"1.5":"2"} transition-colors duration-150`,children:[a.jsx("div",{className:`flex-shrink-0 ${i?"w-5 h-5":"w-8 h-8"} rounded-full flex items-center justify-center ${j}`,children:a.jsx(v,{className:`${i?"h-2.5 w-2.5":"h-4 w-4"}`})}),a.jsx("div",{className:"flex-1 min-w-0",children:i?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-2",children:a.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:w.title||"System Activity"})}),a.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1.5 text-xs text-gray-500",children:[a.jsx("span",{children:h(w.timestamp)}),w.status&&a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${w.status==="success"?"bg-green-500":w.status==="warning"?"bg-yellow-500":w.status==="error"?"bg-red-500":"bg-gray-400"}`})]})]}):a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:w.title||"System Activity"}),w.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:w.description}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[a.jsx("span",{children:h(w.timestamp)}),w.user&&w.user!=="System"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:["by ",w.user]})]})]})]}),w.status&&a.jsx("div",{className:`flex-shrink-0 ml-2 px-2 py-1 rounded-full text-xs font-medium ${w.status==="success"?"bg-green-100 text-green-800":w.status==="warning"?"bg-yellow-100 text-yellow-800":w.status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status})]})})]},w.id)})}),i&&b&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsxs("button",{onClick:()=>p(!f),className:"flex items-center justify-center w-full text-xs text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150 py-1",children:[a.jsx("span",{className:"mr-1",children:f?"Show Less":`+${t.length-l} More`}),f?a.jsx($1,{className:"h-2.5 w-2.5"}):a.jsx(I1,{className:"h-2.5 w-2.5"})]})}),!i&&t&&t.length>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsx("button",{className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-150",onClick:()=>{console.log("Navigate to full activity log")},children:"View all activities →"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ai(t){return t+.5|0}const An=(t,e,s)=>Math.max(Math.min(t,s),e);function Za(t){return An(Ai(t*2.55),0,255)}function Dn(t){return An(Ai(t*255),0,255)}function Gs(t){return An(Ai(t/2.55)/100,0,1)}function Mp(t){return An(Ai(t*100),0,100)}const cs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vu=[..."0123456789ABCDEF"],Vj=t=>vu[t&15],Wj=t=>vu[(t&240)>>4]+vu[t&15],zo=t=>(t&240)>>4===(t&15),qj=t=>zo(t.r)&&zo(t.g)&&zo(t.b)&&zo(t.a);function Yj(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&cs[t[1]]*17,g:255&cs[t[2]]*17,b:255&cs[t[3]]*17,a:e===5?cs[t[4]]*17:255}:(e===7||e===9)&&(s={r:cs[t[1]]<<4|cs[t[2]],g:cs[t[3]]<<4|cs[t[4]],b:cs[t[5]]<<4|cs[t[6]],a:e===9?cs[t[7]]<<4|cs[t[8]]:255})),s}const Kj=(t,e)=>t<255?e(t):"";function Xj(t){var e=qj(t)?Vj:Wj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Kj(t.a,e):void 0}const Qj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xx(t,e,s){const n=e*Math.min(s,1-s),i=(l,c=(l+t/30)%12)=>s-n*Math.max(Math.min(c-3,9-c,1),-1);return[i(0),i(8),i(4)]}function Jj(t,e,s){const n=(i,l=(i+t/60)%6)=>s-s*e*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function Gj(t,e,s){const n=Xx(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function Zj(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function Hu(t){const s=t.r/255,n=t.g/255,i=t.b/255,l=Math.max(s,n,i),c=Math.min(s,n,i),u=(l+c)/2;let h,f,p;return l!==c&&(p=l-c,f=u>.5?p/(2-l-c):p/(l+c),h=Zj(s,n,i,p,l),h=h*60+.5),[h|0,f||0,u]}function Vu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Dn)}function Wu(t,e,s){return Vu(Xx,t,e,s)}function eN(t,e,s){return Vu(Gj,t,e,s)}function tN(t,e,s){return Vu(Jj,t,e,s)}function Qx(t){return(t%360+360)%360}function sN(t){const e=Qj.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Za(+e[5]):Dn(+e[5]));const i=Qx(+e[2]),l=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=eN(i,l,c):e[1]==="hsv"?n=tN(i,l,c):n=Wu(i,l,c),{r:n[0],g:n[1],b:n[2],a:s}}function nN(t,e){var s=Hu(t);s[0]=Qx(s[0]+e),s=Wu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function rN(t){if(!t)return;const e=Hu(t),s=e[0],n=Mp(e[1]),i=Mp(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${Gs(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Tp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Dp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function aN(){const t={},e=Object.keys(Dp),s=Object.keys(Tp);let n,i,l,c,u;for(n=0;n<e.length;n++){for(c=u=e[n],i=0;i<s.length;i++)l=s[i],u=u.replace(l,Tp[l]);l=parseInt(Dp[c],16),t[u]=[l>>16&255,l>>8&255,l&255]}return t}let $o;function iN(t){$o||($o=aN(),$o.transparent=[0,0,0,0]);const e=$o[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lN(t){const e=oN.exec(t);let s=255,n,i,l;if(e){if(e[7]!==n){const c=+e[7];s=e[8]?Za(c):An(c*255,0,255)}return n=+e[1],i=+e[3],l=+e[5],n=255&(e[2]?Za(n):An(n,0,255)),i=255&(e[4]?Za(i):An(i,0,255)),l=255&(e[6]?Za(l):An(l,0,255)),{r:n,g:i,b:l,a:s}}}function cN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Hd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function dN(t,e,s){const n=zr(Gs(t.r)),i=zr(Gs(t.g)),l=zr(Gs(t.b));return{r:Dn(Hd(n+s*(zr(Gs(e.r))-n))),g:Dn(Hd(i+s*(zr(Gs(e.g))-i))),b:Dn(Hd(l+s*(zr(Gs(e.b))-l))),a:t.a+s*(e.a-t.a)}}function Uo(t,e,s){if(t){let n=Hu(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Wu(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Jx(t,e){return t&&Object.assign(e||{},t)}function Rp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Dn(t[3]))):(e=Jx(t,{r:0,g:0,b:0,a:1}),e.a=Dn(e.a)),e}function uN(t){return t.charAt(0)==="r"?lN(t):sN(t)}class mi{constructor(e){if(e instanceof mi)return e;const s=typeof e;let n;s==="object"?n=Rp(e):s==="string"&&(n=Yj(e)||iN(e)||uN(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Jx(this._rgb);return e&&(e.a=Gs(e.a)),e}set rgb(e){this._rgb=Rp(e)}rgbString(){return this._valid?cN(this._rgb):void 0}hexString(){return this._valid?Xj(this._rgb):void 0}hslString(){return this._valid?rN(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let l;const c=s===l?.5:s,u=2*c-1,h=n.a-i.a,f=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;l=1-f,n.r=255&f*n.r+l*i.r+.5,n.g=255&f*n.g+l*i.g+.5,n.b=255&f*n.b+l*i.b+.5,n.a=c*n.a+(1-c)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=dN(this._rgb,e._rgb,s)),this}clone(){return new mi(this.rgb)}alpha(e){return this._rgb.a=Dn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Ai(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uo(this._rgb,2,e),this}darken(e){return Uo(this._rgb,2,-e),this}saturate(e){return Uo(this._rgb,1,e),this}desaturate(e){return Uo(this._rgb,1,-e),this}rotate(e){return nN(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xs(){}const hN=(()=>{let t=0;return()=>t++})();function He(t){return t==null}function ht(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Rt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ms(t,e){return Rt(t)?t:e}function Te(t,e){return typeof t>"u"?e:t}const mN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Gx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Je(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function We(t,e,s,n){let i,l,c;if(ht(t))for(l=t.length,i=0;i<l;i++)e.call(s,t[i],i);else if(Oe(t))for(c=Object.keys(t),l=c.length,i=0;i<l;i++)e.call(s,t[c[i]],c[i])}function gl(t,e){let s,n,i,l;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],l=e[s],i.datasetIndex!==l.datasetIndex||i.index!==l.index)return!1;return!0}function xl(t){if(ht(t))return t.map(xl);if(Oe(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=xl(t[s[i]]);return e}return t}function Zx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function fN(t,e,s,n){if(!Zx(t))return;const i=e[t],l=s[t];Oe(i)&&Oe(l)?fi(i,l,n):e[t]=xl(l)}function fi(t,e,s){const n=ht(e)?e:[e],i=n.length;if(!Oe(t))return t;s=s||{};const l=s.merger||fN;let c;for(let u=0;u<i;++u){if(c=n[u],!Oe(c))continue;const h=Object.keys(c);for(let f=0,p=h.length;f<p;++f)l(h[f],t,c,s)}return t}function si(t,e){return fi(t,e,{merger:pN})}function pN(t,e,s){if(!Zx(t))return;const n=e[t],i=s[t];Oe(n)&&Oe(i)?si(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=xl(i))}const Fp={"":t=>t,x:t=>t.x,y:t=>t.y};function gN(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function xN(t){const e=gN(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function ur(t,e){return(Fp[e]||(Fp[e]=xN(e)))(t)}function qu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const pi=t=>typeof t<"u",Ln=t=>typeof t=="function",Lp=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function yN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const qe=Math.PI,st=2*qe,bN=st+qe,yl=Number.POSITIVE_INFINITY,vN=qe/180,xt=qe/2,Gn=qe/4,Op=qe*2/3,e0=Math.log10,Os=Math.sign;function ni(t,e,s){return Math.abs(t-e)<s}function Ip(t){const e=Math.round(t);t=ni(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(e0(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function wN(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,l)=>i-l).pop(),e}function jN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function gi(t){return!jN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function NN(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function _N(t,e,s){let n,i,l;for(n=0,i=t.length;n<i;n++)l=t[n][s],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function Zs(t){return t*(qe/180)}function kN(t){return t*(180/qe)}function Bp(t){if(!Rt(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function t0(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let l=Math.atan2(n,s);return l<-.5*qe&&(l+=st),{angle:l,distance:i}}function wu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function SN(t,e){return(t-e+bN)%st-qe}function Zt(t){return(t%st+st)%st}function xi(t,e,s,n){const i=Zt(t),l=Zt(e),c=Zt(s),u=Zt(l-i),h=Zt(c-i),f=Zt(i-l),p=Zt(i-c);return i===l||i===c||n&&l===c||u>h&&f<p}function Tt(t,e,s){return Math.max(e,Math.min(s,t))}function CN(t){return Tt(t,-32768,32767)}function en(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Yu(t,e,s){s=s||(c=>t[c]<e);let n=t.length-1,i=0,l;for(;n-i>1;)l=i+n>>1,s(l)?i=l:n=l;return{lo:i,hi:n}}const ar=(t,e,s,n)=>Yu(t,s,n?i=>{const l=t[i][e];return l<s||l===s&&t[i+1][e]===s}:i=>t[i][e]<s),EN=(t,e,s)=>Yu(t,s,n=>t[n][e]>=s);function AN(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const s0=["push","pop","shift","splice","unshift"];function PN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),s0.forEach(s=>{const n="_onData"+qu(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...l){const c=i.apply(this,l);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...l)}),c}})})}function zp(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(s0.forEach(l=>{delete t[l]}),delete t._chartjs)}function n0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const r0=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function a0(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,r0.call(window,()=>{n=!1,t.apply(e,s)}))}}function MN(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Ku=t=>t==="start"?"left":t==="end"?"right":"center",Pt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,TN=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function DN(t,e,s){const n=e.length;let i=0,l=n;if(t._sorted){const{iScale:c,vScale:u,_parsed:h}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=c.axis,{min:x,max:b,minDefined:w,maxDefined:v}=c.getUserBounds();if(w){if(i=Math.min(ar(h,p,x).lo,s?n:ar(e,p,c.getPixelForValue(x)).lo),f){const j=h.slice(0,i+1).reverse().findIndex(N=>!He(N[u.axis]));i-=Math.max(0,j)}i=Tt(i,0,n-1)}if(v){let j=Math.max(ar(h,c.axis,b,!0).hi+1,s?0:ar(e,p,c.getPixelForValue(b),!0).hi+1);if(f){const N=h.slice(j-1).findIndex(E=>!He(E[u.axis]));j+=Math.max(0,N)}l=Tt(j,i,n)-i}else l=n-i}return{start:i,count:l}}function RN(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const l=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),l}const Ho=t=>t===0||t===1,$p=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*st/s)),Up=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*st/s)+1,ri={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*xt)+1,easeOutSine:t=>Math.sin(t*xt),easeInOutSine:t=>-.5*(Math.cos(qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ho(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ho(t)?t:$p(t,.075,.3),easeOutElastic:t=>Ho(t)?t:Up(t,.075,.3),easeInOutElastic(t){return Ho(t)?t:t<.5?.5*$p(t*2,.1125,.45):.5+.5*Up(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ri.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ri.easeInBounce(t*2)*.5:ri.easeOutBounce(t*2-1)*.5+.5};function Xu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Hp(t){return Xu(t)?t:new mi(t)}function Vd(t){return Xu(t)?t:new mi(t).saturate(.5).darken(.1).hexString()}const FN=["x","y","borderWidth","radius","tension"],LN=["color","borderColor","backgroundColor"];function ON(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:LN},numbers:{type:"number",properties:FN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function IN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Vp=new Map;function BN(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Vp.get(s);return n||(n=new Intl.NumberFormat(t,e),Vp.set(s,n)),n}function Qu(t,e,s){return BN(e,s).format(t)}const zN={values(t){return ht(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,l=t;if(s.length>1){const f=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),l=$N(t,s)}const c=e0(Math.abs(l)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Qu(t,n,h)}};function $N(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var i0={formatters:zN};function UN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:i0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const hr=Object.create(null),ju=Object.create(null);function ai(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const l=s[n];t=t[l]||(t[l]=Object.create(null))}return t}function Wd(t,e,s){return typeof e=="string"?fi(ai(t,e),s):fi(ai(t,""),e)}class HN{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Vd(i.backgroundColor),this.hoverBorderColor=(n,i)=>Vd(i.borderColor),this.hoverColor=(n,i)=>Vd(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Wd(this,e,s)}get(e){return ai(this,e)}describe(e,s){return Wd(ju,e,s)}override(e,s){return Wd(hr,e,s)}route(e,s,n,i){const l=ai(this,e),c=ai(this,n),u="_"+s;Object.defineProperties(l,{[u]:{value:l[s],writable:!0},[s]:{enumerable:!0,get(){const h=this[u],f=c[i];return Oe(h)?Object.assign({},f,h):Te(h,f)},set(h){this[u]=h}}})}apply(e){e.forEach(s=>s(this))}}var lt=new HN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ON,IN,UN]);function VN(t){return!t||He(t.size)||He(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Wp(t,e,s,n,i){let l=e[i];return l||(l=e[i]=t.measureText(i).width,s.push(i)),l>n&&(n=l),n}function Zn(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function qp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Nu(t,e,s,n){o0(t,e,s,n,null)}function o0(t,e,s,n,i){let l,c,u,h,f,p,x,b;const w=e.pointStyle,v=e.rotation,j=e.radius;let N=(v||0)*vN;if(w&&typeof w=="object"&&(l=w.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(N),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(j)||j<=0)){switch(t.beginPath(),w){default:i?t.ellipse(s,n,i/2,j,0,0,st):t.arc(s,n,j,0,st),t.closePath();break;case"triangle":p=i?i/2:j,t.moveTo(s+Math.sin(N)*p,n-Math.cos(N)*j),N+=Op,t.lineTo(s+Math.sin(N)*p,n-Math.cos(N)*j),N+=Op,t.lineTo(s+Math.sin(N)*p,n-Math.cos(N)*j),t.closePath();break;case"rectRounded":f=j*.516,h=j-f,c=Math.cos(N+Gn)*h,x=Math.cos(N+Gn)*(i?i/2-f:h),u=Math.sin(N+Gn)*h,b=Math.sin(N+Gn)*(i?i/2-f:h),t.arc(s-x,n-u,f,N-qe,N-xt),t.arc(s+b,n-c,f,N-xt,N),t.arc(s+x,n+u,f,N,N+xt),t.arc(s-b,n+c,f,N+xt,N+qe),t.closePath();break;case"rect":if(!v){h=Math.SQRT1_2*j,p=i?i/2:h,t.rect(s-p,n-h,2*p,2*h);break}N+=Gn;case"rectRot":x=Math.cos(N)*(i?i/2:j),c=Math.cos(N)*j,u=Math.sin(N)*j,b=Math.sin(N)*(i?i/2:j),t.moveTo(s-x,n-u),t.lineTo(s+b,n-c),t.lineTo(s+x,n+u),t.lineTo(s-b,n+c),t.closePath();break;case"crossRot":N+=Gn;case"cross":x=Math.cos(N)*(i?i/2:j),c=Math.cos(N)*j,u=Math.sin(N)*j,b=Math.sin(N)*(i?i/2:j),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"star":x=Math.cos(N)*(i?i/2:j),c=Math.cos(N)*j,u=Math.sin(N)*j,b=Math.sin(N)*(i?i/2:j),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c),N+=Gn,x=Math.cos(N)*(i?i/2:j),c=Math.cos(N)*j,u=Math.sin(N)*j,b=Math.sin(N)*(i?i/2:j),t.moveTo(s-x,n-u),t.lineTo(s+x,n+u),t.moveTo(s+b,n-c),t.lineTo(s-b,n+c);break;case"line":c=i?i/2:Math.cos(N)*j,u=Math.sin(N)*j,t.moveTo(s-c,n-u),t.lineTo(s+c,n+u);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(N)*(i?i/2:j),n+Math.sin(N)*j);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function yi(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Dl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Rl(t){t.restore()}function WN(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const l=(e.x+s.x)/2;t.lineTo(l,e.y),t.lineTo(l,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function qN(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function YN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),He(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function KN(t,e,s,n,i){if(i.strikethrough||i.underline){const l=t.measureText(n),c=e-l.actualBoundingBoxLeft,u=e+l.actualBoundingBoxRight,h=s-l.actualBoundingBoxAscent,f=s+l.actualBoundingBoxDescent,p=i.strikethrough?(h+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(c,p),t.lineTo(u,p),t.stroke()}}function XN(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function bi(t,e,s,n,i,l={}){const c=ht(e)?e:[e],u=l.strokeWidth>0&&l.strokeColor!=="";let h,f;for(t.save(),t.font=i.string,YN(t,l),h=0;h<c.length;++h)f=c[h],l.backdrop&&XN(t,l.backdrop),u&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),He(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(f,s,n,l.maxWidth)),t.fillText(f,s,n,l.maxWidth),KN(t,s,n,f,l),n+=Number(i.lineHeight);t.restore()}function bl(t,e){const{x:s,y:n,w:i,h:l,radius:c}=e;t.arc(s+c.topLeft,n+c.topLeft,c.topLeft,1.5*qe,qe,!0),t.lineTo(s,n+l-c.bottomLeft),t.arc(s+c.bottomLeft,n+l-c.bottomLeft,c.bottomLeft,qe,xt,!0),t.lineTo(s+i-c.bottomRight,n+l),t.arc(s+i-c.bottomRight,n+l-c.bottomRight,c.bottomRight,xt,0,!0),t.lineTo(s+i,n+c.topRight),t.arc(s+i-c.topRight,n+c.topRight,c.topRight,0,-xt,!0),t.lineTo(s+c.topLeft,n)}const QN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,JN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GN(t,e){const s=(""+t).match(QN);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZN=t=>+t||0;function Ju(t,e){const s={},n=Oe(e),i=n?Object.keys(e):e,l=Oe(t)?n?c=>Te(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of i)s[c]=ZN(l(c));return s}function l0(t){return Ju(t,{top:"y",right:"x",bottom:"y",left:"x"})}function qr(t){return Ju(t,["topLeft","topRight","bottomLeft","bottomRight"])}function us(t){const e=l0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||lt.font;let s=Te(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Te(t.style,e.style);n&&!(""+n).match(JN)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Te(t.family,e.family),lineHeight:GN(Te(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Te(t.weight,e.weight),string:""};return i.string=VN(i),i}function Vo(t,e,s,n){let i,l,c;for(i=0,l=t.length;i<l;++i)if(c=t[i],c!==void 0&&c!==void 0)return c}function e_(t,e,s){const{min:n,max:i}=t,l=Gx(e,(i-n)/2),c=(u,h)=>s&&u===0?0:u+h;return{min:c(n,-Math.abs(l)),max:c(i,l)}}function fr(t,e){return Object.assign(Object.create(t),e)}function Gu(t,e=[""],s,n,i=()=>t[0]){const l=s||t;typeof n>"u"&&(n=h0("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:n,_getTarget:i,override:u=>Gu([u,...t],e,l,n)};return new Proxy(c,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return d0(u,h,()=>l_(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return Kp(u).includes(h)},ownKeys(u){return Kp(u)},set(u,h,f){const p=u._storage||(u._storage=i());return u[h]=p[h]=f,delete u._keys,!0}})}function Qr(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:c0(t,n),setContext:l=>Qr(t,l,s,n),override:l=>Qr(t.override(l),e,s,n)};return new Proxy(i,{deleteProperty(l,c){return delete l[c],delete t[c],!0},get(l,c,u){return d0(l,c,()=>s_(l,c,u))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(l,c,u){return t[c]=u,delete l[c],!0}})}function c0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Ln(s)?s:()=>s,isIndexable:Ln(n)?n:()=>n}}const t_=(t,e)=>t?t+qu(e):e,Zu=(t,e)=>Oe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function d0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function s_(t,e,s){const{_proxy:n,_context:i,_subProxy:l,_descriptors:c}=t;let u=n[e];return Ln(u)&&c.isScriptable(e)&&(u=n_(e,u,t,s)),ht(u)&&u.length&&(u=r_(e,u,t,c.isIndexable)),Zu(e,u)&&(u=Qr(u,i,l&&l[e],c)),u}function n_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_stack:u}=s;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(l,c||n);return u.delete(t),Zu(t,h)&&(h=eh(i._scopes,i,t,h)),h}function r_(t,e,s,n){const{_proxy:i,_context:l,_subProxy:c,_descriptors:u}=s;if(typeof l.index<"u"&&n(t))return e[l.index%e.length];if(Oe(e[0])){const h=e,f=i._scopes.filter(p=>p!==h);e=[];for(const p of h){const x=eh(f,i,t,p);e.push(Qr(x,l,c&&c[t],u))}}return e}function u0(t,e,s){return Ln(t)?t(e,s):t}const a_=(t,e)=>t===!0?e:typeof t=="string"?ur(e,t):void 0;function i_(t,e,s,n,i){for(const l of e){const c=a_(s,l);if(c){t.add(c);const u=u0(c._fallback,s,i);if(typeof u<"u"&&u!==s&&u!==n)return u}else if(c===!1&&typeof n<"u"&&s!==n)return null}return!1}function eh(t,e,s,n){const i=e._rootScopes,l=u0(e._fallback,s,n),c=[...t,...i],u=new Set;u.add(n);let h=Yp(u,c,s,l||s,n);return h===null||typeof l<"u"&&l!==s&&(h=Yp(u,c,l,h,n),h===null)?!1:Gu(Array.from(u),[""],i,l,()=>o_(e,s,n))}function Yp(t,e,s,n,i){for(;s;)s=i_(t,e,s,n,i);return s}function o_(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return ht(i)&&Oe(s)?s:i||{}}function l_(t,e,s,n){let i;for(const l of e)if(i=h0(t_(l,t),s),typeof i<"u")return Zu(t,i)?eh(s,n,t,i):i}function h0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Kp(t){let e=t._keys;return e||(e=t._keys=c_(t._scopes)),e}function c_(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const d_=Number.EPSILON||1e-14,Jr=(t,e)=>e<t.length&&!t[e].skip&&t[e],m0=t=>t==="x"?"y":"x";function u_(t,e,s,n){const i=t.skip?e:t,l=e,c=s.skip?e:s,u=wu(l,i),h=wu(c,l);let f=u/(u+h),p=h/(u+h);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const x=n*f,b=n*p;return{previous:{x:l.x-x*(c.x-i.x),y:l.y-x*(c.y-i.y)},next:{x:l.x+b*(c.x-i.x),y:l.y+b*(c.y-i.y)}}}function h_(t,e,s){const n=t.length;let i,l,c,u,h,f=Jr(t,0);for(let p=0;p<n-1;++p)if(h=f,f=Jr(t,p+1),!(!h||!f)){if(ni(e[p],0,d_)){s[p]=s[p+1]=0;continue}i=s[p]/e[p],l=s[p+1]/e[p],u=Math.pow(i,2)+Math.pow(l,2),!(u<=9)&&(c=3/Math.sqrt(u),s[p]=i*c*e[p],s[p+1]=l*c*e[p])}}function m_(t,e,s="x"){const n=m0(s),i=t.length;let l,c,u,h=Jr(t,0);for(let f=0;f<i;++f){if(c=u,u=h,h=Jr(t,f+1),!u)continue;const p=u[s],x=u[n];c&&(l=(p-c[s])/3,u[`cp1${s}`]=p-l,u[`cp1${n}`]=x-l*e[f]),h&&(l=(h[s]-p)/3,u[`cp2${s}`]=p+l,u[`cp2${n}`]=x+l*e[f])}}function f_(t,e="x"){const s=m0(e),n=t.length,i=Array(n).fill(0),l=Array(n);let c,u,h,f=Jr(t,0);for(c=0;c<n;++c)if(u=h,h=f,f=Jr(t,c+1),!!h){if(f){const p=f[e]-h[e];i[c]=p!==0?(f[s]-h[s])/p:0}l[c]=u?f?Os(i[c-1])!==Os(i[c])?0:(i[c-1]+i[c])/2:i[c-1]:i[c]}h_(t,i,l),m_(t,l,e)}function Wo(t,e,s){return Math.max(Math.min(t,s),e)}function p_(t,e){let s,n,i,l,c,u=yi(t[0],e);for(s=0,n=t.length;s<n;++s)c=l,l=u,u=s<n-1&&yi(t[s+1],e),l&&(i=t[s],c&&(i.cp1x=Wo(i.cp1x,e.left,e.right),i.cp1y=Wo(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=Wo(i.cp2x,e.left,e.right),i.cp2y=Wo(i.cp2y,e.top,e.bottom)))}function g_(t,e,s,n,i){let l,c,u,h;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")f_(t,i);else{let f=n?t[t.length-1]:t[0];for(l=0,c=t.length;l<c;++l)u=t[l],h=u_(f,u,t[Math.min(l+1,c-(n?0:1))%c],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,f=u}e.capBezierPoints&&p_(t,s)}function th(){return typeof window<"u"&&typeof document<"u"}function sh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Fl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function x_(t,e){return Fl(t).getPropertyValue(e)}const y_=["top","right","bottom","left"];function or(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const l=y_[i];n[l]=parseFloat(t[e+"-"+l+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const b_=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function v_(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:l}=n;let c=!1,u,h;if(b_(i,l,t.target))u=i,h=l;else{const f=e.getBoundingClientRect();u=n.clientX-f.left,h=n.clientY-f.top,c=!0}return{x:u,y:h,box:c}}function sr(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Fl(s),l=i.boxSizing==="border-box",c=or(i,"padding"),u=or(i,"border","width"),{x:h,y:f,box:p}=v_(t,s),x=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:w,height:v}=e;return l&&(w-=c.width+u.width,v-=c.height+u.height),{x:Math.round((h-x)/w*s.width/n),y:Math.round((f-b)/v*s.height/n)}}function w_(t,e,s){let n,i;if(e===void 0||s===void 0){const l=t&&sh(t);if(!l)e=t.clientWidth,s=t.clientHeight;else{const c=l.getBoundingClientRect(),u=Fl(l),h=or(u,"border","width"),f=or(u,"padding");e=c.width-f.width-h.width,s=c.height-f.height-h.height,n=vl(u.maxWidth,l,"clientWidth"),i=vl(u.maxHeight,l,"clientHeight")}}return{width:e,height:s,maxWidth:n||yl,maxHeight:i||yl}}const qo=t=>Math.round(t*10)/10;function j_(t,e,s,n){const i=Fl(t),l=or(i,"margin"),c=vl(i.maxWidth,t,"clientWidth")||yl,u=vl(i.maxHeight,t,"clientHeight")||yl,h=w_(t,e,s);let{width:f,height:p}=h;if(i.boxSizing==="content-box"){const b=or(i,"border","width"),w=or(i,"padding");f-=w.width+b.width,p-=w.height+b.height}return f=Math.max(0,f-l.width),p=Math.max(0,n?f/n:p-l.height),f=qo(Math.min(f,c,h.maxWidth)),p=qo(Math.min(p,u,h.maxHeight)),f&&!p&&(p=qo(f/2)),(e!==void 0||s!==void 0)&&n&&h.height&&p>h.height&&(p=h.height,f=qo(Math.floor(p*n))),{width:f,height:p}}function Xp(t,e,s){const n=e||1,i=Math.floor(t.height*n),l=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(s||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==i||c.width!==l?(t.currentDevicePixelRatio=n,c.height=i,c.width=l,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const N_=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};th()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Qp(t,e){const s=x_(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function nr(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function __(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function k_(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},c=nr(t,i,s),u=nr(i,l,s),h=nr(l,e,s),f=nr(c,u,s),p=nr(u,h,s);return nr(f,p,s)}const S_=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},C_=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yr(t,e,s){return t?S_(e,s):C_()}function f0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function p0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function g0(t){return t==="angle"?{between:xi,compare:SN,normalize:Zt}:{between:en,compare:(e,s)=>e-s,normalize:e=>e}}function Jp({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function E_(t,e,s){const{property:n,start:i,end:l}=s,{between:c,normalize:u}=g0(n),h=e.length;let{start:f,end:p,loop:x}=t,b,w;if(x){for(f+=h,p+=h,b=0,w=h;b<w&&c(u(e[f%h][n]),i,l);++b)f--,p--;f%=h,p%=h}return p<f&&(p+=h),{start:f,end:p,loop:x,style:t.style}}function x0(t,e,s){if(!s)return[t];const{property:n,start:i,end:l}=s,c=e.length,{compare:u,between:h,normalize:f}=g0(n),{start:p,end:x,loop:b,style:w}=E_(t,e,s),v=[];let j=!1,N=null,E,S,P;const D=()=>h(i,P,E)&&u(i,P)!==0,T=()=>u(l,E)===0||h(l,P,E),L=()=>j||D(),R=()=>!j||T();for(let F=p,U=p;F<=x;++F)S=e[F%c],!S.skip&&(E=f(S[n]),E!==P&&(j=h(E,i,l),N===null&&L()&&(N=u(E,i)===0?F:U),N!==null&&R()&&(v.push(Jp({start:N,end:F,loop:b,count:c,style:w})),N=null),U=F,P=E));return N!==null&&v.push(Jp({start:N,end:x,loop:b,count:c,style:w})),v}function y0(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const l=x0(n[i],t.points,e);l.length&&s.push(...l)}return s}function A_(t,e,s,n){let i=0,l=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(l+=i);l>i&&t[l%e].skip;)l--;return l%=e,{start:i,end:l}}function P_(t,e,s,n){const i=t.length,l=[];let c=e,u=t[e],h;for(h=e+1;h<=s;++h){const f=t[h%i];f.skip||f.stop?u.skip||(n=!1,l.push({start:e%i,end:(h-1)%i,loop:n}),e=c=f.stop?h:null):(c=h,u.skip&&(e=h)),u=f}return c!==null&&l.push({start:e%i,end:c%i,loop:n}),l}function M_(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const l=!!t._loop,{start:c,end:u}=A_(s,i,l,n);if(n===!0)return Gp(t,[{start:c,end:u,loop:l}],s,e);const h=u<c?u+i:u,f=!!t._fullLoop&&c===0&&u===i-1;return Gp(t,P_(s,c,h,f),s,e)}function Gp(t,e,s,n){return!n||!n.setContext||!s?e:T_(t,e,s,n)}function T_(t,e,s,n){const i=t._chart.getContext(),l=Zp(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,h=s.length,f=[];let p=l,x=e[0].start,b=x;function w(v,j,N,E){const S=u?-1:1;if(v!==j){for(v+=h;s[v%h].skip;)v-=S;for(;s[j%h].skip;)j+=S;v%h!==j%h&&(f.push({start:v%h,end:j%h,loop:N,style:E}),p=E,x=j%h)}}for(const v of e){x=u?x:v.start;let j=s[x%h],N;for(b=x+1;b<=v.end;b++){const E=s[b%h];N=Zp(n.setContext(fr(i,{type:"segment",p0:j,p1:E,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:c}))),D_(N,p)&&w(x,b-1,v.loop,p),j=E,p=N}x<b-1&&w(x,b-1,v.loop,p)}return f}function Zp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function D_(t,e){if(!e)return!1;const s=[],n=function(i,l){return Xu(l)?(s.includes(l)||s.push(l),s.indexOf(l)):l};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Yo(t,e,s){return t.options.clip?t[s]:e[s]}function R_(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Yo(s,e,"left"),right:Yo(s,e,"right"),top:Yo(n,e,"top"),bottom:Yo(n,e,"bottom")}:e}function b0(t,e){const s=e._clip;if(s.disabled)return!1;const n=R_(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class F_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const l=s.listeners[i],c=s.duration;l.forEach(u=>u({chart:e,initial:s.initial,numSteps:c,currentStep:Math.min(n-s.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=r0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const l=n.items;let c=l.length-1,u=!1,h;for(;c>=0;--c)h=l[c],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(e),u=!0):(l[c]=l[l.length-1],l.pop());u&&(i.draw(),this._notify(i,n,e,"progress")),l.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=l.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qs=new F_;const eg="transparent",L_={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Hp(t||eg),i=n.valid&&Hp(e||eg);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class O_{constructor(e,s,n,i){const l=s[n];i=Vo([e.to,i,l,e.from]);const c=Vo([e.from,l,i]);this._active=!0,this._fn=e.fn||L_[e.type||typeof c],this._easing=ri[e.easing]||ri.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=c,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],l=n-this._start,c=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Vo([e.to,s,i,e.from]),this._from=Vo([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,l=this._from,c=this._loop,u=this._to;let h;if(this._active=l!==u&&(c||s<n),!this._active){this._target[i]=u,this._notify(!0);return}if(s<0){this._target[i]=l;return}h=s/n%2,h=c&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(l,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class v0{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Oe(e))return;const s=Object.keys(lt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const l=e[i];if(!Oe(l))return;const c={};for(const u of s)c[u]=l[u];(ht(l.properties)&&l.properties||[i]).forEach(u=>{(u===i||!n.has(u))&&n.set(u,c)})})}_animateOptions(e,s){const n=s.options,i=B_(e,n);if(!i)return[];const l=this._createAnimations(i,n);return n.$shared&&I_(e.options.$animations,n).then(()=>{e.options=n},()=>{}),l}_createAnimations(e,s){const n=this._properties,i=[],l=e.$animations||(e.$animations={}),c=Object.keys(s),u=Date.now();let h;for(h=c.length-1;h>=0;--h){const f=c[h];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,s));continue}const p=s[f];let x=l[f];const b=n.get(f);if(x)if(b&&x.active()){x.update(b,p,u);continue}else x.cancel();if(!b||!b.duration){e[f]=p;continue}l[f]=x=new O_(b,e,f,p),i.push(x)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Qs.add(this._chart,n),!0}}function I_(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const l=t[n[i]];l&&l.active()&&s.push(l.wait())}return Promise.all(s)}function B_(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function tg(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,l=s.max===void 0?e:0;return{start:n?l:i,end:n?i:l}}function z_(t,e,s){if(s===!1)return!1;const n=tg(t,s),i=tg(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function $_(t){let e,s,n,i;return Oe(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function w0(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,l;for(i=0,l=n.length;i<l;++i)s.push(n[i].index);return s}function sg(t,e,s,n={}){const i=t.keys,l=n.mode==="single";let c,u,h,f;if(e===null)return;let p=!1;for(c=0,u=i.length;c<u;++c){if(h=+i[c],h===s){if(p=!0,n.all)continue;break}f=t.values[h],Rt(f)&&(l||e===0||Os(e)===Os(f))&&(e+=f)}return!p&&!n.all?0:e}function U_(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",l=n.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let h,f,p;for(h=0,f=c.length;h<f;++h)p=c[h],u[h]={[i]:p,[l]:t[p]};return u}function qd(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function H_(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function V_(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function W_(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function ng(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const l=t[i.index];if(s&&l>0||!s&&l<0)return i.index}return null}function rg(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:l,vScale:c,index:u}=n,h=l.axis,f=c.axis,p=H_(l,c,n),x=e.length;let b;for(let w=0;w<x;++w){const v=e[w],{[h]:j,[f]:N}=v,E=v._stacks||(v._stacks={});b=E[f]=W_(i,p,j),b[u]=N,b._top=ng(b,c,!0,n.type),b._bottom=ng(b,c,!1,n.type);const S=b._visualValues||(b._visualValues={});S[u]=N}}function Yd(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function q_(t,e){return fr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Y_(t,e,s){return fr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Ya(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const l=i._stacks;if(!l||l[n]===void 0||l[n][s]===void 0)return;delete l[n][s],l[n]._visualValues!==void 0&&l[n]._visualValues[s]!==void 0&&delete l[n]._visualValues[s]}}}const Kd=t=>t==="reset"||t==="none",ag=(t,e)=>e?t:Object.assign({},t),K_=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:w0(s,!0),values:null};class Ll{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ya(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(x,b,w,v)=>x==="x"?b:x==="r"?v:w,l=s.xAxisID=Te(n.xAxisID,Yd(e,"x")),c=s.yAxisID=Te(n.yAxisID,Yd(e,"y")),u=s.rAxisID=Te(n.rAxisID,Yd(e,"r")),h=s.indexAxis,f=s.iAxisID=i(h,l,c,u),p=s.vAxisID=i(h,c,l,u);s.xScale=this.getScaleForId(l),s.yScale=this.getScaleForId(c),s.rScale=this.getScaleForId(u),s.iScale=this.getScaleForId(f),s.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&zp(this._data,this),e._stacked&&Ya(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(Oe(s)){const i=this._cachedMeta;this._data=U_(s,i)}else if(n!==s){if(n){zp(n,this);const i=this._cachedMeta;Ya(i),i._parsed=[]}s&&Object.isExtensible(s)&&PN(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const l=s._stacked;s._stacked=qd(s.vScale,s),s.stack!==n.stack&&(i=!0,Ya(s),s.stack=n.stack),this._resyncElements(e),(i||l!==s._stacked)&&(rg(this,s._parsed),s._stacked=qd(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:l,_stacked:c}=n,u=l.axis;let h=e===0&&s===i.length?!0:n._sorted,f=e>0&&n._parsed[e-1],p,x,b;if(this._parsing===!1)n._parsed=i,n._sorted=!0,b=i;else{ht(i[e])?b=this.parseArrayData(n,i,e,s):Oe(i[e])?b=this.parseObjectData(n,i,e,s):b=this.parsePrimitiveData(n,i,e,s);const w=()=>x[u]===null||f&&x[u]<f[u];for(p=0;p<s;++p)n._parsed[p+e]=x=b[p],h&&(w()&&(h=!1),f=x);n._sorted=h}c&&rg(this,b)}parsePrimitiveData(e,s,n,i){const{iScale:l,vScale:c}=e,u=l.axis,h=c.axis,f=l.getLabels(),p=l===c,x=new Array(i);let b,w,v;for(b=0,w=i;b<w;++b)v=b+n,x[b]={[u]:p||l.parse(f[v],v),[h]:c.parse(s[v],v)};return x}parseArrayData(e,s,n,i){const{xScale:l,yScale:c}=e,u=new Array(i);let h,f,p,x;for(h=0,f=i;h<f;++h)p=h+n,x=s[p],u[h]={x:l.parse(x[0],p),y:c.parse(x[1],p)};return u}parseObjectData(e,s,n,i){const{xScale:l,yScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=new Array(i);let p,x,b,w;for(p=0,x=i;p<x;++p)b=p+n,w=s[b],f[p]={x:l.parse(ur(w,u),b),y:c.parse(ur(w,h),b)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,l=this._cachedMeta,c=s[e.axis],u={keys:w0(i,!0),values:s._stacks[e.axis]._visualValues};return sg(u,c,l.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const l=n[s.axis];let c=l===null?NaN:l;const u=i&&n._stacks[s.axis];i&&u&&(i.values=u,c=sg(i,l,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,l=n._sorted&&e===n.iScale,c=i.length,u=this._getOtherScale(e),h=K_(s,n,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:x}=V_(u);let b,w;function v(){w=i[b];const j=w[u.axis];return!Rt(w[e.axis])||p>j||x<j}for(b=0;b<c&&!(!v()&&(this.updateRangeFromParsed(f,e,w,h),l));++b);if(l){for(b=c-1;b>=0;--b)if(!v()){this.updateRangeFromParsed(f,e,w,h);break}}return f}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,l,c;for(i=0,l=s.length;i<l;++i)c=s[i][e.axis],Rt(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,l=this.getParsed(e);return{label:n?""+n.getLabelForValue(l[n.axis]):"",value:i?""+i.getLabelForValue(l[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=$_(Te(this.options.clip,z_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],l=s.chartArea,c=[],u=this._drawStart||0,h=this._drawCount||i.length-u,f=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(e,l,u,h),p=u;p<u+h;++p){const x=i[p];x.hidden||(x.active&&f?c.push(x):x.draw(e,l))}for(p=0;p<c.length;++p)c[p].draw(e,l)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];l=c.$context||(c.$context=Y_(this.getContext(),e,c)),l.parsed=this.getParsed(e),l.raw=i.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=q_(this.chart.getContext(),this.index)),l.dataset=i,l.index=l.datasetIndex=this.index;return l.active=!!s,l.mode=n,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",l=this._cachedDataOpts,c=e+"-"+s,u=l[c],h=this.enableOptionSharing&&pi(n);if(u)return ag(u,h);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,e),x=i?[`${e}Hover`,"hover",e,""]:[e,""],b=f.getOptionScopes(this.getDataset(),p),w=Object.keys(lt.elements[e]),v=()=>this.getContext(n,i,s),j=f.resolveNamedOptions(b,w,v,x);return j.$shared&&(j.$shared=h,l[c]=Object.freeze(ag(j,h))),j}_resolveAnimations(e,s,n){const i=this.chart,l=this._cachedDataOpts,c=`animation-${s}`,u=l[c];if(u)return u;let h;if(i.options.animation!==!1){const p=this.chart.config,x=p.datasetAnimationScopeKeys(this._type,s),b=p.getOptionScopes(this.getDataset(),x);h=p.createResolver(b,this.getContext(e,n,s))}const f=new v0(i,h&&h.animations);return h&&h._cacheable&&(l[c]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Kd(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,l=this.getSharedOptions(n),c=this.includeOptions(s,l)||l!==i;return this.updateSharedOptions(l,s,n),{sharedOptions:l,includeOptions:c}}updateElement(e,s,n,i){Kd(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!Kd(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const l=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(l)||l})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[u,h,f]of this._syncList)this[u](h,f);this._syncList=[];const i=n.length,l=s.length,c=Math.min(l,i);c&&this.parse(0,c),l>i?this._insertElements(i,l-i,e):l<i&&this._removeElements(l,i-l)}_insertElements(e,s,n=!0){const i=this._cachedMeta,l=i.data,c=e+s;let u;const h=f=>{for(f.length+=s,u=f.length-1;u>=c;u--)f[u]=f[u-s]};for(h(l),u=e;u<c;++u)l[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,s),n&&this.updateElements(l,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&Ya(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function X_(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,l=s.length;i<l;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=n0(n.sort((i,l)=>i-l))}return t._cache.$bar}function Q_(t){const e=t.iScale,s=X_(e,t.type);let n=e._length,i,l,c,u;const h=()=>{c===32767||c===-32768||(pi(u)&&(n=Math.min(n,Math.abs(c-u)||n)),u=c)};for(i=0,l=s.length;i<l;++i)c=e.getPixelForValue(s[i]),h();for(u=void 0,i=0,l=e.ticks.length;i<l;++i)c=e.getPixelForTick(i),h();return n}function J_(t,e,s,n){const i=s.barThickness;let l,c;return He(i)?(l=e.min*s.categoryPercentage,c=s.barPercentage):(l=i*n,c=1),{chunk:l/n,ratio:c,start:e.pixels[t]-l/2}}function G_(t,e,s,n){const i=e.pixels,l=i[t];let c=t>0?i[t-1]:null,u=t<i.length-1?i[t+1]:null;const h=s.categoryPercentage;c===null&&(c=l-(u===null?e.end-e.start:u-l)),u===null&&(u=l+l-c);const f=l-(l-Math.min(c,u))/2*h;return{chunk:Math.abs(u-c)/2*h/n,ratio:s.barPercentage,start:f}}function Z_(t,e,s,n){const i=s.parse(t[0],n),l=s.parse(t[1],n),c=Math.min(i,l),u=Math.max(i,l);let h=c,f=u;Math.abs(c)>Math.abs(u)&&(h=u,f=c),e[s.axis]=f,e._custom={barStart:h,barEnd:f,start:i,end:l,min:c,max:u}}function j0(t,e,s,n){return ht(t)?Z_(t,e,s,n):e[s.axis]=s.parse(t,n),e}function ig(t,e,s,n){const i=t.iScale,l=t.vScale,c=i.getLabels(),u=i===l,h=[];let f,p,x,b;for(f=s,p=s+n;f<p;++f)b=e[f],x={},x[i.axis]=u||i.parse(c[f],f),h.push(j0(b,x,l,f));return h}function Xd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function e2(t,e,s){return t!==0?Os(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function t2(t){let e,s,n,i,l;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",l="start"):(i="start",l="end"),{start:s,end:n,reverse:e,top:i,bottom:l}}function s2(t,e,s,n){let i=e.borderSkipped;const l={};if(!i){t.borderSkipped=l;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:h,top:f,bottom:p}=t2(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=f:(s._bottom||0)===n?i=p:(l[og(p,c,u,h)]=!0,i=f)),l[og(i,c,u,h)]=!0,t.borderSkipped=l}function og(t,e,s,n){return n?(t=n2(t,e,s),t=lg(t,s,e)):t=lg(t,e,s),t}function n2(t,e,s){return t===e?s:t===s?e:t}function lg(t,e,s){return t==="start"?e:t==="end"?s:t}function r2(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class a2 extends Ll{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,i){return ig(e,s,n,i)}parseArrayData(e,s,n,i){return ig(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:l,vScale:c}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=l.axis==="x"?u:h,p=c.axis==="x"?u:h,x=[];let b,w,v,j;for(b=n,w=n+i;b<w;++b)j=s[b],v={},v[l.axis]=l.parse(ur(j,f),b),x.push(j0(ur(j,p),v,c,b));return x}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const l=n._custom;l&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,l=this.getParsed(e),c=l._custom,u=Xd(c)?"["+c.start+", "+c.end+"]":""+i.getLabelForValue(l[i.axis]);return{label:""+n.getLabelForValue(l[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const l=i==="reset",{index:c,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),f=u.isHorizontal(),p=this._getRuler(),{sharedOptions:x,includeOptions:b}=this._getSharedOptions(s,i);for(let w=s;w<s+n;w++){const v=this.getParsed(w),j=l||He(v[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(w),N=this._calculateBarIndexPixels(w,p),E=(v._stacks||{})[u.axis],S={horizontal:f,base:j.base,enableBorderRadius:!E||Xd(v._custom)||c===E._top||c===E._bottom,x:f?j.head:N.center,y:f?N.center:j.head,height:f?N.size:Math.abs(j.size),width:f?Math.abs(j.size):N.size};b&&(S.options=x||this.resolveDataElementOptions(w,e[w].active?"active":i));const P=S.options||e[w].options;s2(S,P,E,c),r2(S,P,p.ratio),this.updateElement(e[w],w,S,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),l=n.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(s),h=u&&u[n.axis],f=p=>{const x=p._parsed.find(w=>w[n.axis]===h),b=x&&x[p.vScale.axis];if(He(b)||isNaN(b))return!0};for(const p of i)if(!(s!==void 0&&f(p))&&((l===!1||c.indexOf(p.stack)===-1||l===void 0&&p.stack===void 0)&&c.push(p.stack),p.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Te(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const i=this._getStacks(e,n),l=s!==void 0?i.indexOf(s):-1;return l===-1?i.length-1:l}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let l,c;for(l=0,c=s.data.length;l<c;++l)i.push(n.getPixelForValue(this.getParsed(l)[n.axis],l));const u=e.barThickness;return{min:u||Q_(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:l,minBarLength:c}}=this,u=l||0,h=this.getParsed(e),f=h._custom,p=Xd(f);let x=h[s.axis],b=0,w=n?this.applyStack(s,h,n):x,v,j;w!==x&&(b=w-x,w=x),p&&(x=f.barStart,w=f.barEnd-f.barStart,x!==0&&Os(x)!==Os(f.barEnd)&&(b=0),b+=x);const N=!He(l)&&!p?l:b;let E=s.getPixelForValue(N);if(this.chart.getDataVisibility(e)?v=s.getPixelForValue(b+w):v=E,j=v-E,Math.abs(j)<c){j=e2(j,s,u)*c,x===u&&(E-=j/2);const S=s.getPixelForDecimal(0),P=s.getPixelForDecimal(1),D=Math.min(S,P),T=Math.max(S,P);E=Math.max(Math.min(E,T),D),v=E+j,n&&!p&&(h._stacks[s.axis]._visualValues[i]=s.getValueForPixel(v)-s.getValueForPixel(E))}if(E===s.getPixelForValue(u)){const S=Os(j)*s.getLineWidthForValue(u)/2;E+=S,j-=S}return{size:j,base:E,head:v,center:v+j/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,l=i.skipNull,c=Te(i.maxBarThickness,1/0);let u,h;const f=this._getAxisCount();if(s.grouped){const p=l?this._getStackCount(e):s.stackCount,x=i.barThickness==="flex"?G_(e,s,i,p*f):J_(e,s,i,p*f),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(Te(b,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+w;u=x.start+x.chunk*v+x.chunk/2,h=Math.min(c,x.chunk*x.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),h=Math.min(c,s.min*s.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let l=0;for(;l<i;++l)this.getParsed(l)[s.axis]!==null&&!n[l].hidden&&n[l].draw(this._ctx)}}function i2(t,e,s){let n=1,i=1,l=0,c=0;if(e<st){const u=t,h=u+e,f=Math.cos(u),p=Math.sin(u),x=Math.cos(h),b=Math.sin(h),w=(P,D,T)=>xi(P,u,h,!0)?1:Math.max(D,D*s,T,T*s),v=(P,D,T)=>xi(P,u,h,!0)?-1:Math.min(D,D*s,T,T*s),j=w(0,f,x),N=w(xt,p,b),E=v(qe,f,x),S=v(qe+xt,p,b);n=(j-E)/2,i=(N-S)/2,l=-(j+E)/2,c=-(N+S)/2}return{ratioX:n,ratioY:i,offsetX:l,offsetY:c}}class o2 extends Ll{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let l=h=>+n[h];if(Oe(n[e])){const{key:h="value"}=this._parsing;l=f=>+ur(n[f],h)}let c,u;for(c=e,u=e+s;c<u;++c)i._parsed[c]=l(c)}}_getRotation(){return Zs(this.options.rotation-90)}_getCircumference(){return Zs(this.options.circumference)}_getRotationExtents(){let e=st,s=-st;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,l=i._getRotation(),c=i._getCircumference();e=Math.min(e,l),s=Math.max(s,l+c)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,l=i.data,c=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-c)/2,0),h=Math.min(mN(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:p,rotation:x}=this._getRotationExtents(),{ratioX:b,ratioY:w,offsetX:v,offsetY:j}=i2(x,p,h),N=(n.width-c)/b,E=(n.height-c)/w,S=Math.max(Math.min(N,E)/2,0),P=Gx(this.options.radius,S),D=Math.max(P*h,0),T=(P-D)/this._getVisibleDatasetWeightTotal();this.offsetX=v*P,this.offsetY=j*P,i.total=this.calculateTotal(),this.outerRadius=P-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*f,0),this.updateElements(l,0,l.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,l=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*l/st)}updateElements(e,s,n,i){const l=i==="reset",c=this.chart,u=c.chartArea,f=c.options.animation,p=(u.left+u.right)/2,x=(u.top+u.bottom)/2,b=l&&f.animateScale,w=b?0:this.innerRadius,v=b?0:this.outerRadius,{sharedOptions:j,includeOptions:N}=this._getSharedOptions(s,i);let E=this._getRotation(),S;for(S=0;S<s;++S)E+=this._circumference(S,l);for(S=s;S<s+n;++S){const P=this._circumference(S,l),D=e[S],T={x:p+this.offsetX,y:x+this.offsetY,startAngle:E,endAngle:E+P,circumference:P,outerRadius:v,innerRadius:w};N&&(T.options=j||this.resolveDataElementOptions(S,D.active?"active":i)),E+=P,this.updateElement(D,S,T,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const l=e._parsed[i];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(l))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?st*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],l=Qu(s._parsed[e],n.options.locale);return{label:i[e]||"",value:l}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,l,c,u,h;if(!e){for(i=0,l=n.data.datasets.length;i<l;++i)if(n.isDatasetVisible(i)){c=n.getDatasetMeta(i),e=c.data,u=c.controller;break}}if(!e)return 0;for(i=0,l=e.length;i<l;++i)h=u.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(s=Math.max(s,h.borderWidth||0,h.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const l=this.resolveDataElementOptions(n);s=Math.max(s,l.offset||0,l.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(Te(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class l2 extends Ll{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:l}=s,c=this.chart._animationsDisabled;let{start:u,count:h}=DN(s,i,c);this._drawStart=u,this._drawCount=h,RN(s)&&(u=0,h=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!l._decimated,n.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:f},e),this.updateElements(i,u,h,e)}updateElements(e,s,n,i){const l=i==="reset",{iScale:c,vScale:u,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:p,includeOptions:x}=this._getSharedOptions(s,i),b=c.axis,w=u.axis,{spanGaps:v,segment:j}=this.options,N=gi(v)?v:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||l||i==="none",S=s+n,P=e.length;let D=s>0&&this.getParsed(s-1);for(let T=0;T<P;++T){const L=e[T],R=E?L:{};if(T<s||T>=S){R.skip=!0;continue}const F=this.getParsed(T),U=He(F[w]),H=R[b]=c.getPixelForValue(F[b],T),B=R[w]=l||U?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,F,h):F[w],T);R.skip=isNaN(H)||isNaN(B)||U,R.stop=T>0&&Math.abs(F[b]-D[b])>N,j&&(R.parsed=F,R.raw=f.data[T]),x&&(R.options=p||this.resolveDataElementOptions(T,L.active?"active":i)),E||this.updateElement(L,T,R,i),D=F}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const l=i[0].size(this.resolveDataElementOptions(0)),c=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,l,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function er(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nh{static override(e){Object.assign(nh.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return er()}parse(){return er()}format(){return er()}add(){return er()}diff(){return er()}startOf(){return er()}endOf(){return er()}}var c2={_date:nh};function d2(t,e,s,n){const{controller:i,data:l,_sorted:c}=t,u=i._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&c&&l.length){const f=u._reversePixels?EN:ar;if(n){if(i._sharedOptions){const p=l[0],x=typeof p.getRange=="function"&&p.getRange(e);if(x){const b=f(l,e,s-x),w=f(l,e,s+x);return{lo:b.lo,hi:w.hi}}}}else{const p=f(l,e,s);if(h){const{vScale:x}=i._cachedMeta,{_parsed:b}=t,w=b.slice(0,p.lo+1).reverse().findIndex(j=>!He(j[x.axis]));p.lo-=Math.max(0,w);const v=b.slice(p.hi).findIndex(j=>!He(j[x.axis]));p.hi+=Math.max(0,v)}return p}}return{lo:0,hi:l.length-1}}function Ol(t,e,s,n,i){const l=t.getSortedVisibleDatasetMetas(),c=s[e];for(let u=0,h=l.length;u<h;++u){const{index:f,data:p}=l[u],{lo:x,hi:b}=d2(l[u],e,c,i);for(let w=x;w<=b;++w){const v=p[w];v.skip||n(v,f,w)}}}function u2(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const l=e?Math.abs(n.x-i.x):0,c=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function Qd(t,e,s,n,i){const l=[];return!i&&!t.isPointInArea(e)||Ol(t,s,e,function(u,h,f){!i&&!yi(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&l.push({element:u,datasetIndex:h,index:f})},!0),l}function h2(t,e,s,n){let i=[];function l(c,u,h){const{startAngle:f,endAngle:p}=c.getProps(["startAngle","endAngle"],n),{angle:x}=t0(c,{x:e.x,y:e.y});xi(x,f,p)&&i.push({element:c,datasetIndex:u,index:h})}return Ol(t,s,e,l),i}function m2(t,e,s,n,i,l){let c=[];const u=u2(s);let h=Number.POSITIVE_INFINITY;function f(p,x,b){const w=p.inRange(e.x,e.y,i);if(n&&!w)return;const v=p.getCenterPoint(i);if(!(!!l||t.isPointInArea(v))&&!w)return;const N=u(e,v);N<h?(c=[{element:p,datasetIndex:x,index:b}],h=N):N===h&&c.push({element:p,datasetIndex:x,index:b})}return Ol(t,s,e,f),c}function Jd(t,e,s,n,i,l){return!l&&!t.isPointInArea(e)?[]:s==="r"&&!n?h2(t,e,s,i):m2(t,e,s,n,i,l)}function cg(t,e,s,n,i){const l=[],c=s==="x"?"inXRange":"inYRange";let u=!1;return Ol(t,s,e,(h,f,p)=>{h[c]&&h[c](e[s],i)&&(l.push({element:h,datasetIndex:f,index:p}),u=u||h.inRange(e.x,e.y,i))}),n&&!u?[]:l}var f2={modes:{index(t,e,s,n){const i=sr(e,t),l=s.axis||"x",c=s.includeInvisible||!1,u=s.intersect?Qd(t,i,l,n,c):Jd(t,i,l,!1,n,c),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,x=f.data[p];x&&!x.skip&&h.push({element:x,datasetIndex:f.index,index:p})}),h):[]},dataset(t,e,s,n){const i=sr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;let u=s.intersect?Qd(t,i,l,n,c):Jd(t,i,l,!1,n,c);if(u.length>0){const h=u[0].datasetIndex,f=t.getDatasetMeta(h).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:h,index:p})}return u},point(t,e,s,n){const i=sr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Qd(t,i,l,n,c)},nearest(t,e,s,n){const i=sr(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return Jd(t,i,l,s.intersect,n,c)},x(t,e,s,n){const i=sr(e,t);return cg(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=sr(e,t);return cg(t,i,"y",s.intersect,n)}}};const N0=["left","top","right","bottom"];function Ka(t,e){return t.filter(s=>s.pos===e)}function dg(t,e){return t.filter(s=>N0.indexOf(s.pos)===-1&&s.box.axis===e)}function Xa(t,e){return t.sort((s,n)=>{const i=e?n:s,l=e?s:n;return i.weight===l.weight?i.index-l.index:i.weight-l.weight})}function p2(t){const e=[];let s,n,i,l,c,u;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:l,options:{stack:c,stackWeight:u=1}}=i,e.push({index:s,box:i,pos:l,horizontal:i.isHorizontal(),weight:i.weight,stack:c&&l+c,stackWeight:u});return e}function g2(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:l}=s;if(!n||!N0.includes(i))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return e}function x2(t,e){const s=g2(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let l,c,u;for(l=0,c=t.length;l<c;++l){u=t[l];const{fullSize:h}=u.box,f=s[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*n:h&&e.availableWidth,u.height=i):(u.width=n,u.height=p?p*i:h&&e.availableHeight)}return s}function y2(t){const e=p2(t),s=Xa(e.filter(f=>f.box.fullSize),!0),n=Xa(Ka(e,"left"),!0),i=Xa(Ka(e,"right")),l=Xa(Ka(e,"top"),!0),c=Xa(Ka(e,"bottom")),u=dg(e,"x"),h=dg(e,"y");return{fullSize:s,leftAndTop:n.concat(l),rightAndBottom:i.concat(h).concat(c).concat(u),chartArea:Ka(e,"chartArea"),vertical:n.concat(i).concat(h),horizontal:l.concat(c).concat(u)}}function ug(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function _0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function b2(t,e,s,n){const{pos:i,box:l}=s,c=t.maxPadding;if(!Oe(i)){s.size&&(t[i]-=s.size);const x=n[s.stack]||{size:0,count:1};x.size=Math.max(x.size,s.horizontal?l.height:l.width),s.size=x.size/x.count,t[i]+=s.size}l.getPadding&&_0(c,l.getPadding());const u=Math.max(0,e.outerWidth-ug(c,t,"left","right")),h=Math.max(0,e.outerHeight-ug(c,t,"top","bottom")),f=u!==t.w,p=h!==t.h;return t.w=u,t.h=h,s.horizontal?{same:f,other:p}:{same:p,other:f}}function v2(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function w2(t,e){const s=e.maxPadding;function n(i){const l={left:0,top:0,right:0,bottom:0};return i.forEach(c=>{l[c]=Math.max(e[c],s[c])}),l}return n(t?["left","right"]:["top","bottom"])}function ei(t,e,s,n){const i=[];let l,c,u,h,f,p;for(l=0,c=t.length,f=0;l<c;++l){u=t[l],h=u.box,h.update(u.width||e.w,u.height||e.h,w2(u.horizontal,e));const{same:x,other:b}=b2(e,s,u,n);f|=x&&i.length,p=p||b,h.fullSize||i.push(u)}return f&&ei(i,e,s,n)||p}function Ko(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function hg(t,e,s,n){const i=s.padding;let{x:l,y:c}=e;for(const u of t){const h=u.box,f=n[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const x=e.w*p,b=f.size||h.height;pi(f.start)&&(c=f.start),h.fullSize?Ko(h,i.left,c,s.outerWidth-i.right-i.left,b):Ko(h,e.left+f.placed,c,x,b),f.start=c,f.placed+=x,c=h.bottom}else{const x=e.h*p,b=f.size||h.width;pi(f.start)&&(l=f.start),h.fullSize?Ko(h,l,i.top,b,s.outerHeight-i.bottom-i.top):Ko(h,l,e.top+f.placed,b,x),f.start=l,f.placed+=x,l=h.right}}e.x=l,e.y=c}var ds={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=us(t.options.layout.padding),l=Math.max(e-i.width,0),c=Math.max(s-i.height,0),u=y2(t.boxes),h=u.vertical,f=u.horizontal;We(t.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const p=h.reduce((j,N)=>N.box.options&&N.box.options.display===!1?j:j+1,0)||1,x=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},i);_0(b,us(n));const w=Object.assign({maxPadding:b,w:l,h:c,x:i.left,y:i.top},i),v=x2(h.concat(f),x);ei(u.fullSize,w,x,v),ei(h,w,x,v),ei(f,w,x,v)&&ei(h,w,x,v),v2(w),hg(u.leftAndTop,w,x,v),w.x+=w.w,w.y+=w.h,hg(u.rightAndBottom,w,x,v),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},We(u.chartArea,j=>{const N=j.box;Object.assign(N,t.chartArea),N.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class k0{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class j2 extends k0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ll="$chartjs",N2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mg=t=>t===null||t==="";function _2(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[ll]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",mg(i)){const l=Qp(t,"width");l!==void 0&&(t.width=l)}if(mg(n))if(t.style.height==="")t.height=t.width/(e||2);else{const l=Qp(t,"height");l!==void 0&&(t.height=l)}return t}const S0=N_?{passive:!0}:!1;function k2(t,e,s){t&&t.addEventListener(e,s,S0)}function S2(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,S0)}function C2(t,e){const s=N2[t.type]||t.type,{x:n,y:i}=sr(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function wl(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function E2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||wl(u.addedNodes,n),c=c&&!wl(u.removedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function A2(t,e,s){const n=t.canvas,i=new MutationObserver(l=>{let c=!1;for(const u of l)c=c||wl(u.removedNodes,n),c=c&&!wl(u.addedNodes,n);c&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const vi=new Map;let fg=0;function C0(){const t=window.devicePixelRatio;t!==fg&&(fg=t,vi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function P2(t,e){vi.size||window.addEventListener("resize",C0),vi.set(t,e)}function M2(t){vi.delete(t),vi.size||window.removeEventListener("resize",C0)}function T2(t,e,s){const n=t.canvas,i=n&&sh(n);if(!i)return;const l=a0((u,h)=>{const f=i.clientWidth;s(u,h),f<i.clientWidth&&s()},window),c=new ResizeObserver(u=>{const h=u[0],f=h.contentRect.width,p=h.contentRect.height;f===0&&p===0||l(f,p)});return c.observe(i),P2(t,l),c}function Gd(t,e,s){s&&s.disconnect(),e==="resize"&&M2(t)}function D2(t,e,s){const n=t.canvas,i=a0(l=>{t.ctx!==null&&s(C2(l,t))},t);return k2(n,e,i),i}class R2 extends k0{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(_2(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[ll])return!1;const n=s[ll].initial;["height","width"].forEach(l=>{const c=n[l];He(c)?s.removeAttribute(l):s.setAttribute(l,c)});const i=n.style||{};return Object.keys(i).forEach(l=>{s.style[l]=i[l]}),s.width=s.width,delete s[ll],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),c={attach:E2,detach:A2,resize:T2}[s]||D2;i[s]=c(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:Gd,detach:Gd,resize:Gd}[s]||S2)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return j_(e,s,n,i)}isAttached(e){const s=e&&sh(e);return!!(s&&s.isConnected)}}function F2(t){return!th()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?j2:R2}class on{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return gi(this.x)&&gi(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(l=>{i[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),i}}function L2(t,e){const s=t.options.ticks,n=O2(t),i=Math.min(s.maxTicksLimit||n,n),l=s.major.enabled?B2(e):[],c=l.length,u=l[0],h=l[c-1],f=[];if(c>i)return z2(e,f,l,c/i),f;const p=I2(l,e,i);if(c>0){let x,b;const w=c>1?Math.round((h-u)/(c-1)):null;for(Xo(e,f,p,He(w)?0:u-w,u),x=0,b=c-1;x<b;x++)Xo(e,f,p,l[x],l[x+1]);return Xo(e,f,p,h,He(w)?e.length:h+w),f}return Xo(e,f,p),f}function O2(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function I2(t,e,s){const n=$2(t),i=e.length/s;if(!n)return Math.max(i,1);const l=wN(n);for(let c=0,u=l.length-1;c<u;c++){const h=l[c];if(h>i)return h}return Math.max(i,1)}function B2(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function z2(t,e,s,n){let i=0,l=s[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===l&&(e.push(t[c]),i++,l=s[i*n])}function Xo(t,e,s,n,i){const l=Te(n,0),c=Math.min(Te(i,t.length),t.length);let u=0,h,f,p;for(s=Math.ceil(s),i&&(h=i-n,s=h/Math.floor(h/s)),p=l;p<0;)u++,p=Math.round(l+u*s);for(f=Math.max(l,0);f<c;f++)f===p&&(e.push(t[f]),u++,p=Math.round(l+u*s))}function $2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const U2=t=>t==="left"?"right":t==="right"?"left":t,pg=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,gg=(t,e)=>Math.min(e||t,t);function xg(t,e){const s=[],n=t.length/e,i=t.length;let l=0;for(;l<i;l+=n)s.push(t[Math.floor(l)]);return s}function H2(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),l=t._startPixel,c=t._endPixel,u=1e-6;let h=t.getPixelForTick(i),f;if(!(s&&(n===1?f=Math.max(h-l,c-h):e===0?f=(t.getPixelForTick(1)-h)/2:f=(h-t.getPixelForTick(i-1))/2,h+=i<e?f:-f,h<l-u||h>c+u)))return h}function V2(t,e){We(t,s=>{const n=s.gc,i=n.length/2;let l;if(i>e){for(l=0;l<i;++l)delete s.data[n[l]];n.splice(0,i)}})}function Qa(t){return t.drawTicks?t.tickLength:0}function yg(t,e){if(!t.display)return 0;const s=Dt(t.font,e),n=us(t.padding);return(ht(t.text)?t.text.length:1)*s.lineHeight+n.height}function W2(t,e){return fr(t,{scale:e,type:"scale"})}function q2(t,e,s){return fr(t,{tick:s,index:e,type:"tick"})}function Y2(t,e,s){let n=Ku(t);return(s&&e!=="right"||!s&&e==="right")&&(n=U2(n)),n}function K2(t,e,s,n){const{top:i,left:l,bottom:c,right:u,chart:h}=t,{chartArea:f,scales:p}=h;let x=0,b,w,v;const j=c-i,N=u-l;if(t.isHorizontal()){if(w=Pt(n,l,u),Oe(s)){const E=Object.keys(s)[0],S=s[E];v=p[E].getPixelForValue(S)+j-e}else s==="center"?v=(f.bottom+f.top)/2+j-e:v=pg(t,s,e);b=u-l}else{if(Oe(s)){const E=Object.keys(s)[0],S=s[E];w=p[E].getPixelForValue(S)-N+e}else s==="center"?w=(f.left+f.right)/2-N+e:w=pg(t,s,e);v=Pt(n,c,i),x=s==="left"?-xt:xt}return{titleX:w,titleY:v,maxWidth:b,rotation:x}}class aa extends on{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=Ms(e,Number.POSITIVE_INFINITY),s=Ms(s,Number.NEGATIVE_INFINITY),n=Ms(n,Number.POSITIVE_INFINITY),i=Ms(i,Number.NEGATIVE_INFINITY),{min:Ms(e,n),max:Ms(s,i),minDefined:Rt(e),maxDefined:Rt(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:l}=this.getUserBounds(),c;if(i&&l)return{min:s,max:n};const u=this.getMatchingVisibleMetas();for(let h=0,f=u.length;h<f;++h)c=u[h].controller.getMinMax(this,e),i||(s=Math.min(s,c.min)),l||(n=Math.max(n,c.max));return s=l&&s>n?n:s,n=i&&s>n?s:n,{min:Ms(s,Ms(n,s)),max:Ms(n,Ms(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Je(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:l,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=e_(this,l,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?xg(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=L2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Je(this.options.afterUpdate,[this])}beforeSetDimensions(){Je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,l;for(n=0,i=e.length;n<i;n++)l=e[n],l.label=Je(s.callback,[l.value,n,e],this)}afterTickToLabelConversion(){Je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=gg(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,l=s.maxRotation;let c=i,u,h,f;if(!this._isVisible()||!s.display||i>=l||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const p=this._getLabelSizes(),x=p.widest.width,b=p.highest.height,w=Tt(this.chart.width-x,0,this.maxWidth);u=e.offset?this.maxWidth/n:w/(n-1),x+6>u&&(u=w/(n-(e.offset?.5:1)),h=this.maxHeight-Qa(e.grid)-s.padding-yg(e.title,this.chart.options.font),f=Math.sqrt(x*x+b*b),c=kN(Math.min(Math.asin(Tt((p.highest.height+6)/u,-1,1)),Math.asin(Tt(h/f,-1,1))-Math.asin(Tt(b/f,-1,1)))),c=Math.max(i,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:l}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const h=yg(i,s.options.font);if(u?(e.width=this.maxWidth,e.height=Qa(l)+h):(e.height=this.maxHeight,e.width=Qa(l)+h),n.display&&this.ticks.length){const{first:f,last:p,widest:x,highest:b}=this._getLabelSizes(),w=n.padding*2,v=Zs(this.labelRotation),j=Math.cos(v),N=Math.sin(v);if(u){const E=n.mirror?0:N*x.width+j*b.height;e.height=Math.min(this.maxHeight,e.height+E+w)}else{const E=n.mirror?0:j*x.width+N*b.height;e.width=Math.min(this.maxWidth,e.width+E+w)}this._calculatePadding(f,p,N,j)}}this._handleMargins(),u?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:l,padding:c},position:u}=this.options,h=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,w=0;h?f?(b=i*e.width,w=n*s.height):(b=n*e.height,w=i*s.width):l==="start"?w=s.width:l==="end"?b=e.width:l!=="inner"&&(b=e.width/2,w=s.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((w-x+c)*this.width/(this.width-x),0)}else{let p=s.height/2,x=e.height/2;l==="start"?(p=0,x=e.height):l==="end"&&(p=s.height,x=0),this.paddingTop=p+c,this.paddingBottom=x+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)He(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=xg(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:l}=this,c=[],u=[],h=Math.floor(s/gg(s,n));let f=0,p=0,x,b,w,v,j,N,E,S,P,D,T;for(x=0;x<s;x+=h){if(v=e[x].label,j=this._resolveTickFontOptions(x),i.font=N=j.string,E=l[N]=l[N]||{data:{},gc:[]},S=j.lineHeight,P=D=0,!He(v)&&!ht(v))P=Wp(i,E.data,E.gc,P,v),D=S;else if(ht(v))for(b=0,w=v.length;b<w;++b)T=v[b],!He(T)&&!ht(T)&&(P=Wp(i,E.data,E.gc,P,T),D+=S);c.push(P),u.push(D),f=Math.max(P,f),p=Math.max(D,p)}V2(l,s);const L=c.indexOf(f),R=u.indexOf(p),F=U=>({width:c[U]||0,height:u[U]||0});return{first:F(0),last:F(s-1),widest:F(L),highest:F(R),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return CN(this._alignToPixels?Zn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=q2(this.getContext(),e,n))}return this.$context||(this.$context=W2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Zs(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),l=this._getLabelSizes(),c=e.autoSkipPadding||0,u=l?l.widest.width+c:0,h=l?l.highest.height+c:0;return this.isHorizontal()?h*n>u*i?u/n:h/i:h*i<u*n?h/n:u/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:l,position:c,border:u}=i,h=l.offset,f=this.isHorizontal(),x=this.ticks.length+(h?1:0),b=Qa(l),w=[],v=u.setContext(this.getContext()),j=v.display?v.width:0,N=j/2,E=function(I){return Zn(n,I,j)};let S,P,D,T,L,R,F,U,H,B,Q,ne;if(c==="top")S=E(this.bottom),R=this.bottom-b,U=S-N,B=E(e.top)+N,ne=e.bottom;else if(c==="bottom")S=E(this.top),B=e.top,ne=E(e.bottom)-N,R=S+N,U=this.top+b;else if(c==="left")S=E(this.right),L=this.right-b,F=S-N,H=E(e.left)+N,Q=e.right;else if(c==="right")S=E(this.left),H=e.left,Q=E(e.right)-N,L=S+N,F=this.left+b;else if(s==="x"){if(c==="center")S=E((e.top+e.bottom)/2+.5);else if(Oe(c)){const I=Object.keys(c)[0],K=c[I];S=E(this.chart.scales[I].getPixelForValue(K))}B=e.top,ne=e.bottom,R=S+N,U=R+b}else if(s==="y"){if(c==="center")S=E((e.left+e.right)/2);else if(Oe(c)){const I=Object.keys(c)[0],K=c[I];S=E(this.chart.scales[I].getPixelForValue(K))}L=S-N,F=L-b,H=e.left,Q=e.right}const V=Te(i.ticks.maxTicksLimit,x),re=Math.max(1,Math.ceil(x/V));for(P=0;P<x;P+=re){const I=this.getContext(P),K=l.setContext(I),q=u.setContext(I),te=K.lineWidth,ee=K.color,C=q.dash||[],A=q.dashOffset,ae=K.tickWidth,de=K.tickColor,$=K.tickBorderDash||[],Z=K.tickBorderDashOffset;D=H2(this,P,h),D!==void 0&&(T=Zn(n,D,te),f?L=F=H=Q=T:R=U=B=ne=T,w.push({tx1:L,ty1:R,tx2:F,ty2:U,x1:H,y1:B,x2:Q,y2:ne,width:te,color:ee,borderDash:C,borderDashOffset:A,tickWidth:ae,tickColor:de,tickBorderDash:$,tickBorderDashOffset:Z}))}return this._ticksLength=x,this._borderValue=S,w}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:l}=n,c=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:f,padding:p,mirror:x}=l,b=Qa(n.grid),w=b+p,v=x?-p:w,j=-Zs(this.labelRotation),N=[];let E,S,P,D,T,L,R,F,U,H,B,Q,ne="middle";if(i==="top")L=this.bottom-v,R=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+v,R=this._getXAxisLabelAlignment();else if(i==="left"){const re=this._getYAxisLabelAlignment(b);R=re.textAlign,T=re.x}else if(i==="right"){const re=this._getYAxisLabelAlignment(b);R=re.textAlign,T=re.x}else if(s==="x"){if(i==="center")L=(e.top+e.bottom)/2+w;else if(Oe(i)){const re=Object.keys(i)[0],I=i[re];L=this.chart.scales[re].getPixelForValue(I)+w}R=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")T=(e.left+e.right)/2-w;else if(Oe(i)){const re=Object.keys(i)[0],I=i[re];T=this.chart.scales[re].getPixelForValue(I)}R=this._getYAxisLabelAlignment(b).textAlign}s==="y"&&(h==="start"?ne="top":h==="end"&&(ne="bottom"));const V=this._getLabelSizes();for(E=0,S=u.length;E<S;++E){P=u[E],D=P.label;const re=l.setContext(this.getContext(E));F=this.getPixelForTick(E)+l.labelOffset,U=this._resolveTickFontOptions(E),H=U.lineHeight,B=ht(D)?D.length:1;const I=B/2,K=re.color,q=re.textStrokeColor,te=re.textStrokeWidth;let ee=R;c?(T=F,R==="inner"&&(E===S-1?ee=this.options.reverse?"left":"right":E===0?ee=this.options.reverse?"right":"left":ee="center"),i==="top"?f==="near"||j!==0?Q=-B*H+H/2:f==="center"?Q=-V.highest.height/2-I*H+H:Q=-V.highest.height+H/2:f==="near"||j!==0?Q=H/2:f==="center"?Q=V.highest.height/2-I*H:Q=V.highest.height-B*H,x&&(Q*=-1),j!==0&&!re.showLabelBackdrop&&(T+=H/2*Math.sin(j))):(L=F,Q=(1-B)*H/2);let C;if(re.showLabelBackdrop){const A=us(re.backdropPadding),ae=V.heights[E],de=V.widths[E];let $=Q-A.top,Z=0-A.left;switch(ne){case"middle":$-=ae/2;break;case"bottom":$-=ae;break}switch(R){case"center":Z-=de/2;break;case"right":Z-=de;break;case"inner":E===S-1?Z-=de:E>0&&(Z-=de/2);break}C={left:Z,top:$,width:de+A.width,height:ae+A.height,color:re.backdropColor}}N.push({label:D,font:U,textOffset:Q,options:{rotation:j,color:K,strokeColor:q,strokeWidth:te,textAlign:ee,textBaseline:ne,translation:[T,L],backdrop:C}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Zs(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:l}}=this.options,c=this._getLabelSizes(),u=e+l,h=c.widest.width;let f,p;return s==="left"?i?(p=this.right+l,n==="near"?f="left":n==="center"?(f="center",p+=h/2):(f="right",p+=h)):(p=this.right-u,n==="near"?f="right":n==="center"?(f="center",p-=h/2):(f="left",p=this.left)):s==="right"?i?(p=this.left+l,n==="near"?f="right":n==="center"?(f="center",p-=h/2):(f="left",p-=h)):(p=this.left+u,n==="near"?f="left":n==="center"?(f="center",p+=h/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:l,height:c}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,l,c),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(l=>l.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,c;const u=(h,f,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(f.x,f.y),n.stroke(),n.restore())};if(s.display)for(l=0,c=i.length;l<c;++l){const h=i[l];s.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),s.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,l=n.setContext(this.getContext()),c=n.display?l.width:0;if(!c)return;const u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,p,x,b;this.isHorizontal()?(f=Zn(e,this.left,c)-c/2,p=Zn(e,this.right,u)+u/2,x=b=h):(x=Zn(e,this.top,c)-c/2,b=Zn(e,this.bottom,u)+u/2,f=p=h),s.save(),s.lineWidth=l.width,s.strokeStyle=l.color,s.beginPath(),s.moveTo(f,x),s.lineTo(p,b),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Dl(n,i);const l=this.getLabelItems(e);for(const c of l){const u=c.options,h=c.font,f=c.label,p=c.textOffset;bi(n,f,0,p,h,u)}i&&Rl(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const l=Dt(n.font),c=us(n.padding),u=n.align;let h=l.lineHeight/2;s==="bottom"||s==="center"||Oe(s)?(h+=c.bottom,ht(n.text)&&(h+=l.lineHeight*(n.text.length-1))):h+=c.top;const{titleX:f,titleY:p,maxWidth:x,rotation:b}=K2(this,h,s,u);bi(e,n.text,0,0,l,{color:n.color,maxWidth:x,rotation:b,textAlign:Y2(u,s,i),textBaseline:"middle",translation:[f,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Te(e.grid&&e.grid.z,-1),i=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==aa.prototype.draw?[{z:s,draw:l=>{this.draw(l)}}]:[{z:n,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let l,c;for(l=0,c=s.length;l<c;++l){const u=s[l];u[n]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Dt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Qo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;J2(s)&&(n=this.register(s));const i=this.items,l=e.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in i||(i[l]=e,X2(e,c,n),this.override&&lt.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in lt[i]&&(delete lt[i][n],this.override&&delete hr[n])}}function X2(t,e,s){const n=fi(Object.create(null),[s?lt.get(s):{},lt.get(e),t.defaults]);lt.set(e,n),t.defaultRoutes&&Q2(e,t.defaultRoutes),t.descriptors&&lt.describe(e,t.descriptors)}function Q2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),l=[t].concat(n).join("."),c=e[s].split("."),u=c.pop(),h=c.join(".");lt.route(l,i,h,u)})}function J2(t){return"id"in t&&"defaults"in t}class G2{constructor(){this.controllers=new Qo(Ll,"datasets",!0),this.elements=new Qo(on,"elements"),this.plugins=new Qo(Object,"plugins"),this.scales=new Qo(aa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const l=n||this._getRegistryForType(i);n||l.isForType(i)||l===this.plugins&&i.id?this._exec(e,l,i):We(i,c=>{const u=n||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,s,n){const i=qu(e);Je(n["before"+i],[],n),s[e](n),Je(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Ds=new G2;class Z2{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=i?this._descriptors(e).filter(i):this._descriptors(e),c=this._notify(l,e,s,n);return s==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,s,n,i){i=i||{};for(const l of e){const c=l.plugin,u=c[n],h=[s,i,l.options];if(Je(u,h,c)===!1&&i.cancelable)return!1}return!0}invalidate(){He(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=Te(n.options&&n.options.plugins,{}),l=ek(n);return i===!1&&!s?[]:sk(e,l,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(l,c)=>l.filter(u=>!c.some(h=>u.plugin.id===h.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function ek(t){const e={},s=[],n=Object.keys(Ds.plugins.items);for(let l=0;l<n.length;l++)s.push(Ds.getPlugin(n[l]));const i=t.plugins||[];for(let l=0;l<i.length;l++){const c=i[l];s.indexOf(c)===-1&&(s.push(c),e[c.id]=!0)}return{plugins:s,localIds:e}}function tk(t,e){return!e&&t===!1?null:t===!0?{}:t}function sk(t,{plugins:e,localIds:s},n,i){const l=[],c=t.getContext();for(const u of e){const h=u.id,f=tk(n[h],i);f!==null&&l.push({plugin:u,options:nk(t.config,{plugin:u,local:s[h]},f,c)})}return l}function nk(t,{plugin:e,local:s},n,i){const l=t.pluginScopeKeys(e),c=t.getOptionScopes(n,l);return s&&e.defaults&&c.push(e.defaults),t.createResolver(c,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _u(t,e){const s=lt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function rk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function ak(t,e){return t===e?"_index_":"_value_"}function bg(t){if(t==="x"||t==="y"||t==="r")return t}function ik(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ku(t,...e){if(bg(t))return t;for(const s of e){const n=s.axis||ik(s.position)||t.length>1&&bg(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vg(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function ok(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return vg(t,"x",s[0])||vg(t,"y",s[0])}return{}}function lk(t,e){const s=hr[t.type]||{scales:{}},n=e.scales||{},i=_u(t.type,e),l=Object.create(null);return Object.keys(n).forEach(c=>{const u=n[c];if(!Oe(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const h=ku(c,u,ok(c,t),lt.scales[u.type]),f=ak(h,i),p=s.scales||{};l[c]=si(Object.create(null),[{axis:h},u,p[h],p[f]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,h=c.indexAxis||_u(u,e),p=(hr[u]||{}).scales||{};Object.keys(p).forEach(x=>{const b=rk(x,h),w=c[b+"AxisID"]||b;l[w]=l[w]||Object.create(null),si(l[w],[{axis:b},n[w],p[x]])})}),Object.keys(l).forEach(c=>{const u=l[c];si(u,[lt.scales[u.type],lt.scale])}),l}function E0(t){const e=t.options||(t.options={});e.plugins=Te(e.plugins,{}),e.scales=lk(t,e)}function A0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function ck(t){return t=t||{},t.data=A0(t.data),E0(t),t}const wg=new Map,P0=new Set;function Jo(t,e){let s=wg.get(t);return s||(s=e(),wg.set(t,s),P0.add(s)),s}const Ja=(t,e,s)=>{const n=ur(e,s);n!==void 0&&t.add(n)};class dk{constructor(e){this._config=ck(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=A0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),E0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Jo(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Jo(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Jo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:l}=this,c=this._cachedScopes(e,n),u=c.get(s);if(u)return u;const h=new Set;s.forEach(p=>{e&&(h.add(e),p.forEach(x=>Ja(h,e,x))),p.forEach(x=>Ja(h,i,x)),p.forEach(x=>Ja(h,hr[l]||{},x)),p.forEach(x=>Ja(h,lt,x)),p.forEach(x=>Ja(h,ju,x))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),P0.has(s)&&c.set(s,f),f}chartOptionScopes(){const{options:e,type:s}=this;return[e,hr[s]||{},lt.datasets[s]||{},{type:s},lt,ju]}resolveNamedOptions(e,s,n,i=[""]){const l={$shared:!0},{resolver:c,subPrefixes:u}=jg(this._resolverCache,e,i);let h=c;if(hk(c,s)){l.$shared=!1,n=Ln(n)?n():n;const f=this.createResolver(e,n,u);h=Qr(c,n,f)}for(const f of s)l[f]=h[f];return l}createResolver(e,s,n=[""],i){const{resolver:l}=jg(this._resolverCache,e,n);return Oe(s)?Qr(l,s,void 0,i):l}}function jg(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let l=n.get(i);return l||(l={resolver:Gu(e,s),subPrefixes:s.filter(u=>!u.toLowerCase().includes("hover"))},n.set(i,l)),l}const uk=t=>Oe(t)&&Object.getOwnPropertyNames(t).some(e=>Ln(t[e]));function hk(t,e){const{isScriptable:s,isIndexable:n}=c0(t);for(const i of e){const l=s(i),c=n(i),u=(c||l)&&t[i];if(l&&(Ln(u)||uk(u))||c&&ht(u))return!0}return!1}var mk="4.5.0";const fk=["top","bottom","left","right","chartArea"];function Ng(t,e){return t==="top"||t==="bottom"||fk.indexOf(t)===-1&&e==="x"}function _g(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function kg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Je(s&&s.onComplete,[t],e)}function pk(t){const e=t.chart,s=e.options.animation;Je(s&&s.onProgress,[t],e)}function M0(t){return th()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const cl={},Sg=t=>{const e=M0(t);return Object.values(cl).filter(s=>s.canvas===e).pop()};function gk(t,e,s){const n=Object.keys(t);for(const i of n){const l=+i;if(l>=e){const c=t[i];delete t[i],(s>0||l>e)&&(t[l+s]=c)}}}function xk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let Il=class{static defaults=lt;static instances=cl;static overrides=hr;static registry=Ds;static version=mk;static getChart=Sg;static register(...e){Ds.add(...e),Cg()}static unregister(...e){Ds.remove(...e),Cg()}constructor(e,s){const n=this.config=new dk(s),i=M0(e),l=Sg(i);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||F2(i)),this.platform.updateConfig(n);const u=this.platform.acquireContext(i,c.aspectRatio),h=u&&u.canvas,f=h&&h.height,p=h&&h.width;if(this.id=hN(),this.ctx=u,this.canvas=h,this.width=p,this.height=f,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Z2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=MN(x=>this.update(x),c.resizeDelay||0),this._dataChanges=[],cl[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Qs.listen(this,"complete",kg),Qs.listen(this,"progress",pk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:l}=this;return He(e)?s&&l?l:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ds}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qp(this.canvas,this.ctx),this}stop(){return Qs.stop(this),this}resize(e,s){Qs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,l=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(i,e,s,l),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,Xp(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),Je(n.onResize,[this,c],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};We(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((c,u)=>(c[u]=!1,c),{});let l=[];s&&(l=l.concat(Object.keys(s).map(c=>{const u=s[c],h=ku(c,u),f=h==="r",p=h==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),We(l,c=>{const u=c.options,h=u.id,f=ku(h,u),p=Te(u.type,c.dtype);(u.position===void 0||Ng(u.position,f)!==Ng(c.dposition))&&(u.position=c.dposition),i[h]=!0;let x=null;if(h in n&&n[h].type===p)x=n[h];else{const b=Ds.getScale(p);x=new b({id:h,type:p,ctx:this.ctx,chart:this}),n[x.id]=x}x.init(u,e)}),We(i,(c,u)=>{c||delete n[u]}),We(n,c=>{ds.configure(this,c,c.options),ds.addBox(this,c)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,l)=>i.index-l.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(_g("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(l=>l===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const l=s[n];let c=this.getDatasetMeta(n);const u=l.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=u,c.indexAxis=l.indexAxis||_u(u,this.options),c.order=l.order||0,c.index=n,c.label=""+l.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const h=Ds.getController(u),{datasetElementType:f,dataElementType:p}=lt.datasets[u];Object.assign(h,{dataElementType:Ds.getElement(p),datasetElementType:f&&Ds.getElement(f)}),c.controller=new h(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){We(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:x}=this.getDatasetMeta(f),b=!i&&l.indexOf(x)===-1;x.buildOrUpdateElements(b),c=Math.max(+x.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),i||We(l,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_g("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){We(this.scales,e=>{ds.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Lp(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:l}of s){const c=n==="_removeElements"?-l:l;gk(e,i,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=l=>new Set(e.filter(c=>c[0]===l).map((c,u)=>u+","+c.splice(1).join(","))),i=n(0);for(let l=1;l<s;l++)if(!Lp(i,n(l)))return;return Array.from(i).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ds.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],We(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,l)=>{i._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Ln(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qs.has(this)?this.attached&&!Qs.running(this)&&Qs.start(this):(this.draw(),kg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,l;for(i=0,l=s.length;i<l;++i){const c=s[i];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=b0(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Dl(s,i),e.controller.draw(),i&&Rl(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return yi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const l=f2.modes[s];return typeof l=="function"?l(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(l=>l&&l._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",l=this.getDatasetMeta(e),c=l.controller._resolveAnimations(void 0,i);pi(s)?(l.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(l,{visible:n}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Qs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qp(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete cl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c,u)=>{l.offsetX=c,l.offsetY=u,this._eventHandler(l)};We(this.options.events,l=>n(l,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(h,f)=>{s.addEventListener(this,h,f),e[h]=f},i=(h,f)=>{e[h]&&(s.removeEventListener(this,h,f),delete e[h])},l=(h,f)=>{this.canvas&&this.resize(h,f)};let c;const u=()=>{i("attach",u),this.attached=!0,this.resize(),n("resize",l),n("detach",c)};c=()=>{this.attached=!1,i("resize",l),this._stop(),this._resize(0,0),n("attach",u)},s.isAttached(this.canvas)?u():c()}unbindEvents(){We(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},We(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let l,c,u,h;for(s==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){c=e[u];const f=c&&this.getDatasetMeta(c.datasetIndex).controller;f&&f[i+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:l,index:c})=>{const u=this.getDatasetMeta(l);if(!u)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:u.data[c],index:c}});!gl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,l=(h,f)=>h.filter(p=>!f.some(x=>p.datasetIndex===x.datasetIndex&&p.index===x.index)),c=l(s,e),u=n?e:l(e,s);c.length&&this.updateHoverStyle(c,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const l=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(l||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:l}=this,c=s,u=this._getActiveElements(e,i,n,c),h=yN(e),f=xk(e,this._lastEvent,n,h);n&&(this._lastEvent=null,Je(l.onHover,[e,u,this],this),h&&Je(l.onClick,[e,u,this],this));const p=!gl(u,i);return(p||s)&&(this._active=u,this._updateHoverStyles(u,i,s)),this._lastEvent=f,p}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,i)}};function Cg(){return We(Il.instances,t=>t._plugins.invalidate())}function yk(t,e,s){const{startAngle:n,x:i,y:l,outerRadius:c,innerRadius:u,options:h}=e,{borderWidth:f,borderJoinStyle:p}=h,x=Math.min(f/c,Zt(n-s));if(t.beginPath(),t.arc(i,l,c-f/2,n+x/2,s-x/2),u>0){const b=Math.min(f/u,Zt(n-s));t.arc(i,l,u+f/2,s-b/2,n+b/2,!0)}else{const b=Math.min(f/2,c*Zt(n-s));if(p==="round")t.arc(i,l,b,s-qe/2,n+qe/2,!0);else if(p==="bevel"){const w=2*b*b,v=-w*Math.cos(s+qe/2)+i,j=-w*Math.sin(s+qe/2)+l,N=w*Math.cos(n+qe/2)+i,E=w*Math.sin(n+qe/2)+l;t.lineTo(v,j),t.lineTo(N,E)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function bk(t,e,s){const{startAngle:n,pixelMargin:i,x:l,y:c,outerRadius:u,innerRadius:h}=e;let f=i/u;t.beginPath(),t.arc(l,c,u,n-f,s+f),h>i?(f=i/h,t.arc(l,c,h,s+f,n-f,!0)):t.arc(l,c,i,s+xt,n-xt),t.closePath(),t.clip()}function vk(t){return Ju(t,["outerStart","outerEnd","innerStart","innerEnd"])}function wk(t,e,s,n){const i=vk(t.options.borderRadius),l=(s-e)/2,c=Math.min(l,n*e/2),u=h=>{const f=(s-Math.min(l,h))*n/2;return Tt(h,0,Math.min(l,f))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Tt(i.innerStart,0,c),innerEnd:Tt(i.innerEnd,0,c)}}function $r(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function jl(t,e,s,n,i,l){const{x:c,y:u,startAngle:h,pixelMargin:f,innerRadius:p}=e,x=Math.max(e.outerRadius+n+s-f,0),b=p>0?p+n+s+f:0;let w=0;const v=i-h;if(n){const re=p>0?p-n:0,I=x>0?x-n:0,K=(re+I)/2,q=K!==0?v*K/(K+n):v;w=(v-q)/2}const j=Math.max(.001,v*x-s/qe)/x,N=(v-j)/2,E=h+N+w,S=i-N-w,{outerStart:P,outerEnd:D,innerStart:T,innerEnd:L}=wk(e,b,x,S-E),R=x-P,F=x-D,U=E+P/R,H=S-D/F,B=b+T,Q=b+L,ne=E+T/B,V=S-L/Q;if(t.beginPath(),l){const re=(U+H)/2;if(t.arc(c,u,x,U,re),t.arc(c,u,x,re,H),D>0){const te=$r(F,H,c,u);t.arc(te.x,te.y,D,H,S+xt)}const I=$r(Q,S,c,u);if(t.lineTo(I.x,I.y),L>0){const te=$r(Q,V,c,u);t.arc(te.x,te.y,L,S+xt,V+Math.PI)}const K=(S-L/b+(E+T/b))/2;if(t.arc(c,u,b,S-L/b,K,!0),t.arc(c,u,b,K,E+T/b,!0),T>0){const te=$r(B,ne,c,u);t.arc(te.x,te.y,T,ne+Math.PI,E-xt)}const q=$r(R,E,c,u);if(t.lineTo(q.x,q.y),P>0){const te=$r(R,U,c,u);t.arc(te.x,te.y,P,E-xt,U)}}else{t.moveTo(c,u);const re=Math.cos(U)*x+c,I=Math.sin(U)*x+u;t.lineTo(re,I);const K=Math.cos(H)*x+c,q=Math.sin(H)*x+u;t.lineTo(K,q)}t.closePath()}function jk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u}=e;let h=e.endAngle;if(l){jl(t,e,s,n,h,i);for(let f=0;f<l;++f)t.fill();isNaN(u)||(h=c+(u%st||st))}return jl(t,e,s,n,h,i),t.fill(),h}function Nk(t,e,s,n,i){const{fullCircles:l,startAngle:c,circumference:u,options:h}=e,{borderWidth:f,borderJoinStyle:p,borderDash:x,borderDashOffset:b,borderRadius:w}=h,v=h.borderAlign==="inner";if(!f)return;t.setLineDash(x||[]),t.lineDashOffset=b,v?(t.lineWidth=f*2,t.lineJoin=p||"round"):(t.lineWidth=f,t.lineJoin=p||"bevel");let j=e.endAngle;if(l){jl(t,e,s,n,j,i);for(let N=0;N<l;++N)t.stroke();isNaN(u)||(j=c+(u%st||st))}v&&bk(t,e,j),h.selfJoin&&j-c>=qe&&w===0&&p!=="miter"&&yk(t,e,j),l||(jl(t,e,s,n,j,i),t.stroke())}class _k extends on{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.getProps(["x","y"],n),{angle:l,distance:c}=t0(i,{x:e,y:s}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),b=(this.options.spacing+this.options.borderWidth)/2,w=Te(x,h-u),v=xi(l,u,h)&&u!==h,j=w>=st||v,N=en(c,f+b,p+b);return j&&N}getCenterPoint(e){const{x:s,y:n,startAngle:i,endAngle:l,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,p=(i+l)/2,x=(c+u+f+h)/2;return{x:s+Math.cos(p)*x,y:n+Math.sin(p)*x}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,i=(s.offset||0)/4,l=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>st?Math.floor(n/st):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);const h=1-Math.sin(Math.min(qe,n||0)),f=i*h;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,jk(e,this,f,l,c),Nk(e,this,f,l,c),e.restore()}}function T0(t,e,s=e){t.lineCap=Te(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Te(s.borderDash,e.borderDash)),t.lineDashOffset=Te(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Te(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Te(s.borderWidth,e.borderWidth),t.strokeStyle=Te(s.borderColor,e.borderColor)}function kk(t,e,s){t.lineTo(s.x,s.y)}function Sk(t){return t.stepped?WN:t.tension||t.cubicInterpolationMode==="monotone"?qN:kk}function D0(t,e,s={}){const n=t.length,{start:i=0,end:l=n-1}=s,{start:c,end:u}=e,h=Math.max(i,c),f=Math.min(l,u),p=i<c&&l<c||i>u&&l>u;return{count:n,start:h,loop:e.loop,ilen:f<h&&!p?n+f-h:f-h}}function Ck(t,e,s,n){const{points:i,options:l}=e,{count:c,start:u,loop:h,ilen:f}=D0(i,s,n),p=Sk(l);let{move:x=!0,reverse:b}=n||{},w,v,j;for(w=0;w<=f;++w)v=i[(u+(b?f-w:w))%c],!v.skip&&(x?(t.moveTo(v.x,v.y),x=!1):p(t,j,v,b,l.stepped),j=v);return h&&(v=i[(u+(b?f:0))%c],p(t,j,v,b,l.stepped)),!!h}function Ek(t,e,s,n){const i=e.points,{count:l,start:c,ilen:u}=D0(i,s,n),{move:h=!0,reverse:f}=n||{};let p=0,x=0,b,w,v,j,N,E;const S=D=>(c+(f?u-D:D))%l,P=()=>{j!==N&&(t.lineTo(p,N),t.lineTo(p,j),t.lineTo(p,E))};for(h&&(w=i[S(0)],t.moveTo(w.x,w.y)),b=0;b<=u;++b){if(w=i[S(b)],w.skip)continue;const D=w.x,T=w.y,L=D|0;L===v?(T<j?j=T:T>N&&(N=T),p=(x*p+D)/++x):(P(),t.lineTo(D,T),v=L,x=0,j=N=T),E=T}P()}function Su(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Ek:Ck}function Ak(t){return t.stepped?__:t.tension||t.cubicInterpolationMode==="monotone"?k_:nr}function Pk(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),T0(t,e.options),t.stroke(i)}function Mk(t,e,s,n){const{segments:i,options:l}=e,c=Su(e);for(const u of i)T0(t,l,u.style),t.beginPath(),c(t,e,u,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Tk=typeof Path2D=="function";function Dk(t,e,s,n){Tk&&!e.options.segment?Pk(t,e,s,n):Mk(t,e,s,n)}class Bl extends on{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;g_(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=M_(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],l=this.points,c=y0(this,{property:s,start:i,end:i});if(!c.length)return;const u=[],h=Ak(n);let f,p;for(f=0,p=c.length;f<p;++f){const{start:x,end:b}=c[f],w=l[x],v=l[b];if(w===v){u.push(w);continue}const j=Math.abs((i-w[s])/(v[s]-w[s])),N=h(w,v,j,n.stepped);N[s]=e[s],u.push(N)}return u.length===1?u[0]:u}pathSegment(e,s,n){return Su(this)(e,this,s,n)}path(e,s,n){const i=this.segments,l=Su(this);let c=this._loop;s=s||0,n=n||this.points.length-s;for(const u of i)c&=l(e,this,u,{start:s,end:s+n-1});return!!c}draw(e,s,n,i){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),Dk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Eg(t,e,s,n){const i=t.options,{[s]:l}=t.getProps([s],n);return Math.abs(e-l)<i.radius+i.hitRadius}class Rk extends on{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.options,{x:l,y:c}=this.getProps(["x","y"],n);return Math.pow(e-l,2)+Math.pow(s-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return Eg(this,e,"x",s)}inYRange(e,s){return Eg(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!yi(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Nu(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function R0(t,e){const{x:s,y:n,base:i,width:l,height:c}=t.getProps(["x","y","base","width","height"],e);let u,h,f,p,x;return t.horizontal?(x=c/2,u=Math.min(s,i),h=Math.max(s,i),f=n-x,p=n+x):(x=l/2,u=s-x,h=s+x,f=Math.min(n,i),p=Math.max(n,i)),{left:u,top:f,right:h,bottom:p}}function Pn(t,e,s,n){return t?0:Tt(e,s,n)}function Fk(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,l=l0(n);return{t:Pn(i.top,l.top,0,s),r:Pn(i.right,l.right,0,e),b:Pn(i.bottom,l.bottom,0,s),l:Pn(i.left,l.left,0,e)}}function Lk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,l=qr(i),c=Math.min(e,s),u=t.borderSkipped,h=n||Oe(i);return{topLeft:Pn(!h||u.top||u.left,l.topLeft,0,c),topRight:Pn(!h||u.top||u.right,l.topRight,0,c),bottomLeft:Pn(!h||u.bottom||u.left,l.bottomLeft,0,c),bottomRight:Pn(!h||u.bottom||u.right,l.bottomRight,0,c)}}function Ok(t){const e=R0(t),s=e.right-e.left,n=e.bottom-e.top,i=Fk(t,s/2,n/2),l=Lk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:l},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,l.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(i.b,i.r))}}}}function Zd(t,e,s,n){const i=e===null,l=s===null,u=t&&!(i&&l)&&R0(t,n);return u&&(i||en(e,u.left,u.right))&&(l||en(s,u.top,u.bottom))}function Ik(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Bk(t,e){t.rect(e.x,e.y,e.w,e.h)}function eu(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,l=(t.x+t.w!==s.x+s.w?e:0)-n,c=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+l,h:t.h+c,radius:t.radius}}class zk extends on{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:l,outer:c}=Ok(this),u=Ik(c.radius)?bl:Bk;e.save(),(c.w!==l.w||c.h!==l.h)&&(e.beginPath(),u(e,eu(c,s,l)),e.clip(),u(e,eu(l,-s,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,eu(l,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return Zd(this,e,s,n)}inXRange(e,s){return Zd(this,e,null,s)}inYRange(e,s){return Zd(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(s+i)/2:s,y:l?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function $k(t,e,s){const n=t.segments,i=t.points,l=e.points,c=[];for(const u of n){let{start:h,end:f}=u;f=zl(h,f,i);const p=Cu(s,i[h],i[f],u.loop);if(!e.segments){c.push({source:u,target:p,start:i[h],end:i[f]});continue}const x=y0(e,p);for(const b of x){const w=Cu(s,l[b.start],l[b.end],b.loop),v=x0(u,i,w);for(const j of v)c.push({source:j,target:b,start:{[s]:Ag(p,w,"start",Math.max)},end:{[s]:Ag(p,w,"end",Math.min)}})}}return c}function Cu(t,e,s,n){if(n)return;let i=e[t],l=s[t];return t==="angle"&&(i=Zt(i),l=Zt(l)),{property:t,start:i,end:l}}function Uk(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,l=[];return e.segments.forEach(({start:c,end:u})=>{u=zl(c,u,i);const h=i[c],f=i[u];n!==null?(l.push({x:h.x,y:n}),l.push({x:f.x,y:n})):s!==null&&(l.push({x:s,y:h.y}),l.push({x:s,y:f.y}))}),l}function zl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Ag(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function F0(t,e){let s=[],n=!1;return ht(t)?(n=!0,s=t):s=Uk(t,e),s.length?new Bl({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Pg(t){return t&&t.fill!==!1}function Hk(t,e,s){let i=t[e].fill;const l=[e];let c;if(!s)return i;for(;i!==!1&&l.indexOf(i)===-1;){if(!Rt(i))return i;if(c=t[i],!c)return!1;if(c.visible)return i;l.push(i),i=c.fill}return!1}function Vk(t,e,s){const n=Kk(t);if(Oe(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Rt(i)&&Math.floor(i)===i?Wk(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Wk(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function qk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:Oe(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Yk(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:Oe(t)?n=t.value:n=e.getBaseValue(),n}function Kk(t){const e=t.options,s=e.fill;let n=Te(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Xk(t){const{scale:e,index:s,line:n}=t,i=[],l=n.segments,c=n.points,u=Qk(e,s);u.push(F0({x:null,y:e.bottom},n));for(let h=0;h<l.length;h++){const f=l[h];for(let p=f.start;p<=f.end;p++)Jk(i,c[p],u)}return new Bl({points:i,options:{}})}function Qk(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const l=n[i];if(l.index===e)break;l.hidden||s.unshift(l.dataset)}return s}function Jk(t,e,s){const n=[];for(let i=0;i<s.length;i++){const l=s[i],{first:c,last:u,point:h}=Gk(l,e,"x");if(!(!h||c&&u)){if(c)n.unshift(h);else if(t.push(h),!u)break}}t.push(...n)}function Gk(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],l=t.segments,c=t.points;let u=!1,h=!1;for(let f=0;f<l.length;f++){const p=l[f],x=c[p.start][s],b=c[p.end][s];if(en(i,x,b)){u=i===x,h=i===b;break}}return{first:u,last:h,point:n}}class L0{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:l,radius:c}=this;return s=s||{start:0,end:st},e.arc(i,l,c,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,l=e.angle;return{x:s+Math.cos(l)*i,y:n+Math.sin(l)*i,angle:l}}}function Zk(t){const{chart:e,fill:s,line:n}=t;if(Rt(s))return eS(e,s);if(s==="stack")return Xk(t);if(s==="shape")return!0;const i=tS(t);return i instanceof L0?i:F0(i,n)}function eS(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function tS(t){return(t.scale||{}).getPointPositionForValue?nS(t):sS(t)}function sS(t){const{scale:e={},fill:s}=t,n=qk(s,e);if(Rt(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function nS(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,l=n.reverse?e.max:e.min,c=Yk(s,e,l),u=[];if(n.grid.circular){const h=e.getPointPositionForValue(0,l);return new L0({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(c)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,c));return u}function tu(t,e,s){const n=Zk(e),{chart:i,index:l,line:c,scale:u,axis:h}=e,f=c.options,p=f.fill,x=f.backgroundColor,{above:b=x,below:w=x}=p||{},v=i.getDatasetMeta(l),j=b0(i,v);n&&c.points.length&&(Dl(t,s),rS(t,{line:c,target:n,above:b,below:w,area:s,scale:u,axis:h,clip:j}),Rl(t))}function rS(t,e){const{line:s,target:n,above:i,below:l,area:c,scale:u,clip:h}=e,f=s._loop?"angle":e.axis;t.save();let p=l;l!==i&&(f==="x"?(Mg(t,n,c.top),su(t,{line:s,target:n,color:i,scale:u,property:f,clip:h}),t.restore(),t.save(),Mg(t,n,c.bottom)):f==="y"&&(Tg(t,n,c.left),su(t,{line:s,target:n,color:l,scale:u,property:f,clip:h}),t.restore(),t.save(),Tg(t,n,c.right),p=i)),su(t,{line:s,target:n,color:p,scale:u,property:f,clip:h}),t.restore()}function Mg(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:f}=u,p=i[h],x=i[zl(h,f,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(p.x,s),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(x.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Tg(t,e,s){const{segments:n,points:i}=e;let l=!0,c=!1;t.beginPath();for(const u of n){const{start:h,end:f}=u,p=i[h],x=i[zl(h,f,i)];l?(t.moveTo(p.x,p.y),l=!1):(t.lineTo(s,p.y),t.lineTo(p.x,p.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(s,x.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function su(t,e){const{line:s,target:n,property:i,color:l,scale:c,clip:u}=e,h=$k(s,n,i);for(const{source:f,target:p,start:x,end:b}of h){const{style:{backgroundColor:w=l}={}}=f,v=n!==!0;t.save(),t.fillStyle=w,aS(t,c,u,v&&Cu(i,x,b)),t.beginPath();const j=!!s.pathSegment(t,f);let N;if(v){j?t.closePath():Dg(t,n,b,i);const E=!!n.pathSegment(t,p,{move:j,reverse:!0});N=j&&E,N||Dg(t,n,x,i)}t.closePath(),t.fill(N?"evenodd":"nonzero"),t.restore()}}function aS(t,e,s,n){const i=e.chart.chartArea,{property:l,start:c,end:u}=n||{};if(l==="x"||l==="y"){let h,f,p,x;l==="x"?(h=c,f=i.top,p=u,x=i.bottom):(h=i.left,f=c,p=i.right,x=u),t.beginPath(),s&&(h=Math.max(h,s.left),p=Math.min(p,s.right),f=Math.max(f,s.top),x=Math.min(x,s.bottom)),t.rect(h,f,p-h,x-f),t.clip()}}function Dg(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var iS={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let l,c,u,h;for(c=0;c<n;++c)l=t.getDatasetMeta(c),u=l.dataset,h=null,u&&u.options&&u instanceof Bl&&(h={visible:t.isDatasetVisible(c),index:c,fill:Vk(u,c,n),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:u}),l.$filler=h,i.push(h);for(c=0;c<n;++c)h=i[c],!(!h||h.fill===!1)&&(h.fill=Hk(i,c,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let c=i.length-1;c>=0;--c){const u=i[c].$filler;u&&(u.line.updateControlPoints(l,u.axis),n&&u.fill&&tu(t.ctx,u,l))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const l=n[i].$filler;Pg(l)&&tu(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Pg(n)||s.drawTime!=="beforeDatasetDraw"||tu(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Rg=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},oS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Fg extends on{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Je(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Dt(n.font),l=i.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=Rg(n,l);let f,p;s.font=i.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(c,l,u,h)+10):(p=this.maxHeight,f=this._fitCols(c,i,u,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:l,maxWidth:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],p=i+u;let x=e;l.textAlign="left",l.textBaseline="middle";let b=-1,w=-p;return this.legendItems.forEach((v,j)=>{const N=n+s/2+l.measureText(v.text).width;(j===0||f[f.length-1]+N+2*u>c)&&(x+=p,f[f.length-(j>0?0:1)]=0,w+=p,b++),h[j]={left:0,top:w,row:b,width:N,height:i},f[f.length-1]+=N+u}),x}_fitCols(e,s,n,i){const{ctx:l,maxHeight:c,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],p=c-e;let x=u,b=0,w=0,v=0,j=0;return this.legendItems.forEach((N,E)=>{const{itemWidth:S,itemHeight:P}=lS(n,s,l,N,i);E>0&&w+P+2*u>p&&(x+=b+u,f.push({width:b,height:w}),v+=b+u,j++,b=w=0),h[E]={left:v,top:w,col:j,width:S,height:P},b=Math.max(b,S),w+=P+u}),x+=b,f.push({width:b,height:w}),x}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:l}}=this,c=Yr(l,this.left,this.width);if(this.isHorizontal()){let u=0,h=Pt(n,this.left+i,this.right-this.lineWidths[u]);for(const f of s)u!==f.row&&(u=f.row,h=Pt(n,this.left+i,this.right-this.lineWidths[u])),f.top+=this.top+e+i,f.left=c.leftForLtr(c.x(h),f.width),h+=f.width+i}else{let u=0,h=Pt(n,this.top+e+i,this.bottom-this.columnSizes[u].height);for(const f of s)f.col!==u&&(u=f.col,h=Pt(n,this.top+e+i,this.bottom-this.columnSizes[u].height)),f.top=h,f.left+=this.left+i,f.left=c.leftForLtr(c.x(f.left),f.width),h+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Dl(e,this),this._draw(),Rl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:l,labels:c}=e,u=lt.color,h=Yr(e.rtl,this.left,this.width),f=Dt(c.font),{padding:p}=c,x=f.size,b=x/2;let w;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:v,boxHeight:j,itemHeight:N}=Rg(c,x),E=function(L,R,F){if(isNaN(v)||v<=0||isNaN(j)||j<0)return;i.save();const U=Te(F.lineWidth,1);if(i.fillStyle=Te(F.fillStyle,u),i.lineCap=Te(F.lineCap,"butt"),i.lineDashOffset=Te(F.lineDashOffset,0),i.lineJoin=Te(F.lineJoin,"miter"),i.lineWidth=U,i.strokeStyle=Te(F.strokeStyle,u),i.setLineDash(Te(F.lineDash,[])),c.usePointStyle){const H={radius:j*Math.SQRT2/2,pointStyle:F.pointStyle,rotation:F.rotation,borderWidth:U},B=h.xPlus(L,v/2),Q=R+b;o0(i,H,B,Q,c.pointStyleWidth&&v)}else{const H=R+Math.max((x-j)/2,0),B=h.leftForLtr(L,v),Q=qr(F.borderRadius);i.beginPath(),Object.values(Q).some(ne=>ne!==0)?bl(i,{x:B,y:H,w:v,h:j,radius:Q}):i.rect(B,H,v,j),i.fill(),U!==0&&i.stroke()}i.restore()},S=function(L,R,F){bi(i,F.text,L,R+N/2,f,{strikethrough:F.hidden,textAlign:h.textAlign(F.textAlign)})},P=this.isHorizontal(),D=this._computeTitleHeight();P?w={x:Pt(l,this.left+p,this.right-n[0]),y:this.top+p+D,line:0}:w={x:this.left+p,y:Pt(l,this.top+D+p,this.bottom-s[0].height),line:0},f0(this.ctx,e.textDirection);const T=N+p;this.legendItems.forEach((L,R)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const F=i.measureText(L.text).width,U=h.textAlign(L.textAlign||(L.textAlign=c.textAlign)),H=v+b+F;let B=w.x,Q=w.y;h.setWidth(this.width),P?R>0&&B+H+p>this.right&&(Q=w.y+=T,w.line++,B=w.x=Pt(l,this.left+p,this.right-n[w.line])):R>0&&Q+T>this.bottom&&(B=w.x=B+s[w.line].width+p,w.line++,Q=w.y=Pt(l,this.top+D+p,this.bottom-s[w.line].height));const ne=h.x(B);if(E(ne,Q,L),B=TN(U,B+v+b,P?B+H:this.right,e.rtl),S(h.x(B),Q,L),P)w.x+=H+p;else if(typeof L.text!="string"){const V=f.lineHeight;w.y+=O0(L,V)+p}else w.y+=T}),p0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Dt(s.font),i=us(s.padding);if(!s.display)return;const l=Yr(e.rtl,this.left,this.width),c=this.ctx,u=s.position,h=n.size/2,f=i.top+h;let p,x=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+f,x=Pt(e.align,x,this.right-b);else{const v=this.columnSizes.reduce((j,N)=>Math.max(j,N.height),0);p=f+Pt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const w=Pt(u,x,x+b);c.textAlign=l.textAlign(Ku(u)),c.textBaseline="middle",c.strokeStyle=s.color,c.fillStyle=s.color,c.font=n.string,bi(c,s.text,w,p,n)}_computeTitleHeight(){const e=this.options.title,s=Dt(e.font),n=us(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,l;if(en(e,this.left,this.right)&&en(s,this.top,this.bottom)){for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(i=l[n],en(e,i.left,i.left+i.width)&&en(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!uS(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,l=oS(i,n);i&&!l&&Je(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!l&&Je(s.onHover,[e,n,this],this)}else n&&Je(s.onClick,[e,n,this],this)}}function lS(t,e,s,n,i){const l=cS(n,t,e,s),c=dS(i,n,e.lineHeight);return{itemWidth:l,itemHeight:c}}function cS(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((l,c)=>l.length>c.length?l:c)),e+s.size/2+n.measureText(i).width}function dS(t,e,s){let n=t;return typeof e.text!="string"&&(n=O0(e,s)),n}function O0(t,e){const s=t.text?t.text.length:0;return e*s}function uS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var hS={id:"legend",_element:Fg,start(t,e,s){const n=t.legend=new Fg({ctx:t.ctx,options:s,chart:t});ds.configure(t,n,s),ds.addBox(t,n)},stop(t){ds.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;ds.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:l,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(s?0:void 0),p=us(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:l,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:n||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:c&&(u||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class I0 extends on{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=ht(n.text)?n.text.length:1;this._padding=us(n.padding);const l=i*Dt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:l,options:c}=this,u=c.align;let h=0,f,p,x;return this.isHorizontal()?(p=Pt(u,n,l),x=s+e,f=l-n):(c.position==="left"?(p=n+e,x=Pt(u,i,s),h=qe*-.5):(p=l-e,x=Pt(u,s,i),h=qe*.5),f=i-s),{titleX:p,titleY:x,maxWidth:f,rotation:h}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Dt(s.font),l=n.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:h,rotation:f}=this._drawArgs(l);bi(e,s.text,0,0,n,{color:s.color,maxWidth:h,rotation:f,textAlign:Ku(s.align),textBaseline:"middle",translation:[c,u]})}}function mS(t,e){const s=new I0({ctx:t.ctx,options:e,chart:t});ds.configure(t,s,e),ds.addBox(t,s),t.titleBlock=s}var fS={id:"title",_element:I0,start(t,e,s){mS(t,s)},stop(t){const e=t.titleBlock;ds.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;ds.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ti={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,l=0;for(e=0,s=t.length;e<s;++e){const u=t[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();n.add(h.x),i+=h.y,++l}}return l===0||n.size===0?!1:{x:[...n].reduce((u,h)=>u+h)/n.size,y:i/l}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,l,c,u;for(l=0,c=t.length;l<c;++l){const h=t[l].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),p=wu(e,f);p<i&&(i=p,u=h)}}if(u){const h=u.tooltipPosition();s=h.x,n=h.y}return{x:s,y:n}}};function Ts(t,e){return e&&(ht(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Js(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pS(t,e){const{element:s,datasetIndex:n,index:i}=e,l=t.getDatasetMeta(n).controller,{label:c,value:u}=l.getLabelAndValue(i);return{chart:t,label:c,parsed:l.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:u,dataset:l.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Lg(t,e){const s=t.chart.ctx,{body:n,footer:i,title:l}=t,{boxWidth:c,boxHeight:u}=e,h=Dt(e.bodyFont),f=Dt(e.titleFont),p=Dt(e.footerFont),x=l.length,b=i.length,w=n.length,v=us(e.padding);let j=v.height,N=0,E=n.reduce((D,T)=>D+T.before.length+T.lines.length+T.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,x&&(j+=x*f.lineHeight+(x-1)*e.titleSpacing+e.titleMarginBottom),E){const D=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;j+=w*D+(E-w)*h.lineHeight+(E-1)*e.bodySpacing}b&&(j+=e.footerMarginTop+b*p.lineHeight+(b-1)*e.footerSpacing);let S=0;const P=function(D){N=Math.max(N,s.measureText(D).width+S)};return s.save(),s.font=f.string,We(t.title,P),s.font=h.string,We(t.beforeBody.concat(t.afterBody),P),S=e.displayColors?c+2+e.boxPadding:0,We(n,D=>{We(D.before,P),We(D.lines,P),We(D.after,P)}),S=0,s.font=p.string,We(t.footer,P),s.restore(),N+=v.width,{width:N,height:j}}function gS(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function xS(t,e,s,n){const{x:i,width:l}=n,c=s.caretSize+s.caretPadding;if(t==="left"&&i+l+c>e.width||t==="right"&&i-l-c<0)return!0}function yS(t,e,s,n){const{x:i,width:l}=s,{width:c,chartArea:{left:u,right:h}}=t;let f="center";return n==="center"?f=i<=(u+h)/2?"left":"right":i<=l/2?f="left":i>=c-l/2&&(f="right"),xS(f,t,e,s)&&(f="center"),f}function Og(t,e,s){const n=s.yAlign||e.yAlign||gS(t,s);return{xAlign:s.xAlign||e.xAlign||yS(t,e,s,n),yAlign:n}}function bS(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function vS(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function Ig(t,e,s,n){const{caretSize:i,caretPadding:l,cornerRadius:c}=t,{xAlign:u,yAlign:h}=s,f=i+l,{topLeft:p,topRight:x,bottomLeft:b,bottomRight:w}=qr(c);let v=bS(e,u);const j=vS(e,h,f);return h==="center"?u==="left"?v+=f:u==="right"&&(v-=f):u==="left"?v-=Math.max(p,b)+i:u==="right"&&(v+=Math.max(x,w)+i),{x:Tt(v,0,n.width-e.width),y:Tt(j,0,n.height-e.height)}}function Go(t,e,s){const n=us(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Bg(t){return Ts([],Js(t))}function wS(t,e,s){return fr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function zg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const B0={beforeTitle:Xs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Xs,beforeBody:Xs,beforeLabel:Xs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return He(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Xs,afterBody:Xs,beforeFooter:Xs,footer:Xs,afterFooter:Xs};function Ht(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?B0[e].call(s,n):i}class $g extends on{static positioners=ti;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,l=new v0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=wS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=Ht(n,"beforeTitle",this,e),l=Ht(n,"title",this,e),c=Ht(n,"afterTitle",this,e);let u=[];return u=Ts(u,Js(i)),u=Ts(u,Js(l)),u=Ts(u,Js(c)),u}getBeforeBody(e,s){return Bg(Ht(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return We(e,l=>{const c={before:[],lines:[],after:[]},u=zg(n,l);Ts(c.before,Js(Ht(u,"beforeLabel",this,l))),Ts(c.lines,Ht(u,"label",this,l)),Ts(c.after,Js(Ht(u,"afterLabel",this,l))),i.push(c)}),i}getAfterBody(e,s){return Bg(Ht(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=Ht(n,"beforeFooter",this,e),l=Ht(n,"footer",this,e),c=Ht(n,"afterFooter",this,e);let u=[];return u=Ts(u,Js(i)),u=Ts(u,Js(l)),u=Ts(u,Js(c)),u}_createItems(e){const s=this._active,n=this.chart.data,i=[],l=[],c=[];let u=[],h,f;for(h=0,f=s.length;h<f;++h)u.push(pS(this.chart,s[h]));return e.filter&&(u=u.filter((p,x,b)=>e.filter(p,x,b,n))),e.itemSort&&(u=u.sort((p,x)=>e.itemSort(p,x,n))),We(u,p=>{const x=zg(e.callbacks,p);i.push(Ht(x,"labelColor",this,p)),l.push(Ht(x,"labelPointStyle",this,p)),c.push(Ht(x,"labelTextColor",this,p))}),this.labelColors=i,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=u,u}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let l,c=[];if(!i.length)this.opacity!==0&&(l={opacity:0});else{const u=ti[n.position].call(this,i,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const h=this._size=Lg(this,n),f=Object.assign({},u,h),p=Og(this.chart,n,f),x=Ig(n,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,l={opacity:1,x:x.x,y:x.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const l=this.getCaretPosition(e,n,i);s.lineTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineTo(l.x3,l.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:l}=this,{caretSize:c,cornerRadius:u}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:x}=qr(u),{x:b,y:w}=e,{width:v,height:j}=s;let N,E,S,P,D,T;return l==="center"?(D=w+j/2,i==="left"?(N=b,E=N-c,P=D+c,T=D-c):(N=b+v,E=N+c,P=D-c,T=D+c),S=N):(i==="left"?E=b+Math.max(h,p)+c:i==="right"?E=b+v-Math.max(f,x)-c:E=this.caretX,l==="top"?(P=w,D=P-c,N=E-c,S=E+c):(P=w+j,D=P+c,N=E+c,S=E-c),T=P),{x1:N,x2:E,x3:S,y1:P,y2:D,y3:T}}drawTitle(e,s,n){const i=this.title,l=i.length;let c,u,h;if(l){const f=Yr(n.rtl,this.x,this.width);for(e.x=Go(this,n.titleAlign,n),s.textAlign=f.textAlign(n.titleAlign),s.textBaseline="middle",c=Dt(n.titleFont),u=n.titleSpacing,s.fillStyle=n.titleColor,s.font=c.string,h=0;h<l;++h)s.fillText(i[h],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,h+1===l&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,s,n,i,l){const c=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:h,boxWidth:f}=l,p=Dt(l.bodyFont),x=Go(this,"left",l),b=i.x(x),w=h<p.lineHeight?(p.lineHeight-h)/2:0,v=s.y+w;if(l.usePointStyle){const j={radius:Math.min(f,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},N=i.leftForLtr(b,f)+f/2,E=v+h/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,Nu(e,j,N,E),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,Nu(e,j,N,E)}else{e.lineWidth=Oe(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const j=i.leftForLtr(b,f),N=i.leftForLtr(i.xPlus(b,1),f-2),E=qr(c.borderRadius);Object.values(E).some(S=>S!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,bl(e,{x:j,y:v,w:f,h,radius:E}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),bl(e,{x:N,y:v+1,w:f-2,h:h-2,radius:E}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(j,v,f,h),e.strokeRect(j,v,f,h),e.fillStyle=c.backgroundColor,e.fillRect(N,v+1,f-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:l,bodyAlign:c,displayColors:u,boxHeight:h,boxWidth:f,boxPadding:p}=n,x=Dt(n.bodyFont);let b=x.lineHeight,w=0;const v=Yr(n.rtl,this.x,this.width),j=function(F){s.fillText(F,v.x(e.x+w),e.y+b/2),e.y+=b+l},N=v.textAlign(c);let E,S,P,D,T,L,R;for(s.textAlign=c,s.textBaseline="middle",s.font=x.string,e.x=Go(this,N,n),s.fillStyle=n.bodyColor,We(this.beforeBody,j),w=u&&N!=="right"?c==="center"?f/2+p:f+2+p:0,D=0,L=i.length;D<L;++D){for(E=i[D],S=this.labelTextColors[D],s.fillStyle=S,We(E.before,j),P=E.lines,u&&P.length&&(this._drawColorBox(s,e,D,v,n),b=Math.max(x.lineHeight,h)),T=0,R=P.length;T<R;++T)j(P[T]),b=x.lineHeight;We(E.after,j)}w=0,b=x.lineHeight,We(this.afterBody,j),e.y-=l}drawFooter(e,s,n){const i=this.footer,l=i.length;let c,u;if(l){const h=Yr(n.rtl,this.x,this.width);for(e.x=Go(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=h.textAlign(n.footerAlign),s.textBaseline="middle",c=Dt(n.footerFont),s.fillStyle=n.footerColor,s.font=c.string,u=0;u<l;++u)s.fillText(i[u],h.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:l,yAlign:c}=this,{x:u,y:h}=e,{width:f,height:p}=n,{topLeft:x,topRight:b,bottomLeft:w,bottomRight:v}=qr(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(u+x,h),c==="top"&&this.drawCaret(e,s,n,i),s.lineTo(u+f-b,h),s.quadraticCurveTo(u+f,h,u+f,h+b),c==="center"&&l==="right"&&this.drawCaret(e,s,n,i),s.lineTo(u+f,h+p-v),s.quadraticCurveTo(u+f,h+p,u+f-v,h+p),c==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(u+w,h+p),s.quadraticCurveTo(u,h+p,u,h+p-w),c==="center"&&l==="left"&&this.drawCaret(e,s,n,i),s.lineTo(u,h+x),s.quadraticCurveTo(u,h,u+x,h),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,l=n&&n.y;if(i||l){const c=ti[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=Lg(this,e),h=Object.assign({},c,this._size),f=Og(s,e,h),p=Ig(e,h,f,s);(i._to!==p.x||l._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},l={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=us(s.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(l,e,i,s),f0(e,s.textDirection),l.y+=c.top,this.drawTitle(l,e,s),this.drawBody(l,e,s),this.drawFooter(l,e,s),p0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:u,index:h})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[h],index:h}}),l=!gl(n,i),c=this._positionChanged(i,s);(l||c)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,l=this._active||[],c=this._getActiveElements(e,l,s,n),u=this._positionChanged(c,e),h=s||!gl(c,l)||u;return h&&(this._active=c,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),h}_getActiveElements(e,s,n,i){const l=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,l.mode,l,n);return l.reverse&&c.reverse(),c}_positionChanged(e,s){const{caretX:n,caretY:i,options:l}=this,c=ti[l.position].call(this,e,s);return c!==!1&&(n!==c.x||i!==c.y)}}var jS={id:"tooltip",_element:$g,positioners:ti,afterInit(t,e,s){s&&(t.tooltip=new $g({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:B0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NS=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function _S(t,e,s,n){const i=t.indexOf(e);if(i===-1)return NS(t,e,s,n);const l=t.lastIndexOf(e);return i!==l?s:i}const kS=(t,e)=>t===null?null:Tt(Math.round(t),0,e);function Ug(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class SS extends aa{static id="category";static defaults={ticks:{callback:Ug}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:l}of s)n[i]===l&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(He(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:_S(n,e,Te(s,e),this._addedLabels),kS(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let l=this.getLabels();l=e===0&&s===l.length-1?l:l.slice(e,s+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=s;c++)i.push({value:c});return i}getLabelForValue(e){return Ug.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CS(t,e){const s=[],{bounds:i,step:l,min:c,max:u,precision:h,count:f,maxTicks:p,maxDigits:x,includeBounds:b}=t,w=l||1,v=p-1,{min:j,max:N}=e,E=!He(c),S=!He(u),P=!He(f),D=(N-j)/(x+1);let T=Ip((N-j)/v/w)*w,L,R,F,U;if(T<1e-14&&!E&&!S)return[{value:j},{value:N}];U=Math.ceil(N/T)-Math.floor(j/T),U>v&&(T=Ip(U*T/v/w)*w),He(h)||(L=Math.pow(10,h),T=Math.ceil(T*L)/L),i==="ticks"?(R=Math.floor(j/T)*T,F=Math.ceil(N/T)*T):(R=j,F=N),E&&S&&l&&NN((u-c)/l,T/1e3)?(U=Math.round(Math.min((u-c)/T,p)),T=(u-c)/U,R=c,F=u):P?(R=E?c:R,F=S?u:F,U=f-1,T=(F-R)/U):(U=(F-R)/T,ni(U,Math.round(U),T/1e3)?U=Math.round(U):U=Math.ceil(U));const H=Math.max(Bp(T),Bp(R));L=Math.pow(10,He(h)?H:h),R=Math.round(R*L)/L,F=Math.round(F*L)/L;let B=0;for(E&&(b&&R!==c?(s.push({value:c}),R<c&&B++,ni(Math.round((R+B*T)*L)/L,c,Hg(c,D,t))&&B++):R<c&&B++);B<U;++B){const Q=Math.round((R+B*T)*L)/L;if(S&&Q>u)break;s.push({value:Q})}return S&&b&&F!==u?s.length&&ni(s[s.length-1].value,u,Hg(u,D,t))?s[s.length-1].value=u:s.push({value:u}):(!S||F===u)&&s.push({value:F}),s}function Hg(t,e,{horizontal:s,minRotation:n}){const i=Zs(n),l=(s?Math.sin(i):Math.cos(i))||.001,c=.75*e*(""+t).length;return Math.min(e/l,c)}class ES extends aa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return He(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:l}=this;const c=h=>i=s?i:h,u=h=>l=n?l:h;if(e){const h=Os(i),f=Os(l);h<0&&f<0?u(0):h>0&&f>0&&c(0)}if(i===l){let h=l===0?1:Math.abs(l*.05);u(l+h),e||c(i-h)}this.min=i,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},l=this._range||this,c=CS(i,l);return e.bounds==="ticks"&&_N(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Qu(e,this.chart.options.locale,this.options.ticks.format)}}class AS extends ES{static id="linear";static defaults={ticks:{callback:i0.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Rt(e)?e:0,this.max=Rt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Zs(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,l.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const $l={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys($l);function Vg(t,e){return t-e}function Wg(t,e){if(He(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:l}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),Rt(c)||(c=typeof n=="string"?s.parse(c,n):s.parse(c)),c===null?null:(i&&(c=i==="week"&&(gi(l)||l===!0)?s.startOf(c,"isoWeek",l):s.startOf(c,i)),+c)}function qg(t,e,s,n){const i=Wt.length;for(let l=Wt.indexOf(t);l<i-1;++l){const c=$l[Wt[l]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((s-e)/(u*c.size))<=n)return Wt[l]}return Wt[i-1]}function PS(t,e,s,n,i){for(let l=Wt.length-1;l>=Wt.indexOf(s);l--){const c=Wt[l];if($l[c].common&&t._adapter.diff(i,n,c)>=e-1)return c}return Wt[s?Wt.indexOf(s):0]}function MS(t){for(let e=Wt.indexOf(t)+1,s=Wt.length;e<s;++e)if($l[Wt[e]].common)return Wt[e]}function Yg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=Yu(s,e),l=s[n]>=e?s[n]:s[i];t[l]=!0}}function TS(t,e,s,n){const i=t._adapter,l=+i.startOf(e[0].value,n),c=e[e.length-1].value;let u,h;for(u=l;u<=c;u=+i.add(u,1,n))h=s[u],h>=0&&(e[h].major=!0);return e}function Kg(t,e,s){const n=[],i={},l=e.length;let c,u;for(c=0;c<l;++c)u=e[c],i[u]=c,n.push({value:u,major:!1});return l===0||!s?n:TS(t,n,i,s)}class Xg extends aa{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new c2._date(e.adapters.date);i.init(s),si(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Wg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:l,minDefined:c,maxDefined:u}=this.getUserBounds();function h(f){!c&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!u&&!isNaN(f.max)&&(l=Math.max(l,f.max))}(!c||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=Rt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),l=Rt(l)&&!isNaN(l)?l:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,l-1),this.max=Math.max(i+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const l=this.min,c=this.max,u=AN(i,l,c);return this._unit=s.unit||(n.autoSkip?qg(s.minUnit,this.min,this.max,this._getLabelCapacity(l)):PS(this,u.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:MS(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),Kg(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,l;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?n=l:n=(l-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;s=Tt(s,0,c),n=Tt(n,0,c),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,l=i.time,c=l.unit||qg(l.minUnit,s,n,this._getLabelCapacity(s)),u=Te(i.ticks.stepSize,1),h=c==="week"?l.isoWeekday:!1,f=gi(h)||h===!0,p={};let x=s,b,w;if(f&&(x=+e.startOf(x,"isoWeek",h)),x=+e.startOf(x,f?"day":c),e.diff(n,s,c)>1e5*u)throw new Error(s+" and "+n+" are too far apart with stepSize of "+u+" "+c);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(b=x,w=0;b<n;b=+e.add(b,u,c),w++)Yg(p,b,v);return(b===n||i.bounds==="ticks"||w===1)&&Yg(p,b,v),Object.keys(p).sort(Vg).map(j=>+j)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,l=this._unit,c=s||i[l];return this._adapter.format(e,c)}_tickFormatFunction(e,s,n,i){const l=this.options,c=l.ticks.callback;if(c)return Je(c,[e,s,n],this);const u=l.time.displayFormats,h=this._unit,f=this._majorUnit,p=h&&u[h],x=f&&u[f],b=n[s],w=f&&x&&b&&b.major;return this._adapter.format(e,i||(w?x:p))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Zs(this.isHorizontal()?s.maxRotation:s.minRotation),l=Math.cos(i),c=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:n*l+u*c,h:n*c+u*l}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,l=this._tickFormatFunction(e,0,Kg(this,[e],this._majorUnit),i),c=this._getLabelSize(l),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(Wg(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return n0(e.sort(Vg))}}function Zo(t,e,s){let n=0,i=t.length-1,l,c,u,h;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=ar(t,"pos",e)),{pos:l,time:u}=t[n],{pos:c,time:h}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=ar(t,"time",e)),{time:l,pos:u}=t[n],{time:c,pos:h}=t[i]);const f=c-l;return f?u+(h-u)*(e-l)/f:u}class QC extends Xg{static id="timeseries";static defaults=Xg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Zo(s,this.min),this._tableRange=Zo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],l=[];let c,u,h,f,p;for(c=0,u=e.length;c<u;++c)f=e[c],f>=s&&f<=n&&i.push(f);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(c=0,u=i.length;c<u;++c)p=i[c+1],h=i[c-1],f=i[c],Math.round((p+h)/2)!==f&&l.push({time:f,pos:c/(u-1)});return l}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,l)=>i-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Zo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Zo(this._table,n*this._tableRange+this._minPos,!0)}}const z0="label";function Qg(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function DS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function $0(t,e){t.labels=e}function U0(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:z0;const n=[];t.datasets=e.map(i=>{const l=t.datasets.find(c=>c[s]===i[s]);return!l||!i.data||n.includes(l)?{...i}:(n.push(l),Object.assign(l,i),l)})}function RS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z0;const s={labels:[],datasets:[]};return $0(s,t.labels),U0(s,t.datasets,e),s}function FS(t,e){const{height:s=150,width:n=300,redraw:i=!1,datasetIdKey:l,type:c,data:u,options:h,plugins:f=[],fallbackContent:p,updateMode:x,...b}=t,w=_.useRef(null),v=_.useRef(null),j=()=>{w.current&&(v.current=new Il(w.current,{type:c,data:RS(u,l),options:h&&{...h},plugins:f}),Qg(e,v.current))},N=()=>{Qg(e,null),v.current&&(v.current.destroy(),v.current=null)};return _.useEffect(()=>{!i&&v.current&&h&&DS(v.current,h)},[i,h]),_.useEffect(()=>{!i&&v.current&&$0(v.current.config.data,u.labels)},[i,u.labels]),_.useEffect(()=>{!i&&v.current&&u.datasets&&U0(v.current.config.data,u.datasets,l)},[i,u.datasets]),_.useEffect(()=>{v.current&&(i?(N(),setTimeout(j)):v.current.update(x))},[i,h,u.labels,u.datasets,x]),_.useEffect(()=>{v.current&&(N(),setTimeout(j))},[c]),_.useEffect(()=>(j(),()=>N()),[]),wi.createElement("canvas",{ref:w,role:"img",height:s,width:n,...b},p)}const LS=_.forwardRef(FS);function rh(t,e){return Il.register(e),_.forwardRef((s,n)=>wi.createElement(LS,{...s,ref:n,type:t}))}const OS=rh("line",l2),IS=rh("bar",a2),BS=rh("doughnut",o2);Il.register(SS,AS,Rk,Bl,zk,fS,jS,hS,_k,iS);const lr={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",cornerRadius:8,displayColors:!1}}},zS=({data:t,loading:e=!1,title:s="Performance Trends"})=>{const n=_.useMemo(()=>!t||!t.length?null:{labels:t.map(c=>new Date(c.date||c.date_group||c.report_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Leads",data:t.map(c=>Number(c.leads||c.daily_leads||0)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"Spent (₹)",data:t.map(c=>Number(c.spent||c.daily_spent||0)),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,yAxisID:"y1"}]},[t]),i=_.useMemo(()=>({...lr,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Leads"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Spent (₹)"},grid:{drawOnChartArea:!1}}}}),[]);return e?a.jsx(Uu,{height:"h-80"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80",children:a.jsx(OS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No data available"})]})},$S=({data:t,loading:e=!1,title:s="Top Campaigns"})=>{const n=_.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,10);return{labels:l.map(c=>{const u=c.campaign_name||c.name||`Campaign ${c.campaign_id}`;return u.length>20?`${u.substring(0,20)}...`:u}),datasets:[{label:"Leads",data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(168, 85, 247)"],borderWidth:1}]}},[t]),i=_.useMemo(()=>({...lr,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Leads"}},x:{title:{display:!0,text:"Campaigns"}}},plugins:{...lr.plugins,tooltip:{...lr.plugins.tooltip,callbacks:{title:l=>{const c=l[0].dataIndex;return t?.[c]?.campaign_name||`Campaign ${t?.[c]?.campaign_id}`},label:l=>{const c=l.dataIndex,u=t?.[c];return u?[`Leads: ${l.formattedValue}`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`CPL: ₹${Number(u.avgCostPerLead||u.avg_cost_per_lead||u.cost_per_lead||0).toFixed(2)}`,`Brand: ${u.brand||"Unknown"}`]:l.formattedValue}}}}}),[t]);return e?a.jsx(Uu,{height:"h-96"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-96",children:a.jsx(IS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-96 flex items-center justify-center text-gray-500",children:"No campaign data available"})]})},US=({data:t,loading:e=!1,title:s="Brand Performance"})=>{const n=_.useMemo(()=>{if(!t||!t.length)return null;const l=t.slice(0,8);return{labels:l.map(c=>c.brand||"Unknown"),datasets:[{data:l.map(c=>Number(c.totalLeads||c.total_leads||c.leads||0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(14, 165, 233)","rgb(34, 197, 94)"],borderWidth:2}]}},[t]),i=_.useMemo(()=>({...lr,cutout:"60%",plugins:{...lr.plugins,tooltip:{...lr.plugins.tooltip,callbacks:{label:l=>{const c=l.dataIndex,u=t?.[c];if(!u)return l.formattedValue;const h=(l.parsed/l.dataset.data.reduce((f,p)=>f+p,0)*100).toFixed(1);return[`${u.brand||"Unknown"}: ${l.formattedValue} leads (${h}%)`,`Spent: ₹${Number(u.totalSpent||u.total_spent||u.spent||0).toLocaleString("en-IN")}`,`Campaigns: ${u.campaignsCount||u.campaigns_count||0}`]}}}}}),[t]);return e?a.jsx(Uu,{height:"h-80"}):n?a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80",children:a.jsx(BS,{data:n,options:i})})]}):a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s}),a.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:"No brand data available"})]})};class HS{constructor(){this.cache=new Map,this.timestamps=new Map,this.defaultTTL=300*1e3}generateKey(e,s,n={}){const i=JSON.stringify(n,Object.keys(n).sort());return`${e}_${s}_${i}`}set(e,s,n=this.defaultTTL){this.cache.set(e,s),this.timestamps.set(e,Date.now()+n)}get(e){const s=this.timestamps.get(e);return!s||Date.now()>s?(this.cache.delete(e),this.timestamps.delete(e),null):this.cache.get(e)}has(e){return this.get(e)!==null}delete(e){this.cache.delete(e),this.timestamps.delete(e)}clear(){this.cache.clear(),this.timestamps.clear()}cleanup(){const e=Date.now();for(const[s,n]of this.timestamps.entries())e>n&&(this.cache.delete(s),this.timestamps.delete(s))}getStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys()),memoryUsage:this.estimateMemoryUsage()}}estimateMemoryUsage(){let e=0;for(const[s,n]of this.cache.entries())e+=s.length*2,e+=JSON.stringify(n).length*2;return e}}const Vt=new HS,VS=(t,e)=>{const s={};return Object.keys(t).forEach(n=>{typeof t[n]=="function"?s[n]=async(...i)=>{const l=i[0]||{},c=Vt.generateKey(e,n,l),u=Vt.get(c);if(u)return console.log(`[Cache] Hit for ${e}.${n}`),u;console.log(`[Cache] Miss for ${e}.${n} - fetching...`);try{const h=await t[n](...i);let f=Vt.defaultTTL;return n==="getDashboardOverview"?f=120*1e3:n==="getRecentActivities"?f=60*1e3:n.includes("Trends")&&(f=600*1e3),Vt.set(c,h,f),h}catch(h){throw console.error(`[Cache] Error fetching ${e}.${n}:`,h),h}}:s[n]=t[n]}),s},WS={all:()=>{Vt.clear(),console.log("[Cache] Cleared all dashboard cache")},overview:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("getDashboardOverview")&&Vt.delete(e)}),console.log("[Cache] Cleared overview cache")},campaigns:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Campaign")&&Vt.delete(e)}),console.log("[Cache] Cleared campaign cache")},brands:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Brand")&&Vt.delete(e)}),console.log("[Cache] Cleared brand cache")},activities:()=>{Array.from(Vt.cache.keys()).forEach(e=>{e.includes("Activities")&&Vt.delete(e)}),console.log("[Cache] Cleared activities cache")}},qS=async t=>{console.log("[Cache] Preloading critical dashboard data...");const e=[t.getDashboardOverview(),t.getRecentActivities({limit:10}),t.getCampaignPerformance({limit:5})];try{await Promise.allSettled(e),console.log("[Cache] Critical data preloaded successfully")}catch(s){console.warn("[Cache] Some preload operations failed:",s)}};setInterval(()=>{Vt.cleanup(),console.log("[Cache] Cleaned up expired entries")},600*1e3);const YS=()=>{const t=new Set,e=new Map;return{register:(s,n,i)=>{if(t.has(s))return;const l=new IntersectionObserver(c=>{c.forEach(u=>{u.isIntersecting&&!t.has(s)&&(console.log(`[LazyLoad] Loading chart: ${s}`),i(),t.add(s),l.disconnect(),e.delete(s))})},{rootMargin:"50px",threshold:.1});l.observe(n),e.set(s,l)},forceLoad:(s,n)=>{if(!t.has(s)){console.log(`[LazyLoad] Force loading chart: ${s}`),n(),t.add(s);const i=e.get(s);i&&(i.disconnect(),e.delete(s))}},isLoaded:s=>t.has(s),cleanup:()=>{e.forEach(s=>s.disconnect()),e.clear(),t.clear()}}},KS=()=>{const t=mr(),{user:e}=Lu(),s=_.useMemo(()=>VS(Uj,"dashboardService"),[]),n=_.useMemo(()=>YS(),[]),[i,l]=_.useState("overview"),[c,u]=_.useState(null),[h,f]=_.useState(null),[p,x]=_.useState(null),[b,w]=_.useState(null),[v,j]=_.useState([]),[N,E]=_.useState(!1),[S,P]=_.useState(!1),[D,T]=_.useState({overview:!0,trends:!0,campaigns:!0,brands:!0,activities:!0}),[L,R]=_.useState(null),[F,U]=_.useState(new Date),H=_.useCallback(async()=>{try{T(A=>({...A,overview:!0}));const C=await s.getDashboardOverview();if(C.success)u(C.data),R(null);else throw new Error(C.message||"Failed to load dashboard data")}catch(C){console.error("Dashboard overview error:",C),C.response?.status!==401&&C.response?.status!==403&&R(C.message||"Unable to load dashboard data"),u({overview:{campaignsCount:0,totalLeads:0,totalSpent:0,avgCostPerLead:0},dailyComparison:{changes:{leadsChange:0,spentChange:0}},topCampaigns:[],brandPerformance:[]})}finally{T(C=>({...C,overview:!1}))}},[s]),B=_.useCallback(async()=>{try{T(A=>({...A,trends:!0}));const C=await s.getTrendsData({period:"30d"});C.success&&f(C.data?.series||[])}catch(C){console.error("Trends data error:",C),f([])}finally{T(C=>({...C,trends:!1}))}},[s]),Q=_.useCallback(async()=>{try{T(A=>({...A,campaigns:!0}));const C=await s.getCampaignPerformance({limit:10});C.success&&x(C.data?.campaigns||[])}catch(C){console.error("Campaign data error:",C),x([])}finally{T(C=>({...C,campaigns:!1}))}},[s]),ne=_.useCallback(async()=>{try{T(A=>({...A,brands:!0}));const C=await s.getBrandPerformance({limit:8});C.success&&w(C.data?.brands||[])}catch(C){console.error("Brand data error:",C),w([])}finally{T(C=>({...C,brands:!1}))}},[s]),V=_.useCallback(async()=>{try{T(A=>({...A,activities:!0}));const C=await s.getRecentActivities({limit:10});C.success?j(C.data?.activities||[]):j([{id:1,type:"report_generated",title:"Campaign Report Generated",description:"Monthly performance report for TK TAMIL campaign",timestamp:new Date(Date.now()-1e3*60*15).toISOString(),user:"System",status:"success"},{id:2,type:"user_login",title:"User Login",description:"User logged into dashboard",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),user:e?.username||"User",status:"success"},{id:3,type:"data_refresh",title:"Data Refreshed",description:"Dashboard data updated automatically",timestamp:new Date(Date.now()-1e3*60*45).toISOString(),user:"System",status:"success"},{id:4,type:"campaign_updated",title:"Campaign Modified",description:"TK TAMIL campaign settings updated",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),user:e?.username||"User",status:"success"},{id:5,type:"analytics_view",title:"Analytics Accessed",description:"Performance analytics page viewed",timestamp:new Date(Date.now()-1e3*60*60*3).toISOString(),user:e?.username||"User",status:"success"}])}catch(C){console.error("Activities error:",C),j([{id:1,type:"report_generated",title:"System Report",timestamp:new Date().toISOString(),user:"System",status:"success"}])}finally{T(C=>({...C,activities:!1}))}},[s,e]),re=_.useCallback(async()=>{WS.all(),U(new Date),await Promise.all([H(),B(),Q(),ne(),V()]),$j.success("Dashboard refreshed successfully!")},[H,B,Q,ne,V]);_.useEffect(()=>{qS(s).then(()=>{H(),B(),Q(),ne(),V()})},[H,B,Q,ne,V,s]),_.useEffect(()=>{const C=setInterval(re,3e5);return()=>clearInterval(C)},[re]),_.useEffect(()=>()=>{n.cleanup()},[n]);const I=C=>{switch(C){case"create_campaign":t("/campaigns?action=create");break;case"generate_report":t("/reports?action=generate");break;case"view_analytics":t("/report-analytics");break;case"manage_users":t("/user-management");break;case"export_data":t("/reports?action=export");break;default:console.log(`Action: ${C}`)}},K=c?.overview||{},te=(c?.dailyComparison||{}).changes||{},ee=[{id:"overview",name:"Overview",icon:nn},{id:"trends",name:"Trends",icon:Xr},{id:"campaigns",name:"Campaigns",icon:Ls},{id:"brands",name:"Brands",icon:K1},{id:"activity",name:"Activity",icon:Ix}];return a.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome back, ",e?.username||"User","!"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i==="overview"?"Dashboard overview and key metrics":i==="trends"?"Performance trends over time":i==="campaigns"?"Top performing campaigns":i==="brands"?"Brand performance analysis":"Recent system activity"})]}),a.jsxs("div",{className:"mt-3 lg:mt-0 flex items-center space-x-3",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:["Updated: ",F.toLocaleTimeString()]}),a.jsxs("button",{onClick:re,className:"btn-secondary flex items-center space-x-2 text-sm px-3 py-2",disabled:Object.values(D).some(Boolean),children:[a.jsx(mt,{className:`h-3 w-3 ${Object.values(D).some(Boolean)?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:ee.map(C=>{const A=C.icon;return a.jsxs("button",{onClick:()=>l(C.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(A,{className:"h-4 w-4"}),a.jsx("span",{children:C.name})]},C.id)})})}),L&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start space-x-3",children:[a.jsx(pu,{className:"h-4 w-4 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Data Loading Issue"}),a.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:L})]})]}),a.jsxs("div",{className:"space-y-6",children:[i==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[a.jsx(Bo,{title:"Campaigns",value:K.campaignsCount,icon:Ls,color:"bg-blue-500",loading:D.overview,onClick:()=>t("/campaigns"),className:"text-sm"}),a.jsx(Bo,{title:"Total Leads",value:K.totalLeads,previousValue:K.totalLeads-(te.leadsChange||0),icon:Rn,color:"bg-green-500",format:"compact",loading:D.overview,onClick:()=>t("/reports"),className:"text-sm"}),a.jsx(Bo,{title:"Total Spent",value:K.totalSpent,previousValue:K.totalSpent-(te.spentChange||0),icon:H1,color:"bg-purple-500",format:"currency",loading:D.overview,onClick:()=>t("/report-analytics"),className:"text-sm"}),a.jsx(Bo,{title:"Avg Cost/Lead",value:K.avgCostPerLead,icon:Xr,color:"bg-orange-500",format:"currency",precision:2,loading:D.overview,className:"text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>I("create_campaign"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group",children:[a.jsx(Ge,{className:"h-6 w-6 text-gray-400 group-hover:text-blue-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-blue-700 text-center",children:"Create Campaign"})]}),a.jsxs("button",{onClick:()=>I("generate_report"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all duration-200 group",children:[a.jsx(ws,{className:"h-6 w-6 text-gray-400 group-hover:text-green-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-green-700 text-center",children:"Generate Report"})]}),a.jsxs("button",{onClick:()=>I("view_analytics"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group",children:[a.jsx(nn,{className:"h-6 w-6 text-gray-400 group-hover:text-purple-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-purple-700 text-center",children:"View Analytics"})]}),a.jsxs("button",{onClick:()=>I("export_data"),className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all duration-200 group",children:[a.jsx(Iu,{className:"h-6 w-6 text-gray-400 group-hover:text-orange-500 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-gray-700 group-hover:text-orange-700 text-center",children:"Export Data"})]})]})]}),a.jsx(Pp,{activities:v,loading:D.activities,title:"Recent Activity",compact:!0,maxVisible:3})]})]}),i==="trends"&&a.jsx("div",{className:"space-y-6",children:a.jsx(zS,{data:h,loading:D.trends,title:"30-Day Performance Trends"})}),i==="campaigns"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx($S,{data:p,loading:D.campaigns,title:"Campaign Performance"}),p&&p.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Details"}),a.jsxs("div",{className:"space-y-3",children:[(N?p:p.slice(0,5)).map((C,A)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:C.campaign_name||`Campaign ${C.campaign_id}`}),a.jsxs("p",{className:"text-sm text-gray-600",children:[C.totalLeads||C.total_leads||0," leads • ₹",Number(C.totalSpent||C.total_spent||0).toLocaleString("en-IN")," spent"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(C.avgCostPerLead||C.avg_cost_per_lead||0).toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:"cost/lead"})]})]},C.campaign_id||A)),p.length>5&&a.jsx("button",{onClick:()=>E(!N),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:N?"Show Less":`Show ${p.length-5} More`})]})]})]}),i==="brands"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(US,{data:b,loading:D.brands,title:"Brand Performance Distribution"}),b&&b.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Brand Details"}),a.jsxs("div",{className:"space-y-3",children:[(S?b:b.slice(0,5)).map((C,A)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:C.brand||"Unknown Brand"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[C.totalLeads||C.total_leads||0," leads •",C.campaignsCount||C.campaigns_count||0," campaigns"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",Number(C.totalSpent||C.total_spent||0).toLocaleString("en-IN")]}),a.jsx("p",{className:"text-xs text-gray-500",children:"total spent"})]})]},C.brand||A)),b.length>5&&a.jsx("button",{onClick:()=>P(!S),className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium py-2",children:S?"Show Less":`Show ${b.length-5} More`})]})]})]}),i==="activity"&&a.jsx("div",{className:"space-y-6",children:a.jsx(Pp,{activities:v,loading:D.activities,title:"Recent System Activity"})})]})]})},Fs={getAllRoles:async()=>{try{return(await ce.get("/permissions/roles-list")).data}catch(t){throw console.error("Error fetching roles:",t),t}},getAllRolesWithPermissions:async()=>{try{const t=await ce.get("/permissions/roles-list"),e=t.data.data||t.data,s=await Promise.all(e.map(async n=>{try{const i=await ce.get(`/permissions/role/${n.id}/permissions`),l=i.data.data||i.data.permissions||[];return{...n,permissions:l}}catch(i){return console.error(`Error fetching permissions for role ${n.id}:`,i),{...n,permissions:[]}}}));return{...t.data,data:s}}catch(t){throw console.error("Error fetching roles with permissions:",t),t}},getAllModules:async()=>{try{return(await ce.get("/permissions/modules")).data}catch(t){throw console.error("Error fetching modules:",t),t}},getModulesWithPermissions:async()=>{try{return(await ce.get("/permissions/modules-with-permissions")).data}catch(t){throw console.error("Error fetching modules with permissions:",t),t}},getAllPermissions:async()=>{try{return(await ce.get("/permissions")).data}catch(t){throw console.error("Error fetching permissions:",t),t}},getRolePermissions:async t=>{try{return(await ce.get(`/permissions/role/${t}/permissions`)).data}catch(e){throw console.error("Error fetching role permissions:",e),e}},getUserRoles:async t=>{try{return(await ce.get(`/permissions/user/${t}/roles`)).data}catch(e){throw console.error("Error fetching user roles:",e),e}},getUserPermissions:async t=>{try{return(await ce.get(`/permissions/user/${t}`)).data}catch(e){throw console.error("Error fetching user permissions:",e),e}},checkUserPermission:async(t,e)=>{try{return(await ce.post("/permissions/check",{user_id:t,permission_key:e})).data}catch(s){throw console.error("Error checking user permission:",s),s}},createRole:async t=>{try{return(await ce.post("/permissions/role",t)).data}catch(e){throw console.error("Error creating role:",e),e}},createRoleWithPermissions:async(t,e,s=[])=>{try{const n=await ce.post("/permissions/role",{name:t,description:e}),i=n.data.data?.id||n.data.data?.roleId;return s.length>0&&i&&await ce.post("/permissions/role/assign",{roleId:i,permissions:s}),n.data}catch(n){throw console.error("Error creating role with permissions:",n),n}},assignPermissionsToRole:async(t,e)=>{try{return(await ce.post("/permissions/role/assign",{roleId:t,permissions:e})).data}catch(s){throw console.error("Error assigning permissions to role:",s),s}},updateRole:async(t,e)=>{try{const s={role_name:e.name,description:e.description,is_active:e.is_active!==void 0?e.is_active:!0};return(await ce.put(`/permissions/roles/${t}`,s)).data}catch(s){throw console.error("Error updating role:",s),s}},updateRoleWithPermissions:async(t,e,s,n=[])=>{try{const i=await ce.put(`/permissions/roles/${t}`,{role_name:e,description:s});return n.length>=0&&await ce.post("/permissions/role/assign",{roleId:t,permissions:n}),i.data}catch(i){throw console.error("Error updating role with permissions:",i),i}},deleteRole:async t=>{try{return(await ce.delete(`/permissions/role/${t}`)).data}catch(e){throw console.error("Error deleting role:",e),e}},assignPermissionToRole:async(t,e)=>{try{return(await ce.post("/permissions/grant-role-permission",{role_id:t,permission_id:e})).data}catch(s){throw console.error("Error assigning permission to role:",s),s}},revokePermissionFromRole:async(t,e)=>{try{return(await ce.delete("/permissions/revoke-role-permission",{data:{role_id:t,permission_id:e}})).data}catch(s){throw console.error("Error revoking permission from role:",s),s}},assignUserToRole:async(t,e)=>{try{return(await ce.post("/permissions/assign-role",{user_id:t,role_id:e})).data}catch(s){throw console.error("Error assigning user to role:",s),s}},removeUserFromRole:async(t,e)=>{try{return(await ce.delete("/permissions/revoke-role",{data:{user_id:t,role_id:e}})).data}catch(s){throw console.error("Error removing user from role:",s),s}},getAuditLogs:async(t={})=>{try{return(await ce.get("/permissions/audit",{params:t})).data}catch(e){throw console.error("Error fetching audit logs:",e),e}}},Jg=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(null),[h,f]=_.useState(!1),[p,x]=_.useState(!1),[b,w]=_.useState(null),[v,j]=_.useState(""),[N,E]=_.useState(""),[S,P]=_.useState({}),[D,T]=_.useState(""),[L,R]=_.useState(""),[F,U]=_.useState({}),[H,B]=_.useState(""),[Q,ne]=_.useState(""),[V,re]=_.useState(null),I=_.useCallback(J=>{const be=["User Management","Role Management","Brand","Campaign Types","Campaigns","Campaign Data","Cards","Card Users","Report Analytics","Reports","Facebook Accounts","Facebook Pages","Business Manager","Ads Manager"],Pe=Ie=>({users:"User Management","user management":"User Management",campaigns:"Campaigns",campaign:"Campaigns",campaign_data:"Campaign Data","campaign-data":"Campaign Data",campaign_types:"Campaign Types","campaign-types":"Campaign Types","campaign types":"Campaign Types",brand:"Brand",brands:"Brand",cards:"Cards",card_users:"Card Users","card-users":"Card Users","card users":"Card Users","cards users":"Card Users",reports:"Reports",report:"Reports","report analytics":"Report Analytics",analytics:"Report Analytics",permissions:"Role Management","role management":"Role Management",system:"Role Management","facebook accounts":"Facebook Accounts",facebook_accounts:"Facebook Accounts","facebook pages":"Facebook Pages",facebook_pages:"Facebook Pages","business manager":"Business Manager",business_manager:"Business Manager","ads manager":"Ads Manager",ads_manager:"Ads Manager","ads managers":"Ads Manager",ads_managers:"Ads Manager"})[Ie.toLowerCase()]||Ie,Se=Ie=>{const je=Pe(Ie),De=be.indexOf(je);return De!==-1?De:999};return J.sort((Ie,je)=>{const De=Se(Ie.name),ft=Se(je.name);return De!==ft?De-ft:(Ie.name||"").localeCompare(je.name||"")})},[]),K=_.useMemo(()=>I(s.filter(J=>J.name&&J.name.toLowerCase()!=="system")),[s,I]),q=_.useCallback(async(J=!1)=>{try{l(!0),u(null),B("");const be=J?`?_t=${Date.now()}`:"",[Pe,Se]=await Promise.all([Fs.getAllRolesWithPermissions(be),Fs.getModulesWithPermissions(be)]),je=(Pe.data||Pe).map(De=>({...De,id:De.id||De.role_id,name:String(De.name||De.role_name||"").trim(),role_name:String(De.role_name||De.name||"").trim(),is_system_role:De.is_system_role===1||De.is_system_role===!0}));e(je),n(Se.data||Se),J&&(ne("Data refreshed successfully!"),console.log("🔄 Data force refreshed at",new Date().toLocaleTimeString()),console.log("📦 Loaded modules:",Se.data?.length||0))}catch(be){console.error("Error loading data:",be);const Pe=be.response?.data?.message||be.message||"Failed to load data";u(Pe),B(Pe)}finally{l(!1)}},[]);_.useEffect(()=>{q()},[q]);const te=_.useCallback(J=>{const be=String(J.name||J.role_name||"");T(be),R(J.description||"");const Pe={};J.permissions&&J.permissions.length>0&&J.permissions.forEach(Se=>{const Ie=Se.permission_key||Se.key;s.forEach(je=>{if(je.permissions&&je.permissions.length>0){const De=je.permissions.find(ft=>ft.key===Ie);De&&(Pe[je.id]||(Pe[je.id]=[]),Pe[je.id].includes(De.key)||Pe[je.id].push(De.key))}})}),U(Pe)},[s]);_.useEffect(()=>{b&&s.length>0&&p&&te(b)},[s,b,p,te]);const ee=_.useCallback(J=>{const be=[];return!J||!J.trim()?be.push("Role name is required"):((J.trim().length<3||J.trim().length>50)&&be.push("Role name must be between 3 and 50 characters"),/^[a-zA-Z0-9\s\-_]+$/.test(J.trim())||be.push("Role name can only contain letters, numbers, spaces, hyphens, and underscores")),be},[]),C=_.useCallback(J=>J&&J.trim().length>255?["Description cannot exceed 255 characters"]:[],[]),A=_.useCallback(J=>{console.error("RBAC Error:",J),f(!1),x(!1),w(null),j(""),E(""),P({}),T(""),R(""),U({});const be=J.response?.data;re({message:be?.message||J.message,details:be?.details,userRole:be?.details?.userRole,requiredPermission:be?.details?.requiredPermission,availableActions:be?.details?.availableActions,suggestion:be?.details?.suggestion}),B(be?.message||J.message)},[]);_.useEffect(()=>{if(V){const J=setTimeout(()=>re(null),12e3);return()=>clearTimeout(J)}},[V]),_.useEffect(()=>{if(Q){const J=setTimeout(()=>ne(""),5e3);return()=>clearTimeout(J)}},[Q]),_.useEffect(()=>{if(H){const J=setTimeout(()=>B(""),8e3);return()=>clearTimeout(J)}},[H]);const ae=_.useCallback(async()=>{try{B(""),ne("");const J=ee(v),be=C(N),Pe=[...J,...be];if(Pe.length>0){B(Pe.join(". "));return}const Se=[];Object.entries(S).forEach(([Ie,je])=>{je.forEach(De=>{Se.push(De)})}),await Fs.createRoleWithPermissions(v.trim(),N.trim(),Se),j(""),E(""),P({}),f(!1),await q(),ne("Role created successfully!")}catch(J){console.error("Error creating role:",J),J.response?.status===403?A(J):J.response?.status===409?B("A role with this name already exists. Please choose a different name."):J.response?.status===400?B("Invalid role data. Please check your inputs."):B(`Error creating role: ${J.response?.data?.message||J.message}`)}},[v,N,S,ee,C,q,A]),de=_.useCallback(async()=>{try{B(""),ne("");const J=ee(D),be=C(L),Pe=[...J,...be];if(Pe.length>0){B(Pe.join(". "));return}const Se=[];Object.entries(F).forEach(([Ie,je])=>{je.forEach(De=>{Se.push(De)})}),await Fs.updateRoleWithPermissions(b.id,D.trim(),L.trim(),Se),T(""),R(""),U({}),x(!1),w(null),await q(),ne("Role updated successfully!")}catch(J){if(console.error("Error updating role:",J),J.response?.status===403){const be=J.response?.data;be?.details?.requiredPermission||be?.message?.includes("permission")?A(J):B("Cannot update this role: It is a system role.")}else J.response?.status===409?B("A role with this name already exists. Please choose a different name."):J.response?.status===400?B("Invalid role data. Please check your inputs."):B(`Error updating role: ${J.response?.data?.message||J.message}`)}},[D,L,F,b,ee,C,q,A]),$=_.useCallback(async(J,be,Pe)=>{if(Pe){B(`Cannot delete "${be}" because it is a system role.`);return}if(window.confirm(`Are you sure you want to delete the role "${be}"?`))try{B(""),await Fs.deleteRole(J),await q(),ne("Role deleted successfully!")}catch(Se){if(console.error("Error deleting role:",Se),Se.response?.status===403){const Ie=Se.response?.data;Ie?.details?.requiredPermission||Ie?.message?.includes("permission")?A(Se):B("Cannot delete this role: It is a system role or has restrictions.")}else Se.response?.status===400?B("Cannot delete this role: It may be assigned to active users."):B(`Error deleting role: ${Se.response?.data?.message||Se.message}`)}},[q,A]),Z=_.useCallback((J,be,Pe)=>{P(Se=>{const Ie=Se[J]||[];return Pe?{...Se,[J]:[...Ie,be]}:{...Se,[J]:Ie.filter(je=>je!==be)}})},[]),he=_.useCallback((J,be,Pe)=>{P(Se=>Pe?{...Se,[J]:be.map(Ie=>Ie.key)}:{...Se,[J]:[]})},[]),xe=_.useCallback((J,be,Pe)=>{U(Se=>{const Ie=Se[J]||[];return Pe?{...Se,[J]:[...Ie,be]}:{...Se,[J]:Ie.filter(je=>je!==be)}})},[]),Be=_.useCallback((J,be,Pe)=>{U(Se=>Pe?{...Se,[J]:be.map(Ie=>Ie.key)}:{...Se,[J]:[]})},[]),dt=_.useCallback(J=>!J||J.length===0?"No permissions assigned":J.map(be=>be.permission_name||be.name||be).join(", "),[]),ve=_.useCallback(()=>{f(!1),j(""),E(""),P({}),B("")},[]),Ue=_.useCallback(()=>{x(!1),w(null),T(""),R(""),U({}),B("")},[]),ts=_.useCallback(J=>{J.key==="Escape"&&(h?ve():p&&Ue())},[h,p,ve,Ue]);return _.useEffect(()=>{if(h||p)return document.addEventListener("keydown",ts),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",ts),document.body.style.overflow="unset"}},[h,p,ts]),i?a.jsx("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),"Loading role management interface..."]})}):c?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:a.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",c]})}),a.jsx("button",{className:"btn-primary",onClick:q,children:"Retry"})]}):a.jsxs("div",{className:"p-6",children:[V&&a.jsx("div",{className:"mb-6 bg-red-100 border-2 border-red-300 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.94-.833-2.31 0L4.504 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-red-700 font-medium text-base mb-3",children:V.message}),V.details&&a.jsxs("div",{className:"bg-red-50 rounded-md p-4 border border-red-200 space-y-2",children:[V.userRole&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Current Role:"}),a.jsx("span",{className:"text-red-700 ml-2",children:V.userRole})]}),V.requiredPermission&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Required Permission:"}),a.jsx("span",{className:"text-red-700 ml-2",children:V.requiredPermission})]}),V.suggestion&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Suggestion:"}),a.jsx("span",{className:"text-red-700 ml-2",children:V.suggestion})]}),V.availableActions&&V.availableActions.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-800",children:"Available Actions:"}),a.jsx("span",{className:"text-red-700 ml-2",children:V.availableActions.join(", ")})]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{className:"text-red-400 hover:text-red-600 transition-colors",onClick:()=>re(null),"aria-label":"Dismiss error message",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),Q&&a.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:a.jsx("p",{className:"text-green-600",children:Q})}),H&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("p",{className:"text-red-600",children:H})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage user roles and permissions for all system modules"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:()=>q(!0),disabled:i,"aria-label":"Refresh data",title:"Refresh modules and permissions data",children:[a.jsx("svg",{className:`w-4 h-4 ${i?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Refresh"})]}),a.jsx("button",{className:"btn-primary",onClick:()=>f(!0),"aria-label":"Create new role",children:"Create Role"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No roles found"})}):t.map(J=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 role-name-display",children:J.name}),J.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:J.description||"No description"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.jsx("div",{className:"max-w-xs truncate",children:dt(J.permissions)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx("button",{className:"btn-secondary text-xs px-3 py-1",onClick:()=>{w(J),x(!0)},"aria-label":`Edit role ${J.name}`,children:"Edit"}),a.jsx("button",{className:`text-xs px-3 py-1 ${J.is_system_role?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-danger"}`,onClick:()=>$(J.id,J.name,J.is_system_role),disabled:J.is_system_role,title:J.is_system_role?"System roles cannot be deleted":"Delete this role","aria-label":`Delete role ${J.name}`,children:"Delete"})]})]},J.id))})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"create-modal-title",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[a.jsxs("div",{children:[a.jsx("h3",{id:"create-modal-title",className:"text-xl font-bold text-gray-900",children:"Create New Role"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions and access levels"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all",onClick:ve,"aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsx("div",{className:"w-80 border-r border-gray-200 bg-gray-50 p-6 flex-shrink-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"new-role-name",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:v,onChange:J=>j(J.target.value),placeholder:"Enter role name",maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-role-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"new-role-description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:N,onChange:J=>E(J.target.value),placeholder:"Enter role description",rows:"4",maxLength:255})]}),a.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Permission Summary"}),a.jsx("div",{className:"space-y-2",children:K.map(J=>{const be=S[J.id]||[],Pe=J.permissions?J.permissions.length:0;return a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:J.name}),a.jsxs("span",{className:`font-medium ${be.length>0?"text-blue-600":"text-gray-400"}`,children:[be.length,"/",Pe]})]},J.id)})})]})]})}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Module Permissions"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select the permissions for each module"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-6",children:K.map(J=>{const be=S[J.id]||[],Pe=J.permissions?J.permissions.map(je=>je.key):[],Se=Pe.length>0&&Pe.every(je=>be.includes(je)),Ie=J.permissions?[...J.permissions].sort((je,De)=>{const ft=se=>{const le=se.name.toLowerCase(),pe=se.key.toLowerCase();return le.includes("view")||le.includes("get")||le.includes("read")||pe.includes("view")||pe.includes("get")?1:le.includes("add")||le.includes("create")||pe.includes("add")||pe.includes("create")?2:le.includes("update")||le.includes("edit")||le.includes("modify")||pe.includes("update")||pe.includes("edit")?3:le.includes("delete")||le.includes("remove")||pe.includes("delete")||pe.includes("remove")?4:5};return ft(je)-ft(De)}):[];return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50 rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${be.length>0?"bg-blue-500":"bg-gray-300"}`}),a.jsx("h5",{className:"font-semibold text-gray-900",children:J.name}),a.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[be.length,"/",Pe.length]})]}),a.jsx("button",{type:"button",className:`text-xs px-4 py-2 rounded-full border transition-all font-medium ${Se?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100 hover:border-red-300":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:border-blue-300"}`,onClick:()=>he(J.id,J.permissions,!Se),"aria-label":`${Se?"Deselect":"Select"} all permissions for ${J.name}`,children:Se?"Deselect All":"Select All"})]}),a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Ie.map(je=>a.jsxs("label",{className:"flex items-start space-x-3 p-3 hover:bg-blue-50 rounded-lg border border-transparent hover:border-blue-200 transition-all cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors",checked:S[J.id]?.includes(je.key)||!1,onChange:De=>Z(J.id,je.key,De.target.checked),"aria-describedby":je.description?`${J.id}-${je.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-900",children:je.name}),je.description&&a.jsx("p",{id:`${J.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`${J.id}-${je.key}`))})})]},J.id)})})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50 space-x-3",children:[a.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:ve,children:"Cancel"}),a.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:ae,disabled:!v.trim(),children:"Create Role"})]})]})}),p&&b&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-modal-title",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{id:"edit-modal-title",className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",b.name]}),b.is_system_role&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System Role"})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",onClick:Ue,"aria-label":"Close modal",children:"×"})]}),a.jsxs("div",{className:"p-6",children:[b.is_system_role&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",role:"alert",children:a.jsxs("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"System Role:"})," This role cannot be modified as it is required for system functionality. You can view the role details but cannot make changes."]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),a.jsx("input",{id:"edit-role-name",type:"text",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:D,onChange:J=>T(J.target.value),placeholder:"Enter role name",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:50,"aria-required":"true"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"edit-role-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"edit-role-description",className:`input-field w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.is_system_role?"bg-gray-100 cursor-not-allowed":""}`,value:L,onChange:J=>R(J.target.value),placeholder:"Enter role description",rows:"3",disabled:b.is_system_role,readOnly:b.is_system_role,maxLength:255})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),a.jsx("div",{className:"h-96 overflow-y-auto border border-gray-200 rounded-md p-4 bg-gray-50",children:K.map(J=>{const be=F[J.id]||[],Pe=J.permissions?J.permissions.map(je=>je.key):[],Se=Pe.length>0&&Pe.every(je=>be.includes(je)),Ie=J.permissions?[...J.permissions].sort((je,De)=>{const ft=se=>{const le=se.name.toLowerCase(),pe=se.key.toLowerCase();return le.includes("view")||le.includes("get")||le.includes("read")||pe.includes("view")||pe.includes("get")?1:le.includes("add")||le.includes("create")||pe.includes("add")||pe.includes("create")?2:le.includes("update")||le.includes("edit")||le.includes("modify")||pe.includes("update")||pe.includes("edit")?3:le.includes("delete")||le.includes("remove")||pe.includes("delete")||pe.includes("remove")?4:5};return ft(je)-ft(De)}):[];return a.jsxs("div",{className:`mb-6 last:mb-0 bg-white rounded-lg border border-gray-200 p-4 ${b.is_system_role?"opacity-75":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-base",children:J.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[be.length," of ",Pe.length," selected"]}),!b.is_system_role&&a.jsx("button",{type:"button",className:`text-xs px-3 py-1 rounded border transition-colors font-medium ${Se?"bg-red-50 text-red-600 border-red-200 hover:bg-red-100":"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100"}`,onClick:()=>Be(J.id,J.permissions,!Se),"aria-label":`${Se?"Deselect":"Select"} all permissions for ${J.name}`,children:Se?"Deselect All":"Select All"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Ie.map(je=>a.jsxs("label",{className:`flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-md border border-transparent hover:border-gray-200 transition-colors ${b.is_system_role?"cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:F[J.id]?.includes(je.key)||!1,onChange:De=>xe(J.id,je.key,De.target.checked),disabled:b.is_system_role,"aria-describedby":je.description?`edit-${J.id}-${je.key}-desc`:void 0}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:je.name}),je.description&&a.jsx("p",{id:`edit-${J.id}-${je.key}-desc`,className:"text-xs text-gray-500 mt-1",children:je.description})]})]},`edit-${J.id}-${je.key}`))})]},J.id)})})]})]}),a.jsxs("div",{className:"flex items-center justify-end p-4 border-t space-x-2",children:[a.jsx("button",{className:"btn-secondary px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium",onClick:Ue,children:"Cancel"}),!b.is_system_role&&a.jsx("button",{className:"btn-primary px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm disabled:opacity-50",onClick:de,disabled:!D.trim(),children:"Update Role"})]})]})})]})},H0={getAll:async(t={})=>(await ce.get("/user-management",{params:t})).data,getById:async t=>(await ce.get(`/user-management/${t}`)).data,getForDropdown:async()=>{const t=await ce.get("/user-management",{params:{limit:100,is_active:!0}});return t.data.success&&t.data.data?.users?{success:!0,data:t.data.data.users.map(e=>({id:e.id,name:e.username,username:e.username,is_active:e.is_active}))}:t.data},create:async t=>(await ce.post("/user-management",t)).data,update:async(t,e)=>(await ce.put(`/user-management/${t}`,e)).data,delete:async t=>(await ce.delete(`/user-management/${t}`)).data,toggleStatus:async t=>(await ce.patch(`/user-management/${t}/toggle-status`)).data,getRoles:async()=>{try{const t=await ce.get("/user-management/roles");return t.data.success&&t.data.data?.roles?{success:!0,data:{roles:t.data.data.roles.map(e=>({id:e.id,role_name:e.display_name||e.name,name:e.name,display_name:e.display_name||e.name,description:e.description,is_system_role:e.is_system_role}))}}:t.data}catch(t){console.error("Error fetching roles from user-management API:",t);try{const e=await ce.get("/permissions/roles-list");return e.data.success&&e.data.data?{success:!0,data:{roles:e.data.data.map(s=>({id:s.id,role_name:s.name,name:s.name,display_name:s.display_name||s.name,description:s.description,is_system_role:s.is_system_role}))}}:e.data}catch(e){throw console.error("Both user-management and permissions APIs failed:",e),t}}},checkUsername:async t=>(await ce.get(`/user-management/check/username/${t}`)).data},XS=({user:t,onManageRoles:e,loading:s})=>a.jsxs("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:t.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:t.username}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]}),a.jsxs("button",{onClick:()=>e(t),disabled:s,className:"btn-secondary text-sm",children:[a.jsx(dr,{className:"h-4 w-4 mr-1"}),"Manage Roles"]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Roles:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles?.length>0?t.roles.map(n=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[n.name," ",a.jsxs("span",{className:"ml-1 text-xs",children:["L",n.level]})]},n.id)):a.jsx("span",{className:"text-xs text-gray-400",children:"No roles assigned"})})]})]}),QS=({user:t,isOpen:e,onClose:s,onSave:n,allRoles:i,loading:l})=>{const[c,u]=_.useState([]),[h,f]=_.useState([]),[p,x]=_.useState(!1);_.useEffect(()=>{t&&e&&b()},[t,e]);const b=async()=>{if(t?.id)try{x(!0);const N=(await Fs.getUserRoles(t.id)).data||[];f(N),u(N.map(E=>E.id))}catch(j){console.error("Error fetching user roles:",j)}finally{x(!1)}},w=j=>{u(N=>N.includes(j)?N.filter(E=>E!==j):[...N,j])},v=async()=>{if(t?.id)try{x(!0);const j=h.map(S=>S.id),N=c.filter(S=>!j.includes(S)),E=j.filter(S=>!c.includes(S));for(const S of N)await Fs.assignUserToRole(t.id,S);for(const S of E)await Fs.removeUserFromRole(t.id,S);n()}catch(j){console.error("Error updating user roles:",j)}finally{x(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Manage Roles for ",t?.username]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(rt,{className:"h-5 w-5"})})]}),p?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(gu,{className:"h-6 w-6 animate-spin text-gray-400"})}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Select roles for this user:"}),i.map(j=>a.jsxs("label",{className:"flex items-center p-3 border rounded-md hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.includes(j.id),onChange:()=>w(j.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:j.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Level ",j.level||1]}),j.description&&a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.description})]})]},j.id))]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:s,className:"btn-secondary",children:"Cancel"}),a.jsxs("button",{onClick:v,disabled:p,className:"btn-primary",children:[p&&a.jsx(gu,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}):null},JS=()=>{const[t,e]=_.useState([]),[s,n]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(""),[h,f]=_.useState(""),[p,x]=_.useState(null),[b,w]=_.useState(!1);_.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0),u("");const S=await Fs.getAllRoles(),P=S.data||S||[];n(P);let D=[];try{const L=await H0.getAll({limit:100});L.success&&L.data?.users?D=L.data.users:L.data&&Array.isArray(L.data)?D=L.data:(console.warn("Users response format unexpected:",L),D=[])}catch(L){console.warn("Failed to load users:",L),D=[]}const T=await Promise.all(D.map(async L=>{try{const R=await Fs.getUserRoles(L.id);return{...L,roles:R.data||[]}}catch(R){return console.warn(`Error loading roles for user ${L.id}:`,R),{...L,roles:[]}}}));e(T)}catch(S){u(S.response?.data?.message||"Failed to load data"),console.error("Error loading data:",S)}finally{l(!1)}},j=_.useMemo(()=>t.filter(S=>S.username.toLowerCase().includes(h.toLowerCase())),[t,h]),N=S=>{x(S),w(!0)},E=()=>{w(!1),x(null),v()};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(hi,{className:"h-7 w-7 text-primary-500 mr-2"}),a.jsx("h1",{className:"text-2xl font-bold",children:"User Role Management"})]})}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:c}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Users & Their Roles"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:h,onChange:S=>f(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[j.length," users"]})]})]}),i?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(gu,{className:"h-8 w-8 animate-spin text-gray-400"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.length===0?a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:h?"No users found matching your search.":"No users available."}):j.map(S=>a.jsx(XS,{user:S,onManageRoles:N,loading:i},S.id))})]}),a.jsx(QS,{user:p,isOpen:b,onClose:()=>w(!1),onSave:E,allRoles:s,loading:i})]})},GS=({active:t,onClick:e,icon:s,children:n})=>a.jsxs("button",{onClick:e,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-colors ${t?"bg-primary-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[a.jsx(s,{className:"h-4 w-4 mr-2"}),n]}),ZS=()=>{const[t,e]=_.useState("roles"),s=[{id:"roles",label:"Role Management",icon:dr},{id:"user-roles",label:"User Roles",icon:Rn}],n=()=>{switch(t){case"roles":return a.jsx(Jg,{});case"user-roles":return a.jsx(JS,{});default:return a.jsx(Jg,{})}};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(dr,{className:"h-8 w-8 text-primary-500 mr-3"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role & Permission Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage roles, permissions, and user access"})]})]})}),a.jsx("div",{className:"flex space-x-2 mt-4",children:s.map(i=>a.jsx(GS,{active:t===i.id,onClick:()=>e(i.id),icon:i.icon,children:i.label},i.id))})]}),a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:n()})]})},el={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("API getAll params:",e);const s=await ce.get("/campaign-types",{params:e});return console.log("API getAll response:",s.data),s.data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await ce.get(`/campaign-types/${t}`);return console.log("API getById response:",e.data),e.data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("API create data:",t);const e=await ce.post("/campaign-types",t);return console.log("API create response:",e.data),e.data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("API update id:",t,"data:",e);const s=await ce.put(`/campaign-types/${t}`,e);return console.log("API update response:",s.data),s.data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("API delete id:",t);const e=await ce.delete(`/campaign-types/${t}`);return console.log("API delete response:",e.data),e.data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}}},ah=({error:t,onDismiss:e,className:s="",dismissible:n=!0,variant:i="error"})=>{if(!t)return null;const c={error:{container:"bg-red-50 border-red-200",icon:"text-red-400",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-400",title:"text-amber-800",text:"text-amber-700"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",title:"text-blue-800",text:"text-blue-700"}}[i];let u="",h=i==="error"?"Error":i==="warning"?"Warning":"Information";return typeof t=="string"?u=t:t?.message?u=t.message:t?.response?.data?.message?u=t.response.data.message:u="An unexpected error occurred",(u.toLowerCase().includes("permission denied")||u.toLowerCase().includes("access denied")||u.toLowerCase().includes("unauthorized")||u.toLowerCase().includes("forbidden"))&&(h="Access Denied"),a.jsx("div",{className:`rounded-md border p-4 ${c.container} ${s}`,role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Re,{className:`h-5 w-5 ${c.icon}`,"aria-hidden":"true"})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:`text-sm font-medium ${c.title}`,children:h}),a.jsx("div",{className:`mt-1 text-sm ${c.text}`,children:u})]}),n&&e&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:a.jsx("button",{onClick:e,className:`inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600 ${c.icon} hover:bg-red-100`,"aria-label":"Dismiss error",children:a.jsx(rt,{className:"h-4 w-4"})})})})]})})},eC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState({type_name:"",description:"",is_active:!0}),[u,h]=_.useState({}),[f,p]=_.useState("");_.useEffect(()=>{c(n?{type_name:n.type_name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active===1||n.is_active===!0:!0}:{type_name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const v={};return l.type_name.trim()?l.type_name.length>100&&(v.type_name="Campaign type name must be less than 100 characters"):v.type_name="Campaign type name is required",l.description&&l.description.length>1e3&&(v.description="Description must be less than 1000 characters"),h(v),Object.keys(v).length===0},b=v=>{const{name:j,value:N,type:E,checked:S}=v.target;c(P=>({...P,[j]:E==="checkbox"?S:N})),u[j]&&h(P=>({...P,[j]:""}))},w=async v=>{if(v.preventDefault(),!!x())try{p("");const j=await s(l)}catch(j){console.error("Form submission error:",j),p(j?.response?.data?.message||j.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Campaign Type":"Create Campaign Type"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"h-6 w-6"})})]}),f&&a.jsx(ah,{error:f,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Campaign Type Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"type_name",name:"type_name",value:l.type_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.type_name?"border-red-500":""}`,placeholder:"Enter campaign type name",maxLength:100,disabled:i}),u.type_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.type_name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},tC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,f]=_.useState("all"),[p,x]=_.useState("created_at"),[b,w]=_.useState("desc"),[v,j]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(null),[P,D]=_.useState(!1),[T,L]=_.useState(null),[R,F]=_.useState(!1),[U,H]=_.useState(!1),[B,Q]=_.useState(null),[ne,V]=_.useState(!1),[re,I]=_.useState(null),K=async()=>{try{n(!0),l(null);const he={search:c||void 0,status:h==="all"?void 0:h,page:v,limit:N},xe=await el.getAll(he);xe.success?(e(xe.data||[]),S(xe.meta||null)):l(xe.message||"Failed to fetch campaign types")}catch(he){l(he.response?.data?.message||"Failed to fetch campaign types"),console.error("Error fetching campaign types:",he)}finally{n(!1)}};_.useEffect(()=>{K()},[c,h,p,b,v]),_.useEffect(()=>{if(i){const he=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout(he)}},[i]);const q=async he=>{try{F(!0),l(null),console.log("Submitting form data:",he),console.log("Editing item:",T);let xe;if(T?(console.log("Updating campaign type with ID:",T.id),xe=await el.update(T.id,he)):(console.log("Creating new campaign type"),xe=await el.create(he)),console.log("API Response:",xe),xe.success||xe.data)return D(!1),L(null),K(),console.log(T?"Campaign type updated successfully":"Campaign type created successfully"),{success:!0};throw new Error(xe.message||"Operation failed")}catch(xe){throw console.error("Form submission error:",xe),console.error("Error response data:",xe.response?.data),console.error("Error status:",xe.response?.status),xe}finally{F(!1)}},te=async he=>{try{V(!0),I(null);const xe=await el.delete(he);if(xe.success)H(!1),Q(null),I(null),K(),console.log("Campaign type deleted successfully");else throw new Error(xe.message||"Delete failed")}catch(xe){console.error("Delete error:",xe),I(xe.response?.data?.message||xe.message||"Delete failed")}finally{V(!1)}},ee=he=>{u(he.target.value),j(1)},C=he=>{f(he),j(1)},A=he=>{p===he?w(b==="asc"?"desc":"asc"):(x(he),w("asc")),j(1)},ae=he=>{L(he),D(!0)},de=()=>{L(null),D(!0)},$=he=>{Q(he),H(!0)},Z=he=>he?Fn(he):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaign Types"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your campaign types"})]}),a.jsxs("button",{onClick:de,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search campaign types...",value:c,onChange:ee,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:he=>C(he.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:K,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),E&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-blue-700",children:[a.jsxs("span",{children:["Showing ",t.length," of ",E.pagination.totalCount," campaign types"]}),a.jsxs("span",{children:["Page ",E.pagination.currentPage," of ",E.pagination.totalPages]})]})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(rt,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading campaign types..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ge,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaign types found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first campaign type."}),a.jsxs("button",{onClick:de,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Campaign Type"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("type_name"),children:["Name",p==="type_name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(he=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:he.type_name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:he.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he.is_active===1||he.is_active===!0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:he.is_active===1||he.is_active===!0?a.jsxs(a.Fragment,{children:[a.jsx(na,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Z(he.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>ae(he),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(Is,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>$(he),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(es,{className:"h-4 w-4"})})]})})]},he.id))})]})}),E&&E.pagination.totalPages>1&&a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4 rounded-b-lg",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>j(Math.max(1,v-1)),disabled:!E.pagination.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>j(Math.min(E.pagination.totalPages,v+1)),disabled:!E.pagination.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",a.jsx("span",{className:"font-medium",children:v})," of"," ",a.jsx("span",{className:"font-medium",children:E.pagination.totalPages})]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>j(Math.max(1,v-1)),disabled:!E.pagination.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("button",{onClick:()=>j(Math.min(E.pagination.totalPages,v+1)),disabled:!E.pagination.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]}),a.jsx(eC,{isOpen:P,onClose:()=>{D(!1),L(null),l(null)},onSubmit:q,editData:T,isLoading:R}),U&&B&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Re,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Campaign Type"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',B.type_name,'"? This action cannot be undone.']}),re&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:re})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{H(!1),Q(null),I(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:ne,children:"Cancel"}),a.jsx("button",{onClick:()=>te(B.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:ne,children:ne?"Deleting...":"Delete"})]})]})})})]})},tn={getCampaigns:async(t={})=>(await ce.get("/campaigns",{params:t})).data,getCampaign:async t=>(await ce.get(`/campaigns/${t}`)).data,createCampaign:async t=>(await ce.post("/campaigns",t)).data,updateCampaign:async(t,e)=>(await ce.put(`/campaigns/${t}`,e)).data,deleteCampaign:async t=>(await ce.delete(`/campaigns/${t}`)).data,toggleCampaignStatus:async t=>(await ce.put(`/campaigns/${t}/toggle-status`)).data,toggleCampaignEnabled:async t=>(await ce.put(`/campaigns/${t}/toggle-enabled`)).data,activateCampaign:async t=>(await ce.put(`/campaigns/${t}/activate`)).data,deactivateCampaign:async t=>(await ce.put(`/campaigns/${t}/deactivate`)).data,getCampaignStats:async()=>(await ce.get("/campaigns/stats")).data,getCampaignsByBrand:async(t,e={})=>(await ce.get(`/campaigns/by-brand/${t}`,{params:e})).data,getCampaignTypes:async()=>(await ce.get("/campaign-types")).data,getBrands:async()=>(await ce.get("/brands/active")).data},sC=({campaign:t=null,isOpen:e,onClose:s,onSave:n})=>{const[i,l]=_.useState({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""}),[c,u]=_.useState(""),[h,f]=_.useState(""),[p,x]=_.useState([]),[b,w]=_.useState([]),[v,j]=_.useState(!1),[N,E]=_.useState(""),[S,P]=_.useState({}),D=[{value:"video",label:"Video"},{value:"image",label:"Image"},{value:"carousel",label:"Carousel"},{value:"collection",label:"Collection"}],T=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}];_.useEffect(()=>{if(e){if(F(),t){console.log("🔧 Initializing form with campaign data:",t);const I=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Extracted brand ID:",I,"from brand:",t.brand),l({name:t.name||"",persona:L(t.persona),gender:L(t.gender),min_age:t.min_age?t.min_age.toString():"",max_age:t.max_age?t.max_age.toString():"",location:L(t.location),creatives:t.creatives||"image",is_enabled:t.is_enabled!==void 0?!!t.is_enabled:!0,campaign_type_id:t.campaign_type_id||"",brand:I})}else l({name:"",persona:[],gender:[],min_age:"",max_age:"",location:[],creatives:"image",is_enabled:!0,campaign_type_id:"",brand:""});R(),E(""),P({})}},[e,t]),_.useEffect(()=>{if(t&&b.length>0){const I=typeof t.brand=="object"&&t.brand?.id?t.brand.id.toString():t.brand?t.brand.toString():"";console.log("🔧 Re-setting brand after brands loaded. Brand ID:",I,"Available brands:",b.length),l(K=>({...K,brand:I}))}},[t,b]);const L=I=>{if(!I)return[];if(Array.isArray(I))return I;try{const K=JSON.parse(I);return Array.isArray(K)?K:[]}catch{return[]}},R=()=>{u(""),f("")},F=async()=>{try{const I=await tn.getCampaignTypes();I.success&&x(I.data||[]);const K=await tn.getBrands();K.success&&(console.log("🏢 Loaded brands:",K.data),w(K.data||[]))}catch(I){console.error("Error loading dropdown data:",I)}},U=I=>{const{name:K,value:q,type:te,checked:ee}=I.target;l(C=>({...C,[K]:te==="checkbox"?ee:q})),S[K]&&P(C=>({...C,[K]:null}))},H=(I,K,q)=>{const te=K.trim();te&&!i[I].includes(te)&&(l(ee=>({...ee,[I]:[...ee[I],te]})),q(""))},B=(I,K)=>{l(q=>({...q,[I]:q[I].filter((te,ee)=>ee!==K)}))},Q=(I,K,q,te)=>{I.key==="Enter"&&q.trim()&&(I.preventDefault(),H(K,q,te))},ne=(I,K)=>{l(q=>({...q,gender:K?[...q.gender,I]:q.gender.filter(te=>te!==I)}))},V=()=>{const I={};return i.name.trim()||(I.name="Campaign name is required"),i.campaign_type_id||(I.campaign_type_id="Campaign type is required"),i.brand||(I.brand="Brand is required"),i.min_age&&(isNaN(i.min_age)||i.min_age<0||i.min_age>100)&&(I.min_age="Minimum age must be a number between 0 and 100"),i.max_age&&(isNaN(i.max_age)||i.max_age<0||i.max_age>100)&&(I.max_age="Maximum age must be a number between 0 and 100"),i.min_age&&i.max_age&&parseInt(i.min_age)>parseInt(i.max_age)&&(I.min_age="Minimum age cannot be greater than maximum age"),P(I),Object.keys(I).length===0},re=async I=>{if(I.preventDefault(),!!V()){j(!0),E("");try{const K={name:i.name.trim(),persona:i.persona,gender:i.gender,min_age:i.min_age?parseInt(i.min_age):null,max_age:i.max_age?parseInt(i.max_age):null,location:i.location,creatives:i.creatives,is_enabled:i.is_enabled,campaign_type_id:parseInt(i.campaign_type_id),brand:parseInt(i.brand)};let q;t?q=await tn.updateCampaign(t.id,K):q=await tn.createCampaign(K),q.success?(n(q.data),s()):E(q.message||"Failed to save campaign")}catch(K){console.error("Error saving campaign:",K),E(K.response?.data?.message||"Failed to save campaign. Please try again.")}finally{j(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Campaign":"Create New Campaign"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:re,className:"p-6 space-y-6",children:[N&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:N})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:U,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter campaign name"}),S.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"campaign_type_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type *"}),a.jsxs("select",{id:"campaign_type_id",name:"campaign_type_id",value:i.campaign_type_id,onChange:U,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.campaign_type_id?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Campaign Type"}),p.filter(I=>I.is_active).map(I=>a.jsx("option",{value:I.id,children:I.type_name},I.id))]}),S.campaign_type_id&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.campaign_type_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),a.jsxs("select",{id:"brand",name:"brand",value:i.brand,onChange:U,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.brand?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,children:[a.jsx("option",{value:"",children:"Select Brand"}),b.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]}),S.brand&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.brand})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Age"}),a.jsx("input",{type:"number",id:"min_age",name:"min_age",min:"0",max:"100",value:i.min_age,onChange:U,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.min_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter minimum age"}),S.min_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.min_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Age"}),a.jsx("input",{type:"number",id:"max_age",name:"max_age",min:"0",max:"100",value:i.max_age,onChange:U,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 ${S.max_age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-purple-500"}`,placeholder:"Enter maximum age"}),S.max_age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.max_age})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"creatives",className:"block text-sm font-medium text-gray-700 mb-1",children:"Creative Type"}),a.jsx("select",{id:"creatives",name:"creatives",value:i.creatives,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:D.map(I=>a.jsx("option",{value:I.value,children:I.label},I.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona (Multiple Values)"}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.persona.map((I,K)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 border border-purple-200",children:[a.jsx("span",{children:I}),a.jsx("button",{type:"button",onClick:()=>B("persona",K),className:"ml-2 text-purple-600 hover:text-purple-800",children:a.jsx(rt,{className:"h-3 w-3"})})]},K))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:c,onChange:I=>u(I.target.value),onKeyDown:I=>Q(I,"persona",c,u),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type persona and press Enter"}),a.jsx("button",{type:"button",onClick:()=>H("persona",c,u),disabled:!c.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Ge,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gender (Multiple Selection)"}),i.gender.length>0&&a.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:i.gender.map((I,K)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:[a.jsx("span",{children:I}),a.jsx("button",{type:"button",onClick:()=>B("gender",K),className:"ml-2 text-blue-600 hover:text-blue-800",children:a.jsx(rt,{className:"h-3 w-3"})})]},K))}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:T.map(I=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.gender.includes(I.value),onChange:K=>ne(I.value,K.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:I.label})]},I.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (Multiple Values)"}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:i.location.map((I,K)=>a.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 border border-green-200",children:[a.jsx("span",{children:I}),a.jsx("button",{type:"button",onClick:()=>B("location",K),className:"ml-2 text-green-600 hover:text-green-800",children:a.jsx(rt,{className:"h-3 w-3"})})]},K))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:h,onChange:I=>f(I.target.value),onKeyDown:I=>Q(I,"location",h,f),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type location and press Enter"}),a.jsx("button",{type:"button",onClick:()=>H("location",h,f),disabled:!h.trim(),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Ge,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:"is_enabled",className:"block text-sm font-medium text-gray-700",children:"Campaign Status"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`text-sm ${i.is_enabled?"text-gray-500":"text-gray-900 font-medium"}`,children:"Disabled"}),a.jsx("button",{type:"button",onClick:()=>l(I=>({...I,is_enabled:!I.is_enabled})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${i.is_enabled?"bg-purple-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i.is_enabled?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:`text-sm ${i.is_enabled?"text-purple-600 font-medium":"text-gray-500"}`,children:"Enabled"})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:v,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"h-4 w-4"}),a.jsx("span",{children:t?"Update Campaign":"Create Campaign"})]})})]})]})]})}):null},nC=()=>{const t=mr(),[e,s]=_.useState([]),[n,i]=_.useState([]),[l,c]=_.useState(!0),[u,h]=_.useState(""),[f,p]=_.useState(""),[x,b]=_.useState(""),[w,v]=_.useState(""),[j,N]=_.useState({delete:null,toggle:null}),[E,S]=_.useState(!1),[P,D]=_.useState(null),[T,L]=_.useState(null),[R,F]=_.useState(null),[U,H]=_.useState(null);_.useEffect(()=>{B(),Q()},[]);const B=async()=>{try{c(!0),h("");const $=await tn.getCampaigns();if($.success){const Z=$.data?.campaigns||$.data||[];s(Z)}else h($.message||"Failed to load campaigns")}catch($){console.error("Error loading campaigns:",$),h("Failed to load campaigns. Please try again.")}finally{c(!1)}},Q=async()=>{try{const $=await tn.getCampaignTypes();$.success&&i($.data||[])}catch($){console.error("Error loading campaign types:",$)}},ne=()=>{D(null),S(!0)},V=$=>{D($),S(!0),H(null)},re=$=>{L($),H(null)},I=async()=>{try{const $=await tn.deleteCampaign(T.id);$.success?(s(Z=>(Array.isArray(Z)?Z:[]).filter(he=>he.id!==T.id)),L(null)):h($.message||"Failed to delete campaign")}catch($){console.error("Error deleting campaign:",$),h("Failed to delete campaign. Please try again.")}},K=async $=>{try{const Z=await tn.toggleCampaignEnabled($.id);Z.success?s(he=>(Array.isArray(he)?he:[]).map(xe=>xe.id===$.id?{...xe,is_enabled:!xe.is_enabled}:xe)):h(Z.message||"Failed to update campaign status")}catch(Z){console.error("Error toggling campaign status:",Z),h("Failed to update campaign status. Please try again.")}H(null)},q=$=>{s(P?Z=>(Array.isArray(Z)?Z:[]).map(he=>he.id===$.id?$:he):Z=>[$,...Array.isArray(Z)?Z:[]])},te=$=>{t(`/campaigns/${$.id}`)},ee=(Array.isArray(e)?e:[]).filter($=>{const Z=$.brand?.name||"",he=$.name.toLowerCase().includes(f.toLowerCase())||Z.toLowerCase().includes(f.toLowerCase()),xe=!x||$.campaign_type_id===parseInt(x),Be=!w||w==="enabled"&&$.is_enabled||w==="disabled"&&!$.is_enabled;return he&&xe&&Be}),C=$=>{if($.campaignType?.name)return $.campaignType.name;const Z=(Array.isArray(n)?n:[]).find(he=>he.id===$.campaign_type_id);return Z?Z.type_name:"Unknown"},A=$=>{if(!$)return[];if(Array.isArray($))return $;try{return JSON.parse($)}catch{return[]}},ae=$=>{if(!$)return[];if(Array.isArray($))return $;try{const Z=JSON.parse($);return Array.isArray(Z)?Z:[]}catch{return $.split(",").map(Z=>Z.trim()).filter(Z=>Z)}},de=$=>{if(!$)return[];if(Array.isArray($))return $;try{const Z=JSON.parse($);return Array.isArray(Z)?Z:[]}catch{return $.split(",").map(Z=>Z.trim()).filter(Z=>Z)}};return l?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map($=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},$))})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[U&&a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>H(null)}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your advertising campaigns"})]}),a.jsxs("button",{onClick:ne,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[a.jsx(Ge,{className:"h-5 w-5"}),a.jsx("span",{children:"New Campaign"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search campaigns...",value:f,onChange:$=>p($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:x,onChange:$=>b($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Campaign Types"}),(Array.isArray(n)?n:[]).map($=>a.jsx("option",{value:$.id,children:$.type_name},$.id))]})}),a.jsx("div",{children:a.jsxs("select",{value:w,onChange:$=>v($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"})]})}),a.jsx("div",{children:a.jsx("button",{onClick:()=>{p(""),b(""),v("")},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filters"})})]})}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx(pu,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:u}),a.jsx("button",{onClick:()=>h(""),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:ee.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(zx,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:(Array.isArray(e)?e:[]).length===0?"Get started by creating your first campaign.":"Try adjusting your search or filter criteria."}),(Array.isArray(e)?e:[]).length===0&&a.jsx("button",{onClick:ne,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Campaign"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creative"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map($=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`/campaigns/${$.id}`),children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.name}),$.brand?.name&&a.jsx("div",{className:"text-sm text-gray-500",children:$.brand.name})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:C($)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:$.creatives})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.is_enabled?"Enabled":"Disabled"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Fn($.created_at)}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),te($)},className:"text-blue-500 hover:text-blue-700 p-1 rounded-md hover:bg-blue-50 transition-colors",title:"View Details",children:a.jsx(di,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),V($)},className:"text-yellow-500 hover:text-yellow-700 p-1 rounded-md hover:bg-yellow-50 transition-colors",title:"Edit Campaign",children:a.jsx(Y1,{className:"h-4 w-4"})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),K($)},className:`p-1 rounded-md transition-colors ${$.is_enabled?"text-red-500 hover:text-red-700 hover:bg-red-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:$.is_enabled?"Disable Campaign":"Enable Campaign",children:a.jsx("div",{className:`h-4 w-4 rounded-full ${$.is_enabled?"bg-red-500":"bg-green-500"}`})}),a.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),re($)},className:"text-red-500 hover:text-red-700 p-1 rounded-md hover:bg-red-50 transition-colors",title:"Delete Campaign",children:a.jsx(es,{className:"h-4 w-4"})})]})})]},$.id))})]})})}),ee.length>0&&a.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",ee.length," of ",(Array.isArray(e)?e:[]).length," campaigns"]})]}),a.jsx(sC,{campaign:P,isOpen:E,onClose:()=>{S(!1),D(null)},onSave:q}),R&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Campaign Details"}),a.jsx("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:R.name})]}),R.brand?.name&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Brand"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:R.brand.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Campaign Type"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:C(R)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Persona"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:ae(R.persona).length>0?ae(R.persona).map(($,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-purple-100 text-purple-800",children:$},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:A(R.gender).join(", ")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Locations"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:de(R.location).length>0?de(R.location).map(($,Z)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:$},Z)):a.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Creatives"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:R.creatives})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),a.jsx("p",{className:`mt-1 text-sm font-medium ${R.is_enabled?"text-green-600":"text-red-600"}`,children:R.is_enabled?"Enabled":"Disabled"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:tj(R.created_at)})]})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(pu,{className:"h-6 w-6 text-red-600 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Campaign"})]}),a.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:['Are you sure you want to delete "',T.name,'"? This action cannot be undone.']}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})},tl={getAll:async(t={})=>{try{const e=Object.entries(t).filter(([n,i])=>i!=null&&i!=="").reduce((n,[i,l])=>({...n,[i]:l}),{});console.log("Brand API getAll params:",e);const s=await ce.get("/brands",{params:e});return console.log("Brand API getAll response:",s.data),s.data}catch(e){throw console.error("Brand API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{const e=await ce.get(`/brands/${t}`);return console.log("Brand API getById response:",e.data),e.data}catch(e){throw console.error("Brand API getById error:",e.response?.data||e.message),e}},create:async t=>{try{console.log("Brand API create data:",t);const e=await ce.post("/brands",t);return console.log("Brand API create response:",e.data),e.data}catch(e){throw console.error("Brand API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{console.log("Brand API update id:",t,"data:",e);const s=await ce.put(`/brands/${t}`,e);return console.log("Brand API update response:",s.data),s.data}catch(s){throw console.error("Brand API update error:",s.response?.data||s.message),s}},delete:async t=>{try{console.log("Brand API delete id:",t);const e=await ce.delete(`/brands/${t}`);return console.log("Brand API delete response:",e.data),e.data}catch(e){throw console.error("Brand API delete error:",e.response?.data||e.message),e}}},rC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState({name:"",description:"",is_active:!0}),[u,h]=_.useState({}),[f,p]=_.useState("");_.useEffect(()=>{c(n?{name:n.name||"",description:n.description||"",is_active:n.is_active!==void 0?n.is_active:!0}:{name:"",description:"",is_active:!0}),h({}),p("")},[n,t]);const x=()=>{const v={};return l.name.trim()?l.name.length>255&&(v.name="Brand name must be less than 255 characters"):v.name="Brand name is required",l.description&&l.description.length>1e3&&(v.description="Description must be less than 1000 characters"),h(v),Object.keys(v).length===0},b=v=>{const{name:j,value:N,type:E,checked:S}=v.target;c(P=>({...P,[j]:E==="checkbox"?S:N})),u[j]&&h(P=>({...P,[j]:""}))},w=async v=>{if(v.preventDefault(),!!x())try{p("");const j=await s(l)}catch(j){console.error("Form submission error:",j),p(j?.response?.data?.message||j.message||"An error occurred while saving")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Brand":"Create Brand"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"h-6 w-6"})})]}),f&&a.jsx(ah,{error:f,onDismiss:()=>p(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.name?"border-red-500":""}`,placeholder:"Enter brand name",maxLength:255,disabled:i}),u.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${u.description?"border-red-500":""}`,placeholder:"Enter description (optional)",maxLength:1e3,disabled:i}),u.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.description.length,"/1000 characters"]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:l.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},aC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,f]=_.useState("all"),[p,x]=_.useState("created_at"),[b,w]=_.useState("desc"),[v,j]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(!1),[P,D]=_.useState(null),[T,L]=_.useState(!1),[R,F]=_.useState(!1),[U,H]=_.useState(null),[B,Q]=_.useState(!1),[ne,V]=_.useState(null),re=async()=>{try{n(!0),l(null);const $={search:c,status:h==="all"?void 0:h,sort:p,order:b,page:v,limit:N},Z=await tl.getAll($);Z.success?e(Z.data||[]):l(Z.message||"Failed to fetch brands")}catch($){l($.response?.data?.message||"Failed to fetch brands"),console.error("Error fetching brands:",$)}finally{n(!1)}};_.useEffect(()=>{re()},[c,h,p,b,v]),_.useEffect(()=>{if(i){const $=setTimeout(()=>{l(null)},5e3);return()=>clearTimeout($)}},[i]);const I=async $=>{try{L(!0),l(null),console.log("Submitting form data:",$),console.log("Editing item:",P);let Z;if(P?(console.log("Updating brand with ID:",P.id),Z=await tl.update(P.id,$)):(console.log("Creating new brand"),Z=await tl.create($)),console.log("API Response:",Z),Z.success||Z.data)return S(!1),D(null),re(),console.log(P?"Brand updated successfully":"Brand created successfully"),{success:!0};throw new Error(Z.message||"Operation failed")}catch(Z){throw console.error("Form submission error:",Z),console.error("Error response data:",Z.response?.data),console.error("Error status:",Z.response?.status),Z}finally{L(!1)}},K=async $=>{try{Q(!0),V(null);const Z=await tl.delete($);if(Z.success)F(!1),H(null),V(null),re(),console.log("Brand deleted successfully");else throw new Error(Z.message||"Delete failed")}catch(Z){console.error("Delete error:",Z),V(Z.response?.data?.message||Z.message||"Delete failed")}finally{Q(!1)}},q=$=>{u($.target.value),j(1)},te=$=>{f($),j(1)},ee=$=>{p===$?w(b==="asc"?"desc":"asc"):(x($),w("asc")),j(1)},C=$=>{D($),S(!0)},A=()=>{D(null),S(!0)},ae=$=>{H($),F(!0)},de=$=>$?Fn($):"-";return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Brand Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your brand portfolio"})]}),a.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search brands...",value:c,onChange:q,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]}),a.jsx("div",{children:a.jsxs("select",{value:h,onChange:$=>te($.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:re,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:i})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-400 hover:text-red-600 transition-colors ml-3","aria-label":"Dismiss error",children:a.jsx(rt,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading brands..."})]}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ge,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No brands found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first brand."}),a.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Brand"]})]}):a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ee("name"),children:["Name",p==="name"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ee("is_active"),children:["Status",p==="is_active"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ee("created_at"),children:["Created",p==="created_at"&&a.jsx("span",{className:"ml-1",children:b==="asc"?"↑":"↓"})]}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map($=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.name})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-700 max-w-xs truncate",children:$.description||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.is_active?a.jsxs(a.Fragment,{children:[a.jsx(na,{className:"h-3 w-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:de($.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>C($),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(Is,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>ae($),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(es,{className:"h-4 w-4"})})]})})]},$.id))})]})}),a.jsx(rC,{isOpen:E,onClose:()=>{S(!1),D(null),l(null)},onSubmit:I,editData:P,isLoading:T}),R&&U&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Re,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Brand"}),a.jsxs("div",{className:"mt-2 px-7 py-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',U.name,'"? This action cannot be undone.']}),ne&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:ne})})]}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{F(!1),H(null),V(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:B,children:"Cancel"}),a.jsx("button",{onClick:()=>K(U.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:B,children:B?"Deleting...":"Delete"})]})]})})})]})},Ga={getAll:async(t={})=>{try{return(await ce.get("/campaign-data",{params:t})).data}catch(e){throw console.error("API getAll error:",e.response?.data||e.message),e}},getById:async t=>{try{return(await ce.get(`/campaign-data/${t}`)).data}catch(e){throw console.error("API getById error:",e.response?.data||e.message),e}},create:async t=>{try{return(await ce.post("/campaign-data",t)).data}catch(e){throw console.error("API create error:",e.response?.data||e.message),e}},update:async(t,e)=>{try{return(await ce.put(`/campaign-data/${t}`,e)).data}catch(s){throw console.error("API update error:",s.response?.data||s.message),s}},delete:async t=>{try{return(await ce.delete(`/campaign-data/${t}`)).data}catch(e){throw console.error("API delete error:",e.response?.data||e.message),e}},getCampaignsForDropdown:async()=>{try{const t=await ce.get("/campaigns",{params:{is_enabled:!0,limit:1e3}});return{success:t.data.success,data:t.data.data?.campaigns||t.data.data||[],message:t.data.message}}catch(t){throw console.error("API getCampaignsForDropdown error:",t.response?.data||t.message),t}},getCardsForDropdown:async()=>{try{return(await ce.get("/campaign-data/cards")).data}catch(t){throw console.error("API getCardsForDropdown error:",t.response?.data||t.message),t}},getByCampaignId:async(t,e={})=>{try{return(await ce.get("/campaign-data",{params:{campaign_id:t,...e}})).data}catch(s){throw console.error("API getByCampaignId error:",s.response?.data||s.message),s}}},iC=()=>{const{id:t}=Ev(),e=mr(),[s,n]=_.useState(null),[i,l]=_.useState(!0),[c,u]=_.useState([]),[h,f]=_.useState(!0),[p,x]=_.useState(null),[b,w]=_.useState(""),[v,j]=_.useState(1),[N]=_.useState(10),[E,S]=_.useState(!1),[P,D]=_.useState(null),[T,L]=_.useState(!1),[R,F]=_.useState(!1),[U,H]=_.useState(null),[B,Q]=_.useState(!1),[ne,V]=_.useState([]),[re,I]=_.useState(!1),[K,q]=_.useState({from:"",to:""}),[te,ee]=_.useState({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""});function C(){const se=new Date;se.setDate(se.getDate()-1);const le=se.getFullYear(),pe=String(se.getMonth()+1).padStart(2,"0"),Ye=String(se.getDate()).padStart(2,"0");return`${le}-${pe}-${Ye}`}const A=()=>{const se=new Date,le=new Date(se.getFullYear(),se.getMonth(),1),pe=new Date(se.getFullYear(),se.getMonth()+1,0),Ye=Kt=>{const ss=Kt.getFullYear(),_s=String(Kt.getMonth()+1).padStart(2,"0"),hs=String(Kt.getDate()).padStart(2,"0");return`${ss}-${_s}-${hs}`},Bs={from:Ye(le),to:Ye(pe)};return console.log("Current month range:",Bs),Bs},ae=async()=>{try{l(!0);const se=await tn.getCampaign(t);se.success&&se.data?n(se.data):x("Campaign not found")}catch(se){console.error("Error fetching campaign:",se),x("Failed to load campaign details")}finally{l(!1)}},de=async()=>{try{f(!0),x(null);const se={search:b,page:v,limit:N,date_from:Pe(K.from),date_to:Pe(K.to)},le=await Ga.getByCampaignId(t,se);le.success?u(le.data||[]):x(le.message||"Failed to fetch campaign data")}catch(se){x(se.response?.data?.message||"Failed to fetch campaign data"),console.error("Error fetching campaign data:",se)}finally{f(!1)}},$=async()=>{try{I(!0);const se=await Ga.getCardsForDropdown();se.success&&V(se.data||[])}catch(se){console.error("Error fetching cards:",se)}finally{I(!1)}};_.useEffect(()=>{t&&(ae(),$())},[t]),_.useEffect(()=>{t&&Se(K.from)&&Se(K.to)&&de()},[t,b,v,K]);const Z=se=>{const{name:le,value:pe}=se.target;ee(Ye=>({...Ye,[le]:pe}))},he=async se=>{se.preventDefault();try{if(L(!0),x(null),!te.card_id||!te.data_date){x("Card and Date are required fields");return}const le={campaign_id:parseInt(t),facebook_result:parseInt(te.facebook_result)||0,zoho_result:parseInt(te.zoho_result)||0,spent:parseFloat(te.spent)||0,data_date:te.data_date,card_id:parseInt(te.card_id)};let pe;if(P?pe=await Ga.update(P.id,le):pe=await Ga.create(le),pe.success||pe.data)S(!1),D(null),ee({facebook_result:"",zoho_result:"",spent:"",data_date:"",card_id:""}),de();else throw new Error(pe.message||"Operation failed")}catch(le){console.error("Form submission error:",le);const pe=le.response?.data?.message||le.response?.data?.error||le.message||"Operation failed";x(pe)}finally{L(!1)}},xe=async se=>{try{Q(!0);const le=await Ga.delete(se);if(le.success)F(!1),H(null),de();else throw new Error(le.message||"Delete failed")}catch(le){console.error("Delete error:",le),x(le.response?.data?.message||"Delete failed")}finally{Q(!1)}},Be=se=>{w(se.target.value),j(1)},dt=se=>{x(null),D(se),ee({facebook_result:se.facebook_result?.toString()||"",zoho_result:se.zoho_result?.toString()||"",spent:se.spent?.toString()||"",data_date:se.data_date||"",card_id:se.card_id?.toString()||""}),S(!0)},ve=()=>{x(null),D(null),ee({facebook_result:"",zoho_result:"",spent:"",data_date:C(),card_id:""}),S(!0)},Ue=se=>{H(se),F(!0)},ts=se=>se?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(se)):"₹0.00",J=se=>{const le=ne.find(pe=>pe.id===se);return le?le.card_name:"-"},be=se=>{if(!se)return"";if(se.includes("T")||se.includes("-"))try{const le=new Date(se);if(!isNaN(le.getTime())){const pe=String(le.getDate()).padStart(2,"0"),Ye=String(le.getMonth()+1).padStart(2,"0"),Bs=le.getFullYear();return`${pe}/${Ye}/${Bs}`}}catch(le){console.error("Error parsing date:",se,le)}if(se.match(/^\d{4}-\d{2}-\d{2}$/)){const[le,pe,Ye]=se.split("-");return`${Ye}/${pe}/${le}`}return se},Pe=se=>{if(!se)return"";const[le,pe,Ye]=se.split("/");return`${Ye}-${pe.padStart(2,"0")}-${le.padStart(2,"0")}`},Se=se=>{if(!se)return!1;const le=se.split("/");if(le.length!==3)return!1;const[pe,Ye,Bs]=le,Kt=parseInt(pe,10),ss=parseInt(Ye,10),_s=parseInt(Bs,10);if(isNaN(Kt)||isNaN(ss)||isNaN(_s)||Kt<1||Kt>31||ss<1||ss>12||_s<1900||_s>2100)return!1;const hs=new Date(_s,ss-1,Kt);return hs.getFullYear()===_s&&hs.getMonth()===ss-1&&hs.getDate()===Kt};_.useEffect(()=>{const se=A();q({from:be(se.from),to:be(se.to)})},[]);const Ie=(se,le)=>{let pe=le.replace(/[^0-9/]/g,"");if(pe.length>=2&&pe.charAt(2)!=="/"&&(pe.length===2?pe=pe+"/":pe.length>2&&pe.length<=4&&(pe=pe.substring(0,2)+"/"+pe.substring(2))),pe.length>=5&&pe.charAt(5)!=="/"){if(pe.length===5)pe=pe+"/";else if(pe.length>5){const Ye=pe.split("/");Ye.length===2&&(pe=Ye[0]+"/"+Ye[1].substring(0,2)+"/"+Ye[1].substring(2))}}pe.length<=10&&q(Ye=>({...Ye,[se]:pe}))},je=(se,le)=>{le&&q(pe=>({...pe,[se]:be(le)}))},De=se=>{let le=se.replace(/[^0-9/]/g,"");if(le.length>=2&&le.charAt(2)!=="/"&&(le.length===2?le=le+"/":le.length>2&&le.length<=4&&(le=le.substring(0,2)+"/"+le.substring(2))),le.length>=5&&le.charAt(5)!=="/"){if(le.length===5)le=le+"/";else if(le.length>5){const pe=le.split("/");pe.length===2&&(le=pe[0]+"/"+pe[1].substring(0,2)+"/"+pe[1].substring(2))}}if(le.length<=10)if(Se(le)){const pe=Pe(le);ee(Ye=>({...Ye,data_date:pe}))}else ee(pe=>({...pe,data_date:le}))},ft=se=>{se&&ee(le=>({...le,data_date:se}))};return i?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(se=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},se))})]})}):s?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[a.jsx(Np,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]}),a.jsx("div",{children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Data"}),a.jsxs("button",{onClick:ve,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Data Entry"]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_from",className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_from_picker").showPicker&&document.getElementById("date_from_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_from",value:K.from,onChange:se=>Ie("from",se.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_from_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>je("from",se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date_to",className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("date_to_picker").showPicker&&document.getElementById("date_to_picker").showPicker()}),a.jsx("input",{type:"text",id:"date_to",value:K.to,onChange:se=>Ie("to",se.target.value),placeholder:"DD/MM/YYYY",className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"}),a.jsx("input",{type:"date",id:"date_to_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>je("to",se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",id:"search",placeholder:"Search data...",value:b,onChange:Be,className:"pl-10 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:de,disabled:h,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})})]})}),p&&a.jsx("div",{className:"mx-6 mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-800",children:p}),a.jsx("button",{onClick:()=>x(null),className:"mt-2 text-sm text-red-600 underline hover:text-red-800",children:"Dismiss"})]})]})}),a.jsx("div",{className:"overflow-hidden",children:h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Loading performance data..."})]}):c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(nn,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No performance data yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your campaign performance by adding data entries."}),a.jsxs("button",{onClick:ve,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add First Entry"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Result"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Card"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(se=>{const le=parseInt(se.facebook_result)||0,pe=parseInt(se.zoho_result)||0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Fn(se.data_date)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:le})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:pe})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-green-600",children:ts(se.spent)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-blue-600 font-medium",children:le>0?ts(parseFloat(se.spent)/le):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-purple-600 font-medium",children:pe>0?ts(parseFloat(se.spent)/pe):"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-700",children:se.card_display_name||se.card_name||J(se.card_id)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>dt(se),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit",children:a.jsx(Is,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>Ue(se),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete",children:a.jsx(es,{className:"h-4 w-4"})})]})})]},se.id)})})]})})})]}),E&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:P?"Edit Performance Data":"Add Performance Data"}),p&&E&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Re,{className:"h-4 w-4 text-red-400"}),a.jsx("div",{className:"ml-2",children:a.jsx("p",{className:"text-sm text-red-700",children:p})})]})}),a.jsxs("form",{onSubmit:he,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_result",className:"block text-sm font-medium text-gray-700",children:"Facebook Result"}),a.jsx("input",{type:"number",id:"facebook_result",name:"facebook_result",value:te.facebook_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"zoho_result",className:"block text-sm font-medium text-gray-700",children:"Zoho Result"}),a.jsx("input",{type:"number",id:"zoho_result",name:"zoho_result",value:te.zoho_result,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"spent",className:"block text-sm font-medium text-gray-700",children:"Spent (₹)"}),a.jsx("input",{type:"number",step:"0.01",id:"spent",name:"spent",value:te.spent,onChange:Z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"data_date",className:"block text-sm font-medium text-gray-700",children:"Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("form_date_picker").showPicker&&document.getElementById("form_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"data_date",name:"data_date",value:te.data_date?be(te.data_date):"",onChange:se=>De(se.target.value),placeholder:"DD/MM/YYYY",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3 pl-10"}),a.jsx("input",{type:"date",id:"form_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:se=>ft(se.target.value),tabIndex:-1})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:te.card_id,onChange:Z,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm py-2 px-3",children:[a.jsx("option",{value:"",children:"Select Card"}),ne.map(se=>a.jsx("option",{value:se.id,children:se.card_name},se.id))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{S(!1),D(null),x(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:T,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:T||re,children:T?"Saving...":P?"Update":"Create"})]})]})]})})}),R&&U&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx(Re,{className:"mx-auto h-12 w-12 text-red-600"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Performance Data"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this performance data entry? This action cannot be undone."})}),a.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[a.jsx("button",{onClick:()=>{F(!1),H(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:B,children:"Cancel"}),a.jsx("button",{onClick:()=>xe(U.id),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",disabled:B,children:B?"Deleting...":"Delete"})]})]})})})]}):a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),a.jsxs("button",{onClick:()=>e("/campaigns"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[a.jsx(Np,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})]})})},tr="/cards",Ur={getAll:async(t={})=>{try{return(await ce.get(tr,{params:t})).data}catch(e){throw console.error("API get all cards error:",e.response?.data||e),e}},getActive:async(t={})=>{try{return(await ce.get(`${tr}/active`,{params:t})).data}catch(e){throw console.error("API get active cards error:",e.response?.data||e),e}},getById:async t=>{try{return(await ce.get(`${tr}/${t}`)).data}catch(e){throw console.error("API get card error:",e.response?.data||e),e}},create:async t=>{try{return(await ce.post(tr,t)).data}catch(e){throw console.error("API create card error:",e.response?.data||e),e}},update:async(t,e)=>{try{return(await ce.put(`${tr}/${t}`,e)).data}catch(s){throw console.error("API update card error:",s.response?.data||s),s}},addBalance:async(t,e,s="")=>{try{return(await ce.post(`${tr}/${t}/add-balance`,{amount:Number(e),description:s||""})).data}catch(n){throw console.error("API add balance error:",n.response?.data||n),n}},delete:async t=>{try{return(await ce.delete(`${tr}/${t}`)).data}catch(e){throw console.error("API delete card error:",e.response?.data||e),e}}},oC=({isOpen:t,onClose:e,onSubmit:s,editData:n=null,isLoading:i=!1})=>{const[l,c]=_.useState(""),[u,h]=_.useState({card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),[f,p]=_.useState({});_.useEffect(()=>{h(n?{card_name:n.card_name||"",card_number_last4:n.card_number_last4||"",card_type:n.card_type||"",current_balance:n.current_balance||"",is_active:n.is_active!==void 0?n.is_active:!0}:{card_name:"",card_number_last4:"",card_type:"",current_balance:"",is_active:!0}),p({})},[n,t]),_.useEffect(()=>{t&&c("")},[t]);const x=()=>{const v={};return u.card_name.trim()?u.card_name.length>100&&(v.card_name="Card name must be less than 100 characters"):v.card_name="Card name is required",u.card_number_last4.trim()?/^\d{4}$/.test(u.card_number_last4)||(v.card_number_last4="Must be exactly 4 digits"):v.card_number_last4="Last 4 digits are required",u.card_type||(v.card_type="Card type is required"),u.current_balance.toString().trim()?(isNaN(parseFloat(u.current_balance))||parseFloat(u.current_balance)<0)&&(v.current_balance="Current balance must be a valid positive number"):v.current_balance="Current balance is required",p(v),Object.keys(v).length===0},b=v=>{const{name:j,value:N,type:E,checked:S}=v.target;let P=E==="checkbox"?S:N;if(j==="card_number_last4"&&(P=N.replace(/\D/g,"").slice(0,4)),j==="current_balance")if(N===""||/^\d*\.?\d*$/.test(N))P=N;else return;h(D=>({...D,[j]:P})),f[j]&&p(D=>({...D,[j]:""}))},w=async v=>{if(v.preventDefault(),!!x())try{c("");const j={...u,current_balance:parseFloat(u.current_balance)};await s(j)}catch(j){console.error("Form submission error:",j),c(j?.response?.data?.message||j.message||"An error occurred")}};return t?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Edit Card":"Add New Card"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"h-6 w-6"})})]}),l&&a.jsx(ah,{error:l,onDismiss:()=>c(""),className:"mb-4"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_name",name:"card_name",value:u.card_name,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${f.card_name?"border-red-500":""}`,placeholder:"Enter card name",maxLength:100,disabled:i}),f.card_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.card_name})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_number_last4",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last 4 Digits ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_number_last4",name:"card_number_last4",value:u.card_number_last4,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${f.card_number_last4?"border-red-500":""}`,placeholder:"1234",maxLength:4,disabled:i}),f.card_number_last4&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.card_number_last4})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"card_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Card Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"card_type",name:"card_type",value:u.card_type,onChange:b,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${f.card_type?"border-red-500":""}`,placeholder:"e.g., Visa, MasterCard, American Express",maxLength:50,disabled:i}),f.card_type&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.card_type})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"current_balance",className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Balance ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"₹"}),a.jsx("input",{type:"text",id:"current_balance",name:"current_balance",value:u.current_balance,onChange:b,className:`mt-1 block w-full pl-7 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${f.current_balance?"border-red-500":""}`,placeholder:"0.00",disabled:i})]}),f.current_balance&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.current_balance})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:u.is_active,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:i}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:i,children:i?"Saving...":n?"Update":"Create"})]})]})]})}):null},lC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,f]=_.useState(1),[p]=_.useState(10),[x,b]=_.useState(!1),[w,v]=_.useState(null),[j,N]=_.useState(!1),[E,S]=_.useState(!1),[P,D]=_.useState(null),[T,L]=_.useState(!1),[R,F]=_.useState(!1),[U,H]=_.useState(null),[B,Q]=_.useState(""),[ne,V]=_.useState(!1),re=async()=>{try{n(!0),l(null);const ve={search:c,page:h,limit:p},Ue=await Ur.getAll(ve);Ue.success?e(Ue.data?.cards||[]):l(Ue.message||"Failed to fetch cards")}catch(ve){l(ve.response?.data?.message||"Failed to fetch cards"),console.error("Error fetching cards:",ve)}finally{n(!1)}};_.useEffect(()=>{const ve=setTimeout(()=>{f(1),re()},300);return()=>clearTimeout(ve)},[c]),_.useEffect(()=>{re()},[h]),_.useEffect(()=>{re()},[]);const I=(ve=null)=>{v(ve),b(!0)},K=()=>{b(!1),v(null)},q=async ve=>{try{if(N(!0),w){const Ue=await Ur.update(w.id||w._id,ve);if(!Ue.success)throw new Error(Ue.message||"Update failed")}else{const Ue=await Ur.create(ve);if(!Ue.success)throw new Error(Ue.message||"Creation failed")}K(),await re()}catch(Ue){throw console.error("Form submission error:",Ue),Ue}finally{N(!1)}},te=ve=>{D(ve),S(!0)},ee=async()=>{if(P)try{L(!0);const ve=await Ur.delete(P.id||P._id);if(!ve.success)throw new Error(ve.message||"Delete failed");S(!1),D(null),await re()}catch(ve){console.error("Delete error:",ve),alert(ve.response?.data?.message||"Failed to delete card")}finally{L(!1)}},C=()=>{S(!1),D(null)},A=ve=>{H(ve),Q(""),F(!0)},ae=()=>{F(!1),H(null),Q("")},de=async()=>{if(!U||!B)return;const ve=parseFloat(B);if(isNaN(ve)||ve<=0){alert("Please enter a valid positive amount");return}try{V(!0);const Ue=await Ur.addBalance(U.id||U._id,ve);if(!Ue.success)throw new Error(Ue.message||"Failed to add balance");F(!1),H(null),Q(""),await re()}catch(Ue){console.error("Add balance error:",Ue),alert(Ue.response?.data?.message||"Failed to add balance")}finally{V(!1)}},$=_.useMemo(()=>c.trim()?t.filter(ve=>ve.card_name?.toLowerCase().includes(c.toLowerCase())||ve.card_number_last4?.includes(c)||ve.card_type?.toLowerCase().includes(c.toLowerCase())):t,[t,c]),Z=$.length,he=Math.ceil(Z/p),xe=(h-1)*p,Be=xe+p,dt=$.slice(xe,Be);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Kr,{className:"h-7 w-7 text-blue-600"}),"Cards Management"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>re(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>I(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Card"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ns,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:ve=>u(ve.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cards..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((ve,Ue)=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},Ue))}):dt.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Kr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cards found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by adding your first card."}),!c&&a.jsxs("button",{onClick:()=>I(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add Card"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:dt.map(ve=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:ve.card_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["•••• •••• •••• ",ve.card_number_last4]})]}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ve.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ve.is_active?a.jsxs(a.Fragment,{children:[a.jsx(na,{className:"w-3 h-3 mr-1"})," Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"w-3 h-3 mr-1"})," Inactive"]})})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Card Type"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:ve.card_type||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Balance"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ol,{className:"h-4 w-4 text-green-600 mr-1"}),a.jsx("span",{className:"text-sm font-semibold text-green-600",children:Number(ve.current_balance||0).toFixed(2)})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Hr,{className:"h-3 w-3 mr-1"}),Fn(ve.created_at)]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>A(ve),className:"inline-flex items-center px-3 py-1.5 border border-green-300 shadow-sm text-xs font-medium rounded text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[a.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Add Balance"]}),a.jsxs("button",{onClick:()=>I(ve),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(Is,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>te(ve),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[a.jsx(es,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]})},ve.id||ve._id))}),he>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",xe+1," to ",Math.min(Be,Z)," of ",Z," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(ve=>Math.max(1,ve-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",he]}),a.jsx("button",{onClick:()=>f(ve=>Math.min(he,ve+1)),disabled:h>=he,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(oC,{isOpen:x,onClose:K,onSubmit:q,editData:w,isLoading:j}),E&&P&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Re,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Card"}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',P.card_name,'"? This action cannot be undone.']})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:ee,disabled:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:T?"Deleting...":"Delete"}),a.jsx("button",{onClick:C,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})}),R&&U&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(ol,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Balance"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['Add balance to "',U.card_name,'"']}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"balance-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (₹)"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ol,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"number",id:"balance-amount",value:B,onChange:ve=>Q(ve.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]})]})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:de,disabled:ne||!B,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:ne?"Adding...":"Add Balance"}),a.jsx("button",{onClick:ae,disabled:ne,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},sl={getAll:async(t={})=>(await ce.get("/card-users",{params:t})).data,getById:async t=>(await ce.get(`/card-users/${t}`)).data,create:async t=>(await ce.post("/card-users",t)).data,update:async(t,e)=>(await ce.put(`/card-users/${t}`,e)).data,delete:async t=>(await ce.delete(`/card-users/${t}`)).data,getCardsByUser:async t=>(await ce.get(`/card-users/user/${t}/cards`)).data,getUsersByCard:async t=>(await ce.get(`/card-users/card/${t}/users`)).data},nl=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}/${s}/${e}`},Gg=t=>{if(!t)return"";if(t.includes("T")){const i=new Date(t);if(!isNaN(i.getTime())){const l=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0");return`${String(i.getDate()).padStart(2,"0")}/${c}/${l}`}}const[e,s,n]=t.split("-");return e&&s&&n?`${n}/${s}/${e}`:""},cC=t=>{if(!t)return"";const[e,s,n]=t.split("/");return`${n}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`},dC=({isOpen:t,onClose:e,onSubmit:s,editData:n,isLoading:i})=>{const[l,c]=_.useState({card_id:"",user_id:"",assigned_date:nl(),is_primary:!1}),[u,h]=_.useState({}),[f,p]=_.useState([]),[x,b]=_.useState([]),[w,v]=_.useState(!1);_.useEffect(()=>{t&&(c(n?{card_id:n.card_id?.toString()||"",user_id:n.user_id?.toString()||"",assigned_date:n.assigned_date?Gg(n.assigned_date):nl(),is_primary:!!n.is_primary}:{card_id:"",user_id:"",assigned_date:nl(),is_primary:!1}),h({}))},[t,n]),_.useEffect(()=>{t&&j()},[t]);const j=async()=>{v(!0);try{console.log("🔄 CardUsersForm: Loading options..."),console.log("📡 CardUsersForm: Calling cardsService.getActive...");const T=await Ur.getActive({limit:100});console.log("📨 CardUsersForm: Cards response:",T);const L=T?.data?.cards||T?.data||[];console.log("📋 CardUsersForm: Extracted cards list:",L),console.log("📊 CardUsersForm: Cards list length:",L.length),Array.isArray(L)&&L.length>0&&L.forEach((U,H)=>{console.log(`   Card ${H+1}: ID=${U.id}, Name="${U.card_name}", Balance=${U.current_balance}`)}),p(Array.isArray(L)?L:[]),console.log("👥 CardUsersForm: Loading users...");const F=(await H0.getForDropdown())?.data||[];console.log("👥 CardUsersForm: Users loaded:",F.length),b(Array.isArray(F)?F:[])}catch(T){console.error("❌ CardUsersForm: Error loading options:",T),p([]),b([])}finally{v(!1)}},N=T=>{const{name:L,value:R,type:F,checked:U}=T.target;if(L==="assigned_date"){let H=R.replace(/[^0-9/]/g,"");if(H.length>=2&&H.charAt(2)!=="/"&&(H.length===2?H=H+"/":H.length>2&&H.length<=4&&(H=H.substring(0,2)+"/"+H.substring(2))),H.length>=5&&H.charAt(5)!=="/"){if(H.length===5)H=H+"/";else if(H.length>5){const B=H.split("/");B.length===2&&(H=B[0]+"/"+B[1].substring(0,2)+"/"+B[1].substring(2))}}H.length<=10&&c(B=>({...B,[L]:H}))}else c(H=>({...H,[L]:F==="checkbox"?U:R}));u[L]&&h(H=>({...H,[L]:""}))},E=()=>{const T={};return l.card_id||(T.card_id="Card is required"),l.user_id||(T.user_id="User is required"),l.assigned_date||(T.assigned_date="Assigned date is required"),h(T),Object.keys(T).length===0},S=async T=>{if(T.preventDefault(),!!E())try{const L={...l,card_id:parseInt(l.card_id),user_id:parseInt(l.user_id),assigned_date:cC(l.assigned_date)};await s(L)}catch(L){console.error("Form submission error:",L),h({submit:L.response?.data?.message||L.message||"An error occurred while saving"})}},P=T=>{T&&c(L=>({...L,assigned_date:Gg(T)}))},D=()=>{c({card_id:"",user_id:"",assigned_date:nl(),is_primary:!1}),h({}),e()};return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:D}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsx("button",{onClick:D,className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.jsx(rt,{className:"h-6 w-6"})})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"w-full mt-3 text-center sm:mt-0 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:n?"Edit Card Assignment":"Assign Card to User"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.submit&&a.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:u.submit})]})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"card_id",className:"block text-sm font-medium text-gray-700",children:"Card *"}),a.jsxs("select",{id:"card_id",name:"card_id",value:l.card_id,onChange:N,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.card_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a card..."}),f.map(T=>a.jsxs("option",{value:T.id,children:[T.card_name," (••••",T.card_number_last4,")"]},T.id))]}),u.card_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.card_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"User *"}),a.jsxs("select",{id:"user_id",name:"user_id",value:l.user_id,onChange:N,disabled:w||i,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.user_id?"border-red-300":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a user..."}),x.map(T=>a.jsx("option",{value:T.id,children:T.username},T.id))]}),u.user_id&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.user_id})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"assigned_date",className:"block text-sm font-medium text-gray-700",children:"Assigned Date * (DD/MM/YYYY)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 cursor-pointer z-10",onClick:()=>document.getElementById("assigned_date_picker").showPicker&&document.getElementById("assigned_date_picker").showPicker()}),a.jsx("input",{type:"text",id:"assigned_date",name:"assigned_date",value:l.assigned_date,onChange:N,placeholder:"DD/MM/YYYY",disabled:i,required:!0,className:`pl-10 mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 ${u.assigned_date?"border-red-300":"border-gray-300"}`}),a.jsx("input",{type:"date",id:"assigned_date_picker",className:"absolute opacity-0 pointer-events-none",onChange:T=>P(T.target.value),tabIndex:-1})]}),u.assigned_date&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.assigned_date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_primary",name:"is_primary",checked:l.is_primary,onChange:N,disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"is_primary",className:"ml-2 block text-sm text-gray-700",children:"Set as primary card for this user"})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:D,disabled:i,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i||w,className:"px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Saving...":n?"Update Assignment":"Create Assignment"})]})]})]})})]})]})}):null},uC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(""),[h,f]=_.useState(1),[p]=_.useState(10),[x,b]=_.useState(!1),[w,v]=_.useState(null),[j,N]=_.useState(!1),[E,S]=_.useState(!1),[P,D]=_.useState(null),[T,L]=_.useState(!1),[R,F]=_.useState(null),U=async()=>{try{n(!0),l(null);const A={search:c,page:h,limit:p},ae=await sl.getAll(A);if(ae.success){console.log("📊 Card Users API Response:",ae),console.log("📊 Response data structure:",Object.keys(ae.data||{}));const de=ae.data?.assignments||ae.data?.cardUsers||ae.data||[];console.log("📊 Extracted assignments:",de.length),de.length>0&&console.log("📊 First assignment sample:",{id:de[0].id,card_name:de[0].card_name,username:de[0].username,card_id:de[0].card_id,user_id:de[0].user_id}),e(de)}else l(ae.message||"Failed to fetch card assignments")}catch(A){l(A.response?.data?.message||"Failed to fetch card assignments"),console.error("Error fetching assignments:",A)}finally{n(!1)}};_.useEffect(()=>{const A=setTimeout(()=>{f(1),U()},300);return()=>clearTimeout(A)},[c]),_.useEffect(()=>{U()},[h]),_.useEffect(()=>{U()},[]);const H=(A=null)=>{v(A),b(!0)},B=()=>{b(!1),v(null)},Q=async A=>{try{if(N(!0),w){const ae=await sl.update(w.id||w._id,A);if(!ae.success)throw new Error(ae.message||"Update failed")}else{const ae=await sl.create(A);if(!ae.success)throw new Error(ae.message||"Creation failed")}B(),await U()}catch(ae){throw console.error("Form submission error:",ae),ae}finally{N(!1)}},ne=A=>{D(A),S(!0)},V=async()=>{if(P)try{L(!0),F(null);const A=await sl.delete(P.id||P._id);if(!A.success)throw new Error(A.message||"Delete failed");S(!1),D(null),F(null),await U()}catch(A){console.error("Delete error:",A);const ae=A.response?.data?.message||A.message||"Failed to delete assignment";F(ae)}finally{L(!1)}},re=()=>{S(!1),D(null),F(null)},I=_.useMemo(()=>c.trim()?t.filter(A=>A.card_name?.toLowerCase().includes(c.toLowerCase())||A.username?.toLowerCase().includes(c.toLowerCase())||A.card_number_last4?.includes(c)):t,[t,c]),K=I.length,q=Math.ceil(K/p),te=(h-1)*p,ee=te+p,C=I.slice(te,ee);return a.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(ui,{className:"h-7 w-7 text-blue-600"}),"Card User Assignments"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>U(),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsxs("button",{onClick:()=>H(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ns,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:c,onChange:A=>u(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search assignments..."})]})}),i&&a.jsx("div",{className:"mb-6 rounded-md bg-red-50 border border-red-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),s?a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((A,ae)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]},ae))})})}):C.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx(ui,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms.":"Get started by assigning a card to a user."}),!c&&a.jsxs("button",{onClick:()=>H(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Assign Card"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kr,{className:"h-4 w-4 mr-1"}),"Card"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(hi,{className:"h-4 w-4 mr-1"}),"User"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Assigned Date"]})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kr,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.card_name||"Unknown Card"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["••••",A.card_number_last4||"****"]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(hi,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.username||"Unknown User"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.assigned_date?Fn(A.assigned_date):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.is_primary?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:A.is_primary?a.jsxs(a.Fragment,{children:[a.jsx(na,{className:"w-3 h-3 mr-1"})," Primary"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"w-3 h-3 mr-1"})," Secondary"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>H(A),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[a.jsx(Is,{className:"h-3 w-3 mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>ne(A),className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[a.jsx(es,{className:"h-3 w-3 mr-1"}),"Delete"]})]})})]},A.id||A._id))})]})}),q>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg mt-6",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:["Showing ",te+1," to ",Math.min(ee,K)," of ",K," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(A=>Math.max(1,A-1)),disabled:h<=1,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",q]}),a.jsx("button",{onClick:()=>f(A=>Math.min(q,A+1)),disabled:h>=q,className:"inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:"Next"})]})]})]}),a.jsx(dC,{isOpen:x,onClose:B,onSubmit:Q,editData:w,isLoading:j}),E&&P&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Re,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Assignment"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the assignment of "',P.card_name,'" to "',P.username,'"? This action cannot be undone.']}),R&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:R})})]})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{onClick:V,disabled:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:T?"Deleting...":"Delete"}),a.jsx("button",{onClick:re,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})},dl={getAllReports:async(t={})=>{try{const e=new URLSearchParams,s={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brandId:"brand_id",brand:"brand",page:"page",limit:"limit",search:"search",month:"month"};return Object.entries(t).forEach(([i,l])=>{if(l!=null&&l!==""){const c=s[i]||i;e.append(c,l)}}),(await ce.get(`/reports?${e.toString()}`)).data}catch(e){throw console.error("Error fetching reports:",e),e}},generateFromCampaignData:async(t={})=>{try{const e=new URLSearchParams,s={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brand:"brand"};return Object.entries(t).forEach(([i,l])=>{if(l!=null&&l!==""){const c=s[i]||i;e.append(c,l)}}),(await ce.get(`/reports/generate?${e.toString()}`)).data}catch(e){throw console.error("Error generating report from campaign data:",e),e}},syncReports:async(t={})=>{try{return(await ce.post("/reports/sync",t)).data}catch(e){throw console.error("Error syncing reports:",e),e}},getDashboardStats:async(t={})=>{try{const e=new URLSearchParams;return t.dateFrom&&e.append("date_from",t.dateFrom),t.dateTo&&e.append("date_to",t.dateTo),(await ce.get(`/reports/dashboard?${e.toString()}`)).data}catch(e){throw console.error("Error fetching dashboard stats:",e),e}},getChartData:async(t={})=>{try{const e=new URLSearchParams;return t.dateFrom&&e.append("date_from",t.dateFrom),t.dateTo&&e.append("date_to",t.dateTo),t.groupBy&&e.append("group_by",t.groupBy),(await ce.get(`/reports/charts?${e.toString()}`)).data}catch(e){throw console.error("Error fetching chart data:",e),e}},exportToExcel:async(t={})=>{try{const e=new URLSearchParams,s={dateFrom:"date_from",dateTo:"date_to",campaignId:"campaign_id",brandId:"brand_id",brand:"brand"};Object.entries(t).forEach(([u,h])=>{if(h!=null&&h!==""){const f=s[u]||u;e.append(f,h)}});const n=await ce.get(`/reports/export?${e.toString()}`,{responseType:"blob"}),i=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(i),c=document.createElement("a");return c.href=l,c.download=`reports_${t.dateFrom||"all"}_${t.dateTo||"all"}_${Date.now()}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l),{success:!0,message:"Export completed successfully"}}catch(e){throw console.error("Error exporting reports:",e),e}},getById:async t=>{try{return(await ce.get(`/reports/${t}`)).data}catch(e){throw console.error("Error fetching report by ID:",e),e}},create:async t=>{try{return(await ce.post("/reports",t)).data}catch(e){throw console.error("Error creating report:",e),e}},update:async(t,e)=>{try{return(await ce.put(`/reports/${t}`,e)).data}catch(s){throw console.error("Error updating report:",s),s}},delete:async t=>{try{return(await ce.delete(`/reports/${t}`)).data}catch(e){throw console.error("Error deleting report:",e),e}},getFilterOptions:async()=>{try{return(await ce.get("/reports/filters")).data}catch(t){throw console.error("Error fetching filter options:",t),t}},generateReport:async(t={})=>dl.getAllReports(t),formatCurrency:t=>t==null?"₹0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(t),formatNumber:t=>t==null?"0":new Intl.NumberFormat("en-IN").format(t),calculateROI:(t,e)=>!e||e===0?0:(t-e)/e*100,calculateCostPerResult:(t,e)=>!e||e===0?0:t/e,getDateRangePresets:()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()-1);const s=new Date(t);s.setDate(s.getDate()-7);const n=new Date(t);n.setMonth(n.getMonth()-1);const i=new Date(t);i.setMonth(i.getMonth()-3);const l=c=>c.toISOString().split("T")[0];return{today:{label:"Today",from:l(t),to:l(t)},yesterday:{label:"Yesterday",from:l(e),to:l(e)},lastWeek:{label:"Last 7 Days",from:l(s),to:l(t)},lastMonth:{label:"Last 30 Days",from:l(n),to:l(t)},lastThreeMonths:{label:"Last 3 Months",from:l(i),to:l(t)}}}},V0=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!1),[i,l]=_.useState(""),[c,u]=_.useState({page:1,limit:20,search:"",date_from:"",date_to:"",campaign_id:"",brand_id:""}),[h,f]=_.useState({totalCount:0,totalPages:0,currentPage:1,hasNext:!1,hasPrev:!1}),[p,x]=_.useState({brands:[],campaigns:[]}),[b,w]=_.useState(!1),[v,j]=_.useState(null);_.useEffect(()=>{S()},[c.page,c.limit]),_.useEffect(()=>{E(),N()},[]);const N=()=>{const V=new Date,re=new Date;re.setDate(V.getDate()-30),u(I=>({...I,date_from:re.toISOString().split("T")[0],date_to:V.toISOString().split("T")[0]}))},E=async()=>{try{const V=await dl.getFilterOptions();V.success&&x(V.data)}catch(V){console.error("Error loading filter options:",V)}},S=async()=>{n(!0),l("");try{const V=await dl.getAllReports(c);if(V.success){if(e(V.data||[]),f(V.meta?.pagination||{}),V.data&&V.data.length>0){const re=V.data.reduce((te,ee)=>te+(parseFloat(ee.spent)||0),0),I=V.data.reduce((te,ee)=>te+(parseInt(ee.leads)||0),0),K=V.data.reduce((te,ee)=>te+(parseInt(ee.facebook_result)||0),0),q=V.data.reduce((te,ee)=>te+(parseInt(ee.zoho_result)||0),0);j({totalReports:V.data.length,totalSpent:re,totalLeads:I,totalFacebookResults:K,totalZohoResults:q,avgCostPerLead:I>0?re/I:0,avgFacebookCostPerLead:K>0?re/K:0,avgZohoCostPerLead:q>0?re/q:0})}else j(null);if(console.log("✅ Reports loaded:",{count:V.data?.length||0,meta:V.meta}),V.data&&V.data.length>0){console.log("🔍 First report data for debugging:"),console.log("📊 Brand name:",V.data[0].brand_name),console.log("📊 Available fields:",Object.keys(V.data[0])),console.log("📊 Full first record:",V.data[0]);const re=Object.keys(V.data[0]).filter(I=>I.toLowerCase().includes("brand"));console.log("📊 Brand-related fields:",re)}}else l(V.message||"Failed to load reports"),e([]),f({}),j(null)}catch(V){console.error("❌ Error loading reports:",V),l("Failed to load reports. Please try again."),e([]),f({}),j(null)}finally{n(!1)}},P=(V,re)=>{u(I=>({...I,[V]:re,page:1}))},D=()=>{S()},T=()=>{u({page:1,limit:20,search:"",date_from:"",date_to:"",campaign_id:"",brand_id:""}),N()},L=V=>{u(re=>({...re,page:V}))},R=V=>V?new Date(V).toLocaleDateString("en-GB"):"",F=V=>V==null?"₹0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(V),U=V=>V==null?"0":new Intl.NumberFormat("en-IN").format(V),H=V=>!V||V===0?"bg-gray-100 text-gray-800":V<5?"bg-green-100 text-green-800":V<10?"bg-yellow-100 text-yellow-800":V<20?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",B=(V,re)=>{const I=parseFloat(V)||0,K=parseInt(re)||0;return K>0?I/K:0},Q=(V,re)=>{const I=parseFloat(V)||0,K=parseInt(re)||0;return K>0?I/K:0},ne=async()=>{try{n(!0),await dl.exportToExcel({date_from:c.date_from,date_to:c.date_to,campaign_id:c.campaign_id,brand_id:c.brand_id})}catch{l("Failed to export reports. Please try again.")}finally{n(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6 space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[a.jsx(ws,{className:"h-8 w-8 mr-3 text-blue-600"}),"Reports Dashboard"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage reports from the database"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:ne,disabled:s||t.length===0,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),a.jsxs("button",{onClick:S,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(mt,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]})]})]})}),v&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Spent"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(v.totalSpent)})]}),a.jsx(ol,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Leads"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U(v.totalLeads)}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs text-gray-500",children:["FB: ",U(v.totalFacebookResults)," | Zoho: ",U(v.totalZohoResults)]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs text-green-600 font-semibold",children:["FB: ",F(v.avgFacebookCostPerLead)]}),a.jsxs("span",{className:"text-xs text-blue-600 font-semibold",children:["Zoho: ",F(v.avgZohoCostPerLead)]})]})]})]}),a.jsx(Ls,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U(v.totalReports)})]}),a.jsx(nn,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Cost/Lead"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(v.avgCostPerLead)})]}),a.jsx(Ix,{className:"h-8 w-8 text-orange-600"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("button",{onClick:()=>w(!b),className:"flex items-center text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:[a.jsx(zx,{className:"h-5 w-5 mr-2 text-blue-600"}),"Filters",a.jsx("svg",{className:`h-4 w-4 ml-2 transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),a.jsx("input",{type:"date",value:c.date_from,onChange:V=>P("date_from",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),a.jsx("input",{type:"date",value:c.date_to,onChange:V=>P("date_to",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign"}),a.jsxs("select",{value:c.campaign_id,onChange:V=>P("campaign_id",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Campaigns"}),p.campaigns?.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),a.jsxs("select",{value:c.brand_id,onChange:V=>P("brand_id",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Brands"}),p.brands?.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[a.jsx("button",{onClick:T,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Clear filters"}),a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:D,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Apply Filters"})})]})]})]}),i&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:a.jsxs("div",{className:"flex",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-3"}),a.jsx("p",{className:"text-sm text-red-700",children:i})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reports Data"}),h.totalCount>0&&a.jsxs("div",{className:"text-sm text-gray-500",children:[h.totalCount," total records"]})]})}),s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Loading reports..."})]})}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),a.jsx("p",{className:"text-gray-600",children:c.date_from||c.date_to?"No reports match your current filters. Try adjusting your search criteria.":"No reports available. Reports will appear here once data is synced from campaign data."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Brand"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Facebook"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Spent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"FB Cost/Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Zoho Cost/Lead"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total Cost/Lead"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(V=>{const re=V.cost_per_lead?parseFloat(V.cost_per_lead):0,I=B(V.spent,V.facebook_result),K=Q(V.spent,V.zoho_result);return a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.campaign_name||`Campaign ${V.campaign_id}`}),a.jsx("div",{className:"text-xs text-gray-500",children:V.campaign_type})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:V.brand_name||"Unknown"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(V.report_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U(V.leads||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(V.facebook_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U(V.zoho_result||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:F(V.spent||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${H(I)}`,children:I>0?F(I):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${H(K)}`,children:K>0?F(K):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${H(re)}`,children:re>0?F(re):"N/A"})})]},V.id)})})]})}),h.totalPages>1&&a.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",h.currentPage," of ",h.totalPages]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>L(h.currentPage-1),disabled:!h.hasPrev,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",h.currentPage," of ",h.totalPages]}),a.jsx("button",{onClick:()=>L(h.currentPage+1),disabled:!h.hasNext,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})]})},hC=()=>a.jsx(V0,{}),mC=()=>a.jsx(V0,{}),fC=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!0),[i,l]=_.useState(null);_.useEffect(()=>{c()},[]);const c=async()=>{n(!0),l(null);try{const u=localStorage.getItem("authToken")||localStorage.getItem("access_token"),h={"Content-Type":"application/json",...u&&{Authorization:`Bearer ${u}`}},p=await(await fetch("/api/analytics/dashboard",{headers:h})).json();p.success?e(p.data):l(p.message||"Failed to load data")}catch(u){console.error("Error loading data:",u),l("Failed to connect to analytics API")}finally{n(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[a.jsx(nn,{className:"mr-3"}),"Report Analytics Dashboard"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Campaign performance insights and data visualization"})]}),a.jsxs("button",{onClick:c,disabled:s,className:"flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium transition-colors bg-white bg-opacity-20 hover:bg-opacity-30 disabled:opacity-50",children:[a.jsx(mt,{className:`h-4 w-4 ${s?"animate-spin":""}`}),a.jsx("span",{children:s?"Loading...":"Refresh"})]})]})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Re,{className:"h-5 w-5 text-red-400 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-600",children:i}),a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Make sure you're logged in and have proper permissions."})]})]})}),t&&a.jsxs("div",{className:"space-y-6",children:[t.topCampaigns&&t.topCampaigns.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:a.jsx("h3",{className:"text-lg font-medium text-white",children:"Top Campaigns"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Brand"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Spent"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.topCampaigns.map((u,h)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.campaign_name||`Campaign ${u.campaign_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.brand||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.total_leads||0}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(u.total_spent||0).toLocaleString()]})]},h))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Debug Information:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Current Month:"})," ",t.overview?.currentMonth||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"User Role:"})," ",t.userRole||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Data Scope:"})," ",t.dataScope||"N/A"]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Top Campaigns Count:"})," ",t.topCampaigns?.length||0]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("strong",{children:"Brand Performance Count:"})," ",t.brandPerformance?.length||0]})]}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Full Debug Data (Click to expand)"}),a.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})]})]})},pC=()=>a.jsx("div",{className:"p-6",children:a.jsx(fC,{})}),nu="http://localhost:5000/api",gC=({account:t,onClose:e,onSave:s})=>{const[n,i]=_.useState({email:t?.email||"",password:"",authenticator:t?.authenticator||"",phone_number:t?.phone_number||"",status:t?.status||"enabled"}),[l,c]=_.useState(null),[u,h]=_.useState(t?.id_image_path?`${nu.replace("/api","")}${t.id_image_path}`:null),[f,p]=_.useState(!1),[x,b]=_.useState(!1),[w,v]=_.useState({}),j=_.useRef(null),N=!!t,E=()=>{const R=localStorage.getItem("authToken"),F=localStorage.getItem("access_token"),U=R||F;return console.log("🔐 [FacebookAccountForm] Token check:",{authToken:R?"Present":"Missing",accessToken:F?"Present":"Missing",finalToken:U?"Present":"Missing"}),U},S=R=>{const{name:F,value:U}=R.target;i(H=>({...H,[F]:U})),w[F]&&v(H=>({...H,[F]:""}))},P=R=>{const F=R.target.files[0];if(F){if(!F.type.startsWith("image/")){fe.error("Please select an image file");return}if(F.size>5*1024*1024){fe.error("Image size must be less than 5MB");return}c(F);const U=new FileReader;U.onload=H=>{h(H.target.result)},U.readAsDataURL(F)}},D=()=>{c(null),h(t?.id_image_path?`${nu.replace("/api","")}${t.id_image_path}`:null),j.current&&(j.current.value="")},T=()=>{const R={};return n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(R.email="Please enter a valid email address"):R.email="Email is required",!N&&!n.password?R.password="Password is required":n.password&&n.password.length<6?R.password="Password must be at least 6 characters long":n.password&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.password)&&(R.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"),n.phone_number&&!/^\+?[\d\s\-\(\)]+$/.test(n.phone_number)&&(R.phone_number="Please enter a valid phone number"),n.authenticator&&n.authenticator.length>500&&(R.authenticator="Authenticator text cannot exceed 500 characters"),v(R),Object.keys(R).length===0},L=async R=>{try{if(R.preventDefault(),console.log("🚀 [FacebookAccountForm] Form submission started"),console.log("📝 [FacebookAccountForm] Form data:",n),console.log("🖼️ [FacebookAccountForm] Selected image:",l?l.name:"None"),!T()){console.log("❌ [FacebookAccountForm] Validation failed"),fe.error("Please fix the errors before submitting");return}console.log("✅ [FacebookAccountForm] Validation passed, starting API call"),b(!0);try{console.log("📝 [FacebookAccountForm] Starting FormData creation...");const F=new FormData;console.log("📝 [FacebookAccountForm] Adding email:",n.email),F.append("email",n.email),n.password?(console.log("📝 [FacebookAccountForm] Adding password: [HIDDEN]"),F.append("password",n.password)):console.log("📝 [FacebookAccountForm] No password provided"),n.authenticator&&(console.log("📝 [FacebookAccountForm] Adding authenticator"),F.append("authenticator",n.authenticator)),n.phone_number&&(console.log("📝 [FacebookAccountForm] Adding phone_number:",n.phone_number),F.append("phone_number",n.phone_number)),console.log("📝 [FacebookAccountForm] Adding status:",n.status),F.append("status",n.status),l?(console.log("📝 [FacebookAccountForm] Adding image file:",l.name),F.append("id_image",l)):console.log("📝 [FacebookAccountForm] No image file selected"),console.log("✅ [FacebookAccountForm] FormData creation completed");const U=N?`/facebook-accounts/${t.id}`:"/facebook-accounts",H=N?"put":"post",B=`${nu}${U}`,Q=E();console.log("🌍 [FacebookAccountForm] API Details:"),console.log("   Method:",H),console.log("   URL:",B),console.log("   Token:",Q?"Present":"Missing"),console.log("   FormData contents:");for(let[V,re]of F.entries())console.log(`     ${V}:`,re instanceof File?`File(${re.name})`:re);const ne=await Le({method:H,url:B,data:F,headers:{Authorization:`Bearer ${Q}`,"Content-Type":"multipart/form-data"}});console.log("✅ [FacebookAccountForm] API Response received:",ne.data),ne.data.success?(fe.success(ne.data.message),s()):fe.error(ne.data.message||"Failed to save account")}catch(F){if(console.error("❌ [FacebookAccountForm] Error saving account:",F),console.log("❌ [FacebookAccountForm] Error details:",{status:F.response?.status,statusText:F.response?.statusText,data:F.response?.data}),F.response?.data?.errors){const U={};F.response.data.errors.forEach(H=>{U[H.path||H.param]=H.msg}),v(U),fe.error("Please fix the validation errors")}else fe.error(F.response?.data?.message||"Failed to save account")}finally{console.log("🔄 [FacebookAccountForm] Setting loading to false"),b(!1)}}catch(F){console.error("🚫 [FacebookAccountForm] Outer error caught:",F),fe.error("An unexpected error occurred. Please try again."),b(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsxs("div",{className:"relative top-8 mx-auto p-5 border max-w-2xl shadow-lg rounded-md bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N?"Edit Facebook Account":"Add Facebook Account"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:R=>{console.log("📝 [FacebookAccountForm] Form onSubmit triggered"),L(R)},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Si,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:S,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook email address",required:!0}),w.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Re,{className:"w-4 h-4 mr-1"}),w.email]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(W1,{className:"w-4 h-4 inline mr-1"}),"Password ",!N&&"*",N&&a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(leave empty to keep current password)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:n.password,onChange:S,className:`block w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Enter Facebook password",required:!N}),a.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:f?a.jsx(ci,{className:"w-4 h-4"}):a.jsx(di,{className:"w-4 h-4"})})]}),w.password&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Re,{className:"w-4 h-4 mr-1"}),w.password]}),!w.password&&n.password&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use a strong password with uppercase, lowercase, and numbers"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(Ci,{className:"w-4 h-4 inline mr-1"}),"Phone Number",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:n.phone_number,onChange:S,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.phone_number?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"+1234567890"}),w.phone_number&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Re,{className:"w-4 h-4 mr-1"}),w.phone_number]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"authenticator",className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(dr,{className:"w-4 h-4 inline mr-1"}),"2FA Authenticator Details",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),a.jsx("textarea",{id:"authenticator",name:"authenticator",value:n.authenticator,onChange:S,rows:3,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 ${w.authenticator?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"2FA backup codes, secret key, or other authenticator details...",maxLength:500}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[w.authenticator?a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Re,{className:"w-4 h-4 mr-1"}),w.authenticator]}):a.jsx("p",{className:"text-xs text-gray-500",children:"Store 2FA backup codes or secret keys securely"}),a.jsxs("span",{className:"text-xs text-gray-400",children:[n.authenticator.length,"/500"]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Cp,{className:"w-4 h-4 inline mr-1"}),"ID Image",a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(optional)"})]}),u?a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:u,alt:"ID Preview",className:"w-24 h-24 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:D,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(rt,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600",children:l?"New image selected":"Current ID image"}),a.jsx("button",{type:"button",onClick:()=>j.current?.click(),className:"mt-2 text-sm text-primary-600 hover:text-primary-700",children:"Change Image"})]})]}):a.jsx("div",{className:"border-2 border-gray-300 border-dashed rounded-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Cp,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("button",{type:"button",onClick:()=>j.current?.click(),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Click to upload"}),a.jsx("span",{className:"text-gray-500",children:" or drag and drop"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG, JPEG up to 5MB"})]})}),a.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:P,className:"hidden"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:n.status,onChange:S,className:"block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x,onClick:R=>{console.log("👆 [FacebookAccountForm] Submit button clicked")},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),N?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"w-4 h-4 mr-2"}),N?"Update Account":"Create Account"]})})]})]})]})})},Zg="http://localhost:5000/api",xC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(!1),[c,u]=_.useState(null),[h,f]=_.useState(""),[p,x]=_.useState("all"),[b,w]=_.useState(1),[v,j]=_.useState(1),[N,E]=_.useState(0),[S]=_.useState(10),[P,D]=_.useState(null),T=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),L=Le.create({baseURL:Zg,headers:{Authorization:`Bearer ${T()}`,"Content-Type":"application/json"}}),R=async(I=1,K="",q="all")=>{try{n(!0);const te=new URLSearchParams({page:I.toString(),limit:S.toString()});K&&te.append("search",K),q&&q!=="all"&&te.append("status",q);const ee=await L.get(`/facebook-accounts?${te}`);ee.data.success?(e(ee.data.data),j(ee.data.pagination?.totalPages||1),E(ee.data.pagination?.total||0),w(ee.data.pagination?.page||1)):fe.error("Failed to fetch Facebook accounts")}catch(te){console.error("Error fetching accounts:",te),fe.error(te.response?.data?.message||"Failed to fetch accounts")}finally{n(!1)}};_.useEffect(()=>{R(b,h,p)},[b,h,p]),_.useEffect(()=>{const I=setTimeout(()=>{b===1?R(1,h,p):w(1)},500);return()=>clearTimeout(I)},[h]);const F=I=>{x(I),w(1)},U=()=>{l(!1),u(null),R(b,h,p),fe.success(c?"Account updated successfully!":"Account created successfully!")},H=I=>{u(I),l(!0)},B=async I=>{try{const K=await L.patch(`/facebook-accounts/${I}/toggle-status`);K.data.success?(fe.success(K.data.message),R(b,h,p)):fe.error("Failed to toggle account status")}catch(K){console.error("Error toggling status:",K),fe.error(K.response?.data?.message||"Failed to toggle status")}},Q=async I=>{try{(await L.delete(`/facebook-accounts/${I}`)).data.success?(fe.success("Account deleted successfully!"),D(null),R(b,h,p)):fe.error("Failed to delete account")}catch(K){console.error("Error deleting account:",K),fe.error(K.response?.data?.message||"Failed to delete account")}},ne=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",V=({status:I})=>{const q=(ee=>{switch(ee){case"enabled":return{className:"bg-green-100 text-green-800",icon:Bu,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:Vr,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Vr,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:Vr,label:"Unknown"}}})(I),te=q.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.className}`,children:[a.jsx(te,{className:"w-3 h-3 mr-1"}),q.label]})},re=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>w(Math.min(v,b+1)),disabled:b===v,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(b-1)*S+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(b*S,N)})," of"," ",a.jsx("span",{className:"font-medium",children:N})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(v)].map((I,K)=>{const q=K+1;return q===1||q===v||q>=b-2&&q<=b+2?a.jsx("button",{onClick:()=>w(q),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${q===b?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:q},q):q===b-3||q===b+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},q):null}),a.jsx("button",{onClick:()=>w(Math.min(v,b+1)),disabled:b===v,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Accounts"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook account credentials and their status"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add Facebook Account"]})})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ns,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by email or phone...",value:h,onChange:I=>f(I.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:I=>F(I.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>R(b,h,p),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(mt,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(mt,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook accounts..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(hi,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook accounts found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"?"Try adjusting your filters":"Add your first Facebook account to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(I=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:I.id_image_path?a.jsx("img",{src:`${Zg.replace("/api","")}${I.id_image_path}`,alt:"ID",className:"h-10 w-10 rounded-full object-cover"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:a.jsx(hi,{className:"h-6 w-6 text-gray-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(Si,{className:"w-4 h-4 mr-1 text-gray-400"}),I.email]}),I.authenticator&&a.jsx("div",{className:"text-xs text-gray-500",children:"2FA Enabled"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:I.phone_number?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ci,{className:"w-4 h-4 mr-1 text-gray-400"}),I.phone_number]}):a.jsx("span",{className:"text-gray-400",children:"No phone"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(V,{status:I.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.jsx("div",{children:ne(I.created_at)}),I.created_by_name&&a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",I.created_by_name]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>B(I.id),className:`p-1 rounded ${I.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${I.status==="enabled"?"Disable":"Enable"} account`,children:I.status==="enabled"?a.jsx(pl,{className:"w-5 h-5"}):a.jsx(fl,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>H(I),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit account",children:a.jsx(Is,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>D(I.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete account",children:a.jsx(es,{className:"w-4 h-4"})})]})})]},I.id))})]})}),v>1&&a.jsx(re,{})]})}),i&&a.jsx(gC,{account:c,onClose:()=>{l(!1),u(null)},onSave:U}),P&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(es,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Account"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook account? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>Q(P),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Account"}),a.jsx("button",{onClick:()=>D(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},yC="http://localhost:5000/api",bC=({page:t,onClose:e,onSave:s})=>{const[n,i]=_.useState({facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),[l,c]=_.useState([]),[u,h]=_.useState(!1),[f,p]=_.useState({}),[x,b]=_.useState({}),w=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),v=Le.create({baseURL:yC,headers:{Authorization:`Bearer ${w()}`,"Content-Type":"application/json"}}),j=async()=>{try{const P=await v.get("/facebook-accounts?limit=1000&status=enabled");P.data.success&&c(P.data.data||[])}catch(P){console.error("Error fetching Facebook accounts:",P),fe.error("Failed to load Facebook accounts")}};_.useEffect(()=>{j(),i(t?{facebook_account_id:t.facebook_account_id||"",page_name:t.page_name||"",page_description:t.page_description||"",status:t.status||"enabled"}:{facebook_account_id:"",page_name:"",page_description:"",status:"enabled"}),p({}),b({})},[t]);const N=P=>{const{name:D,value:T}=P.target;i(L=>({...L,[D]:T})),f[D]&&p(L=>{const R={...L};return delete R[D],R}),x[D]&&b(L=>{const R={...L};return delete R[D],R})},E=()=>{const P={};return n.facebook_account_id||(P.facebook_account_id="Facebook account is required"),n.page_name.trim()?n.page_name.trim().length<2?P.page_name="Page name must be at least 2 characters":n.page_name.trim().length>255&&(P.page_name="Page name must be less than 255 characters"):P.page_name="Page name is required",n.page_description&&n.page_description.trim().length>1e3&&(P.page_description="Description must be less than 1000 characters"),n.status||(P.status="Status is required"),b(P),Object.keys(P).length===0},S=async P=>{if(P.preventDefault(),console.log("🔄 Form submit triggered"),console.log("📝 Form data:",n),!E()){console.log("❌ Form validation failed:",x);return}h(!0),p({});try{const D=w();console.log("🔑 Auth token present:",!!D);const T={facebook_account_id:parseInt(n.facebook_account_id),page_name:n.page_name.trim(),page_description:n.page_description.trim()||null,status:n.status};console.log("📤 Submitting data:",T);let L;t?(console.log("✏️ Updating page with ID:",t.id),L=await v.put(`/facebook-pages/${t.id}`,T)):(console.log("➕ Creating new page"),L=await v.post("/facebook-pages",T)),console.log("✅ API Response:",L.data),L.data.success?(fe.success(t?"Page updated successfully!":"Page created successfully!"),s()):(console.log("❌ API returned failure:",L.data),fe.error(L.data.message||"Failed to save page"))}catch(D){console.error("❌ Error saving page:",D),D.response?(console.log("📋 Error response data:",D.response.data),console.log("📋 Error status:",D.response.status),D.response.status===400&&D.response.data.errors?(p(D.response.data.errors),fe.error("Please fix the validation errors")):D.response.status===409?(fe.error("A page with this name already exists for the selected Facebook account"),p({page_name:"Page name already exists for this account"})):fe.error(D.response.data.message||"Failed to save page")):D.request?(console.log("📡 No response received:",D.request),fe.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",D.message),fe.error("An unexpected error occurred"))}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:S,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ws,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Facebook Page":"Add Facebook Page"})})]}),a.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook_account_id",className:"block text-sm font-medium text-gray-700",children:"Facebook Account *"}),a.jsxs("select",{id:"facebook_account_id",name:"facebook_account_id",value:n.facebook_account_id,onChange:N,disabled:u,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${f.facebook_account_id||x.facebook_account_id?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:"Select Facebook Account"}),l.map(P=>a.jsx("option",{value:P.id,children:P.email},P.id))]}),(f.facebook_account_id||x.facebook_account_id)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),f.facebook_account_id||x.facebook_account_id]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_name",className:"block text-sm font-medium text-gray-700",children:"Page Name *"}),a.jsx("input",{type:"text",id:"page_name",name:"page_name",value:n.page_name,onChange:N,disabled:u,placeholder:"Enter page name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${f.page_name||x.page_name?"border-red-500":""}`,required:!0,maxLength:255}),(f.page_name||x.page_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),f.page_name||x.page_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"page_description",className:"block text-sm font-medium text-gray-700",children:"Page Description"}),a.jsx("textarea",{id:"page_description",name:"page_description",value:n.page_description,onChange:N,disabled:u,placeholder:"Enter page description (optional)",rows:3,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${f.page_description||x.page_description?"border-red-500":""}`,maxLength:1e3}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[n.page_description.length,"/1000 characters"]}),(f.page_description||x.page_description)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),f.page_description||x.page_description]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:n.status,onChange:N,disabled:u,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${f.status||x.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(f.status||x.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),f.status||x.status]})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,disabled:u,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"h-4 w-4 mr-2"}),t?"Update Page":"Create Page"]})})]})]})})})},vC="http://localhost:5000/api",wC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,l]=_.useState(!1),[c,u]=_.useState(null),[h,f]=_.useState(""),[p,x]=_.useState("all"),[b,w]=_.useState("all"),[v,j]=_.useState(1),[N,E]=_.useState(1),[S,P]=_.useState(0),[D]=_.useState(10),[T,L]=_.useState(null),[R,F]=_.useState([]),U=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),H=Le.create({baseURL:vC,headers:{Authorization:`Bearer ${U()}`,"Content-Type":"application/json"}}),B=async()=>{try{const A=await H.get("/facebook-accounts?limit=1000");A.data.success&&F(A.data.data||[])}catch(A){console.error("Error fetching Facebook accounts:",A)}},Q=async(A=1,ae="",de="all",$="all")=>{try{n(!0);const Z=new URLSearchParams({page:A.toString(),limit:D.toString()});ae&&Z.append("search",ae),de&&de!=="all"&&Z.append("status",de),$&&$!=="all"&&Z.append("facebook_account_id",$);const he=await H.get(`/facebook-pages?${Z}`);he.data.success?(e(he.data.data||[]),E(he.data.pagination?.totalPages||1),P(he.data.pagination?.total||0),j(he.data.pagination?.page||1)):fe.error("Failed to fetch Facebook pages")}catch(Z){console.error("Error fetching pages:",Z),fe.error(Z.response?.data?.message||"Failed to fetch pages")}finally{n(!1)}};_.useEffect(()=>{B(),Q(v,h,p,b)},[v,h,p,b]),_.useEffect(()=>{const A=setTimeout(()=>{v===1?Q(1,h,p,b):j(1)},500);return()=>clearTimeout(A)},[h]);const ne=A=>{x(A),j(1)},V=A=>{w(A),j(1)},re=()=>{l(!1),u(null),Q(v,h,p,b),fe.success(c?"Page updated successfully!":"Page created successfully!")},I=A=>{u(A),l(!0)},K=async A=>{try{const ae=await H.patch(`/facebook-pages/${A}/toggle-status`);ae.data.success?(fe.success(ae.data.message),Q(v,h,p,b)):fe.error("Failed to toggle page status")}catch(ae){console.error("Error toggling status:",ae),fe.error(ae.response?.data?.message||"Failed to toggle status")}},q=async A=>{try{(await H.delete(`/facebook-pages/${A}`)).data.success?(fe.success("Page deleted successfully!"),L(null),Q(v,h,p,b)):fe.error("Failed to delete page")}catch(ae){console.error("Error deleting page:",ae),fe.error(ae.response?.data?.message||"Failed to delete page")}},te=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ee=({status:A})=>{const de=(Z=>{switch(Z){case"enabled":return{className:"bg-green-100 text-green-800",icon:Bu,label:"Enabled"};case"disabled":return{className:"bg-red-100 text-red-800",icon:Vr,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Pl,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:Vr,label:"Unknown"}}})(A),$=de.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.className}`,children:[a.jsx($,{className:"w-3 h-3 mr-1"}),de.label]})},C=()=>a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>j(Math.max(1,v-1)),disabled:v===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>j(Math.min(N,v+1)),disabled:v===N,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:(v-1)*D+1})," to"," ",a.jsx("span",{className:"font-medium",children:Math.min(v*D,S)})," of"," ",a.jsx("span",{className:"font-medium",children:S})," results"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx("button",{onClick:()=>j(Math.max(1,v-1)),disabled:v===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(N)].map((A,ae)=>{const de=ae+1;return de===1||de===N||de>=v-2&&de<=v+2?a.jsx("button",{onClick:()=>j(de),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${de===v?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:de},de):de===v-3||de===v+3?a.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},de):null}),a.jsx("button",{onClick:()=>j(Math.min(N,v+1)),disabled:v===N,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]});return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facebook Pages"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage Facebook pages linked to your accounts"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add Facebook Page"]})})]})}),a.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ns,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by page name...",value:h,onChange:A=>f(A.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsx("div",{children:a.jsxs("select",{value:p,onChange:A=>ne(A.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Enabled"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]})}),a.jsx("div",{children:a.jsxs("select",{value:b,onChange:A=>V(A.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Accounts"}),R.map(A=>a.jsx("option",{value:A.id,children:A.email},A.id))]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>Q(v,h,p,b),disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[a.jsx(mt,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(mt,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Loading Facebook pages..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(ws,{className:"w-12 h-12 mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"No Facebook pages found"}),a.jsx("p",{className:"text-sm text-gray-400",children:h||p!=="all"||b!=="all"?"Try adjusting your filters":"Add your first Facebook page to get started"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facebook Account"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(ws,{className:"h-6 w-6 text-blue-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.page_name}),A.page_description&&a.jsx("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:A.page_description})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(V1,{className:"w-4 h-4 mr-1 text-gray-400"}),A.facebook_account_email||`Account #${A.facebook_account_id}`]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(ee,{status:A.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.jsx("div",{children:te(A.created_at)}),A.created_by_name&&a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",A.created_by_name]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>K(A.id),className:`p-1 rounded ${A.status==="enabled"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,title:`${A.status==="enabled"?"Disable":"Enable"} page`,children:A.status==="enabled"?a.jsx(pl,{className:"w-5 h-5"}):a.jsx(fl,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>I(A),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit page",children:a.jsx(Is,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>L(A.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete page",children:a.jsx(es,{className:"w-4 h-4"})})]})})]},A.id))})]})}),N>1&&a.jsx(C,{})]})}),i&&a.jsx(bC,{page:c,onClose:()=>{l(!1),u(null)},onSave:re}),T&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(es,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Facebook Page"}),a.jsx("div",{className:"mt-2 px-7 py-3",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Facebook page? This action cannot be undone."})}),a.jsxs("div",{className:"items-center px-4 py-3",children:[a.jsx("button",{onClick:()=>q(T),className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Delete Page"}),a.jsx("button",{onClick:()=>L(null),className:"mt-3 px-4 py-2 bg-white text-gray-500 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"})]})]})})})]})},jC="http://localhost:5000/api",NC=({bm:t,onClose:e,onSave:s})=>{const[n,i]=_.useState({bm_name:"",email:"",phone_number:"",status:"enabled"}),[l,c]=_.useState(!1),[u,h]=_.useState({}),[f,p]=_.useState({}),x=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),b=Le.create({baseURL:jC,headers:{Authorization:`Bearer ${x()}`,"Content-Type":"application/json"}});_.useEffect(()=>{i(t?{bm_name:t.bm_name||"",email:t.email||"",phone_number:t.phone_number||"",status:t.status||"enabled"}:{bm_name:"",email:"",phone_number:"",status:"enabled"}),h({}),p({})},[t]);const w=N=>{const{name:E,value:S}=N.target;i(P=>({...P,[E]:S})),u[E]&&h(P=>{const D={...P};return delete D[E],D}),f[E]&&p(P=>{const D={...P};return delete D[E],D})},v=()=>{const N={};return n.bm_name.trim()?n.bm_name.trim().length<2?N.bm_name="Business Manager name must be at least 2 characters":n.bm_name.trim().length>255&&(N.bm_name="Business Manager name must be less than 255 characters"):N.bm_name="Business Manager name is required",n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email.trim())||(N.email="Please provide a valid email address"):N.email="Email is required",n.phone_number&&n.phone_number.trim().length>50&&(N.phone_number="Phone number must be less than 50 characters"),n.status||(N.status="Status is required"),p(N),Object.keys(N).length===0},j=async N=>{if(N.preventDefault(),console.log("🔄 BM Form submit triggered"),console.log("📝 Form data:",n),!v()){console.log("❌ Form validation failed:",f);return}c(!0),h({});try{const E=x();console.log("🔑 Auth token present:",!!E);const S={bm_name:n.bm_name.trim(),email:n.email.trim(),phone_number:n.phone_number.trim()||null,status:n.status};console.log("📤 Submitting BM data:",S);let P;t?(console.log("✏️ Updating BM with ID:",t.id),P=await b.put(`/bm/${t.id}`,S)):(console.log("➕ Creating new BM"),P=await b.post("/bm",S)),console.log("✅ API Response:",P.data),P.data.success?(fe.success(t?"Business Manager updated successfully!":"Business Manager created successfully!"),s()):(console.log("❌ API returned failure:",P.data),fe.error(P.data.message||"Failed to save Business Manager"))}catch(E){console.error("❌ Error saving BM:",E),E.response?(console.log("📋 Error response data:",E.response.data),console.log("📋 Error status:",E.response.status),E.response.status===400&&E.response.data.errors?(h(E.response.data.errors),fe.error("Please fix the validation errors")):E.response.status===409?(fe.error("A Business Manager with this email already exists"),h({email:"Email already exists"})):fe.error(E.response.data.message||"Failed to save Business Manager")):E.request?(console.log("📡 No response received:",E.request),fe.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",E.message),fe.error("An unexpected error occurred"))}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:j,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(sn,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Business Manager":"Add Business Manager"})})]}),a.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bm_name",className:"block text-sm font-medium text-gray-700",children:"Business Manager Name *"}),a.jsx("input",{type:"text",id:"bm_name",name:"bm_name",value:n.bm_name,onChange:w,disabled:l,placeholder:"Enter Business Manager name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${u.bm_name||f.bm_name?"border-red-500":""}`,required:!0,maxLength:255}),(u.bm_name||f.bm_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),u.bm_name||f.bm_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Si,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:w,disabled:l,placeholder:"Enter email address",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${u.email||f.email?"border-red-500":""}`,required:!0})]}),(u.email||f.email)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),u.email||f.email]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ci,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:n.phone_number,onChange:w,disabled:l,placeholder:"Enter phone number (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${u.phone_number||f.phone_number?"border-red-500":""}`,maxLength:50})]}),(u.phone_number||f.phone_number)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),u.phone_number||f.phone_number]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:n.status,onChange:w,disabled:l,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${u.status||f.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(u.status||f.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),u.status||f.status]})]})]}),n.status==="disabled"&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Re,{className:"h-4 w-4 text-yellow-600 mr-2"}),a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Warning:"})," Disabling this Business Manager will automatically disable all associated Ads Managers."]})]})}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,disabled:l,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"h-4 w-4 mr-2"}),t?"Update BM":"Create BM"]})})]})]})})})},_C="http://localhost:5000/api",kC=({adsManager:t,selectedBMId:e,onClose:s,onSave:n})=>{const[i,l]=_.useState({ads_manager_name:"",email:"",phone_number:"",status:"enabled",bm_id:e||""}),[c,u]=_.useState([]),[h,f]=_.useState(!1),[p,x]=_.useState(!1),[b,w]=_.useState({}),[v,j]=_.useState({}),N=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),E=Le.create({baseURL:_C,headers:{Authorization:`Bearer ${N()}`,"Content-Type":"application/json"}});_.useEffect(()=>{(async()=>{x(!0);try{const R=await E.get("/bm/dropdown");R.data.success?u(R.data.data):(console.log("Failed to load BM options:",R.data.message),fe.error("Failed to load Business Manager options"))}catch(R){console.error("Error loading BM options:",R),fe.error("Failed to load Business Manager options")}finally{x(!1)}})()},[]),_.useEffect(()=>{l(t?{ads_manager_name:t.ads_manager_name||"",email:t.email||"",phone_number:t.phone_number||"",status:t.status||"enabled",bm_id:t.bm_id||e||""}:{ads_manager_name:"",email:"",phone_number:"",status:"enabled",bm_id:e||""}),w({}),j({})},[t,e]);const S=L=>{const{name:R,value:F}=L.target;l(U=>({...U,[R]:F})),b[R]&&w(U=>{const H={...U};return delete H[R],H}),v[R]&&j(U=>{const H={...U};return delete H[R],H})},P=()=>{const L={};return i.ads_manager_name.trim()?i.ads_manager_name.trim().length<2?L.ads_manager_name="Ads Manager name must be at least 2 characters":i.ads_manager_name.trim().length>255&&(L.ads_manager_name="Ads Manager name must be less than 255 characters"):L.ads_manager_name="Ads Manager name is required",i.email&&i.email.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email.trim())||(L.email="Please provide a valid email address")),i.phone_number&&i.phone_number.trim().length>50&&(L.phone_number="Phone number must be less than 50 characters"),i.bm_id||(L.bm_id="Business Manager is required"),i.status||(L.status="Status is required"),j(L),Object.keys(L).length===0},D=async L=>{if(L.preventDefault(),console.log("🔄 Ads Manager Form submit triggered"),console.log("📝 Form data:",i),!P()){console.log("❌ Form validation failed:",v);return}f(!0),w({});try{const R=N();console.log("🔑 Auth token present:",!!R);const F={ads_manager_name:i.ads_manager_name.trim(),email:i.email.trim()||null,phone_number:i.phone_number.trim()||null,bm_id:parseInt(i.bm_id),status:i.status};console.log("📤 Submitting Ads Manager data:",F);let U;t?(console.log("✏️ Updating Ads Manager with ID:",t.id),U=await E.put(`/ads-managers/${t.id}`,F)):(console.log("➕ Creating new Ads Manager"),U=await E.post("/ads-managers",F)),console.log("✅ API Response:",U.data),U.data.success?(fe.success(t?"Ads Manager updated successfully!":"Ads Manager created successfully!"),n()):(console.log("❌ API returned failure:",U.data),fe.error(U.data.message||"Failed to save Ads Manager"))}catch(R){if(console.error("❌ Error saving Ads Manager:",R),R.response)if(console.log("📋 Error response data:",R.response.data),console.log("📋 Error status:",R.response.status),console.log("📋 Error message:",R.response.data.message),R.response.status===400&&R.response.data.errors)w(R.response.data.errors),fe.error("Please fix the validation errors");else if(R.response.status===409){const F=R.response.data.message||"Conflict error occurred";F.includes("email")?(fe.error("An Ads Manager with this email already exists"),w({email:"Email already exists"})):F.includes("name")||F.includes("already exists")?(fe.error("An Ads Manager with this name already exists for this Business Manager"),w({ads_manager_name:"This name already exists for this Business Manager"})):fe.error(F)}else fe.error(R.response.data.message||"Failed to save Ads Manager");else R.request?(console.log("📡 No response received:",R.request),fe.error("Network error. Please check your connection.")):(console.log("⚙️ Request setup error:",R.message),fe.error("An unexpected error occurred"))}finally{f(!1)}},T=()=>{const L=c.find(R=>R.id===parseInt(i.bm_id));return L?L.bm_name:"Unknown Business Manager"};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:a.jsxs("form",{onSubmit:D,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ui,{className:"h-6 w-6 text-green-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Edit Ads Manager":"Add Ads Manager"})})]}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(rt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"ads_manager_name",className:"block text-sm font-medium text-gray-700",children:"Ads Manager Name *"}),a.jsx("input",{type:"text",id:"ads_manager_name",name:"ads_manager_name",value:i.ads_manager_name,onChange:S,disabled:h,placeholder:"Enter Ads Manager name",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${b.ads_manager_name||v.ads_manager_name?"border-red-500":""}`,required:!0,maxLength:255}),(b.ads_manager_name||v.ads_manager_name)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),b.ads_manager_name||v.ads_manager_name]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Si,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:S,disabled:h,placeholder:"Enter email address (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${b.email||v.email?"border-red-500":""}`})]}),(b.email||v.email)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),b.email||v.email]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ci,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:i.phone_number,onChange:S,disabled:h,placeholder:"Enter phone number (optional)",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${b.phone_number||v.phone_number?"border-red-500":""}`,maxLength:50})]}),(b.phone_number||v.phone_number)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),b.phone_number||v.phone_number]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bm_id",className:"block text-sm font-medium text-gray-700",children:"Business Manager *"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(sn,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("select",{id:"bm_id",name:"bm_id",value:i.bm_id,onChange:S,disabled:h||p,className:`block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${b.bm_id||v.bm_id?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"",children:p?"Loading Business Managers...":"Select Business Manager"}),c.map(L=>a.jsx("option",{value:L.id,children:L.bm_name},L.id))]})]}),(b.bm_id||v.bm_id)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),b.bm_id||v.bm_id]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status *"}),a.jsxs("select",{id:"status",name:"status",value:i.status,onChange:S,disabled:h,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 ${b.status||v.status?"border-red-500":""}`,required:!0,children:[a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended Temporarily"})]}),(b.status||v.status)&&a.jsxs("div",{className:"mt-1 flex items-center text-sm text-red-600",children:[a.jsx(Re,{className:"h-4 w-4 mr-1"}),b.status||v.status]})]})]}),i.bm_id&&!p&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"h-4 w-4 text-blue-600 mr-2"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Assigned to:"})," ",T()]})]})}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:h,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:h||p,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ra,{className:"h-4 w-4 mr-2"}),t?"Update Ads Manager":"Create Ads Manager"]})})]})]})})})},SC="http://localhost:5000/api",CC=()=>{const[t,e]=_.useState([]),[s,n]=_.useState(null),[i,l]=_.useState([]),[c,u]=_.useState(!0),[h,f]=_.useState(!1),[p,x]=_.useState(!1),[b,w]=_.useState(!1),[v,j]=_.useState(null),[N,E]=_.useState(null),[S,P]=_.useState(""),[D,T]=_.useState("all"),L=()=>localStorage.getItem("authToken")||localStorage.getItem("access_token"),R=Le.create({baseURL:SC,headers:{Authorization:`Bearer ${L()}`,"Content-Type":"application/json"}}),F=async(C="",A="all")=>{try{console.log("🔍 Frontend: fetchBMs called with:",{search:C,status:A}),u(!0);const ae=new URLSearchParams({limit:"100"});C&&ae.append("search",C),A&&A!=="all"&&ae.append("status",A);const de=`/bm?${ae}`;console.log("🔍 Frontend: API URL:",de);const $=await R.get(de);$.data.success?(e($.data.data||[]),!s&&$.data.data.length>0&&n($.data.data[0])):fe.error("Failed to fetch Business Managers")}catch(ae){console.error("Error fetching BMs:",ae),fe.error(ae.response?.data?.message||"Failed to fetch BMs")}finally{u(!1)}},U=async C=>{if(!C){l([]);return}try{f(!0);const A=await R.get(`/ads-managers/bm/${C}`);A.data.success?l(A.data.data||[]):fe.error("Failed to fetch Ads Managers")}catch(A){console.error("Error fetching Ads Managers:",A),fe.error(A.response?.data?.message||"Failed to fetch Ads Managers")}finally{f(!1)}};_.useEffect(()=>{console.log("🔍 Frontend: useEffect triggered - searchTerm:",S,"statusFilter:",D),F(S,D)},[S,D]),_.useEffect(()=>{s?U(s.id):l([])},[s]);const H=C=>{n(C)},B=()=>{x(!1),j(null),F(S,D),fe.success(v?"BM updated successfully!":"BM created successfully!")},Q=()=>{w(!1),E(null),s&&U(s.id),fe.success(N?"Ads Manager updated successfully!":"Ads Manager created successfully!")},ne=C=>{j(C),x(!0)},V=C=>{E(C),w(!0)},re=async C=>{try{const A=await R.patch(`/bm/${C}/toggle-status`);A.data.success?(fe.success(A.data.message),F(S,D),s&&s.id===C&&U(C)):fe.error("Failed to toggle BM status")}catch(A){console.error("Error toggling BM status:",A),fe.error(A.response?.data?.message||"Failed to toggle status")}},I=async C=>{try{const A=await R.patch(`/ads-managers/${C}/toggle-status`);A.data.success?(fe.success(A.data.message),s&&U(s.id)):fe.error("Failed to toggle Ads Manager status")}catch(A){console.error("Error toggling Ads Manager status:",A),fe.error(A.response?.data?.message||"Failed to toggle status")}},K=async C=>{if(window.confirm("Are you sure you want to delete this Business Manager? This will also delete all associated Ads Managers."))try{(await R.delete(`/bm/${C}`)).data.success?(fe.success("BM deleted successfully!"),F(S,D),s&&s.id===C&&n(null)):fe.error("Failed to delete BM")}catch(A){console.error("Error deleting BM:",A),fe.error(A.response?.data?.message||"Failed to delete BM")}},q=async C=>{if(window.confirm("Are you sure you want to delete this Ads Manager?"))try{(await R.delete(`/ads-managers/${C}`)).data.success?(fe.success("Ads Manager deleted successfully!"),s&&U(s.id)):fe.error("Failed to delete Ads Manager")}catch(A){console.error("Error deleting Ads Manager:",A),fe.error(A.response?.data?.message||"Failed to delete Ads Manager")}},te=C=>C?new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",ee=({status:C,type:A="bm"})=>{const de=(Z=>{switch(Z){case"enabled":return{className:"bg-green-100 text-green-800",icon:Bu,label:"Active"};case"disabled":return{className:"bg-red-100 text-red-800",icon:Vr,label:"Disabled"};case"suspended_temporarily":return{className:"bg-yellow-100 text-yellow-800",icon:Pl,label:"Suspended"};default:return{className:"bg-gray-100 text-gray-800",icon:Re,label:"Unknown"}}})(C),$=de.icon;return a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${de.className}`,children:[a.jsx($,{className:"w-3 h-3 mr-1"}),de.label]})};return a.jsxs("div",{className:"flex h-full bg-gray-50",children:[a.jsxs("div",{className:"w-1/3 bg-white border-r border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(sn,{className:"h-6 w-6 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Business Managers"})]}),a.jsxs("button",{onClick:()=>{j(null),x(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ge,{className:"w-4 h-4 mr-1"}),"Add BM"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search Business Managers...",value:S,onChange:C=>P(C.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("select",{value:D,onChange:C=>T(C.target.value),className:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"enabled",children:"Active"}),a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"suspended_temporarily",children:"Suspended"})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:c?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(mt,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading Business Managers..."})]}):t.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(sn,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No Business Managers found"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:S||D!=="all"?"Try adjusting your filters":"Create your first Business Manager to get started"})]}):a.jsx("div",{className:"divide-y divide-gray-200",children:t.map(C=>a.jsx("div",{className:`p-4 cursor-pointer transition-colors hover:bg-gray-50 ${s?.id===C.id?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>H(C),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:C.bm_name}),a.jsx(ee,{status:C.status})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Si,{className:"w-3 h-3 mr-1"}),a.jsx("span",{className:"truncate",children:C.email})]}),C.phone_number&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Ci,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:C.phone_number})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Rn,{className:"w-3 h-3 mr-1"}),a.jsxs("span",{children:[C.ads_managers_count||0," Ads Managers"]})]})]})]}),a.jsxs("div",{className:"ml-2 flex items-center space-x-1",children:[a.jsx("button",{onClick:A=>{A.stopPropagation(),re(C.id)},className:`p-1 rounded hover:bg-gray-200 ${C.status==="enabled"?"text-red-600":"text-green-600"}`,title:`${C.status==="enabled"?"Disable":"Enable"} BM`,children:C.status==="enabled"?a.jsx(pl,{className:"w-4 h-4"}):a.jsx(fl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:A=>{A.stopPropagation(),ne(C)},className:"p-1 rounded hover:bg-gray-200 text-blue-600",title:"Edit BM",children:a.jsx(Is,{className:"w-4 h-4"})}),a.jsx("button",{onClick:A=>{A.stopPropagation(),K(C.id)},className:"p-1 rounded hover:bg-gray-200 text-red-600",title:"Delete BM",children:a.jsx(es,{className:"w-4 h-4"})})]})]})},C.id))})})]}),a.jsx("div",{className:"flex-1 bg-white flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xr,{className:"h-6 w-6 text-green-600 mr-2"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ads Managers"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["for ",s.bm_name]})]})]}),a.jsxs("button",{onClick:()=>{E(null),w(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:[a.jsx(Ge,{className:"w-4 h-4 mr-1"}),"Add Ads Manager"]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ee,{status:s.status}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:s.bm_name}),a.jsx("div",{className:"text-gray-500",children:s.email})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," Ads Manager",i.length!==1?"s":""]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading Ads Managers..."})]}):i.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No Ads Managers found"}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Create the first Ads Manager for ",s.bm_name]}),a.jsxs("button",{onClick:()=>{E(null),w(!0)},className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add First Ads Manager"]})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(C=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(ee,{status:C.status,type:"ads"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>I(C.id),className:`p-1 rounded hover:bg-gray-200 ${C.status==="enabled"?"text-red-600":"text-green-600"}`,title:`${C.status==="enabled"?"Disable":"Enable"} Ads Manager`,children:C.status==="enabled"?a.jsx(pl,{className:"w-4 h-4"}):a.jsx(fl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>V(C),className:"p-1 rounded hover:bg-gray-200 text-blue-600",title:"Edit Ads Manager",children:a.jsx(Is,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>q(C.id),className:"p-1 rounded hover:bg-gray-200 text-red-600",title:"Delete Ads Manager",children:a.jsx(es,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:C.ads_manager_name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",te(C.created_at)]})]})]},C.id))})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sn,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Business Manager"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Choose a Business Manager from the left panel to view and manage its Ads Managers"}),t.length===0&&a.jsxs("button",{onClick:()=>{j(null),x(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Create First Business Manager"]})]})})}),p&&a.jsx(NC,{bm:v,onClose:()=>{x(!1),j(null)},onSave:B}),b&&s&&a.jsx(kC,{adsManager:N,selectedBM:s,onClose:()=>{w(!1),E(null)},onSave:Q})]})},EC=()=>{const[t,e]=_.useState(null),[s,n]=_.useState(!1),[i,l]=_.useState(null),c=async()=>{n(!0),l(null);try{const u=localStorage.getItem("token"),f=await(await fetch("http://localhost:5000/api/simple-reports/simple",{headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}})).json();console.log("🔍 Simple Reports API Response:",f),console.log("📊 Raw Data:",f.data),f.data&&f.data.length>0&&(console.log("🏷️ First Record:",f.data[0]),console.log("🏷️ Fields Available:",Object.keys(f.data[0])),console.log("🏷️ Brand Name Field:",f.data[0].brand_name),console.log("🏷️ Brand Table Name:",f.data[0].brand_table_name)),e(f)}catch(u){console.error("❌ Error fetching simple reports:",u),l(u.message)}finally{n(!1)}};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Simple Reports Test"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Direct database query test - bypassing all models and complex processing"}),a.jsx("button",{onClick:c,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:s?"Loading...":"Fetch Simple Reports"})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("p",{className:"text-red-700",children:["Error: ",i]})}),t&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Raw Database Results"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.message})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-md p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Query Executed:"}),a.jsx("pre",{className:"text-xs text-gray-600 overflow-x-auto whitespace-pre-wrap",children:t.query_executed})]}),t.data&&t.data.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand Name (Reports)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand Name (Table)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leads"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spent"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data.map(u=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.id}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.campaign_name}),a.jsx("div",{className:"text-sm text-gray-500",children:u.campaign_type})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.brand_id||"NULL"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${u.brand_name?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.brand_name||"NULL"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${u.brand_table_name?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:u.brand_table_name||"NULL"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.report_date?new Date(u.report_date).toLocaleDateString():"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.leads||0}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",parseFloat(u.spent||0).toLocaleString()]})]},u.id))})]})}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No reports found"})}),t.data&&t.data.length>0&&a.jsxs("div",{className:"bg-blue-50 rounded-md p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Raw JSON Data (First Record):"}),a.jsx("pre",{className:"text-xs text-blue-800 overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(t.data[0],null,2)})]})]})]})]})},ru=()=>{console.log("🔒 Hiding TOTP fields from user interface..."),['input[name*="totp" i]','input[name*="totp_secret" i]','input[name*="totp-secret" i]','input[id*="totp" i]','input[id*="totp_secret" i]','input[id*="totp-secret" i]','label[for*="totp" i]','label[for*="totp_secret" i]','label[for*="totp-secret" i]','button[data-action*="generate-totp" i]','button[data-action*="generate_totp" i]','input[type="button"][value*="Generate TOTP" i]','input[type="submit"][value*="Generate TOTP" i]',".totp-field",".totp-secret-field",".totp_secret_field",".totp-container",".totp_container",".generate-totp",".generate_totp",'[data-field*="totp" i]','[data-field*="totp-secret" i]','[data-field*="totp_secret" i]','[data-name*="totp" i]','[data-name*="totp-secret" i]','[data-name*="totp_secret" i]'].forEach(n=>{try{const i=document.querySelectorAll(n);i.forEach(l=>{l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true");const c=l.closest(".form-group, .form-field, .field-container, .input-group");c&&(c.style.display="none",c.style.visibility="hidden",c.setAttribute("hidden","true"))}),i.length>0&&console.log(`🔒 Hidden ${i.length} elements matching: ${n}`)}catch(i){console.warn(`⚠️ Error hiding elements for selector "${n}":`,i)}}),(n=>{n.forEach(i=>{const l=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1),c=[];let u;for(;u=l.nextNode();)u.textContent.toLowerCase().includes(i.toLowerCase())&&c.push(u);c.forEach(h=>{let f=h.parentElement;for(;f&&f.tagName!=="BODY";){if(["INPUT","LABEL","BUTTON","DIV","SPAN","TR","TD","TH"].includes(f.tagName)){f.style.display="none",f.style.visibility="hidden",f.setAttribute("hidden","true"),console.log(`🔒 Hidden element containing text "${i}":`,f.tagName,f.className);break}f=f.parentElement}})})})(["TOTP Secret","Generate TOTP","TOTP secret","totp secret","Two-Factor Authentication Secret","Authenticator Secret"]),document.querySelectorAll('button, input[type="button"], input[type="submit"]').forEach(n=>{const i=n.textContent||n.value||"";if(i.toLowerCase().includes("generate totp")||i.toLowerCase().includes("generate secret")||i.toLowerCase().includes("totp secret")){n.style.display="none",n.style.visibility="hidden",n.setAttribute("hidden","true");const l=n.closest(".form-group, .form-field, .field-container, .button-group");l&&(l.style.display="none",l.style.visibility="hidden",l.setAttribute("hidden","true")),console.log(`🔒 Hidden button with text: "${i}"`)}}),console.log("✅ TOTP fields hiding completed")},W0=()=>{console.log("🔒 Initializing TOTP field hiding..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ru):ru(),new MutationObserver(e=>{let s=!1;e.forEach(n=>{n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&i.querySelector&&(i.querySelector('input[name*="totp" i]')||i.querySelector('*[class*="totp" i]')||i.textContent?.toLowerCase().includes("totp secret")||i.textContent?.toLowerCase().includes("generate totp"))&&(s=!0)})}),s&&(console.log("🔒 New TOTP content detected, hiding fields..."),setTimeout(ru,100))}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","name"]}),console.log("✅ TOTP field hiding initialized with mutation observer")};typeof window<"u"&&W0();const AC=()=>localStorage.getItem("access_token")||localStorage.getItem("authToken")?a.jsx(iu,{to:"/dashboard",replace:!0}):a.jsx(iu,{to:"/login",replace:!0});function PC(){return _.useEffect(()=>{console.log("🔒 App: Initializing TOTP field hiding..."),W0()},[]),a.jsx(T1,{children:a.jsx(Jv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(Vv,{children:[a.jsx(ot,{path:"/login",element:a.jsx(ej,{})}),a.jsx(ot,{path:"/",element:a.jsx(AC,{})}),a.jsx(ot,{path:"/dashboard",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(KS,{})})})})}),a.jsx(ot,{path:"/user-management",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(rj,{})})})})}),a.jsx(ot,{path:"/role-management",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(ZS,{})})})})}),a.jsx(ot,{path:"/brands",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(aC,{})})})})}),a.jsx(ot,{path:"/campaign-types",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(tC,{})})})})}),a.jsx(ot,{path:"/cards",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(lC,{})})})})}),a.jsx(ot,{path:"/card-users",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(uC,{})})})})}),a.jsx(ot,{path:"/campaigns",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(nC,{})})})})}),a.jsx(ot,{path:"/campaigns/:id",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(iC,{})})})})}),a.jsx(ot,{path:"/reports-table",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(mC,{})})})})}),a.jsx(ot,{path:"/reports",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(hC,{})})})})}),a.jsx(ot,{path:"/report-analytics",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(pC,{})})})})}),a.jsx(ot,{path:"/facebook-accounts",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(xC,{})})})})}),a.jsx(ot,{path:"/facebook-pages",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(wC,{})})})})}),a.jsx(ot,{path:"/business-manager",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(CC,{})})})})}),a.jsx(ot,{path:"/analytics",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx("div",{className:"p-6",children:"Analytics Module (Coming Soon)"})})})})}),a.jsx(ot,{path:"/settings",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx("div",{className:"p-6",children:"Settings Module (Coming Soon)"})})})})}),a.jsx(ot,{path:"/simple-reports-test",element:a.jsx(Nt,{children:a.jsx(wt,{children:a.jsx(jt,{children:a.jsx(EC,{})})})})})]})})})}Gb.createRoot(document.getElementById("root")).render(a.jsx(wi.StrictMode,{children:a.jsx(PC,{})}));
