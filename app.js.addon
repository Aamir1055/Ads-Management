
// Serve frontend static files
app.use(express.static(path.join(__dirname, 'frontend/dist'), {
  maxAge: process.env.NODE_ENV === 'production' ? '1d' : '0'
}));

// SPA fallback - serve index.html for all non-API routes
app.get('*', (req, res, next) => {
  // Skip API routes
  if (req.path.startsWith('/api/') || req.path.startsWith('/uploads/') || req.path.startsWith('/analytics/')) {
    return next();
  }
  res.sendFile(path.join(__dirname, 'frontend/dist/index.html'));
});
